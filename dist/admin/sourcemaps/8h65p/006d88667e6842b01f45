{"version":3,"sources":["webpack://vanilla-admin/./packages/vanilla-utils/src/fileUtils.ts","webpack://vanilla-admin/./packages/vanilla-utils/src/logicUtils.ts","webpack://vanilla-admin/./packages/vanilla-utils/src/mathUtils.ts","webpack://vanilla-admin/./packages/vanilla-utils/src/promiseUtils.ts","webpack://vanilla-admin/./packages/vanilla-utils/src/stringUtils.ts","webpack://vanilla-admin/./packages/vanilla-utils/src/systemUtils.ts","webpack://vanilla-admin/./packages/vanilla-utils/src/typeUtils.ts","webpack://vanilla-admin/./packages/vanilla-utils/index.ts","webpack://vanilla-admin/./plugins/rich-editor/src/scripts/editor/pieces/embedMenuStyles.ts","webpack://vanilla-admin/./plugins/rich-editor/src/scripts/editor/pieces/EditorEventWall.tsx","webpack://vanilla-admin/./node_modules/moment/locale sync en","webpack://vanilla-admin/./plugins/rich-editor/src/scripts/quill/components/blockQuoteStyles.ts","webpack://vanilla-admin/./plugins/rich-editor/src/scripts/editor/pieces/EmbedMenu.tsx","webpack://vanilla-admin/./packages/vanilla-i18n/src/localeStore.ts","webpack://vanilla-admin/./packages/vanilla-i18n/src/LocaleProvider.tsx","webpack://vanilla-admin/./packages/vanilla-i18n/src/translationStore.ts","webpack://vanilla-admin/./packages/vanilla-i18n/src/LocaleDisplayer.tsx","webpack://vanilla-admin/./packages/vanilla-i18n/src/ContentTranslator.tsx","webpack://vanilla-admin/./packages/vanilla-i18n/src/ContentTranslationProvider.tsx","webpack://vanilla-admin/./packages/vanilla-i18n/src/index.ts","webpack://vanilla-admin/./packages/vanilla-dom-utils/src/domData.ts","webpack://vanilla-admin/./packages/vanilla-dom-utils/src/emoji.ts","webpack://vanilla-admin/./packages/vanilla-dom-utils/src/EscapeListener.ts","webpack://vanilla-admin/./packages/vanilla-dom-utils/src/events.ts","webpack://vanilla-admin/./packages/vanilla-dom-utils/src/FocusWatcher.ts","webpack://vanilla-admin/./packages/vanilla-dom-utils/src/sanitization.ts","webpack://vanilla-admin/./packages/vanilla-dom-utils/src/scripts.ts","webpack://vanilla-admin/./packages/vanilla-dom-utils/src/shadowDom.tsx","webpack://vanilla-admin/./packages/vanilla-dom-utils/src/TabHandler.ts","webpack://vanilla-admin/./packages/vanilla-dom-utils/src/visibility.ts","webpack://vanilla-admin/./packages/vanilla-dom-utils/src/index.ts","webpack://vanilla-admin/./plugins/rich-editor/src/scripts/editor/pieces/ImageEmbedModal.tsx","webpack://vanilla-admin/./packages/vanilla-react-utils/src/createContextProvider.tsx","webpack://vanilla-admin/./packages/vanilla-react-utils/src/Hoverable.tsx","webpack://vanilla-admin/./packages/vanilla-react-utils/src/useMountedState.ts","webpack://vanilla-admin/./packages/vanilla-react-utils/src/useAsyncFn.ts","webpack://vanilla-admin/./packages/vanilla-react-utils/src/useAsync.ts","webpack://vanilla-admin/./packages/vanilla-react-utils/src/useMeasure.ts","webpack://vanilla-admin/./packages/vanilla-react-utils/src/useCollisionDetector.tsx","webpack://vanilla-admin/./packages/vanilla-react-utils/src/useComponentDebug.tsx","webpack://vanilla-admin/./packages/vanilla-react-utils/src/useDelayedFunction.ts","webpack://vanilla-admin/./packages/vanilla-react-utils/src/useDomNodeAttachment.tsx","webpack://vanilla-admin/./packages/vanilla-react-utils/src/useEscapeListener.ts","webpack://vanilla-admin/./packages/vanilla-react-utils/src/useFocusWatcher.ts","webpack://vanilla-admin/./packages/vanilla-react-utils/src/useInterval.tsx","webpack://vanilla-admin/./packages/vanilla-react-utils/src/useLastValue.tsx","webpack://vanilla-admin/./packages/vanilla-react-utils/src/useRouteChangePrompt.tsx","webpack://vanilla-admin/./packages/vanilla-react-utils/src/useTabKeyboardHandler.ts","webpack://vanilla-admin/./packages/vanilla-react-utils/src/useThrowError.ts","webpack://vanilla-admin/./packages/vanilla-react-utils/src/deconstructAttributesFromElement.ts","webpack://vanilla-admin/./packages/vanilla-react-utils/src/index.ts","webpack://vanilla-admin/./packages/vanilla-utils/src/debugUtils.ts","webpack://vanilla-admin/./plugins/rich-editor/src/scripts/editor/richEditorVariables.ts","webpack://vanilla-admin/./plugins/rich-editor/src/scripts/editor/richEditorStyles.ts","webpack://vanilla-admin/./packages/vanilla-react-utils/src/mounting.tsx","webpack://vanilla-admin/./applications/dashboard/src/scripts/compatibilityStyles/cssOut.ts","webpack://vanilla-admin/./library/src/scripts/features/swagger/VanillaSwaggerDeepLink.tsx","webpack://vanilla-admin/./library/src/scripts/features/swagger/VanillaSwaggerLayout.tsx","webpack://vanilla-admin/./library/src/scripts/features/swagger/VanillaSwaggerPlugin.tsx","webpack://vanilla-admin/./library/src/scripts/features/swagger/replaceDeepLinkScrolling.tsx","webpack://vanilla-admin/./library/src/scripts/features/swagger/useSwaggerUI.ts","webpack://vanilla-admin/./plugins/swagger-ui/src/scripts/entries/admin.tsx","webpack://vanilla-admin/./build/entries/public-path.ts"],"names":["IMAGE_REGEX","isFileImage","file","test","type","logDebug","name","spaceshipCompare","a","b","flattenObject","obj","delimiter","Object","keys","reduce","acc","key","prefix","length","Array","isArray","assign","unflattenObject","original","result","entries","value","set","simplifyFraction","numerator","denominator","findGCD","gcd","shorthand","resolvePromisesSequentially","promiseFunctions","Error","Promise","resolve","reject","count","results","iterationFunction","previousPromise","currentPromise","then","concat","catch","err","hashString","str","hashReduce","prevHash","currVal","charCodeAt","split","uuidv4","replace","c","r","Math","random","v","toString","labelize","label","parts","map","s","charAt","toLocaleUpperCase","slice","join","stableObjectHash","ordered","sort","forEach","JSON","stringify","compare","val1","val2","localeCompare","slugify","options","whiteSpaceNormalizeRegexp","allowMultipleDashes","normalize","trim","toLocaleLowerCase","normalizeString","splitStringLoosely","toSplit","splitWith","normalizedName","normalizedSplitTerm","normalizedPieces","RegExp","charactersUsed","piece","start","substring","matchAtMention","subtext","shouldStartWithSpace","requireQuotesForWhitespace","lines","lastLine","nonExcludedCharacters","excludeWhiteSpace","excluded","regexStr","regex","match","exec","rawMatch","SAFE_PROTOCOL_REGEX","sanitizeUrl","url","capitalizeFirstLetter","toUpperCase","promiseTimeout","duration","setTimeout","mergeCustomizer","into","source","mergeAndReplaceArrays","item1","item2","mergeWith","OS","guessOperatingSystem","userAgent","navigator","vendor","window","opera","ANDROID","MSStream","IOS","UNKNOWN","isInstanceOfOneOf","needle","haystack","classItem","indexArrayByKey","array","object","item","push","notEmpty","undefined","ensureString","maybeString","TypeError","forceInt","fallback","Number","parseInt","isNaN","embedMenuClasses","useThemeCache","style","styleFactory","globalVars","globalVariables","root","display","alignItems","justifyContent","position","top","left","percent","Mixins","margin","horizontal","transform","background","ColorsUtils","colorOut","mainColors","bg","border","shadowOrBorderBasedOnLightness","zIndex","padding","vertical","borderBottomLeftRadius","borderBottomRightRadius","form","width","imageContainer","paragraph","all","importantUnit","gutter","quarter","font","weight","fonts","weights","normal","lineHeight","lineHeights","base","color","meta","colors","fg","size","medium","align","verticalPadding","styleUnit","half","EDITOR_WALLED_EVENT","EDITOR_EVENT_WALL_CLASS","EditorEventWall","props","ref","useRef","useEffect","current","addEventListener","eventFlagger","removeEventListener","e","preventDefault","event","isEditorWalledEvent","blockQuoteVariables","makeThemeVars","variableFactory","mixBgAndFg","blockQuoteCSS","vars","cssRule","borderLeft","singleBorder","boxSizing","verticalAlign","marginTop","marginBottom","cssOut","EmbedMenuContext","createContext","selected","setSelected","EmbedMenu","children","classes","useState","menuRef","classNames","currentLocale","localeStore","callbacks","getLocales","onLocaleChange","callback","setCurrentLocale","localeKey","getCurrentLocale","getJSLocaleKey","loadLocales","locales","clearLocales","LocaleContext","React","LocaleProvider","setLocales","logWarning","useLocaleInfo","useContext","translationStore","internalTranslationDebugValue","translationDebug","newValue","loadTranslations","translations","clearTranslations","translate","defaultTranslation","substr","message","process","t","LocaleDisplayer","selectedLocale","locale","localeContent","displayLocale","fullLocaleName","displayNames","TranslationPropertyType","NullContentTranslator","logError","context","shouldDisplay","Translator","_TranslationComponent","ContentTranslationProvider","setTranslator","useContentTranslator","getFormData","formElement","HTMLFormElement","data","FormData","toggleAttribute","element","attribute","getAttribute","setAttribute","dataMap","WeakMap","setData","initialValue","has","get","getData","defaultValue","attributeString","hasAttribute","emojiSupportedCache","isEmojiSupported","canvas","document","createElement","getContext","ctx","fillText","getImageData","emojiOptions","className","convertToSafeEmojiCharacters","stringOrNode","twemoji","parse","EscapeListener","returnElement","keydownListener","contains","activeElement","focus","delegatedEventListeners","delegateEvent","eventName","filterSelector","scopeSelector","functionKey","scope","querySelector","HTMLElement","eventHash","includes","wrappedCallback","target","closest","call","removeDelegatedEvent","removeAllDelegatedEvents","getDraggedFile","dataTransfer","files","getPastedFile","clipboardData","items","from","getAsFile","filter","Boolean","mainFile","FocusWatcher","watchedNode","changeHandler","handleFocusOut","handleFocusIn","handleClick","checkDomTreeHasFocus","triggeringElement","wasClicked","checkDomTreeWasClicked","clickedElement","possibleTargets","relatedTarget","explicitOriginalTarget","body","isWatchedInBody","isFocusedInBody","isModal","getElementById","hasFocus","escapeHTML","div","appendChild","createTextNode","innerHTML","unescapeHTML","escapedString","child","childNodes","nodeValue","browserEscapesNoScript","ns","append","startsWith","remove","ensureHtmlElement","selectorOrElement","loadEventCallbacks","rejectionCache","Map","ensureScript","scriptUrl","existingScript","head","getElementsByTagName","script","src","onerror","error","timeout","onload","clearTimeout","delete","prepareShadowRoot","cloneElement","newElementTag","html","newElement","classList","id","parentNode","insertBefore","shadowHeader","attachShadow","mode","TabHandler","tabbable","documentElement","excludedElements","excludedRoots","exemption","elementToFilter","elementIsActiveOrChildOfActive","excludedRoot","tabbableElements","reverse","allowLooping","tabbables","createExcludeFilterWithExemption","currentTabIndex","indexOf","targetIndex","filterAllExcluded","hideElement","add","unhideElement","removeAttribute","elementIsVisible","offsetWidth","offsetHeight","getClientRects","getElementHeight","previousBottomMargin","height","getBoundingClientRect","getComputedStyle","topHeight","max","bottomHeight","finalHeight","bottomMargin","smoothscroll","polyfill","ImageEmbedModal","initialAlt","alt","setAlt","inputRef","handleTextChange","useCallback","stopPropagation","saveAndClose","onSave","onClose","titleID","useUniqueID","isVisible","ModalSizes","SMALL","required","onChange","placeholder","onKeyPress","ButtonTypes","TEXT_PRIMARY","createProvider","valueCalculator","displayName","useContextValue","CreatedProvider","Hoverable","hasExecuted","once","onHover","hoverTimeout","handleHover","dismissTimeout","onMouseEnter","mouseEnterHandler","onMouseLeave","mouseLeaveHandler","Component","useMountedState","mountedRef","useAsyncFn","fn","deps","initialState","status","lastCallId","isMounted","state","callId","prevState","loading","useAsync","EMPTY_RECT","x","y","right","bottom","toJSON","useMeasure","adjustForScrollOffset","watchRef","bounds","setContentRect","refWatch","useLayoutEffect","animationFrameId","measure","requestAnimationFrame","rect","scrollY","resizeListener","debounce","ro","ResizeObserver","observe","cancelAnimationFrame","disconnect","cancel","doRectsOverlap","rect1","rect2","isEmptyRect","hasHorizontalOverlap","hasVerticalOverlap","useCollisionDetector","collisionSourceRef","sourceMeasure","vBoundary1Ref","vBoundary1Measure","vBoundary2Ref","vBoundary2Measure","hBoundary1Ref","hBoundary1Measure","hBoundary2Ref","hBoundary2Measure","hasCollision","useDebugValue","useComponentDebug","debugValue","useDelayedFunction","delay","timeoutId","stop","handler","useDomNodeAttachment","domNodes","node","DomNodeAttacher","_props","nodes","useEscapeListener","actualRoot","escapeListener","useFocusWatcher","bypass","focusWatcher","useInterval","savedCallback","setInterval","clearInterval","useLastValue","useRouteChangePrompt","disabled","onWindowOrTabClose","returnValue","useTabKeyboardHandler","makeTabHandler","handleShiftTab","tabHandler","nextElement","getNext","handleTab","handleTabbing","tabKey","shiftKey","keyCode","useThrowError","setError","deconstructAttributesFromElement","classAsClassName","hrefAsTo","attrs","values","attributes","attr","hasOwnProperty","internalDebugValue","debug","console","log","logDebugConditionnal","outputLog","warn","richEditorVariables","varsFormElements","formElementsVariables","animations","standardAnimations","outline","primary","fade","spacing","paddingLeft","paddingRight","paddingTop","paddingBottom","embedMenu","sizing","minHeight","emojiSize","menuButton","paragraphMenuHandle","offset","insertLink","flyout","maxHeight","viewHeight","nub","menu","borderWidth","pilcrow","fontSize","animation","fadeIn","timing","iterationCount","emojiGroup","mobile","transition","embedButton","text","title","scrollContainer","overshoot","emojiBody","emojiHeader","emojiFooter","buttonContents","iconWrap","richEditorWidth","modernFrame","richEditorClasses","legacyMode","formVars","mediaQueries","layoutVariables","cursor","important","flexDirection","flexGrow","absolute","srOnly","singleLineEllipsis","appearance","textAlign","pointerEvents","content","quote","absolutePosition","middleOfParent","radius","elementaryColors","transparent","paragraphMenu","marginLeft","animationName","animationDuration","animationTimingFunction","animationIterationCount","translateY","paragraphMenuMobile","menuBar","overflow","menuBarToggles","flexWrap","userSelect","maxWidth","minWidth","backgroundColor","paragraphMenuHandleMobile","whiteSpace","oneColumnDown","menuItems","msOverflowStyle","listStyle","button","buttonResetMixin","secondary","topLevelButtonActive","menuItem","upload","embedBar","icon","sizes","small","embedBarSeparator","borderRadius","default","legacyFrame","close","middleRightOfParent","flyoutDescription","separator","borderTop","calc","paragraphMenuPanel","flyoutOffset","hasRendered","portals","PORTAL_MANAGER_ID","PortalContext","applySharedPortalContext","renderPortals","PortalManager","portal","i","ReactDOM","createPortal","component","container","render","mountReact","bypassPortalManager","doRender","unmountBeforeRender","unmountComponentAtNode","setImmediate","mountPoint","cleanupContainer","clearContents","overwrite","parentElement","firstElementChild","mountReactMultiple","components","toCleanup","cleanup","mountPortal","containerID","asRealPortal","selector","objects","cssRaw","flattenNests","DEEP_LINK_ATTR","VanillaSwaggerDeepLink","enabled","path","VanillaSwaggerLayout","errSelectors","specSelectors","getComponent","SvgAssets","VersionPragmaFilter","Operations","Models","Row","Col","Errors","isSwagger2","isOAS3","isSpecEmpty","specStr","loadingStatus","loadingMessage","lastErr","lastError","lastErrMsg","marginRight","VanillaSwaggerPlugin","DeepLink","replaceDeepLinkScrolling","swagger","plugins","DeepLinkingLayout","statePlugins","layout","actions","scrollToElement","elementToScroll","__VANILLA_GLOBAL_SCROLL_OFFSET__","importSwagger","imported","SwaggerUI","useSwaggerUI","_options","spec","tryIt","headings","setHeadings","isLoading","setIsLoading","swaggerRef","SwaggerUIConstructor","domNode","operationsSorter","deepLinking","onComplete","opblocks","querySelectorAll","blockNode","level","methodText","textContent","pathText","onReady","requestInterceptor","request","headers","getMeta","siteUrl","location","search","__webpack_public_path__","assetUrl","__BUILD__SECTION__"],"mappings":"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","file":"addons/swagger-ui.min.js?006d88667e6842b01f45","sourcesContent":["/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { logDebug } from \"./debugUtils\";\n\n/** This should mirror extensions allowed in Vanilla\\ImageResizer.php */\nconst IMAGE_REGEX = /^image\\/(gif|jpe?g|png)/i;\n\n/**\n * A filter for use with [].filter\n *\n * Matches only image image type files.\n * @private\n *\n * @param file - A File object.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/File\n *\n * @returns Whether or not the file is an acceptable image\n */\nexport function isFileImage(file: File): boolean {\n    if (IMAGE_REGEX.test(file.type)) {\n        return true;\n    }\n\n    logDebug(\"Filtered out non-image file: \", file.name);\n    return false;\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport set from \"lodash/set\";\n\nexport function spaceshipCompare(a, b): number {\n    if (a > b) {\n        return 1;\n    } else if (a < b) {\n        return -1;\n    } else {\n        return 0;\n    }\n}\n\nexport function flattenObject(obj: Record<any, any>, delimiter = \"\") {\n    return Object.keys(obj).reduce((acc, key) => {\n        const prefix = delimiter.length ? delimiter + \".\" : \"\";\n        if (typeof obj[key] === \"object\" && !Array.isArray(obj[key]) && obj[key] !== null) {\n            Object.assign(acc, flattenObject(obj[key], prefix + key));\n        } else {\n            acc[prefix + key] = obj[key];\n        }\n        return acc;\n    }, {});\n}\n\nexport function unflattenObject(original: Record<any, any>) {\n    const result = {};\n\n    for (const [key, value] of Object.entries(original)) {\n        set(result, key, value);\n    }\n\n    return result;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n/**\n * Get various information about a fraction.\n *\n * @param numerator The fraction numerator.\n * @param denominator The fraction denominator.\n */\nexport function simplifyFraction(numerator: number, denominator: number) {\n    const findGCD = (a, b) => {\n        return b ? findGCD(b, a % b) : a;\n    };\n    const gcd = findGCD(numerator, denominator);\n\n    numerator = numerator / gcd;\n    denominator = denominator / gcd;\n\n    return {\n        numerator,\n        denominator,\n        shorthand: denominator + \":\" + numerator,\n    };\n}\n","/**\n * Utility functions related to promises/async.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\ntype NormalCallback = (...args: any[]) => any;\ntype PromiseCallback = (...args: any[]) => Promise<any>;\n\nexport type PromiseOrNormalCallback = NormalCallback | PromiseCallback;\n\n/**\n * Resolve an array of functions that return promises sequentially.\n *\n * @param promiseFunctions - The functions to execute.\n *\n * @returns An array of all results in sequential order.\n *\n * @example\n * const urls = ['/url1', '/url2', '/url3']\n * const functions = urls.map(url => () => fetch(url))\n * resolvePromisesSequentially(funcs)\n *   .then(console.log)\n *   .catch(console.error)\n */\nexport function resolvePromisesSequentially(promiseFunctions: PromiseOrNormalCallback[]): Promise<any[]> {\n    if (!Array.isArray(promiseFunctions)) {\n        throw new Error(\"First argument needs to be an array of Promises\");\n    }\n\n    return new Promise((resolve, reject) => {\n        let count = 0;\n        let results = [];\n\n        function iterationFunction(previousPromise, currentPromise) {\n            return previousPromise\n                .then(result => {\n                    if (count++ !== 0) {\n                        results = results.concat(result);\n                    }\n\n                    return currentPromise(result, results, count);\n                })\n                .catch(err => reject(err));\n        }\n\n        promiseFunctions = promiseFunctions.concat(() => Promise.resolve());\n\n        promiseFunctions.reduce(iterationFunction, Promise.resolve(false)).then(() => {\n            resolve(results);\n        });\n    });\n}\n","/**\n * Utilities related to strings.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport mergeWith from \"lodash/mergeWith\";\n\n/**\n * A simple, fast method of hashing a string. Similar to Java's hash function.\n * https://stackoverflow.com/a/7616484/1486603\n *\n * @param str - The string to hash.\n *\n * @returns The hash code returned.\n */\nexport function hashString(str: string): number {\n    function hashReduce(prevHash, currVal) {\n        // tslint:disable-next-line:no-bitwise\n        return (prevHash << 5) - prevHash + currVal.charCodeAt(0);\n    }\n    return str.split(\"\").reduce(hashReduce, 0);\n}\n\n/**\n * Generate a RFC4122 compliant uuid. NOTE!!! Not cryptographically secure.\n *\n * This does not use a true random source (Eg. using Math.random()).\n * To use a better source would require dropping IE in order to use the crypto module.\n */\nexport function uuidv4() {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n        const r = (Math.random() * 16) | 0,\n            v = c == \"x\" ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\n\n/**\n * Convert a camel case variable to a title case label.\n *\n * @param str - The string to labelize.\n * @returns Returns a new string suitable for a label.\n */\nexport function labelize(str: string): string {\n    /**\n     * $labelCode = preg_replace('`(?<![A-Z0-9])([A-Z0-9])`', ' $1', $labelCode);\n     * $labelCode = preg_replace('`([A-Z0-9])(?=[a-z])`', ' $1', $labelCode);\n     * $labelCode = preg_replace('`\\s+`', ' ', $labelCode);\n     * $labelCode = ucfirst(trim($labelCode));\n     */\n    let label = str.replace(/([^A-Z0-9])([A-Z0-9])/, \"$1 $2\");\n    label = label.replace(/([A-Z0-9])(?=[a-z])/, \" $1\");\n    label = label.replace(/[_-]/, \" \");\n    label = label.replace(/\\s+/, \" \");\n    let parts = label.split(\" \");\n    label = parts.map((s) => s.charAt(0).toLocaleUpperCase() + s.slice(1)).join(\" \");\n    return label;\n}\n\n/**\n * Hash an object into a short key, that is stable no matter what order the parameters are.\n */\nexport function stableObjectHash<T extends object>(obj: T): number {\n    // Sort the object first.\n    const ordered: any = {};\n    Object.keys(obj)\n        .sort()\n        .forEach(function (key) {\n            ordered[key] = obj[key];\n        });\n    return hashString(JSON.stringify(ordered));\n}\n\ntype CompareReturn = -1 | 0 | 1;\n\n/**\n * Utility for sorting values. Similar to the <=> operator in PHP.\n *\n * @param val1 The first value to compare.\n * @param val2 The second value to compare.\n *\n * @returns -1, 0, or 1\n */\nexport function compare<T extends string | number>(val1: T, val2: T): CompareReturn {\n    if (typeof val1 === \"string\" && typeof val2 === \"string\") {\n        return val1.localeCompare(val2) as CompareReturn;\n    } else {\n        if (val1 > val2) {\n            return 1;\n        } else if (val1 < val2) {\n            return -1;\n        }\n        return 0;\n    }\n}\n\n/**\n * Parse a string into a URL friendly format.\n *\n * Eg. Why Uber isn’t spelled Über -> why-uber-isnt-spelled-uber\n *\n * @param str The string to parse.\n */\nexport function slugify(\n    str: string,\n    options?: {\n        allowMultipleDashes?: boolean;\n    },\n): string {\n    const whiteSpaceNormalizeRegexp = options && options.allowMultipleDashes ? /[\\s]+/g : /[-\\s]+/g;\n    return str\n        .normalize(\"NFD\") // Normalize accented characters into ASCII equivalents\n        .replace(/[^\\w\\s$*_+~.()'\"\\-!:@]/g, \"\") // REmove characters that don't URL encode well\n        .trim() // Trim whitespace\n        .replace(whiteSpaceNormalizeRegexp, \"-\") // Normalize whitespace\n        .toLocaleLowerCase(); // Convert to locale aware lowercase.\n}\n\nexport function normalizeString(str: string): string {\n    return str.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\n}\n\n/**\n * Split a string in multiple pieces similar to String.prototype.split but ignore most acccent characters.\n *\n * This will still return pieces with accents.\n *\n * @param toSplit The string to split.\n * @param splitWith The string to split with.\n */\nexport function splitStringLoosely(toSplit: string, splitWith: string): string[] {\n    const normalizedName = normalizeString(toSplit);\n    const normalizedSplitTerm = normalizeString(splitWith);\n    const normalizedPieces = normalizedName.split(new RegExp(`(${normalizedSplitTerm})`, \"i\"));\n\n    let charactersUsed = 0;\n    return normalizedPieces.map((piece) => {\n        const start = charactersUsed;\n        charactersUsed += piece.length;\n        return toSplit.substring(start, charactersUsed);\n    });\n}\n\ninterface IMentionMatch {\n    match: string;\n    rawMatch: string;\n}\n\n/**\n * Custom matching to allow quotation marks in the matching string as well as spaces.\n * Spaces make things more complicated.\n *\n * @param subtext - The string to be tested.\n * @param shouldStartWithSpace - Should the pattern include a test for a whitespace prefix?\n * @returns Matching string if successful.  Null on failure to match.\n */\nexport function matchAtMention(\n    subtext: string,\n    shouldStartWithSpace: boolean = false,\n    requireQuotesForWhitespace: boolean = true,\n): IMentionMatch | null {\n    // Split the string at the lines to allow for a simpler regex.\n    const lines = subtext.split(\"\\n\");\n    const lastLine = lines[lines.length - 1];\n\n    // If you change this you MUST change the regex in src/scripts/__tests__/legacy.test.js !!!\n    /**\n     * Put together the non-excluded characters.\n     *\n     * @param {boolean} excludeWhiteSpace - Whether or not to exclude whitespace characters.\n     *\n     * @returns {string} A Regex string.\n     */\n    function nonExcludedCharacters(excludeWhiteSpace) {\n        let excluded =\n            \"[^\" +\n            '\"' + // Quote character\n            \"\\\\u0000-\\\\u001f\\\\u007f-\\\\u009f\" + // Control characters\n            \"\\\\u2028\"; // Line terminator\n\n        if (excludeWhiteSpace) {\n            excluded += \"\\\\s\";\n        }\n\n        excluded += \"]\";\n        return excluded;\n    }\n\n    let regexStr =\n        \"@\" + // @ Symbol triggers the match\n        \"(\" +\n        // One or more non-greedy characters that aren't excluded. Whitespace is allowed, but a starting quote is required.\n        '\"(' +\n        nonExcludedCharacters(false) +\n        '+?)\"?' +\n        \"|\" + // Or\n        // One or more non-greedy characters that aren't exluded. Whitespace may be excluded.\n        \"(\" +\n        nonExcludedCharacters(requireQuotesForWhitespace) +\n        '+?)\"?' +\n        \")\" +\n        \"(?:\\\\n|$)\"; // Newline terminates.\n\n    // Determined by at.who library\n    if (shouldStartWithSpace) {\n        regexStr = \"(?:^|\\\\s)\" + regexStr;\n    }\n    const regex = new RegExp(regexStr, \"gi\");\n    const match = regex.exec(lastLine);\n    if (match) {\n        return {\n            rawMatch: match[0],\n            match: match[2] || match[1], // Return either of the matching groups (quoted or unquoted).\n        };\n    }\n\n    // No match\n    return null;\n}\n\nconst SAFE_PROTOCOL_REGEX = /^(http:\\/\\/|https:\\/\\/|tel:|mailto:\\/\\/|\\/|#)/;\n\n/**\n * Sanitize a URL to ensure that it matches a whitelist of approved url schemes. If the url does not match one of these schemes, prepend `unsafe:` before it.\n *\n * Allowed protocols\n * - \"http://\",\n * - \"https://\",\n * - \"tel:\",\n * - \"mailto://\",\n * - \"#\"\n *\n * @param url The url to sanitize.\n */\nexport function sanitizeUrl(url: string) {\n    if (url.match(SAFE_PROTOCOL_REGEX)) {\n        return url;\n    } else {\n        return \"unsafe:\" + url;\n    }\n}\n\n/**\n * Capitalize the first character of a string.\n *\n * @param str The string to modify.\n */\nexport function capitalizeFirstLetter(str: string): string {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n/**\n * Simple utility function for waiting some duration in promise.\n *\n * @param duration The amount of time to wait.\n */\nexport function promiseTimeout(duration: number): Promise<void> {\n    return new Promise((resolve) => {\n        setTimeout(resolve, duration);\n    });\n}\n\nfunction mergeCustomizer(into: any, source: any) {\n    if (Array.isArray(into) || Array.isArray(source)) {\n        return source;\n    }\n}\n\n/**\n * Merge 2 objects, but replace arrays instead of merging them.\n */\nexport function mergeAndReplaceArrays(item1: Record<any, any>, item2: Record<any, any>) {\n    return mergeWith({}, item1, item2, mergeCustomizer);\n}\n","/**\n * Utilities related to the user's system.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nexport enum OS {\n    IOS = \"ios\",\n    ANDROID = \"android\",\n    UNKNOWN = \"unkwown\",\n}\n\n/**\n * Provide relatively rough detection of mobile OS.\n *\n * This is not even close to perfect but can be used to try and offer,\n * OS specific input elements for things like datetimes.\n */\nexport function guessOperatingSystem(): OS {\n    const userAgent = navigator.userAgent || navigator.vendor || (window as any).opera;\n\n    if (/android/i.test(userAgent)) {\n        return OS.ANDROID;\n    }\n\n    // iOS detection from: http://stackoverflow.com/a/9039885/177710\n    if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {\n        return OS.IOS;\n    }\n\n    return OS.UNKNOWN;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\ninterface IClass {\n    new (): any;\n}\n\n/**\n * Determine if an instance is an instance of any of the listed classes.\n *\n * @param needle The instance.\n * @param haystack The classes to check.\n */\nexport function isInstanceOfOneOf(needle: any, haystack: IClass[]) {\n    for (const classItem of haystack) {\n        if (needle instanceof classItem) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\n/**\n * Transform an array of objects and an map of objets with a given key.\n *\n * Objects that do not contain the given key are dropped.\n *\n * @param array The array to go through.\n * @param key The key to lookup.\n */\nexport function indexArrayByKey<T extends object>(\n    array: T[],\n    key: string,\n): {\n    [key: string]: T;\n} {\n    const object = {};\n    for (const item of array) {\n        if (key in item) {\n            if (!(item[key] in object)) {\n                object[item[key]] = [];\n            }\n            object[item[key]].push(item);\n        }\n    }\n    return object;\n}\n\nexport function notEmpty<TValue>(value: TValue | null | undefined): value is TValue {\n    return value !== null && value !== undefined;\n}\n\nexport function ensureString(maybeString: any) {\n    if (typeof maybeString !== \"string\") throw new TypeError(\"Expected maybeString to have type string\");\n    return maybeString;\n}\n\nexport function forceInt(value: string | null, fallback: number): number {\n    let result = Number.parseInt(value ?? \"\", 10);\n    return Number.isNaN(result) ? fallback : result;\n}\n\nexport type RecordID = string | number;\n","/**\n * General utility functions.\n * This file should have NO external dependencies other than javascript.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nexport * from \"./src/debugUtils\";\nexport * from \"./src/fileUtils\";\nexport * from \"./src/logicUtils\";\nexport * from \"./src/mathUtils\";\nexport * from \"./src/promiseUtils\";\nexport * from \"./src/stringUtils\";\nexport * from \"./src/systemUtils\";\nexport * from \"./src/typeUtils\";\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { importantUnit } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { shadowHelper, shadowOrBorderBasedOnLightness } from \"@vanilla/library/src/scripts/styles/shadowHelpers\";\nimport { percent } from \"csx\";\n\nexport const embedMenuClasses = useThemeCache(() => {\n    const style = styleFactory(\"embedMenu\");\n    const globalVars = globalVariables();\n\n    const root = style({\n        display: \"inline-flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        position: \"absolute\",\n        top: 0,\n        left: percent(50),\n        ...Mixins.margin({ horizontal: \"auto\" }),\n        transform: \"translate(-50%, -50%)\",\n        background: ColorsUtils.colorOut(globalVars.mainColors.bg),\n        ...Mixins.border(),\n        ...shadowOrBorderBasedOnLightness(),\n        zIndex: 100,\n        ...Mixins.padding({\n            vertical: 4,\n            horizontal: 2,\n        }),\n        ...{\n            \"&.isOpened\": {\n                borderBottomLeftRadius: 0,\n                borderBottomRightRadius: 0,\n            },\n            \"& > *\": {\n                ...Mixins.margin({ horizontal: 4 }),\n            },\n        },\n    });\n\n    const form = style(\"form\", {\n        display: \"block\",\n        width: percent(100),\n    });\n\n    const imageContainer = style(\"imageContainer\", {\n        position: \"relative\",\n    });\n\n    // Extra specific and defensive here because it's within userContent styles.\n    const paragraph = style(\"paragraph\", {\n        ...{\n            \"&&\": {\n                // Specificity required to override default label styles\n                ...Mixins.padding({\n                    all: 0,\n                    top: importantUnit(globalVars.gutter.quarter),\n                }),\n                ...Mixins.font({\n                    weight: globalVars.fonts.weights.normal,\n                    lineHeight: globalVars.lineHeights.base,\n                    color: globalVars.meta.colors.fg,\n                    size: globalVars.fonts.size.medium,\n                    align: \"left\",\n                }),\n            },\n        },\n    });\n    const verticalPadding = style(\"verticalPadding\", {\n        ...Mixins.padding({\n            vertical: styleUnit(globalVars.gutter.half),\n        }),\n    });\n\n    return {\n        root,\n        form,\n        imageContainer,\n        paragraph,\n        verticalPadding,\n    };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useRef, useEffect } from \"react\";\n\ninterface IProps extends React.PropsWithoutRef<JSX.IntrinsicElements[\"div\"]> {}\n\nconst EDITOR_WALLED_EVENT = \"isEditorWalledEvent\";\nconst EDITOR_EVENT_WALL_CLASS = \"editorEventWall\";\n\n/**\n * A react component that prevents events from propagating up to quill.\n *\n * This marks events so they can be ignored by our own event handlers in quill.\n * Currently this is only implemented for the EmbedSelectionModule. See usages of isEditorWalledEvent\n */\nexport function EditorEventWall(props: IProps) {\n    const ref = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n        const { current } = ref;\n        if (!current) {\n            return;\n        }\n\n        current.addEventListener(\"click\", eventFlagger);\n        current.addEventListener(\"mouseup\", eventFlagger);\n        // current.addEventListener(\"mousedown\", eventFlagger);\n        current.addEventListener(\"keydown\", eventFlagger);\n        return () => {\n            current.removeEventListener(\"click\", eventFlagger);\n            current.removeEventListener(\"mouseup\", eventFlagger);\n            // current.removeEventListener(\"mousedown\", eventFlagger);\n            current.removeEventListener(\"keydown\", eventFlagger);\n        };\n    }, [ref]);\n\n    return (\n        <div\n            ref={ref}\n            {...props}\n            onClick={(e) => {\n                e.preventDefault();\n            }}\n            className={EDITOR_EVENT_WALL_CLASS}\n        />\n    );\n}\n\n/**\n * Event listener that flags items originating from inside of HTMLElement inside an event wall.\n * @param event\n */\nconst eventFlagger = (event: Event) => {\n    event[EDITOR_WALLED_EVENT] = true;\n};\n\n/**\n * Determine if an event has been marked to be walled.\n */\nexport function isEditorWalledEvent(event: Event): boolean {\n    return !!(event as any)[EDITOR_WALLED_EVENT];\n}\n","var map = {\n\t\"./en-SG\": 83,\n\t\"./en-SG.js\": 83,\n\t\"./en-au\": 84,\n\t\"./en-au.js\": 84,\n\t\"./en-ca\": 85,\n\t\"./en-ca.js\": 85,\n\t\"./en-gb\": 86,\n\t\"./en-gb.js\": 86,\n\t\"./en-ie\": 87,\n\t\"./en-ie.js\": 87,\n\t\"./en-il\": 88,\n\t\"./en-il.js\": 88,\n\t\"./en-nz\": 89,\n\t\"./en-nz.js\": 89\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 147;","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license Proprietary\n */\n\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { cssRule } from \"@library/styles/styleShim\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { singleBorder } from \"@library/styles/styleHelpersBorders\";\nimport { userSelect } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { percent } from \"csx\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const blockQuoteVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"blockQuote\");\n    const colors = makeThemeVars(\"colors\", {\n        fg: globalVars.mainColors.fg,\n        border: {\n            color: globalVars.mixBgAndFg(0.23),\n        },\n    });\n\n    return {\n        colors,\n    };\n});\n\nexport const blockQuoteCSS = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = blockQuoteVariables();\n    cssRule(\".blockquote\", {\n        display: \"block\",\n        margin: styleUnit(0),\n        ...Mixins.padding({\n            all: 3,\n            left: 18,\n        }),\n        borderLeft: singleBorder({\n            color: vars.colors.border.color,\n            width: 6,\n        }),\n        boxSizing: \"border-box\",\n        verticalAlign: \"middle\",\n    });\n    cssRule(\".blockquote-content\", {\n        ...{\n            \"& > *:first-child\": {\n                marginTop: styleUnit(0),\n            },\n            \"& > *:last-child\": {\n                marginBottom: styleUnit(0),\n            },\n        },\n    });\n    cssOut(`.embedLink-excerpt`, {\n        color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n    });\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { createContext, PropsWithChildren, ReactNode, useRef, useState } from \"react\";\nimport { embedMenuClasses } from \"@rich-editor/editor/pieces/embedMenuStyles\";\nimport { EditorEventWall } from \"@rich-editor/editor/pieces/EditorEventWall\";\nimport classNames from \"classnames\";\n\ninterface IEmbedMenuContext {\n    selected: string | undefined;\n    setSelected(name: string | undefined);\n}\n\nexport const EmbedMenuContext = createContext<IEmbedMenuContext>({\n    selected: undefined,\n    setSelected: () => {},\n});\n\ninterface IProps {}\n\n/**\n * Renders an embed menu and manages it's context.\n */\nexport function EmbedMenu(props: PropsWithChildren<IProps>) {\n    const { children } = props;\n    const classes = embedMenuClasses();\n    const [selected, setSelected] = useState<string | undefined>();\n    const menuRef = useRef<HTMLDivElement | null>(null);\n    return (\n        <EmbedMenuContext.Provider value={{ selected, setSelected }}>\n            <EditorEventWall>\n                <div\n                    role=\"toolbar\"\n                    ref={menuRef}\n                    className={classNames({ [classes.root]: true, isOpened: selected != null })}\n                >\n                    {children}\n                </div>\n            </EditorEventWall>\n        </EmbedMenuContext.Provider>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nexport interface ILocale {\n    localeID: string;\n    localeKey: string;\n    regionalKey: string;\n    displayNames: {\n        [localeKey: string]: string;\n    };\n}\n\nlet currentLocale = \"en\";\nlet localeStore: ILocale[] = [];\nlet callbacks: Array<() => void> = [];\n\n/**\n * Get the available locales.\n */\nexport function getLocales(): ILocale[] {\n    return localeStore;\n}\n\n/**\n * Register a handler for if the locales change.\n * @param callback\n */\nexport function onLocaleChange(callback: () => void) {\n    callbacks.push(callback);\n}\n\n/**\n * Set the current locale.\n */\nexport function setCurrentLocale(localeKey: string) {\n    currentLocale = localeKey;\n    callbacks.forEach(callback => callback());\n}\n\n/**\n * Get the current locale.\n */\nexport function getCurrentLocale() {\n    return currentLocale;\n}\n\n/**\n * Get the current locale in format accepted by Javascript localization functions.\n *\n * PHP canonicalized locales use `_` for the regional separator.\n * Javascript uses `-`.\n */\nexport function getJSLocaleKey() {\n    return currentLocale.replace(\"_\", \"-\");\n}\n\n/**\n * Load a group of locales.\n */\nexport function loadLocales(locales: ILocale[]) {\n    localeStore = [...localeStore, ...locales];\n    callbacks.forEach(callback => callback());\n}\n\n/**\n * Clear the loaded locales.\n */\nexport function clearLocales() {\n    localeStore = [];\n    callbacks.forEach(callback => callback());\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useState, useContext, useEffect } from \"react\";\nimport { ILocale, getLocales, onLocaleChange, getCurrentLocale } from \"./localeStore\";\nimport { logWarning } from \"@vanilla/utils\";\n\nconst LocaleContext = React.createContext<{\n    locales: ILocale[];\n    currentLocale: string | null;\n}>({\n    locales: [],\n    currentLocale: null,\n});\n\nexport function LocaleProvider(props: { children?: React.ReactNode }) {\n    const [locales, setLocales] = useState(getLocales());\n    const [currentLocale, setCurrentLocale] = useState(getCurrentLocale());\n\n    if (!currentLocale) {\n        logWarning(\"No locale loaded for <LocaleProvider />\");\n    }\n\n    useEffect(() => {\n        setLocales(getLocales());\n        setCurrentLocale(getCurrentLocale());\n\n        onLocaleChange(() => {\n            setLocales(getLocales());\n            setCurrentLocale(getCurrentLocale());\n        });\n    }, [setLocales, setCurrentLocale]);\n\n    return (\n        <LocaleContext.Provider\n            value={{\n                locales,\n                currentLocale,\n            }}\n        >\n            {props.children}\n        </LocaleContext.Provider>\n    );\n}\n\nexport function useLocaleInfo() {\n    return useContext(LocaleContext);\n}\n","import { logError, logWarning } from \"@vanilla/utils\";\n\n/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\ninterface ITranslations {\n    [key: string]: string;\n}\n\nlet translationStore: ITranslations | null = null;\n\nlet internalTranslationDebugValue = false;\n\n/**\n * Get or set the debug flag.\n *\n * @param newValue - The new value of debug.\n * @returns the current debug setting.\n */\nexport function translationDebug(newValue?: boolean): boolean {\n    if (newValue !== undefined) {\n        internalTranslationDebugValue = newValue;\n    }\n\n    return internalTranslationDebugValue;\n}\n\n/**\n * Load a set of key value pairs as translation resources.\n */\nexport function loadTranslations(translations: ITranslations) {\n    translationStore = { ...translations };\n}\n\n/**\n * Clear all translation resources.\n */\nexport function clearTranslations() {\n    translationStore = null;\n}\n\n/**\n * Translate a string into the current locale.\n *\n * @param str - The string to translate.\n * @param defaultTranslation - The default translation to use.\n *\n * @returns Returns the translation or the default.\n */\nexport function translate(str: string, defaultTranslation?: string): string {\n    // Codes that begin with @ are considered literals.\n    if (str.substr(0, 1) === \"@\") {\n        return str.substr(1);\n    }\n\n    const fallback = defaultTranslation !== undefined ? defaultTranslation : str;\n\n    if (!translationStore) {\n        // Test environment allows top level static initialization.\n        const message = `Attempted to translate a value '${str}' before the translation store was initialized.`;\n        switch (process.env.NODE_ENV) {\n            case \"production\":\n                logWarning(message);\n                break;\n            case \"development\":\n                throw new Error(message + \" Don't use t() in the top level of a file or a static property.\");\n            case \"test\":\n                // Tests (like storybook and unit testing) don't need to actually bootstrap a full translation store all the time.\n                break;\n        }\n        return fallback;\n    }\n\n    if (translationStore[str] !== undefined) {\n        return translationStore[str];\n    }\n\n    if (translationDebug()) {\n        return \"☢️☢️☢️\" + fallback + \"☢️☢️☢️\";\n    } else {\n        return fallback;\n    }\n}\n\n/**\n * The t function is an alias for translate.\n */\nexport const t = translate;\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license Proprietary\n */\nimport React from \"react\";\nimport { useLocaleInfo } from \"./LocaleProvider\";\nimport { translate } from \"./translationStore\";\nimport { ILocale } from \"./localeStore\";\n\ninterface IProps {\n    localeContent: string; // The locale key to translate into a full name.\n    displayLocale?: string; // The language to use for the display.\n}\n\n/**\n * Component for displaying a locale translated into a different locale.\n *\n * Currently this relies on the subcommuntiies endpoint to provide all translations for active locale.s\n */\nexport function LocaleDisplayer(props: IProps) {\n    const { locales, currentLocale } = useLocaleInfo();\n    if (!currentLocale) {\n        return null;\n    }\n\n    let selectedLocale: ILocale | null = null;\n    for (const locale of locales) {\n        if (locale.localeKey === props.localeContent) {\n            selectedLocale = locale;\n        }\n    }\n\n    if (!selectedLocale) {\n        return <span lang={props.displayLocale}>Unknown Language {props.localeContent}</span>;\n    }\n\n    let fullLocaleName = selectedLocale.displayNames[props.displayLocale || currentLocale];\n    if (!fullLocaleName) {\n        fullLocaleName = translate(props.localeContent);\n    }\n\n    return <span lang={props.displayLocale}>{fullLocaleName}</span>;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { logError, RecordID } from \"@vanilla/utils\";\n\nexport interface IContentTranslatorProps {\n    isLoading?: boolean;\n    isFullScreen?: boolean;\n    properties: ITranslationProperty[];\n    resource: string;\n    title: string;\n    sourceLocale?: string | null;\n    activeLocale?: string | null; // for organizecategories\n    afterSave?: () => void;\n}\n\n// Subtypes\nexport enum TranslationPropertyType {\n    TEXT = \"text\",\n    TEXT_MULTILINE = \"\",\n}\n\nexport interface ITranslationProperty {\n    recordType: string; // Ex. knowledgeCategory\n    recordID?: RecordID; // Ex. 425\n    recordKey?: string; // Ex. Garden.Description\n    sourceText: string; // Ex. \"Howdy Stranger\"\n    propertyName: string; // Ex. name\n    propertyValidation: ITranslationPropertyValidation;\n    propertyType: TranslationPropertyType;\n}\n\nexport interface ITranslationPropertyValidation {\n    minLength?: number;\n    maxLength?: number;\n}\n\nexport const NullContentTranslator: React.FC<IContentTranslatorProps> = (props) => {\n    logError(\"Rendering a Null Content translator. Be sure to check `shouldDisplay` before rendering.\");\n    return null;\n};\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useContext } from \"react\";\nimport { IContentTranslatorProps, NullContentTranslator } from \"./ContentTranslator\";\nimport { useLocaleInfo } from \"./LocaleProvider\";\n\ninterface IContentTranslator {\n    shouldDisplay: boolean;\n    Translator: React.ComponentType<IContentTranslatorProps>;\n}\n\nconst context = React.createContext<IContentTranslator>({\n    shouldDisplay: false,\n    Translator: NullContentTranslator,\n});\n\nlet _TranslationComponent: React.ComponentType<IContentTranslatorProps> | null = null;\n\n/**\n * Provider of the translation component.\n */\nexport const ContentTranslationProvider = (props: { children: React.ReactNode }) => {\n    const { locales } = useLocaleInfo();\n\n    return (\n        <context.Provider\n            value={{\n                shouldDisplay: _TranslationComponent !== null && locales.length > 1,\n                Translator: _TranslationComponent !== null ? _TranslationComponent : NullContentTranslator,\n            }}\n        >\n            {props.children}\n        </context.Provider>\n    );\n};\n\nContentTranslationProvider.setTranslator = (Translator: React.ComponentType<IContentTranslatorProps>) => {\n    _TranslationComponent = Translator;\n};\n\nexport function useContentTranslator(): IContentTranslator {\n    return useContext(context);\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nexport * from \"./LocaleDisplayer\";\nexport * from \"./localeStore\";\nexport * from \"./translationStore\";\nexport * from \"./LocaleProvider\";\nexport * from \"./ContentTranslationProvider\";\nexport * from \"./ContentTranslator\";\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n/**\n * Get the form data out of a form element.\n *\n * @param formElement - The element to get the data out of.\n *\n * @returns {Object}\n */\nexport function getFormData(formElement: Node | null) {\n    if (!(formElement instanceof HTMLFormElement)) {\n        return {};\n    }\n\n    const data = new FormData(formElement) as any;\n    const result = {};\n\n    data.forEach((key, value) => {\n        result[key] = value;\n    });\n\n    return result;\n}\n\n/**\n * Toggle any attribute on an element.\n *\n * @param element - The element to toggle on.\n * @param attribute - The attribute to toggle.\n */\nexport function toggleAttribute(element: Element, attribute: string) {\n    const newValue = element.getAttribute(attribute) === \"false\";\n    element.setAttribute(attribute, newValue ? \"true\" : \"false\");\n}\n\nconst dataMap = new WeakMap();\n\n/**\n * Set a piece of data specific to a DOM Element. Similar to `$.data`.\n *\n * @param element - The DOM Element to assosciate the data with.\n * @param key - The key to assosciate the data with.\n * @param value - The value to store.\n */\nexport function setData(element: Element, key: string, value: any) {\n    const initialValue = dataMap.has(element) ? dataMap.get(element) : {};\n    initialValue[key] = value;\n\n    dataMap.set(element, initialValue);\n}\n\n/**\n * Get a piece of data specific to a DOM Element. Similar to `$.data`.\n *\n * @param element - The DOM Element to lookup.\n * @param key - The key to lookup.\n * @param defaultValue - A value to use if the element or key aren't found.\n */\nexport function getData(element: Element, key: string, defaultValue?: any) {\n    if (dataMap.has(element) && dataMap.get(element)[key]) {\n        return dataMap.get(element)[key];\n    }\n\n    const attributeString = `data-${key}`;\n\n    if (element.hasAttribute(attributeString)) {\n        return element.getAttribute(attributeString);\n    }\n\n    return defaultValue;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport twemoji from \"twemoji\";\n\nlet emojiSupportedCache: boolean | null = null;\n\n/**\n * Determine if the browser/OS combo has support for real unicode emojis.\n */\nexport function isEmojiSupported() {\n    if (emojiSupportedCache !== null) {\n        return emojiSupportedCache;\n    }\n\n    if (process.env.NODE_ENV !== \"test\") {\n        // Test environment\n        const canvas = document.createElement(\"canvas\");\n        if (canvas.getContext && canvas.getContext(\"2d\")) {\n            const ctx = document.createElement(\"canvas\").getContext(\"2d\");\n            if (ctx) {\n                ctx.fillText(\"😗\", -2, 4);\n                emojiSupportedCache = ctx.getImageData(0, 0, 1, 1).data[3] > 0;\n            } else {\n                emojiSupportedCache = false;\n            }\n        } else {\n            emojiSupportedCache = false;\n        }\n    } else {\n        emojiSupportedCache = true;\n    }\n\n    return emojiSupportedCache;\n}\n\nconst emojiOptions = {\n    className: \"fallBackEmoji\",\n    size: \"72x72\",\n};\n\n/**\n * Returns either native emoji or fallback image\n *\n * @param stringOrNode - A DOM Node or string to convert.\n */\nexport function convertToSafeEmojiCharacters(stringOrNode: string | Node) {\n    if (isEmojiSupported()) {\n        return stringOrNode;\n    }\n    return twemoji.parse(stringOrNode, emojiOptions);\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n/**\n * Register an keyboard listener for the escape key.\n */\nexport class EscapeListener {\n    /**\n     * @param root - The element to watch for the escape listener in.\n     * @param returnElement - The element to return to when escape is pressed.\n     * @param callback\n     */\n    public constructor(\n        private root: HTMLElement,\n        private returnElement?: HTMLElement,\n        private callback?: (event: KeyboardEvent) => void,\n    ) {}\n\n    /**\n     * Start the listeners.\n     */\n    public start = () => {\n        this.root.addEventListener(\"keydown\", this.keydownListener);\n    };\n\n    /**\n     * Stop the listeners.\n     */\n    public stop = () => {\n        this.root.removeEventListener(\"keydown\", this.keydownListener);\n    };\n\n    /**\n     * Handler that checks for the key of an keyboard event and:\n     *\n     * - Returns focous to the element from the constructor.\n     * - Calls the optional callback.\n     */\n    private keydownListener = (event: KeyboardEvent) => {\n        if (event.key === \"Escape\") {\n            if (this.root.contains(document.activeElement)) {\n                event.preventDefault();\n                this.returnElement && this.returnElement.focus();\n                this.callback && this.callback(event);\n            }\n        }\n    };\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { hashString } from \"@vanilla/utils\";\n\nconst delegatedEventListeners = {};\n\n/**\n * Create an event listener using event delegation.\n *\n * @param eventName - The Event to listen for.\n * @param filterSelector - A CSS selector to match against.\n * @param callback - The callback function. This gets passed the fired event.\n * @param scopeSelector - And element to scope the event listener to.\n *\n * @returns The hash of the event. Save this to use removeDelegatedEvent().\n */\nexport function delegateEvent(\n    eventName: string,\n    filterSelector: string,\n    callback: (event: Event, triggeringElement: HTMLElement) => boolean | void,\n    scopeSelector?: string | HTMLElement,\n): string {\n    let functionKey = eventName + filterSelector + callback.toString();\n\n    let scope;\n\n    if (typeof scopeSelector === \"string\") {\n        scope = document.querySelector(scopeSelector);\n\n        if (!scope) {\n            throw new Error(`Unable to find element in the document for scopeSelector: ${scopeSelector}`);\n        } else {\n            functionKey += scopeSelector;\n        }\n    } else if (scopeSelector instanceof HTMLElement) {\n        scope = scopeSelector;\n    } else {\n        scope = document;\n    }\n\n    const eventHash = hashString(functionKey).toString();\n\n    if (!Object.keys(delegatedEventListeners).includes(eventHash)) {\n        const wrappedCallback = event => {\n            // Get the nearest DOMNode that matches the given selector.\n            const match = filterSelector ? event.target.closest(filterSelector) : event.target;\n\n            if (match) {\n                // Call the callback with the matching element as the context.\n                return callback.call(match, event, match);\n            }\n        };\n\n        scope.addEventListener(eventName, wrappedCallback);\n        delegatedEventListeners[eventHash] = {\n            scope,\n            eventName,\n            wrappedCallback,\n        };\n    }\n\n    return eventHash;\n}\n\n/**\n * Remove a delegated event listener.\n *\n * @param eventHash - The event hash passed from delegateEvent().\n */\nexport function removeDelegatedEvent(eventHash: string) {\n    if (delegatedEventListeners[eventHash]) {\n        const { scope, eventName, wrappedCallback } = delegatedEventListeners[eventHash];\n        scope.removeEventListener(eventName, wrappedCallback);\n        delete delegatedEventListeners[eventHash];\n    }\n}\n\n/**\n * Remove all delegated event listeners that have been registered.\n */\nexport function removeAllDelegatedEvents() {\n    Object.keys(delegatedEventListeners).forEach(key => {\n        removeDelegatedEvent(key);\n    });\n}\n\n/**\n * Handler for files being dragged and dropped.\n *\n * @param event - https://developer.mozilla.org/en-US/docs/Web/API/DragEvent\n */\nexport function getDraggedFile(event: DragEvent): FileList | undefined {\n    if (event.dataTransfer && event.dataTransfer.files && event.dataTransfer.files.length) {\n        event.preventDefault();\n\n        return event.dataTransfer.files;\n    }\n}\n\n/**\n * Handler for files being pasted.\n *\n * @param event - https://developer.mozilla.org/en-US/docs/Web/API/DragEvent\n */\nexport function getPastedFile(event: ClipboardEvent): File | undefined | null {\n    if (event.clipboardData && event.clipboardData.items && event.clipboardData.items.length) {\n        const files = Array.from(event.clipboardData.items)\n            .map((item: any) => (item.getAsFile ? item.getAsFile() : null))\n            .filter(Boolean);\n\n        if (files.length > 0) {\n            event.preventDefault();\n            // Currently only 1 file is supported.\n            const mainFile = files[0];\n            return mainFile;\n        }\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n/**\n * Register a callback for focusin and focusin out events. The main improvement here over registering\n * the listeners yourself is that the events fire for the whole tree as 1 item instead of as\n * individual notes.\n *\n * This is particularly useful when you want to track focus leaving or enterring a component\n * without caring about the individual contents inside.\n */\nexport class FocusWatcher {\n    /**\n     * @param watchedNode - The watched dom node.\n     * @param callback - A callback for when the tree focuses and blurs.\n     */\n    public constructor(private watchedNode: Element, private changeHandler: (hasFocus: boolean) => void) {}\n\n    /**\n     * Register the event listeners from this class.\n     */\n    public start = () => {\n        this.watchedNode.addEventListener(\"focusout\", this.handleFocusOut, true);\n        this.watchedNode.addEventListener(\"focusin\", this.handleFocusIn, true);\n        document.addEventListener(\"click\", this.handleClick);\n    };\n\n    /**\n     * Remove the event listeners from this class.\n     */\n    public stop = () => {\n        this.watchedNode.removeEventListener(\"focusout\", this.handleFocusOut, true);\n        this.watchedNode.removeEventListener(\"focusin\", this.handleFocusIn, true);\n        document.removeEventListener(\"click\", this.handleClick);\n    };\n\n    /**\n     * Handle when an element loses focus.\n     */\n    private handleFocusOut = (event: FocusEvent) => {\n        this.checkDomTreeHasFocus(event, this.changeHandler);\n    };\n\n    /**\n     * Handle an element gaining focus.\n     */\n    private handleFocusIn = (event: FocusEvent) => {\n        this.checkDomTreeHasFocus(event, this.changeHandler);\n    };\n\n    /**\n     * Handle an element being clicked.\n     */\n    private handleClick = (event: MouseEvent) => {\n        const triggeringElement = event.target as Element;\n        const wasClicked = this.checkDomTreeWasClicked(triggeringElement);\n        if (!wasClicked) {\n            this.changeHandler(false);\n        }\n    };\n\n    /**\n     * Determine whether or not our DOM tree was clicked.\n     */\n    private checkDomTreeWasClicked(clickedElement: Element) {\n        return (\n            this.watchedNode &&\n            clickedElement &&\n            (this.watchedNode.contains(clickedElement as Element) || this.watchedNode === clickedElement)\n        );\n    }\n\n    /**\n     * Determine if the currently focused element is somewhere inside of (or the same as)\n     * a given Element.\n     *\n     * @param watchedNode - The watched node to look in.\n     */\n    private checkDomTreeHasFocus(event: FocusEvent, callback: (hasFocus: boolean) => void) {\n        setTimeout(() => {\n            const possibleTargets = [\n                // NEEDS TO COME FIRST, because safari will populate relatedTarget on focusin, and its not what we're looking for.\n                document.activeElement, // IE11, Safari.\n                event.relatedTarget as Element, // Chrome (The actual standard)\n                (event as any).explicitOriginalTarget, // Firefox\n            ];\n\n            let activeElement = null;\n            for (const target of possibleTargets) {\n                if (target && target !== document.body) {\n                    activeElement = target;\n                    break;\n                }\n            }\n\n            if (activeElement !== null) {\n                const isWatchedInBody = document.body.contains(this.watchedNode);\n                const isFocusedInBody = document.body.contains(activeElement);\n                const isModal = Boolean(document.getElementById(\"modals\")?.contains(activeElement));\n                const hasFocus = Boolean(\n                    this.watchedNode &&\n                        activeElement &&\n                        (activeElement === this.watchedNode || this.watchedNode.contains(activeElement)),\n                );\n\n                // We will only invalidate based on something actually getting focus.\n                // Make sure we are still mounted before calling this.\n                // It could happen that our flyout is unmounted in between the setTimeout call.\n                // We might have focused on a modal which can't be in the watched tree.\n                if (isWatchedInBody && isFocusedInBody) {\n                    callback(hasFocus || isModal);\n                }\n            }\n        }, 0);\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n/**\n * Use the browser's built-in functionality to quickly and safely escape a string.\n *\n * @param str - The string to escape.\n *\n * @returns Escaped HTML.\n */\nexport function escapeHTML(str: string): string {\n    const div = document.createElement(\"div\");\n    div.appendChild(document.createTextNode(str));\n    return div.innerHTML;\n}\n\n/**\n * Use the browser's built-in functionality to quickly unescape a string.\n * UNSAFE with unsafe strings; only use on previously-escaped ones!\n *\n * @param escapedString - A previously escaped string.\n *\n * @returns The unescaped string.\n */\nexport function unescapeHTML(escapedString: string): string {\n    const div = document.createElement(\"div\");\n    div.innerHTML = escapedString;\n    const child = div.childNodes[0];\n    return child && child.nodeValue ? child.nodeValue : \"\";\n}\n\n/**\n * Determine if the browser is escaping the inner contents of our <noscript /> browser.\n */\nexport function browserEscapesNoScript(): boolean {\n    const ns = document.createElement(\"noscript\");\n    ns.innerHTML = \"<test></test>\";\n    document.body.append(ns);\n    const result = ns.innerHTML.startsWith(\"&lt;\");\n    ns.remove();\n    return result;\n}\n\n/**\n * Get an HTML element from a CSS selector or DOM Node.\n *\n * @param selectorOrElement - A CSS selector or an HTML element.\n *\n * @throws If no element was found.\n * @returns An HTMLElement no matter what.\n */\nexport function ensureHtmlElement(selectorOrElement: string | Node | null): HTMLElement {\n    if (typeof selectorOrElement === \"string\") {\n        selectorOrElement = document.querySelector(selectorOrElement);\n    }\n\n    if (!(selectorOrElement instanceof HTMLElement)) {\n        throw new Error(`HTMLElement could not be found for ${selectorOrElement}.`);\n    }\n\n    return selectorOrElement;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n// A weakmap so we can store multiple load callbacks per script.\nconst loadEventCallbacks: WeakMap<Node, Array<(event) => void>> = new WeakMap();\nconst rejectionCache: Map<string, Error> = new Map();\n\n/**\n * Dynamically load a javascript file.\n */\nexport function ensureScript(scriptUrl: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n        const existingScript: HTMLScriptElement | null = document.querySelector(`script[src='${scriptUrl}']`);\n        if (rejectionCache.has(scriptUrl)) {\n            reject(rejectionCache.get(scriptUrl));\n        }\n        if (existingScript && loadEventCallbacks.has(existingScript)) {\n            // Add another resolveCallback into the weakmap.\n            const callbacks = loadEventCallbacks.get(existingScript);\n            callbacks && callbacks.push(resolve);\n        } else {\n            // The script doesn't exist. Lets create it.\n            const head = document.getElementsByTagName(\"head\")[0];\n            const script = document.createElement(\"script\");\n            script.type = \"text/javascript\";\n            script.src = scriptUrl;\n            script.onerror = (event: ErrorEvent) => {\n                const error = new Error(\"Failed to load a required embed script\");\n                rejectionCache.set(scriptUrl, error);\n                reject(error);\n            };\n\n            const timeout = setTimeout(() => {\n                const error = new Error(`Loading of the script ${scriptUrl} has timed out.`);\n                rejectionCache.set(scriptUrl, error);\n                reject(error);\n            }, 10000);\n\n            loadEventCallbacks.set(script, [resolve]);\n\n            script.onload = event => {\n                clearTimeout(timeout);\n                const callbacks = loadEventCallbacks.get(script);\n                callbacks && callbacks.forEach(callback => callback(event));\n                loadEventCallbacks.delete(script);\n            };\n\n            head.appendChild(script);\n        }\n    });\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { browserEscapesNoScript, unescapeHTML } from \"./sanitization\";\n\n/**\n * Prepare an element and it's contents for use in a shadow root.\n *\n * @param element\n * @param cloneElement - If true, clone the element into a `newElementTag`. Preserves CSS classes and IDs.\n *      Particularly useful for when the initial content is inside of a <noscript /> tag.\n * @param newElementTag\n */\nexport function prepareShadowRoot(\n    element: HTMLElement,\n    cloneElement: boolean = false,\n    newElementTag = \"div\",\n): HTMLElement {\n    let html = element.innerHTML;\n    // This is likely a noscript tag.\n    if (browserEscapesNoScript() || html.trim().startsWith(\"&lt;\")) {\n        html = unescapeHTML(html);\n    }\n    // Safari escapes the contents of the noscript.\n    if (cloneElement) {\n        const newElement = document.createElement(newElementTag);\n\n        // Clone various attributes.\n        newElement.classList.value = element.classList.value;\n        newElement.id = element.id;\n\n        // Insert the element & remove the old old.\n        element.parentNode!.insertBefore(newElement, element);\n        element.remove();\n        element = newElement;\n    } else {\n        // If we aren't making a new real root, we need to empty it out.\n        // Otherwise we'll have duplicate contents.\n        element.innerHTML = \"\";\n    }\n\n    const shadowHeader = element.attachShadow({ mode: \"open\" });\n    shadowHeader.innerHTML = html;\n    return element;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport tabbable from \"tabbable\";\nimport { logError } from \"@vanilla/utils\";\n\n/**\n * A class for handling tabbing inside of a container with various exclusions.\n *\n * The goal is here is to be able to programatically implement various tabbing behaviours\n * required for accessibility.\n */\nexport class TabHandler {\n    private tabbableElements: HTMLElement[];\n\n    /**\n     * Determine if an element is tabbable.\n     */\n    public static isTabbable(element: Node) {\n        const children = tabbable(element.parentNode);\n        return children.includes(element);\n    }\n\n    /**\n     * Construct the handler. Don't be afraid to construct multiple of these.\n     *\n     * The elements in a particular TabHandler are very moment specific.\n     * If the DOM changes underneath it it will likely no longer be valid.\n     *\n     * @param root - The root element to look in.\n     * @param excludedElements - Elements to ignore.\n     * @param excludedRoots - These element's children will be ignored.\n     */\n    public constructor(\n        root: Element = document.documentElement!,\n        private excludedElements: Element[] = [],\n        private excludedRoots: Element[] = [],\n    ) {\n        this.tabbableElements = tabbable(root);\n    }\n\n    /**\n     * Get the next tabbable item within a given tabindex.\n     *\n     * WARNING: Performance can be poor if you pass many excluded roots and do not\n     * sufficiently narrow the tree your are looking in.\n     *\n     * @param from - The currently focused element.\n     * @param reverse - True to get the previous element instead.\n     * @param allowLooping - Whether or not the focus should loop around from beginning <-> end.\n     */\n    public getNext(\n        from: Element | null = document.activeElement,\n        reverse: boolean = false,\n        allowLooping: boolean = true,\n    ): HTMLElement | null {\n        if (!(from instanceof HTMLElement)) {\n            logError(\"Unable to tab to next element, `fromElement` given is not valid: \", from);\n            return null;\n        }\n        const tabbables = this.tabbableElements.filter(this.createExcludeFilterWithExemption(from));\n        const currentTabIndex = tabbables.indexOf(from);\n\n        if (currentTabIndex < 0) {\n            return null;\n        }\n\n        let targetIndex = reverse ? currentTabIndex - 1 : currentTabIndex + 1;\n\n        if (allowLooping) {\n            // Loop over the beginning and ends\n            if (targetIndex < 0) {\n                targetIndex = tabbables.length - 1;\n            } else if (targetIndex >= tabbables.length) {\n                targetIndex = 0;\n            }\n        }\n\n        return tabbables[targetIndex] || null;\n    }\n\n    /**\n     * Get all.\n     */\n    public getAll(from: Element | null = document.activeElement) {\n        if (!(from instanceof HTMLElement)) {\n            logError(\"Unable to tab to next element, `fromElement` given is not valid: \", from);\n            return null;\n        }\n        return this.tabbableElements.filter(this.createExcludeFilterWithExemption(from));\n    }\n\n    /**\n     * Get the first focusable element.\n     */\n    public getInitial(): HTMLElement | null {\n        const tabbables = this.tabbableElements.filter(this.filterAllExcluded);\n        if (tabbables.length > 0) {\n            return tabbables[0];\n        } else {\n            return null;\n        }\n    }\n    /**\n     * Get the last focusable element.\n     */\n    public getLast(): HTMLElement | null {\n        const tabbables = this.tabbableElements.filter(this.filterAllExcluded);\n        if (tabbables.length > 0) {\n            return tabbables[tabbables.length - 1];\n        } else {\n            return null;\n        }\n    }\n\n    /**\n     * Filter out all excluded elements. Allows 1 element and its parents to be exempted.\n     *\n     * The exemption is necessary so we can find our place\n     * if the focus is already in an item that we are trying to exclude.\n     *\n     * @returns A filter for use with [].filter()\n     */\n    private createExcludeFilterWithExemption = (exemption: Element) => {\n        return (elementToFilter: Element): boolean => {\n            const elementIsActiveOrChildOfActive = exemption === elementToFilter || elementToFilter.contains(exemption);\n\n            if (!elementIsActiveOrChildOfActive) {\n                if (this.excludedElements.includes(elementToFilter)) {\n                    return false;\n                }\n                for (const excludedRoot of this.excludedRoots) {\n                    if (excludedRoot !== elementToFilter && excludedRoot.contains(elementToFilter)) {\n                        return false;\n                    }\n                }\n            }\n\n            return true;\n        };\n    };\n\n    /**\n     * A filter for use with [].filter().\n     *\n     * Filters out all excluded elements and roots.\n     */\n    private filterAllExcluded = (elementToFilter: Element): boolean => {\n        if (this.excludedElements.includes(elementToFilter)) {\n            return false;\n        }\n        for (const excludedRoot of this.excludedRoots) {\n            if (excludedRoot !== elementToFilter && excludedRoot.contains(elementToFilter)) {\n                return false;\n            }\n        }\n\n        return true;\n    };\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n/**\n * Add the hidden class and aria-hidden attribute to an Element.\n *\n * @param element - The DOM Element to modify.\n */\nexport function hideElement(element: Element) {\n    element.classList.add(\"u-isHidden\");\n    element.setAttribute(\"aria-hidden\", \"true\");\n}\n\n/**\n * Remove the hidden class and aria-hidden attribute to an Element.\n *\n * @param element - The DOM Element to modify.\n */\nexport function unhideElement(element: Element) {\n    element.classList.remove(\"u-isHidden\");\n    element.removeAttribute(\"aria-hidden\");\n}\n\n/**\n * Check if an element is visible or not.\n *\n * @param element - The element to check.\n *\n * @returns The visibility.\n */\nexport function elementIsVisible(element: HTMLElement): boolean {\n    return !!(element.offsetWidth || element.offsetHeight || element.getClientRects().length);\n}\n\n/**\n * Calculate the height of element with simulated margin collapse.\n *\n * This is ideal for getting the calculate height of a fixed number of items. (not the entire parent).\n *\n * It considers:\n * - Element height\n * - Padding\n * - Borders\n * - Margins\n * - Margin collapsing.\n *\n * @param element - The element to measure\n * @param previousBottomMargin - The bottom margin of the previous element. You can use the returned bottom margin from this function to get this.\n */\nexport function getElementHeight(\n    element: Element,\n    previousBottomMargin: number = 0,\n): {\n    height: number;\n    bottomMargin: number;\n} {\n    const height = element.getBoundingClientRect().height;\n    const { marginTop, marginBottom } = window.getComputedStyle(element);\n\n    let topHeight = marginTop ? parseInt(marginTop, 10) : 0;\n    // Simulate a margin-collapsed height.\n    topHeight = Math.max(topHeight - previousBottomMargin, 0);\n\n    const bottomHeight = marginBottom ? parseInt(marginBottom, 10) : 0;\n    const finalHeight = height + topHeight + bottomHeight;\n\n    return {\n        height: finalHeight,\n        bottomMargin: bottomHeight,\n    };\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n// Some polyfills\nimport \"focus-visible\";\nimport smoothscroll from \"smoothscroll-polyfill\";\n\nsmoothscroll.polyfill();\n\nexport * from \"./domData\";\nexport * from \"./emoji\";\nexport * from \"./EscapeListener\";\nexport * from \"./events\";\nexport * from \"./FocusWatcher\";\nexport * from \"./sanitization\";\nexport * from \"./scripts\";\nexport * from \"./shadowDom\";\nexport * from \"./TabHandler\";\nexport * from \"./visibility\";\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport Button from \"@library/forms/Button\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport InputTextBlock from \"@library/forms/InputTextBlock\";\nimport FrameBody from \"@library/layout/frame/FrameBody\";\nimport FrameFooter from \"@library/layout/frame/FrameFooter\";\nimport { t } from \"@library/utility/appUtils\";\nimport { EditorEventWall } from \"@rich-editor/editor/pieces/EditorEventWall\";\nimport { embedMenuClasses } from \"@rich-editor/editor/pieces/embedMenuStyles\";\nimport Frame from \"@vanilla/library/src/scripts/layout/frame/Frame\";\nimport FrameHeader from \"@vanilla/library/src/scripts/layout/frame/FrameHeader\";\nimport Modal from \"@vanilla/library/src/scripts/modal/Modal\";\nimport ModalSizes from \"@vanilla/library/src/scripts/modal/ModalSizes\";\nimport { useUniqueID } from \"@vanilla/library/src/scripts/utility/idUtils\";\nimport { useLastValue } from \"@vanilla/react-utils\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\n\ninterface IProps {\n    onSave: (meta: IImageMeta) => void;\n    className?: string;\n    initialAlt: string;\n    onClose: () => void;\n    isVisible: boolean;\n}\n\nexport interface IImageMeta {\n    alt: string;\n}\n\n/**\n * A class for rendering Giphy embeds.\n */\nexport function ImageEmbedModal(props: IProps) {\n    const classes = embedMenuClasses();\n    const [alt, setAlt] = useState(props.initialAlt);\n    const inputRef = useRef<HTMLInputElement>(null);\n\n    const handleTextChange = useCallback((event) => {\n        if (event) {\n            event.stopPropagation();\n            event.preventDefault();\n            setAlt(event.target.value || \"\");\n        }\n    }, []);\n\n    // Focus the input when opened.\n    useEffect(() => {\n        inputRef.current?.focus();\n    }, []);\n\n    const saveAndClose = () => {\n        setAlt(alt);\n        props.onSave({\n            alt,\n        });\n        props.onClose();\n    };\n\n    const titleID = useUniqueID(\"modalTitle\");\n\n    return (\n        <Modal isVisible={props.isVisible} size={ModalSizes.SMALL} titleID={titleID} exitHandler={props.onClose}>\n            <EditorEventWall>\n                <form className={classes.form}>\n                    <Frame\n                        header={<FrameHeader title={t(\"Alt Text\")} titleID={titleID} closeFrame={saveAndClose} />}\n                        body={\n                            <FrameBody className={classes.verticalPadding}>\n                                <InputTextBlock\n                                    label={t(\n                                        \"Alternative text helps users with accessibility concerns and improves SEO.\",\n                                    )}\n                                    labelClassName={classes.paragraph}\n                                    inputProps={{\n                                        required: true,\n                                        value: alt,\n                                        onChange: handleTextChange,\n                                        inputRef,\n                                        placeholder: t(\"Example: Image of a Coffee\"),\n                                        onKeyPress: (event: React.KeyboardEvent) => {\n                                            if (event.key === \"Enter\") {\n                                                event.preventDefault();\n                                                event.stopPropagation();\n                                                saveAndClose();\n                                            }\n                                        },\n                                    }}\n                                />\n                            </FrameBody>\n                        }\n                        footer={\n                            <FrameFooter justifyRight={true}>\n                                <Button\n                                    baseClass={ButtonTypes.TEXT_PRIMARY}\n                                    onClick={(e) => {\n                                        e.preventDefault();\n                                        e.stopPropagation();\n                                        saveAndClose();\n                                    }}\n                                >\n                                    {t(\"Save\")}\n                                </Button>\n                            </FrameFooter>\n                        }\n                    />\n                </form>\n            </EditorEventWall>\n        </Modal>\n    );\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useContext } from \"react\";\n\n/**\n * Create a react context, provider, and use function.\n */\nexport function createProvider<\n    ContextValueType extends object,\n    ProviderPropTypes extends { children: React.ReactNode }\n>(\n    defaultValue: ContextValueType,\n    valueCalculator: (props: ProviderPropTypes) => ContextValueType,\n    displayName?: string,\n) {\n    const context = React.createContext<ContextValueType>(defaultValue);\n    const useContextValue = () => {\n        useContext(context);\n    };\n\n    function CreatedProvider(props: ProviderPropTypes) {\n        const value = valueCalculator(props);\n        return <context.Provider value={value}>{props.children}</context.Provider>;\n    }\n\n    return [CreatedProvider, useContextValue];\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\n\ninterface IProps {\n    duration: number;\n    onHover: React.MouseEventHandler | undefined;\n    once?: boolean;\n    children: (providedProps: IProvidedProps) => React.ReactNode;\n}\n\ninterface IProvidedProps {\n    onMouseEnter: React.MouseEventHandler;\n    onMouseLeave: React.MouseEventHandler;\n}\n\n/**\n * Component with render props for handling a hover after a certain duration.\n *\n * Simply spread the provided props over the element you want to track the hover of.\n *\n * @example\n * <Hoverable duration={250} onHover={myCallback}>\n *     {providedProps => {\n *          <div {...providedProps} className=\"someClass\">\n *              // Some deeply neested child.\n *          </div>\n *     }}\n * </Hoverable>\n */\nexport class Hoverable extends React.Component<IProps> {\n    public static defaultProps = {\n        once: true,\n    };\n\n    /**\n     * @inheritdoc\n     */\n    public render(): React.ReactNode {\n        return this.props.children({\n            onMouseEnter: this.mouseEnterHandler,\n            onMouseLeave: this.mouseLeaveHandler,\n        });\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public componentWillUnmount() {\n        this.dismissTimeout();\n    }\n\n    private hoverTimeout: NodeJS.Timeout;\n    private hasExecuted = false;\n\n    /**\n     * Handle the hover event by checking if we've already called ourselves then calling the passed callback.\n     */\n    private handleHover = (event: React.MouseEvent) => {\n        if (this.hasExecuted && this.props.once) {\n            return;\n        }\n\n        this.hasExecuted = true;\n        if (this.props.onHover) {\n            this.props.onHover(event);\n        }\n    };\n\n    /**\n     * Set a timeout when the mouse enters. If the timeout is not removed we have a hover.\n     */\n    private mouseEnterHandler = (event: React.MouseEvent) => {\n        this.hoverTimeout = setTimeout(() => {\n            this.handleHover(event);\n        }, this.props.duration);\n    };\n\n    /**\n     * Remove the timeout for the hover so it doesn't execute again (or at all).\n     */\n    private mouseLeaveHandler = (event: React.MouseEvent) => {\n        this.dismissTimeout();\n    };\n\n    /**\n     * Cleanup timeouts and properties to reset.\n     */\n    private dismissTimeout() {\n        this.hasExecuted = false;\n        if (this.hoverTimeout) {\n            clearTimeout(this.hoverTimeout);\n        }\n    }\n}\n","/**\n * @author Dominic Lacaille <dominic.lacaille@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport { useCallback, useEffect, useRef } from \"react\";\n\n/**\n * Returns a function which returns true if the component is currently mounted.\n */\nexport default function useMountedState(): () => boolean {\n    const mountedRef = useRef<boolean>(false);\n    const get = useCallback(() => mountedRef.current, []);\n\n    useEffect(() => {\n        mountedRef.current = true;\n\n        return () => {\n            mountedRef.current = false;\n        };\n    });\n\n    return get;\n}\n","/**\n * @author Dominic Lacaille <dominic.lacaille@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport { DependencyList, useCallback, useRef, useState } from \"react\";\nimport useMountedState from \"./useMountedState\";\n\nexport type FnReturningPromise = (...args: any[]) => Promise<any>;\ntype PromiseType<P extends Promise<any>> = P extends Promise<infer T> ? T : never;\ntype StateFromFnReturningPromise<T extends FnReturningPromise> = AsyncState<PromiseType<ReturnType<T>>>;\ntype AsyncFnReturn<T extends FnReturningPromise = FnReturningPromise> = [StateFromFnReturningPromise<T>, T];\n\ntype AsyncState<T> =\n    | {\n          status: \"pending\" | \"loading\";\n          error?: undefined;\n          data?: undefined;\n      }\n    | {\n          status: \"error\";\n          error: Error;\n          data?: undefined;\n      }\n    | {\n          status: \"success\";\n          error?: undefined;\n          data: T;\n      };\n\n/**\n * Uses an async function and returns a state of execution and a callback. *\n * Based on https://github.com/streamich/react-use/blob/master/src/useAsyncFn.ts\n */\nexport function useAsyncFn<T extends FnReturningPromise>(\n    fn: T,\n    deps: DependencyList = [],\n    initialState: StateFromFnReturningPromise<T> = { status: \"pending\" },\n): AsyncFnReturn<T> {\n    const lastCallId = useRef(0);\n    const isMounted = useMountedState();\n    const [state, set] = useState<StateFromFnReturningPromise<T>>(initialState);\n\n    const callback = useCallback((...args: Parameters<T>): ReturnType<T> => {\n        const callId = ++lastCallId.current;\n        set((prevState) => ({ ...prevState, loading: true }));\n\n        return fn(...args).then(\n            (data) => {\n                isMounted() && callId === lastCallId.current && set({ data, status: \"success\" });\n\n                return data;\n            },\n            (error) => {\n                isMounted() && callId === lastCallId.current && set({ error, status: \"error\" });\n\n                return error;\n            },\n        ) as ReturnType<T>;\n    }, deps);\n\n    return [state, (callback as unknown) as T];\n}\n","/**\n * @author Dominic Lacaille <dominic.lacaille@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport { DependencyList, useEffect } from \"react\";\nimport { FnReturningPromise, useAsyncFn } from \"./useAsyncFn\";\n\n/**\n * Uses an async function executed automatically.\n */\nexport function useAsync<T extends FnReturningPromise>(fn: T, deps: DependencyList = []) {\n    const [state, callback] = useAsyncFn(fn, deps, { status: \"loading\" });\n\n    useEffect(() => {\n        callback();\n    }, [callback]);\n\n    return state;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { RefObject, useState, useLayoutEffect } from \"react\";\nimport ResizeObserver from \"resize-observer-polyfill\";\nimport debounce from \"lodash/debounce\";\nimport { stableObjectHash } from \"@vanilla/utils\";\n\n// DOMRectReadOnly.fromRect()\nconst EMPTY_RECT: DOMRect = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    toJSON: () => \"\",\n};\n\n/**\n * Utility hook for measuring a dom element.\n * Will return back measurements as a bounding rectangle for the element contained in a ref.\n *\n * @param ref The ref to measure.\n * @param adjustForScrollOffset If set, y values will be adjusted for the current scroll offset.\n * @param watchRef Used to trigger a remeasure if the ref changes.\n */\nexport function useMeasure(\n    ref: RefObject<HTMLElement | null>,\n    adjustForScrollOffset: boolean = false,\n    watchRef: boolean = false,\n) {\n    const [bounds, setContentRect] = useState<DOMRect>(EMPTY_RECT);\n    const refWatch = watchRef ? ref.current : ref;\n    useLayoutEffect(() => {\n        let animationFrameId: number | null = null;\n\n        const measure = () => {\n            animationFrameId = window.requestAnimationFrame(() => {\n                if (!ref.current) {\n                    setContentRect(EMPTY_RECT);\n                    return;\n                }\n                let rect = ref.current.getBoundingClientRect();\n\n                if (adjustForScrollOffset) {\n                    rect = {\n                        ...rect,\n                        y: rect.y + window.scrollY,\n                        top: rect.top + window.scrollY,\n                        bottom: rect.bottom + window.scrollY,\n                        width: rect.width,\n                        height: rect.height,\n                        right: rect.right,\n                        left: rect.left,\n                    };\n                }\n\n                rect.toJSON = () => {\n                    return JSON.stringify({\n                        y: rect.y,\n                        top: rect.top,\n                        bottom: rect.bottom,\n                        width: rect.width,\n                        height: rect.height,\n                        right: rect.right,\n                        left: rect.left,\n                    });\n                };\n\n                setContentRect(rect);\n            });\n        };\n\n        const resizeListener = debounce(() => {\n            measure();\n        }, 100);\n        window.addEventListener(\"resize\", resizeListener);\n\n        const ro = new ResizeObserver(measure);\n        if (ref.current) {\n            ro.observe(ref.current);\n        } else {\n            setContentRect(EMPTY_RECT);\n        }\n\n        return () => {\n            window.cancelAnimationFrame(animationFrameId!);\n            ro.disconnect();\n            resizeListener.cancel();\n            window.removeEventListener(\"resize\", resizeListener);\n            setContentRect(EMPTY_RECT);\n        };\n    }, [adjustForScrollOffset, refWatch, ref]);\n\n    return bounds;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useRef, useEffect, useState, useDebugValue } from \"react\";\nimport { useMeasure } from \"./useMeasure\";\n\n/**\n * Detect if the edges of 2 measures are overlapping.\n *\n * If the edges are touching, but not overlapping, that doesn't count.\n */\nfunction doRectsOverlap(rect1: DOMRectReadOnly, rect2: DOMRectReadOnly) {\n    // For all docblocks here, [] represents rect1 and {} represents rect 2.\n    if (isEmptyRect(rect1) || isEmptyRect(rect2)) {\n        return false;\n    }\n\n    let hasHorizontalOverlap = false;\n\n    //  [      { ]       }\n    if (rect1.left <= rect2.left && rect1.right >= rect2.left) {\n        hasHorizontalOverlap = true;\n    }\n\n    //  {    [  }   ]\n    if (rect2.left <= rect1.left && rect2.right >= rect1.left) {\n        hasHorizontalOverlap = true;\n    }\n\n    //  [   {} ]\n    if (rect1.left <= rect2.left && rect1.right >= rect2.right) {\n        hasHorizontalOverlap = true;\n    }\n\n    //  {  []   }\n    if (rect2.left <= rect1.left && rect2.right >= rect1.right) {\n        hasHorizontalOverlap = true;\n    }\n\n    let hasVerticalOverlap = false;\n\n    // Verical version of  [      { ]       }\n    if (rect1.top <= rect2.top && rect1.bottom >= rect2.top) {\n        hasVerticalOverlap = true;\n    }\n\n    // Verical version of  {    [  }   ]\n    if (rect2.top <= rect1.top && rect2.bottom >= rect1.top) {\n        hasVerticalOverlap = true;\n    }\n\n    // Verical version of  [   {} ]\n    if (rect1.top <= rect2.top && rect1.bottom >= rect2.bottom) {\n        hasVerticalOverlap = true;\n    }\n\n    // Verical version of  {  []   }\n    if (rect2.top <= rect1.top && rect2.bottom >= rect1.bottom) {\n        hasVerticalOverlap = true;\n    }\n\n    // Both overlaps are required to make a collision.\n    return hasVerticalOverlap && hasHorizontalOverlap;\n}\n\nfunction isEmptyRect(rect: DOMRectReadOnly): boolean {\n    return rect.height === 0 || rect.width === 0;\n}\n\nexport function useCollisionDetector() {\n    const collisionSourceRef = useRef<HTMLDivElement | null>(null);\n    let sourceMeasure = useMeasure(collisionSourceRef);\n\n    const vBoundary1Ref = useRef<HTMLDivElement | null>(null);\n    const vBoundary1Measure = useMeasure(vBoundary1Ref);\n\n    const vBoundary2Ref = useRef<HTMLDivElement | null>(null);\n    const vBoundary2Measure = useMeasure(vBoundary2Ref);\n\n    const hBoundary1Ref = useRef<HTMLDivElement | null>(null);\n    const hBoundary1Measure = useMeasure(hBoundary1Ref);\n\n    const hBoundary2Ref = useRef<HTMLDivElement | null>(null);\n    const hBoundary2Measure = useMeasure(hBoundary2Ref);\n\n    const hasCollision =\n        doRectsOverlap(sourceMeasure, vBoundary1Measure) ||\n        doRectsOverlap(sourceMeasure, vBoundary2Measure) ||\n        doRectsOverlap(sourceMeasure, hBoundary1Measure) ||\n        doRectsOverlap(sourceMeasure, hBoundary2Measure);\n\n    useDebugValue({ hasCollision });\n\n    return { collisionSourceRef, hasCollision, vBoundary1Ref, vBoundary2Ref, hBoundary1Ref, hBoundary2Ref };\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useDebugValue } from \"react\";\n\n/**\n * Wrapper around useDebugValue.\n *\n * useDebugValue only works in other hooks, not directly in components.\n * As a result we need to wrap it in a custom hook.\n */\nexport function useComponentDebug(debugValue: any) {\n    return useDebugValue(debugValue);\n}\n","/**\n * @author Dominic Lacaille <dominic.lacaille@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport { useCallback, useRef } from \"react\";\n\nexport function useDelayedFunction(delay: number) {\n    const timeoutId = useRef<number | undefined>();\n\n    const stop = useCallback(() => {\n        if (timeoutId.current) {\n            clearTimeout(timeoutId.current);\n            timeoutId.current = undefined;\n        }\n    }, []);\n\n    const start = useCallback(\n        (handler: () => void) => {\n            stop();\n            timeoutId.current = window.setTimeout(handler, delay);\n        },\n        [delay, stop],\n    );\n\n    return { start, stop };\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport React, { useLayoutEffect, useRef } from \"react\";\n\nexport function useDomNodeAttachment(domNodes?: Node[]): React.RefObject<any> {\n    const ref = useRef<HTMLElement | null>();\n\n    useLayoutEffect(() => {\n        if (domNodes && ref.current) {\n            domNodes.forEach((node) => {\n                ref.current?.appendChild(node);\n            });\n        }\n    }, [domNodes]);\n\n    return ref;\n}\n\ninterface IProps extends React.HTMLAttributes<HTMLDivElement> {\n    nodes: Node[];\n}\n\nexport function DomNodeAttacher(_props: IProps) {\n    const { nodes, ...props } = _props;\n    const ref = useDomNodeAttachment(nodes);\n    return <div {...props} ref={ref} />;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useEffect } from \"react\";\n\nimport { EscapeListener } from \"@vanilla/dom-utils\";\n\n/**\n * React hook for listening for an escape press on the keyboard inside root element.\n *\n * When escape is pressed, the return element will be focused if provided or the callback will will be called.\n */\nexport function useEscapeListener({\n    root,\n    returnElement,\n    callback,\n}: {\n    root?: HTMLElement | null;\n    returnElement?: HTMLElement | null;\n    callback?: (event: KeyboardEvent) => void;\n}) {\n    useEffect(() => {\n        if (root === null || returnElement === null) {\n            // Bail out if these are null. That means we have unfilled refs. Undefined means they were not passed and we should use the defaults.\n            return;\n        }\n        const actualRoot = root || document.documentElement;\n        const escapeListener = new EscapeListener(actualRoot, returnElement, callback);\n        escapeListener.start();\n        return escapeListener.stop;\n    }, [root, returnElement, callback]);\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useEffect, useLayoutEffect } from \"react\";\nimport { FocusWatcher } from \"@vanilla/dom-utils\";\n\n/**\n * React hook for creating and destroying a FocusWatcher. See FocusWatcher documentation.\n */\nexport function useFocusWatcher(\n    ref: React.RefObject<Element | null>,\n    changeHandler: (hasFocus: boolean) => void,\n    bypass?: boolean,\n) {\n    useLayoutEffect(() => {\n        if (bypass) {\n            return;\n        }\n        if (ref.current !== null) {\n            const focusWatcher = new FocusWatcher(ref.current, changeHandler);\n            focusWatcher.start();\n            return focusWatcher.stop;\n        }\n    }, [ref, changeHandler, bypass]);\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useEffect, useRef } from \"react\";\n\ntype Callback = () => void;\n\nexport function useInterval(callback: Callback, delay: number | null) {\n    const savedCallback = useRef<Callback>();\n\n    useEffect(() => {\n        savedCallback.current = callback;\n    }, [callback]);\n\n    useEffect(() => {\n        const handler = () => {\n            savedCallback.current?.();\n        };\n\n        if (delay !== null) {\n            const id = setInterval(handler, delay);\n            return () => {\n                clearInterval(id);\n            };\n        }\n    }, [delay]);\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { useRef, useEffect } from \"react\";\n\n/**\n * Keep a reference to the previous value of something. (during the previous render).\n *\n * @param value\n */\nexport function useLastValue<T>(value: T): T | undefined {\n    const ref = useRef<T>();\n    useEffect(() => void (ref.current = value), [value]);\n    return ref.current;\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { useCallback, useEffect } from \"react\";\n\n/**\n * Hook for triggering a a browser confirmation prompt if the user tries to navigate away or close the page.\n *\n * It is only possible to do this using nature browser UI, which is only a \"message\" can be provided and not a react component.\n */\nexport function useRouteChangePrompt(message: string, disabled: boolean = false) {\n    const onWindowOrTabClose = useCallback(\n        event => {\n            if (disabled) {\n                return;\n            }\n            event.preventDefault();\n            event.returnValue = message;\n            return message;\n        },\n        [disabled, message],\n    );\n    useEffect(() => {\n        if (disabled) {\n            return;\n        }\n        window.addEventListener(\"beforeunload\", onWindowOrTabClose);\n        return () => {\n            window.removeEventListener(\"beforeunload\", onWindowOrTabClose);\n        };\n    }, [disabled, onWindowOrTabClose, message]);\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useCallback } from \"react\";\nimport { TabHandler } from \"@vanilla/dom-utils\";\n\n/**\n * React hook for handling tabbing inside of a container with various exclusions.\n *\n * The goal is here is to be able to programatically implement various tabbing behaviours\n * required for accessibility.\n */\nexport function useTabKeyboardHandler(\n    root: Element | null = document.documentElement!,\n    excludedElements: Element[] = [],\n    excludedRoots: Element[] = [],\n): React.KeyboardEventHandler | undefined {\n    const makeTabHandler = useCallback(() => {\n        if (!root) {\n            return;\n        }\n        return new TabHandler(root, excludedElements, excludedRoots);\n    }, [root, excludedElements, excludedRoots]);\n\n    /**\n     * Handle shift tab key presses.\n     *\n     * - Focuses the previous element in the modal.\n     * - Loops if we are at the beginning\n     *\n     * @param event The react event.\n     */\n    const handleShiftTab = useCallback(\n        (event: React.KeyboardEvent) => {\n            const tabHandler = makeTabHandler();\n            if (!tabHandler) {\n                return;\n            }\n            const nextElement = tabHandler.getNext(undefined, true);\n            if (nextElement) {\n                event.preventDefault();\n\n                event.stopPropagation();\n                nextElement.focus();\n            }\n        },\n        [makeTabHandler],\n    );\n\n    /**\n     * Handle tab key presses.\n     *\n     * - Focuses the next element in the modal.\n     * - Loops if we are at the end.\n     *\n     * @param event The react event.\n     */\n    const handleTab = useCallback(\n        (event: React.KeyboardEvent) => {\n            const tabHandler = makeTabHandler();\n            if (!tabHandler) {\n                return;\n            }\n            const nextElement = tabHandler.getNext();\n            if (nextElement) {\n                event.preventDefault();\n                event.stopPropagation();\n                nextElement.focus();\n            }\n        },\n        [makeTabHandler],\n    );\n\n    /**\n     * Handle tab keyboard presses.\n     */\n    const handleTabbing = useCallback(\n        (event: React.KeyboardEvent) => {\n            const tabKey = 9;\n\n            if (event.shiftKey && event.keyCode === tabKey) {\n                handleShiftTab(event);\n            } else if (!event.shiftKey && event.keyCode === tabKey) {\n                handleTab(event);\n            }\n        },\n        [handleShiftTab, handleTab],\n    );\n\n    return handleTabbing;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useState } from \"react\";\n\n/**\n * Return a throw function for use inside of custom hooks & useEffect.\n *\n * This needed because throwing inside of `useEffect` does not propagate up to error boundaries.\n * @see https://github.com/facebook/react/issues/11334\n */\nexport function useThrowError(): (err: Error) => void {\n    const [error, setError] = useState<Error | null>(null);\n    if (error) {\n        throw error;\n    }\n\n    return setError;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { HTMLAttributes } from \"react\";\n\n/**\n * Deconstructs all attributes from HTML element to recreate it in React\n * This helps to avoid using dangerouslySetInnerHTML\n *\n * @param element - The element to deconstruct\n * @param options - Additionnal options. By default, \"class\" is replaced with \"className\".\n * @returns object - the attributes of that element\n */\nexport function deconstructAttributesFromElement(\n    element: Element,\n    options?: {\n        classAsClassName?: boolean;\n        hrefAsTo?: boolean; // for SmartLinks/Link components\n    },\n): HTMLAttributes<any> {\n    const { classAsClassName = true, hrefAsTo = false } = options || {};\n    const attrs = {};\n    Object.values(element.attributes).forEach(attr => {\n        attrs[attr.name] = attr.value;\n    });\n\n    // If this is to be used in React, we want to replace \"class\" with \"className\"\n    if (classAsClassName && attrs.hasOwnProperty(\"class\")) {\n        attrs[\"className\"] = attrs[\"class\"];\n        delete attrs[\"class\"];\n    }\n\n    // If this is to be used with <SmartLink/> OR <Link>. Do not use for regular <a/> tags.\n    if (hrefAsTo && attrs.hasOwnProperty(\"href\")) {\n        attrs[\"to\"] = attrs[\"href\"];\n        delete attrs[\"href\"];\n    }\n\n    return attrs;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nexport * from \"./createContextProvider\";\nexport * from \"./Hoverable\";\nexport * from \"./mounting\";\nexport * from \"./useAsync\";\nexport * from \"./useAsyncFn\";\nexport * from \"./useCollisionDetector\";\nexport * from \"./useComponentDebug\";\nexport * from \"./useDelayedFunction\";\nexport * from \"./useDomNodeAttachment\";\nexport * from \"./useEscapeListener\";\nexport * from \"./useFocusWatcher\";\nexport * from \"./useInterval\";\nexport * from \"./useLastValue\";\nexport * from \"./useMeasure\";\nexport * from \"./useMountedState\";\nexport * from \"./useRouteChangePrompt\";\nexport * from \"./useTabKeyboardHandler\";\nexport * from \"./useThrowError\";\nexport * from \"./deconstructAttributesFromElement\";\n","/**\n * Utility function related to logging/debugging.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nlet internalDebugValue = false;\n\n/**\n * Get or set the debug flag.\n *\n * @param newValue - The new value of debug.\n * @returns the current debug setting.\n */\nexport function debug(newValue?: boolean): boolean {\n    if (newValue !== undefined) {\n        internalDebugValue = newValue;\n    }\n\n    return internalDebugValue;\n}\n\n/**\n * Log something to console.\n * This only prints in debug mode.\n *\n * @param value - The value to log.\n */\nexport function logDebug(...value: any[]) {\n    if (internalDebugValue) {\n        // eslint-disable-next-line no-console\n        console.log(...value);\n    }\n}\n\n/**\n * Log something to console.\n * This only prints in debug mode, and if outputLog is true.\n *\n * @param outputLog - Condition to render log\n * @param value - The value to log.\n */\nexport function logDebugConditionnal(outputLog = false, ...value: any[]) {\n    if (internalDebugValue && outputLog) {\n        // eslint-disable-next-line no-console\n        console.log(...value);\n    }\n}\n\n/**\n * Log an error to console.\n * This will not run in test mode _unless_ debug is set to true.\n *\n * @param value - The value to log.\n */\nexport function logError(...value: any[]) {\n    if (!internalDebugValue && process.env.NODE_ENV === \"test\") {\n        return;\n    }\n    // eslint-disable-next-line no-console\n    console.error(...value);\n}\n\n/**\n * Log a warning to console.\n * This will not run in test mode _unless_ debug is set to true.\n *\n * @param value - The value to log.\n */\nexport function logWarning(...value: any[]) {\n    if (!internalDebugValue || process.env.NODE_ENV === \"test\") {\n        return;\n    }\n    // eslint-disable-next-line no-console\n    console.warn(...value);\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { standardAnimations } from \"@library/styles/animationHelpers\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { viewHeight } from \"csx\";\n\nexport const richEditorVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const varsFormElements = formElementsVariables();\n    const makeThemeVars = variableFactory(\"richEditor\");\n    const animations = standardAnimations();\n\n    const colors = makeThemeVars(\"colors\", {\n        bg: globalVars.mainColors.bg,\n        outline: globalVars.mainColors.primary.fade(0.6),\n    });\n\n    const spacing = makeThemeVars(\"spacing\", {\n        paddingLeft: 36,\n        paddingRight: 36,\n        paddingTop: 12,\n        paddingBottom: 12,\n        embedMenu: 0,\n    });\n\n    const sizing = makeThemeVars(\"sizing\", {\n        minHeight: 200,\n        emojiSize: 40,\n    });\n\n    const menuButton = makeThemeVars(\"menuButton\", {\n        size: 42,\n    });\n\n    const paragraphMenuHandle = makeThemeVars(\"paragraphMenuHandle\", {\n        size: 28,\n        offset: -varsFormElements.border.width + 1,\n    });\n\n    const insertLink = makeThemeVars(\"insertLink\", {\n        width: 287,\n    });\n\n    const flyout = makeThemeVars(\"flyout\", {\n        padding: {\n            vertical: 12,\n            horizontal: 12,\n        },\n        maxHeight: viewHeight(100),\n        height: menuButton.size,\n    });\n\n    const nub = makeThemeVars(\"nub\", {\n        width: 12,\n    });\n\n    const menu = makeThemeVars(\"menu\", {\n        borderWidth: 1,\n        offset: nub.width * 2,\n    });\n\n    const pilcrow = makeThemeVars(\"pilcrow\", {\n        offset: 0,\n        fontSize: 14,\n        animation: {\n            duration: \".3s\",\n            name: animations.fadeIn,\n            timing: \"ease-out\",\n            iterationCount: 1,\n        },\n    });\n\n    const emojiGroup = makeThemeVars(\"emojiGroup\", {\n        paddingLeft: 3,\n        offset: -(varsFormElements.border.width + menu.borderWidth * 2),\n    });\n\n    const embedMenu = makeThemeVars(\"embedMenu\", {\n        padding: 0,\n        mobile: {\n            border: {\n                color: globalVars.mainColors.primary,\n            },\n            transition: {\n                duration: \".15s\",\n                timing: \"ease-out\",\n            },\n        },\n    });\n\n    const embedButton = makeThemeVars(\"embedButton\", {\n        display: \"block\",\n        offset: -varsFormElements.border.width,\n    });\n\n    const text = makeThemeVars(\"text\", {\n        offset: 0,\n        placeholder: {\n            color: globalVars.mixBgAndFg(0.5),\n        },\n    });\n\n    const title = makeThemeVars(\"titleInput\", {\n        height: globalVars.fonts.size.title + globalVars.gutter.half,\n        fontSize: globalVars.fonts.size.title,\n        placeholder: {\n            color: globalVars.mixBgAndFg(0.5),\n        },\n    });\n\n    const scrollContainer = makeThemeVars(\"scrollContainer\", {\n        overshoot: 48,\n    });\n\n    const emojiBody = makeThemeVars(\"emojiBody\", {\n        height: 252,\n        padding: {\n            horizontal: 3,\n            top: 3,\n            bottom: 0,\n        },\n    });\n\n    const emojiHeader = makeThemeVars(\"emojiHeader\", {\n        padding: {\n            horizontal: 12,\n            vertical: 4,\n        },\n    });\n\n    const emojiFooter = makeThemeVars(\"emojiFooter\", {\n        height: menuButton.size,\n    });\n\n    const buttonContents = makeThemeVars(\"buttonContents\", {\n        state: {\n            bg: globalVars.mainColors.primary.fade(0.1),\n        },\n    });\n\n    const iconWrap = makeThemeVars(\"iconWrap\", {\n        width: 32,\n        height: 32,\n    });\n\n    const richEditorWidth = 8 * sizing.emojiSize;\n\n    const modernFrame = makeThemeVars(\"modernFrame\", {\n        padding: 16,\n        margin: 16,\n    });\n\n    return {\n        colors,\n        spacing,\n        sizing,\n        menuButton,\n        paragraphMenuHandle,\n        insertLink,\n        flyout,\n        nub,\n        menu,\n        pilcrow,\n        emojiGroup,\n        embedButton,\n        text,\n        title,\n        embedMenu,\n        scrollContainer,\n        emojiBody,\n        buttonContents,\n        emojiHeader,\n        emojiFooter,\n        iconWrap,\n        richEditorWidth,\n        modernFrame,\n    };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport {\n    absolutePosition,\n    appearance,\n    singleBorder,\n    singleLineEllipsis,\n    userSelect,\n    pointerEvents,\n    importantUnit,\n} from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { calc, important, percent, quote, translateY } from \"csx\";\nimport { richEditorVariables } from \"@rich-editor/editor/richEditorVariables\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { CSSObject } from \"@emotion/css\";\nimport { buttonResetMixin } from \"@vanilla/library/src/scripts/forms/buttonMixins\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\n\nexport const richEditorClasses = useThemeCache((legacyMode: boolean) => {\n    const globalVars = globalVariables();\n    const style = styleFactory(\"richEditor\");\n    const vars = richEditorVariables();\n    const formVars = formElementsVariables();\n    const mediaQueries = layoutVariables().mediaQueries();\n\n    const root = style({\n        position: \"relative\",\n        display: \"block\",\n        ...{\n            \"&.isDisabled\": {\n                ...{\n                    \"&, &.richEditor-button\": {\n                        cursor: important(\"progress\"),\n                    },\n                },\n            },\n            \".richEditor-textWrap, .richEditor-frame\": {\n                display: \"flex\",\n                flexDirection: \"column\",\n                flexGrow: 1,\n                position: \"relative\",\n            },\n            \"& .ql-clipboard\": {\n                ...Mixins.absolute.srOnly(),\n                position: \"fixed\", // Fixed https://github.com/quilljs/quill/issues/1374#issuecomment-415333651\n            },\n            \".richEditor-nextInput, .iconButton, .richEditor-button\": {\n                ...singleLineEllipsis(),\n                ...appearance(),\n                position: \"relative\",\n                border: 0,\n                padding: 0,\n                background: \"none\",\n                textAlign: \"left\",\n            },\n            \".Close-x\": {\n                display: \"block\",\n                cursor: \"pointer\",\n            },\n            \".content-wrapper\": {\n                height: percent(100),\n            },\n            \".embedDialogue\": {\n                position: \"relative\",\n            },\n        },\n    });\n\n    const iconWrap = style(\"iconWrap\", {\n        ...pointerEvents(),\n        content: quote(``),\n        ...absolutePosition.middleOfParent(),\n        width: styleUnit(vars.iconWrap.width),\n        height: styleUnit(vars.iconWrap.width),\n        ...Mixins.border({\n            radius: 3,\n            color: globalVars.elementaryColors.transparent,\n        }),\n    });\n\n    const paragraphMenu = style(\"paragraphMenu\", {\n        position: \"absolute\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        top: styleUnit(vars.pilcrow.offset),\n        left: 0,\n        marginLeft: styleUnit(-globalVars.gutter.quarter - (!legacyMode ? globalVars.gutter.size * 2 : 0)),\n        transform: `translateX(-100%) translateY(-50%)`,\n        height: styleUnit(vars.paragraphMenuHandle.size),\n        width: styleUnit(vars.paragraphMenuHandle.size),\n        animationName: vars.pilcrow.animation.name,\n        animationDuration: vars.pilcrow.animation.duration,\n        animationTimingFunction: vars.pilcrow.animation.timing,\n        animationIterationCount: vars.pilcrow.animation.iterationCount,\n        zIndex: 10,\n        ...{\n            \".richEditor-button&.isActive:hover\": {\n                cursor: \"default\",\n            },\n            \"&.isMenuInset\": {\n                transform: translateY(\"-50%\"),\n            },\n        },\n    });\n\n    const paragraphMenuMobile = style(\"paragraphMenu-mobile\", {\n        position: \"relative\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        top: important(0),\n    });\n\n    const menuBar = style(\"menuBar\", {\n        position: \"relative\",\n        width: styleUnit(vars.menuButton.size * 4),\n        fontSize: styleUnit(globalVars.fonts.size.medium),\n        overflow: \"hidden\",\n        zIndex: 1,\n    });\n\n    const menuBarToggles = style(\"menuBarToggles\", {\n        position: \"relative\",\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        flexWrap: \"nowrap\",\n        width: styleUnit(vars.menuButton.size * 4),\n    });\n\n    const paragraphMenuHandle = style(\"paragraphMenuHandle\", {\n        ...appearance(),\n        ...userSelect(),\n        background: \"transparent\",\n        border: 0,\n        display: \"block\",\n        cursor: \"pointer\",\n        width: styleUnit(formVars.sizing.height),\n        height: styleUnit(formVars.sizing.height),\n        padding: 0,\n        maxWidth: styleUnit(formVars.sizing.height),\n        minWidth: styleUnit(formVars.sizing.height),\n        outline: 0,\n        ...{\n            \"&:focus, &:hover\": {\n                color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n            },\n            [`&.isOpen .${iconWrap}`]: {\n                backgroundColor: ColorsUtils.colorOut(vars.buttonContents.state.bg),\n            },\n        },\n    });\n\n    const paragraphMenuHandleMobile = style(\"paragraphMenuHandleMobile\", {\n        width: styleUnit(vars.menuButton.size),\n        height: styleUnit(vars.menuButton.size),\n        maxWidth: styleUnit(vars.menuButton.size),\n        minWidth: styleUnit(vars.menuButton.size),\n    });\n\n    const text = style(\n        \"text\",\n        {\n            position: \"relative\",\n            whiteSpace: important(\"pre-wrap\"),\n            outline: 0,\n            paddingBottom: 24, // So the user has room to click.\n\n            ...{\n                // When the editor is empty we should be displaying a placeholder.\n                \"&.ql-blank::before\": {\n                    content: `attr(placeholder)`,\n                    display: \"block\",\n                    color: ColorsUtils.colorOut(vars.text.placeholder.color),\n                    position: \"absolute\",\n                    top: vars.text.offset,\n                    left: 0,\n                    cursor: \"text\",\n                },\n            },\n        },\n        mediaQueries.oneColumnDown({\n            fontSize: importantUnit(16), // for iOS\n        }),\n    );\n\n    const menuItems = style(\"menuItems\", {\n        msOverflowStyle: \"-ms-autohiding-scrollbar\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n        flexWrap: \"nowrap\",\n        listStyle: \"none\",\n        padding: 0,\n        margin: 0,\n        zIndex: 1,\n        overflow: \"visible\",\n        ...{\n            \".richEditor-menuItem\": {\n                display: \"block\",\n                padding: 0,\n                margin: 0,\n                ...{\n                    \".richEditor-button\": {\n                        display: \"block\",\n                        width: styleUnit(vars.menuButton.size),\n                        fontSize: styleUnit((vars.menuButton.size * 24) / 39),\n                        lineHeight: styleUnit(vars.menuButton.size),\n                        ...{\n                            \"&.emojiChar-🇺🇳\": {\n                                fontSize: styleUnit(10),\n                            },\n                        },\n                    },\n                    \"&:first-child .richEditor-embedButton\": {\n                        borderBottomLeftRadius: styleUnit(globalVars.border.radius),\n                    },\n                    \"&.isRightAligned\": {\n                        marginLeft: \"auto\",\n                    },\n                },\n            },\n        },\n    });\n\n    const button = style(\"button\", {\n        ...buttonResetMixin(),\n        display: \"block\",\n        ...userSelect(),\n        ...appearance(),\n        cursor: \"pointer\",\n        width: styleUnit(vars.menuButton.size),\n        height: styleUnit(vars.menuButton.size),\n        border: 0,\n        padding: 0,\n        overflow: \"hidden\",\n        position: \"relative\",\n        color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n        outline: 0,\n        ...{\n            \"&:hover\": {\n                color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n            },\n            \"&:focus\": {\n                color: ColorsUtils.colorOut(globalVars.mainColors.secondary),\n            },\n            \"&:active\": {\n                color: ColorsUtils.colorOut(globalVars.mainColors.secondary),\n            },\n            [`&:hover .${iconWrap}`]: {\n                color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n                backgroundColor: ColorsUtils.colorOut(vars.buttonContents.state.bg),\n            },\n            [`&.isOpen .${iconWrap}`]: {\n                backgroundColor: ColorsUtils.colorOut(vars.buttonContents.state.bg),\n            },\n            [`&.focus-visible .${iconWrap}`]: {\n                backgroundColor: ColorsUtils.colorOut(vars.buttonContents.state.bg),\n            },\n            \"&.richEditor-formatButton, &.richEditor-embedButton\": {\n                height: styleUnit(vars.menuButton.size),\n            },\n            \"&.emojiGroup\": {\n                display: \"block\",\n                width: styleUnit(vars.menuButton.size),\n                height: styleUnit(vars.menuButton.size),\n                textAlign: \"center\",\n            },\n            \"&:not(:disabled)\": {\n                cursor: \"pointer\",\n            },\n            [`&.isActive .${iconWrap}`]: {\n                backgroundColor: ColorsUtils.colorOut(vars.buttonContents.state.bg),\n            },\n        },\n    });\n\n    const topLevelButtonActive = style(\"topLevelButtonActive\", {\n        color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n        ...{\n            [`.${iconWrap}`]: {\n                backgroundColor: ColorsUtils.colorOut(vars.buttonContents.state.bg),\n            },\n        },\n    });\n\n    const menuItem = style(\"menuItem\", {\n        display: \"block\",\n        padding: 0,\n        margin: 0,\n        overflow: \"visible\",\n        ...{\n            \".richEditor-button, &.richEditor-button\": {\n                width: styleUnit(vars.menuButton.size),\n                height: styleUnit(vars.menuButton.size),\n                maxWidth: styleUnit(vars.menuButton.size),\n                fontSize: styleUnit((vars.menuButton.size * 24) / 39),\n                lineHeight: styleUnit(vars.menuButton.size),\n                ...{\n                    \"&.emojiChar-🇺🇳\": {\n                        fontSize: styleUnit(14),\n                    },\n                },\n            },\n            \"&.isRightAligned\": {\n                marginLeft: \"auto\",\n            },\n        },\n    });\n\n    const upload = style(\"upload\", {\n        display: important(\"none\"),\n    });\n\n    const embedBar = style(\"embedBar\", {\n        display: \"block\",\n        width: percent(100),\n        ...Mixins.padding({\n            horizontal: legacyMode ? 0 : (vars.menuButton.size - globalVars.icon.sizes.small) / 2,\n            vertical: vars.embedMenu.padding,\n        }),\n        background: legacyMode ? undefined : ColorsUtils.colorOut(vars.colors.bg),\n    });\n\n    const embedBarSeparator = style(\"embedBarSeparator\", {\n        height: styleUnit(globalVars.gutter.quarter),\n        width: styleUnit(globalVars.gutter.quarter),\n        borderRadius: styleUnit(globalVars.gutter.quarter),\n        background: ColorsUtils.colorOut(globalVars.mainColors.fg),\n        ...Mixins.margin({ horizontal: globalVars.gutter.half }),\n    });\n\n    const icon = style(\"icon\", {\n        display: \"block\",\n        margin: \"auto\",\n        height: styleUnit(globalVars.icon.sizes.default),\n        width: styleUnit(globalVars.icon.sizes.default),\n    });\n\n    const legacyFrame = style(\"legacyFrame\", {\n        margin: \"auto\",\n        height: \"initial\",\n        minHeight: styleUnit(vars.sizing.minHeight + vars.menuButton.size),\n        position: \"relative\",\n        backgroundColor: ColorsUtils.colorOut(vars.colors.bg),\n        padding: 0,\n        ...{\n            \"&.isMenuInset\": {\n                overflow: \"initial\",\n                position: \"relative\",\n            },\n        },\n    });\n\n    const close = style(\"close\", {\n        ...absolutePosition.middleRightOfParent(),\n        ...userSelect(),\n        ...appearance(),\n        width: styleUnit(vars.menuButton.size),\n        height: styleUnit(vars.menuButton.size),\n        lineHeight: styleUnit(vars.menuButton.size),\n        verticalAlign: \"bottom\",\n        textAlign: \"center\",\n        background: \"transparent\",\n        cursor: \"pointer\",\n        border: 0,\n        outline: 0,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n    });\n\n    const flyoutDescription = style(\"flyoutDescription\", {\n        marginBottom: \".5em\",\n    });\n\n    const separator = style(\"separator\", {\n        borderTop: singleBorder(),\n        marginBottom: styleUnit(8),\n    });\n\n    const position = style(\"position\", {\n        ...{\n            \"&&\": {\n                position: \"absolute\",\n                left: calc(`50% - ${styleUnit(vars.spacing.paddingLeft / 2)}`),\n            },\n            \"&.isUp\": {\n                bottom: calc(`50% + ${styleUnit(vars.spacing.paddingRight / 2 - formVars.border.width)}`),\n            },\n            \"&.isDown\": {\n                top: calc(`50% + ${styleUnit(vars.spacing.paddingRight / 2 - formVars.border.width)}`),\n            },\n        },\n    });\n\n    const paragraphMenuPanel = style(\"paragraphMenuPanel\", {});\n\n    const emojiGroup = style(\"emojiGroup\", {\n        ...{\n            [`&.isSelected .${iconWrap}`]: {\n                backgroundColor: ColorsUtils.colorOut(vars.buttonContents.state.bg),\n            },\n        },\n    });\n\n    const flyoutOffset = style(\"flyoutOffset\", {\n        marginTop: styleUnit((vars.menuButton.size - vars.iconWrap.width) / -2 + 1),\n    });\n\n    const placeholder = style(\"placeholder\", {\n        ...{\n            \"&&&:before\": {\n                margin: 0,\n            },\n        },\n    });\n\n    return {\n        root,\n        menuBar,\n        menuBarToggles,\n        paragraphMenuHandle,\n        paragraphMenuHandleMobile,\n        text,\n        menuItems,\n        upload,\n        embedBar,\n        embedBarSeparator,\n        menuItem,\n        button,\n        topLevelButtonActive,\n        icon,\n        close,\n        flyoutDescription,\n        paragraphMenu,\n        paragraphMenuMobile,\n        separator,\n        position,\n        legacyFrame,\n        paragraphMenuPanel,\n        iconWrap,\n        flyoutOffset,\n        emojiGroup,\n        placeholder,\n    };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { ReactElement } from \"react\";\n\nexport interface IComponentMountOptions {\n    overwrite?: boolean;\n    clearContents?: boolean;\n    widgetResolver?: IWidgetResolver;\n    bypassPortalManager?: boolean;\n    unmountBeforeRender?: boolean;\n}\n\nexport interface IWidgetOptions {\n    $type?: string; // the component to get, optional because coming from API\n    children?: IWidgetOptions[]; // widgets to mount as children\n    [x: string]: any; // can take additional properties\n}\n\n/**\n * Defines an interface for a function that will turn widget options into props that can be used to render a component.\n */\nexport interface IWidgetResolver {\n    (options: IWidgetOptions): {\n        [key: string]: any;\n    };\n}\n\ninterface IPortal {\n    target: HTMLElement;\n    component: React.ReactElement;\n}\n\nlet hasRendered = false;\nconst portals: IPortal[] = [];\n\nconst PORTAL_MANAGER_ID = \"vanillaPortalManager\";\ntype PortalContextType = React.FC<{ children?: React.ReactNode }>;\nlet PortalContext: PortalContextType = (props) => {\n    return <React.Fragment>{props.children}</React.Fragment>;\n};\n\nexport function applySharedPortalContext(context: PortalContextType) {\n    PortalContext = context;\n    if (hasRendered) {\n        // Re-render the portals. We never want to be the first to initialize rendering though.\n        renderPortals();\n    }\n}\n\n/**\n * Component for managing all mounted components from a single wrapped context.\n *\n * This allows a shared context provider to be applied to parts of the site.\n */\nfunction PortalManager() {\n    return (\n        <div>\n            <PortalContext>\n                {portals.map((portal, i) => {\n                    return (\n                        <React.Fragment key={i}>\n                            {ReactDOM.createPortal(portal.component, portal.target)}\n                        </React.Fragment>\n                    );\n                })}\n            </PortalContext>\n        </div>\n    );\n}\n\nfunction renderPortals(callback?: () => void) {\n    hasRendered = true;\n    // Ensure we have our modal container.\n    let container = document.getElementById(PORTAL_MANAGER_ID);\n    if (!container) {\n        container = document.createElement(\"div\");\n        container.id = PORTAL_MANAGER_ID;\n        document.body.appendChild(container);\n    }\n\n    ReactDOM.render(<PortalManager />, container, callback);\n}\n\n/**\n * Mount a root component of a React tree.\n *\n * - ReactDOM render.\n * - Typestyle render.\n *\n * If the overwrite option is passed this component will replace the components you passed as target.\n *\n * Default Mode:\n * <div><TARGET /></div> -> <div><TARGET><REACT></TARGET><div>\n *\n * Overwrite Mode:\n * <div><TARGET /></div> -> <div><REACT/></div>\n */\nexport function mountReact(\n    component: React.ReactElement,\n    target: HTMLElement,\n    callback?: () => void,\n    options?: IComponentMountOptions & { bypassPortalManager?: boolean },\n) {\n    if (options?.bypassPortalManager) {\n        const doRender = () => {\n            ReactDOM.render(<PortalContext>{component}</PortalContext>, target, callback);\n        };\n        if (options?.unmountBeforeRender) {\n            ReactDOM.unmountComponentAtNode(target);\n        }\n        setImmediate(doRender);\n        return;\n    }\n\n    let mountPoint = target;\n    let cleanupContainer: HTMLElement | undefined;\n    if (options?.clearContents) {\n        target.innerHTML = \"\";\n    }\n\n    if (options && options.overwrite) {\n        const container = document.createElement(\"span\");\n        cleanupContainer = container;\n        target.parentElement!.insertBefore(container, target);\n        mountPoint = container;\n    }\n    portals.push({ target: mountPoint, component });\n\n    renderPortals(() => {\n        if (cleanupContainer) {\n            target.remove();\n            if (cleanupContainer.firstElementChild) {\n                cleanupContainer.parentElement!.insertBefore(cleanupContainer.firstElementChild, cleanupContainer);\n                cleanupContainer.remove();\n                target.remove();\n            }\n        }\n        callback && callback();\n    });\n}\n\nexport interface IMountable {\n    target: HTMLElement;\n    component: React.ReactElement;\n}\n\nexport function mountReactMultiple(components: IMountable[], callback?: () => void, options?: IComponentMountOptions) {\n    if (!components.length) {\n        return;\n    }\n\n    let toCleanup: Array<{ target: HTMLElement; cleanup: HTMLElement }> = [];\n    components.forEach(({ component, target }) => {\n        let mountPoint = target;\n        if (options?.clearContents) {\n            target.innerHTML = \"\";\n        }\n\n        if (options && options.overwrite) {\n            const container = document.createElement(\"span\");\n            toCleanup.push({\n                target,\n                cleanup: container,\n            });\n            target.parentElement!.insertBefore(container, target);\n            mountPoint = container;\n        }\n        portals.push({ target: mountPoint, component });\n    });\n\n    renderPortals(() => {\n        toCleanup.forEach(({ cleanup, target }) => {\n            if (cleanup.firstElementChild) {\n                cleanup.parentElement!.insertBefore(cleanup.firstElementChild, cleanup);\n                cleanup.remove();\n                target.remove();\n            }\n        });\n        callback && callback();\n    });\n}\n\n/**\n * Mount a modal with ReactDOM. This is only needed at the top level context.\n *\n * If you are already in a react context, just use `<Modal />`.\n * Note: Using this will clear any other modals mounted with this component.\n *\n * @param element The <Modal /> element to render.\n * @param containerID The container to render the modal into. Defaults to modal container.\n * @param asRealPortal Whether or not we should render this as a real portal, or one managed by the portal manager.\n */\nexport function mountPortal(element: ReactElement<any>, containerID: string, asRealPortal: boolean = false) {\n    // Ensure we have our modal container.\n    let container = document.getElementById(containerID);\n    if (!container) {\n        container = document.createElement(\"div\");\n        container.id = containerID;\n        document.body.appendChild(container);\n    }\n\n    if (asRealPortal) {\n        return ReactDOM.createPortal(element, container);\n    } else {\n        return new Promise((resolve) => mountReact(element, container!, () => resolve()));\n    }\n}\n","import { cssRaw, flattenNests } from \"@library/styles/styleShim\";\nimport { CSSObject } from \"@emotion/css\";\n\nexport function cssOut(selector: string, ...objects: CSSObject[]): void {\n    cssRaw({\n        [selector]: objects.map(flattenNests),\n    });\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\n\nexport const DEEP_LINK_ATTR = \"data-deep-link\";\n\n/**\n * Override of the swagger DeepLink component.\n * @see https://github.com/swagger-api/swagger-ui/blob/master/src/core/components/deep-link.jsx\n */\nexport function VanillaSwaggerDeepLink({ enabled, path, text }: IProps) {\n    const id = enabled ? `/${path}` : undefined;\n\n    return (\n        <a\n            href={id}\n            onClick={(e) => {\n                e.preventDefault();\n            }}\n            className=\"nostyle\"\n            data-id={`/${path}`} // Force to always show this.\n            data-deep-link={true}\n        >\n            <span>{text}</span>\n        </a>\n    );\n}\n\ninterface IProps {\n    enabled: boolean;\n    path: string;\n    text: string;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport Loader from \"@vanilla/library/src/scripts/loaders/Loader\";\n\n/**\n * Custom layout for swagger-ui.\n *\n * - Use Vanilla's loader.\n * - Remove unwanted info module.\n */\nexport function VanillaSwaggerLayout(props: any) {\n    let { errSelectors, specSelectors, getComponent } = props;\n\n    let SvgAssets = getComponent(\"SvgAssets\");\n    let VersionPragmaFilter = getComponent(\"VersionPragmaFilter\");\n    let Operations = getComponent(\"operations\", true);\n    let Models = getComponent(\"Models\", true);\n    let Row = getComponent(\"Row\");\n    let Col = getComponent(\"Col\");\n    let Errors = getComponent(\"errors\", true);\n\n    let isSwagger2 = specSelectors.isSwagger2();\n    let isOAS3 = specSelectors.isOAS3();\n\n    const isSpecEmpty = !specSelectors.specStr();\n\n    const loadingStatus = specSelectors.loadingStatus();\n\n    let loadingMessage: React.ReactNode = null;\n\n    if (loadingStatus === \"loading\") {\n        return <Loader padding={200} />;\n    }\n\n    if (loadingStatus === \"failed\") {\n        loadingMessage = (\n            <div className=\"info\">\n                <div className=\"loading-container\">\n                    <h4 className=\"title\">Failed to load API definition.</h4>\n                    <Errors />\n                </div>\n            </div>\n        );\n    }\n\n    if (loadingStatus === \"failedConfig\") {\n        const lastErr = errSelectors.lastError();\n        const lastErrMsg = lastErr ? lastErr.get(\"message\") : \"\";\n        loadingMessage = (\n            <div\n                className=\"info\"\n                style={{ maxWidth: \"880px\", marginLeft: \"auto\", marginRight: \"auto\", textAlign: \"center\" }}\n            >\n                <div className=\"loading-container\">\n                    <h4 className=\"title\">Failed to load remote configuration.</h4>\n                    <p>{lastErrMsg}</p>\n                </div>\n            </div>\n        );\n    }\n\n    if (!loadingMessage && isSpecEmpty) {\n        loadingMessage = <h4>No API definition provided.</h4>;\n    }\n\n    if (loadingMessage) {\n        return (\n            <div className=\"swagger-ui\">\n                <div className=\"loading-container\">{loadingMessage}</div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"swagger-ui\">\n            <SvgAssets />\n            <VersionPragmaFilter isSwagger2={isSwagger2} isOAS3={isOAS3} alsoShow={<Errors />}>\n                <Errors />\n                <Row>\n                    <Col mobile={12} desktop={12}>\n                        <Operations />\n                    </Col>\n                </Row>\n                <Row>\n                    <Col mobile={12} desktop={12}>\n                        <Models />\n                    </Col>\n                </Row>\n            </VersionPragmaFilter>\n        </div>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { VanillaSwaggerDeepLink } from \"@library/features/swagger/VanillaSwaggerDeepLink\";\nimport { VanillaSwaggerLayout } from \"@library/features/swagger/VanillaSwaggerLayout\";\n\nexport function VanillaSwaggerPlugin() {\n    // Create the plugin that provides our layout component\n    return {\n        components: {\n            VanillaSwaggerLayout: VanillaSwaggerLayout,\n            DeepLink: VanillaSwaggerDeepLink,\n        },\n    };\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { scrollToElement } from \"@library/content/hashScrolling\";\n\n/**\n * Stub out the scroll to method.\n *\n * Swagger currently uses a really weird way to scroll (scrolling done in JS).\n * Stub it out and use our own scrolling method that accounts for header offset.\n */\nexport function replaceDeepLinkScrolling(swagger: any) {\n    swagger.plugins.DeepLinkingLayout.statePlugins.layout.actions.scrollToElement = (elementToScroll, container) => {\n        scrollToElement(elementToScroll, window.__VANILLA_GLOBAL_SCROLL_OFFSET__);\n        return () => {};\n    };\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { VanillaSwaggerPlugin } from \"@library/features/swagger/VanillaSwaggerPlugin\";\nimport { DEEP_LINK_ATTR } from \"@library/features/swagger/VanillaSwaggerDeepLink\";\nimport { replaceDeepLinkScrolling } from \"@library/features/swagger/replaceDeepLinkScrolling\";\n\nexport interface ISwaggerHeading {\n    text: string;\n    ref: string;\n    level: number;\n}\n\nasync function importSwagger() {\n    const imported = await import(/* webpackChunkName: \"swagger-ui-react\" */ \"@library/features/swagger/SwaggerUI\");\n    return imported.SwaggerUI;\n}\n\nfunction notEmpty<TValue>(value: TValue | null | undefined): value is TValue {\n    return value !== null && value !== undefined;\n}\n\nexport function useSwaggerUI(_options: { url?: string; spec?: object; [key: string]: any; tryIt?: boolean }) {\n    const { url, spec, tryIt = false } = _options;\n    const [headings, setHeadings] = useState<ISwaggerHeading[]>([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const swaggerRef = useRef<HTMLDivElement | null>(null);\n\n    useEffect(() => {\n        if (tryIt && swaggerRef.current && !swaggerRef.current.classList.contains(\"tryIt\")) {\n            swaggerRef.current.classList.add(\"tryIt\");\n        }\n    }, [tryIt]);\n\n    useEffect(() => {\n        importSwagger().then((SwaggerUIConstructor) => {\n            replaceDeepLinkScrolling(SwaggerUIConstructor);\n            if (swaggerRef.current) {\n                setIsLoading(false);\n                SwaggerUIConstructor({\n                    domNode: swaggerRef.current,\n                    plugins: [VanillaSwaggerPlugin()],\n                    layout: \"VanillaSwaggerLayout\",\n                    ..._options,\n                    operationsSorter: \"alpha\",\n                    deepLinking: true,\n                    onComplete: () => {\n                        const opblocks = swaggerRef.current!.querySelectorAll(\".opblock-tag, .opblock\");\n                        const headings = Array.from(opblocks)\n                            .map((blockNode) => {\n                                if (blockNode.classList.contains(\"opblock-tag\")) {\n                                    const text = blockNode.getAttribute(\"data-tag\");\n                                    const ref = blockNode.querySelector(`[${DEEP_LINK_ATTR}]`)?.getAttribute(\"data-id\");\n\n                                    if (!text || !ref) {\n                                        return null;\n                                    }\n                                    return {\n                                        text: text.replace(/\\u200B/g, \"\"),\n                                        ref,\n                                        level: 2,\n                                    };\n                                } else {\n                                    const methodText =\n                                        blockNode.querySelector(\".opblock-summary-method\")?.textContent ?? \"\";\n                                    const pathText =\n                                        blockNode.querySelector(\".opblock-summary-path\")?.textContent ?? \"\";\n                                    const ref = blockNode.querySelector(`[${DEEP_LINK_ATTR}]`)?.getAttribute(\"data-id\");\n                                    if (!methodText || !pathText || !ref) {\n                                        return null;\n                                    }\n                                    return {\n                                        text: (methodText + \" \" + pathText).replace(/\\u200B/g, \"\"),\n                                        ref,\n                                        level: 3,\n                                    };\n                                }\n                            })\n                            .filter(notEmpty);\n                        setHeadings(headings);\n                    },\n                });\n            }\n        });\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [spec, url]);\n\n    return { swaggerRef, headings, isLoading };\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { onReady, getMeta, formatUrl, siteUrl } from \"@library/utility/appUtils\";\nimport { useSwaggerUI } from \"@vanilla/library/src/scripts/features/swagger/useSwaggerUI\";\nimport { mountReact } from \"@vanilla/react-utils\";\n\nonReady(async () => {\n    const mountPoint = document.getElementById(\"swagger-ui\");\n    if (mountPoint) {\n        mountReact(<SwaggerUI />, mountPoint);\n    }\n});\n\nfunction SwaggerUI() {\n    const { swaggerRef } = useSwaggerUI({\n        requestInterceptor: (request: Request) => {\n            request.headers[\"x-transient-key\"] = getMeta(\"TransientKey\");\n            return request;\n        },\n        url: siteUrl(\"/api/v2/open-api/v3\" + window.location.search),\n        tryIt: true,\n    });\n\n    return <div ref={swaggerRef}></div>;\n}\n","/**\n * Set wepback's public path.\n * Otherwise the lookups of dynamically imported webpack files can fail on sites that have a different webroot\n * Eg. installed in a subfolder / using Reverse Proxy.\n *\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { assetUrl, getMeta } from \"@library/utility/appUtils\";\n\n/**\n * This needs to be a free variable.\n *\n * Webpack does some magic to make this work.\n * It you try and set a local or global version of it, it WILL NOT work.\n *\n * @see https://stackoverflow.com/questions/12934929/what-are-free-variables\n * @see https://webpack.js.org/configuration/output/#output-publicpath\n * @see https://github.com/webpack/webpack/issues/2776#issuecomment-233208623\n */\n// @ts-ignore: Cannot find variable warning. See comment aboe.\n__webpack_public_path__ = assetUrl(\"/dist/\" + __BUILD__SECTION__ + \"/\");\n"],"sourceRoot":""}