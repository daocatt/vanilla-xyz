{"version":3,"sources":["webpack://vanilla-forum/./packages/vanilla-utils/src/fileUtils.ts","webpack://vanilla-forum/./packages/vanilla-utils/src/mathUtils.ts","webpack://vanilla-forum/./packages/vanilla-utils/src/stringUtils.ts","webpack://vanilla-forum/./packages/vanilla-utils/src/systemUtils.ts","webpack://vanilla-forum/./packages/vanilla-utils/src/typeUtils.ts","webpack://vanilla-forum/./applications/vanilla/src/scripts/search/CommunityPostTypeFilter.tsx","webpack://vanilla-forum/./node_modules/moment/locale sync en","webpack://vanilla-forum/./plugins/rich-editor/src/scripts/quill/components/blockQuoteStyles.ts","webpack://vanilla-forum/./packages/vanilla-i18n/src/localeStore.ts","webpack://vanilla-forum/./packages/vanilla-i18n/src/LocaleProvider.tsx","webpack://vanilla-forum/./packages/vanilla-i18n/src/translationStore.ts","webpack://vanilla-forum/./packages/vanilla-i18n/src/ContentTranslator.tsx","webpack://vanilla-forum/./packages/vanilla-i18n/src/ContentTranslationProvider.tsx","webpack://vanilla-forum/./packages/vanilla-dom-utils/src/domData.ts","webpack://vanilla-forum/./packages/vanilla-dom-utils/src/emoji.ts","webpack://vanilla-forum/./packages/vanilla-dom-utils/src/EscapeListener.ts","webpack://vanilla-forum/./packages/vanilla-dom-utils/src/events.ts","webpack://vanilla-forum/./packages/vanilla-dom-utils/src/FocusWatcher.ts","webpack://vanilla-forum/./packages/vanilla-dom-utils/src/sanitization.ts","webpack://vanilla-forum/./packages/vanilla-dom-utils/src/scripts.ts","webpack://vanilla-forum/./packages/vanilla-dom-utils/src/shadowDom.tsx","webpack://vanilla-forum/./packages/vanilla-dom-utils/src/TabHandler.ts","webpack://vanilla-forum/./packages/vanilla-dom-utils/src/index.ts","webpack://vanilla-forum/./plugins/rich-editor/src/scripts/flyouts/pieces/flyoutPosition.ts","webpack://vanilla-forum/./packages/vanilla-react-utils/src/Hoverable.tsx","webpack://vanilla-forum/./packages/vanilla-react-utils/src/useMeasure.ts","webpack://vanilla-forum/./packages/vanilla-react-utils/src/useCollisionDetector.tsx","webpack://vanilla-forum/./packages/vanilla-react-utils/src/useComponentDebug.tsx","webpack://vanilla-forum/./packages/vanilla-react-utils/src/useDomNodeAttachment.tsx","webpack://vanilla-forum/./packages/vanilla-react-utils/src/useEscapeListener.ts","webpack://vanilla-forum/./packages/vanilla-react-utils/src/useFocusWatcher.ts","webpack://vanilla-forum/./packages/vanilla-react-utils/src/useLastValue.tsx","webpack://vanilla-forum/./packages/vanilla-react-utils/src/useThrowError.ts","webpack://vanilla-forum/./packages/vanilla-react-utils/src/deconstructAttributesFromElement.ts","webpack://vanilla-forum/./packages/vanilla-utils/src/debugUtils.ts","webpack://vanilla-forum/./node_modules/p-debounce/index.js","webpack://vanilla-forum/./node_modules/@emotion/css/dist/emotion-css.cjs.js","webpack://vanilla-forum/./library/src/scripts/homeWidget/widgetDefaultIcon.svg","webpack://vanilla-forum/./node_modules/@emotion/css/dist/emotion-css.cjs.prod.js","webpack://vanilla-forum/./applications/vanilla/src/scripts/categories/CategorySuggestionActions.ts","webpack://vanilla-forum/./library/src/scripts/forms/select/SelectOne.tsx","webpack://vanilla-forum/./applications/vanilla/src/scripts/categories/categoriesReducer.ts","webpack://vanilla-forum/./applications/vanilla/src/scripts/redux/reducer.ts","webpack://vanilla-forum/./applications/vanilla/src/scripts/forms/CommunityCategoryInput.tsx","webpack://vanilla-forum/./library/src/scripts/features/tags/TagsInput.tsx","webpack://vanilla-forum/./library/src/scripts/features/tags/TagsHooks.tsx","webpack://vanilla-forum/./applications/vanilla/src/scripts/search/SearchFilterPanelCommunity.tsx","webpack://vanilla-forum/./applications/vanilla/src/scripts/search/SearchFilterPanelComments.tsx","webpack://vanilla-forum/./applications/vanilla/src/scripts/search/CollapseCommentsSearchMetaLoader.tsx","webpack://vanilla-forum/./applications/vanilla/src/scripts/search/CollapseCommentsSearchMeta.tsx","webpack://vanilla-forum/./library/src/scripts/features/discussions/discussionHooks.tsx","webpack://vanilla-forum/./library/src/scripts/homeWidget/HomeWidgetItem.styles.ts","webpack://vanilla-forum/./library/src/scripts/navigation/navLinksStyles.ts","webpack://vanilla-forum/./library/src/scripts/homeWidget/HomeWidgetContainer.styles.ts","webpack://vanilla-forum/./library/src/scripts/homeWidget/HomeWidgetItem.tsx","webpack://vanilla-forum/./library/src/scripts/homeWidget/HomeWidgetContainer.tsx","webpack://vanilla-forum/./library/src/scripts/navigation/QuickLinks.variables.ts","webpack://vanilla-forum/./library/src/scripts/layout/Box.styles.ts","webpack://vanilla-forum/./library/src/scripts/layout/Box.tsx","webpack://vanilla-forum/./library/src/scripts/navigation/QuickLinks.classes.ts","webpack://vanilla-forum/./library/src/scripts/navigation/QuickLinks.view.tsx","webpack://vanilla-forum/./applications/vanilla/src/scripts/entries/forum.tsx","webpack://vanilla-forum/./applications/vanilla/src/scripts/search/registerCommunitySearchDomain.tsx","webpack://vanilla-forum/./library/src/scripts/homeWidget/HomeWidget.tsx","webpack://vanilla-forum/./library/src/scripts/navigation/QuickLinks.tsx","webpack://vanilla-forum/./applications/vanilla/src/scripts/search/CommunitySearchProvider.ts","webpack://vanilla-forum/./applications/vanilla/src/scripts/legacy/legacyAccessibility.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/cssOut.ts","webpack://vanilla-forum/./build/entries/public-path.ts","webpack://vanilla-forum/./packages/vanilla-react-utils/src/mounting.tsx"],"names":["IMAGE_REGEX","isFileImage","file","test","type","logDebug","name","simplifyFraction","numerator","denominator","gcd","findGCD","a","b","shorthand","hashString","str","split","reduce","prevHash","currVal","charCodeAt","uuidv4","replace","c","r","Math","random","toString","slugify","options","whiteSpaceNormalizeRegexp","allowMultipleDashes","normalize","trim","toLocaleLowerCase","normalizeString","splitStringLoosely","toSplit","splitWith","normalizedName","normalizedSplitTerm","normalizedPieces","RegExp","charactersUsed","map","piece","start","length","substring","matchAtMention","subtext","shouldStartWithSpace","requireQuotesForWhitespace","lines","lastLine","nonExcludedCharacters","excludeWhiteSpace","excluded","regexStr","match","exec","rawMatch","OS","SAFE_PROTOCOL_REGEX","sanitizeUrl","url","capitalizeFirstLetter","charAt","toUpperCase","slice","guessOperatingSystem","userAgent","navigator","vendor","window","opera","ANDROID","MSStream","IOS","UNKNOWN","indexArrayByKey","array","key","object","item","push","notEmpty","value","ensureString","maybeString","TypeError","forceInt","fallback","result","Number","parseInt","isNaN","CommunityPostTypeFilter","props","useSearchForm","form","updateForm","registeredTypes","postTypes","allTypes","flatten","v","values","formTypes","types","label","grid","tight","registeredType","i","noTypesSelected","isChecked","forEach","formType","includes","checked","onChange","e","target","newTypesSet","Set","typeToPush","add","size","undefined","Array","from","delete","newTypes","filter","addPostType","postType","onReady","t","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","Error","code","keys","Object","resolve","module","exports","blockQuoteVariables","useThemeCache","globalVars","globalVariables","colors","variableFactory","makeThemeVars","fg","mainColors","border","color","mixBgAndFg","blockQuoteCSS","vars","cssRule","display","margin","styleUnit","Mixins","padding","all","left","borderLeft","singleBorder","width","boxSizing","verticalAlign","marginTop","marginBottom","cssOut","ColorsUtils","colorOut","currentLocale","localeStore","callbacks","getLocales","setCurrentLocale","localeKey","callback","getCurrentLocale","getJSLocaleKey","loadLocales","locales","LocaleContext","React","createContext","LocaleProvider","useState","setLocales","logWarning","useEffect","Provider","children","useLocaleInfo","useContext","translationStore","internalTranslationDebugValue","translationDebug","newValue","loadTranslations","translations","translate","defaultTranslation","substr","message","TranslationPropertyType","NullContentTranslator","logError","context","shouldDisplay","Translator","_TranslationComponent","ContentTranslationProvider","setTranslator","dataMap","WeakMap","setData","element","initialValue","has","get","set","getData","defaultValue","attributeString","hasAttribute","getAttribute","emojiSupportedCache","isEmojiSupported","canvas","document","createElement","getContext","ctx","fillText","getImageData","data","emojiOptions","className","convertToSafeEmojiCharacters","stringOrNode","twemoji","parse","EscapeListener","root","returnElement","addEventListener","keydownListener","removeEventListener","event","contains","activeElement","preventDefault","focus","delegatedEventListeners","delegateEvent","eventName","filterSelector","scopeSelector","scope","functionKey","querySelector","HTMLElement","eventHash","wrappedCallback","closest","call","removeDelegatedEvent","getDraggedFile","dataTransfer","files","getPastedFile","clipboardData","items","getAsFile","Boolean","FocusWatcher","watchedNode","changeHandler","handleFocusOut","handleFocusIn","handleClick","checkDomTreeHasFocus","triggeringElement","checkDomTreeWasClicked","clickedElement","this","setTimeout","relatedTarget","explicitOriginalTarget","body","isWatchedInBody","isFocusedInBody","isModal","getElementById","hasFocus","escapeHTML","div","appendChild","createTextNode","innerHTML","ensureHtmlElement","selectorOrElement","loadEventCallbacks","rejectionCache","Map","ensureScript","scriptUrl","Promise","reject","existingScript","head","getElementsByTagName","script","src","onerror","error","timeout","onload","clearTimeout","prepareShadowRoot","cloneElement","newElementTag","html","ns","append","startsWith","remove","browserEscapesNoScript","escapedString","child","childNodes","nodeValue","unescapeHTML","newElement","classList","parentNode","insertBefore","attachShadow","mode","TabHandler","documentElement","excludedElements","excludedRoots","exemption","elementToFilter","excludedRoot","tabbableElements","tabbable","reverse","allowLooping","tabbables","createExcludeFilterWithExemption","currentTabIndex","indexOf","targetIndex","filterAllExcluded","smoothscroll","polyfill","flyoutPosition","renderAbove","renderLeft","ignore","centered","top","right","bottom","Hoverable","hasExecuted","once","onHover","hoverTimeout","handleHover","duration","dismissTimeout","onMouseEnter","mouseEnterHandler","onMouseLeave","mouseLeaveHandler","Component","EMPTY_RECT","x","y","height","toJSON","useMeasure","ref","adjustForScrollOffset","watchRef","bounds","setContentRect","refWatch","current","useLayoutEffect","animationFrameId","measure","requestAnimationFrame","rect","getBoundingClientRect","scrollY","JSON","stringify","resizeListener","debounce","ro","ResizeObserver","observe","cancelAnimationFrame","disconnect","cancel","doRectsOverlap","rect1","rect2","isEmptyRect","hasHorizontalOverlap","hasVerticalOverlap","useCollisionDetector","collisionSourceRef","useRef","sourceMeasure","vBoundary1Ref","vBoundary1Measure","vBoundary2Ref","vBoundary2Measure","hBoundary1Ref","hBoundary1Measure","hBoundary2Ref","hBoundary2Measure","hasCollision","useDebugValue","useComponentDebug","debugValue","useDomNodeAttachment","domNodes","node","useEscapeListener","actualRoot","escapeListener","stop","useFocusWatcher","bypass","focusWatcher","useLastValue","useThrowError","setError","deconstructAttributesFromElement","classAsClassName","hrefAsTo","attrs","attributes","attr","hasOwnProperty","internalDebugValue","debug","console","log","logDebugConditionnal","outputLog","warn","fn","wait","opts","isFinite","leadingVal","timer","resolveList","args","arguments","runImmediately","leading","res","apply","defineProperty","_createEmotion","default","flush","hydrate","cx","merge","getRegisteredStyles","injectGlobal","keyframes","css","sheet","cache","createAction","actionCreatorFactory","CategorySuggestionActions","query","apiThunk","bindThunkAction","loadCategories","async","params","expand","api","response","dispatch","internalLoadCategories","ReduxActions","MenuPlacement","INITIAL_STATE","suggestions","status","LoadStatus","PENDING","categoriesReducer","produce","reducerWithInitialState","clone","case","started","nextState","payload","LOADING","done","SUCCESS","failed","ERROR","forumReducer","combineReducers","categories","SelectOne","describedBy","overrideProps","inputClassName","noOptionsMessage","componentOverwrites","useMemo","Menu","selectOverrides","MenuList","Option","ValueContainer","localProps","DropdownIndicator","NoOptionsMessage","LoadingMessage","customStyles","option","menu","base","backgroundColor","boxShadow","control","borderWidth","getTheme","useCallback","theme","borderRadius","spacing","components","styles","useOverrideProps","isFocused","setIsFocused","generatedID","useUniqueID","inputID","errorID","disabled","searchable","forceOpen","hasErrors","errors","classes","selectOneClasses","classesInputBlock","inputBlockClasses","classNames","onClick","selectRef","htmlFor","labelAndDescription","labelText","Paragraph","labelNote","inputWrap","inputId","onInputChange","isClearable","isDisabled","classNamePrefix","aria-label","aria-labelledby","labelID","aria-invalid","aria-describedby","isSearchable","menuIsOpen","placeholder","isLoading","onMenuOpen","onFocus","onBlur","menuPlacement","noteAfterInput","ErrorMessages","defaultProps","CommunityCategoryInput","lookup","multiple","suggestion","parentLabel","crumbLength","breadcrumbs","categoryID","Tokens","lookupOnFocus","showIndicator","text","selectProps","inputValue","withRedux","connect","state","ownProps","forum","categorySuggestionActions","apiv2","first","TagsInput","setText","search","getTags","useTagsActions","tagsByName","useSelector","tags","useTagSearch","tag","tagCode","urlCode","SearchFilterPanelCommunity","classesDateRange","dateRangeClasses","FilterFrame","handleSubmit","InputTextBlock","inputProps","MultiUserInput","authors","DateRange","onStartChange","date","startDate","onEndChange","endDate","end","categoryOptions","CheckboxGroup","Checkbox","includeChildCategories","followedCategories","includeArchivedCategories","tagsOptions","SearchFilterPanelComments","title","CollapseCommentsSearchMetaLoader","headingLevel","HeadingTag","layoutContext","useLayout","searchResultClasses","mediaQueries","content","commentWrap","ScreenReaderContent","iconWrap","main","hasIcon","metas","LoadingRectangle","style","marginLeft","CollapseCommentSearchMeta","icon","discussionID","forceLoader","discussion","actions","useDiscussionActions","existingResult","discussions","discussionsByID","getDiscussionByID","useDiscussion","backUrl","location","host","pathname","queryObj","qs","newQuery","makeSearchUrl","useFallbackBackUrl","counts","count","countComments","labelCode","SmartLink","to","tabIndex","link","ResultMeta","updateUser","insertUser","crumbs","HomeWidgetItemContentType","defaultIcon","require","homeWidgetItemVariables","optionOverrides","itemVars","makeVars","layoutVars","layoutVariables","description","hidden","font","Variables","states","clickable","contentType","TITLE_DESCRIPTION_ICON","borderType","BorderType","NONE","radius","background","viewMore","buttonType","ButtonTypes","TRANSPARENT","verticalAlignment","alignment","defaultIconUrl","defaultImageUrl","iconProps","placement","hasImage","TITLE_DESCRIPTION_IMAGE","hasBackground","TITLE_BACKGROUND","iconPlacementLeft","hasChatBubble","TITLE_CHAT_BUBBLE","overflow","isLightColor","bg","SHADOW","sizing","minWidth","contentSizes","full","gutter","hasBorder","BORDER","contentPadding","vertical","horizontal","iconContainer","hoverBackgroundColor","modifyColorBasedOnLightness","weight","backgroundState","elementaryColors","white","scrim","isForegroundLight","lightness","black","fade","fonts","weights","semiBold","afterContent","hover","callToAction","transform","lineHeight","lineHeights","image","ratio","maxHeight","homeWidgetItemClasses","styleFactory","borderStyling","colorHover","shadowHelper","embed","embedHover","SHADOW_AS_BORDER","buttonStateStyles","itemState","isIconLeft","isIconLeftAndDescriptionHidden","bubbleTriangle","position","linkState","allStates","offsetLightness","half","nestedStyles","percent","flexDirection","backgroundContainer","flex","alignItems","paddingTop","paddingLeft","backgroundScrim","absolutePosition","fullSizeOfParent","textAlign","absoluteContent","flexHelper","middleLeft","middle","paddingBottom","justifyContent","absoluteName","imageAspectRatio","imageContainer","mixPrimaryAndBg","imageContainerWrapper","objectFit","objectPosition","iconLeftPadding","calc","svg","navLinksVariables","fontSize","large","spacer","containerVariables","paddingMobile","linksWithHeadings","paddings","bold","condensed","maxWidth","margins","mobile","fontWeight","normal","viewAllLinkColors","viewAll","medium","columns","desktop","separator","breakPoints","oneColumn","media","navLinksClasses","flexGrow","topTitle","linkColors","viewAllItem","primary","noItemLink","quarter","span","marginRight","extendItemContainer","flexWrap","borderRight","borderTop","borderBottom","separatorIndependant","separatorOdd","homeWidgetContainerVariables","forcedVars","noGutter","outerBackground","innerBackground","contentWidth","displayType","TEXT_PRIMARY","maxColumnCount","subtitle","headerAlignment","contentAlignment","narrow","backgroundImage","navPaddings","mobileNavPaddings","bottomMultiplier","needsSpacing","itemSpacing","horizontalSpacing","horizontalSpacingMobile","gridItem","mobileMediaQuery","oneColumnDown","homeWidgetContainerClasses","contentMixin","verticalContainer","container","borderedContent","itemMixin","flexBasis","gridItemSpacer","gridItemContent","gridItemWidthConstraint","viewAllContainer","letterSpacing","viewAllContent","HomeWidgetItem","isAbsoluteContent","imageUrl","iconUrl","hasMetas","isChatBubble","classesMeta","metasClasses","alt","HomeWidgetAbsoluteContent","HomeWidgetStaticContent","href","Heading","depth","TITLE_DESCRIPTION","TruncatedText","maxCharCount","viewMoreCode","getButtonStyleFromBaseClass","HomeWidgetContainer","isGrid","firstItemRef","firstItemMeasure","Children","gridHasBorder","viewAllButton","LinkAsButton","baseClass","renderAsDepth","Container","fullGutter","quickLinksVariables","box","links","subTitle","listInit","listSeparation","ListSeparation","listSeparationColor","listSeparationWidth","isBorderSep","isLineSep","SEPARATOR","listItem","fgColor","stateSecondary","listItemTitle","boxVariables","boxOptions","needsPadding","boxClasses","getBorderVars","Box","forwardRef","_props","quickLinksClasses","list","whiteSpace","QuickLinksView","variables","domID","visibleLinks","isHidden","QuickLink","path","registerReducer","SearchService","addPluggableDomain","sort","getAllowedFields","transformFormToQuery","recordTypes","collapse","tagName","categoryIDs","categoryOption","getRecordTypes","PanelComponent","getDefaultFormValues","getSortValues","sorts","getGlobalSearchSorts","supportsExtensions","isIsolatedType","ResultComponent","Result","hasSpecificRecord","getSpecificRecord","SpecificRecordPanel","SpecificRecordComponent","CollapseCommentsSearchMeta","showSpecificRecordCrumbs","addSubType","recordType","addComponent","itemOptions","containerOptions","containerClasses","itemData","maxItemCount","extraSpacerItemCount","_","overwrite","linksWithCounts","getThemeVariables","quickLinks","entries","SearchContextProvider","setOptionProvider","limit","dateUpdated","dateInserted","labels","labelCodes","pDebounce","fetchSearch","debounceFetchSearch","queryParamName","NEW_SEARCH_PAGE_ENABLED","formatUrl","click","selector","objects","cssRaw","flattenNests","__webpack_public_path__","assetUrl","hasRendered","portals","PORTAL_MANAGER_ID","PortalContext","Fragment","applySharedPortalContext","renderPortals","PortalManager","portal","ReactDOM","createPortal","component","render","mountReact","bypassPortalManager","unmountBeforeRender","unmountComponentAtNode","setImmediate","cleanupContainer","mountPoint","clearContents","parentElement","firstElementChild","mountReactMultiple","toCleanup","cleanup","mountPortal","containerID","asRealPortal"],"mappings":"i0BAQMA,EAAc,2BAab,SAASC,EAAYC,GACxB,QAAIF,EAAYG,KAAKD,EAAKE,QAI1BC,YAAS,gCAAiCH,EAAKI,OACxC,G,kBChBJ,SAASC,EAAiBC,EAAmBC,GAChD,IAGMC,EAHU,SAAVC,EAAWC,EAAGC,GAChB,OAAOA,EAAIF,EAAQE,EAAGD,EAAIC,GAAKD,EAEvBD,CAAQH,EAAWC,GAK/B,MAAO,CACHD,UAJJA,GAAwBE,EAKpBD,YAJJA,GAA4BC,EAKxBI,UAAWL,EAAc,IAAMD,G,MCNhC,SAASO,EAAWC,GAKvB,OAAOA,EAAIC,MAAM,IAAIC,QAJrB,SAAoBC,EAAUC,GAE1B,OAAQD,GAAY,GAAKA,EAAWC,EAAQC,WAAW,KAEnB,GASrC,SAASC,IACZ,MAAO,uCAAuCC,QAAQ,SAAS,SAAUC,GACrE,IAAMC,EAAqB,GAAhBC,KAAKC,SAAiB,EAEjC,OADa,KAALH,EAAWC,EAAS,EAAJA,EAAW,GAC1BG,SAAS,OAsEnB,SAASC,EACZb,EACAc,GAIA,IAAMC,EAA4BD,GAAWA,EAAQE,oBAAsB,SAAW,UACtF,OAAOhB,EACFiB,UAAU,OACVV,QAAQ,0BAA2B,IACnCW,OACAX,QAAQQ,EAA2B,KACnCI,oBAGF,SAASC,EAAgBpB,GAC5B,OAAOA,EAAIiB,UAAU,OAAOV,QAAQ,mBAAoB,IAWrD,SAASc,EAAmBC,EAAiBC,GAChD,IAAMC,EAAiBJ,EAAgBE,GACjCG,EAAsBL,EAAgBG,GACtCG,EAAmBF,EAAevB,MAAM,IAAI0B,OAAJ,WAAeF,EAAf,KAAuC,MAEjFG,EAAiB,EACrB,OAAOF,EAAiBG,KAAI,SAACC,GACzB,IAAMC,EAAQH,EAEd,OADAA,GAAkBE,EAAME,OACjBV,EAAQW,UAAUF,EAAOH,MAiBjC,SAASM,EACZC,GAGoB,IAFpBC,EAEoB,wDADpBC,IACoB,yDAEdC,EAAQH,EAAQlC,MAAM,MACtBsC,EAAWD,EAAMA,EAAMN,OAAS,GAUtC,SAASQ,EAAsBC,GAC3B,IAAIC,EACA,2CAUJ,OALID,IACAC,GAAY,OAGhBA,GAAY,IAIhB,IAAIC,EACA,OAIAH,GAAsB,GACtB,UAIAA,EAAsBH,GACtB,kBAKAD,IACAO,EAAW,YAAcA,GAE7B,IACMC,EADQ,IAAIjB,OAAOgB,EAAU,MACfE,KAAKN,GACzB,OAAIK,EACO,CACHE,SAAUF,EAAM,GAChBA,MAAOA,EAAM,IAAMA,EAAM,IAK1B,KAGX,ICvNYG,EDuNNC,EAAsB,gDAcrB,SAASC,EAAYC,GACxB,OAAIA,EAAIN,MAAMI,GACHE,EAEA,UAAYA,EASpB,SAASC,EAAsBnD,GAClC,OAAOA,EAAIoD,OAAO,GAAGC,cAAgBrD,EAAIsD,MAAM,GCvO5C,SAASC,IACZ,IAAMC,EAAYC,UAAUD,WAAaC,UAAUC,QAAWC,OAAeC,MAE7E,MAAI,WAAWzE,KAAKqE,GACTT,EAAGc,QAIV,mBAAmB1E,KAAKqE,KAAeG,OAAOG,SACvCf,EAAGgB,IAGPhB,EAAGiB,QCEP,SAASC,EACZC,EACAC,GAIA,IAAMC,EAAS,GADjB,uBAEE,YAAmBF,EAAnB,+CAA0B,KAAfG,EAAe,QAClBF,KAAOE,IACDA,EAAKF,KAAQC,IACfA,EAAOC,EAAKF,IAAQ,IAExBC,EAAOC,EAAKF,IAAMG,KAAKD,KAPjC,kFAUE,OAAOD,EAGJ,SAASG,EAAiBC,GAC7B,OAAOA,QAGJ,SAASC,EAAaC,GACzB,GAA2B,iBAAhBA,EAA0B,MAAM,IAAIC,UAAU,4CACzD,OAAOD,EAGJ,SAASE,EAASJ,EAAsBK,GAA0B,MACjEC,EAASC,OAAOC,SAAP,UAAgBR,SAAhB,QAAyB,GAAI,IAC1C,OAAOO,OAAOE,MAAMH,GAAUD,EAAWC,G,SDvDjC/B,K,UAAAA,E,kBAAAA,E,mBAAAA,M,uCEPZ,0GA4BO,SAASmC,EAAwBC,GAAe,MACtBC,cAArBC,EAD2C,EAC3CA,KAAMC,EADqC,EACrCA,WACRC,EAAkBL,EAAwBM,UAC1CC,EAAWC,IAAQH,EAAgB1D,KAAI,SAAC8D,GAAD,OAAOA,EAAEC,WAEtD,GAAIL,EAAgBvD,QAAU,EAC1B,OAAO,KAGX,IAAM6D,EAAYR,EAAKS,MAEvB,OACI,kBAAC,IAAD,CAAeC,MAAO,iBAAkBC,MAAM,EAAMC,OAAO,GACtDV,EAAgB1D,KAAI,SAACqE,EAAgBC,GAClC,IAAMC,GAAmBP,GAAkC,IAArBA,EAAU7D,OAC5CqE,GAAY,EAYhB,OAVID,EACAC,GAAY,EAEZR,WAAWS,SAAQ,SAACC,GACZL,EAAeN,OAAOY,SAASD,KAC/BF,GAAY,MAMpB,kBAAC,IAAD,CACIN,MAAOG,EAAeH,MACtB5B,IAAKgC,EACLM,QAASJ,EACTK,SAAU,SAACC,GAGP,GAFmBA,EAAEC,OAAOH,QAEZ,OACNI,EAAc,IAAIC,IAAJ,UAAQjB,SAAR,QAAqB,IACzCK,EAAeN,OAAOU,SAAQ,SAACS,GAC3BF,EAAYG,IAAID,MAGhBF,EAAYI,OAASxB,EAASzD,OAC9BsD,EAAW,CAAEQ,WAAOoB,IAEpB5B,EAAW,CAAEQ,MAAOqB,MAAMC,KAAKP,SAEhC,OACGA,EAAc,IAAIC,IAAJ,UAAQzB,EAAKS,aAAb,QAAsB,IAK1C,GAJAI,EAAeN,OAAOU,SAAQ,SAACS,GAC3BF,EAAYQ,OAAON,MAGE,IAArBF,EAAYI,KAAY,CAExB,IAAMK,EAAW7B,EAAS8B,QAAO,SAAC5B,GAAD,OAAQO,EAAeN,OAAOY,SAASb,MACxEL,EAAW,CAAEQ,MAAOwB,SAEpBhC,EAAW,CAAEQ,MAAOqB,MAAMC,KAAKP,aAgBnE3B,EAAwBM,UAAY,GAEpCN,EAAwBsC,YAAc,SAACC,GACnCvC,EAAwBM,UAAUlB,KAAKmD,IAI3CC,aAAQ,WACJxC,EAAwBsC,YAAY,CAChCzB,MAAO4B,YAAE,eACT/B,OAAQ,CAAC,aAAc,iB,oBC/G/B,IAAI/D,EAAM,CACT,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,KAIf,SAAS+F,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEpG,EAAKgG,GAAM,CACpC,IAAIlB,EAAI,IAAIuB,MAAM,uBAAyBL,EAAM,KAEjD,MADAlB,EAAEwB,KAAO,mBACHxB,EAEP,OAAO9E,EAAIgG,GAEZD,EAAeQ,KAAO,WACrB,OAAOC,OAAOD,KAAKvG,IAEpB+F,EAAeU,QAAUP,EACzBQ,EAAOC,QAAUZ,EACjBA,EAAeE,GAAK,K,6uBCjBb,IAAMW,EAAsBC,aAAc,WAC7C,IAAMC,EAAaC,cASnB,MAAO,CACHC,OATkBC,YAAgB,aACvBC,CAAc,SAAU,CACnCC,GAAIL,EAAWM,WAAWD,GAC1BE,OAAQ,CACJC,MAAOR,EAAWS,WAAW,YAS5BC,EAAgBX,aAAc,WACvC,IAAMC,EAAaC,cACbU,EAAOb,IACbc,YAAQ,cAAD,GACHC,QAAS,QACTC,OAAQC,YAAU,IACfC,IAAOC,QAAQ,CACdC,IAAK,EACLC,KAAM,KALP,CAOHC,WAAYC,YAAa,CACrBb,MAAOG,EAAKT,OAAOK,OAAOC,MAC1Bc,MAAO,IAEXC,UAAW,aACXC,cAAe,YAEnBZ,YAAQ,sBAAD,KACA,CACC,oBAAqB,CACjBa,UAAWV,YAAU,IAEzB,mBAAoB,CAChBW,aAAcX,YAAU,OAIpCY,YAAO,qBAAsB,CACzBnB,MAAOoB,IAAYC,SAAS7B,EAAWM,WAAWD,U,wZC/CtDyB,EAAgB,KAChBC,EAAyB,GACzBC,EAA+B,GAK5B,SAASC,IACZ,OAAOF,EAcJ,SAASG,EAAiBC,GAC7BL,EAAgBK,EAChBH,EAAUrE,SAAQ,SAAAyE,GAAQ,OAAIA,OAM3B,SAASC,IACZ,OAAOP,EASJ,SAASQ,IACZ,OAAOR,EAAclK,QAAQ,IAAK,KAM/B,SAAS2K,EAAYC,GACxBT,EAAc,GAAH,mBAAOA,GAAP,YAAuBS,IAClCR,EAAUrE,SAAQ,SAAAyE,GAAQ,OAAIA,O,YCtD5BK,EAAgBC,IAAMC,cAGzB,CACCH,QAAS,GACTV,cAAe,OAGZ,SAASc,EAAepG,GAAuC,MACpCqG,mBAASZ,KAD2B,mBAC3DO,EAD2D,KAClDM,EADkD,OAExBD,mBAASR,KAFe,mBAE3DP,EAF2D,KAE5CI,EAF4C,KAkBlE,OAdKJ,GACDiB,YAAW,2CAGfC,qBAAU,WDIP,IAAwBZ,ECHvBU,EAAWb,KACXC,EAAiBG,KDEMD,ECAR,WACXU,EAAWb,KACXC,EAAiBG,MDDzBL,EAAUrG,KAAKyG,KCGZ,CAACU,EAAYZ,IAGZ,kBAACO,EAAcQ,SAAf,CACIpH,MAAO,CACH2G,UACAV,kBAGHtF,EAAM0G,UAKZ,SAASC,IACZ,OAAOC,qBAAWX,G,yOCrCtB,IAAIY,EAAyC,KAEzCC,GAAgC,EAQ7B,SAASC,EAAiBC,GAK7B,YAJiBjF,IAAbiF,IACAF,EAAgCE,GAG7BF,EAMJ,SAASG,EAAiBC,GAC7BL,E,yVAAmB,CAAH,GAAQK,GAkBrB,SAASC,EAAUtM,EAAauM,GAEnC,GAAyB,MAArBvM,EAAIwM,OAAO,EAAG,GACd,OAAOxM,EAAIwM,OAAO,GAGtB,IAAM3H,OAAkCqC,IAAvBqF,EAAmCA,EAAqBvM,EAEzE,IAAKgM,EAAkB,CAEnB,IAAMS,EAAU,mCAAH,OAAsCzM,EAAtC,mDAWb,OARQ0L,YAAWe,GAQZ5H,EAGX,YAA8BqC,IAA1B8E,EAAiBhM,GACVgM,EAAiBhM,GAGxBkM,IACO,SAAWrH,EAAW,SAEtBA,EAOR,ICrEK6H,EDqEC/E,EAAI2E,G,SCrELI,K,YAAAA,E,mBAAAA,M,KAoBL,IAAMC,EAA2D,SAACxH,GAErE,OADAyH,YAAS,2FACF,MC5BLC,EAAUxB,IAAMC,cAAkC,CACpDwB,eAAe,EACfC,WAAYJ,IAGZK,EAA6E,KAKpEC,EAA6B,SAAC9H,GAAyC,IACxEgG,EAAYW,IAAZX,QAER,OACI,kBAAC0B,EAAQjB,SAAT,CACIpH,MAAO,CACHsI,cAAyC,OAA1BE,GAAkC7B,EAAQnJ,OAAS,EAClE+K,WAAsC,OAA1BC,EAAiCA,EAAwBL,IAGxExH,EAAM0G,WAKnBoB,EAA2BC,cAAgB,SAACH,GACxCC,EAAwBD,I,0jBCF5B,IAAMI,EAAU,IAAIC,QASb,SAASC,EAAQC,EAAkBnJ,EAAaK,GACnD,IAAM+I,EAAeJ,EAAQK,IAAIF,GAAWH,EAAQM,IAAIH,GAAW,GACnEC,EAAapJ,GAAOK,EAEpB2I,EAAQO,IAAIJ,EAASC,GAUlB,SAASI,EAAQL,EAAkBnJ,EAAayJ,GACnD,GAAIT,EAAQK,IAAIF,IAAYH,EAAQM,IAAIH,GAASnJ,GAC7C,OAAOgJ,EAAQM,IAAIH,GAASnJ,GAGhC,IAAM0J,EAAkB,QAAH,OAAW1J,GAEhC,OAAImJ,EAAQQ,aAAaD,GACdP,EAAQS,aAAaF,GAGzBD,E,qBCjEPI,EAAsC,KAKnC,SAASC,IACZ,GAA4B,OAAxBD,EACA,OAAOA,EAKP,IAAME,EAASC,SAASC,cAAc,UACtC,GAAIF,EAAOG,YAAcH,EAAOG,WAAW,MAAO,CAC9C,IAAMC,EAAMH,SAASC,cAAc,UAAUC,WAAW,MACpDC,GACAA,EAAIC,SAAS,MAAO,EAAG,GACvBP,EAAsBM,EAAIE,aAAa,EAAG,EAAG,EAAG,GAAGC,KAAK,GAAK,GAE7DT,GAAsB,OAG1BA,GAAsB,EAM9B,OAAOA,EAGX,IAAMU,EAAe,CACjBC,UAAW,gBACX1H,KAAM,SAQH,SAAS2H,EAA6BC,GACzC,OAAIZ,IACOY,EAEJC,IAAQC,MAAMF,EAAcH,G,mBC5C1BM,EAMT,WACYC,EACAC,EACAnE,GACV,oCAHUkE,OAGV,KAFUC,gBAEV,KADUnE,WACV,0BAKa,WACX,EAAKkE,KAAKE,iBAAiB,UAAW,EAAKC,oBAN7C,yBAYY,WACV,EAAKH,KAAKI,oBAAoB,UAAW,EAAKD,oBAbhD,oCAsBwB,SAACE,GACL,WAAdA,EAAMnL,KACF,EAAK8K,KAAKM,SAASpB,SAASqB,iBAC5BF,EAAMG,iBACN,EAAKP,eAAiB,EAAKA,cAAcQ,QACzC,EAAK3E,UAAY,EAAKA,SAASuE,Q,QCtCzCK,EAA0B,GAYzB,SAASC,EACZC,EACAC,EACA/E,EACAgF,GAEA,IAEIC,EAFAC,EAAcJ,EAAYC,EAAiB/E,EAASnK,WAIxD,GAA6B,iBAAlBmP,EAA4B,CAGnC,KAFAC,EAAQ7B,SAAS+B,cAAcH,IAG3B,MAAM,IAAI7H,MAAJ,oEAAuE6H,IAE7EE,GAAeF,OAGnBC,EADOD,aAAyBI,YACxBJ,EAEA5B,SAGZ,IAAMiC,EAAYrQ,YAAWkQ,GAAarP,WAE1C,IAAKyH,OAAOD,KAAKuH,GAAyBnJ,SAAS4J,GAAY,CAC3D,IAAMC,EAAkB,SAAAf,GAEpB,IAAM1M,EAAQkN,EAAiBR,EAAM1I,OAAO0J,QAAQR,GAAkBR,EAAM1I,OAE5E,GAAIhE,EAEA,OAAOmI,EAASwF,KAAK3N,EAAO0M,EAAO1M,IAI3CoN,EAAMb,iBAAiBU,EAAWQ,GAClCV,EAAwBS,GAAa,CACjCJ,QACAH,YACAQ,mBAIR,OAAOD,EAQJ,SAASI,EAAqBJ,GACjC,GAAIT,EAAwBS,GAAY,OACUT,EAAwBS,GAA9DJ,EAD4B,EAC5BA,MAAOH,EADqB,EACrBA,UAAWQ,EADU,EACVA,gBAC1BL,EAAMX,oBAAoBQ,EAAWQ,UAC9BV,EAAwBS,IAkBhC,SAASK,EAAenB,GAC3B,GAAIA,EAAMoB,cAAgBpB,EAAMoB,aAAaC,OAASrB,EAAMoB,aAAaC,MAAM3O,OAG3E,OAFAsN,EAAMG,iBAECH,EAAMoB,aAAaC,MAS3B,SAASC,EAActB,GAC1B,GAAIA,EAAMuB,eAAiBvB,EAAMuB,cAAcC,OAASxB,EAAMuB,cAAcC,MAAM9O,OAAQ,CACtF,IAAM2O,EAAQxJ,MAAMC,KAAKkI,EAAMuB,cAAcC,OACxCjP,KAAI,SAACwC,GAAD,OAAgBA,EAAK0M,UAAY1M,EAAK0M,YAAc,QACxDxJ,OAAOyJ,SAEZ,GAAIL,EAAM3O,OAAS,EAIf,OAHAsN,EAAMG,iBAEWkB,EAAM,I,YCvGtBM,EAAb,WAKI,WAA2BC,EAA8BC,GAA4C,oCAA1ED,cAA0E,KAA5CC,gBAA4C,0BAKtF,WACX,EAAKD,YAAY/B,iBAAiB,WAAY,EAAKiC,gBAAgB,GACnE,EAAKF,YAAY/B,iBAAiB,UAAW,EAAKkC,eAAe,GACjElD,SAASgB,iBAAiB,QAAS,EAAKmC,gBARyD,yBAcvF,WACV,EAAKJ,YAAY7B,oBAAoB,WAAY,EAAK+B,gBAAgB,GACtE,EAAKF,YAAY7B,oBAAoB,UAAW,EAAKgC,eAAe,GACpElD,SAASkB,oBAAoB,QAAS,EAAKiC,gBAjBsD,mCAuB5E,SAAChC,GACtB,EAAKiC,qBAAqBjC,EAAO,EAAK6B,kBAxB2D,kCA8B7E,SAAC7B,GACrB,EAAKiC,qBAAqBjC,EAAO,EAAK6B,kBA/B2D,gCAqC/E,SAAC7B,GACnB,IAAMkC,EAAoBlC,EAAM1I,OACb,EAAK6K,uBAAuBD,IAE3C,EAAKL,eAAc,MA9C/B,mEAqDmCO,GAC3B,OACIC,KAAKT,aACLQ,IACCC,KAAKT,YAAY3B,SAASmC,IAA8BC,KAAKT,cAAgBQ,KAzD1F,2CAmEiCpC,EAAmBvE,GAAuC,WACnF6G,YAAW,WASP,IARA,IAOIpC,EAAgB,KACpB,MARwB,CAEpBrB,SAASqB,cACTF,EAAMuC,cACLvC,EAAcwC,wBAInB,eAAsC,CAAjC,IAAMlL,EAAM,KACb,GAAIA,GAAUA,IAAWuH,SAAS4D,KAAM,CACpCvC,EAAgB5I,EAChB,OAIR,GAAsB,OAAlB4I,EAAwB,OAClBwC,EAAkB7D,SAAS4D,KAAKxC,SAAS,EAAK2B,aAC9Ce,EAAkB9D,SAAS4D,KAAKxC,SAASC,GACzC0C,EAAUlB,QAAO,UAAC7C,SAASgE,eAAe,iBAAzB,aAAC,EAAmC5C,SAASC,IAC9D4C,EAAWpB,QACb,EAAKE,aACD1B,IACCA,IAAkB,EAAK0B,aAAe,EAAKA,YAAY3B,SAASC,KAOrEwC,GAAmBC,GACnBlH,EAASqH,GAAYF,MAG9B,OAtGX,KCDO,SAASG,EAAWrS,GACvB,IAAMsS,EAAMnE,SAASC,cAAc,OAEnC,OADAkE,EAAIC,YAAYpE,SAASqE,eAAexS,IACjCsS,EAAIG,UAsCR,SAASC,EAAkBC,GAK9B,GAJiC,iBAAtBA,IACPA,EAAoBxE,SAAS+B,cAAcyC,MAGzCA,aAA6BxC,aAC/B,MAAM,IAAIjI,MAAJ,6CAAgDyK,EAAhD,MAGV,OAAOA,ECxDX,IAAMC,EAA4D,IAAIxF,QAChEyF,EAAqC,IAAIC,IAKxC,SAASC,EAAaC,GACzB,OAAO,IAAIC,SAAQ,SAAC3K,EAAS4K,GACzB,IAAMC,EAA2ChF,SAAS+B,cAAT,sBAAsC8C,EAAtC,OAIjD,GAHIH,EAAerF,IAAIwF,IACnBE,EAAOL,EAAepF,IAAIuF,IAE1BG,GAAkBP,EAAmBpF,IAAI2F,GAAiB,CAE1D,IAAMxI,EAAYiI,EAAmBnF,IAAI0F,GACzCxI,GAAaA,EAAUrG,KAAKgE,OACzB,CAEH,IAAM8K,EAAOjF,SAASkF,qBAAqB,QAAQ,GAC7CC,EAASnF,SAASC,cAAc,UACtCkF,EAAOlU,KAAO,kBACdkU,EAAOC,IAAMP,EACbM,EAAOE,QAAU,SAAClE,GACd,IAAMmE,EAAQ,IAAIvL,MAAM,0CACxB2K,EAAenF,IAAIsF,EAAWS,GAC9BP,EAAOO,IAGX,IAAMC,EAAU9B,YAAW,WACvB,IAAM6B,EAAQ,IAAIvL,MAAJ,gCAAmC8K,EAAnC,oBACdH,EAAenF,IAAIsF,EAAWS,GAC9BP,EAAOO,KACR,KAEHb,EAAmBlF,IAAI4F,EAAQ,CAAChL,IAEhCgL,EAAOK,OAAS,SAAArE,GACZsE,aAAaF,GACb,IAAM/I,EAAYiI,EAAmBnF,IAAI6F,GACzC3I,GAAaA,EAAUrE,SAAQ,SAAAyE,GAAQ,OAAIA,EAASuE,MACpDsD,EAAmBvL,OAAOiM,IAG9BF,EAAKb,YAAYe,OClCtB,SAASO,EACZvG,GAGW,IAFXwG,EAEW,wDADXC,EACW,uDADK,MAEZC,EAAO1G,EAAQmF,UAMnB,IFUG,WACH,IAAMwB,EAAK9F,SAASC,cAAc,YAClC6F,EAAGxB,UAAY,gBACftE,SAAS4D,KAAKmC,OAAOD,GACrB,IAAMnP,EAASmP,EAAGxB,UAAU0B,WAAW,QAEvC,OADAF,EAAGG,SACItP,EEpBHuP,IAA4BL,EAAK9S,OAAOiT,WAAW,WACnDH,EFGD,SAAsBM,GACzB,IAAMhC,EAAMnE,SAASC,cAAc,OACnCkE,EAAIG,UAAY6B,EAChB,IAAMC,EAAQjC,EAAIkC,WAAW,GAC7B,OAAOD,GAASA,EAAME,UAAYF,EAAME,UAAY,GEPzCC,CAAaV,IAGpBF,EAAc,CACd,IAAMa,EAAaxG,SAASC,cAAc2F,GAG1CY,EAAWC,UAAUpQ,MAAQ8I,EAAQsH,UAAUpQ,MAC/CmQ,EAAW7M,GAAKwF,EAAQxF,GAGxBwF,EAAQuH,WAAYC,aAAaH,EAAYrH,GAC7CA,EAAQ8G,SACR9G,EAAUqH,OAIVrH,EAAQmF,UAAY,GAKxB,OAFqBnF,EAAQyH,aAAa,CAAEC,KAAM,SACrCvC,UAAYuB,EAClB1G,E,qBC/BE2H,EAAb,WAqBI,aAIE,WAHEhG,EAGF,uDAHkBd,SAAS+G,gBACjBC,EAEV,uDAFwC,GAC9BC,EACV,uDADqC,GACrC,yBAFUD,mBAEV,KADUC,gBACV,iGAsFyC,SAACC,GACxC,OAAO,SAACC,GAGJ,KAFuCD,IAAcC,GAAmBA,EAAgB/F,SAAS8F,IAE5D,CACjC,GAAI,EAAKF,iBAAiB3O,SAAS8O,GAC/B,OAAO,EAFsB,2BAIjC,YAA2B,EAAKF,cAAhC,+CAA+C,KAApCG,EAAoC,QAC3C,GAAIA,IAAiBD,GAAmBC,EAAahG,SAAS+F,GAC1D,OAAO,GANkB,mFAWrC,OAAO,MArGb,sCA8G0B,SAACA,GACzB,GAAI,EAAKH,iBAAiB3O,SAAS8O,GAC/B,OAAO,EAFoD,2BAI/D,YAA2B,EAAKF,cAAhC,+CAA+C,KAApCG,EAAoC,QAC3C,GAAIA,IAAiBD,GAAmBC,EAAahG,SAAS+F,GAC1D,OAAO,GANgD,kFAU/D,OAAO,KAvHP3D,KAAK6D,iBAAmBC,IAASxG,GA1BzC,4DAM6B3B,GAErB,OADiBmI,IAASnI,EAAQuH,YAClBrO,SAAS8G,OARjC,+CA2C0B,IAHlBlG,EAGkB,uDAHK+G,SAASqB,cAChCkG,EAEkB,wDADlBC,IACkB,yDAClB,KAAMvO,aAAgB+I,aAElB,OADAvD,YAAS,oEAAqExF,GACvE,KAEX,IAAMwO,EAAYjE,KAAK6D,iBAAiBjO,OAAOoK,KAAKkE,iCAAiCzO,IAC/E0O,EAAkBF,EAAUG,QAAQ3O,GAE1C,GAAI0O,EAAkB,EAClB,OAAO,KAGX,IAAIE,EAAcN,EAAUI,EAAkB,EAAIA,EAAkB,EAWpE,OATIH,IAEIK,EAAc,EACdA,EAAcJ,EAAU5T,OAAS,EAC1BgU,GAAeJ,EAAU5T,SAChCgU,EAAc,IAIfJ,EAAUI,IAAgB,OAlEzC,+BAwEiE,IAA/C5O,EAA+C,uDAAxB+G,SAASqB,cAC1C,OAAMpI,aAAgB+I,YAIfwB,KAAK6D,iBAAiBjO,OAAOoK,KAAKkE,iCAAiCzO,KAHtEwF,YAAS,oEAAqExF,GACvE,QA3EnB,mCAoFQ,IAAMwO,EAAYjE,KAAK6D,iBAAiBjO,OAAOoK,KAAKsE,mBACpD,OAAIL,EAAU5T,OAAS,EACZ4T,EAAU,GAEV,OAxFnB,gCA+FQ,IAAMA,EAAYjE,KAAK6D,iBAAiBjO,OAAOoK,KAAKsE,mBACpD,OAAIL,EAAU5T,OAAS,EACZ4T,EAAUA,EAAU5T,OAAS,GAE7B,SAnGnB,KCLAkU,IAAaC,Y,iCCGN,SAASC,EACZC,EACAC,GAGG,IAFHC,EAEG,wDADHC,EACG,wDACH,IAAKD,EAKD,MAAO,CAAEE,IAJIJ,OAAuBnP,EAAT,OAIbwP,MADAJ,IAAeE,EAAW,SAAMtP,EACzByP,OAHNN,EAAc,YAASnP,EAGT4C,KAFfwM,GAAeE,EAAiBA,EAAW,WAAQtP,EAAzB,KArBhD,mC,mlBCkCa0P,EAAb,sSAuB0B,GAvB1B,0CA4B0B,SAACtH,GACf,EAAKuH,aAAe,EAAK1R,MAAM2R,OAInC,EAAKD,aAAc,EACf,EAAK1R,MAAM4R,SACX,EAAK5R,MAAM4R,QAAQzH,OAnC/B,gDA0CgC,SAACA,GACzB,EAAK0H,aAAepF,YAAW,WAC3B,EAAKqF,YAAY3H,KAClB,EAAKnK,MAAM+R,aA7CtB,gDAmDgC,SAAC5H,GACzB,EAAK6H,oBApDb,wEASQ,OAAOxF,KAAKxM,MAAM0G,SAAS,CACvBuL,aAAczF,KAAK0F,kBACnBC,aAAc3F,KAAK4F,sBAX/B,6CAmBQ5F,KAAKwF,mBAnBb,uCA2DQxF,KAAKkF,aAAc,EACflF,KAAKqF,cACLpD,aAAajC,KAAKqF,kBA7D9B,GAA+B3L,IAAMmM,W,YAAxBZ,E,eACoB,CACzBE,MAAM,I,yRCzBd,IAAMW,EAAsB,CACxBC,EAAG,EACHC,EAAG,EACH1N,MAAO,EACP2N,OAAQ,EACRnB,IAAK,EACLC,MAAO,EACPC,OAAQ,EACR7M,KAAM,EACN+N,OAAQ,iBAAM,KAWX,SAASC,EACZC,GAGF,IAFEC,EAEF,wDADEC,EACF,0DACmCzM,mBAAkBiM,GADrD,mBACSS,EADT,KACiBC,EADjB,KAEQC,EAAWH,EAAWF,EAAIM,QAAUN,EA8D1C,OA7DAO,2BAAgB,WACZ,IAAIC,EAAkC,KAEhCC,EAAU,WACZD,EAAmB5U,OAAO8U,uBAAsB,WAC5C,GAAKV,EAAIM,QAAT,CAIA,IAAIK,EAAOX,EAAIM,QAAQM,wBAEnBX,IACAU,E,yVAAO,IACAA,EADH,CAEAf,EAAGe,EAAKf,EAAIhU,OAAOiV,QACnBnC,IAAKiC,EAAKjC,IAAM9S,OAAOiV,QACvBjC,OAAQ+B,EAAK/B,OAAShT,OAAOiV,QAC7B3O,MAAOyO,EAAKzO,MACZ2N,OAAQc,EAAKd,OACblB,MAAOgC,EAAKhC,MACZ5M,KAAM4O,EAAK5O,QAInB4O,EAAKb,OAAS,WACV,OAAOgB,KAAKC,UAAU,CAClBnB,EAAGe,EAAKf,EACRlB,IAAKiC,EAAKjC,IACVE,OAAQ+B,EAAK/B,OACb1M,MAAOyO,EAAKzO,MACZ2N,OAAQc,EAAKd,OACblB,MAAOgC,EAAKhC,MACZ5M,KAAM4O,EAAK5O,QAInBqO,EAAeO,QA9BXP,EAAeV,OAkCrBsB,EAAiBC,KAAS,WAC5BR,MACD,KACH7U,OAAOwL,iBAAiB,SAAU4J,GAElC,IAAME,EAAK,IAAIC,IAAeV,GAO9B,OANIT,EAAIM,QACJY,EAAGE,QAAQpB,EAAIM,SAEfF,EAAeV,GAGZ,WACH9T,OAAOyV,qBAAqBb,GAC5BU,EAAGI,aACHN,EAAeO,SACf3V,OAAO0L,oBAAoB,SAAU0J,GACrCZ,EAAeV,MAEpB,CAACO,EAAuBI,EAAUL,IAE9BG,ECtFX,SAASqB,EAAeC,EAAwBC,GAE5C,GAAIC,EAAYF,IAAUE,EAAYD,GAClC,OAAO,EAGX,IAAIE,GAAuB,EAGvBH,EAAM1P,MAAQ2P,EAAM3P,MAAQ0P,EAAM9C,OAAS+C,EAAM3P,OACjD6P,GAAuB,GAIvBF,EAAM3P,MAAQ0P,EAAM1P,MAAQ2P,EAAM/C,OAAS8C,EAAM1P,OACjD6P,GAAuB,GAIvBH,EAAM1P,MAAQ2P,EAAM3P,MAAQ0P,EAAM9C,OAAS+C,EAAM/C,QACjDiD,GAAuB,GAIvBF,EAAM3P,MAAQ0P,EAAM1P,MAAQ2P,EAAM/C,OAAS8C,EAAM9C,QACjDiD,GAAuB,GAG3B,IAAIC,GAAqB,EAuBzB,OApBIJ,EAAM/C,KAAOgD,EAAMhD,KAAO+C,EAAM7C,QAAU8C,EAAMhD,MAChDmD,GAAqB,GAIrBH,EAAMhD,KAAO+C,EAAM/C,KAAOgD,EAAM9C,QAAU6C,EAAM/C,MAChDmD,GAAqB,GAIrBJ,EAAM/C,KAAOgD,EAAMhD,KAAO+C,EAAM7C,QAAU8C,EAAM9C,SAChDiD,GAAqB,GAIrBH,EAAMhD,KAAO+C,EAAM/C,KAAOgD,EAAM9C,QAAU6C,EAAM7C,SAChDiD,GAAqB,GAIlBA,GAAsBD,EAGjC,SAASD,EAAYhB,GACjB,OAAuB,IAAhBA,EAAKd,QAA+B,IAAfc,EAAKzO,MAG9B,SAAS4P,IACZ,IAAMC,EAAqBC,iBAA8B,MACrDC,EAAgBlC,EAAWgC,GAEzBG,EAAgBF,iBAA8B,MAC9CG,EAAoBpC,EAAWmC,GAE/BE,EAAgBJ,iBAA8B,MAC9CK,EAAoBtC,EAAWqC,GAE/BE,EAAgBN,iBAA8B,MAC9CO,EAAoBxC,EAAWuC,GAE/BE,EAAgBR,iBAA8B,MAC9CS,EAAoB1C,EAAWyC,GAE/BE,EACFlB,EAAeS,EAAeE,IAC9BX,EAAeS,EAAeI,IAC9Bb,EAAeS,EAAeM,IAC9Bf,EAAeS,EAAeQ,GAIlC,OAFAE,wBAAc,CAAED,iBAET,CAAEX,qBAAoBW,eAAcR,gBAAeE,gBAAeE,gBAAeE,iBClFrF,SAASI,EAAkBC,GAC9B,OAAOF,wBAAcE,G,YCNlB,SAASC,EAAqBC,GACjC,IAAM/C,EAAMgC,mBAUZ,OARAzB,2BAAgB,WACRwC,GAAY/C,EAAIM,SAChByC,EAASxU,SAAQ,SAACyU,GAAS,MACvB,UAAAhD,EAAIM,eAAJ,SAAa9F,YAAYwI,QAGlC,CAACD,IAEG/C,E,YCLJ,SAASiD,EAAT,GAQJ,IAPC/L,EAOD,EAPCA,KACAC,EAMD,EANCA,cACAnE,EAKD,EALCA,SAMAY,qBAAU,WACN,GAAa,OAATsD,GAAmC,OAAlBC,EAArB,CAIA,IAAM+L,EAAahM,GAAQd,SAAS+G,gBAC9BgG,EAAiB,IAAIlM,IAAeiM,EAAY/L,EAAenE,GAErE,OADAmQ,EAAenZ,QACRmZ,EAAeC,QACvB,CAAClM,EAAMC,EAAenE,ICrBtB,SAASqQ,EACZrD,EACA5G,EACAkK,GAEA/C,2BAAgB,WACZ,IAAI+C,GAGgB,OAAhBtD,EAAIM,QAAkB,CACtB,IAAMiD,EAAe,IAAIrK,IAAa8G,EAAIM,QAASlH,GAEnD,OADAmK,EAAavZ,QACNuZ,EAAaH,QAEzB,CAACpD,EAAK5G,EAAekK,ICdrB,SAASE,EAAgB/W,GAC5B,IAAMuT,EAAMgC,mBAEZ,OADApO,qBAAU,WAAYoM,EAAIM,QAAU7T,IAAQ,CAACA,IACtCuT,EAAIM,QCDR,SAASmD,IAAsC,MACxBhQ,mBAAuB,MADC,mBAC3CiI,EAD2C,KACpCgI,EADoC,KAElD,GAAIhI,EACA,MAAMA,EAGV,OAAOgI,ECJJ,SAASC,EACZpO,EACAxM,GAImB,MACmCA,GAAW,GAD9C,IACX6a,wBADW,aACcC,gBADd,SAEbC,EAAQ,GAiBd,OAhBAxT,OAAOzC,OAAO0H,EAAQwO,YAAYxV,SAAQ,SAAAyV,GACtCF,EAAME,EAAKzc,MAAQyc,EAAKvX,SAIxBmX,GAAoBE,EAAMG,eAAe,WACzCH,EAAK,UAAgBA,EAAK,aACnBA,EAAK,OAIZD,GAAYC,EAAMG,eAAe,UACjCH,EAAK,GAASA,EAAK,YACZA,EAAK,MAGTA,I,gCCxCX,0KAOA,IAAII,GAAqB,EAQlB,SAASC,EAAM/P,GAKlB,YAJiBjF,IAAbiF,IACA8P,EAAqB9P,GAGlB8P,EASJ,SAAS5c,IACY,MAApB4c,IAEA,EAAAE,SAAQC,IAAR,mBAWD,SAASC,IAAyD,IAApCC,EAAoC,wDACrE,GAAIL,GAAsBK,EAAW,8BADkB9X,EAClB,iCADkBA,EAClB,mBAEjC,EAAA2X,SAAQC,IAAR,QAAe5X,IAUhB,SAASoI,IAA0B,OAKtC,EAAAuP,SAAQ1I,MAAR,mBASG,SAAS/H,IAA4B,MACnCuQ,IAIL,EAAAE,SAAQI,KAAR,qB,iCC1EJhU,EAAOC,QAAU,SAACgU,EAAIC,EAAMC,GAC3B,IAAK3X,OAAO4X,SAASF,GACpB,MAAM,IAAI9X,UAAU,yCAKrB,IAAIiY,EACAC,EAHJH,EAAOA,GAAQ,GAIf,IAAII,EAAc,GAElB,OAAO,WACN,IAAMxO,EAAMqD,KACNoL,EAAOC,UAEb,OAAO,IAAI/J,SAAQ,SAAA3K,GAClB,IAAM2U,EAAiBP,EAAKQ,UAAYL,EAExCjJ,aAAaiJ,GAEbA,EAAQjL,YAAW,WAClBiL,EAAQ,KAER,IAAMM,EAAMT,EAAKQ,QAAUN,EAAaJ,EAAGY,MAAM9O,EAAKyO,GAH9B,uBAKxB,YAAgBD,EAAhB,gDAAKxU,EAAwB,SACpB6U,GANe,kFASxBL,EAAc,KACZL,GAECQ,GACHL,EAAaJ,EAAGY,MAAM9O,EAAKyO,GAC3BzU,EAAQsU,IAERE,EAAYxY,KAAKgE,S,iCClCnBC,EAAOC,QAAU,EAAQ,M,6ECH3B,OAAe,cAA0B,wC,iCCEzCH,OAAOgV,eAAe7U,EAAS,aAAc,CAC3ChE,OAAO,IACL,EAAQ,KAAmB,EAAQ,KAAuB,EAAQ,KAEtE,IAA+H8Y,EAA5E,EAAQ,KAAkIC,QAAQ,CACnMpZ,IAAK,QACHqZ,EAAQF,EAAeE,MAAOC,EAAUH,EAAeG,QAASC,EAAKJ,EAAeI,GAAIC,EAAQL,EAAeK,MAAOC,EAAsBN,EAAeM,oBAAqBC,EAAeP,EAAeO,aAAcC,EAAYR,EAAeQ,UAAWC,EAAMT,EAAeS,IAAKC,EAAQV,EAAeU,MAAOC,EAAQX,EAAeW,MAErVzV,EAAQyV,MAAQA,EAAOzV,EAAQuV,IAAMA,EAAKvV,EAAQkV,GAAKA,EAAIlV,EAAQgV,MAAQA,EAC3EhV,EAAQoV,oBAAsBA,EAAqBpV,EAAQiV,QAAUA,EAASjV,EAAQqV,aAAeA,EACrGrV,EAAQsV,UAAYA,EAAWtV,EAAQmV,MAAQA,EAAOnV,EAAQwV,MAAQA,G,+KCDhEE,EAAeC,IAAqB,yBAErBC,E,+PAGgB,SAACC,GAC9B,IAAMC,EAAWC,YAAgBH,EAA0BI,gBAAgB,4BAAA5e,EAAA6e,OAAA,uDACjEC,EAAS,CAAEL,QAAOM,OAAQ,CAAC,gBADsC,WAAA/e,EAAA,MAEhD,EAAKgf,IAAInR,IAAI,qBAAsB,CAAEiR,YAFW,cAEjEG,EAFiE,yBAGhEA,EAASpQ,MAHuD,uCAA1D8P,CAId,CAAEF,UACL,OAAO,EAAKS,SAASR,M,4CAGDtF,IAAS,EAAK+F,uBAAwB,M,6BAZXC,K,YAAlCZ,E,iBACcF,EAAaO,MAAiD,Q,ICiCrFQ,E,0BC/BNC,EAAkC,CACpCC,YAAa,CACTC,OAAQC,IAAWC,UAIdC,EAAoBC,kBAC7BC,kCAAwBC,IAAMR,IACzBS,KAAKvB,EAA0BI,eAAeoB,SAAS,SAACC,EAAWC,GAEhE,OADAD,EAAUV,YAAYC,OAASC,IAAWU,QACnCF,KAEVF,KAAKvB,EAA0BI,eAAewB,MAAM,SAACH,EAAWC,GAG7D,OAFAD,EAAUV,YAAYC,OAASC,IAAWY,QAC1CJ,EAAUV,YAAY1Q,KAAOqR,EAAQhb,OAC9B+a,KAEVF,KAAKvB,EAA0BI,eAAe0B,QAAQ,SAACL,EAAWC,GAG/D,OAFAD,EAAUV,YAAYC,OAASC,IAAWc,MAC1CN,EAAUV,YAAY1L,MAAQqM,EAAQrM,MAC/BoM,M,SC3BNO,EAAeC,0BAA6B,CACrDC,WAAYf,I,20BFkDD,SAASgB,GAAUpb,GAAwB,MAYlDqb,EAVEC,EA+EV,SAA0Btb,GAAwB,IACtCub,EAAqCvb,EAArCub,eAAgBC,EAAqBxb,EAArBwb,iBAClBC,EAAsBC,mBAAQ,WAChC,MAAO,CACHC,KAAMC,IACNC,SAAUD,IACVE,OAAQF,IACRG,eAAgB,SAA8BC,GAC1C,OAAO,kBAAC,IAAD,eAAoCA,EAApC,CAAgDxS,UAAW+R,MAEtEU,kBAAmB,SAAiCD,GAChD,OAAO,kBAAC,IAAsCA,IAElDE,iBAAkBV,GAAoBI,IACtCO,eAAgBP,OAErB,CAACL,EAAgBC,IAEdY,EAAeV,mBAAQ,WACzB,MAAO,CACHW,OAAQ,iBAAO,IACfC,KAAM,SAACC,GACH,aAAYA,EAAZ,CAAkBC,gBAAiB,KAAMC,UAAW,QAExDC,QAAS,iBAAO,CACZC,YAAa,OAGtB,IAGGC,EAAWC,uBAAY,SAACC,GAC1B,aACOA,EADP,CAEIC,aAAc,GACdJ,YAAa,EACbjZ,OAAQ,GACRsZ,QAAS,OAEd,IAEH,MAAO,CACHC,WAAYxB,EACZqB,MAAOF,EACPM,OAAQd,GA3HUe,CAAiBnd,GAFe,EAKpBqG,oBAAS,GALW,mBAK/C+W,EAL+C,KAKpCC,EALoC,KAMhDC,EAAcC,aAFL,aAGT5a,EAAK3C,EAAM2C,IAAM2a,EACjBE,EAAUxd,EAAMwd,SAAW7a,EAAK,SAChC8a,EAAU9a,EAAK,UAEb6G,EAAwDxJ,EAAxDwJ,UAAWkU,EAA6C1d,EAA7C0d,SAAU/hB,EAAmCqE,EAAnCrE,QAASgiB,EAA0B3d,EAA1B2d,WAAYC,EAAc5d,EAAd4d,UAE5CC,EAAY7d,EAAM8d,QAAU9d,EAAM8d,OAAQjhB,OAAS,EACrDghB,IACAxC,EAAcoC,GAGlB,IAAMM,EAAUC,eACVC,EAAoBC,cAC1B,OACI,yBACI1U,UAAW2U,KAAWF,EAAkBnU,KAAM9J,EAAMwJ,WACpD4U,QAAS,WAAM,MACiC,GAAvChB,IAAD,UAAcpd,EAAMqe,iBAApB,aAAc,EAAiBnL,WAC/B,UAAAlT,EAAMqe,iBAAN,SAAiBnL,QAAQ3I,WAIhB,OAAhBvK,EAAMY,OACH,2BAAO0d,QAASd,EAAShU,UAAWyU,EAAkBM,qBAClD,0BAAM/U,UAAW2U,KAAWF,EAAkBO,UAAWxe,EAAMY,QAASZ,EAAMY,OAC9E,kBAAC6d,GAAA,EAAD,CAAWjV,UAAWyU,EAAkBS,WAAY1e,EAAM0e,YAIlE,yBAAKlV,UAAW2U,KAAWF,EAAkBU,UAAWZ,EAAQY,UAAW,CAAE1R,SAAUmQ,KACnF,kBAAC,KAAD,eACQ9B,EADR,CAEI3Y,GAAIA,EACJhH,QAASA,EACTijB,QAASpB,EACTjc,SAAUvB,EAAMuB,SAChBkH,aAAczI,EAAMyI,aACpBoW,cAAe7e,EAAM6e,cACrBC,YAAa9e,EAAM8e,YACnBC,WAAYrB,EACZsB,gBA3CD,YA4CCxV,UAAW2U,KA5CZ,YA4C+B3U,GAC9ByV,aAAYjf,EAAMY,YAASmB,EAC3Bmd,kBAAiBlf,EAAMmf,cAAWpd,EAClCqd,eAAcvB,EACdwB,mBAAkBhE,EAClBiE,aAAc3B,EACdte,MAAOW,EAAMX,MACbkgB,aAAY3B,IAAiC,IAAdR,QAA8Brb,EAC7Dyd,YAAaxf,EAAMwf,YACnBC,UAAWzf,EAAMyf,UACjBC,WAAY1f,EAAM0f,WAClBC,QAAS,WAAM,MACXtC,GAAa,GACb,UAAArd,EAAM2f,eAAN,cAAA3f,IAEJ4f,OAAQ,kBAAMvC,GAAa,IAC3BwC,cAAa,UAAE7f,EAAM6f,qBAAR,QAAyB,OACtCjN,IAAK5S,EAAMqe,aAEf,kBAACI,GAAA,EAAD,CAAWjV,UAAWyU,EAAkBS,WAAY1e,EAAM8f,gBAC1D,kBAACC,EAAA,EAAD,CAAepd,GAAI8a,EAASK,OAAQ9d,EAAM8d,Y,SAjF9ChE,K,YAAAA,E,gBAAAA,E,WAAAA,M,KAuFZsB,GAAU4E,aAAe,CACrBlB,aAAa,GGpGV,IAAMmB,GAAb,sPAQoB,WACP,EAAKjgB,MAAMga,YAAY1Q,MAA+C,IAAvC,EAAKtJ,MAAMga,YAAY1Q,KAAKzM,QAC5D,EAAKmD,MAAMkgB,OAAO,IAAI,MAVlC,wEAcoB,MAERvkB,EAmBU,EArBF,SACsB6Q,KAAKxM,MAA/Bga,EADI,EACJA,YAAamG,EADT,EACSA,SAoBrB,OAlBInG,EAAYC,SAAWC,IAAWY,SAAWd,EAAY1Q,OACzD3N,EAAUqe,EAAY1Q,KAAK5M,KAAI,SAAC0jB,GAAe,QACvCC,EACEC,EAAW,oBAAGF,EAAWG,mBAAd,aAAG,EAAwB1jB,cAA3B,QAAqC,EAKtD,OAJIyjB,EAAc,IACdD,EAAcD,EAAWG,YAAYD,EAAc,GAAGnmB,MAGnD,CACHkF,MAAO+gB,EAAWI,WAClB5f,MAAOwf,EAAWjmB,KAClBmP,KAAM,CACF+W,oBAMZF,EAEI,kBAACM,EAAA,EAAD,aACId,QAASnT,KAAKkU,cACdlB,YAAahd,YAAE,cACXgK,KAAKxM,MAHb,CAIIY,MAAK,UAAE4L,KAAKxM,MAAMY,aAAb,QAAsB4B,YAAE,sBAC7Bme,eAAa,EACbhlB,QAASA,KAKjB,kBAACyf,GAAD,aACIuE,QAASnT,KAAKkU,cACdlB,YAAahd,YAAE,cACXgK,KAAKxM,MAHb,CAIIuB,SAAU,SAAC8a,GACH,EAAKrc,MAAMuB,UAAU,EAAKvB,MAAMuB,SAAS,CAAC8a,KAElD1gB,QAASA,EACTiF,MAAK,UAAE4L,KAAKxM,MAAMY,aAAb,QAAsB4B,YAAE,sBAC7BnD,OAAQ1D,GAAW,IAAI,QAzDvC,uCA8D6BqE,GACrB,IAAI4gB,EAAO,GAMX,OAJIA,EADiC,KAAjC5gB,EAAM6gB,YAAYC,WACXte,YAAE,yBAEFA,YAAE,uBAEN,kBAAC,IAAqBxC,EAAQ4gB,OArE7C,GAA4C1a,IAAMmM,W,YAArC4N,G,eACqC,CAC1CR,WAAW,EACXzF,YAAa,CACTC,OAAQC,IAAWC,WAwF/B,IAEe4G,GAFGC,mBAnBlB,SAAyBC,EAAyBC,GAC9C,MAAO,CACHzB,UAAWwB,EAAME,MAAMhG,WAAWnB,YAAYC,SAAWC,IAAWU,QACpEZ,YAAaiH,EAAME,MAAMhG,WAAWnB,gBAI5C,SAA4BL,GACxB,IAAMyH,EAA4B,IAAInI,EAA0BU,EAAU0H,KAE1E,MAAO,CACHnB,OAAQ,SAAChH,GAAiC,IAAlBoI,EAAkB,wDACtCpI,EAAQA,EAAMnd,QACTulB,GAAUpI,IACfkI,EAA0B/H,eAAeH,OAOtC6H,CAAUd,I,8BChHlB,SAASsB,GAAUvhB,GAAe,MACbqG,mBAAS,IADI,mBAC9Bua,EAD8B,KACxBY,EADwB,OCNlC,SAAsBC,GACzBA,EAASA,EAAO1lB,OAD4C,IAEpD2lB,EAAYC,eAAZD,QACFE,EAAaC,uBAAY,SAACZ,GAAD,uBAAiCA,EAAMa,YAAvC,aAAiC,EAAYF,WAAWH,MAH3B,EAKTG,GAAc,GALL,IAKpD3H,cALoD,MAK3CC,IAAWC,QALgC,EAa5D,OAb4D,EAKvB7Q,KAErC9C,qBAAU,WACFyT,GAAUA,IAAWC,IAAWC,SAAWsH,GAC3CC,EAAQ,CAAEvnB,KAAMsnB,MAErB,CAACA,EAAQxH,EAAQyH,IAEbE,EDJ4CG,CAAanB,IAAS,GAHpC,IAG7B3G,cAH6B,MAGpBC,IAAWU,QAHS,MAGAtR,YAHA,MAGO,GAHP,EAKrC,OACI,kBAACmX,EAAA,EAAD,eACQzgB,EADR,CAEIX,MAAQW,EAAMX,MAAaW,EAAMX,MAAX,GACtBwf,cAAe2C,EACfjgB,SAAU,SAAC5F,GACPqE,EAAMuB,SAAS5F,IAEnBA,QAAS2N,EAAK5M,KAAI,SAACslB,GACf,MAAO,CACH3iB,MAAO2iB,EAAIrf,GACX/B,MAAOohB,EAAI7nB,KACX8nB,QAASD,EAAIE,YAGrBzC,YAAamB,GAAQ,CAAC1G,IAAWC,QAASD,IAAWU,SAASvZ,SAAS4Y,MEZ5E,SAASkI,KAA6B,oBACJliB,cAA7BC,EADiC,EACjCA,KAAMC,EAD2B,EAC3BA,WAAYshB,EADe,EACfA,OAEpBxD,EAAoBC,cACpBkE,EAAmBC,cAEzB,OACI,kBAACC,EAAA,EAAD,CAAaC,aAAcd,GACvB,kBAACe,EAAA,EAAD,CACI5hB,MAAO4B,YAAE,SACTigB,WAAY,CACRlhB,SAAU,SAAC4I,GAA+C,IAC9C9K,EAAU8K,EAAM1I,OAAhBpC,MACRc,EAAW,CAAEhG,KAAMkF,KAEvBA,MAAOa,EAAK/F,WAAQ4H,KAG5B,kBAAC2gB,GAAA,EAAD,CACIlZ,UAAWyU,EAAkBnU,KAC7BvI,SAAU,SAAC5F,GACPwE,EAAW,CAAEwiB,QAAShnB,KAE1B0D,MAAK,UAAEa,EAAKyiB,eAAP,QAAkB,KAE3B,kBAACC,EAAA,EAAD,CACIC,cAAe,SAACC,GACZ3iB,EAAW,CAAE4iB,UAAWD,KAE5BE,YAAa,SAACF,GACV3iB,EAAW,CAAE8iB,QAASH,KAE1BlmB,MAAOsD,EAAK6iB,UACZG,IAAKhjB,EAAK+iB,QACVzZ,UAAW4Y,EAAiBtY,OAEhC,kBAAC,GAAD,CACIlJ,MAAO4B,YAAE,YACT2d,UAAQ,EACR5e,SAAU,SAAC5F,GACPwE,EAAW,CAAEgjB,gBAAiBxnB,KAElC0D,MAAK,UAAEa,EAAKijB,uBAAP,QAA0B,KAGnC,kBAACC,GAAA,EAAD,CAAetiB,OAAO,GAClB,kBAACuiB,EAAA,EAAD,CACI3F,WAAW,UAAAxd,EAAKijB,uBAAL,eAAsBtmB,SAAU,GAAK,EAChD+D,MAAO4B,YAAE,wBACTjB,SAAU,SAAC4I,GACPhK,EAAW,CAAEmjB,uBAAwBnZ,EAAM1I,OAAOH,UAAW,KAEjEA,QAAO,UAAEpB,EAAKojB,8BAAP,SACP9Z,UAAWyU,EAAkBnU,OAEjC,kBAACuZ,EAAA,EAAD,CACIziB,MAAO4B,YAAE,mCACTjB,SAAU,SAAC4I,GACPhK,EAAW,CAAEojB,mBAAoBpZ,EAAM1I,OAAOH,UAAW,KAE7DA,QAAO,UAAEpB,EAAKqjB,0BAAP,SACP/Z,UAAWyU,EAAkBnU,OAEjC,kBAACuZ,EAAA,EAAD,CACIziB,MAAO4B,YAAE,8BACTjB,SAAU,SAAC4I,GACPhK,EAAW,CAAEqjB,0BAA2BrZ,EAAM1I,OAAOH,UAAW,KAEpEA,QAAO,UAAEpB,EAAKsjB,iCAAP,SACPha,UAAWyU,EAAkBnU,QAIrC,kBAACyX,GAAD,CACI3gB,MAAO4B,YAAE,QACTnD,MAAK,UAAEa,EAAKujB,mBAAP,QAAsB,GAC3BliB,SAAU,SAAC5F,GACPwE,EAAW,CAAEsjB,YAAa9nB,OAIlC,kBAACoE,EAAA,EAAD,O,cCtFL,SAAS2jB,GAA0B1jB,GAAe,QAChBC,cAA7BC,EAD6C,EAC7CA,KAAMC,EADuC,EACvCA,WAAYshB,EAD2B,EAC3BA,OACpBxD,EAAoBC,cACpBkE,EAAmBC,cACzB,OACI,kBAACC,EAAA,EAAD,CAAaqB,MAAOnhB,YAAE,kBAAmB+f,aAAcd,GACnD,kBAACiB,GAAA,EAAD,CACIlZ,UAAWyU,EAAkBnU,KAC7BvI,SAAU,SAAC5F,GACPwE,EAAW,CAAEwiB,QAAShnB,KAE1B0D,MAAK,UAAEa,EAAKyiB,eAAP,QAAkB,KAE3B,kBAACC,EAAA,EAAD,CACIC,cAAe,SAACC,GACZ3iB,EAAW,CAAE4iB,UAAWD,KAE5BE,YAAa,SAACF,GACV3iB,EAAW,CAAE8iB,QAASH,KAE1BlmB,MAAOsD,EAAK6iB,UACZG,IAAKhjB,EAAK+iB,QACVzZ,UAAW4Y,EAAiBtY,Q,6DCzB7B,SAAS8Z,GAAiC5jB,GAAe,MACvCA,EAArB6jB,aACFC,EAAa,IAAH,YAFoD,MAC7C,EAD6C,GAI9DC,EAAgBC,eAChBjG,EAAUkG,aAAoBF,EAAcG,cAAc,GAChE,OACI,yBAAK1a,UAAW2U,KAAWJ,EAAQoG,QAASpG,EAAQqG,cAChD,kBAACC,GAAA,EAAD,KAAsB7hB,YAAE,YACxB,yBAAKgH,UAAWuU,EAAQuG,UACpB,kBAAC,KAAD,CAAe7R,OAAQ,GAAI3N,MAAO,MAEtC,yBAAK0E,UAAW2U,KAAWJ,EAAQwG,KAAM,CAAEC,SAAS,KAChD,yBAAKhb,UAAWuU,EAAQ0G,OACpB,kBAACX,EAAD,CAAYta,UAAWuU,EAAQ4F,OAC3B,kBAACe,GAAA,EAAD,CAAkBjS,OAAQ,GAAI3N,MAAO,OAEzC,kBAAC,KAAD,CAAe2N,OAAQ,EAAG3N,MAAO,MACjC,yBAAK6f,MAAO,CAAEtgB,QAAS,SACnB,kBAACqgB,GAAA,EAAD,CAAkBjS,OAAQ,GAAI3N,MAAO,MACrC,kBAAC4f,GAAA,EAAD,CAAkBjS,OAAQ,GAAI3N,MAAO,GAAI6f,MAAO,CAAEC,WAAY,OAElE,kBAAC,KAAD,CAAenS,OAAQ,EAAG3N,MAAO,S,oECXtC,SAAS+f,GAA0B7kB,GAAe,MACcA,EAAnE8kB,YADqD,MAC9C,kBAAC,IAAD,MAD8C,IACc9kB,EAAnC6jB,oBADqB,MACN,EADM,EACHkB,EAAiB/kB,EAAjB+kB,aACpDhB,EAAgBC,eAFuC,EAGvC3d,oBAAS,GAAxB2e,EAHsD,oBAKvDC,ECtBH,SAAuB/L,GAC1B,IAAMgM,EAAUC,eACRJ,EAAiB7L,EAAjB6L,aAEFK,EAAiBvD,uBAAY,SAACZ,GAAkC,MAClE,iBACIA,EAAMoE,YAAYC,gBAAgBP,UADtC,QACuD,CAC/C9K,OAAQC,IAAWC,YAKvBF,EAAWmL,EAAXnL,OAQR,OANAzT,qBAAU,WACF0T,IAAWC,QAAQ9Y,SAAS4Y,IAC5BiL,EAAQK,kBAAkBrM,KAE/B,CAACe,EAAQiL,EAAShM,IAEdkM,EDEYI,CAAc,CAAET,iBAG7BU,EAAU/J,mBAAQ,WAAM,MACSld,OAAOknB,SAAlCjE,EADkB,EAClBA,OADkB,EACVkE,KADU,EACJC,SACtB,GAAInE,EAAQ,CACR,IAAMoE,EAAWC,KAAGlc,MAAM6X,QACI1f,IAA1B8jB,EAASd,qBACFc,EAASd,aAEpB,IAAMgB,EAAWD,KAAGnS,UAAUkS,GAC9B,OAAOG,eAAkB,IAAMD,EAEnC,OAAOC,iBACR,IAGH,GAFAC,aAAmBR,GAEfT,GAAgB,CAAC9K,IAAWC,QAASD,IAAWU,SAASvZ,SAAS4jB,EAAWhL,UAAYgL,EAAW3b,KACpG,OAAO,kBAACsa,GAAD,MAGX,IAAKqB,EAAW3b,MAAQ2b,EAAW3W,MAC/B,OAAO,kBAACyR,EAAA,EAAD,CAAejC,OAAQ,CAACmH,EAAW3W,OAAOlM,OAAOhD,QAG5D,IAAM0kB,EAAa,IAAH,OAAOD,GACjBqC,EAAuB,CACzBC,MAAOlB,EAAW3b,KAAK8c,cACvBC,UAAW,YAGTtI,EAAUkG,aAAoBF,EAAcG,eAAgBY,GAClE,OACI,yBAAKtb,UAAW2U,KAAWJ,EAAQoG,QAASpG,EAAQqG,cAChD,yBAAK5a,UAAWuU,EAAQuG,UAAWQ,GACnC,yBAAKtb,UAAW2U,KAAWJ,EAAQwG,KAAM,CAAEC,UAAWM,KAClD,kBAACwB,GAAA,EAAD,CAAWC,GAAItB,EAAW3b,KAAKvL,IAAKyoB,SAAU,EAAGhd,UAAWuU,EAAQ0I,MAChE,kBAAC3C,EAAD,CAAYta,UAAWuU,EAAQ4F,OAAQsB,EAAW3b,KAAKnP,OAE3D,yBAAKqP,UAAWuU,EAAQ0G,OACpB,kBAACiC,GAAA,EAAD,CACIC,WAAY1B,EAAW3b,KAAKsd,WAC5B3sB,KAAM,aACNisB,OAAQ,CAACA,GACTW,OAAQ5B,EAAW3b,KAAKiX,iB,mgDExDhD,IAEYuG,GAFNC,GAAcC,EAAQ,KAAwC5O,S,SAExD0O,K,cAAAA,E,sCAAAA,E,kDAAAA,E,gDAAAA,E,oCAAAA,E,uCAAAA,Q,KAwCL,IAAMG,GAA0B1jB,cACnC,SAAC2jB,EAA0CC,GAA+B,YAChEC,EAAWzjB,aAAgB,iBAAkBwjB,GAC7C3jB,EAAaC,aAAgB0jB,GAC7BE,EAAaC,aAAgBH,GAO/BxrB,EAAUyrB,EACV,UACA,CACI/iB,QAAS,CACLkjB,aAAa,EACbrB,QAAQ,GAEZ/rB,KAAM,CACFqtB,QAAQ,EACRC,KAAMC,KAAUD,KAAK,IACrBE,OAAQD,KAAUE,UAAU,KAEhCC,YAAaf,GAA0BgB,uBACvCC,WAAYC,cAAWC,KACvBlL,aAAcvZ,EAAWO,OAAOmkB,OAChCC,WAAYT,KAAUS,WAAW,IACjCtkB,GAAIL,EAAWM,WAAWD,GAC1BukB,SAAU,CACNC,WAAYC,KAAYC,YACxBlC,UAAW,aAEfmC,kBAAmB,SACnBC,UAAW,OACXC,eAAgB3B,GAChB4B,qBAAiB5mB,EACjB6mB,UAAW,CACPC,UAAW,MACXV,WAAYT,KAAUS,WAAW,IACjCpkB,OAAQ2jB,KAAU3jB,OAAO,CACrBe,MAAO,IAEXhD,UAAMC,IAGdmlB,GAGE4B,EAAWntB,EAAQksB,cAAgBf,GAA0BiC,wBAC7DC,EAAgBrtB,EAAQksB,cAAgBf,GAA0BmC,iBAClEzE,EAAU7oB,EAAQksB,cAAgBf,GAA0BgB,uBAC5DoB,EAAoD,SAAhCvtB,EAAQitB,UAAUC,UACtCM,EAAgBxtB,EAAQksB,cAAgBf,GAA0BsC,kBAExEztB,EAAUyrB,EACN,UADc,MAGPzrB,EAHO,CAIV0tB,SAAUF,EAAgB,UAAY,SACtCtlB,IACKlI,EAAQwsB,WAAWnkB,OAASoB,KAAYkkB,aAAa3tB,EAAQwsB,WAAWnkB,OACnER,EAAWM,WAAWD,GACtBL,EAAWM,WAAWylB,GAChCxB,YACI,UAAApsB,EAAQwsB,kBAAR,eAAoBnkB,QAAS8kB,GAAYE,GAAiBxE,EACpDwD,cAAWwB,OACX7tB,EAAQosB,WAClBU,UAAYS,IAAsB1E,IAAWwE,EAA4B,OAAX,WAElE9B,GAGJvrB,EAAUyrB,EACN,UADc,MAGPzrB,EAHO,CAIVwsB,WAAY,CACRM,UAAWjE,EAAU,SAAW,OAChCxgB,MAAOrI,EAAQosB,aAAeC,cAAWC,KAAOzkB,EAAWM,WAAWylB,QAAKxnB,KAGnFmlB,GAGJ,IAAMuC,EAASrC,EAAS,SAAU,CAO9BsC,SAAUrC,EAAWsC,aAAaC,KAAO,EAA6B,EAAzBvC,EAAWwC,OAAO/nB,OAG7DgoB,EAAY,CAAC9B,cAAW+B,OAAQ/B,cAAWwB,QAAQnoB,SAAS1F,EAAQosB,YAEpE/K,EAAUoK,EAAS,UAAW,CAMhC4C,eAAgBtC,KAAU1K,QAAQ,CAC9BiN,SAAUH,GAAahB,EAAW,GAAK,EACvCxX,KACI4X,GAAuBvtB,EAAQitB,UAAUT,WAAWnkB,OAAUrI,EAAQ0I,QAAQkjB,YAExE/C,EACA,OACAziB,EAHA,EAIVyP,OAAQgT,GAAWsF,EAAY,EAAI,EACnCI,WAAYhB,EAAoB,EAAIY,EAAatF,GAAWwE,EAAgB,GAAK,GAAM,MAIzFmB,EAAgB/C,EAAS,gBAAiB,CAO5C3iB,QAASykB,EAAoB,EAAI,GAQjCnM,aAAcphB,EAAQitB,UAAUT,WAAa3kB,EAAWO,OAAOmkB,YAASnmB,EACxEqoB,qBAAsBzuB,EAAQitB,UAAUT,WAAWnkB,MAC7CoB,KAAYilB,4BAA4B,CACpCrmB,MAAOrI,EAAQitB,UAAUT,WAAWnkB,MACpCsmB,OAAQ,UAEZvoB,IAGJ+iB,EAAOsC,EAAS,OAAQ,CAO1BtlB,KAAMnG,EAAQitB,UAAU9mB,KAAOnG,EAAQitB,UAAU9mB,KAAOonB,EAAoB,GAAK,GAMjFf,WAAYT,KAAUS,WAAW,IAMjCoC,gBAAiB7C,KAAUS,WAAW,MAGtCA,EAAaf,EAAS,aAAc,CAKpCvjB,GAAI,CACAG,MAAOR,EAAWgnB,iBAAiBC,OAQvClB,GAAI7B,KAAUS,WAAW,IAOzBuC,MAAOhD,KAAUS,WAAW,MAG1BwC,EAAoBxC,EAAWtkB,GAAGG,MAAM4mB,aAAe,GAC7DzC,EAAaf,EAAS,aAAD,MACde,EADc,CAEjBuC,MAAO,MACAvC,EAAWuC,MADb,CAED1mB,MAAO2mB,EACDnnB,EAAWgnB,iBAAiBK,MAAMC,KAAK,IACvCtnB,EAAWgnB,iBAAiBC,MAAMK,KAAK,SAIrD,IAAM3wB,EAAOitB,EAAS,OAAQ,CAK1BK,KAAMC,KAAUD,KAAK,CACjBzjB,MAAK,UAAErI,EAAQxB,KAAKstB,KAAKzjB,aAApB,QAA6BrI,EAAQkI,GAC1C/B,KAAO,WACH,GAAInG,EAAQxB,KAAKstB,KAAK3lB,KAClB,OAAOnG,EAAQxB,KAAKstB,KAAK3lB,KAF1B,GASPwoB,OACQ3uB,EAAQxB,KAAKstB,KAAK6C,OACX3uB,EAAQxB,KAAKstB,KAAK6C,OAClBtB,EACAxlB,EAAWunB,MAAMC,QAAQC,cAD7B,IAYf9C,WAAYT,KAAUS,WAAW,CAC7BnkB,MAAOA,iBAAM,UASjBknB,aAAc/B,EAAgB,WAAa,OAO3CnM,QAASmM,EACHzB,KAAU1K,QAAQ,CACdiN,SAAU,GACVC,WAAY,KAEhBxC,KAAU1K,QAAQ,IACxB2K,OAAQD,KAAUE,UAAU,CACxBuD,MAAK,UAAExvB,EAAQxB,KAAKwtB,OAAOwD,aAAtB,aAA+BppB,EACpCwI,MAAK,UAAE5O,EAAQxB,KAAKwtB,OAAOpd,aAAtB,aAA+BxI,MAItCqpB,EAAehE,EAAS,eAAgB,CAM1C3iB,QAAS,MACFtK,EAAK6iB,QADL,CAEH1L,IAAK,KAQTmW,KAAMC,KAAUD,KAAK,CACjB4D,UAAW,YACXrnB,MAAOrI,EAAQkI,GACf/B,KAAM,GACNwoB,OAAQ9mB,EAAWunB,MAAMC,QAAQC,aAInC1D,EAAcH,EAAS,cAAe,CAMxCpK,QAAS0K,KAAU1K,QAAV,MACF7iB,EAAK6iB,QADH,CAEL1L,IAAK,EACLE,OAAQ,KAQZiW,KAAMC,KAAUD,KAAK,CACjBzjB,MAAOrI,EAAQkI,GACfynB,WAAY9nB,EAAW+nB,YAAYhP,SAIrCiP,EAAQpE,EAAS,QAAS,CAM5BqE,MAAO,CAOHhZ,OAAQuW,EAAgB,GAAK,EAQ7BlkB,MAAO,IASX4mB,UAAW1C,EAAgB,IAAM,MAGrC,MAAO,CAAErtB,UAAS8tB,SAAQtvB,OAAMixB,eAAc7D,cAAavK,UAASwO,QAAO1G,OAAMqF,gBAAehC,iBAI3FwD,GAAwBpoB,cAAc,SAAC2jB,GAA6C,QACvF/iB,EAAO8iB,GAAwBC,GAC/B1jB,EAAaC,eACbkhB,EAAQiH,aAAa,kBAErBC,EAAiB,WACnB,OAAQ1nB,EAAKxI,QAAQosB,YACjB,KAAKC,cAAW+B,OACZ,aACOvlB,KAAOT,OAAO,CACbmkB,OAAQ/jB,EAAKxI,QAAQohB,eAF7B,GAIO,CACC,yBACOvY,KAAOT,OAAO,CACbC,MAAOR,EAAWO,OAAO+nB,WACzB5D,OAAQ/jB,EAAKxI,QAAQohB,kBAKzC,KAAKiL,cAAWwB,OACZ,WACIzM,aAAc5Y,EAAKxI,QAAQohB,cACxBgP,eAAeC,QAFtB,GAGO,CACC,yBACOD,eAAeE,gBAIlC,KAAKjE,cAAWkE,iBAChB,KAAKlE,cAAWC,KAChB,QACI,MAAO,CACHlL,aAAc5Y,EAAKxI,QAAQohB,eA9BpB,GAmCjBoP,EAAoBhoB,EAAKhK,KAAKwtB,OAAOwD,MACrC3mB,KAAOojB,UAAUwE,UAAUjoB,EAAKhK,KAAKwtB,QACrCnjB,KAAOojB,UAAUwE,YACjBC,EAAkD,SAArCloB,EAAKxI,QAAQitB,UAAUC,UACpCyD,EAAiCD,IAAeloB,EAAKxI,QAAQ0I,QAAQkjB,YACrE4B,EAAgBhlB,EAAKxI,QAAQksB,cAAgBf,GAA0BsC,kBAGvEmD,GAFkBpD,IAAiBhlB,EAAKxI,QAAQosB,WAAeC,cAAWwB,QAGjD,aAA3BrlB,EAAKhK,KAAK+wB,aAAV,MAEc/B,EAAgB3kB,KAAO2jB,WAAWhkB,EAAKhK,KAAKguB,YAAc,GAFxE,CAGU1L,UAAW0M,EAAgB,oCAAiCpnB,EAC5DoiB,QAAS,KACTrf,MAAO,GACP2N,OAAQ,GACR+Z,SAAU,WACVlb,IAAK,eAAF,OAAiB,GAAjB,OACH+Z,UAAW,gBACX1mB,KAAM,KAEV,IAEJ8nB,EAAYjoB,KAAOojB,UAAUwE,UAAU,CACzChU,QAASjU,EAAKhK,KAAKstB,KAAKzjB,MACxB0oB,UAAWtnB,KAAYunB,gBAAgBxoB,EAAKhK,KAAKstB,KAAKzjB,MAAQ,OAG5D7J,EAAOwqB,EACT,OADc,MAGPngB,KAAOC,QAAQN,EAAKhK,KAAK6iB,SAHlB,GAIPxY,KAAOijB,KAAKtjB,EAAKhK,KAAKstB,MAJf,GAKPjjB,KAAO2jB,WAAWhkB,EAAKhK,KAAKguB,YALrB,CAMVjjB,aAAconB,EACR,EACAnD,EACA5kB,aAAU,IACVA,aAAUf,EAAWqmB,OAAO+C,MAClCnQ,UAAW0M,EAAgB,8BAAgC,OAC3DqD,SAAU,YACP,CACC,UAAWD,IAGnBE,GAGEI,EAAeV,EAEfriB,EAAO6a,EAAM,IAEXlS,OAAQqa,mBAAQ,MACbtoB,KAAO2jB,WAAWhkB,EAAKxI,QAAQwsB,YAHxB,CAIVnkB,MAAOoB,KAAYC,SAASlB,EAAKxI,QAAQkI,IACzCwlB,SAAUF,EAAgB,UAAY,SACtCO,SAAUnlB,aAAUJ,EAAKslB,OAAOC,UAChCrlB,QAAS,OACT0oB,cAAe,WARL,sCAUO5yB,GAAS0yB,GAAgBA,EAAa,YAAcA,EAAa,iBAAc9qB,GAVtF,iCAWO5H,GAAS0yB,GAAgBA,EAAa,YAAcA,EAAa,iBAAc9qB,GAXtF,yCAYe5H,GACjB0yB,GAAgBA,EAAa,oBAAsBA,EAAa,yBAAsB9qB,GAbpF,kCAcQ5H,GACV0yB,GAAgBA,EAAa,aAAeA,EAAa,kBAAe9qB,GAftE,IAkBd8pB,GAGEmB,EAAsBrI,EAAM,sBAAD,IAC7B6H,SAAU,YACPhoB,KAAO2jB,WAAWhkB,EAAKgkB,WAAWoB,IAFR,CAG7B0D,KAAM,EACN5oB,QAASgoB,EAAa,YAAStqB,EAC/BmrB,WAAYb,EAAcloB,EAAKxI,QAAQ0I,QAAQkjB,YAAc,aAAe,cAAYxlB,EACxForB,WAAYd,EAAa,OAAItqB,EAC7BqrB,YAAaf,EAAa,OAAItqB,KAG5BsrB,EAAkB1I,EAAM,kBAAD,MACtB2I,oBAAiBC,mBADK,GAEtB/oB,KAAO2jB,WAAWhkB,EAAKgkB,WAAWuC,SAGnCvG,EAAUQ,EACZ,UACA,CACI6I,UAAWrpB,EAAKxI,QAAQ8sB,WAE5BjkB,KAAOC,QAAQN,EAAK6Y,QAAQgN,iBAG1ByD,EAAkB9I,EAAM,kBAAD,MACtB2I,oBAAiBC,mBADK,GAEM,SAA3BppB,EAAKxI,QAAQ8sB,UAAuBiF,wBAAaC,aAAeD,wBAAaE,SAFxD,CAGzBb,cAAe,UACZvoB,KAAOC,QAAQN,EAAK6Y,QAAQgN,gBAJN,CAKzBmD,WAAY,GACZU,cAAe,GACfC,eAAiB,WACb,OAAQ3pB,EAAKxI,QAAQ6sB,mBACjB,IAAK,MACD,MAAO,aACX,IAAK,SACD,MAAO,WACX,QACI,MAAO,UAPF,GAUjBgF,UAAWrpB,EAAKxI,QAAQ8sB,aAGtBsF,EAAepJ,EAAM,eAAD,MACnBngB,KAAOijB,KAAKtjB,EAAKhK,KAAKstB,MADH,CAEtBzjB,MAAOoB,KAAYC,SAASlB,EAAKgkB,WAAWtkB,GAAGG,OAC/CkB,aAAc,MAGZ8oB,EAAmBlB,mBAAS3oB,EAAKqnB,MAAMC,MAAMhZ,OAAStO,EAAKqnB,MAAMC,MAAM3mB,MAAS,KAEhFmpB,EAAiBtJ,EAAM,iBAAkB,CAC3CwD,WAAY/iB,KAAYC,SAAS7B,EAAW0qB,gBAAgB,MAC5DppB,MAAOgoB,mBAAQ,KACfK,WAAYa,EACZxB,SAAU,aAGR2B,EAAwBxJ,EAAM,wBAAyB,CACzD+G,UAAWnnB,aAAUJ,EAAKqnB,MAAME,WAChCrC,SAAU,WAGRmC,EAAQ7G,EAAM,QAAD,MACZ2I,oBAAiBC,mBADL,CAEfa,UAAW,QACXC,eAAgB,mBAGdlE,EAAgBxF,EAAM,gBAAD,MACQ,SAA3BxgB,EAAKxI,QAAQ8sB,UAAuBiF,wBAAaC,aAAeD,wBAAaE,SAD1D,CAEvBnpB,QAASN,EAAKgmB,cAAc1lB,SACzBD,KAAO2jB,WAAWhkB,EAAKxI,QAAQitB,UAAUT,YAHrB,CAIvBpL,aAAY,UAAE5Y,EAAKgmB,cAAcpN,oBAArB,aAAqChb,GAC9C,CACC,mBAAoB,CAChBya,gBAAiBrY,EAAKxI,QAAQitB,UAAUT,WAAWnkB,MAC7CoB,KAAYC,SAASlB,EAAKgmB,cAAcC,2BACxCroB,MAKZ+iB,EAAOH,EAAM,OAAD,IACdlS,OAAQtO,EAAK2gB,KAAKhjB,MACf0C,KAAO2jB,WAAWhkB,EAAK2gB,KAAKqD,YAFjB,GAIX3jB,KAAOT,OAAOI,EAAKxI,QAAQitB,UAAU7kB,QAJ1B,0BAKT+F,EALS,sBAKSA,EALT,uBAK4BA,EAL5B,kBAMPtF,KAAO2jB,WAAWhkB,EAAK2gB,KAAKyF,qBAIjC+D,EAAkBC,gBAAK,GAAD,OACrBhqB,aAAUJ,EAAK2gB,KAAKhjB,KAA4D,EAApDqC,EAAK6Y,QAAQgN,eAAeE,cAGzDzF,EAAQE,EAAM,QAAD,MACZngB,KAAOC,QAAP,MACIN,EAAKhK,KAAK6iB,UAFF,GAIZ,CACC,SACIwP,SAAU,WACVgB,UAAWrpB,EAAKxI,QAAQ8sB,WACrBjkB,KAAOC,QAAP,MACIN,EAAK6Y,QAAQgN,eADjB,CAEC1Y,IAAK,GACLE,OAAQ,GACR7M,KAAM0nB,EAAaiC,EAAkBnF,EAAgB,YAASpnB,SAwB9E,MAAO,CACH+H,OACA3P,OACAixB,aArBiBzG,EAAM,eAAD,MACnBngB,KAAOC,QAAP,MACIN,EAAKinB,aAAa3mB,UAFH,GAInBD,KAAOijB,KAAKtjB,EAAKinB,aAAa3D,MAJX,GAKnB,CACC+G,IAAK,CACD5J,WAAY,OAepBmJ,eACAtJ,QACAN,UACAkJ,kBACAL,sBACAS,kBACAQ,iBACAE,wBACA3C,QACAjE,YAnBgB5C,EAAM,cAAD,IACrBtgB,QAASF,EAAKxI,QAAQ0I,QAAQkjB,iBAAcxlB,EAAY,QACrDyC,KAAOC,QAAQN,EAAKojB,YAAYvK,SAFd,GAGlBxY,KAAOijB,KAAKtjB,EAAKojB,YAAYE,QAiBhC3C,OACAqF,oB,glBCpoBD,IAAMsE,GAAoBlrB,cAAc,WAC3C,IAAMK,EAAgBD,aAAgB,YAChCH,EAAaC,eAEbvE,EAAO0E,EAAc,OAAQ,CAC/B8qB,SAAUlrB,EAAWunB,MAAMjpB,KAAK6sB,MAChClqB,QAASijB,KAAU1K,QAAQ,CACvBiN,SAAmC,EAAzBzmB,EAAWorB,OAAO9sB,KAC5BooB,WAAmD,EAAvC2E,eAAqB7R,QAAQvY,UAE7CqqB,cAAepH,KAAU1K,QAAQ,CAC7BkN,WAAY,MAId6E,EAAoBnrB,EAAc,oBAAqB,CACzDorB,SAAU,CACN9E,WAAahrB,EAAKuF,QAAQylB,WAAwB,KAIpDvG,EAAQ/f,EAAc,QAAS,CACjC6jB,KAAMC,KAAUD,KAAK,CACjB3lB,KAAM0B,EAAWunB,MAAMjpB,KAAK6hB,MAC5B2G,OAAQ9mB,EAAWunB,MAAMC,QAAQiE,KACjC3D,WAAY9nB,EAAW+nB,YAAY2D,UACnClrB,WAAOjC,IAEXotB,SAAUrC,mBAAQ,KAClBsC,QAAS,CACL5d,OAAQhO,EAAWqmB,OAAO/nB,MAE9ButB,OAAQ,CACJ5H,KAAMC,KAAUD,KAAK,CACjB3lB,KAAM0B,EAAWunB,MAAMjpB,KAAK6sB,MAC5BrE,OAAQ9mB,EAAWunB,MAAMC,QAAQiE,UAKvCxI,EAAO7iB,EAAc,OAAQ,CAC/BC,GAAIL,EAAWM,WAAWD,GAC1ByrB,WAAY9rB,EAAWunB,MAAMC,QAAQuE,OACrCjE,WAAY9nB,EAAW+nB,YAAY2D,UACnCpqB,MAAO,IACPqqB,SAAUrC,mBAAQ,KAClB4B,SAAU,KAGRc,EAAoBhrB,KAAOojB,UAAUwE,YAErCqD,EAAU7rB,EAAc,UAAD,IACzB0rB,WAAY9rB,EAAWunB,MAAMC,QAAQC,SACrCyD,SAAUlrB,EAAWunB,MAAMjpB,KAAK4tB,OAChCN,QAAS,CACL9d,IAAK,QAET0d,SAAU,CACN1d,IAAK9N,EAAWqmB,OAAO/nB,MAE3BgjB,MAAM,GACH0K,IAGDxS,EAAUpZ,EAAc,UAAW,CACrCU,OAAQ,IAGNqrB,EAAU/rB,EAAc,UAAW,CACrCgsB,QAAS,IAGPC,EAAYjsB,EAAc,YAAa,CACzC6O,OAAQ,EACR8W,GAAI/lB,EAAWS,WAAW,IAC1BujB,QAAQ,IAGNsI,EAAclsB,EAAc,cAAe,CAC7CmsB,UAAW,MAWf,MAAO,CACHhB,oBACA7vB,OACAykB,QACAgM,UACAlJ,OACAgJ,UACAzS,UACA6S,YACA3L,aAjBiB,WAKjB,MAAO,CAAE6L,UAJS,SAAC7S,GACf,OAAO8S,aAAM,CAAEb,SAAUW,EAAYC,WAAa7S,UAmBjD+S,GAAkB1sB,cAAc,WACzC,IAAMC,EAAaC,eACbU,EAAOsqB,KACP9J,EAAQiH,aAAa,YACrB1H,EAAe/f,EAAK+f,eAEpBpa,EAAO6a,EAAM,MAERngB,KAAOC,QAAP,MACIN,EAAKjF,KAAKuF,QADd,CAECylB,WAAa/lB,EAAKjF,KAAKuF,QAAQylB,WAAwB,KAJjD,CAMV7lB,QAAS,OACT0oB,cAAe,SACfoC,SAAUrC,mBAAQ,KAClBhoB,MAAOgoB,mBAAQ,IAAM3oB,EAAKwrB,QAAQC,WAEtC1L,EAAa6L,UAAb,IACIjrB,MAAOgoB,mBAAQ,MACZtoB,KAAOC,QAAP,MACIN,EAAKjF,KAAK4vB,cADd,CAEC5E,WAAa/lB,EAAKjF,KAAK4vB,cAAc5E,WAAwB,QAKnEve,EAAQgZ,EAAM,QAAS,CACzBtgB,QAAS,OACT0oB,cAAe,SACfmD,SAAU,IAGRhxB,EAAOylB,EAAM,OAAQ,CACvBtgB,QAAS,QACTqqB,SAAUnqB,aAAUJ,EAAKjF,KAAKwvB,UAC9BzpB,UAAWV,aAAUJ,EAAK6Y,QAAQ1Y,QAClCY,aAAcX,aAAUJ,EAAK6Y,QAAQ1Y,UAGnCqf,EAAQgB,EAAM,QAAD,MACZ,CACC,SACItgB,QAAS,SACNG,KAAOijB,KAAKtjB,EAAKwf,MAAM8D,MAF9B,CAGI0H,SAAUrC,mBAAQ,MACftoB,KAAOF,OAAOH,EAAKwf,MAAMyL,SAJhC,GAKOlL,EAAa6L,UAAUvrB,KAAOijB,KAAKtjB,EAAKwf,MAAM0L,OAAO5H,WAK9D0I,EAAWxL,EAAM,WAAD,MACf,CACC,WACOngB,KAAOF,OAAO,CACb2lB,SAAU9lB,EAAKjF,KAAKuF,QAAQwlB,SAC5B3Y,IAAKnN,EAAKjF,KAAKuF,QAAQ6M,IACvBE,OAAQ,IAJhB,GAMOhN,KAAOC,QAAQ,CAAEylB,WAAa/lB,EAAKjF,KAAKuF,QAAQylB,WAAwB,IAN/E,CAOIplB,MAAO,YAKbsrB,EAAa5rB,KAAOojB,UAAUwE,UAAU,CAC1ChU,QAASjU,EAAKsiB,KAAK5iB,KAGjB4iB,EAAO9B,EAAM,OAAD,IACdtgB,QAAS,SACNG,KAAOijB,KAAK,CACX3lB,KAAMqC,EAAKsiB,KAAKiI,SAChBpD,WAAYnnB,EAAKsiB,KAAK6E,WACtBhB,OAAQnmB,EAAKsiB,KAAK6I,WAElBtrB,MAAOosB,EAAWpsB,QAPR,GASXosB,IAGDC,EAAc1L,EAAM,cAAD,IACrBtgB,QAAS,QACTqqB,SAAUnqB,aAAUJ,EAAKjF,KAAKwvB,WAC3BlqB,KAAOF,OAAOH,EAAKsrB,QAAQL,SAHT,GAIlB5qB,KAAOC,QAAQN,EAAKsrB,QAAQT,YAG7BQ,EAAoBhrB,KAAOojB,UAAUwE,UAAU,CACjDhU,QAAS5U,EAAWM,WAAWwsB,UAG7BC,EAAa5L,EAAM,aAAD,MAAoBngB,KAAOojB,UAAUwE,YAArC,CAAkDnnB,UAAWzB,EAAWqmB,OAAO2G,WAEjGf,EAAU9K,EAAM,UAAD,IACjBtgB,QAAS,SACNG,KAAOijB,KAAK,CACX6C,OAAQnmB,EAAKsrB,QAAQH,WACrBxtB,KAAMqC,EAAKsrB,QAAQf,SAEnB1qB,MAAOG,EAAKsrB,QAAQzrB,QANP,SASVwrB,EATU,CAUbiB,KAAM,CACFC,YAAavsB,EAAKsrB,QAAQ3K,KAAO,QAAK/iB,OAK5CgtB,EAAoBpK,EACtB,oBAD2B,MAGpBngB,KAAOC,QAAQN,EAAK4qB,kBAAkBC,UAHlB,GAIpB2B,+BACExsB,EAAKjF,KAAKuF,QAAQylB,WAAwB/lB,EAAK4qB,kBAAkBC,SAAS9E,YALxD,CAOvB7lB,QAAS,OACTusB,SAAU,OACV1D,WAAY,UACZY,eAAgB,kBAEpB5J,EAAa6L,UAAb,MACOY,+BACExsB,EAAKjF,KAAK4vB,cAAc5E,WAAwB/lB,EAAK4qB,kBAAkBC,SAAS9E,eAKvF2F,EAAYlL,EACd,YADmB,IAGftgB,QAASF,EAAK0rB,UAAUrI,OAAS,OAAS,QAC1C1iB,MAAOgoB,mBAAQ,KAGfloB,WAAY,OACZisB,YAAa,OACbC,UAAW,OACXC,aAAclsB,wBAAa,CAAEb,MAAOG,EAAK0rB,UAAUtG,GAAIzkB,MAAOX,EAAK0rB,UAAUpd,UAC1E,CACC,eAAgB,CACZpO,QAAS,UAIrB6f,EAAa6L,UAAUvrB,KAAOF,OAAO,CAAE4lB,WAAY/lB,EAAKjF,KAAK4vB,cAAc5E,eAGzE8G,EAAuBrM,EACzB,uBAD8B,IAG1BtgB,QAAS,SACNssB,+BAAoBxsB,EAAKjF,KAAKuF,QAAQylB,YAJf,CAO1B6G,aAAclsB,wBAAa,CAAEb,MAAOG,EAAK0rB,UAAUtG,GAAIzkB,MAAOX,EAAK0rB,UAAUpd,WAEjFyR,EAAa6L,UAAUvrB,KAAOF,OAAO,CAAE4lB,WAAY/lB,EAAKjF,KAAK4vB,cAAc5E,cAC3EhG,EAAa6L,UAAb,MACOY,+BAAoBxsB,EAAKjF,KAAK4vB,cAAc5E,eAcvD,MAAO,CACHpgB,OACA6B,QACAzM,OACAqxB,aACA5M,QACAwM,WACA1J,OACA4J,cACAZ,UACAV,oBACAc,YACAoB,aAtBiBtM,EACjB,eACA,CACItgB,QAAS,QAEb6f,EAAa6L,UAAU,CACnB1rB,QAAS,WAiBb2sB,2B,6jBChQD,IAAME,GAA+B3tB,cACxC,SAAC2jB,EAA+CiK,GAC5C,IAAM/J,EAAWzjB,aAAgB,sBAAuBwtB,GAClD3tB,EAAaC,aAAgB0tB,GAC7B9J,EAAaC,aAAgB6J,GAC7BhK,EAAWF,GAAwB,GAAIkK,GAOzCx1B,EAAUyrB,EACV,UACA,CACIgK,UAAU,EACVC,gBAAiB3J,KAAUS,WAAW,IACtCmJ,gBAAiB5J,KAAUS,WAAW,IACtCJ,WAAYC,cAAWC,KACvBkH,SAAU7H,eAAkBiK,aAC5B9B,QAAS,CACLlJ,QAAIxkB,EACJyqB,SAAU,SACVgF,YAAalJ,KAAYmJ,aACzBt3B,KAAM,YAEVu3B,eAAgB,CACZ5K,GAA0BmC,iBAC1BnC,GAA0BiC,yBAC5B1nB,SAAS8lB,EAASxrB,QAAQksB,aACtB,EACA,EACN8J,SAAU,CACN13B,KAAM,WACNkqB,aAASpiB,EACT0C,QAASijB,KAAU1K,QAAQ,IAC3ByK,KAAMC,KAAUD,KAAK,KAEzBF,iBAAaxlB,EACb6vB,gBAAiB,OACjBC,iBAAkB,cAEtB3K,GAGJvrB,EAAUyrB,EACN,UADc,MAGPzrB,EAHO,CAIVosB,WACIpsB,EAAQ21B,gBAAgBttB,OAASrI,EAAQ21B,gBAAgB9F,MACnDxD,cAAWwB,OACXxB,cAAWC,KACrBkH,SAAUxzB,EAAQ+1B,gBAAkB,EAAIrK,EAAWsC,aAAamI,OAASn2B,EAAQwzB,WAErFjI,GAGJvrB,EAAUyrB,EACN,UADc,MAGPzrB,EAHO,CAIV21B,gBAAiB,MACV31B,EAAQ21B,gBADA,CAEXttB,MAAOrI,EAAQosB,aAAeC,cAAWC,KAAOzkB,EAAWoJ,KAAKmlB,gBAAgB/tB,WAAQjC,MAGhGmlB,GAGJ,IAAMvD,EAAQyD,EAAS,QAAS,CAM5BK,KAAMC,KAAUD,KAAK,MAGnBuK,EAAcvD,KAAoBvvB,KAAKuF,QACvCwtB,EAAoBxD,KAAoBvvB,KAAK4vB,cAE7CoD,EAAgD,WAA7Bv2B,EAAQ8zB,QAAQjD,SAAwB,IAAM,EACjE2F,EACFx2B,EAAQ01B,gBAAgBrtB,OAASrI,EAAQ01B,gBAAgB7F,OAAgC,aAAvB7vB,EAAQosB,WACxE/K,EAAUoK,EAAS,UAAW,CAMhC3iB,QAASijB,KAAU1K,QAAQ,CACvB1L,IAAK6gB,EAAwC,EAAzB3uB,EAAWqmB,OAAO/nB,KAAW0B,EAAWqmB,OAAO/nB,KACnE0P,OAAQ2gB,EAAe3uB,EAAWqmB,OAAO/nB,KAAOowB,EAAmB,MASrEE,EAAchL,EAAS,cAAe,CAMxC8C,WAAmC,aAAvBvuB,EAAQosB,WAA4BiK,EAAY9H,WAAa1mB,EAAWqmB,OAAO/nB,KAO3FmoB,SAAUzmB,EAAWqmB,OAAO/nB,KAAO,EAOnCutB,OAAQ,CACJnF,WAAmC,aAAvBvuB,EAAQosB,WAA4BkK,EAAkB/H,WAAa1mB,EAAWqmB,OAAO/nB,QAInGuwB,EAAqBD,EAAYlI,WAAwB,EACzDoI,EAA2BF,EAAY/C,OAAOnF,WAAwB,EAMtErpB,EAAOumB,EAAS,OAAQ,CAC1B3iB,QAASijB,KAAU1K,QAAQ,CACvBkN,WAAYmI,EACZpI,SAAUmI,EAAYnI,WAG1B6E,cAAe,CACX5E,WAAYoI,KAIdC,EAAWnL,EAAS,WAAY,CAMlC3iB,QAASijB,KAAU1K,QAAQ,CACvBkN,WAAYmI,EACZpI,SAAUmI,EAAYnI,WAQ1B6E,cAAepH,KAAU1K,QAAQ,CAC7BkN,WAAYoI,MAmCpB,MAAO,CAAE32B,UAASqhB,UAASoV,cAAazO,QAAO4D,YA/B3BH,EAAS,cAAe,CAMxCK,KAAMC,KAAUD,KAAK,IAOrBhjB,QAASijB,KAAU1K,QAAQ,CACvBkN,WAAYqE,gBAAK,GAAD,OAAIhqB,aAAoD,EAAzCguB,EAAS9tB,QAAQylB,cAChDD,SAAUsE,gBAAK,GAAD,OAAIhqB,aAAUguB,EAAS9tB,QAAQwlB,YAC7C3Y,IAAK3V,EAAQg2B,SAASxN,SAAqC,aAA1BxoB,EAAQg2B,SAAS13B,KAAsB,OAAI8H,IAQhF+sB,cAAepH,KAAU1K,QAAQ,CAC7BkN,WAAYqI,EAAS9tB,QAAQylB,eAMuBrpB,OAAM0xB,WAAUC,iBAFnDlL,eAAkBpD,eAAeuO,kBAMrDC,GAA6BnvB,cAAc,SAAC2jB,GAAkD,YACjGvC,EAAQiH,aAAa,uBACrBpoB,EAAaC,eACbU,EAAO+sB,GAA6BhK,GAEpCpd,EAAO6a,EAAM,MACZngB,KAAO2jB,WAAP,UAAkBhkB,EAAKxI,QAAQ01B,uBAA/B,QAAkD,MAInDxB,EAAYlL,EAAM,YAAa,IAE/BgO,EAA0B,MACzBnuB,KAAOC,QAAQ,CACdwlB,SAAU9lB,EAAKiuB,YAAYnI,WAFN,GAIO,aAA5B9lB,EAAKxI,QAAQosB,WACX4I,+BAAoBlC,KAAoBM,kBAAkBC,SAAS9E,YACnEyG,+BAAoBxsB,EAAKiuB,YAAYlI,aAGzC0I,EAAoBjO,EAAM,oBAAD,MACxBngB,KAAOC,QAAQN,EAAK6Y,QAAQvY,WAG7BouB,EAAYlO,EAAM,YAAD,MAChB,CACC,KAAM,CACFwK,SAAU5qB,aAAUJ,EAAKxI,QAAQwzB,UACjC7qB,OAAQ,SACRQ,MAAO,WAKbqf,EAAUQ,EAAM,UAAWgO,GAE3BG,EAAkBnO,EAAM,kBAAD,MACtBgO,EADsB,GAEtBnuB,KAAOC,QAAQ,CACd6M,IAAK,EACL4Y,WAAY/lB,EAAKiuB,YAAYlI,eAI/B2B,EAA4B,WAC9B,OAAQ1nB,EAAKxI,QAAQosB,YACjB,KAAKC,cAAWC,KACZ,MAAO,GACX,KAAKD,cAAW+B,OACZ,WACIhN,aAAcvZ,EAAWO,OAAOmkB,QAC7B1jB,KAAOT,UAElB,KAAKikB,cAAWwB,OACZ,WACIzM,aAAcvZ,EAAWO,OAAOmkB,QAC7B6D,eAAeC,SAE1B,QACI,MAAO,IAfe,GAmB5BnrB,EAAO8jB,EACT,OADc,MAGPngB,KAAO2jB,WAAWhkB,EAAKxI,QAAQ21B,iBAHxB,CAIVjtB,QAAS,OACT6oB,WAAY,UACZY,eAAc,UAAE3pB,EAAKxI,QAAQk2B,wBAAf,QAAmC,aACjDjB,SAAU,QACPpsB,KAAOC,QAAQN,EAAKtD,KAAK4D,UAEhConB,EACA1nB,EAAKquB,iBAAiBhuB,KAAOC,QAAQN,EAAKtD,KAAKiuB,iBAG7CiE,EAAuB,CACzB9F,KAAM,EACN+F,UAAWlG,mBAAQ,IAAM3oB,EAAKxI,QAAQ+1B,iBAGpCa,EAAW5N,EAAM,WAAYoO,GAE7BE,EAAiBtO,EAAM,iBAAD,MACrBoO,EADqB,CAExBrJ,SAAUnlB,aAAU0iB,KAA0BwC,OAAOC,aAGnDwJ,EAAkBvO,EACpB,kBADyB,MAGlBngB,KAAOC,QAAQN,EAAKouB,SAAS9tB,SAHX,CAIrBgO,OAAQqa,mBAAQ,OAEpB3oB,EAAKquB,iBAAiBhuB,KAAOC,QAAQN,EAAKouB,SAASzD,iBAGjDqE,EAA0B5vB,cAAc,SAAC4rB,GAAD,OAC1CxK,EAAM,0BAA2B,CAC7BwK,SAAUA,EAAW,EAAIA,EAAW,eAItCiE,EAAmBzO,EACrB,mBAD0B,IAGtBtgB,QAAS,OACTypB,eAAgB,gBAChBZ,WAAY,UACT1oB,KAAOC,QAAQ,CACdylB,WAAY/lB,EAAKtD,KAAK4D,QAAQylB,cAGtC/lB,EAAKquB,iBAAiBhuB,KAAOC,QAAQN,EAAKtD,KAAKiuB,iBAG7CnL,EAAQgB,EACV,QADe,IAGXsI,KAAM,GACHzoB,KAAOijB,KAAKtjB,EAAKwf,MAAM8D,MAJf,GAKRjjB,KAAOC,QAAQ,CACdylB,WAAY/lB,EAAKouB,SAAS9tB,QAAQylB,aAN3B,CAQXsD,UAAWrpB,EAAKxI,QAAQi2B,kBAE5BztB,EAAKquB,iBACDhuB,KAAOC,QAAQ,CACXylB,WAAY/lB,EAAKouB,SAASzD,cAAc5E,eAK9CyH,EAAWhN,EAAM,WAAD,MACfngB,KAAOijB,KAAP,MACItjB,EAAKxI,QAAQg2B,SAASlK,KAD1B,CAECzjB,MAAOG,EAAKxI,QAAQg2B,SAASlK,KAAKzjB,MAC5BG,EAAKxI,QAAQg2B,SAASlK,KAAKzjB,MACI,aAA/BG,EAAKxI,QAAQg2B,SAAS13B,KACtBuJ,EAAWM,WAAWwsB,aACtBvuB,EACND,KAAMqC,EAAKxI,QAAQg2B,SAASlK,KAAK3lB,KAC3BqC,EAAKxI,QAAQg2B,SAASlK,KAAK3lB,KACI,aAA/BqC,EAAKxI,QAAQg2B,SAAS13B,KACtB,GACA,GACNqwB,OAAQnmB,EAAKxI,QAAQg2B,SAASlK,KAAK6C,OAASnmB,EAAKxI,QAAQg2B,SAASlK,KAAK6C,OAAS,IAChFe,UAAWlnB,EAAKxI,QAAQg2B,SAASlK,KAAK4D,UAChClnB,EAAKxI,QAAQg2B,SAASlK,KAAK4D,UACI,aAA/BlnB,EAAKxI,QAAQg2B,SAAS13B,KACtB,iBACA8H,EACNsxB,cAAelvB,EAAKxI,QAAQg2B,SAASlK,KAAK4L,cACpClvB,EAAKxI,QAAQg2B,SAASlK,KAAK4L,cACI,aAA/BlvB,EAAKxI,QAAQg2B,SAAS13B,KACtB,OACA8H,KAvBQ,GAyBfyC,KAAOC,QAAP,MACIN,EAAKxI,QAAQg2B,SAASltB,QAD1B,CAECylB,WAA2D,EAA9C/lB,EAAKouB,SAAS9tB,QAAQylB,WACnC5Y,IAAG,UAAEnN,EAAKxI,QAAQg2B,SAASltB,QAAQ6M,WAAhC,QAAuC,GAC1CE,OAAM,UAAErN,EAAKxI,QAAQg2B,SAASltB,QAAQ+M,cAAhC,QAA0C,MA7BlC,CA+BlBgc,UAAWrpB,EAAKxI,QAAQi2B,mBAGtBrK,EAAc5C,EAChB,cADqB,MAGdngB,KAAOC,QAAQN,EAAKojB,YAAY9iB,SAHlB,GAIdD,KAAOijB,KAAKtjB,EAAKojB,YAAYE,MAJf,CAKjB+F,UAAWrpB,EAAKxI,QAAQi2B,kBAE5BztB,EAAKquB,iBAAiBhuB,KAAOC,QAAQN,EAAKojB,YAAYuH,iBAEpDW,EAAU9K,EAAM,UAAD,MACd,CACC,WACOngB,KAAOF,OAAO,CACb4lB,WAAwC,aAA5B/lB,EAAKxI,QAAQosB,WAA4B,EAAI5jB,EAAKouB,SAAS9tB,QAAQylB,cAGvF,gBAAiB,CACbtF,WAAY,WAgBxB,MAAO,CACH9a,OACA+lB,YACA+C,oBACAC,YACA1O,UACA2O,kBACAQ,eAlBmB3O,EAAM,iBAAD,MACrBgO,EADqB,CAExBxF,WAAY,EACZloB,WAAYd,EAAKiuB,YAAYnI,UAHL,0BAKf6I,EALe,QAKS,CACzB7tB,UAAW,MAanB0e,QACAgO,WACApK,cACA6L,mBACA3D,UACA5uB,OACA0xB,WACAU,iBACAC,kBACAC,8B,8CChbD,SAASI,GAAevzB,GAA6B,QAClDrE,EAAUsrB,GAAwBjnB,EAAMrE,SAASA,QACjDoiB,EAAU4N,GAAsB3rB,EAAMrE,SACtC63B,EAAoB,CAAC1M,GAA0BmC,kBAAkB5nB,SAAS1F,EAAQksB,aAClF4L,EAAQ,UAAGzzB,EAAMyzB,gBAAT,QAAqB93B,EAAQgtB,gBACrC+K,EAAO,UAAG1zB,EAAM0zB,eAAT,QAAoB/3B,EAAQ+sB,eACnCiL,EAAW3zB,EAAMkmB,QAAUvqB,EAAQ0I,QAAQ6hB,OAC3C0N,EAAe,CAAC9M,GAA0BsC,mBAAmB/nB,SAAS1F,EAAQksB,aAE9EgM,GADS7zB,EAAMorB,aACD0I,gBAEpB,OACI,kBAACxN,GAAA,EAAD,CAAWC,GAAIvmB,EAAMumB,GAAI/c,UAAWuU,EAAQjU,MACxC,yBAAKN,UAAWuU,EAAQiP,qBACnB,CACGlG,GAA0BiC,wBAC1BjC,GAA0BmC,kBAC5B5nB,SAAS1F,EAAQksB,cACf,yBAAKre,UAAWuU,EAAQoQ,uBACpB,yBAAK3kB,UAAWuU,EAAQkQ,gBACnBwF,GAAY,yBAAKjqB,UAAWuU,EAAQyN,MAAOpd,IAAKqlB,EAAUM,IAAK/zB,EAAM7F,SAIjF,CAAC2sB,GAA0BmC,kBAAkB5nB,SAAS1F,EAAQksB,cAC3D,yBAAKre,UAAWuU,EAAQsP,kBAG3BvG,GAA0BgB,yBAA2BnsB,EAAQksB,aAC1D,yBAAKre,UAAWuU,EAAQoM,eACnBuJ,GAAW,yBAAKlqB,UAAWuU,EAAQ+G,KAAM1W,IAAKslB,EAASK,IAAK/zB,EAAM7F,QAI1Eq5B,EAAoB,kBAACQ,GAA8Bh0B,GAAY,kBAACi0B,GAA4Bj0B,KAE/F4zB,KAAkBJ,GAAqBG,IACrC,yBAAKnqB,UAAW2U,KAAW0V,EAAY/pB,KAAMiU,EAAQ0G,QAChDkP,GAAY,kBAACjN,GAAA,EAAD,CAAYR,OAAQlmB,EAAMkmB,UAI9C,CAACY,GAA0BsC,mBAAmB/nB,SAAS1F,EAAQksB,cAC5D,uBAAGqM,KAAMl0B,EAAMjC,IAAKyL,UAAWuU,EAAQqN,cAClCprB,EAAMorB,aACP,kBAAC,KAAD,QAOpB,SAAS6I,GAAwBj0B,GAC7B,IAAMrE,EAAUsrB,GAAwBjnB,EAAMrE,SAASA,QACjDoiB,EAAU4N,GAAsB3rB,EAAMrE,SAE5C,OACI,yBAAK6N,UAAWuU,EAAQoG,SACpB,kBAACgQ,GAAA,EAAD,CAASC,MAAO,EAAG5qB,UAAWuU,EAAQ5jB,MACjC6F,EAAM7F,MAEV,CACG2sB,GAA0BuN,kBAC1BvN,GAA0BiC,wBAC1BjC,GAA0BgB,uBAC1BhB,GAA0BsC,mBAC5B/nB,SAAS1F,EAAQksB,cACf,kBAACyM,GAAA,EAAD,CAAeC,aAAc,IAAKvS,IAAK,MAAOxY,UAAWuU,EAAQwJ,aAC5DvnB,EAAMunB,cAO3B,SAASyM,GAA0Bh0B,GAA6B,QACtDrE,EAAUsrB,GAAwBjnB,EAAMrE,SAASA,QACjDoiB,EAAU4N,GAAsB3rB,EAAMrE,SACtC64B,EAAY,UAAG74B,EAAQysB,gBAAX,aAAG,EAAkB/B,UAEvC,OACI,oCACI,yBAAK7c,UAAWuU,EAAQ0P,kBAClB9xB,EAAQxB,KAAKqtB,QACX,kBAAC2M,GAAA,EAAD,CAASC,MAAO,EAAG5qB,UAAWuU,EAAQgQ,cACjC/tB,EAAM7F,MAGf,6BACI,0BAAMqP,UAAWirB,aAA2B,UAAC94B,EAAQysB,gBAAT,aAAC,EAAkBC,aAAc7lB,YAAEgyB,O,iCCtG5F,SAASE,GAAoB10B,GAAkC,wBAC5D20B,EAAM,UAAG30B,EAAM20B,cAAT,SACNh5B,EAAUu1B,GAA6BlxB,EAAMrE,SAASA,QACtDoiB,EAAU2U,GAA2B1yB,EAAMrE,SAE3Ci5B,EAAehgB,iBAA8B,MAC7CigB,EAAmBliB,aAAWiiB,GAE9B/zB,EAAO8zB,EACT,yBAAKnrB,UAAWuU,EAAQld,MACnBqF,IAAM4uB,SAASp4B,IAAIsD,EAAM0G,UAAU,SAAC0I,EAAOpO,GACxC,OACI,yBACI4R,IAAW,IAAN5R,EAAU4zB,OAAe7yB,EAC9ByH,UAAW2U,KACPJ,EAAQwU,SAIF,IAANvxB,GAAW+c,EAAQoV,wBAAwB0B,EAAiB/vB,QAEhE9F,IAAKgC,GAEL,yBAAKwI,UAAWuU,EAAQmV,iBAAkB9jB,QAM1DpP,EAAM0G,SAGJquB,EAAgB,CAAC/M,cAAW+B,OAAQ/B,cAAWwB,QAAQnoB,SAAS1F,EAAQosB,YAExEiN,GAAgBr5B,aAAA,YAAAA,EAAS8zB,eAAT,eAAkBlJ,KACpC,kBAAC0O,GAAA,EAAD,CAAc1O,GAAI5qB,aAAF,YAAEA,EAAS8zB,eAAX,aAAE,EAAkBlJ,GAAI2O,UAAWv5B,EAAQ8zB,QAAQ+B,YAAahoB,UAAWuU,EAAQ0R,SAAnG,UACK9zB,aADL,YACKA,EAAS8zB,eADd,aACK,EAAkBt1B,YADvB,QAC+BqI,YAAE,aAI/BmvB,GAAW,UAAA3xB,EAAMrE,eAAN,yBAAeg2B,gBAAf,eAAyBxN,UACtC,wBAAI3a,UAAWuU,EAAQ4T,UAAvB,UAAkC3xB,EAAMrE,eAAxC,uBAAkC,EAAeg2B,gBAAjD,aAAkC,EAAyBxN,SAG3DA,EACA,yBAAK3a,UAAWuU,EAAQ8U,WACI,aAAvBl3B,EAAQosB,YACL,wBAAIve,UAAW2U,KAAW8R,KAAkBJ,UAAW9R,EAAQ8R,aAEnE,yBAAKrmB,UAAW2U,MAAYxiB,EAAQy1B,UAAYrT,EAAQ6U,oBACpD,yBAAKppB,UAAWuU,EAAQoG,SACO,aAA1BxoB,EAAQg2B,SAAS13B,MAAuB03B,EACzC,yBAAKnoB,UAAWuU,EAAQqV,kBACnBpzB,EAAM2jB,OACH,kBAACwQ,GAAA,EAAD,CAAS3qB,UAAWuU,EAAQ4F,MAAOwR,cAAe,GAC7Cn1B,EAAM2jB,OAGe,QAA7BhoB,EAAQ8zB,QAAQjD,UAAsBwI,GAEhB,aAA1Br5B,EAAQg2B,SAAS13B,MAAuB03B,GACxC,UAAA3xB,EAAMrE,eAAN,eAAe4rB,cACZ,yBAAK/d,UAAWuU,EAAQwJ,aAAcvnB,EAAMrE,QAAQ4rB,cAEtDwN,GAAiBl0B,GAEtBk0B,GAAiB,yBAAKvrB,UAAWuU,EAAQ+U,iBAAkBjyB,GAC3Dm0B,GAA8C,WAA7Br5B,EAAQ8zB,QAAQjD,UAC9B,yBAAKhjB,UAAWuU,EAAQuV,gBACpB,yBAAK9pB,UAAWuU,EAAQqV,kBAAmB4B,GAAqB,OAWpF,OAJKr5B,EAAQy1B,WACTjN,EAAU,kBAACiR,GAAA,EAAD,CAAWC,YAAU,GAAElR,IAG9B,yBAAK3a,UAAWuU,EAAQjU,MAAOqa,G,0kBC1FnC,IAAMmR,GAAsB/xB,cAAc,SAAC4tB,GAC9C,IAAMvtB,EAAgBD,aAAgB,aAAcwtB,GAC9C3tB,EAAaC,aAAgB0tB,GAO7BoE,EAAM3xB,EAAc,MAAO8jB,KAAU6N,IAAI,KAEzCC,EAAmC5xB,EAAc,QAAS,IAC1DsiB,EAAwCtiB,EAAc,SAAU,IAKhE+f,EAAQ/f,EAAc,QAAS,CAKjC6jB,KAAMC,KAAUD,KAAK,CACjB3lB,KAAM0B,EAAWunB,MAAMjpB,KAAK2zB,SAC5BnL,OAAQ9mB,EAAWunB,MAAMC,QAAQiE,KACjCjrB,MAAOR,EAAWM,WAAWD,KAMjCmZ,QAAS0K,KAAU1K,QAAQ,CACvBxL,OAAQ,OAOVkkB,EAAW9xB,EAAc,WAAY,CAUvC+xB,eAAgBC,KAAe3N,KAO/B4N,oBAAqBryB,EAAWO,OAAOC,MAMvC8xB,oBAAqBtyB,EAAWO,OAAOe,QAGrCixB,EAAcL,EAASC,iBAAmBC,KAAe7L,OACzDiM,EAAYN,EAASC,iBAAmBC,KAAeK,UACvDC,EAAWtyB,EAAc,WAAD,MACvB8xB,EADuB,CAM1BjO,KAAMC,KAAUD,KAAK,CACjB3lB,KAAM0B,EAAWunB,MAAMjpB,KAAK4tB,OAC5BpF,OAAQ9mB,EAAWunB,MAAMC,QAAQuE,SAOrC4G,QAASzO,KAAUE,UAAU,CACzBxP,QAAS5U,EAAWM,WAAWD,GAC/B6oB,UAAWlpB,EAAWM,WAAWsyB,iBAUrC3xB,QAASijB,KAAU1K,QAAQ,CACvBiN,SAAU+L,EAAY,GAAK,EAC3B9L,WAAY6L,GAAeC,EAAY,GAAK,IAShDhZ,QAAS0K,KAAU1K,QAAQ,CACvBiN,SAAU8L,EAAc,EAAI,OA6BpC,MAAO,CACHpS,QACAuS,WACAG,cA5BkBzyB,EAAc,gBAAiB,CAMjD6jB,KAAM,MACCyO,EAASzO,KADZ,CAEAzjB,MAAOR,EAAWM,WAAWD,OAqBjCsiB,MAXUviB,EAAc,QAAS,CACjC6jB,KAAM,MACCyO,EAASzO,KADZ,CAEAzjB,MAAOR,EAAWM,WAAWD,OASjC0xB,MACAC,QACAtP,a,kPC3ID,IAAMoQ,GAAe/yB,cAAc,SAACgzB,EAAmCpF,GAC1E,IAAMvtB,EAAgBD,aAAgB,MAAOwtB,GAOvCx1B,GANa8H,eAMUG,EACzB,UACA8jB,KAAU6N,IAAI,CACVxN,WAAYC,cAAWC,KACvBE,WAAYT,KAAUS,WAAW,MAErCoO,IAOExyB,EAASH,EAAc,SAAU8jB,KAAU3jB,OAAO,KAElDyyB,EAAe,CAACxO,cAAWwB,OAAQxB,cAAW+B,QAAQ1oB,SAAS1F,EAAQosB,YAc7E,MAAO,CACHpsB,UACAoI,SACAU,QAXYb,EACZ,UACA8jB,KAAU1K,QAAQ,CACdkN,WAAYsM,EAAe,GAAK,EAChCvM,SAAUuM,EAAe,GAAK,SAW7BC,GAAalzB,cAAc,SAACgzB,GACrC,IAAMpyB,EAAOmyB,GAAaC,GAqB1B,MAAO,CACHzsB,KArBU8hB,aAAa,aAcdjH,C,2VAAM,IAZG,WAClB,OAAQxgB,EAAKxI,QAAQosB,YACjB,KAAKC,cAAW+B,OACZ,OAAOvlB,KAAOT,OAAOI,EAAKJ,QAC9B,KAAKikB,cAAWwB,OACZ,OAAOuC,eAAeC,QAC1B,KAAKhE,cAAWC,KAChB,QACI,MAAO,IAKZyO,GADW,GAEXlyB,KAAO2jB,WAAWhkB,EAAKxI,QAAQwsB,YAFpB,GAGX3jB,KAAOC,QAAQN,EAAKM,eCpElBkyB,GAAMzwB,IAAM0wB,YAAW,SAAaC,EAAgBjkB,GAAgC,MACrFjX,EAAsBk7B,EAAtBl7B,QAAYqE,EADyE,aAC/D62B,EAD+D,aAEvF9Y,EAAU0Y,GAAU,UAAC96B,SAAD,QAAY,IAEtC,OAAO,uCAASqE,EAAT,CAAgB4S,IAAKA,EAAKpJ,UAAW+O,cAAGwF,EAAQjU,KAAM9J,EAAMwJ,iB,6jBCNhE,IAAMstB,GAAoBvzB,cAAc,WAC3C,IAAMY,EAAOmxB,KACP3Q,EAAQiH,aAAa,cAErB9hB,EAAO6a,EAAM,CACf5gB,OAAQ,SAGN4f,EAAQgB,EAAM,QAAD,MACZngB,KAAOijB,KAAKtjB,EAAKwf,MAAM8D,MADX,GAEZjjB,KAAOF,OAAOH,EAAKwf,MAAM3G,WAG1B+Z,EAAOpS,EAAM,OAAQ,IAEnBgR,EAAmBxxB,EAAK+xB,SAAxBP,eA0CR,MAAO,CACH7rB,OACA6Z,QACAoT,OACAb,SA5CavR,EACb,WADkB,IAGd7f,MAAO,QACJN,KAAOC,QAAQN,EAAK+xB,SAASlZ,UAEpC2Y,IAAmBC,KAAeK,WAAa,CAC3ClF,aAAclsB,wBAAa,CACvBC,MAAOX,EAAK+xB,SAASJ,oBACrB9xB,MAAOG,EAAK+xB,SAASL,sBAEzB,eAAgB,CACZ9E,aAAc,UAiCtBsF,cA5BkB1R,EAClB,gBADuB,IAGnB7f,MAAO,OACPT,QAAS,OACTypB,eAAgB,gBAChBZ,WAAY,UACT1oB,KAAOC,QAAQN,EAAK+xB,SAASzxB,SAPb,GAQhBD,KAAOijB,KAAKtjB,EAAKkyB,cAAc5O,OAEtCkO,IAAmBC,KAAe7L,QAC9BvlB,KAAOT,OAAO,CACVe,MAAOX,EAAK+xB,SAASJ,oBACrB9xB,MAAOG,EAAK+xB,SAASL,uBAgB7B1P,MAZUxB,EAAM,QAAD,IACfqS,WAAY,SACZxJ,UAAW,SACRhpB,KAAOijB,KAAKtjB,EAAKgiB,MAAMsB,YC5C3B,SAASwP,GAAej3B,GAC3B,IAAM+d,EAAU+Y,KACVI,EAAY5B,KACZ6B,EAAQ5Z,aAAY,kBAClBoG,EAAiB3jB,EAAjB2jB,MACFyT,EADmBp3B,EAAVw1B,MACYpzB,QAAO,SAACqkB,GAE/B,QADoB,aAAcA,GAAQA,EAAK4Q,aAInD,OACI,kBAAC,GAAD,CAAK17B,QAASu7B,EAAU3B,KACpB,yBAAK/rB,UAAW2U,KAAWJ,EAAQjU,MAAOoV,kBAAiBiY,GACvD,wBAAI3tB,UAAW2U,KAAWJ,EAAQ4F,MAAO,UAAWhhB,GAAIw0B,GACnDxT,GAEL,wBAAIna,UAAW2U,KAAWJ,EAAQgZ,KAAM,WACnCK,EACGA,EAAa16B,KAAI,SAAC+pB,GAAD,OACb,kBAAC6Q,GAAD,CAAWt4B,IAAKynB,EAAK9jB,GAAI40B,KAAM9Q,EAAK1oB,IAAK4lB,MAAO8C,EAAKtsB,KAAMgsB,MAAOM,EAAKN,WAG3E,wCAcxB,SAASmR,GAAUt3B,GACf,IAAM+d,EAAU+Y,KACRS,EAAiCv3B,EAAjCu3B,KAAM5T,EAA2B3jB,EAA3B2jB,MAAOwC,EAAoBnmB,EAApBmmB,MAAoBnmB,EAAbq3B,SAC5B,OACI,wBAAI7tB,UAAW2U,KAAWJ,EAAQmY,WAC9B,kBAAC5P,GAAA,EAAD,CAAW9c,UAAW2U,KAAWJ,EAAQsY,eAAgB9P,GAAIgR,GACxD/0B,YAAEmhB,GACO,MAATwC,GAAiB,0BAAM3c,UAAW2U,KAAWJ,EAAQoI,QAASA,K,cCnD/EqR,YAAgB,QAASvc,GCOrB1Y,aAAQ,WACJk1B,IAAcC,mBAAmB,CAC7B14B,IAAK,cACL7E,KAAMqI,YAAE,eACRm1B,KAAM,EACN7S,KAAM,kBAAC,IAAD,MACN8S,iBAAkB,WACd,MAAO,CACH,cACA,iBACA,kBACA,qBACA,yBACA,4BACA,iBAGRC,qBAAsB,SAAC33B,GACnB,IAAMgZ,E,2VAA4C,IAC3ChZ,GAsBP,OAnBIA,EAAK6kB,cAAuD,iBAAhCllB,SAASK,EAAK6kB,gBAC1C7L,EAAM4e,YAAc,CAAC,WACrB5e,EAAMrO,MAAQ,OACdqO,EAAM6e,UAAW,GAGjB7e,EAAMuK,cACNvK,EAAM4I,KAAO5I,EAAMuK,YAAY/mB,KAAI,SAACslB,GAAD,uBAAcA,aAAd,EAAcA,EAAKC,eAAnB,QAA8BD,aAA9B,EAA8BA,EAAKgW,WAAS51B,OAAOhD,OAGtF8Z,EAAMiK,iBACNjK,EAAM+e,YAAc/e,EAAMiK,gBAAgBzmB,KAAI,SAAC2f,GAAD,OAAYA,EAAOhd,gBAE1D6Z,EAAMiK,uBACNjK,EAAMgf,gBACNhf,EAAMgf,iBACbhf,EAAMsH,WAAatH,EAAMgf,eAAe74B,OAGrC6Z,GAEXif,eAAgB,WACZ,MAAO,CAAC,aAAc,YAE1BC,eAAgBjW,GAChBkW,qBAAsB,WAClB,MAAO,CACH9U,oBAAoB,EACpBD,wBAAwB,EACxBE,2BAA2B,EAC3B7iB,MAAOJ,IAAQR,IAAwBM,UAAU3D,KAAI,SAACzC,GAAD,OAAUA,EAAKwG,aAG5E63B,cAAe,WACX,IAAMC,EAAQC,cAad,OAZIf,IAAcgB,sBACdF,EAAMp5B,KACF,CACIglB,QAAS,MACT9kB,MAAO,UAEX,CACI8kB,QAAS,MACT9kB,MAAO,SAIZk5B,GAEXG,eAAgB,kBAAM,GACtBC,gBAAiBC,KACjBC,kBAAmB,SAAC34B,GAAD,OACfA,EAAK6kB,cAA6C,iBAAtB7kB,EAAK6kB,cACrC+T,kBAAmB,SAAC54B,GAAD,OAA8CA,EAAK6kB,cACtEgU,oBAAqBrV,GACrBsV,wBAAyBC,GACzBC,yBAA0B,kBAAM,KAGpCzB,IAAc0B,WAAW,CACrBv4B,MAAO4B,YAAE,eACTsiB,KAAM,kBAAC,IAAD,MACNsU,WAAY,aACZn/B,KAAM,eAGVw9B,IAAc0B,WAAW,CACrBv4B,MAAO4B,YAAE,WACTsiB,KAAM,kBAAC,IAAD,MACNsU,WAAY,UACZn/B,KAAM,eDhGlBo/B,aAAa,cEcN,SAAoBr5B,GACvB,IAAMs5B,EAAcrS,GAAwBjnB,EAAMs5B,aAAa39B,QACzD49B,EAAmBrI,GAA6BlxB,EAAMu5B,kBAAkB59B,QACxE69B,EAAmB9G,GAA2B1yB,EAAMu5B,kBAEtD5tB,EAAQ3L,EAAMy5B,SAEdz5B,EAAM05B,cAAgB/tB,EAAM9O,OAASmD,EAAM05B,eAC3C/tB,EAAQA,EAAMxN,MAAM,EAAG6B,EAAM05B,eAGjC,IAAIC,EAAuB,EAY3B,MAVI,CACI7S,GAA0BmC,iBAC1BnC,GAA0BgB,uBAC1BhB,GAA0BiC,yBAC5B1nB,SAASi4B,EAAYzR,cACvB7nB,EAAMy5B,SAAS58B,OAAS08B,EAAiB7H,iBAEzCiI,EAAuBJ,EAAiB7H,eAAiB1xB,EAAMy5B,SAAS58B,QAIxE,kBAAC63B,GAAD,CAAqB/4B,QAASqE,EAAMu5B,iBAAkB5V,MAAO3jB,EAAM2jB,OAC9DhY,EAAMjP,KAAI,SAACwC,EAAM8B,GACd,OAAO,kBAACuyB,GAAD,aAAgBv0B,IAAKgC,GAAO9B,EAA5B,CAAkCvD,QAASqE,EAAMs5B,kBAE3D,aAAI,IAAIt3B,MAAM23B,IAAuBj9B,KAAI,SAACk9B,EAAG54B,GAC1C,OAAO,yBAAKhC,IAAK,UAAYgC,EAAGwI,UAAWgwB,EAAiBvG,uBF3CrC,CAAE4G,WAAW,IACpDR,aAAa,cGLN,SAAoBr5B,GAAe,IAC9Bw1B,EAAUF,KAAVE,MAGFsE,EAAkBpe,mBAAQ,WAAM,QAC5BwK,EAAM,UAAG6T,sBAAH,uBAAG,EAAqBC,kBAAxB,aAAG,EAAiC9T,OAChD,IAAKA,EACD,OAAOsP,EAEX,cAA2BtyB,OAAO+2B,QAAQzE,GAA1C,eAAkD,6BAAtCx2B,EAAsC,KACxCmnB,EAAK,UAAGD,EADgC,KACnBvjB,WAAhB,QAAuB,KACpB,OAAVwjB,IACAqP,EAAMx2B,GAAKmnB,MAAQA,GAG3B,OAAOqP,IACR,CAACA,IAEJ,OAAO,kBAACyB,GAAD,CAAgBtT,MAAO3jB,EAAM2jB,MAAO6R,MAAOsE,MHbf,CAAED,WAAW,IAEpDK,KAAsBC,kBAAkB,IIHxC,qFACkC,GADlC,gCAM0B,SAAO96B,GAAP,+BAAA5E,EAAA6e,OAAA,uDAAsB3d,EAAtB,+BAAgC,GAC5CkqB,EADY,IAEd3M,MAAO7Z,EACPma,OAAQ,CAAC,cAAe,SACxB4gB,MAAO,GACPrC,UAAU,GACPp8B,GANW,WAAAlB,EAAA,MAQqC4mB,IAAM/Y,IAAN,UAAqB,CAAEiR,OAAQsM,KARpE,cAQZnM,EARY,yBASXA,EAASpQ,KAAK5M,KAAI,SAACiD,GAAW,QAC3B2J,EAA0B,CAC5Bud,OAAM,UAAElnB,EAAO4gB,mBAAT,QAAwB,GAC9BpmB,KAAMwF,EAAOxF,KACbkgC,YAAW,UAAE16B,EAAO06B,mBAAT,QAAwB16B,EAAO26B,aAC1CC,OAAQ56B,EAAO66B,WACfz8B,IAAK4B,EAAO5B,IACZ9D,KAAM0F,EAAO1F,MAEjB,MAAO,CACH2G,MAAOjB,EAAOxF,KACdkF,MAAOM,EAAOxF,KACdmP,OACArP,KAAM0F,EAAO1F,KACb8D,IAAK4B,EAAO5B,SAvBF,wCAN1B,uCAqCkC08B,KAAUjuB,KAAKkuB,YAAa,MArC9D,iCA+C0B,SAACxhB,GAAgC,IAAjBvd,EAAiB,uDAAP,GAC5C,MAAc,KAAVud,EACOpL,QAAQ3K,QAAQ,IAGpB,EAAKw3B,oBAAoBzhB,EAAOvd,MApD/C,kCAuD2B,SAACud,GACpB,IAAM0hB,EAAiBC,KAA0B,QAAU,SAC3D,OAAOC,YAAU,WAAD,OAAYF,EAAZ,YAA8B1hB,IAAS,QCtE3DlQ,SAASgB,iBAAiB,WAAW,SAACG,GAClC,IAAM1I,EAAS0I,EAAM1I,OACe,WAAhCA,EAAOmH,aAAa,SAAwC,UAAfuB,EAAMnH,MAAmC,UAAfmH,EAAMnH,OAC7EmH,EAAMG,iBACN7I,EAAOs5B,a,oFCNZ,SAAS51B,EAAO61B,GAAiD,2BAA5BC,EAA4B,iCAA5BA,EAA4B,kBACpEC,YAAO,eACFF,EAAWC,EAAQv+B,IAAIy+B,S,gCCLhC,kBAuBAC,IAA0BC,YAAS,iB,iCCvBnC,yLAqCIC,GAAc,EACZC,EAAqB,GAErBC,EAAoB,uBAEtBC,EAAmC,SAACz7B,GACpC,OAAO,kBAAC,IAAM07B,SAAP,KAAiB17B,EAAM0G,WAG3B,SAASi1B,EAAyBj0B,GACrC+zB,EAAgB/zB,EACZ4zB,GAEAM,IASR,SAASC,IACL,OACI,6BACI,kBAACJ,EAAD,KACKF,EAAQ7+B,KAAI,SAACo/B,EAAQ96B,GAClB,OACI,kBAAC,IAAM06B,SAAP,CAAgB18B,IAAKgC,GAChB+6B,IAASC,aAAaF,EAAOG,UAAWH,EAAOr6B,cAS5E,SAASm6B,EAAch2B,GACnB01B,GAAc,EAEd,IAAIzI,EAAY7pB,SAASgE,eAAewuB,GACnC3I,KACDA,EAAY7pB,SAASC,cAAc,QACzBtG,GAAK64B,EACfxyB,SAAS4D,KAAKQ,YAAYylB,IAG9BkJ,IAASG,OAAO,kBAACL,EAAD,MAAmBhJ,EAAWjtB,GAiB3C,SAASu2B,EACZF,EACAx6B,EACAmE,EACAjK,GAEA,GAAIA,aAAJ,EAAIA,EAASygC,oBAAqB,CAQ9B,OAJIzgC,aAAJ,EAAIA,EAAS0gC,sBACTN,IAASO,uBAAuB76B,QAEpC86B,GANiB,WACbR,IAASG,OAAO,kBAACT,EAAD,KAAgBQ,GAA4Bx6B,EAAQmE,MAS5E,IACI42B,EADAC,EAAah7B,EAMjB,IAJI9F,aAAJ,EAAIA,EAAS+gC,iBACTj7B,EAAO6L,UAAY,IAGnB3R,GAAWA,EAAQk+B,UAAW,CAC9B,IAAMhH,EAAY7pB,SAASC,cAAc,QACzCuzB,EAAmB3J,EACnBpxB,EAAOk7B,cAAehtB,aAAakjB,EAAWpxB,GAC9Cg7B,EAAa5J,EAEjB0I,EAAQp8B,KAAK,CAAEsC,OAAQg7B,EAAYR,cAEnCL,GAAc,WACNY,IACA/6B,EAAOwN,SACHutB,EAAiBI,oBACjBJ,EAAiBG,cAAehtB,aAAa6sB,EAAiBI,kBAAmBJ,GACjFA,EAAiBvtB,SACjBxN,EAAOwN,WAGfrJ,GAAYA,OASb,SAASi3B,EAAmB5f,EAA0BrX,EAAuBjK,GAChF,GAAKshB,EAAWpgB,OAAhB,CAIA,IAAIigC,EAAkE,GACtE7f,EAAW9b,SAAQ,YAA2B,IAAxB86B,EAAwB,EAAxBA,UAAWx6B,EAAa,EAAbA,OACzBg7B,EAAah7B,EAKjB,IAJI9F,aAAJ,EAAIA,EAAS+gC,iBACTj7B,EAAO6L,UAAY,IAGnB3R,GAAWA,EAAQk+B,UAAW,CAC9B,IAAMhH,EAAY7pB,SAASC,cAAc,QACzC6zB,EAAU39B,KAAK,CACXsC,SACAs7B,QAASlK,IAEbpxB,EAAOk7B,cAAehtB,aAAakjB,EAAWpxB,GAC9Cg7B,EAAa5J,EAEjB0I,EAAQp8B,KAAK,CAAEsC,OAAQg7B,EAAYR,iBAGvCL,GAAc,WACVkB,EAAU37B,SAAQ,YAAyB,IAAtB47B,EAAsB,EAAtBA,QAASt7B,EAAa,EAAbA,OACtBs7B,EAAQH,oBACRG,EAAQJ,cAAehtB,aAAaotB,EAAQH,kBAAmBG,GAC/DA,EAAQ9tB,SACRxN,EAAOwN,aAGfrJ,GAAYA,QAcb,SAASo3B,EAAY70B,EAA4B80B,GAAoD,IAA/BC,EAA+B,wDAEpGrK,EAAY7pB,SAASgE,eAAeiwB,GAOxC,OANKpK,KACDA,EAAY7pB,SAASC,cAAc,QACzBtG,GAAKs6B,EACfj0B,SAAS4D,KAAKQ,YAAYylB,IAG1BqK,EACOnB,IAASC,aAAa7zB,EAAS0qB,GAE/B,IAAI/kB,SAAQ,SAAC3K,GAAD,OAAag5B,EAAWh0B,EAAS0qB,GAAY,kBAAM1vB,a","file":"addons/vanilla.min.js?c7544eaabbd4411a9f1c","sourcesContent":["/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { logDebug } from \"./debugUtils\";\n\n/** This should mirror extensions allowed in Vanilla\\ImageResizer.php */\nconst IMAGE_REGEX = /^image\\/(gif|jpe?g|png)/i;\n\n/**\n * A filter for use with [].filter\n *\n * Matches only image image type files.\n * @private\n *\n * @param file - A File object.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/File\n *\n * @returns Whether or not the file is an acceptable image\n */\nexport function isFileImage(file: File): boolean {\n    if (IMAGE_REGEX.test(file.type)) {\n        return true;\n    }\n\n    logDebug(\"Filtered out non-image file: \", file.name);\n    return false;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n/**\n * Get various information about a fraction.\n *\n * @param numerator The fraction numerator.\n * @param denominator The fraction denominator.\n */\nexport function simplifyFraction(numerator: number, denominator: number) {\n    const findGCD = (a, b) => {\n        return b ? findGCD(b, a % b) : a;\n    };\n    const gcd = findGCD(numerator, denominator);\n\n    numerator = numerator / gcd;\n    denominator = denominator / gcd;\n\n    return {\n        numerator,\n        denominator,\n        shorthand: denominator + \":\" + numerator,\n    };\n}\n","/**\n * Utilities related to strings.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport mergeWith from \"lodash/mergeWith\";\n\n/**\n * A simple, fast method of hashing a string. Similar to Java's hash function.\n * https://stackoverflow.com/a/7616484/1486603\n *\n * @param str - The string to hash.\n *\n * @returns The hash code returned.\n */\nexport function hashString(str: string): number {\n    function hashReduce(prevHash, currVal) {\n        // tslint:disable-next-line:no-bitwise\n        return (prevHash << 5) - prevHash + currVal.charCodeAt(0);\n    }\n    return str.split(\"\").reduce(hashReduce, 0);\n}\n\n/**\n * Generate a RFC4122 compliant uuid. NOTE!!! Not cryptographically secure.\n *\n * This does not use a true random source (Eg. using Math.random()).\n * To use a better source would require dropping IE in order to use the crypto module.\n */\nexport function uuidv4() {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n        const r = (Math.random() * 16) | 0,\n            v = c == \"x\" ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\n\n/**\n * Convert a camel case variable to a title case label.\n *\n * @param str - The string to labelize.\n * @returns Returns a new string suitable for a label.\n */\nexport function labelize(str: string): string {\n    /**\n     * $labelCode = preg_replace('`(?<![A-Z0-9])([A-Z0-9])`', ' $1', $labelCode);\n     * $labelCode = preg_replace('`([A-Z0-9])(?=[a-z])`', ' $1', $labelCode);\n     * $labelCode = preg_replace('`\\s+`', ' ', $labelCode);\n     * $labelCode = ucfirst(trim($labelCode));\n     */\n    let label = str.replace(/([^A-Z0-9])([A-Z0-9])/, \"$1 $2\");\n    label = label.replace(/([A-Z0-9])(?=[a-z])/, \" $1\");\n    label = label.replace(/[_-]/, \" \");\n    label = label.replace(/\\s+/, \" \");\n    let parts = label.split(\" \");\n    label = parts.map((s) => s.charAt(0).toLocaleUpperCase() + s.slice(1)).join(\" \");\n    return label;\n}\n\n/**\n * Hash an object into a short key, that is stable no matter what order the parameters are.\n */\nexport function stableObjectHash<T extends object>(obj: T): number {\n    // Sort the object first.\n    const ordered: any = {};\n    Object.keys(obj)\n        .sort()\n        .forEach(function (key) {\n            ordered[key] = obj[key];\n        });\n    return hashString(JSON.stringify(ordered));\n}\n\ntype CompareReturn = -1 | 0 | 1;\n\n/**\n * Utility for sorting values. Similar to the <=> operator in PHP.\n *\n * @param val1 The first value to compare.\n * @param val2 The second value to compare.\n *\n * @returns -1, 0, or 1\n */\nexport function compare<T extends string | number>(val1: T, val2: T): CompareReturn {\n    if (typeof val1 === \"string\" && typeof val2 === \"string\") {\n        return val1.localeCompare(val2) as CompareReturn;\n    } else {\n        if (val1 > val2) {\n            return 1;\n        } else if (val1 < val2) {\n            return -1;\n        }\n        return 0;\n    }\n}\n\n/**\n * Parse a string into a URL friendly format.\n *\n * Eg. Why Uber isn’t spelled Über -> why-uber-isnt-spelled-uber\n *\n * @param str The string to parse.\n */\nexport function slugify(\n    str: string,\n    options?: {\n        allowMultipleDashes?: boolean;\n    },\n): string {\n    const whiteSpaceNormalizeRegexp = options && options.allowMultipleDashes ? /[\\s]+/g : /[-\\s]+/g;\n    return str\n        .normalize(\"NFD\") // Normalize accented characters into ASCII equivalents\n        .replace(/[^\\w\\s$*_+~.()'\"\\-!:@]/g, \"\") // REmove characters that don't URL encode well\n        .trim() // Trim whitespace\n        .replace(whiteSpaceNormalizeRegexp, \"-\") // Normalize whitespace\n        .toLocaleLowerCase(); // Convert to locale aware lowercase.\n}\n\nexport function normalizeString(str: string): string {\n    return str.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\n}\n\n/**\n * Split a string in multiple pieces similar to String.prototype.split but ignore most acccent characters.\n *\n * This will still return pieces with accents.\n *\n * @param toSplit The string to split.\n * @param splitWith The string to split with.\n */\nexport function splitStringLoosely(toSplit: string, splitWith: string): string[] {\n    const normalizedName = normalizeString(toSplit);\n    const normalizedSplitTerm = normalizeString(splitWith);\n    const normalizedPieces = normalizedName.split(new RegExp(`(${normalizedSplitTerm})`, \"i\"));\n\n    let charactersUsed = 0;\n    return normalizedPieces.map((piece) => {\n        const start = charactersUsed;\n        charactersUsed += piece.length;\n        return toSplit.substring(start, charactersUsed);\n    });\n}\n\ninterface IMentionMatch {\n    match: string;\n    rawMatch: string;\n}\n\n/**\n * Custom matching to allow quotation marks in the matching string as well as spaces.\n * Spaces make things more complicated.\n *\n * @param subtext - The string to be tested.\n * @param shouldStartWithSpace - Should the pattern include a test for a whitespace prefix?\n * @returns Matching string if successful.  Null on failure to match.\n */\nexport function matchAtMention(\n    subtext: string,\n    shouldStartWithSpace: boolean = false,\n    requireQuotesForWhitespace: boolean = true,\n): IMentionMatch | null {\n    // Split the string at the lines to allow for a simpler regex.\n    const lines = subtext.split(\"\\n\");\n    const lastLine = lines[lines.length - 1];\n\n    // If you change this you MUST change the regex in src/scripts/__tests__/legacy.test.js !!!\n    /**\n     * Put together the non-excluded characters.\n     *\n     * @param {boolean} excludeWhiteSpace - Whether or not to exclude whitespace characters.\n     *\n     * @returns {string} A Regex string.\n     */\n    function nonExcludedCharacters(excludeWhiteSpace) {\n        let excluded =\n            \"[^\" +\n            '\"' + // Quote character\n            \"\\\\u0000-\\\\u001f\\\\u007f-\\\\u009f\" + // Control characters\n            \"\\\\u2028\"; // Line terminator\n\n        if (excludeWhiteSpace) {\n            excluded += \"\\\\s\";\n        }\n\n        excluded += \"]\";\n        return excluded;\n    }\n\n    let regexStr =\n        \"@\" + // @ Symbol triggers the match\n        \"(\" +\n        // One or more non-greedy characters that aren't excluded. Whitespace is allowed, but a starting quote is required.\n        '\"(' +\n        nonExcludedCharacters(false) +\n        '+?)\"?' +\n        \"|\" + // Or\n        // One or more non-greedy characters that aren't exluded. Whitespace may be excluded.\n        \"(\" +\n        nonExcludedCharacters(requireQuotesForWhitespace) +\n        '+?)\"?' +\n        \")\" +\n        \"(?:\\\\n|$)\"; // Newline terminates.\n\n    // Determined by at.who library\n    if (shouldStartWithSpace) {\n        regexStr = \"(?:^|\\\\s)\" + regexStr;\n    }\n    const regex = new RegExp(regexStr, \"gi\");\n    const match = regex.exec(lastLine);\n    if (match) {\n        return {\n            rawMatch: match[0],\n            match: match[2] || match[1], // Return either of the matching groups (quoted or unquoted).\n        };\n    }\n\n    // No match\n    return null;\n}\n\nconst SAFE_PROTOCOL_REGEX = /^(http:\\/\\/|https:\\/\\/|tel:|mailto:\\/\\/|\\/|#)/;\n\n/**\n * Sanitize a URL to ensure that it matches a whitelist of approved url schemes. If the url does not match one of these schemes, prepend `unsafe:` before it.\n *\n * Allowed protocols\n * - \"http://\",\n * - \"https://\",\n * - \"tel:\",\n * - \"mailto://\",\n * - \"#\"\n *\n * @param url The url to sanitize.\n */\nexport function sanitizeUrl(url: string) {\n    if (url.match(SAFE_PROTOCOL_REGEX)) {\n        return url;\n    } else {\n        return \"unsafe:\" + url;\n    }\n}\n\n/**\n * Capitalize the first character of a string.\n *\n * @param str The string to modify.\n */\nexport function capitalizeFirstLetter(str: string): string {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n/**\n * Simple utility function for waiting some duration in promise.\n *\n * @param duration The amount of time to wait.\n */\nexport function promiseTimeout(duration: number): Promise<void> {\n    return new Promise((resolve) => {\n        setTimeout(resolve, duration);\n    });\n}\n\nfunction mergeCustomizer(into: any, source: any) {\n    if (Array.isArray(into) || Array.isArray(source)) {\n        return source;\n    }\n}\n\n/**\n * Merge 2 objects, but replace arrays instead of merging them.\n */\nexport function mergeAndReplaceArrays(item1: Record<any, any>, item2: Record<any, any>) {\n    return mergeWith({}, item1, item2, mergeCustomizer);\n}\n","/**\n * Utilities related to the user's system.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nexport enum OS {\n    IOS = \"ios\",\n    ANDROID = \"android\",\n    UNKNOWN = \"unkwown\",\n}\n\n/**\n * Provide relatively rough detection of mobile OS.\n *\n * This is not even close to perfect but can be used to try and offer,\n * OS specific input elements for things like datetimes.\n */\nexport function guessOperatingSystem(): OS {\n    const userAgent = navigator.userAgent || navigator.vendor || (window as any).opera;\n\n    if (/android/i.test(userAgent)) {\n        return OS.ANDROID;\n    }\n\n    // iOS detection from: http://stackoverflow.com/a/9039885/177710\n    if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {\n        return OS.IOS;\n    }\n\n    return OS.UNKNOWN;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\ninterface IClass {\n    new (): any;\n}\n\n/**\n * Determine if an instance is an instance of any of the listed classes.\n *\n * @param needle The instance.\n * @param haystack The classes to check.\n */\nexport function isInstanceOfOneOf(needle: any, haystack: IClass[]) {\n    for (const classItem of haystack) {\n        if (needle instanceof classItem) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\n/**\n * Transform an array of objects and an map of objets with a given key.\n *\n * Objects that do not contain the given key are dropped.\n *\n * @param array The array to go through.\n * @param key The key to lookup.\n */\nexport function indexArrayByKey<T extends object>(\n    array: T[],\n    key: string,\n): {\n    [key: string]: T;\n} {\n    const object = {};\n    for (const item of array) {\n        if (key in item) {\n            if (!(item[key] in object)) {\n                object[item[key]] = [];\n            }\n            object[item[key]].push(item);\n        }\n    }\n    return object;\n}\n\nexport function notEmpty<TValue>(value: TValue | null | undefined): value is TValue {\n    return value !== null && value !== undefined;\n}\n\nexport function ensureString(maybeString: any) {\n    if (typeof maybeString !== \"string\") throw new TypeError(\"Expected maybeString to have type string\");\n    return maybeString;\n}\n\nexport function forceInt(value: string | null, fallback: number): number {\n    let result = Number.parseInt(value ?? \"\", 10);\n    return Number.isNaN(result) ? fallback : result;\n}\n\nexport type RecordID = string | number;\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport Checkbox from \"@library/forms/Checkbox\";\nimport CheckboxGroup from \"@library/forms/CheckboxGroup\";\nimport { onReady, t } from \"@library/utility/appUtils\";\nimport { useSearchForm } from \"@library/search/SearchContext\";\nimport flatten from \"lodash/flatten\";\n\ninterface IProps {}\n\n/**\n * Implement search filter panel main component.\n *\n * - If there is only 1 type, it does not display.\n * - IF there are multiple types, at least 1 must be selected.\n *\n * Other plugins can hook into this and add their own filters with\n *\n * @example\n *    CommunityPostTypeFilter.addPostType({\n *       label: t(\"Discussions\"),\n *       values: [\"discussion\", \"comment\"],\n *   });\n */\nexport function CommunityPostTypeFilter(props: IProps) {\n    const { form, updateForm } = useSearchForm<{}>();\n    const registeredTypes = CommunityPostTypeFilter.postTypes;\n    const allTypes = flatten(registeredTypes.map((v) => v.values));\n\n    if (registeredTypes.length <= 1) {\n        return null;\n    }\n\n    const formTypes = form.types;\n\n    return (\n        <CheckboxGroup label={\"What to Search\"} grid={true} tight={true}>\n            {registeredTypes.map((registeredType, i) => {\n                const noTypesSelected = !formTypes || formTypes.length === 0;\n                let isChecked = false;\n\n                if (noTypesSelected) {\n                    isChecked = true;\n                } else {\n                    formTypes?.forEach((formType) => {\n                        if (registeredType.values.includes(formType)) {\n                            isChecked = true;\n                        }\n                    });\n                }\n\n                return (\n                    <Checkbox\n                        label={registeredType.label}\n                        key={i}\n                        checked={isChecked}\n                        onChange={(e) => {\n                            const newChecked = e.target.checked;\n\n                            if (newChecked) {\n                                const newTypesSet = new Set(formTypes ?? []);\n                                registeredType.values.forEach((typeToPush) => {\n                                    newTypesSet.add(typeToPush);\n                                });\n\n                                if (newTypesSet.size === allTypes.length) {\n                                    updateForm({ types: undefined });\n                                } else {\n                                    updateForm({ types: Array.from(newTypesSet) });\n                                }\n                            } else {\n                                const newTypesSet = new Set(form.types ?? []);\n                                registeredType.values.forEach((typeToPush) => {\n                                    newTypesSet.delete(typeToPush);\n                                });\n\n                                if (newTypesSet.size === 0) {\n                                    // Make a new set with all values minus the current one.\n                                    const newTypes = allTypes.filter((v) => !registeredType.values.includes(v));\n                                    updateForm({ types: newTypes });\n                                } else {\n                                    updateForm({ types: Array.from(newTypesSet) });\n                                }\n                            }\n                        }}\n                    />\n                );\n            })}\n        </CheckboxGroup>\n    );\n}\n\ninterface ICommunityPostType {\n    label: string;\n    values: string[];\n}\n\nCommunityPostTypeFilter.postTypes = [] as ICommunityPostType[];\n\nCommunityPostTypeFilter.addPostType = (postType: ICommunityPostType) => {\n    CommunityPostTypeFilter.postTypes.push(postType);\n};\n\n// Deferred to onReady for translation initialization.\nonReady(() => {\n    CommunityPostTypeFilter.addPostType({\n        label: t(\"Discussions\"),\n        values: [\"discussion\", \"comment\"],\n    });\n});\n","var map = {\n\t\"./en-SG\": 126,\n\t\"./en-SG.js\": 126,\n\t\"./en-au\": 127,\n\t\"./en-au.js\": 127,\n\t\"./en-ca\": 128,\n\t\"./en-ca.js\": 128,\n\t\"./en-gb\": 129,\n\t\"./en-gb.js\": 129,\n\t\"./en-ie\": 130,\n\t\"./en-ie.js\": 130,\n\t\"./en-il\": 131,\n\t\"./en-il.js\": 131,\n\t\"./en-nz\": 132,\n\t\"./en-nz.js\": 132\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 190;","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license Proprietary\n */\n\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { cssRule } from \"@library/styles/styleShim\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { singleBorder } from \"@library/styles/styleHelpersBorders\";\nimport { userSelect } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { percent } from \"csx\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const blockQuoteVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"blockQuote\");\n    const colors = makeThemeVars(\"colors\", {\n        fg: globalVars.mainColors.fg,\n        border: {\n            color: globalVars.mixBgAndFg(0.23),\n        },\n    });\n\n    return {\n        colors,\n    };\n});\n\nexport const blockQuoteCSS = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = blockQuoteVariables();\n    cssRule(\".blockquote\", {\n        display: \"block\",\n        margin: styleUnit(0),\n        ...Mixins.padding({\n            all: 3,\n            left: 18,\n        }),\n        borderLeft: singleBorder({\n            color: vars.colors.border.color,\n            width: 6,\n        }),\n        boxSizing: \"border-box\",\n        verticalAlign: \"middle\",\n    });\n    cssRule(\".blockquote-content\", {\n        ...{\n            \"& > *:first-child\": {\n                marginTop: styleUnit(0),\n            },\n            \"& > *:last-child\": {\n                marginBottom: styleUnit(0),\n            },\n        },\n    });\n    cssOut(`.embedLink-excerpt`, {\n        color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n    });\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nexport interface ILocale {\n    localeID: string;\n    localeKey: string;\n    regionalKey: string;\n    displayNames: {\n        [localeKey: string]: string;\n    };\n}\n\nlet currentLocale = \"en\";\nlet localeStore: ILocale[] = [];\nlet callbacks: Array<() => void> = [];\n\n/**\n * Get the available locales.\n */\nexport function getLocales(): ILocale[] {\n    return localeStore;\n}\n\n/**\n * Register a handler for if the locales change.\n * @param callback\n */\nexport function onLocaleChange(callback: () => void) {\n    callbacks.push(callback);\n}\n\n/**\n * Set the current locale.\n */\nexport function setCurrentLocale(localeKey: string) {\n    currentLocale = localeKey;\n    callbacks.forEach(callback => callback());\n}\n\n/**\n * Get the current locale.\n */\nexport function getCurrentLocale() {\n    return currentLocale;\n}\n\n/**\n * Get the current locale in format accepted by Javascript localization functions.\n *\n * PHP canonicalized locales use `_` for the regional separator.\n * Javascript uses `-`.\n */\nexport function getJSLocaleKey() {\n    return currentLocale.replace(\"_\", \"-\");\n}\n\n/**\n * Load a group of locales.\n */\nexport function loadLocales(locales: ILocale[]) {\n    localeStore = [...localeStore, ...locales];\n    callbacks.forEach(callback => callback());\n}\n\n/**\n * Clear the loaded locales.\n */\nexport function clearLocales() {\n    localeStore = [];\n    callbacks.forEach(callback => callback());\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useState, useContext, useEffect } from \"react\";\nimport { ILocale, getLocales, onLocaleChange, getCurrentLocale } from \"./localeStore\";\nimport { logWarning } from \"@vanilla/utils\";\n\nconst LocaleContext = React.createContext<{\n    locales: ILocale[];\n    currentLocale: string | null;\n}>({\n    locales: [],\n    currentLocale: null,\n});\n\nexport function LocaleProvider(props: { children?: React.ReactNode }) {\n    const [locales, setLocales] = useState(getLocales());\n    const [currentLocale, setCurrentLocale] = useState(getCurrentLocale());\n\n    if (!currentLocale) {\n        logWarning(\"No locale loaded for <LocaleProvider />\");\n    }\n\n    useEffect(() => {\n        setLocales(getLocales());\n        setCurrentLocale(getCurrentLocale());\n\n        onLocaleChange(() => {\n            setLocales(getLocales());\n            setCurrentLocale(getCurrentLocale());\n        });\n    }, [setLocales, setCurrentLocale]);\n\n    return (\n        <LocaleContext.Provider\n            value={{\n                locales,\n                currentLocale,\n            }}\n        >\n            {props.children}\n        </LocaleContext.Provider>\n    );\n}\n\nexport function useLocaleInfo() {\n    return useContext(LocaleContext);\n}\n","import { logError, logWarning } from \"@vanilla/utils\";\n\n/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\ninterface ITranslations {\n    [key: string]: string;\n}\n\nlet translationStore: ITranslations | null = null;\n\nlet internalTranslationDebugValue = false;\n\n/**\n * Get or set the debug flag.\n *\n * @param newValue - The new value of debug.\n * @returns the current debug setting.\n */\nexport function translationDebug(newValue?: boolean): boolean {\n    if (newValue !== undefined) {\n        internalTranslationDebugValue = newValue;\n    }\n\n    return internalTranslationDebugValue;\n}\n\n/**\n * Load a set of key value pairs as translation resources.\n */\nexport function loadTranslations(translations: ITranslations) {\n    translationStore = { ...translations };\n}\n\n/**\n * Clear all translation resources.\n */\nexport function clearTranslations() {\n    translationStore = null;\n}\n\n/**\n * Translate a string into the current locale.\n *\n * @param str - The string to translate.\n * @param defaultTranslation - The default translation to use.\n *\n * @returns Returns the translation or the default.\n */\nexport function translate(str: string, defaultTranslation?: string): string {\n    // Codes that begin with @ are considered literals.\n    if (str.substr(0, 1) === \"@\") {\n        return str.substr(1);\n    }\n\n    const fallback = defaultTranslation !== undefined ? defaultTranslation : str;\n\n    if (!translationStore) {\n        // Test environment allows top level static initialization.\n        const message = `Attempted to translate a value '${str}' before the translation store was initialized.`;\n        switch (process.env.NODE_ENV) {\n            case \"production\":\n                logWarning(message);\n                break;\n            case \"development\":\n                throw new Error(message + \" Don't use t() in the top level of a file or a static property.\");\n            case \"test\":\n                // Tests (like storybook and unit testing) don't need to actually bootstrap a full translation store all the time.\n                break;\n        }\n        return fallback;\n    }\n\n    if (translationStore[str] !== undefined) {\n        return translationStore[str];\n    }\n\n    if (translationDebug()) {\n        return \"☢️☢️☢️\" + fallback + \"☢️☢️☢️\";\n    } else {\n        return fallback;\n    }\n}\n\n/**\n * The t function is an alias for translate.\n */\nexport const t = translate;\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { logError, RecordID } from \"@vanilla/utils\";\n\nexport interface IContentTranslatorProps {\n    isLoading?: boolean;\n    isFullScreen?: boolean;\n    properties: ITranslationProperty[];\n    resource: string;\n    title: string;\n    sourceLocale?: string | null;\n    activeLocale?: string | null; // for organizecategories\n    afterSave?: () => void;\n}\n\n// Subtypes\nexport enum TranslationPropertyType {\n    TEXT = \"text\",\n    TEXT_MULTILINE = \"\",\n}\n\nexport interface ITranslationProperty {\n    recordType: string; // Ex. knowledgeCategory\n    recordID?: RecordID; // Ex. 425\n    recordKey?: string; // Ex. Garden.Description\n    sourceText: string; // Ex. \"Howdy Stranger\"\n    propertyName: string; // Ex. name\n    propertyValidation: ITranslationPropertyValidation;\n    propertyType: TranslationPropertyType;\n}\n\nexport interface ITranslationPropertyValidation {\n    minLength?: number;\n    maxLength?: number;\n}\n\nexport const NullContentTranslator: React.FC<IContentTranslatorProps> = (props) => {\n    logError(\"Rendering a Null Content translator. Be sure to check `shouldDisplay` before rendering.\");\n    return null;\n};\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useContext } from \"react\";\nimport { IContentTranslatorProps, NullContentTranslator } from \"./ContentTranslator\";\nimport { useLocaleInfo } from \"./LocaleProvider\";\n\ninterface IContentTranslator {\n    shouldDisplay: boolean;\n    Translator: React.ComponentType<IContentTranslatorProps>;\n}\n\nconst context = React.createContext<IContentTranslator>({\n    shouldDisplay: false,\n    Translator: NullContentTranslator,\n});\n\nlet _TranslationComponent: React.ComponentType<IContentTranslatorProps> | null = null;\n\n/**\n * Provider of the translation component.\n */\nexport const ContentTranslationProvider = (props: { children: React.ReactNode }) => {\n    const { locales } = useLocaleInfo();\n\n    return (\n        <context.Provider\n            value={{\n                shouldDisplay: _TranslationComponent !== null && locales.length > 1,\n                Translator: _TranslationComponent !== null ? _TranslationComponent : NullContentTranslator,\n            }}\n        >\n            {props.children}\n        </context.Provider>\n    );\n};\n\nContentTranslationProvider.setTranslator = (Translator: React.ComponentType<IContentTranslatorProps>) => {\n    _TranslationComponent = Translator;\n};\n\nexport function useContentTranslator(): IContentTranslator {\n    return useContext(context);\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n/**\n * Get the form data out of a form element.\n *\n * @param formElement - The element to get the data out of.\n *\n * @returns {Object}\n */\nexport function getFormData(formElement: Node | null) {\n    if (!(formElement instanceof HTMLFormElement)) {\n        return {};\n    }\n\n    const data = new FormData(formElement) as any;\n    const result = {};\n\n    data.forEach((key, value) => {\n        result[key] = value;\n    });\n\n    return result;\n}\n\n/**\n * Toggle any attribute on an element.\n *\n * @param element - The element to toggle on.\n * @param attribute - The attribute to toggle.\n */\nexport function toggleAttribute(element: Element, attribute: string) {\n    const newValue = element.getAttribute(attribute) === \"false\";\n    element.setAttribute(attribute, newValue ? \"true\" : \"false\");\n}\n\nconst dataMap = new WeakMap();\n\n/**\n * Set a piece of data specific to a DOM Element. Similar to `$.data`.\n *\n * @param element - The DOM Element to assosciate the data with.\n * @param key - The key to assosciate the data with.\n * @param value - The value to store.\n */\nexport function setData(element: Element, key: string, value: any) {\n    const initialValue = dataMap.has(element) ? dataMap.get(element) : {};\n    initialValue[key] = value;\n\n    dataMap.set(element, initialValue);\n}\n\n/**\n * Get a piece of data specific to a DOM Element. Similar to `$.data`.\n *\n * @param element - The DOM Element to lookup.\n * @param key - The key to lookup.\n * @param defaultValue - A value to use if the element or key aren't found.\n */\nexport function getData(element: Element, key: string, defaultValue?: any) {\n    if (dataMap.has(element) && dataMap.get(element)[key]) {\n        return dataMap.get(element)[key];\n    }\n\n    const attributeString = `data-${key}`;\n\n    if (element.hasAttribute(attributeString)) {\n        return element.getAttribute(attributeString);\n    }\n\n    return defaultValue;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport twemoji from \"twemoji\";\n\nlet emojiSupportedCache: boolean | null = null;\n\n/**\n * Determine if the browser/OS combo has support for real unicode emojis.\n */\nexport function isEmojiSupported() {\n    if (emojiSupportedCache !== null) {\n        return emojiSupportedCache;\n    }\n\n    if (process.env.NODE_ENV !== \"test\") {\n        // Test environment\n        const canvas = document.createElement(\"canvas\");\n        if (canvas.getContext && canvas.getContext(\"2d\")) {\n            const ctx = document.createElement(\"canvas\").getContext(\"2d\");\n            if (ctx) {\n                ctx.fillText(\"😗\", -2, 4);\n                emojiSupportedCache = ctx.getImageData(0, 0, 1, 1).data[3] > 0;\n            } else {\n                emojiSupportedCache = false;\n            }\n        } else {\n            emojiSupportedCache = false;\n        }\n    } else {\n        emojiSupportedCache = true;\n    }\n\n    return emojiSupportedCache;\n}\n\nconst emojiOptions = {\n    className: \"fallBackEmoji\",\n    size: \"72x72\",\n};\n\n/**\n * Returns either native emoji or fallback image\n *\n * @param stringOrNode - A DOM Node or string to convert.\n */\nexport function convertToSafeEmojiCharacters(stringOrNode: string | Node) {\n    if (isEmojiSupported()) {\n        return stringOrNode;\n    }\n    return twemoji.parse(stringOrNode, emojiOptions);\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n/**\n * Register an keyboard listener for the escape key.\n */\nexport class EscapeListener {\n    /**\n     * @param root - The element to watch for the escape listener in.\n     * @param returnElement - The element to return to when escape is pressed.\n     * @param callback\n     */\n    public constructor(\n        private root: HTMLElement,\n        private returnElement?: HTMLElement,\n        private callback?: (event: KeyboardEvent) => void,\n    ) {}\n\n    /**\n     * Start the listeners.\n     */\n    public start = () => {\n        this.root.addEventListener(\"keydown\", this.keydownListener);\n    };\n\n    /**\n     * Stop the listeners.\n     */\n    public stop = () => {\n        this.root.removeEventListener(\"keydown\", this.keydownListener);\n    };\n\n    /**\n     * Handler that checks for the key of an keyboard event and:\n     *\n     * - Returns focous to the element from the constructor.\n     * - Calls the optional callback.\n     */\n    private keydownListener = (event: KeyboardEvent) => {\n        if (event.key === \"Escape\") {\n            if (this.root.contains(document.activeElement)) {\n                event.preventDefault();\n                this.returnElement && this.returnElement.focus();\n                this.callback && this.callback(event);\n            }\n        }\n    };\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { hashString } from \"@vanilla/utils\";\n\nconst delegatedEventListeners = {};\n\n/**\n * Create an event listener using event delegation.\n *\n * @param eventName - The Event to listen for.\n * @param filterSelector - A CSS selector to match against.\n * @param callback - The callback function. This gets passed the fired event.\n * @param scopeSelector - And element to scope the event listener to.\n *\n * @returns The hash of the event. Save this to use removeDelegatedEvent().\n */\nexport function delegateEvent(\n    eventName: string,\n    filterSelector: string,\n    callback: (event: Event, triggeringElement: HTMLElement) => boolean | void,\n    scopeSelector?: string | HTMLElement,\n): string {\n    let functionKey = eventName + filterSelector + callback.toString();\n\n    let scope;\n\n    if (typeof scopeSelector === \"string\") {\n        scope = document.querySelector(scopeSelector);\n\n        if (!scope) {\n            throw new Error(`Unable to find element in the document for scopeSelector: ${scopeSelector}`);\n        } else {\n            functionKey += scopeSelector;\n        }\n    } else if (scopeSelector instanceof HTMLElement) {\n        scope = scopeSelector;\n    } else {\n        scope = document;\n    }\n\n    const eventHash = hashString(functionKey).toString();\n\n    if (!Object.keys(delegatedEventListeners).includes(eventHash)) {\n        const wrappedCallback = event => {\n            // Get the nearest DOMNode that matches the given selector.\n            const match = filterSelector ? event.target.closest(filterSelector) : event.target;\n\n            if (match) {\n                // Call the callback with the matching element as the context.\n                return callback.call(match, event, match);\n            }\n        };\n\n        scope.addEventListener(eventName, wrappedCallback);\n        delegatedEventListeners[eventHash] = {\n            scope,\n            eventName,\n            wrappedCallback,\n        };\n    }\n\n    return eventHash;\n}\n\n/**\n * Remove a delegated event listener.\n *\n * @param eventHash - The event hash passed from delegateEvent().\n */\nexport function removeDelegatedEvent(eventHash: string) {\n    if (delegatedEventListeners[eventHash]) {\n        const { scope, eventName, wrappedCallback } = delegatedEventListeners[eventHash];\n        scope.removeEventListener(eventName, wrappedCallback);\n        delete delegatedEventListeners[eventHash];\n    }\n}\n\n/**\n * Remove all delegated event listeners that have been registered.\n */\nexport function removeAllDelegatedEvents() {\n    Object.keys(delegatedEventListeners).forEach(key => {\n        removeDelegatedEvent(key);\n    });\n}\n\n/**\n * Handler for files being dragged and dropped.\n *\n * @param event - https://developer.mozilla.org/en-US/docs/Web/API/DragEvent\n */\nexport function getDraggedFile(event: DragEvent): FileList | undefined {\n    if (event.dataTransfer && event.dataTransfer.files && event.dataTransfer.files.length) {\n        event.preventDefault();\n\n        return event.dataTransfer.files;\n    }\n}\n\n/**\n * Handler for files being pasted.\n *\n * @param event - https://developer.mozilla.org/en-US/docs/Web/API/DragEvent\n */\nexport function getPastedFile(event: ClipboardEvent): File | undefined | null {\n    if (event.clipboardData && event.clipboardData.items && event.clipboardData.items.length) {\n        const files = Array.from(event.clipboardData.items)\n            .map((item: any) => (item.getAsFile ? item.getAsFile() : null))\n            .filter(Boolean);\n\n        if (files.length > 0) {\n            event.preventDefault();\n            // Currently only 1 file is supported.\n            const mainFile = files[0];\n            return mainFile;\n        }\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n/**\n * Register a callback for focusin and focusin out events. The main improvement here over registering\n * the listeners yourself is that the events fire for the whole tree as 1 item instead of as\n * individual notes.\n *\n * This is particularly useful when you want to track focus leaving or enterring a component\n * without caring about the individual contents inside.\n */\nexport class FocusWatcher {\n    /**\n     * @param watchedNode - The watched dom node.\n     * @param callback - A callback for when the tree focuses and blurs.\n     */\n    public constructor(private watchedNode: Element, private changeHandler: (hasFocus: boolean) => void) {}\n\n    /**\n     * Register the event listeners from this class.\n     */\n    public start = () => {\n        this.watchedNode.addEventListener(\"focusout\", this.handleFocusOut, true);\n        this.watchedNode.addEventListener(\"focusin\", this.handleFocusIn, true);\n        document.addEventListener(\"click\", this.handleClick);\n    };\n\n    /**\n     * Remove the event listeners from this class.\n     */\n    public stop = () => {\n        this.watchedNode.removeEventListener(\"focusout\", this.handleFocusOut, true);\n        this.watchedNode.removeEventListener(\"focusin\", this.handleFocusIn, true);\n        document.removeEventListener(\"click\", this.handleClick);\n    };\n\n    /**\n     * Handle when an element loses focus.\n     */\n    private handleFocusOut = (event: FocusEvent) => {\n        this.checkDomTreeHasFocus(event, this.changeHandler);\n    };\n\n    /**\n     * Handle an element gaining focus.\n     */\n    private handleFocusIn = (event: FocusEvent) => {\n        this.checkDomTreeHasFocus(event, this.changeHandler);\n    };\n\n    /**\n     * Handle an element being clicked.\n     */\n    private handleClick = (event: MouseEvent) => {\n        const triggeringElement = event.target as Element;\n        const wasClicked = this.checkDomTreeWasClicked(triggeringElement);\n        if (!wasClicked) {\n            this.changeHandler(false);\n        }\n    };\n\n    /**\n     * Determine whether or not our DOM tree was clicked.\n     */\n    private checkDomTreeWasClicked(clickedElement: Element) {\n        return (\n            this.watchedNode &&\n            clickedElement &&\n            (this.watchedNode.contains(clickedElement as Element) || this.watchedNode === clickedElement)\n        );\n    }\n\n    /**\n     * Determine if the currently focused element is somewhere inside of (or the same as)\n     * a given Element.\n     *\n     * @param watchedNode - The watched node to look in.\n     */\n    private checkDomTreeHasFocus(event: FocusEvent, callback: (hasFocus: boolean) => void) {\n        setTimeout(() => {\n            const possibleTargets = [\n                // NEEDS TO COME FIRST, because safari will populate relatedTarget on focusin, and its not what we're looking for.\n                document.activeElement, // IE11, Safari.\n                event.relatedTarget as Element, // Chrome (The actual standard)\n                (event as any).explicitOriginalTarget, // Firefox\n            ];\n\n            let activeElement = null;\n            for (const target of possibleTargets) {\n                if (target && target !== document.body) {\n                    activeElement = target;\n                    break;\n                }\n            }\n\n            if (activeElement !== null) {\n                const isWatchedInBody = document.body.contains(this.watchedNode);\n                const isFocusedInBody = document.body.contains(activeElement);\n                const isModal = Boolean(document.getElementById(\"modals\")?.contains(activeElement));\n                const hasFocus = Boolean(\n                    this.watchedNode &&\n                        activeElement &&\n                        (activeElement === this.watchedNode || this.watchedNode.contains(activeElement)),\n                );\n\n                // We will only invalidate based on something actually getting focus.\n                // Make sure we are still mounted before calling this.\n                // It could happen that our flyout is unmounted in between the setTimeout call.\n                // We might have focused on a modal which can't be in the watched tree.\n                if (isWatchedInBody && isFocusedInBody) {\n                    callback(hasFocus || isModal);\n                }\n            }\n        }, 0);\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n/**\n * Use the browser's built-in functionality to quickly and safely escape a string.\n *\n * @param str - The string to escape.\n *\n * @returns Escaped HTML.\n */\nexport function escapeHTML(str: string): string {\n    const div = document.createElement(\"div\");\n    div.appendChild(document.createTextNode(str));\n    return div.innerHTML;\n}\n\n/**\n * Use the browser's built-in functionality to quickly unescape a string.\n * UNSAFE with unsafe strings; only use on previously-escaped ones!\n *\n * @param escapedString - A previously escaped string.\n *\n * @returns The unescaped string.\n */\nexport function unescapeHTML(escapedString: string): string {\n    const div = document.createElement(\"div\");\n    div.innerHTML = escapedString;\n    const child = div.childNodes[0];\n    return child && child.nodeValue ? child.nodeValue : \"\";\n}\n\n/**\n * Determine if the browser is escaping the inner contents of our <noscript /> browser.\n */\nexport function browserEscapesNoScript(): boolean {\n    const ns = document.createElement(\"noscript\");\n    ns.innerHTML = \"<test></test>\";\n    document.body.append(ns);\n    const result = ns.innerHTML.startsWith(\"&lt;\");\n    ns.remove();\n    return result;\n}\n\n/**\n * Get an HTML element from a CSS selector or DOM Node.\n *\n * @param selectorOrElement - A CSS selector or an HTML element.\n *\n * @throws If no element was found.\n * @returns An HTMLElement no matter what.\n */\nexport function ensureHtmlElement(selectorOrElement: string | Node | null): HTMLElement {\n    if (typeof selectorOrElement === \"string\") {\n        selectorOrElement = document.querySelector(selectorOrElement);\n    }\n\n    if (!(selectorOrElement instanceof HTMLElement)) {\n        throw new Error(`HTMLElement could not be found for ${selectorOrElement}.`);\n    }\n\n    return selectorOrElement;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n// A weakmap so we can store multiple load callbacks per script.\nconst loadEventCallbacks: WeakMap<Node, Array<(event) => void>> = new WeakMap();\nconst rejectionCache: Map<string, Error> = new Map();\n\n/**\n * Dynamically load a javascript file.\n */\nexport function ensureScript(scriptUrl: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n        const existingScript: HTMLScriptElement | null = document.querySelector(`script[src='${scriptUrl}']`);\n        if (rejectionCache.has(scriptUrl)) {\n            reject(rejectionCache.get(scriptUrl));\n        }\n        if (existingScript && loadEventCallbacks.has(existingScript)) {\n            // Add another resolveCallback into the weakmap.\n            const callbacks = loadEventCallbacks.get(existingScript);\n            callbacks && callbacks.push(resolve);\n        } else {\n            // The script doesn't exist. Lets create it.\n            const head = document.getElementsByTagName(\"head\")[0];\n            const script = document.createElement(\"script\");\n            script.type = \"text/javascript\";\n            script.src = scriptUrl;\n            script.onerror = (event: ErrorEvent) => {\n                const error = new Error(\"Failed to load a required embed script\");\n                rejectionCache.set(scriptUrl, error);\n                reject(error);\n            };\n\n            const timeout = setTimeout(() => {\n                const error = new Error(`Loading of the script ${scriptUrl} has timed out.`);\n                rejectionCache.set(scriptUrl, error);\n                reject(error);\n            }, 10000);\n\n            loadEventCallbacks.set(script, [resolve]);\n\n            script.onload = event => {\n                clearTimeout(timeout);\n                const callbacks = loadEventCallbacks.get(script);\n                callbacks && callbacks.forEach(callback => callback(event));\n                loadEventCallbacks.delete(script);\n            };\n\n            head.appendChild(script);\n        }\n    });\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { browserEscapesNoScript, unescapeHTML } from \"./sanitization\";\n\n/**\n * Prepare an element and it's contents for use in a shadow root.\n *\n * @param element\n * @param cloneElement - If true, clone the element into a `newElementTag`. Preserves CSS classes and IDs.\n *      Particularly useful for when the initial content is inside of a <noscript /> tag.\n * @param newElementTag\n */\nexport function prepareShadowRoot(\n    element: HTMLElement,\n    cloneElement: boolean = false,\n    newElementTag = \"div\",\n): HTMLElement {\n    let html = element.innerHTML;\n    // This is likely a noscript tag.\n    if (browserEscapesNoScript() || html.trim().startsWith(\"&lt;\")) {\n        html = unescapeHTML(html);\n    }\n    // Safari escapes the contents of the noscript.\n    if (cloneElement) {\n        const newElement = document.createElement(newElementTag);\n\n        // Clone various attributes.\n        newElement.classList.value = element.classList.value;\n        newElement.id = element.id;\n\n        // Insert the element & remove the old old.\n        element.parentNode!.insertBefore(newElement, element);\n        element.remove();\n        element = newElement;\n    } else {\n        // If we aren't making a new real root, we need to empty it out.\n        // Otherwise we'll have duplicate contents.\n        element.innerHTML = \"\";\n    }\n\n    const shadowHeader = element.attachShadow({ mode: \"open\" });\n    shadowHeader.innerHTML = html;\n    return element;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport tabbable from \"tabbable\";\nimport { logError } from \"@vanilla/utils\";\n\n/**\n * A class for handling tabbing inside of a container with various exclusions.\n *\n * The goal is here is to be able to programatically implement various tabbing behaviours\n * required for accessibility.\n */\nexport class TabHandler {\n    private tabbableElements: HTMLElement[];\n\n    /**\n     * Determine if an element is tabbable.\n     */\n    public static isTabbable(element: Node) {\n        const children = tabbable(element.parentNode);\n        return children.includes(element);\n    }\n\n    /**\n     * Construct the handler. Don't be afraid to construct multiple of these.\n     *\n     * The elements in a particular TabHandler are very moment specific.\n     * If the DOM changes underneath it it will likely no longer be valid.\n     *\n     * @param root - The root element to look in.\n     * @param excludedElements - Elements to ignore.\n     * @param excludedRoots - These element's children will be ignored.\n     */\n    public constructor(\n        root: Element = document.documentElement!,\n        private excludedElements: Element[] = [],\n        private excludedRoots: Element[] = [],\n    ) {\n        this.tabbableElements = tabbable(root);\n    }\n\n    /**\n     * Get the next tabbable item within a given tabindex.\n     *\n     * WARNING: Performance can be poor if you pass many excluded roots and do not\n     * sufficiently narrow the tree your are looking in.\n     *\n     * @param from - The currently focused element.\n     * @param reverse - True to get the previous element instead.\n     * @param allowLooping - Whether or not the focus should loop around from beginning <-> end.\n     */\n    public getNext(\n        from: Element | null = document.activeElement,\n        reverse: boolean = false,\n        allowLooping: boolean = true,\n    ): HTMLElement | null {\n        if (!(from instanceof HTMLElement)) {\n            logError(\"Unable to tab to next element, `fromElement` given is not valid: \", from);\n            return null;\n        }\n        const tabbables = this.tabbableElements.filter(this.createExcludeFilterWithExemption(from));\n        const currentTabIndex = tabbables.indexOf(from);\n\n        if (currentTabIndex < 0) {\n            return null;\n        }\n\n        let targetIndex = reverse ? currentTabIndex - 1 : currentTabIndex + 1;\n\n        if (allowLooping) {\n            // Loop over the beginning and ends\n            if (targetIndex < 0) {\n                targetIndex = tabbables.length - 1;\n            } else if (targetIndex >= tabbables.length) {\n                targetIndex = 0;\n            }\n        }\n\n        return tabbables[targetIndex] || null;\n    }\n\n    /**\n     * Get all.\n     */\n    public getAll(from: Element | null = document.activeElement) {\n        if (!(from instanceof HTMLElement)) {\n            logError(\"Unable to tab to next element, `fromElement` given is not valid: \", from);\n            return null;\n        }\n        return this.tabbableElements.filter(this.createExcludeFilterWithExemption(from));\n    }\n\n    /**\n     * Get the first focusable element.\n     */\n    public getInitial(): HTMLElement | null {\n        const tabbables = this.tabbableElements.filter(this.filterAllExcluded);\n        if (tabbables.length > 0) {\n            return tabbables[0];\n        } else {\n            return null;\n        }\n    }\n    /**\n     * Get the last focusable element.\n     */\n    public getLast(): HTMLElement | null {\n        const tabbables = this.tabbableElements.filter(this.filterAllExcluded);\n        if (tabbables.length > 0) {\n            return tabbables[tabbables.length - 1];\n        } else {\n            return null;\n        }\n    }\n\n    /**\n     * Filter out all excluded elements. Allows 1 element and its parents to be exempted.\n     *\n     * The exemption is necessary so we can find our place\n     * if the focus is already in an item that we are trying to exclude.\n     *\n     * @returns A filter for use with [].filter()\n     */\n    private createExcludeFilterWithExemption = (exemption: Element) => {\n        return (elementToFilter: Element): boolean => {\n            const elementIsActiveOrChildOfActive = exemption === elementToFilter || elementToFilter.contains(exemption);\n\n            if (!elementIsActiveOrChildOfActive) {\n                if (this.excludedElements.includes(elementToFilter)) {\n                    return false;\n                }\n                for (const excludedRoot of this.excludedRoots) {\n                    if (excludedRoot !== elementToFilter && excludedRoot.contains(elementToFilter)) {\n                        return false;\n                    }\n                }\n            }\n\n            return true;\n        };\n    };\n\n    /**\n     * A filter for use with [].filter().\n     *\n     * Filters out all excluded elements and roots.\n     */\n    private filterAllExcluded = (elementToFilter: Element): boolean => {\n        if (this.excludedElements.includes(elementToFilter)) {\n            return false;\n        }\n        for (const excludedRoot of this.excludedRoots) {\n            if (excludedRoot !== elementToFilter && excludedRoot.contains(elementToFilter)) {\n                return false;\n            }\n        }\n\n        return true;\n    };\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n// Some polyfills\nimport \"focus-visible\";\nimport smoothscroll from \"smoothscroll-polyfill\";\n\nsmoothscroll.polyfill();\n\nexport * from \"./domData\";\nexport * from \"./emoji\";\nexport * from \"./EscapeListener\";\nexport * from \"./events\";\nexport * from \"./FocusWatcher\";\nexport * from \"./sanitization\";\nexport * from \"./scripts\";\nexport * from \"./shadowDom\";\nexport * from \"./TabHandler\";\nexport * from \"./visibility\";\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n/*\n * Utility function to get positioning of flyout based on props.\n * @param renderAbove - Render flyout above button\n * @param renderLeft - Render flyout towards left\n * @ignore ignore - Do nothing - for legacy\n */\nexport function flyoutPosition(\n    renderAbove: boolean,\n    renderLeft: boolean,\n    ignore: boolean = false,\n    centered = false,\n): any {\n    if (!ignore) {\n        const top = !renderAbove ? \"100%\" : undefined;\n        const bottom = renderAbove ? \"100%\" : undefined;\n        const left = !renderLeft && !centered ? \"0\" : centered ? \"50%\" : undefined;\n        const right = renderLeft && !centered ? \"0\" : undefined;\n        return { top, right, bottom, left };\n    } else {\n        return undefined;\n    }\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\n\ninterface IProps {\n    duration: number;\n    onHover: React.MouseEventHandler | undefined;\n    once?: boolean;\n    children: (providedProps: IProvidedProps) => React.ReactNode;\n}\n\ninterface IProvidedProps {\n    onMouseEnter: React.MouseEventHandler;\n    onMouseLeave: React.MouseEventHandler;\n}\n\n/**\n * Component with render props for handling a hover after a certain duration.\n *\n * Simply spread the provided props over the element you want to track the hover of.\n *\n * @example\n * <Hoverable duration={250} onHover={myCallback}>\n *     {providedProps => {\n *          <div {...providedProps} className=\"someClass\">\n *              // Some deeply neested child.\n *          </div>\n *     }}\n * </Hoverable>\n */\nexport class Hoverable extends React.Component<IProps> {\n    public static defaultProps = {\n        once: true,\n    };\n\n    /**\n     * @inheritdoc\n     */\n    public render(): React.ReactNode {\n        return this.props.children({\n            onMouseEnter: this.mouseEnterHandler,\n            onMouseLeave: this.mouseLeaveHandler,\n        });\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public componentWillUnmount() {\n        this.dismissTimeout();\n    }\n\n    private hoverTimeout: NodeJS.Timeout;\n    private hasExecuted = false;\n\n    /**\n     * Handle the hover event by checking if we've already called ourselves then calling the passed callback.\n     */\n    private handleHover = (event: React.MouseEvent) => {\n        if (this.hasExecuted && this.props.once) {\n            return;\n        }\n\n        this.hasExecuted = true;\n        if (this.props.onHover) {\n            this.props.onHover(event);\n        }\n    };\n\n    /**\n     * Set a timeout when the mouse enters. If the timeout is not removed we have a hover.\n     */\n    private mouseEnterHandler = (event: React.MouseEvent) => {\n        this.hoverTimeout = setTimeout(() => {\n            this.handleHover(event);\n        }, this.props.duration);\n    };\n\n    /**\n     * Remove the timeout for the hover so it doesn't execute again (or at all).\n     */\n    private mouseLeaveHandler = (event: React.MouseEvent) => {\n        this.dismissTimeout();\n    };\n\n    /**\n     * Cleanup timeouts and properties to reset.\n     */\n    private dismissTimeout() {\n        this.hasExecuted = false;\n        if (this.hoverTimeout) {\n            clearTimeout(this.hoverTimeout);\n        }\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { RefObject, useState, useLayoutEffect } from \"react\";\nimport ResizeObserver from \"resize-observer-polyfill\";\nimport debounce from \"lodash/debounce\";\nimport { stableObjectHash } from \"@vanilla/utils\";\n\n// DOMRectReadOnly.fromRect()\nconst EMPTY_RECT: DOMRect = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    toJSON: () => \"\",\n};\n\n/**\n * Utility hook for measuring a dom element.\n * Will return back measurements as a bounding rectangle for the element contained in a ref.\n *\n * @param ref The ref to measure.\n * @param adjustForScrollOffset If set, y values will be adjusted for the current scroll offset.\n * @param watchRef Used to trigger a remeasure if the ref changes.\n */\nexport function useMeasure(\n    ref: RefObject<HTMLElement | null>,\n    adjustForScrollOffset: boolean = false,\n    watchRef: boolean = false,\n) {\n    const [bounds, setContentRect] = useState<DOMRect>(EMPTY_RECT);\n    const refWatch = watchRef ? ref.current : ref;\n    useLayoutEffect(() => {\n        let animationFrameId: number | null = null;\n\n        const measure = () => {\n            animationFrameId = window.requestAnimationFrame(() => {\n                if (!ref.current) {\n                    setContentRect(EMPTY_RECT);\n                    return;\n                }\n                let rect = ref.current.getBoundingClientRect();\n\n                if (adjustForScrollOffset) {\n                    rect = {\n                        ...rect,\n                        y: rect.y + window.scrollY,\n                        top: rect.top + window.scrollY,\n                        bottom: rect.bottom + window.scrollY,\n                        width: rect.width,\n                        height: rect.height,\n                        right: rect.right,\n                        left: rect.left,\n                    };\n                }\n\n                rect.toJSON = () => {\n                    return JSON.stringify({\n                        y: rect.y,\n                        top: rect.top,\n                        bottom: rect.bottom,\n                        width: rect.width,\n                        height: rect.height,\n                        right: rect.right,\n                        left: rect.left,\n                    });\n                };\n\n                setContentRect(rect);\n            });\n        };\n\n        const resizeListener = debounce(() => {\n            measure();\n        }, 100);\n        window.addEventListener(\"resize\", resizeListener);\n\n        const ro = new ResizeObserver(measure);\n        if (ref.current) {\n            ro.observe(ref.current);\n        } else {\n            setContentRect(EMPTY_RECT);\n        }\n\n        return () => {\n            window.cancelAnimationFrame(animationFrameId!);\n            ro.disconnect();\n            resizeListener.cancel();\n            window.removeEventListener(\"resize\", resizeListener);\n            setContentRect(EMPTY_RECT);\n        };\n    }, [adjustForScrollOffset, refWatch, ref]);\n\n    return bounds;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useRef, useEffect, useState, useDebugValue } from \"react\";\nimport { useMeasure } from \"./useMeasure\";\n\n/**\n * Detect if the edges of 2 measures are overlapping.\n *\n * If the edges are touching, but not overlapping, that doesn't count.\n */\nfunction doRectsOverlap(rect1: DOMRectReadOnly, rect2: DOMRectReadOnly) {\n    // For all docblocks here, [] represents rect1 and {} represents rect 2.\n    if (isEmptyRect(rect1) || isEmptyRect(rect2)) {\n        return false;\n    }\n\n    let hasHorizontalOverlap = false;\n\n    //  [      { ]       }\n    if (rect1.left <= rect2.left && rect1.right >= rect2.left) {\n        hasHorizontalOverlap = true;\n    }\n\n    //  {    [  }   ]\n    if (rect2.left <= rect1.left && rect2.right >= rect1.left) {\n        hasHorizontalOverlap = true;\n    }\n\n    //  [   {} ]\n    if (rect1.left <= rect2.left && rect1.right >= rect2.right) {\n        hasHorizontalOverlap = true;\n    }\n\n    //  {  []   }\n    if (rect2.left <= rect1.left && rect2.right >= rect1.right) {\n        hasHorizontalOverlap = true;\n    }\n\n    let hasVerticalOverlap = false;\n\n    // Verical version of  [      { ]       }\n    if (rect1.top <= rect2.top && rect1.bottom >= rect2.top) {\n        hasVerticalOverlap = true;\n    }\n\n    // Verical version of  {    [  }   ]\n    if (rect2.top <= rect1.top && rect2.bottom >= rect1.top) {\n        hasVerticalOverlap = true;\n    }\n\n    // Verical version of  [   {} ]\n    if (rect1.top <= rect2.top && rect1.bottom >= rect2.bottom) {\n        hasVerticalOverlap = true;\n    }\n\n    // Verical version of  {  []   }\n    if (rect2.top <= rect1.top && rect2.bottom >= rect1.bottom) {\n        hasVerticalOverlap = true;\n    }\n\n    // Both overlaps are required to make a collision.\n    return hasVerticalOverlap && hasHorizontalOverlap;\n}\n\nfunction isEmptyRect(rect: DOMRectReadOnly): boolean {\n    return rect.height === 0 || rect.width === 0;\n}\n\nexport function useCollisionDetector() {\n    const collisionSourceRef = useRef<HTMLDivElement | null>(null);\n    let sourceMeasure = useMeasure(collisionSourceRef);\n\n    const vBoundary1Ref = useRef<HTMLDivElement | null>(null);\n    const vBoundary1Measure = useMeasure(vBoundary1Ref);\n\n    const vBoundary2Ref = useRef<HTMLDivElement | null>(null);\n    const vBoundary2Measure = useMeasure(vBoundary2Ref);\n\n    const hBoundary1Ref = useRef<HTMLDivElement | null>(null);\n    const hBoundary1Measure = useMeasure(hBoundary1Ref);\n\n    const hBoundary2Ref = useRef<HTMLDivElement | null>(null);\n    const hBoundary2Measure = useMeasure(hBoundary2Ref);\n\n    const hasCollision =\n        doRectsOverlap(sourceMeasure, vBoundary1Measure) ||\n        doRectsOverlap(sourceMeasure, vBoundary2Measure) ||\n        doRectsOverlap(sourceMeasure, hBoundary1Measure) ||\n        doRectsOverlap(sourceMeasure, hBoundary2Measure);\n\n    useDebugValue({ hasCollision });\n\n    return { collisionSourceRef, hasCollision, vBoundary1Ref, vBoundary2Ref, hBoundary1Ref, hBoundary2Ref };\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useDebugValue } from \"react\";\n\n/**\n * Wrapper around useDebugValue.\n *\n * useDebugValue only works in other hooks, not directly in components.\n * As a result we need to wrap it in a custom hook.\n */\nexport function useComponentDebug(debugValue: any) {\n    return useDebugValue(debugValue);\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport React, { useLayoutEffect, useRef } from \"react\";\n\nexport function useDomNodeAttachment(domNodes?: Node[]): React.RefObject<any> {\n    const ref = useRef<HTMLElement | null>();\n\n    useLayoutEffect(() => {\n        if (domNodes && ref.current) {\n            domNodes.forEach((node) => {\n                ref.current?.appendChild(node);\n            });\n        }\n    }, [domNodes]);\n\n    return ref;\n}\n\ninterface IProps extends React.HTMLAttributes<HTMLDivElement> {\n    nodes: Node[];\n}\n\nexport function DomNodeAttacher(_props: IProps) {\n    const { nodes, ...props } = _props;\n    const ref = useDomNodeAttachment(nodes);\n    return <div {...props} ref={ref} />;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useEffect } from \"react\";\n\nimport { EscapeListener } from \"@vanilla/dom-utils\";\n\n/**\n * React hook for listening for an escape press on the keyboard inside root element.\n *\n * When escape is pressed, the return element will be focused if provided or the callback will will be called.\n */\nexport function useEscapeListener({\n    root,\n    returnElement,\n    callback,\n}: {\n    root?: HTMLElement | null;\n    returnElement?: HTMLElement | null;\n    callback?: (event: KeyboardEvent) => void;\n}) {\n    useEffect(() => {\n        if (root === null || returnElement === null) {\n            // Bail out if these are null. That means we have unfilled refs. Undefined means they were not passed and we should use the defaults.\n            return;\n        }\n        const actualRoot = root || document.documentElement;\n        const escapeListener = new EscapeListener(actualRoot, returnElement, callback);\n        escapeListener.start();\n        return escapeListener.stop;\n    }, [root, returnElement, callback]);\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useEffect, useLayoutEffect } from \"react\";\nimport { FocusWatcher } from \"@vanilla/dom-utils\";\n\n/**\n * React hook for creating and destroying a FocusWatcher. See FocusWatcher documentation.\n */\nexport function useFocusWatcher(\n    ref: React.RefObject<Element | null>,\n    changeHandler: (hasFocus: boolean) => void,\n    bypass?: boolean,\n) {\n    useLayoutEffect(() => {\n        if (bypass) {\n            return;\n        }\n        if (ref.current !== null) {\n            const focusWatcher = new FocusWatcher(ref.current, changeHandler);\n            focusWatcher.start();\n            return focusWatcher.stop;\n        }\n    }, [ref, changeHandler, bypass]);\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { useRef, useEffect } from \"react\";\n\n/**\n * Keep a reference to the previous value of something. (during the previous render).\n *\n * @param value\n */\nexport function useLastValue<T>(value: T): T | undefined {\n    const ref = useRef<T>();\n    useEffect(() => void (ref.current = value), [value]);\n    return ref.current;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useState } from \"react\";\n\n/**\n * Return a throw function for use inside of custom hooks & useEffect.\n *\n * This needed because throwing inside of `useEffect` does not propagate up to error boundaries.\n * @see https://github.com/facebook/react/issues/11334\n */\nexport function useThrowError(): (err: Error) => void {\n    const [error, setError] = useState<Error | null>(null);\n    if (error) {\n        throw error;\n    }\n\n    return setError;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { HTMLAttributes } from \"react\";\n\n/**\n * Deconstructs all attributes from HTML element to recreate it in React\n * This helps to avoid using dangerouslySetInnerHTML\n *\n * @param element - The element to deconstruct\n * @param options - Additionnal options. By default, \"class\" is replaced with \"className\".\n * @returns object - the attributes of that element\n */\nexport function deconstructAttributesFromElement(\n    element: Element,\n    options?: {\n        classAsClassName?: boolean;\n        hrefAsTo?: boolean; // for SmartLinks/Link components\n    },\n): HTMLAttributes<any> {\n    const { classAsClassName = true, hrefAsTo = false } = options || {};\n    const attrs = {};\n    Object.values(element.attributes).forEach(attr => {\n        attrs[attr.name] = attr.value;\n    });\n\n    // If this is to be used in React, we want to replace \"class\" with \"className\"\n    if (classAsClassName && attrs.hasOwnProperty(\"class\")) {\n        attrs[\"className\"] = attrs[\"class\"];\n        delete attrs[\"class\"];\n    }\n\n    // If this is to be used with <SmartLink/> OR <Link>. Do not use for regular <a/> tags.\n    if (hrefAsTo && attrs.hasOwnProperty(\"href\")) {\n        attrs[\"to\"] = attrs[\"href\"];\n        delete attrs[\"href\"];\n    }\n\n    return attrs;\n}\n","/**\n * Utility function related to logging/debugging.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nlet internalDebugValue = false;\n\n/**\n * Get or set the debug flag.\n *\n * @param newValue - The new value of debug.\n * @returns the current debug setting.\n */\nexport function debug(newValue?: boolean): boolean {\n    if (newValue !== undefined) {\n        internalDebugValue = newValue;\n    }\n\n    return internalDebugValue;\n}\n\n/**\n * Log something to console.\n * This only prints in debug mode.\n *\n * @param value - The value to log.\n */\nexport function logDebug(...value: any[]) {\n    if (internalDebugValue) {\n        // eslint-disable-next-line no-console\n        console.log(...value);\n    }\n}\n\n/**\n * Log something to console.\n * This only prints in debug mode, and if outputLog is true.\n *\n * @param outputLog - Condition to render log\n * @param value - The value to log.\n */\nexport function logDebugConditionnal(outputLog = false, ...value: any[]) {\n    if (internalDebugValue && outputLog) {\n        // eslint-disable-next-line no-console\n        console.log(...value);\n    }\n}\n\n/**\n * Log an error to console.\n * This will not run in test mode _unless_ debug is set to true.\n *\n * @param value - The value to log.\n */\nexport function logError(...value: any[]) {\n    if (!internalDebugValue && process.env.NODE_ENV === \"test\") {\n        return;\n    }\n    // eslint-disable-next-line no-console\n    console.error(...value);\n}\n\n/**\n * Log a warning to console.\n * This will not run in test mode _unless_ debug is set to true.\n *\n * @param value - The value to log.\n */\nexport function logWarning(...value: any[]) {\n    if (!internalDebugValue || process.env.NODE_ENV === \"test\") {\n        return;\n    }\n    // eslint-disable-next-line no-console\n    console.warn(...value);\n}\n","'use strict';\nmodule.exports = (fn, wait, opts) => {\n\tif (!Number.isFinite(wait)) {\n\t\tthrow new TypeError('Expected `wait` to be a finite number');\n\t}\n\n\topts = opts || {};\n\n\tlet leadingVal;\n\tlet timer;\n\tlet resolveList = [];\n\n\treturn function () {\n\t\tconst ctx = this;\n\t\tconst args = arguments;\n\n\t\treturn new Promise(resolve => {\n\t\t\tconst runImmediately = opts.leading && !timer;\n\n\t\t\tclearTimeout(timer);\n\n\t\t\ttimer = setTimeout(() => {\n\t\t\t\ttimer = null;\n\n\t\t\t\tconst res = opts.leading ? leadingVal : fn.apply(ctx, args);\n\n\t\t\t\tfor (resolve of resolveList) {\n\t\t\t\t\tresolve(res);\n\t\t\t\t}\n\n\t\t\t\tresolveList = [];\n\t\t\t}, wait);\n\n\t\t\tif (runImmediately) {\n\t\t\t\tleadingVal = fn.apply(ctx, args);\n\t\t\t\tresolve(leadingVal);\n\t\t\t} else {\n\t\t\t\tresolveList.push(resolve);\n\t\t\t}\n\t\t});\n\t};\n};\n","'use strict';\n\nif (process.env.NODE_ENV === \"production\") {\n  module.exports = require(\"./emotion-css.cjs.prod.js\");\n} else {\n  module.exports = require(\"./emotion-css.cjs.dev.js\");\n}\n","export default __webpack_public_path__ + \"619bc298cfc2a42ba6427ad2a10a8858.svg\";","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: !0\n}), require(\"@emotion/cache\"), require(\"@emotion/serialize\"), require(\"@emotion/utils\");\n\nvar createInstance_dist_emotionCssCreateInstance = require(\"../create-instance/dist/emotion-css-create-instance.cjs.prod.js\"), _createEmotion = createInstance_dist_emotionCssCreateInstance.default({\n  key: \"css\"\n}), flush = _createEmotion.flush, hydrate = _createEmotion.hydrate, cx = _createEmotion.cx, merge = _createEmotion.merge, getRegisteredStyles = _createEmotion.getRegisteredStyles, injectGlobal = _createEmotion.injectGlobal, keyframes = _createEmotion.keyframes, css = _createEmotion.css, sheet = _createEmotion.sheet, cache = _createEmotion.cache;\n\nexports.cache = cache, exports.css = css, exports.cx = cx, exports.flush = flush, \nexports.getRegisteredStyles = getRegisteredStyles, exports.hydrate = hydrate, exports.injectGlobal = injectGlobal, \nexports.keyframes = keyframes, exports.merge = merge, exports.sheet = sheet;\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport ReduxActions, { bindThunkAction } from \"@library/redux/ReduxActions\";\nimport actionCreatorFactory from \"typescript-fsa\";\nimport { IApiError } from \"@library/@types/api/core\";\nimport debounce from \"lodash/debounce\";\nimport { ICategory } from \"@vanilla/addon-vanilla/@types/api/categories\";\n\nconst createAction = actionCreatorFactory(\"@@categorySuggestions\");\n\nexport default class CategorySuggestionActions extends ReduxActions {\n    public static loadCategories = createAction.async<{ query: string }, ICategory[], IApiError>(\"GET\");\n\n    private internalLoadCategories = (query: string) => {\n        const apiThunk = bindThunkAction(CategorySuggestionActions.loadCategories, async () => {\n            const params = { query, expand: [\"breadcrumbs\"] };\n            const response = await this.api.get(\"/categories/search\", { params });\n            return response.data;\n        })({ query });\n        return this.dispatch(apiThunk);\n    };\n\n    public loadCategories = debounce(this.internalLoadCategories, 100);\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { IFieldError } from \"@library/@types/api/core\";\nimport { IComboBoxOption } from \"@library/features/search/SearchBar\";\nimport ErrorMessages from \"@library/forms/ErrorMessages\";\nimport { inputBlockClasses } from \"@library/forms/InputBlockStyles\";\nimport * as selectOverrides from \"@library/forms/select/overwrites\";\nimport { selectOneClasses } from \"@library/forms/select/selectOneStyles\";\nimport Paragraph from \"@library/layout/Paragraph\";\nimport { IOptionalComponentID, useUniqueID } from \"@library/utility/idUtils\";\nimport classNames from \"classnames\";\nimport React, { useCallback, useMemo, useState } from \"react\";\nimport Select from \"react-select\";\nimport { OptionProps } from \"react-select/lib/components/Option\";\n\nexport interface ISelectOneProps extends IMenuPlacement {\n    label: string | null;\n    id?: string;\n    inputID?: string;\n    labelID?: string;\n    disabled?: boolean;\n    defaultValue?: IComboBoxOption;\n    className?: string;\n    placeholder?: string;\n    forceOpen?: boolean;\n    options: IComboBoxOption[] | undefined;\n    onChange: (data: IComboBoxOption) => void;\n    onInputChange?: (value: string) => void;\n    onMenuOpen?: () => void;\n    labelNote?: string;\n    noteAfterInput?: string;\n    errors?: IFieldError[];\n    searchable?: boolean;\n    value: IComboBoxOption | undefined;\n    noOptionsMessage?: (props: OptionProps<any>) => JSX.Element | null;\n    isLoading?: boolean;\n    inputClassName?: string;\n    isClearable?: boolean;\n    describedBy?: string;\n    selectRef?: React.RefObject<Select>;\n    onFocus?: () => void;\n}\n\nexport enum MenuPlacement {\n    AUTO = \"auto\",\n    BOTTOM = \"bottom\",\n    TOP = \"top\",\n}\n\nexport interface IMenuPlacement {\n    menuPlacement?: MenuPlacement;\n}\n\n/**\n * Implements the search bar component\n */\nexport default function SelectOne(props: ISelectOneProps) {\n    // Overwrite components in Select component\n    const overrideProps = useOverrideProps(props);\n\n    const prefix = \"SelectOne\";\n    const [isFocused, setIsFocused] = useState(false);\n    const generatedID = useUniqueID(prefix);\n    const id = props.id || generatedID;\n    const inputID = props.inputID || id + \"-input\";\n    const errorID = id + \"-errors\";\n\n    const { className, disabled, options, searchable, forceOpen } = props;\n    let describedBy;\n    const hasErrors = props.errors && props.errors!.length > 0;\n    if (hasErrors) {\n        describedBy = errorID;\n    }\n\n    const classes = selectOneClasses();\n    const classesInputBlock = inputBlockClasses();\n    return (\n        <div\n            className={classNames(classesInputBlock.root, props.className)}\n            onClick={() => {\n                if (!isFocused && props.selectRef?.current) {\n                    props.selectRef?.current.focus();\n                }\n            }}\n        >\n            {props.label !== null && (\n                <label htmlFor={inputID} className={classesInputBlock.labelAndDescription}>\n                    <span className={classNames(classesInputBlock.labelText, props.label)}>{props.label}</span>\n                    <Paragraph className={classesInputBlock.labelNote}>{props.labelNote}</Paragraph>\n                </label>\n            )}\n\n            <div className={classNames(classesInputBlock.inputWrap, classes.inputWrap, { hasFocus: isFocused })}>\n                <Select\n                    {...overrideProps}\n                    id={id}\n                    options={options}\n                    inputId={inputID}\n                    onChange={props.onChange}\n                    defaultValue={props.defaultValue}\n                    onInputChange={props.onInputChange}\n                    isClearable={props.isClearable}\n                    isDisabled={disabled}\n                    classNamePrefix={prefix}\n                    className={classNames(prefix, className)}\n                    aria-label={props.label || undefined}\n                    aria-labelledby={props.labelID || undefined}\n                    aria-invalid={hasErrors}\n                    aria-describedby={describedBy}\n                    isSearchable={searchable}\n                    value={props.value}\n                    menuIsOpen={forceOpen ? true : isFocused === false ? false : undefined}\n                    placeholder={props.placeholder}\n                    isLoading={props.isLoading}\n                    onMenuOpen={props.onMenuOpen}\n                    onFocus={() => {\n                        setIsFocused(true);\n                        props.onFocus?.();\n                    }}\n                    onBlur={() => setIsFocused(false)}\n                    menuPlacement={props.menuPlacement ?? \"auto\"}\n                    ref={props.selectRef}\n                />\n                <Paragraph className={classesInputBlock.labelNote}>{props.noteAfterInput}</Paragraph>\n                <ErrorMessages id={errorID} errors={props.errors} />\n            </div>\n        </div>\n    );\n}\n\nSelectOne.defaultProps = {\n    isClearable: true,\n};\n\n/**\n * Hook to create react-select override props.\n */\nfunction useOverrideProps(props: ISelectOneProps) {\n    const { inputClassName, noOptionsMessage } = props;\n    const componentOverwrites = useMemo(() => {\n        return {\n            Menu: selectOverrides.Menu,\n            MenuList: selectOverrides.MenuList,\n            Option: selectOverrides.SelectOption,\n            ValueContainer: function CustomValueContainer(localProps) {\n                return <selectOverrides.ValueContainer {...localProps} className={inputClassName} />;\n            },\n            DropdownIndicator: function CustomDropdownIndicator(localProps) {\n                return <selectOverrides.DropdownIndicator {...localProps} />;\n            },\n            NoOptionsMessage: noOptionsMessage || selectOverrides.NoOptionsMessage,\n            LoadingMessage: selectOverrides.OptionLoader,\n        };\n    }, [inputClassName, noOptionsMessage]);\n\n    const customStyles = useMemo(() => {\n        return {\n            option: () => ({}),\n            menu: (base) => {\n                return { ...base, backgroundColor: null, boxShadow: null };\n            },\n            control: () => ({\n                borderWidth: 0,\n            }),\n        };\n    }, []);\n\n    // Overwrite theme in Select component\n    const getTheme = useCallback((theme) => {\n        return {\n            ...theme,\n            borderRadius: {},\n            borderWidth: 0,\n            colors: {},\n            spacing: {},\n        };\n    }, []);\n\n    return {\n        components: componentOverwrites,\n        theme: getTheme,\n        styles: customStyles,\n    };\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { LoadStatus, ILoadable } from \"@library/@types/api/core\";\nimport { produce } from \"immer\";\nimport CategorySuggestionActions from \"@vanilla/addon-vanilla/categories/CategorySuggestionActions\";\nimport { reducerWithInitialState } from \"typescript-fsa-reducers\";\nimport clone from \"lodash/clone\";\nimport { ICategory } from \"@vanilla/addon-vanilla/@types/api/categories\";\n\nexport interface ICategoriesState {\n    suggestions: ILoadable<ICategory[]>;\n}\n\nconst INITIAL_STATE: ICategoriesState = {\n    suggestions: {\n        status: LoadStatus.PENDING,\n    },\n};\n\nexport const categoriesReducer = produce(\n    reducerWithInitialState(clone(INITIAL_STATE))\n        .case(CategorySuggestionActions.loadCategories.started, (nextState, payload) => {\n            nextState.suggestions.status = LoadStatus.LOADING;\n            return nextState;\n        })\n        .case(CategorySuggestionActions.loadCategories.done, (nextState, payload) => {\n            nextState.suggestions.status = LoadStatus.SUCCESS;\n            nextState.suggestions.data = payload.result;\n            return nextState;\n        })\n        .case(CategorySuggestionActions.loadCategories.failed, (nextState, payload) => {\n            nextState.suggestions.status = LoadStatus.ERROR;\n            nextState.suggestions.error = payload.error;\n            return nextState;\n        }),\n);\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { categoriesReducer } from \"@vanilla/addon-vanilla/categories/categoriesReducer\";\nimport { combineReducers } from \"redux\";\nimport { IForumState } from \"./state\";\n\nexport const forumReducer = combineReducers<IForumState>({\n    categories: categoriesReducer,\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport apiv2 from \"@library/apiv2\";\nimport { t } from \"@library/utility/appUtils\";\nimport CategorySuggestionActions from \"@vanilla/addon-vanilla/categories/CategorySuggestionActions\";\nimport { IForumStoreState } from \"@vanilla/addon-vanilla/redux/state\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { OptionProps } from \"react-select/lib/components/Option\";\nimport { NoOptionsMessage } from \"@library/forms/select/overwrites\";\nimport { ILoadable, LoadStatus } from \"@library/@types/api/core\";\nimport { IComboBoxOption } from \"@vanilla/library/src/scripts/features/search/SearchBar\";\nimport Tokens, { ITokenProps } from \"@vanilla/library/src/scripts/forms/select/Tokens\";\nimport SelectOne from \"@vanilla/library/src/scripts/forms/select/SelectOne\";\n\ninterface IProps {\n    multiple?: boolean;\n    lookup: (value: string, first?: boolean) => {};\n    suggestions: ILoadable<any>;\n    onChange: (tokens: IComboBoxOption[]) => void;\n    value: IComboBoxOption[];\n    label: string | null;\n    labelNote?: string;\n    disabled?: boolean;\n    className?: string;\n    placeholder?: string;\n    isLoading: boolean;\n    hideTitle?: boolean;\n}\n\n/**\n * Form component for searching/selecting a category.\n */\nexport class CommunityCategoryInput extends React.Component<IProps> {\n    public static defaultProps: Partial<IProps> = {\n        isLoading: false,\n        suggestions: {\n            status: LoadStatus.PENDING,\n        },\n    };\n\n    lookupOnFocus = () => {\n        if (!this.props.suggestions.data || this.props.suggestions.data.length === 0) {\n            this.props.lookup(\"\", true);\n        }\n    };\n\n    public render() {\n        const { suggestions, multiple } = this.props;\n        let options: IComboBoxOption[] | undefined;\n        if (suggestions.status === LoadStatus.SUCCESS && suggestions.data) {\n            options = suggestions.data.map((suggestion) => {\n                let parentLabel;\n                const crumbLength = suggestion.breadcrumbs?.length ?? 0;\n                if (crumbLength > 1) {\n                    parentLabel = suggestion.breadcrumbs[crumbLength - 2].name;\n                }\n\n                return {\n                    value: suggestion.categoryID,\n                    label: suggestion.name,\n                    data: {\n                        parentLabel,\n                    },\n                };\n            });\n        }\n\n        if (multiple) {\n            return (\n                <Tokens\n                    onFocus={this.lookupOnFocus}\n                    placeholder={t(\"Search...\")}\n                    {...this.props}\n                    label={this.props.label ?? t(\"Community Category\")}\n                    showIndicator\n                    options={options}\n                />\n            );\n        }\n        return (\n            <SelectOne\n                onFocus={this.lookupOnFocus}\n                placeholder={t(\"Search...\")}\n                {...this.props}\n                onChange={(option) => {\n                    if (this.props.onChange) this.props.onChange([option]);\n                }}\n                options={options}\n                label={this.props.label ?? t(\"Community Category\")}\n                value={(options || [])[0]}\n            />\n        );\n    }\n\n    private noOptionsMessage(props: OptionProps<any>): JSX.Element | null {\n        let text = \"\";\n        if (props.selectProps.inputValue === \"\") {\n            text = t(\"Search for a category\");\n        } else {\n            text = t(\"No categories found\");\n        }\n        return <NoOptionsMessage {...props}>{text}</NoOptionsMessage>;\n    }\n}\n\nfunction mapStateToProps(state: IForumStoreState, ownProps: IProps) {\n    return {\n        isLoading: state.forum.categories.suggestions.status === LoadStatus.LOADING,\n        suggestions: state.forum.categories.suggestions,\n    };\n}\n\nfunction mapDispatchToProps(dispatch: any) {\n    const categorySuggestionActions = new CategorySuggestionActions(dispatch, apiv2);\n\n    return {\n        lookup: (query: string, first = false) => {\n            query = query.trim();\n            if (!first && !query) return;\n            categorySuggestionActions.loadCategories(query);\n        },\n    };\n}\n\nconst withRedux = connect(mapStateToProps, mapDispatchToProps);\n\nexport default withRedux(CommunityCategoryInput);\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useState } from \"react\";\nimport Tokens, { ITokenProps } from \"@vanilla/library/src/scripts/forms/select/Tokens\";\nimport { useTagSearch } from \"@library/features/tags/TagsHooks\";\nimport { IComboBoxOption } from \"@library/features/search/SearchBar\";\nimport { LoadStatus } from \"@library/@types/api/core\";\n\ninterface IProps extends Omit<ITokenProps, \"options\" | \"isLoading\" | \"value\" | \"onChange\"> {\n    value?: IComboBoxOption[];\n    onChange: (tokens: IComboBoxOption[]) => void;\n    menuPlacement?: string;\n}\n\nexport function TagsInput(props: IProps) {\n    const [text, setText] = useState(\"\");\n\n    const { status = LoadStatus.LOADING, data = [] } = useTagSearch(text) || {};\n\n    return (\n        <Tokens\n            {...props}\n            value={!props.value ? [] : props.value}\n            onInputChange={setText}\n            onChange={(options) => {\n                props.onChange(options);\n            }}\n            options={data.map((tag) => {\n                return {\n                    value: tag.id,\n                    label: tag.name,\n                    tagCode: tag.urlCode,\n                };\n            })}\n            isLoading={!!text || [LoadStatus.PENDING, LoadStatus.LOADING].includes(status)}\n        />\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useSelector } from \"react-redux\";\nimport { ILoadable, LoadStatus } from \"@vanilla/library/src/scripts/@types/api/core\";\nimport { ITag, ITagsStateStoreState } from \"@library/features/tags/TagsReducer\";\nimport { useEffect } from \"react\";\nimport { useTagsActions } from \"@library/features/tags/TagsAction\";\n\nexport function useTagSearch(search: string): ILoadable<ITag[]> {\n    search = search.trim();\n    const { getTags } = useTagsActions();\n    const tagsByName = useSelector((state: ITagsStateStoreState) => state.tags?.tagsByName[search]);\n\n    const { status = LoadStatus.PENDING, data = {} } = tagsByName || {};\n\n    useEffect(() => {\n        if (status && status === LoadStatus.PENDING && search) {\n            getTags({ name: search });\n        }\n    }, [search, status, getTags]);\n\n    return tagsByName;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { IComboBoxOption } from \"@library/features/search/SearchBar\";\nimport DateRange from \"@library/forms/DateRange\";\nimport { dateRangeClasses } from \"@library/forms/dateRangeStyles\";\nimport { inputBlockClasses } from \"@library/forms/InputBlockStyles\";\nimport InputTextBlock from \"@library/forms/InputTextBlock\";\nimport { FilterFrame } from \"@library/search/panels/FilterFrame\";\nimport { useSearchForm } from \"@library/search/SearchContext\";\nimport { t } from \"@library/utility/appUtils\";\nimport React from \"react\";\nimport Checkbox from \"@library/forms/Checkbox\";\nimport CommunityCategoryInput from \"@vanilla/addon-vanilla/forms/CommunityCategoryInput\";\nimport { ICommunitySearchTypes } from \"@vanilla/addon-vanilla/search/communitySearchTypes\";\nimport MultiUserInput from \"@library/features/users/MultiUserInput\";\nimport CheckboxGroup from \"@library/forms/CheckboxGroup\";\nimport { CommunityPostTypeFilter } from \"@vanilla/addon-vanilla/search/CommunityPostTypeFilter\";\nimport { TagsInput } from \"@library/features/tags/TagsInput\";\n\n/**\n * Implement search filter panel for discussions\n */\nexport function SearchFilterPanelCommunity() {\n    const { form, updateForm, search } = useSearchForm<ICommunitySearchTypes>();\n\n    const classesInputBlock = inputBlockClasses();\n    const classesDateRange = dateRangeClasses();\n\n    return (\n        <FilterFrame handleSubmit={search}>\n            <InputTextBlock\n                label={t(\"Title\")}\n                inputProps={{\n                    onChange: (event: React.ChangeEvent<HTMLInputElement>) => {\n                        const { value } = event.target;\n                        updateForm({ name: value });\n                    },\n                    value: form.name || undefined,\n                }}\n            />\n            <MultiUserInput\n                className={classesInputBlock.root}\n                onChange={(options: IComboBoxOption[]) => {\n                    updateForm({ authors: options });\n                }}\n                value={form.authors ?? []}\n            />\n            <DateRange\n                onStartChange={(date: string) => {\n                    updateForm({ startDate: date });\n                }}\n                onEndChange={(date: string) => {\n                    updateForm({ endDate: date });\n                }}\n                start={form.startDate}\n                end={form.endDate}\n                className={classesDateRange.root}\n            />\n            <CommunityCategoryInput\n                label={t(\"Category\")}\n                multiple\n                onChange={(options) => {\n                    updateForm({ categoryOptions: options });\n                }}\n                value={form.categoryOptions ?? []}\n            />\n\n            <CheckboxGroup tight={true}>\n                <Checkbox\n                    disabled={(form.categoryOptions?.length || 0) > 1}\n                    label={t(\"Search Subcategories\")}\n                    onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\n                        updateForm({ includeChildCategories: event.target.checked || false });\n                    }}\n                    checked={form.includeChildCategories ?? false}\n                    className={classesInputBlock.root}\n                />\n                <Checkbox\n                    label={t(\"Search Followed Categories Only\")}\n                    onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\n                        updateForm({ followedCategories: event.target.checked || false });\n                    }}\n                    checked={form.followedCategories ?? false}\n                    className={classesInputBlock.root}\n                />\n                <Checkbox\n                    label={t(\"Search Archived Categories\")}\n                    onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\n                        updateForm({ includeArchivedCategories: event.target.checked || false });\n                    }}\n                    checked={form.includeArchivedCategories ?? false}\n                    className={classesInputBlock.root}\n                />\n            </CheckboxGroup>\n\n            <TagsInput\n                label={t(\"Tags\")}\n                value={form.tagsOptions ?? []}\n                onChange={(options: IComboBoxOption[]) => {\n                    updateForm({ tagsOptions: options });\n                }}\n            />\n\n            <CommunityPostTypeFilter />\n        </FilterFrame>\n    );\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { useSearchForm } from \"@library/search/SearchContext\";\nimport { inputBlockClasses } from \"@vanilla/library/src/scripts/forms/InputBlockStyles\";\nimport { dateRangeClasses } from \"@vanilla/library/src/scripts/forms/dateRangeStyles\";\nimport { FilterFrame } from \"@vanilla/library/src/scripts/search/panels/FilterFrame\";\nimport { t } from \"@vanilla/library/src/scripts/utility/appUtils\";\nimport { IComboBoxOption } from \"@vanilla/library/src/scripts/features/search/SearchBar\";\nimport MultiUserInput from \"@vanilla/library/src/scripts/features/users/MultiUserInput\";\nimport DateRange from \"@vanilla/library/src/scripts/forms/DateRange\";\n\ninterface IProps {}\n\n/**\n * Implement search filter panel for all types\n */\nexport function SearchFilterPanelComments(props: IProps) {\n    const { form, updateForm, search } = useSearchForm();\n    const classesInputBlock = inputBlockClasses();\n    const classesDateRange = dateRangeClasses();\n    return (\n        <FilterFrame title={t(\"Filter Results\")} handleSubmit={search}>\n            <MultiUserInput\n                className={classesInputBlock.root}\n                onChange={(options: IComboBoxOption[]) => {\n                    updateForm({ authors: options });\n                }}\n                value={form.authors ?? []}\n            />\n            <DateRange\n                onStartChange={(date: string) => {\n                    updateForm({ startDate: date });\n                }}\n                onEndChange={(date: string) => {\n                    updateForm({ endDate: date });\n                }}\n                start={form.startDate}\n                end={form.endDate}\n                className={classesDateRange.root}\n            />\n        </FilterFrame>\n    );\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { LoadingRectangle, LoadingSpacer, LoadingCircle } from \"@vanilla/library/src/scripts/loaders/LoadingRectangle\";\nimport ScreenReaderContent from \"@vanilla/library/src/scripts/layout/ScreenReaderContent\";\nimport { t } from \"@vanilla/library/src/scripts/utility/appUtils\";\nimport { useLayout } from \"@vanilla/library/src/scripts/layout/LayoutContext\";\nimport { searchResultClasses } from \"@vanilla/library/src/scripts/features/search/searchResultsStyles\";\nimport classNames from \"classnames\";\n\ninterface IProps {\n    headingLevel?: 2 | 3;\n}\n\nexport default function CollapseCommentsSearchMetaLoader(props: IProps) {\n    const { headingLevel = 1 } = props;\n    const HeadingTag = `h${headingLevel}` as \"h1\";\n\n    const layoutContext = useLayout();\n    const classes = searchResultClasses(layoutContext.mediaQueries, true);\n    return (\n        <div className={classNames(classes.content, classes.commentWrap)}>\n            <ScreenReaderContent>{t(\"Loading\")}</ScreenReaderContent>\n            <div className={classes.iconWrap}>\n                <LoadingCircle height={26} width={26} />\n            </div>\n            <div className={classNames(classes.main, { hasIcon: true })}>\n                <div className={classes.metas}>\n                    <HeadingTag className={classes.title}>\n                        <LoadingRectangle height={15} width={300} />\n                    </HeadingTag>\n                    <LoadingSpacer height={8} width={250} />\n                    <div style={{ display: \"flex\" }}>\n                        <LoadingRectangle height={12} width={230} />\n                        <LoadingRectangle height={12} width={50} style={{ marginLeft: 10 }} />\n                    </div>\n                    <LoadingSpacer height={6} width={250} />\n                </div>\n            </div>\n        </div>\n    );\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useMemo, useState } from \"react\";\nimport { searchResultClasses } from \"@vanilla/library/src/scripts/features/search/searchResultsStyles\";\nimport { useLayout } from \"@vanilla/library/src/scripts/layout/LayoutContext\";\nimport { TypeDiscussionsIcon } from \"@vanilla/library/src/scripts/icons/searchIcons\";\nimport classNames from \"classnames\";\nimport SmartLink from \"@vanilla/library/src/scripts/routing/links/SmartLink\";\nimport { ResultMeta } from \"@library/result/ResultMeta\";\nimport CollapseCommentsSearchMetaLoader from \"@vanilla/addon-vanilla/search/CollapseCommentsSearchMetaLoader\";\nimport { ICountResult } from \"@vanilla/library/src/scripts/search/searchTypes\";\nimport { useDiscussion } from \"@vanilla/library/src/scripts/features/discussions/discussionHooks\";\nimport { LoadStatus } from \"@vanilla/library/src/scripts/@types/api/core\";\nimport { notEmpty } from \"@vanilla/utils\";\nimport ErrorMessages from \"@vanilla/library/src/scripts/forms/ErrorMessages\";\nimport { useFallbackBackUrl } from \"@vanilla/library/src/scripts/routing/links/BackRoutingProvider\";\nimport qs from \"qs\";\nimport { makeSearchUrl } from \"@vanilla/library/src/scripts/search/SearchPageRoute\";\n\ninterface IProps {\n    discussionID: number;\n    icon?: React.ReactNode;\n    headingLevel?: 2 | 3;\n}\n\nexport default function CollapseCommentSearchMeta(props: IProps) {\n    const { icon = <TypeDiscussionsIcon />, headingLevel = 2, discussionID } = props;\n    const layoutContext = useLayout();\n    const [forceLoader] = useState(false);\n\n    const discussion = useDiscussion({ discussionID });\n\n    // Back link\n    const backUrl = useMemo(() => {\n        const { search, host, pathname } = window.location;\n        if (search) {\n            const queryObj = qs.parse(search);\n            if (queryObj.discussionID !== undefined) {\n                delete queryObj.discussionID;\n            }\n            const newQuery = qs.stringify(queryObj);\n            return makeSearchUrl() + \"?\" + newQuery;\n        }\n        return makeSearchUrl();\n    }, []);\n    useFallbackBackUrl(backUrl);\n\n    if (forceLoader || ([LoadStatus.PENDING, LoadStatus.LOADING].includes(discussion.status) && !discussion.data)) {\n        return <CollapseCommentsSearchMetaLoader />;\n    }\n\n    if (!discussion.data || discussion.error) {\n        return <ErrorMessages errors={[discussion.error].filter(notEmpty)} />;\n    }\n\n    const HeadingTag = `h${headingLevel}` as \"h1\";\n    const counts: ICountResult = {\n        count: discussion.data.countComments,\n        labelCode: \"comments\",\n    };\n\n    const classes = searchResultClasses(layoutContext.mediaQueries, !!icon);\n    return (\n        <div className={classNames(classes.content, classes.commentWrap)}>\n            <div className={classes.iconWrap}>{icon}</div>\n            <div className={classNames(classes.main, { hasIcon: !!icon })}>\n                <SmartLink to={discussion.data.url} tabIndex={0} className={classes.link}>\n                    <HeadingTag className={classes.title}>{discussion.data.name}</HeadingTag>\n                </SmartLink>\n                <div className={classes.metas}>\n                    <ResultMeta\n                        updateUser={discussion.data.insertUser}\n                        type={\"discussion\"}\n                        counts={[counts]}\n                        crumbs={discussion.data.breadcrumbs}\n                    />\n                </div>\n            </div>\n        </div>\n    );\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { IGetDiscussionByID, useDiscussionActions } from \"@library/features/discussions/DiscussionActions\";\nimport { IDiscussionsStoreState } from \"@library/features/discussions/discussionModel\";\nimport { useSelector } from \"react-redux\";\nimport { LoadStatus } from \"@vanilla/library/src/scripts/@types/api/core\";\nimport { useEffect } from \"react\";\n\nexport function useDiscussion(query: IGetDiscussionByID) {\n    const actions = useDiscussionActions();\n    const { discussionID } = query;\n\n    const existingResult = useSelector((state: IDiscussionsStoreState) => {\n        return (\n            state.discussions.discussionsByID[discussionID] ?? {\n                status: LoadStatus.PENDING,\n            }\n        );\n    });\n\n    const { status } = existingResult;\n\n    useEffect(() => {\n        if (LoadStatus.PENDING.includes(status)) {\n            actions.getDiscussionByID(query);\n        }\n    }, [status, actions, query]);\n\n    return existingResult;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { shadowHelper } from \"@library/styles/shadowHelpers\";\nimport { absolutePosition, BorderType, flexHelper } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { ISimpleBorderStyle, IFont, IBackground } from \"@library/styles/cssUtilsTypes\";\nimport { Variables } from \"@library/styles/Variables\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { CSSObject } from \"@emotion/css\";\nimport { percent, ColorHelper, calc, color, rgba } from \"csx\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\n\nconst defaultIcon = require(\"!file-loader!./widgetDefaultIcon.svg\").default;\n\nexport enum HomeWidgetItemContentType {\n    TITLE = \"title\",\n    TITLE_DESCRIPTION = \"title-description\",\n    TITLE_DESCRIPTION_IMAGE = \"title-description-image\",\n    TITLE_DESCRIPTION_ICON = \"title-description-icon\",\n    TITLE_BACKGROUND = \"title-background\",\n    TITLE_CHAT_BUBBLE = \"title-chat-bubble\",\n}\n\nexport interface IHomeWidgetItemOptions {\n    borderType?: BorderType;\n    borderRadius?: string | number;\n    background?: IBackground;\n    contentType?: HomeWidgetItemContentType;\n    fg?: string | ColorHelper;\n    display?: {\n        description?: boolean;\n        counts?: boolean;\n    };\n    name?: {\n        hidden?: boolean;\n        font?: IFont;\n        states?: any; //FIXME\n    };\n    verticalAlignment?: \"top\" | \"middle\" | \"bottom\" | string;\n    alignment?: \"center\" | \"left\";\n    viewMore?: {\n        labelCode?: string;\n        buttonType?: ButtonTypes;\n    };\n    defaultIconUrl?: string;\n    defaultImageUrl?: string;\n    iconProps?: {\n        placement?: \"top\" | \"left\";\n        background?: IBackground;\n        border?: ISimpleBorderStyle;\n        size?: number;\n    };\n}\n\nexport const homeWidgetItemVariables = useThemeCache(\n    (optionOverrides?: IHomeWidgetItemOptions, itemVars?: IThemeVariables) => {\n        const makeVars = variableFactory(\"homeWidgetItem\", itemVars);\n        const globalVars = globalVariables(itemVars);\n        const layoutVars = layoutVariables(itemVars);\n\n        /**\n         * @varGroup homeWidgetItem.options\n         * @commonTitle Options\n         * @description Within a HomeWidget, an item is an individual grid item. These items could represent a discussion, article, category etc.\n         */\n        let options = makeVars(\n            \"options\",\n            {\n                display: {\n                    description: true,\n                    counts: true,\n                },\n                name: {\n                    hidden: false,\n                    font: Variables.font({}),\n                    states: Variables.clickable({}),\n                },\n                contentType: HomeWidgetItemContentType.TITLE_DESCRIPTION_ICON,\n                borderType: BorderType.NONE,\n                borderRadius: globalVars.border.radius,\n                background: Variables.background({}),\n                fg: globalVars.mainColors.fg,\n                viewMore: {\n                    buttonType: ButtonTypes.TRANSPARENT,\n                    labelCode: \"View More\",\n                },\n                verticalAlignment: \"middle\",\n                alignment: \"left\" as \"left\" | \"center\",\n                defaultIconUrl: defaultIcon as string | undefined,\n                defaultImageUrl: undefined as string | undefined,\n                iconProps: {\n                    placement: \"top\" as \"top\" | \"left\",\n                    background: Variables.background({}),\n                    border: Variables.border({\n                        width: 0,\n                    }),\n                    size: undefined as number | undefined,\n                },\n            },\n            optionOverrides,\n        );\n\n        const hasImage = options.contentType === HomeWidgetItemContentType.TITLE_DESCRIPTION_IMAGE;\n        const hasBackground = options.contentType === HomeWidgetItemContentType.TITLE_BACKGROUND;\n        const hasIcon = options.contentType === HomeWidgetItemContentType.TITLE_DESCRIPTION_ICON;\n        const iconPlacementLeft = options.iconProps.placement === \"left\";\n        const hasChatBubble = options.contentType === HomeWidgetItemContentType.TITLE_CHAT_BUBBLE;\n\n        options = makeVars(\n            \"options\",\n            {\n                ...options,\n                overflow: hasChatBubble ? \"visible\" : \"hidden\",\n                fg:\n                    !options.background.color || ColorsUtils.isLightColor(options.background.color)\n                        ? globalVars.mainColors.fg\n                        : globalVars.mainColors.bg,\n                borderType:\n                    options.background?.color || hasImage || hasBackground || hasIcon\n                        ? BorderType.SHADOW\n                        : options.borderType,\n                alignment: !iconPlacementLeft && (hasIcon || hasBackground) ? \"center\" : \"left\",\n            },\n            optionOverrides,\n        );\n\n        options = makeVars(\n            \"options\",\n            {\n                ...options,\n                background: {\n                    alignment: hasIcon ? \"center\" : \"left\",\n                    color: options.borderType !== BorderType.NONE ? globalVars.mainColors.bg : undefined,\n                },\n            },\n            optionOverrides,\n        );\n\n        const sizing = makeVars(\"sizing\", {\n            /**\n             * @var homeWidgetItem.sizing.minWidth\n             * @title Minimum Width\n             * @type number\n             * @description Apply a minimum width to HomeWidgetItems.\n             */\n            minWidth: layoutVars.contentSizes.full / 4 - layoutVars.gutter.size * 5, // Min width allows 4 items to fit.\n        });\n\n        const hasBorder = [BorderType.BORDER, BorderType.SHADOW].includes(options.borderType);\n\n        const spacing = makeVars(\"spacing\", {\n            /**\n             * @varGroup homeWidgetItem.spacing.contentPadding\n             * @commonTitle Content Padding\n             * @expand spacing\n             */\n            contentPadding: Variables.spacing({\n                vertical: hasBorder || hasImage ? 24 : 0,\n                top:\n                    iconPlacementLeft && (!options.iconProps.background.color || !options.display.description)\n                        ? 8\n                        : hasIcon\n                        ? 0\n                        : undefined,\n                bottom: hasIcon || hasBorder ? 8 : 0,\n                horizontal: iconPlacementLeft ? 8 : hasBorder ? (hasIcon || hasBackground ? 24 : 16) : 0,\n            }),\n        });\n\n        const iconContainer = makeVars(\"iconContainer\", {\n            /**\n             * @var homeWidgetItem.iconContainer.padding\n             * @title IconContainer Padding\n             * @type number | string\n             * @expand spacing\n             */\n            padding: iconPlacementLeft ? 8 : 24,\n\n            /**\n             * @var homeWidgetItem.iconContainer.borderRadius\n             * @title Homewidget Item IconContainer Border Radius\n             * @type number\n             * @description The border radius of icon container\n             */\n            borderRadius: options.iconProps.background ? globalVars.border.radius : undefined,\n            hoverBackgroundColor: options.iconProps.background.color\n                ? ColorsUtils.modifyColorBasedOnLightness({\n                      color: options.iconProps.background.color,\n                      weight: 0.1,\n                  })\n                : undefined,\n        });\n\n        const icon = makeVars(\"icon\", {\n            /**\n             * @var homeWidgetItem.icon.size\n             * @title HomeWidgetItem Icon Size\n             * @type number | string\n             * @description Sets the size of homewidget icons i\n             */\n            size: options.iconProps.size ? options.iconProps.size : iconPlacementLeft ? 48 : 72,\n            /**\n             * @varGroup homeWidgetItem.icon.background\n             * @description Background properties to apply to the icon of the widget item.\n             * @expand background\n             */\n            background: Variables.background({}),\n            /**\n             * @varGroup homeWidgetItem.icon.background\n             * @description Background properties to apply to the icon of the widget item when the item is hovered, focused or active.\n             * @expand background\n             */\n            backgroundState: Variables.background({}),\n        });\n\n        let background = makeVars(\"background\", {\n            /**\n             * @varGroup homeWidgetItem.background.fg\n             * @title ForeGround Color\n             */\n            fg: {\n                color: globalVars.elementaryColors.white,\n            },\n\n            /**\n             * @varGroup homeWidgetItem.background.fg\n             * @title Background Color\n             * @expand background\n             */\n            bg: Variables.background({}),\n\n            /**\n             * @varGroup homeWidgetItem.background.scrim\n             * @title Overlay Color\n             * @expand background\n             */\n            scrim: Variables.background({}),\n        });\n\n        const isForegroundLight = background.fg.color.lightness() >= 0.5;\n        background = makeVars(\"background\", {\n            ...background,\n            scrim: {\n                ...background.scrim,\n                color: isForegroundLight\n                    ? globalVars.elementaryColors.black.fade(0.3)\n                    : globalVars.elementaryColors.white.fade(0.3),\n            },\n        });\n\n        const name = makeVars(\"name\", {\n            /**\n             * @varGroup homeWidgetItem.name.font\n             * @expand font\n             */\n            font: Variables.font({\n                color: options.name.font.color ?? options.fg,\n                size: (() => {\n                    if (options.name.font.size) {\n                        return options.name.font.size;\n                    }\n                    // else if (hasBackground) {\n                    //     return globalVars.fonts.size.title;\n                    // }\n                    return undefined;\n                })(),\n                weight: (() => {\n                    if (options.name.font.weight) {\n                        return options.name.font.weight;\n                    } else if (hasBackground) {\n                        return globalVars.fonts.weights.semiBold;\n                    }\n                    return undefined;\n                })(),\n            }),\n\n            /**\n             * @varGroup homeWidgetItem.name.background\n             * @commonTitle Name Background\n             * @expand background\n             */\n            background: Variables.background({\n                color: color(\"#fff\"),\n            }),\n\n            /**\n             * @var homeWidgetItem.name.afterContent\n             * @description Indicates whether there is content that appears after the HomeWidget Name\n             * @type string\n             * @title AfterContent\n             */\n            afterContent: hasChatBubble ? \"triangle\" : \"none\",\n\n            /**\n             * @varGroup homeWidgetItem.name.spacing\n             * @commonTitle Name Spacing\n             * @expand spacing\n             */\n            spacing: hasChatBubble\n                ? Variables.spacing({\n                      vertical: 50,\n                      horizontal: 38,\n                  })\n                : Variables.spacing({}),\n            states: Variables.clickable({\n                hover: options.name.states.hover ?? undefined,\n                focus: options.name.states.focus ?? undefined,\n            }),\n        });\n\n        const callToAction = makeVars(\"callToAction\", {\n            /**\n             * @varGroup homeWidgetItem.callToAction.padding\n             * @commonTitle Call To Action Padding\n             * @expand spacing\n             */\n            padding: {\n                ...name.spacing,\n                top: 20,\n            },\n\n            /**\n             * @varGroup homeWidgetItem.callToAction.font\n             * @commonTitle Call To Action Font\n             * @expand font\n             */\n            font: Variables.font({\n                transform: \"uppercase\",\n                color: options.fg,\n                size: 13,\n                weight: globalVars.fonts.weights.semiBold,\n            }),\n        });\n\n        const description = makeVars(\"description\", {\n            /**\n             * @varGroup homeWidgetItem.description.spacing\n             * @commonTitle Description Padding\n             * @expand spacing\n             */\n            spacing: Variables.spacing({\n                ...name.spacing,\n                top: 0,\n                bottom: 0,\n            }),\n\n            /**\n             * @varGroup homeWidgetItem.description.font\n             * @commonTitle Description Font\n             * @expand font\n             */\n            font: Variables.font({\n                color: options.fg,\n                lineHeight: globalVars.lineHeights.base,\n            }),\n        });\n\n        const image = makeVars(\"image\", {\n            /**\n             * @var homeWidgetItem.image.ratio\n             * @description Aspect ratio of HomeWidgetItem image.\n             * @title Aspect Ratio\n             */\n            ratio: {\n                /**\n                 * @var homeWidgetItem.image.ratio.height\n                 * @title Image Height\n                 * @description Height of HomeWidget Item Image\n                 * @type number\n                 */\n                height: hasBackground ? 16 : 9,\n\n                /**\n                 * @var homeWidgetItem.image.ratio.width\n                 * @title Image Width\n                 * @description Widtht of HomeWidget Item Image\n                 * @type number\n                 */\n                width: 16,\n            },\n\n            /**\n             * @var homeWidgetItem.image.maxHeight\n             * @description The maximum height of the HomeWidgetItem image.\n             * @title Maximum Image Height\n             * @type number\n             */\n            maxHeight: hasBackground ? 400 : 250,\n        });\n\n        return { options, sizing, name, callToAction, description, spacing, image, icon, iconContainer, background };\n    },\n);\n\nexport const homeWidgetItemClasses = useThemeCache((optionOverrides?: IHomeWidgetItemOptions) => {\n    const vars = homeWidgetItemVariables(optionOverrides);\n    const globalVars = globalVariables();\n    const style = styleFactory(\"homeWidgetItem\");\n\n    const borderStyling = ((): CSSObject => {\n        switch (vars.options.borderType) {\n            case BorderType.BORDER:\n                return {\n                    ...Mixins.border({\n                        radius: vars.options.borderRadius,\n                    }),\n                    ...{\n                        \"&:hover, &:focus\": {\n                            ...Mixins.border({\n                                color: globalVars.border.colorHover,\n                                radius: vars.options.borderRadius,\n                            }),\n                        },\n                    },\n                };\n            case BorderType.SHADOW:\n                return {\n                    borderRadius: vars.options.borderRadius,\n                    ...shadowHelper().embed(),\n                    ...{\n                        \"&:hover, &:focus\": {\n                            ...shadowHelper().embedHover(),\n                        },\n                    },\n                };\n            case BorderType.SHADOW_AS_BORDER:\n            case BorderType.NONE:\n            default:\n                return {\n                    borderRadius: vars.options.borderRadius,\n                };\n        }\n    })();\n\n    const buttonStateStyles = vars.name.states.hover\n        ? Mixins.clickable.itemState(vars.name.states)\n        : Mixins.clickable.itemState();\n    const isIconLeft = vars.options.iconProps.placement === \"left\";\n    const isIconLeftAndDescriptionHidden = isIconLeft && !vars.options.display.description;\n    const hasChatBubble = vars.options.contentType === HomeWidgetItemContentType.TITLE_CHAT_BUBBLE;\n    const hasBubbleShadow = hasChatBubble && vars.options.borderType === BorderType.SHADOW;\n\n    const bubbleTriangle: CSSObject =\n        vars.name.afterContent === \"triangle\"\n            ? {\n                  ...(hasChatBubble ? Mixins.background(vars.name.background) : {}),\n                  boxShadow: hasChatBubble ? \"4px 4px 7px rgba(0,0,0, .05)\" : undefined,\n                  content: \"''\",\n                  width: 20,\n                  height: 20,\n                  position: \"absolute\",\n                  top: `calc(100% - ${10}px)`,\n                  transform: `rotate(45deg)`,\n                  left: 30,\n              }\n            : {};\n\n    const linkState = Mixins.clickable.itemState({\n        default: vars.name.font.color,\n        allStates: ColorsUtils.offsetLightness(vars.name.font.color!, 0.05),\n    });\n\n    const name = style(\n        \"name\",\n        {\n            ...Mixins.padding(vars.name.spacing),\n            ...Mixins.font(vars.name.font),\n            ...Mixins.background(vars.name.background),\n            marginBottom: isIconLeftAndDescriptionHidden\n                ? 0\n                : hasChatBubble\n                ? styleUnit(30)\n                : styleUnit(globalVars.gutter.half),\n            boxShadow: hasChatBubble ? \"0 0px 15px rgba(0,0,0, .15)\" : \"none\",\n            position: \"relative\",\n            ...{\n                \"&:after\": bubbleTriangle,\n            },\n        },\n        linkState,\n    );\n\n    const nestedStyles = buttonStateStyles;\n\n    const root = style(\n        {\n            height: percent(100),\n            ...Mixins.background(vars.options.background),\n            color: ColorsUtils.colorOut(vars.options.fg),\n            overflow: hasChatBubble ? \"visible\" : \"hidden\",\n            minWidth: styleUnit(vars.sizing.minWidth),\n            display: \"flex\",\n            flexDirection: \"column\",\n            ...{\n                [`&:hover .${name}`]: nestedStyles && nestedStyles[\"&&:hover\"] ? nestedStyles[\"&&:hover\"] : undefined,\n                [`&:focus .${name}`]: nestedStyles && nestedStyles[\"&&:focus\"] ? nestedStyles[\"&&:focus\"] : undefined,\n                [`&:focus-visible .${name}`]:\n                    nestedStyles && nestedStyles[\"&&:focus-visible\"] ? nestedStyles[\"&&:focus-visible\"] : undefined,\n                [`&:active .${name}`]:\n                    nestedStyles && nestedStyles[\"&&:active\"] ? nestedStyles[\"&&:active\"] : undefined,\n            },\n        },\n        borderStyling,\n    );\n\n    const backgroundContainer = style(\"backgroundContainer\", {\n        position: \"relative\",\n        ...Mixins.background(vars.background.bg),\n        flex: 1,\n        display: isIconLeft ? \"flex\" : undefined,\n        alignItems: isIconLeft ? (vars.options.display.description ? \"flex-start\" : \"center\") : undefined,\n        paddingTop: isIconLeft ? 8 : undefined,\n        paddingLeft: isIconLeft ? 8 : undefined,\n    });\n\n    const backgroundScrim = style(\"backgroundScrim\", {\n        ...absolutePosition.fullSizeOfParent(),\n        ...Mixins.background(vars.background.scrim),\n    });\n\n    const content = style(\n        \"content\",\n        {\n            textAlign: vars.options.alignment,\n        },\n        Mixins.padding(vars.spacing.contentPadding),\n    );\n\n    const absoluteContent = style(\"absoluteContent\", {\n        ...absolutePosition.fullSizeOfParent(),\n        ...(vars.options.alignment === \"left\" ? flexHelper().middleLeft() : flexHelper().middle()),\n        flexDirection: \"column\",\n        ...Mixins.padding(vars.spacing.contentPadding),\n        paddingTop: 16,\n        paddingBottom: 16,\n        justifyContent: (() => {\n            switch (vars.options.verticalAlignment) {\n                case \"top\":\n                    return \"flex-start\";\n                case \"bottom\":\n                    return \"flex-end\";\n                default:\n                    return \"center\";\n            }\n        })(),\n        textAlign: vars.options.alignment,\n    });\n\n    const absoluteName = style(\"absoluteName\", {\n        ...Mixins.font(vars.name.font),\n        color: ColorsUtils.colorOut(vars.background.fg.color),\n        marginBottom: 16,\n    });\n\n    const imageAspectRatio = percent((vars.image.ratio.height / vars.image.ratio.width) * 100);\n\n    const imageContainer = style(\"imageContainer\", {\n        background: ColorsUtils.colorOut(globalVars.mixPrimaryAndBg(0.08)),\n        width: percent(100),\n        paddingTop: imageAspectRatio,\n        position: \"relative\",\n    });\n\n    const imageContainerWrapper = style(\"imageContainerWrapper\", {\n        maxHeight: styleUnit(vars.image.maxHeight),\n        overflow: \"hidden\",\n    });\n\n    const image = style(\"image\", {\n        ...absolutePosition.fullSizeOfParent(),\n        objectFit: \"cover\",\n        objectPosition: \"center center\",\n    });\n\n    const iconContainer = style(\"iconContainer\", {\n        ...(vars.options.alignment === \"left\" ? flexHelper().middleLeft() : flexHelper().middle()),\n        padding: vars.iconContainer.padding,\n        ...Mixins.background(vars.options.iconProps.background),\n        borderRadius: vars.iconContainer.borderRadius ?? undefined,\n        ...{\n            \"&:hover, &:focus\": {\n                backgroundColor: vars.options.iconProps.background.color\n                    ? ColorsUtils.colorOut(vars.iconContainer.hoverBackgroundColor)\n                    : undefined,\n            },\n        },\n    });\n\n    const icon = style(\"icon\", {\n        height: vars.icon.size,\n        ...Mixins.background(vars.icon.background),\n        // Width not set so that the aspect ratio of wider icons is preserved.\n        ...Mixins.border(vars.options.iconProps.border),\n        [`.${root}:hover &, .${root}:active &, .${root}:focus &`]: {\n            ...Mixins.background(vars.icon.backgroundState),\n        },\n    });\n\n    const iconLeftPadding = calc(\n        `${styleUnit(vars.icon.size + (vars.spacing.contentPadding.horizontal as number) * 4)}`,\n    );\n\n    const metas = style(\"metas\", {\n        ...Mixins.padding({\n            ...vars.name.spacing,\n        }),\n        ...{\n            \"&&\": {\n                position: \"relative\",\n                textAlign: vars.options.alignment,\n                ...Mixins.padding({\n                    ...vars.spacing.contentPadding,\n                    top: 10,\n                    bottom: 10,\n                    left: isIconLeft ? iconLeftPadding : hasChatBubble ? \"none\" : undefined,\n                }),\n            },\n        },\n    });\n\n    const callToAction = style(\"callToAction\", {\n        ...Mixins.padding({\n            ...vars.callToAction.padding,\n        }),\n        ...Mixins.font(vars.callToAction.font),\n        ...{\n            svg: {\n                marginLeft: 10,\n            },\n        },\n    });\n\n    const description = style(\"description\", {\n        display: vars.options.display.description ? undefined : \"none\",\n        ...Mixins.padding(vars.description.spacing),\n        ...Mixins.font(vars.description.font),\n    });\n\n    return {\n        root,\n        name,\n        callToAction,\n        absoluteName,\n        metas,\n        content,\n        backgroundScrim,\n        backgroundContainer,\n        absoluteContent,\n        imageContainer,\n        imageContainerWrapper,\n        image,\n        description,\n        icon,\n        iconContainer,\n    };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { extendItemContainer, singleBorder } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { percent } from \"csx\";\nimport { media } from \"@library/styles/styleShim\";\nimport { CSSObject } from \"@emotion/css\";\nimport { containerVariables } from \"@library/layout/components/containerStyles\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { Variables } from \"@library/styles/Variables\";\n\nexport const navLinksVariables = useThemeCache(() => {\n    const makeThemeVars = variableFactory(\"navLinks\");\n    const globalVars = globalVariables();\n\n    const item = makeThemeVars(\"item\", {\n        fontSize: globalVars.fonts.size.large,\n        padding: Variables.spacing({\n            vertical: globalVars.spacer.size * 2,\n            horizontal: containerVariables().spacing.padding * 2,\n        }),\n        paddingMobile: Variables.spacing({\n            horizontal: 0,\n        }),\n    });\n\n    const linksWithHeadings = makeThemeVars(\"linksWithHeadings\", {\n        paddings: {\n            horizontal: (item.padding.horizontal as number) / 2,\n        },\n    });\n\n    const title = makeThemeVars(\"title\", {\n        font: Variables.font({\n            size: globalVars.fonts.size.title,\n            weight: globalVars.fonts.weights.bold,\n            lineHeight: globalVars.lineHeights.condensed,\n            color: undefined,\n        }),\n        maxWidth: percent(100),\n        margins: {\n            bottom: globalVars.gutter.size,\n        },\n        mobile: {\n            font: Variables.font({\n                size: globalVars.fonts.size.large,\n                weight: globalVars.fonts.weights.bold,\n            }),\n        },\n    });\n\n    const link = makeThemeVars(\"link\", {\n        fg: globalVars.mainColors.fg,\n        fontWeight: globalVars.fonts.weights.normal,\n        lineHeight: globalVars.lineHeights.condensed,\n        width: 203,\n        maxWidth: percent(100),\n        fontSize: 16,\n    });\n\n    const viewAllLinkColors = Mixins.clickable.itemState();\n\n    const viewAll = makeThemeVars(\"viewAll\", {\n        fontWeight: globalVars.fonts.weights.semiBold,\n        fontSize: globalVars.fonts.size.medium,\n        margins: {\n            top: \"auto\",\n        },\n        paddings: {\n            top: globalVars.gutter.size,\n        },\n        icon: false,\n        ...viewAllLinkColors,\n    });\n\n    const spacing = makeThemeVars(\"spacing\", {\n        margin: 6,\n    });\n\n    const columns = makeThemeVars(\"columns\", {\n        desktop: 2,\n    });\n\n    const separator = makeThemeVars(\"separator\", {\n        height: 1,\n        bg: globalVars.mixBgAndFg(0.3),\n        hidden: false,\n    });\n\n    const breakPoints = makeThemeVars(\"breakPoints\", {\n        oneColumn: 750,\n    });\n\n    const mediaQueries = () => {\n        const oneColumn = (styles) => {\n            return media({ maxWidth: breakPoints.oneColumn }, styles);\n        };\n\n        return { oneColumn };\n    };\n\n    return {\n        linksWithHeadings,\n        item,\n        title,\n        columns,\n        link,\n        viewAll,\n        spacing,\n        separator,\n        mediaQueries,\n    };\n});\n\nexport const navLinksClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = navLinksVariables();\n    const style = styleFactory(\"navLinks\");\n    const mediaQueries = vars.mediaQueries();\n\n    const root = style(\n        {\n            ...Mixins.padding({\n                ...vars.item.padding,\n                horizontal: (vars.item.padding.horizontal as number) / 2,\n            }),\n            display: \"flex\",\n            flexDirection: \"column\",\n            maxWidth: percent(100),\n            width: percent(100 / vars.columns.desktop),\n        },\n        mediaQueries.oneColumn({\n            width: percent(100),\n            ...Mixins.padding({\n                ...vars.item.paddingMobile,\n                horizontal: (vars.item.paddingMobile.horizontal as number) / 2,\n            }),\n        }),\n    );\n\n    const items = style(\"items\", {\n        display: \"flex\",\n        flexDirection: \"column\",\n        flexGrow: 1,\n    });\n\n    const item = style(\"item\", {\n        display: \"block\",\n        fontSize: styleUnit(vars.item.fontSize),\n        marginTop: styleUnit(vars.spacing.margin),\n        marginBottom: styleUnit(vars.spacing.margin),\n    });\n\n    const title = style(\"title\", {\n        ...{\n            \"&&\": {\n                display: \"block\",\n                ...Mixins.font(vars.title.font),\n                maxWidth: percent(100),\n                ...Mixins.margin(vars.title.margins),\n                ...mediaQueries.oneColumn(Mixins.font(vars.title.mobile.font)),\n            },\n        },\n    });\n\n    const topTitle = style(\"topTitle\", {\n        ...{\n            \"&&\": {\n                ...Mixins.margin({\n                    vertical: vars.item.padding.vertical,\n                    top: vars.item.padding.top,\n                    bottom: 0,\n                }),\n                ...Mixins.padding({ horizontal: (vars.item.padding.horizontal as number) / 2 }),\n                width: \"100%\",\n            },\n        },\n    });\n\n    const linkColors = Mixins.clickable.itemState({\n        default: vars.link.fg,\n    });\n\n    const link = style(\"link\", {\n        display: \"block\",\n        ...Mixins.font({\n            size: vars.link.fontSize,\n            lineHeight: vars.link.lineHeight,\n            weight: vars.link.fontWeight,\n            // @ts-ignore\n            color: linkColors.color,\n        }),\n        ...linkColors,\n    });\n\n    const viewAllItem = style(\"viewAllItem\", {\n        display: \"block\",\n        fontSize: styleUnit(vars.item.fontSize),\n        ...Mixins.margin(vars.viewAll.margins),\n        ...Mixins.padding(vars.viewAll.paddings),\n    });\n\n    const viewAllLinkColors = Mixins.clickable.itemState({\n        default: globalVars.mainColors.primary,\n    });\n\n    const noItemLink = style(\"noItemLink\", { ...Mixins.clickable.itemState(), marginTop: globalVars.gutter.quarter });\n\n    const viewAll = style(\"viewAll\", {\n        display: \"block\",\n        ...Mixins.font({\n            weight: vars.viewAll.fontWeight as number,\n            size: vars.viewAll.fontSize as number,\n            // @ts-ignore\n            color: vars.viewAll.color,\n        }),\n        ...{\n            ...viewAllLinkColors,\n            span: {\n                marginRight: vars.viewAll.icon ? 10 : undefined,\n            },\n        },\n    });\n\n    const linksWithHeadings = style(\n        \"linksWithHeadings\",\n        {\n            ...Mixins.padding(vars.linksWithHeadings.paddings),\n            ...extendItemContainer(\n                (vars.item.padding.horizontal as number) + vars.linksWithHeadings.paddings.horizontal,\n            ),\n            display: \"flex\",\n            flexWrap: \"wrap\",\n            alignItems: \"stretch\",\n            justifyContent: \"space-between\",\n        },\n        mediaQueries.oneColumn({\n            ...extendItemContainer(\n                (vars.item.paddingMobile.horizontal as number) + vars.linksWithHeadings.paddings.horizontal,\n            ),\n        }),\n    );\n\n    const separator = style(\n        \"separator\",\n        {\n            display: vars.separator.hidden ? \"none\" : \"block\",\n            width: percent(100),\n\n            // Has to be a border and not a BG, because sometimes chrome rounds it's height to 0.99px and it disappears.\n            borderLeft: \"none\",\n            borderRight: \"none\",\n            borderTop: \"none\",\n            borderBottom: singleBorder({ color: vars.separator.bg, width: vars.separator.height }),\n            ...{\n                \"&:last-child\": {\n                    display: \"none\",\n                },\n            },\n        },\n        mediaQueries.oneColumn(Mixins.margin({ horizontal: vars.item.paddingMobile.horizontal })),\n    );\n\n    const separatorIndependant = style(\n        \"separatorIndependant\",\n        {\n            display: \"block\",\n            ...extendItemContainer(vars.item.padding.horizontal as number),\n\n            // Has to be a border and not a BG, because sometimes chrome rounds it's height to 0.99px and it disappears.\n            borderBottom: singleBorder({ color: vars.separator.bg, width: vars.separator.height }),\n        },\n        mediaQueries.oneColumn(Mixins.margin({ horizontal: vars.item.paddingMobile.horizontal })),\n        mediaQueries.oneColumn({\n            ...extendItemContainer(vars.item.paddingMobile.horizontal as number),\n        }),\n    );\n\n    const separatorOdd = style(\n        \"separatorOdd\",\n        {\n            display: \"none\",\n        },\n        mediaQueries.oneColumn({\n            display: \"block\",\n        }),\n    );\n\n    return {\n        root,\n        items,\n        item,\n        noItemLink,\n        title,\n        topTitle,\n        link,\n        viewAllItem,\n        viewAll,\n        linksWithHeadings,\n        separator,\n        separatorOdd,\n        separatorIndependant,\n    };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { HomeWidgetItemContentType, homeWidgetItemVariables } from \"@library/homeWidget/HomeWidgetItem.styles\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { navLinksVariables } from \"@library/navigation/navLinksStyles\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { shadowHelper } from \"@library/styles/shadowHelpers\";\nimport { BorderType, extendItemContainer } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { IFont, IBackground, ISpacing } from \"@library/styles/cssUtilsTypes\";\nimport { Variables } from \"@library/styles/Variables\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\nimport { calc, percent } from \"csx\";\nimport { CSSObject } from \"@emotion/css\";\nexport interface IHomeWidgetContainerOptions {\n    noGutter?: boolean;\n    outerBackground?: IBackground;\n    innerBackground?: IBackground;\n    borderType?: BorderType | \"navLinks\";\n    maxWidth?: number | string;\n    viewAll?: IViewAll;\n    maxColumnCount?: number;\n    subtitle?: {\n        type?: \"standard\" | \"overline\";\n        content?: string;\n        font?: IFont;\n        padding?: ISpacing;\n    };\n    description?: string;\n    headerAlignment?: \"left\" | \"center\";\n    contentAlignment?: \"flex-start\" | \"center\";\n}\n\ninterface IViewAll {\n    position?: \"top\" | \"bottom\";\n    to?: string;\n    name?: string;\n    displayType?: ButtonTypes;\n}\n\n/**\n * @varGroup homeWidgetContainer\n * @title HomeWidget Container\n * @description The home widget container controls the grid of home widget items. It doesn't affect the individual items, instead focusing on the content around the items and their arrangement/placement together.\n */\nexport const homeWidgetContainerVariables = useThemeCache(\n    (optionOverrides?: IHomeWidgetContainerOptions, forcedVars?: IThemeVariables) => {\n        const makeVars = variableFactory(\"homeWidgetContainer\", forcedVars);\n        const globalVars = globalVariables(forcedVars);\n        const layoutVars = layoutVariables(forcedVars);\n        const itemVars = homeWidgetItemVariables({}, forcedVars);\n\n        /**\n         * @varGroup homeWidgetContainer.options\n         * @commonTitle HomeWidget - Options\n         * @description Control different variants for the HomeWidget. These options can affect multiple parts of the HomeWidget at once.\n         */\n        let options = makeVars(\n            \"options\",\n            {\n                noGutter: false,\n                outerBackground: Variables.background({}),\n                innerBackground: Variables.background({}),\n                borderType: BorderType.NONE as BorderType | \"navLinks\",\n                maxWidth: layoutVariables().contentWidth,\n                viewAll: {\n                    to: undefined as string | undefined,\n                    position: \"bottom\" as \"top\" | \"bottom\",\n                    displayType: ButtonTypes.TEXT_PRIMARY,\n                    name: \"View All\",\n                },\n                maxColumnCount: [\n                    HomeWidgetItemContentType.TITLE_BACKGROUND,\n                    HomeWidgetItemContentType.TITLE_DESCRIPTION_IMAGE,\n                ].includes(itemVars.options.contentType)\n                    ? 4\n                    : 3,\n                subtitle: {\n                    type: \"standard\" as \"standard\" | \"overline\",\n                    content: undefined as string | undefined,\n                    padding: Variables.spacing({}),\n                    font: Variables.font({}),\n                },\n                description: undefined as string | undefined,\n                headerAlignment: \"left\" as \"left\" | \"center\",\n                contentAlignment: \"flex-start\" as \"flex-start\" | \"center\",\n            },\n            optionOverrides,\n        );\n\n        options = makeVars(\n            \"options\",\n            {\n                ...options,\n                borderType:\n                    options.innerBackground.color || options.innerBackground.image\n                        ? BorderType.SHADOW\n                        : BorderType.NONE,\n                maxWidth: options.maxColumnCount <= 2 ? layoutVars.contentSizes.narrow : options.maxWidth,\n            },\n            optionOverrides,\n        );\n\n        options = makeVars(\n            \"options\",\n            {\n                ...options,\n                innerBackground: {\n                    ...options.innerBackground,\n                    color: options.borderType !== BorderType.NONE ? globalVars.body.backgroundImage.color : undefined,\n                },\n            },\n            optionOverrides,\n        );\n\n        const title = makeVars(\"title\", {\n            /**\n             * @var homeWidgetContainer.title.font\n             * @type string\n             * @expand font\n             */\n            font: Variables.font({}),\n        });\n\n        const navPaddings = navLinksVariables().item.padding;\n        const mobileNavPaddings = navLinksVariables().item.paddingMobile;\n\n        const bottomMultiplier = options.viewAll.position === \"bottom\" ? 1.5 : 2;\n        const needsSpacing =\n            options.outerBackground.color || options.outerBackground.image || options.borderType === \"navLinks\";\n        const spacing = makeVars(\"spacing\", {\n            /**\n             * @varGroup homeWidgetContainer.spacing.padding\n             * @title HomeWidget Spacing\n             * @expand spacing\n             */\n            padding: Variables.spacing({\n                top: needsSpacing ? globalVars.gutter.size * 2 : globalVars.gutter.size,\n                bottom: needsSpacing ? globalVars.gutter.size * bottomMultiplier : 0,\n            }),\n        });\n\n        /**\n         * @varGroup homeWidgetContainer.itemSpacing\n         * @commonTitle HomeWidget Grid Spacing\n         * @expand spacing\n         */\n        const itemSpacing = makeVars(\"itemSpacing\", {\n            /**\n             * @var homeWidgetContainer.itemSpacing.horizontal\n             * @description Sets the amount of padding on content in the HomeWidget Container. The higher padding, the more narrow the widget becomes.\n             * @type string | number\n             */\n            horizontal: options.borderType === \"navLinks\" ? navPaddings.horizontal : globalVars.gutter.size,\n\n            /**\n             * @var homeWidgetContainer.itemSpacing.vertical\n             * @description Sets the amount of space underneath the View All button row.\n             * @type string | number\n             */\n            vertical: globalVars.gutter.size / 2,\n\n            /**\n             * @var homeWidgetContainer.itemSpacing.mobile\n             * @description Sets the amount of horizontal padding the container has on mobile devices.\n             * @type string | number\n             */\n            mobile: {\n                horizontal: options.borderType === \"navLinks\" ? mobileNavPaddings.horizontal : globalVars.gutter.size,\n            },\n        });\n\n        const horizontalSpacing = (itemSpacing.horizontal as number) / 2; // Cut in half to account for grid item spacing.\n        const horizontalSpacingMobile = (itemSpacing.mobile.horizontal as number) / 2; // Cut in half to account for grid item spacing.\n\n        /**\n         * @varGroup homeWidgetContainer.grid\n         * @commonTitle HomeWidget Grid\n         */\n        const grid = makeVars(\"grid\", {\n            padding: Variables.spacing({\n                horizontal: horizontalSpacing,\n                vertical: itemSpacing.vertical,\n            }),\n\n            paddingMobile: {\n                horizontal: horizontalSpacingMobile,\n            },\n        });\n\n        const gridItem = makeVars(\"gridItem\", {\n            /**\n             * @varGroup homeWidgetContainer.gridItem.padding\n             * @commonTitle Padding\n             * @expand spacing\n             */\n            padding: Variables.spacing({\n                horizontal: horizontalSpacing,\n                vertical: itemSpacing.vertical,\n            }),\n\n            /**\n             * @varGroup homeWidgetContainer.gridItem.paddingMobile\n             * @commonTitle Mobile Padding\n             * @expand spacing\n             */\n            paddingMobile: Variables.spacing({\n                horizontal: horizontalSpacingMobile,\n            }),\n        });\n\n        const description = makeVars(\"description\", {\n            /**\n             * @varGroup homeWidgetContainer.description.font\n             * @commonTitle Font\n             * @expand font\n             */\n            font: Variables.font({}),\n\n            /**\n             * @varGroup homeWidgetContainer.description.padding\n             * @commonTitle Padding\n             * @expand spacing\n             */\n            padding: Variables.spacing({\n                horizontal: calc(`${styleUnit((gridItem.padding.horizontal as number) * 2)}`),\n                vertical: calc(`${styleUnit(gridItem.padding.vertical)}`),\n                top: options.subtitle.content && options.subtitle.type === \"standard\" ? 0 : undefined,\n            }),\n\n            /**\n             * @varGroup homeWidgetContainer.description.paddingMobile\n             * @commonTitle Mobile Padding\n             * @expand spacing\n             */\n            paddingMobile: Variables.spacing({\n                horizontal: gridItem.padding.horizontal,\n            }),\n        });\n\n        const mobileMediaQuery = layoutVariables().mediaQueries().oneColumnDown;\n\n        return { options, spacing, itemSpacing, title, description, grid, gridItem, mobileMediaQuery };\n    },\n);\n\nexport const homeWidgetContainerClasses = useThemeCache((optionOverrides?: IHomeWidgetContainerOptions) => {\n    const style = styleFactory(\"homeWidgetContainer\");\n    const globalVars = globalVariables();\n    const vars = homeWidgetContainerVariables(optionOverrides);\n\n    const root = style({\n        ...Mixins.background(vars.options.outerBackground ?? {}),\n    });\n\n    // For navLinks style only.\n    const separator = style(\"separator\", {});\n\n    const contentMixin: CSSObject = {\n        ...Mixins.padding({\n            vertical: vars.itemSpacing.vertical,\n        }),\n        ...(vars.options.borderType === \"navLinks\"\n            ? extendItemContainer(navLinksVariables().linksWithHeadings.paddings.horizontal)\n            : extendItemContainer(vars.itemSpacing.horizontal as number)),\n    };\n\n    const verticalContainer = style(\"verticalContainer\", {\n        ...Mixins.padding(vars.spacing.padding),\n    });\n\n    const container = style(\"container\", {\n        ...{\n            \"&&\": {\n                maxWidth: styleUnit(vars.options.maxWidth),\n                margin: \"0 auto\",\n                width: \"100%\",\n            },\n        },\n    });\n\n    const content = style(\"content\", contentMixin);\n\n    const borderedContent = style(\"borderedContent\", {\n        ...contentMixin,\n        ...Mixins.padding({\n            top: 0,\n            horizontal: vars.itemSpacing.horizontal,\n        }),\n    });\n\n    const borderStyling: CSSObject = (() => {\n        switch (vars.options.borderType) {\n            case BorderType.NONE:\n                return {};\n            case BorderType.BORDER:\n                return {\n                    borderRadius: globalVars.border.radius,\n                    ...Mixins.border(),\n                };\n            case BorderType.SHADOW:\n                return {\n                    borderRadius: globalVars.border.radius,\n                    ...shadowHelper().embed(),\n                };\n            default:\n                return {};\n        }\n    })();\n\n    const grid = style(\n        \"grid\",\n        {\n            ...Mixins.background(vars.options.innerBackground),\n            display: \"flex\",\n            alignItems: \"stretch\",\n            justifyContent: vars.options.contentAlignment ?? \"flex-start\",\n            flexWrap: \"wrap\",\n            ...Mixins.padding(vars.grid.padding),\n        },\n        borderStyling,\n        vars.mobileMediaQuery(Mixins.padding(vars.grid.paddingMobile)),\n    );\n\n    const itemMixin: CSSObject = {\n        flex: 1,\n        flexBasis: percent(100 / vars.options.maxColumnCount),\n    };\n\n    const gridItem = style(\"gridItem\", itemMixin);\n\n    const gridItemSpacer = style(\"gridItemSpacer\", {\n        ...itemMixin,\n        minWidth: styleUnit(homeWidgetItemVariables().sizing.minWidth),\n    });\n\n    const gridItemContent = style(\n        \"gridItemContent\",\n        {\n            ...Mixins.padding(vars.gridItem.padding),\n            height: percent(100),\n        },\n        vars.mobileMediaQuery(Mixins.padding(vars.gridItem.paddingMobile)),\n    );\n\n    const gridItemWidthConstraint = useThemeCache((maxWidth: number) =>\n        style(\"gridItemWidthConstraint\", {\n            maxWidth: maxWidth > 0 ? maxWidth : \"initial\",\n        }),\n    );\n\n    const viewAllContainer = style(\n        \"viewAllContainer\",\n        {\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n            ...Mixins.padding({\n                horizontal: vars.grid.padding.horizontal,\n            }),\n        },\n        vars.mobileMediaQuery(Mixins.padding(vars.grid.paddingMobile)),\n    );\n\n    const title = style(\n        \"title\",\n        {\n            flex: 1,\n            ...Mixins.font(vars.title.font),\n            ...Mixins.padding({\n                horizontal: vars.gridItem.padding.horizontal,\n            }),\n            textAlign: vars.options.headerAlignment,\n        },\n        vars.mobileMediaQuery(\n            Mixins.padding({\n                horizontal: vars.gridItem.paddingMobile.horizontal,\n            }),\n        ),\n    );\n\n    const subtitle = style(\"subtitle\", {\n        ...Mixins.font({\n            ...vars.options.subtitle.font,\n            color: vars.options.subtitle.font.color\n                ? vars.options.subtitle.font.color\n                : vars.options.subtitle.type === \"overline\"\n                ? globalVars.mainColors.primary\n                : undefined,\n            size: vars.options.subtitle.font.size\n                ? vars.options.subtitle.font.size\n                : vars.options.subtitle.type === \"overline\"\n                ? 14\n                : 16,\n            weight: vars.options.subtitle.font.weight ? vars.options.subtitle.font.weight : 400,\n            transform: vars.options.subtitle.font.transform\n                ? vars.options.subtitle.font.transform\n                : vars.options.subtitle.type === \"overline\"\n                ? \"uppercase\"\n                : undefined,\n            letterSpacing: vars.options.subtitle.font.letterSpacing\n                ? vars.options.subtitle.font.letterSpacing\n                : vars.options.subtitle.type === \"overline\"\n                ? 1\n                : undefined,\n        }),\n        ...Mixins.padding({\n            ...vars.options.subtitle.padding,\n            horizontal: (vars.gridItem.padding.horizontal as number) * 2,\n            top: vars.options.subtitle.padding.top ?? 12,\n            bottom: vars.options.subtitle.padding.bottom ?? 20,\n        }),\n        textAlign: vars.options.headerAlignment,\n    });\n\n    const description = style(\n        \"description\",\n        {\n            ...Mixins.padding(vars.description.padding),\n            ...Mixins.font(vars.description.font),\n            textAlign: vars.options.headerAlignment,\n        },\n        vars.mobileMediaQuery(Mixins.padding(vars.description.paddingMobile)),\n    );\n    const viewAll = style(\"viewAll\", {\n        ...{\n            \"&&\": {\n                ...Mixins.margin({\n                    horizontal: vars.options.borderType === \"navLinks\" ? 0 : vars.gridItem.padding.horizontal,\n                }),\n            },\n            \"&:first-child\": {\n                marginLeft: \"auto\",\n            },\n        },\n    });\n\n    const viewAllContent = style(\"viewAllContent\", {\n        ...contentMixin,\n        paddingTop: 0,\n        marginTop: -vars.itemSpacing.vertical,\n        ...{\n            [`.${borderedContent} + &`]: {\n                marginTop: 0,\n            },\n        },\n    });\n\n    return {\n        root,\n        separator,\n        verticalContainer,\n        container,\n        content,\n        borderedContent,\n        viewAllContent,\n        title,\n        subtitle,\n        description,\n        viewAllContainer,\n        viewAll,\n        grid,\n        gridItem,\n        gridItemSpacer,\n        gridItemContent,\n        gridItemWidthConstraint,\n    };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport {\n    IHomeWidgetItemOptions,\n    homeWidgetItemVariables,\n    homeWidgetItemClasses,\n    HomeWidgetItemContentType,\n} from \"@library/homeWidget/HomeWidgetItem.styles\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport { LocationDescriptor } from \"history\";\nimport Heading from \"@library/layout/Heading\";\nimport TruncatedText from \"@library/content/TruncatedText\";\nimport { ICountResult } from \"@library/search/searchTypes\";\nimport { ResultMeta } from \"@library/result/ResultMeta\";\nimport { metasClasses } from \"@library/styles/metasStyles\";\nimport classNames from \"classnames\";\nimport { getButtonStyleFromBaseClass } from \"@library/forms/Button\";\nimport { t } from \"@library/utility/appUtils\";\nimport { ArrowIcon } from \"@library/icons/common\";\n\nexport interface IHomeWidgetItemProps {\n    // Content\n    to: LocationDescriptor;\n    imageUrl?: string;\n    iconUrl?: string;\n    name?: string;\n    description?: string;\n    metas?: string;\n    counts?: ICountResult[];\n    callToAction?: string;\n    url?: string;\n\n    // Layout options\n    options?: IHomeWidgetItemOptions;\n}\n\nexport function HomeWidgetItem(props: IHomeWidgetItemProps) {\n    const options = homeWidgetItemVariables(props.options).options;\n    const classes = homeWidgetItemClasses(props.options);\n    const isAbsoluteContent = [HomeWidgetItemContentType.TITLE_BACKGROUND].includes(options.contentType);\n    const imageUrl = props.imageUrl ?? options.defaultImageUrl;\n    const iconUrl = props.iconUrl ?? options.defaultIconUrl;\n    const hasMetas = props.counts && options.display.counts;\n    const isChatBubble = [HomeWidgetItemContentType.TITLE_CHAT_BUBBLE].includes(options.contentType);\n    const hasCTA = props.callToAction && isChatBubble;\n    const classesMeta = metasClasses();\n\n    return (\n        <SmartLink to={props.to} className={classes.root}>\n            <div className={classes.backgroundContainer}>\n                {[\n                    HomeWidgetItemContentType.TITLE_DESCRIPTION_IMAGE,\n                    HomeWidgetItemContentType.TITLE_BACKGROUND,\n                ].includes(options.contentType) && (\n                    <div className={classes.imageContainerWrapper}>\n                        <div className={classes.imageContainer}>\n                            {imageUrl && <img className={classes.image} src={imageUrl} alt={props.name} />}\n                        </div>\n                    </div>\n                )}\n                {[HomeWidgetItemContentType.TITLE_BACKGROUND].includes(options.contentType) && (\n                    <div className={classes.backgroundScrim}></div>\n                )}\n\n                {HomeWidgetItemContentType.TITLE_DESCRIPTION_ICON === options.contentType && (\n                    <div className={classes.iconContainer}>\n                        {iconUrl && <img className={classes.icon} src={iconUrl} alt={props.name} />}\n                    </div>\n                )}\n\n                {isAbsoluteContent ? <HomeWidgetAbsoluteContent {...props} /> : <HomeWidgetStaticContent {...props} />}\n            </div>\n            {!isChatBubble && (!isAbsoluteContent || hasMetas) && (\n                <div className={classNames(classesMeta.root, classes.metas)}>\n                    {hasMetas && <ResultMeta counts={props.counts} />}\n                </div>\n            )}\n\n            {[HomeWidgetItemContentType.TITLE_CHAT_BUBBLE].includes(options.contentType) && (\n                <a href={props.url} className={classes.callToAction}>\n                    {props.callToAction}\n                    <ArrowIcon />\n                </a>\n            )}\n        </SmartLink>\n    );\n}\n\nfunction HomeWidgetStaticContent(props: IHomeWidgetItemProps) {\n    const options = homeWidgetItemVariables(props.options).options;\n    const classes = homeWidgetItemClasses(props.options);\n\n    return (\n        <div className={classes.content}>\n            <Heading depth={3} className={classes.name}>\n                {props.name}\n            </Heading>\n            {[\n                HomeWidgetItemContentType.TITLE_DESCRIPTION,\n                HomeWidgetItemContentType.TITLE_DESCRIPTION_IMAGE,\n                HomeWidgetItemContentType.TITLE_DESCRIPTION_ICON,\n                HomeWidgetItemContentType.TITLE_CHAT_BUBBLE,\n            ].includes(options.contentType) && (\n                <TruncatedText maxCharCount={160} tag={\"div\"} className={classes.description}>\n                    {props.description}\n                </TruncatedText>\n            )}\n        </div>\n    );\n}\n\nfunction HomeWidgetAbsoluteContent(props: IHomeWidgetItemProps) {\n    const options = homeWidgetItemVariables(props.options).options;\n    const classes = homeWidgetItemClasses(props.options);\n    const viewMoreCode = options.viewMore?.labelCode;\n\n    return (\n        <>\n            <div className={classes.absoluteContent}>\n                {!options.name.hidden && (\n                    <Heading depth={3} className={classes.absoluteName}>\n                        {props.name}\n                    </Heading>\n                )}\n                <div>\n                    <span className={getButtonStyleFromBaseClass(options.viewMore?.buttonType)}>{t(viewMoreCode)}</span>\n                </div>\n            </div>\n        </>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useRef } from \"react\";\nimport {\n    IHomeWidgetContainerOptions,\n    homeWidgetContainerClasses,\n    homeWidgetContainerVariables,\n} from \"@library/homeWidget/HomeWidgetContainer.styles\";\nimport { useMeasure } from \"@vanilla/react-utils\";\nimport classNames from \"classnames\";\nimport Heading from \"@library/layout/Heading\";\nimport { BorderType } from \"@library/styles/styleHelpers\";\nimport LinkAsButton from \"@library/routing/LinkAsButton\";\nimport { t } from \"@vanilla/i18n\";\nimport Container from \"@library/layout/components/Container\";\nimport { navLinksClasses } from \"@library/navigation/navLinksStyles\";\n\nexport interface IHomeWidgetContainerProps {\n    options?: IHomeWidgetContainerOptions;\n    children: React.ReactNode;\n    title?: string;\n    isGrid?: boolean;\n}\n\nexport function HomeWidgetContainer(props: IHomeWidgetContainerProps) {\n    const isGrid = props.isGrid ?? true;\n    const options = homeWidgetContainerVariables(props.options).options;\n    const classes = homeWidgetContainerClasses(props.options);\n\n    const firstItemRef = useRef<HTMLDivElement | null>(null);\n    const firstItemMeasure = useMeasure(firstItemRef);\n\n    const grid = isGrid ? (\n        <div className={classes.grid}>\n            {React.Children.map(props.children, (child, i) => {\n                return (\n                    <div\n                        ref={i === 0 ? firstItemRef : undefined}\n                        className={classNames(\n                            classes.gridItem,\n\n                            // Constrain grid items to the same max width in each row.\n                            // Workaround for flex-box limiations.\n                            i !== 0 && classes.gridItemWidthConstraint(firstItemMeasure.width),\n                        )}\n                        key={i}\n                    >\n                        <div className={classes.gridItemContent}>{child}</div>\n                    </div>\n                );\n            })}\n        </div>\n    ) : (\n        props.children\n    );\n\n    const gridHasBorder = [BorderType.BORDER, BorderType.SHADOW].includes(options.borderType as BorderType);\n\n    const viewAllButton = options?.viewAll?.to && (\n        <LinkAsButton to={options?.viewAll?.to} baseClass={options.viewAll.displayType} className={classes.viewAll}>\n            {options?.viewAll?.name ?? t(\"View All\")}\n        </LinkAsButton>\n    );\n\n    const subtitle = props.options?.subtitle?.content && (\n        <h2 className={classes.subtitle}>{props.options?.subtitle?.content}</h2>\n    );\n\n    let content = (\n        <div className={classes.container}>\n            {options.borderType === \"navLinks\" && (\n                <hr className={classNames(navLinksClasses().separator, classes.separator)}></hr>\n            )}\n            <div className={classNames(!options.noGutter && classes.verticalContainer)}>\n                <div className={classes.content}>\n                    {options.subtitle.type === \"overline\" && subtitle}\n                    <div className={classes.viewAllContainer}>\n                        {props.title && (\n                            <Heading className={classes.title} renderAsDepth={1}>\n                                {props.title}\n                            </Heading>\n                        )}\n                        {options.viewAll.position === \"top\" && viewAllButton}\n                    </div>\n                    {options.subtitle.type === \"standard\" && subtitle}\n                    {props.options?.description && (\n                        <div className={classes.description}>{props.options.description}</div>\n                    )}\n                    {!gridHasBorder && grid}\n                </div>\n                {gridHasBorder && <div className={classes.borderedContent}>{grid}</div>}\n                {viewAllButton && options.viewAll.position === \"bottom\" && (\n                    <div className={classes.viewAllContent}>\n                        <div className={classes.viewAllContainer}>{viewAllButton}</div>{\" \"}\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n\n    if (!options.noGutter) {\n        content = <Container fullGutter>{content}</Container>;\n    }\n\n    return <div className={classes.root}>{content}</div>;\n}\n","/**\n * @copyright 2009-2021 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { INavigationVariableItem } from \"@library/headers/navigationVariables\";\nimport { ListSeparation } from \"@library/styles/cssUtilsTypes\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { Variables } from \"@library/styles/Variables\";\nimport { getThemeVariables } from \"@library/theming/getThemeVariables\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\n\n/**\n * @varGroup quickLinks\n * @description Quick links are a component of customizable links, normally appearing in a side panel.\n */\nexport const quickLinksVariables = useThemeCache((forcedVars?: IThemeVariables) => {\n    const makeThemeVars = variableFactory(\"quickLinks\", forcedVars);\n    const globalVars = globalVariables(forcedVars);\n\n    /**\n     * @varGroup quickLinks.box\n     * @title Quick Links - Box\n     * @expand box\n     */\n    const box = makeThemeVars(\"box\", Variables.box({}));\n\n    const links: INavigationVariableItem[] = makeThemeVars(\"links\", []);\n    const counts: Record<string, number | null> = makeThemeVars(\"counts\", {});\n\n    /**\n     * @varGroup quickLinks.title\n     */\n    const title = makeThemeVars(\"title\", {\n        /**\n         * @varGroups quickLinks.title.font\n         * @expand font\n         */\n        font: Variables.font({\n            size: globalVars.fonts.size.subTitle,\n            weight: globalVars.fonts.weights.bold,\n            color: globalVars.mainColors.fg,\n        }),\n        /**\n         * @varGroups quickLinks.title.spacing\n         * @expand spacing\n         */\n        spacing: Variables.spacing({\n            bottom: 16,\n        }),\n    });\n\n    /**\n     * @varGroup quickLinks.listItem\n     */\n    const listInit = makeThemeVars(\"listItem\", {\n        /**\n         * @var quickLinks.listItem.listSeparation\n         * @description Describe how the list items should be separated from each other.\n         * - none - The list items only have whitespace between them.\n         * - border - The list items each have a full border and whitespace between the borders.\n         * - separator - There is whitespace and a single line separating 2 items.\n         * @type string\n         * @enum none | border | separator\n         */\n        listSeparation: ListSeparation.NONE,\n        /**\n         * @var quickLinks.listItem.listSeparationColor\n         * @description Color of the separator order border.\n         * @type string\n         * @format color\n         */\n        listSeparationColor: globalVars.border.color,\n        /**\n         * @var quickLinks.listItem.listSeparationWidth\n         * @description The width/size of the separator or border.\n         * @type number\n         */\n        listSeparationWidth: globalVars.border.width,\n    });\n\n    const isBorderSep = listInit.listSeparation === ListSeparation.BORDER;\n    const isLineSep = listInit.listSeparation === ListSeparation.SEPARATOR;\n    const listItem = makeThemeVars(\"listItem\", {\n        ...listInit,\n        /**\n         * @varGroup quickLinks.listItem.font\n         * @expand font\n         */\n        font: Variables.font({\n            size: globalVars.fonts.size.medium,\n            weight: globalVars.fonts.weights.normal,\n        }),\n        /**\n         * @varGroup quickLinks.listItem.fgColor\n         * @title Text Color\n         * @expand clickable\n         */\n        fgColor: Variables.clickable({\n            default: globalVars.mainColors.fg,\n            allStates: globalVars.mainColors.stateSecondary,\n        }),\n\n        /**\n         * @varGroup quickLinks.listItem.padding\n         * @title Padding\n         * @commonDescription The difference between padding and spacing\n         * will only be apparent when there is a border or background color.\n         * @expand spacing\n         */\n        padding: Variables.spacing({\n            vertical: isLineSep ? 12 : 6,\n            horizontal: isBorderSep || isLineSep ? 12 : 0,\n        }),\n        /**\n         * @varGroup quickLinks.listItem.spacing\n         * @title Padding\n         * @commonDescription The difference between padding and spacing\n         * will only be apparent when there is a border or background color.\n         * @expand spacing\n         */\n        spacing: Variables.spacing({\n            vertical: isBorderSep ? 6 : 0,\n        }),\n    });\n\n    const listItemTitle = makeThemeVars(\"listItemTitle\", {\n        /**\n         * @varGroup quickLinks.listItemTitle.font\n         * @title QuickLinks - Title Font\n         * @expand font\n         */\n        font: {\n            ...listItem.font,\n            color: globalVars.mainColors.fg,\n        },\n    });\n\n    /**\n     * @varGroup quickLinks.count.font\n     * @title QuickLinks - Count Font\n     * @description Some quick links may have a count.\n     * @expand font\n     */\n    const count = makeThemeVars(\"count\", {\n        font: {\n            ...listItem.font,\n            color: globalVars.mainColors.fg,\n        },\n    });\n\n    return {\n        title,\n        listItem,\n        listItemTitle,\n        count,\n        box,\n        links,\n        counts,\n    };\n});\n","/**\n * @author Alex Brohman <alex.brohman@vanillaforums.com>\n * @copyright 2009-2021 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { CSSObject } from \"@emotion/css\";\nimport { IBoxOptions } from \"@library/styles/cssUtilsTypes\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { shadowHelper } from \"@library/styles/shadowHelpers\";\nimport { BorderType } from \"@library/styles/styleHelpers\";\nimport { styleFactory, useThemeCache, variableFactory } from \"@library/styles/styleUtils\";\nimport { Variables } from \"@library/styles/Variables\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\n\n/**\n * @varGroup box\n * @description Boxes are a layout component used to give content consitent div wrappers. It's primarily in the side panel.\n */\nexport const boxVariables = useThemeCache((boxOptions?: Partial<IBoxOptions>, forcedVars?: IThemeVariables) => {\n    const makeThemeVars = variableFactory(\"box\", forcedVars);\n    const globalVars = globalVariables();\n\n    /**\n     * @varGroup box.options\n     * @description Control different variants for the box appearance. These options can affect multiple parts of the box at once.\n     */\n    const options: IBoxOptions = makeThemeVars(\n        \"options\",\n        Variables.box({\n            borderType: BorderType.NONE,\n            background: Variables.background({}),\n        }),\n        boxOptions,\n    );\n\n    /**\n     * @varGroup box.border\n     * @expand border\n     */\n    const border = makeThemeVars(\"border\", Variables.border({}));\n\n    const needsPadding = [BorderType.SHADOW, BorderType.BORDER].includes(options.borderType);\n\n    /**\n     * @varGroup box.padding\n     * @expand spacing\n     */\n    const padding = makeThemeVars(\n        \"padding\",\n        Variables.spacing({\n            horizontal: needsPadding ? 16 : 0,\n            vertical: needsPadding ? 16 : 8,\n        }),\n    );\n\n    return {\n        options,\n        border,\n        padding,\n    };\n});\n\nexport const boxClasses = useThemeCache((boxOptions?: Partial<IBoxOptions>) => {\n    const vars = boxVariables(boxOptions);\n    const style = styleFactory(\"quickLinks\");\n\n    const getBorderVars = (): CSSObject => {\n        switch (vars.options.borderType) {\n            case BorderType.BORDER:\n                return Mixins.border(vars.border);\n            case BorderType.SHADOW:\n                return shadowHelper().embed();\n            case BorderType.NONE:\n            default:\n                return {};\n        }\n    };\n\n    const root = style({\n        ...getBorderVars(),\n        ...Mixins.background(vars.options.background),\n        ...Mixins.padding(vars.padding),\n    });\n\n    return {\n        root,\n    };\n});\n","/**\n * @copyright 2009-2021 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { cx } from \"@emotion/css\";\nimport { boxClasses } from \"@library/layout/Box.styles\";\nimport { IBoxOptions } from \"@library/styles/cssUtilsTypes\";\n\ninterface IProps extends React.HTMLAttributes<HTMLDivElement> {\n    children?: React.ReactNode;\n    options?: Partial<IBoxOptions>;\n}\n\nexport const Box = React.forwardRef(function Box(_props: IProps, ref: React.Ref<HTMLDivElement>) {\n    const { options, ...props } = _props;\n    const classes = boxClasses(options ?? {});\n\n    return <div {...props} ref={ref} className={cx(classes.root, props.className)} />;\n});\n","/**\n * @author Alex Brohman <alex.brohman@vanillaforums.com>\n * @copyright 2009-2021 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { CSSObject } from \"@emotion/css\";\nimport { quickLinksVariables } from \"@library/navigation/QuickLinks.variables\";\nimport { ListSeparation } from \"@library/styles/cssUtilsTypes\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { colorOut, singleBorder } from \"@library/styles/styleHelpers\";\nimport { styleFactory, useThemeCache } from \"@library/styles/styleUtils\";\n\nexport const quickLinksClasses = useThemeCache(() => {\n    const vars = quickLinksVariables();\n    const style = styleFactory(\"quickLinks\");\n\n    const root = style({\n        border: \"none\",\n    });\n\n    const title = style(\"title\", {\n        ...Mixins.font(vars.title.font),\n        ...Mixins.margin(vars.title.spacing),\n    });\n\n    const list = style(\"list\", {});\n\n    const { listSeparation } = vars.listItem;\n\n    const listItem = style(\n        \"listItem\",\n        {\n            width: \"100%\",\n            ...Mixins.padding(vars.listItem.spacing),\n        },\n        listSeparation === ListSeparation.SEPARATOR && {\n            borderBottom: singleBorder({\n                width: vars.listItem.listSeparationWidth,\n                color: vars.listItem.listSeparationColor,\n            }),\n            \"&:last-child\": {\n                borderBottom: \"none\",\n            },\n        },\n    );\n\n    const listItemTitle = style(\n        \"listItemTitle\",\n        {\n            width: \"100%\",\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n            ...Mixins.padding(vars.listItem.padding),\n            ...Mixins.font(vars.listItemTitle.font),\n        },\n        listSeparation === ListSeparation.BORDER &&\n            Mixins.border({\n                width: vars.listItem.listSeparationWidth,\n                color: vars.listItem.listSeparationColor,\n            }),\n    );\n\n    const count = style(\"count\", {\n        whiteSpace: \"nowrap\", //Prevents count value from stacking.\n        textAlign: \"right\",\n        ...Mixins.font(vars.count.font),\n    });\n\n    return {\n        root,\n        title,\n        list,\n        listItem,\n        listItemTitle,\n        count,\n    };\n});\n","/**\n * @copyright 2009-2021 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { INavigationVariableItem } from \"@library/headers/navigationVariables\";\nimport { Box } from \"@library/layout/Box\";\nimport { quickLinksClasses } from \"@library/navigation/QuickLinks.classes\";\nimport { quickLinksVariables } from \"@library/navigation/QuickLinks.variables\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport { useUniqueID } from \"@library/utility/idUtils\";\nimport { t } from \"@vanilla/i18n\";\nimport classNames from \"classnames\";\nimport React from \"react\";\n\ninterface IProps {\n    title?: string;\n    links: Array<INavigationVariableItem & { count?: number }>;\n}\n\n/**\n * Component for displaying data lists\n */\nexport function QuickLinksView(props: IProps) {\n    const classes = quickLinksClasses();\n    const variables = quickLinksVariables();\n    const domID = useUniqueID(\"quickLinkTitle\");\n    const { title, links } = props;\n    const visibleLinks = links.filter((link) => {\n        const isSetHidden = \"isHidden\" in link && link.isHidden;\n        return !isSetHidden;\n    });\n\n    return (\n        <Box options={variables.box}>\n            <nav className={classNames(classes.root)} aria-labelledby={domID}>\n                <h2 className={classNames(classes.title, \"no-css\")} id={domID}>\n                    {title}\n                </h2>\n                <ul className={classNames(classes.list, \"no-css\")}>\n                    {visibleLinks ? (\n                        visibleLinks.map((link) => (\n                            <QuickLink key={link.id} path={link.url} title={link.name} count={link.count} />\n                        ))\n                    ) : (\n                        <></>\n                    )}\n                </ul>\n            </nav>\n        </Box>\n    );\n}\ninterface IQuickLinkProps {\n    path: string;\n    title: string;\n    count?: number;\n    isHidden?: boolean;\n}\n\nfunction QuickLink(props: IQuickLinkProps) {\n    const classes = quickLinksClasses();\n    const { path, title, count, isHidden } = props;\n    return (\n        <li className={classNames(classes.listItem)}>\n            <SmartLink className={classNames(classes.listItemTitle)} to={path}>\n                {t(title)}\n                {count != null && <span className={classNames(classes.count)}>{count}</span>}\n            </SmartLink>\n        </li>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { registerReducer } from \"@library/redux/reducerRegistry\";\nimport { forumReducer } from \"@vanilla/addon-vanilla/redux/reducer\";\nimport { registerCommunitySearchDomain } from \"@vanilla/addon-vanilla/search/registerCommunitySearchDomain\";\nimport { SearchContextProvider } from \"@library/contexts/SearchContext\";\nimport { CommunitySearchProvider } from \"@vanilla/addon-vanilla/search/CommunitySearchProvider\";\nimport { accessibleRoleButton } from \"@vanilla/addon-vanilla/legacy/legacyAccessibility\";\nimport { addComponent } from \"@library/utility/componentRegistry\";\nimport { HomeWidget } from \"@library/homeWidget/HomeWidget\";\nimport { QuickLinks } from \"@library/navigation/QuickLinks\";\n\nregisterReducer(\"forum\", forumReducer);\nregisterCommunitySearchDomain();\n\naddComponent(\"HomeWidget\", HomeWidget, { overwrite: true });\naddComponent(\"QuickLinks\", QuickLinks, { overwrite: true });\n\nSearchContextProvider.setOptionProvider(new CommunitySearchProvider());\naccessibleRoleButton();\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { getGlobalSearchSorts } from \"@library/search/SearchFormContextProvider\";\nimport { SearchService } from \"@library/search/SearchService\";\nimport { TypeDiscussionsIcon } from \"@vanilla/library/src/scripts/icons/searchIcons\";\nimport { ISearchForm } from \"@vanilla/library/src/scripts/search/searchTypes\";\nimport { ICommunitySearchTypes } from \"@vanilla/addon-vanilla/search/communitySearchTypes\";\nimport { t } from \"@vanilla/i18n\";\nimport { onReady } from \"@vanilla/library/src/scripts/utility/appUtils\";\nimport flatten from \"lodash/flatten\";\nimport { CommunityPostTypeFilter } from \"@vanilla/addon-vanilla/search/CommunityPostTypeFilter\";\nimport { SearchFilterPanelCommunity } from \"@vanilla/addon-vanilla/search/SearchFilterPanelCommunity\";\nimport Result from \"@vanilla/library/src/scripts/result/Result\";\nimport { SearchFilterPanelComments } from \"@vanilla/addon-vanilla/search/SearchFilterPanelComments\";\nimport CollapseCommentsSearchMeta from \"@vanilla/addon-vanilla/search/CollapseCommentsSearchMeta\";\nimport { notEmpty } from \"@vanilla/utils\";\n\nexport function registerCommunitySearchDomain() {\n    onReady(() => {\n        SearchService.addPluggableDomain({\n            key: \"discussions\",\n            name: t(\"Discussions\"),\n            sort: 1,\n            icon: <TypeDiscussionsIcon />,\n            getAllowedFields: () => {\n                return [\n                    \"tagsOptions\",\n                    \"categoryOption\",\n                    \"categoryOptions\",\n                    \"followedCategories\",\n                    \"includeChildCategories\",\n                    \"includeArchivedCategories\",\n                    \"discussionID\",\n                ];\n            },\n            transformFormToQuery: (form: ISearchForm<ICommunitySearchTypes>) => {\n                const query: ISearchForm<ICommunitySearchTypes> = {\n                    ...form,\n                };\n\n                if (form.discussionID && typeof parseInt(form.discussionID) === \"number\") {\n                    query.recordTypes = [\"comment\"]; // Include only comment record types.\n                    query.scope = \"site\";\n                    query.collapse = false;\n                }\n\n                if (query.tagsOptions) {\n                    query.tags = query.tagsOptions.map((tag: any) => tag?.tagCode ?? tag?.tagName).filter(notEmpty);\n                }\n\n                if (query.categoryOptions) {\n                    query.categoryIDs = query.categoryOptions.map((option) => option.value as number);\n                    // These are not allowed parameters\n                    delete query.categoryOptions;\n                    delete query.categoryOption;\n                } else if (query.categoryOption) {\n                    query.categoryID = query.categoryOption.value as number;\n                }\n\n                return query;\n            },\n            getRecordTypes: () => {\n                return [\"discussion\", \"comment\"];\n            },\n            PanelComponent: SearchFilterPanelCommunity,\n            getDefaultFormValues: () => {\n                return {\n                    followedCategories: false,\n                    includeChildCategories: false,\n                    includeArchivedCategories: false,\n                    types: flatten(CommunityPostTypeFilter.postTypes.map((type) => type.values)),\n                };\n            },\n            getSortValues: () => {\n                const sorts = getGlobalSearchSorts();\n                if (SearchService.supportsExtensions()) {\n                    sorts.push(\n                        {\n                            content: \"Top\",\n                            value: \"-score\",\n                        },\n                        {\n                            content: \"Hot\",\n                            value: \"-hot\",\n                        },\n                    );\n                }\n                return sorts;\n            },\n            isIsolatedType: () => false,\n            ResultComponent: Result,\n            hasSpecificRecord: (form: ISearchForm<ICommunitySearchTypes>) =>\n                form.discussionID && typeof form.discussionID === \"number\",\n            getSpecificRecord: (form: ISearchForm<ICommunitySearchTypes>) => form.discussionID,\n            SpecificRecordPanel: SearchFilterPanelComments,\n            SpecificRecordComponent: CollapseCommentsSearchMeta,\n            showSpecificRecordCrumbs: () => false,\n        });\n\n        SearchService.addSubType({\n            label: t(\"Discussions\"),\n            icon: <TypeDiscussionsIcon />,\n            recordType: \"discussion\",\n            type: \"discussion\",\n        });\n\n        SearchService.addSubType({\n            label: t(\"Comment\"),\n            icon: <TypeDiscussionsIcon />,\n            recordType: \"comment\",\n            type: \"comment\",\n        });\n    });\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport {\n    IHomeWidgetItemOptions,\n    HomeWidgetItemContentType,\n    homeWidgetItemVariables,\n} from \"@library/homeWidget/HomeWidgetItem.styles\";\nimport {\n    IHomeWidgetContainerOptions,\n    homeWidgetContainerVariables,\n    homeWidgetContainerClasses,\n} from \"@library/homeWidget/HomeWidgetContainer.styles\";\nimport { IHomeWidgetItemProps, HomeWidgetItem } from \"@library/homeWidget/HomeWidgetItem\";\nimport { HomeWidgetContainer } from \"@library/homeWidget/HomeWidgetContainer\";\n\ninterface IProps {\n    // Options\n    containerOptions?: IHomeWidgetContainerOptions;\n    itemOptions?: IHomeWidgetItemOptions;\n    maxItemCount?: number;\n\n    // Content\n    title?: string;\n    itemData: IHomeWidgetItemProps[];\n    callToAction?: string;\n    url?: string;\n}\n\nexport function HomeWidget(props: IProps) {\n    const itemOptions = homeWidgetItemVariables(props.itemOptions).options;\n    const containerOptions = homeWidgetContainerVariables(props.containerOptions).options;\n    const containerClasses = homeWidgetContainerClasses(props.containerOptions);\n\n    let items = props.itemData;\n\n    if (props.maxItemCount && items.length > props.maxItemCount) {\n        items = items.slice(0, props.maxItemCount);\n    }\n\n    let extraSpacerItemCount = 0;\n    if (\n        [\n            HomeWidgetItemContentType.TITLE_BACKGROUND,\n            HomeWidgetItemContentType.TITLE_DESCRIPTION_ICON,\n            HomeWidgetItemContentType.TITLE_DESCRIPTION_IMAGE,\n        ].includes(itemOptions.contentType) &&\n        props.itemData.length < containerOptions.maxColumnCount\n    ) {\n        extraSpacerItemCount = containerOptions.maxColumnCount - props.itemData.length;\n    }\n\n    return (\n        <HomeWidgetContainer options={props.containerOptions} title={props.title}>\n            {items.map((item, i) => {\n                return <HomeWidgetItem key={i} {...item} options={props.itemOptions} />;\n            })}\n            {[...new Array(extraSpacerItemCount)].map((_, i) => {\n                return <div key={\"spacer-\" + i} className={containerClasses.gridItemSpacer}></div>;\n            })}\n        </HomeWidgetContainer>\n    );\n}\n","/**\n * @copyright 2009-2021 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { quickLinksVariables } from \"@library/navigation/QuickLinks.variables\";\nimport { QuickLinksView } from \"@library/navigation/QuickLinks.view\";\nimport { getThemeVariables } from \"@library/theming/getThemeVariables\";\nimport React, { useMemo } from \"react\";\n\ninterface IProps {\n    title?: string;\n}\n\nexport function QuickLinks(props: IProps) {\n    const { links } = quickLinksVariables();\n    // Get counts which are dynamically injected into the theme variables.\n\n    const linksWithCounts = useMemo(() => {\n        const counts = getThemeVariables()?.quickLinks?.counts;\n        if (!counts) {\n            return links;\n        }\n        for (const [key, value] of Object.entries(links)) {\n            const count = counts[value.id] ?? null;\n            if (count !== null) {\n                links[key].count = count;\n            }\n        }\n        return links;\n    }, [links]);\n\n    return <QuickLinksView title={props.title} links={linksWithCounts} />;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license Proprietary\n */\n\nimport { ISearchOptionProvider } from \"@library/contexts/SearchContext\";\nimport { formatUrl } from \"@library/utility/appUtils\";\nimport { IComboBoxOption } from \"@library/features/search/SearchBar\";\nimport { ISearchOptionData } from \"@library/features/search/SearchOption\";\nimport { AxiosResponse } from \"axios\";\nimport apiv2 from \"@library/apiv2\";\nimport pDebounce from \"p-debounce\";\nimport { NEW_SEARCH_PAGE_ENABLED } from \"@vanilla/library/src/scripts/search/searchConstants\";\nimport { ISearchRequestQuery, ISearchResult } from \"@vanilla/library/src/scripts/search/searchTypes\";\n\n/**\n * Advanced Search implementation of autocomplete using sphinx.\n */\nexport class CommunitySearchProvider implements ISearchOptionProvider {\n    public supportsAutoComplete = true;\n\n    /**\n     * Simple data loading function for the search bar/react-select.\n     */\n    private fetchSearch = async (value: string, options = {}): Promise<Array<IComboBoxOption<ISearchOptionData>>> => {\n        const queryObj: ISearchRequestQuery = {\n            query: value,\n            expand: [\"breadcrumbs\", \"-body\"],\n            limit: 10,\n            collapse: true,\n            ...options,\n        };\n        const response: AxiosResponse<ISearchResult[]> = await apiv2.get(`/search`, { params: queryObj });\n        return response.data.map((result) => {\n            const data: ISearchOptionData = {\n                crumbs: result.breadcrumbs ?? [],\n                name: result.name,\n                dateUpdated: result.dateUpdated ?? result.dateInserted,\n                labels: result.labelCodes,\n                url: result.url,\n                type: result.type,\n            };\n            return {\n                label: result.name,\n                value: result.name,\n                data,\n                type: result.type,\n                url: result.url,\n            };\n        });\n    };\n\n    /**\n     * A debounced version of the fetchSearch() function.\n     */\n    private debounceFetchSearch = pDebounce(this.fetchSearch, 100);\n\n    /**\n     * Get autocomplete results.\n     *\n     * This has an early bailout for an empty string because initially focusing the input can cause\n     * a change event to be fired with an empty value.\n     *\n     * @see https://github.com/JedWatson/react-select/issues/614#issuecomment-380763225\n     */\n    public autocomplete = (query: string, options = {}) => {\n        if (query === \"\") {\n            return Promise.resolve([]);\n        }\n\n        return this.debounceFetchSearch(query, options);\n    };\n\n    public makeSearchUrl = (query: string) => {\n        const queryParamName = NEW_SEARCH_PAGE_ENABLED ? \"query\" : \"search\";\n        return formatUrl(`/search?${queryParamName}=${query}`, true);\n    };\n}\n","/**\n * Allows user to click on links styled as buttons using the space bar or enter key.\n */\n\nexport function accessibleRoleButton() {\n    document.addEventListener(\"keydown\", (event) => {\n        const target = event.target as HTMLElement;\n        if (target.getAttribute(\"role\") === \"button\" && (event.code === \"Enter\" || event.code === \"Space\")) {\n            event.preventDefault();\n            target.click();\n        }\n    });\n}\n","import { cssRaw, flattenNests } from \"@library/styles/styleShim\";\nimport { CSSObject } from \"@emotion/css\";\n\nexport function cssOut(selector: string, ...objects: CSSObject[]): void {\n    cssRaw({\n        [selector]: objects.map(flattenNests),\n    });\n}\n","/**\n * Set wepback's public path.\n * Otherwise the lookups of dynamically imported webpack files can fail on sites that have a different webroot\n * Eg. installed in a subfolder / using Reverse Proxy.\n *\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { assetUrl, getMeta } from \"@library/utility/appUtils\";\n\n/**\n * This needs to be a free variable.\n *\n * Webpack does some magic to make this work.\n * It you try and set a local or global version of it, it WILL NOT work.\n *\n * @see https://stackoverflow.com/questions/12934929/what-are-free-variables\n * @see https://webpack.js.org/configuration/output/#output-publicpath\n * @see https://github.com/webpack/webpack/issues/2776#issuecomment-233208623\n */\n// @ts-ignore: Cannot find variable warning. See comment aboe.\n__webpack_public_path__ = assetUrl(\"/dist/\" + __BUILD__SECTION__ + \"/\");\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { ReactElement } from \"react\";\n\nexport interface IComponentMountOptions {\n    overwrite?: boolean;\n    clearContents?: boolean;\n    widgetResolver?: IWidgetResolver;\n    bypassPortalManager?: boolean;\n    unmountBeforeRender?: boolean;\n}\n\nexport interface IWidgetOptions {\n    $type?: string; // the component to get, optional because coming from API\n    children?: IWidgetOptions[]; // widgets to mount as children\n    [x: string]: any; // can take additional properties\n}\n\n/**\n * Defines an interface for a function that will turn widget options into props that can be used to render a component.\n */\nexport interface IWidgetResolver {\n    (options: IWidgetOptions): {\n        [key: string]: any;\n    };\n}\n\ninterface IPortal {\n    target: HTMLElement;\n    component: React.ReactElement;\n}\n\nlet hasRendered = false;\nconst portals: IPortal[] = [];\n\nconst PORTAL_MANAGER_ID = \"vanillaPortalManager\";\ntype PortalContextType = React.FC<{ children?: React.ReactNode }>;\nlet PortalContext: PortalContextType = (props) => {\n    return <React.Fragment>{props.children}</React.Fragment>;\n};\n\nexport function applySharedPortalContext(context: PortalContextType) {\n    PortalContext = context;\n    if (hasRendered) {\n        // Re-render the portals. We never want to be the first to initialize rendering though.\n        renderPortals();\n    }\n}\n\n/**\n * Component for managing all mounted components from a single wrapped context.\n *\n * This allows a shared context provider to be applied to parts of the site.\n */\nfunction PortalManager() {\n    return (\n        <div>\n            <PortalContext>\n                {portals.map((portal, i) => {\n                    return (\n                        <React.Fragment key={i}>\n                            {ReactDOM.createPortal(portal.component, portal.target)}\n                        </React.Fragment>\n                    );\n                })}\n            </PortalContext>\n        </div>\n    );\n}\n\nfunction renderPortals(callback?: () => void) {\n    hasRendered = true;\n    // Ensure we have our modal container.\n    let container = document.getElementById(PORTAL_MANAGER_ID);\n    if (!container) {\n        container = document.createElement(\"div\");\n        container.id = PORTAL_MANAGER_ID;\n        document.body.appendChild(container);\n    }\n\n    ReactDOM.render(<PortalManager />, container, callback);\n}\n\n/**\n * Mount a root component of a React tree.\n *\n * - ReactDOM render.\n * - Typestyle render.\n *\n * If the overwrite option is passed this component will replace the components you passed as target.\n *\n * Default Mode:\n * <div><TARGET /></div> -> <div><TARGET><REACT></TARGET><div>\n *\n * Overwrite Mode:\n * <div><TARGET /></div> -> <div><REACT/></div>\n */\nexport function mountReact(\n    component: React.ReactElement,\n    target: HTMLElement,\n    callback?: () => void,\n    options?: IComponentMountOptions & { bypassPortalManager?: boolean },\n) {\n    if (options?.bypassPortalManager) {\n        const doRender = () => {\n            ReactDOM.render(<PortalContext>{component}</PortalContext>, target, callback);\n        };\n        if (options?.unmountBeforeRender) {\n            ReactDOM.unmountComponentAtNode(target);\n        }\n        setImmediate(doRender);\n        return;\n    }\n\n    let mountPoint = target;\n    let cleanupContainer: HTMLElement | undefined;\n    if (options?.clearContents) {\n        target.innerHTML = \"\";\n    }\n\n    if (options && options.overwrite) {\n        const container = document.createElement(\"span\");\n        cleanupContainer = container;\n        target.parentElement!.insertBefore(container, target);\n        mountPoint = container;\n    }\n    portals.push({ target: mountPoint, component });\n\n    renderPortals(() => {\n        if (cleanupContainer) {\n            target.remove();\n            if (cleanupContainer.firstElementChild) {\n                cleanupContainer.parentElement!.insertBefore(cleanupContainer.firstElementChild, cleanupContainer);\n                cleanupContainer.remove();\n                target.remove();\n            }\n        }\n        callback && callback();\n    });\n}\n\nexport interface IMountable {\n    target: HTMLElement;\n    component: React.ReactElement;\n}\n\nexport function mountReactMultiple(components: IMountable[], callback?: () => void, options?: IComponentMountOptions) {\n    if (!components.length) {\n        return;\n    }\n\n    let toCleanup: Array<{ target: HTMLElement; cleanup: HTMLElement }> = [];\n    components.forEach(({ component, target }) => {\n        let mountPoint = target;\n        if (options?.clearContents) {\n            target.innerHTML = \"\";\n        }\n\n        if (options && options.overwrite) {\n            const container = document.createElement(\"span\");\n            toCleanup.push({\n                target,\n                cleanup: container,\n            });\n            target.parentElement!.insertBefore(container, target);\n            mountPoint = container;\n        }\n        portals.push({ target: mountPoint, component });\n    });\n\n    renderPortals(() => {\n        toCleanup.forEach(({ cleanup, target }) => {\n            if (cleanup.firstElementChild) {\n                cleanup.parentElement!.insertBefore(cleanup.firstElementChild, cleanup);\n                cleanup.remove();\n                target.remove();\n            }\n        });\n        callback && callback();\n    });\n}\n\n/**\n * Mount a modal with ReactDOM. This is only needed at the top level context.\n *\n * If you are already in a react context, just use `<Modal />`.\n * Note: Using this will clear any other modals mounted with this component.\n *\n * @param element The <Modal /> element to render.\n * @param containerID The container to render the modal into. Defaults to modal container.\n * @param asRealPortal Whether or not we should render this as a real portal, or one managed by the portal manager.\n */\nexport function mountPortal(element: ReactElement<any>, containerID: string, asRealPortal: boolean = false) {\n    // Ensure we have our modal container.\n    let container = document.getElementById(containerID);\n    if (!container) {\n        container = document.createElement(\"div\");\n        container.id = containerID;\n        document.body.appendChild(container);\n    }\n\n    if (asRealPortal) {\n        return ReactDOM.createPortal(element, container);\n    } else {\n        return new Promise((resolve) => mountReact(element, container!, () => resolve()));\n    }\n}\n"],"sourceRoot":""}