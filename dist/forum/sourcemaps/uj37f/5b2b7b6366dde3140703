{"version":3,"sources":["webpack://vanilla-forum/./library/src/scripts/styles/styleUnit.ts","webpack://vanilla-forum/./library/src/scripts/styles/ColorsUtils.ts","webpack://vanilla-forum/./library/src/scripts/styles/Mixins.ts","webpack://vanilla-forum/./library/src/scripts/utility/appUtils.tsx","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpers.ts","webpack://vanilla-forum/./library/src/scripts/styles/globalStyleVars.ts","webpack://vanilla-forum/./library/src/scripts/styles/themeCache.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleUtils.ts","webpack://vanilla-forum/./library/src/scripts/@types/api/core.ts","webpack://vanilla-forum/./library/src/scripts/forms/buttonTypes.ts","webpack://vanilla-forum/./library/src/scripts/styles/Variables.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleShim.ts","webpack://vanilla-forum/./library/src/scripts/icons/iconStyles.ts","webpack://vanilla-forum/./library/src/scripts/utility/idUtils.ts","webpack://vanilla-forum/./library/src/scripts/forms/Button.tsx","webpack://vanilla-forum/./library/src/scripts/forms/formElementStyles.ts","webpack://vanilla-forum/./library/src/scripts/icons/common.tsx","webpack://vanilla-forum/./library/src/scripts/layout/panelLayoutStyles.ts","webpack://vanilla-forum/./library/src/scripts/redux/ReduxActions.ts","webpack://vanilla-forum/./library/src/scripts/routing/links/SmartLink.tsx","webpack://vanilla-forum/./library/src/scripts/layout/types/interface.layoutTypes.ts","webpack://vanilla-forum/./library/src/scripts/forms/borderStylesCalculator.ts","webpack://vanilla-forum/./library/src/scripts/flyouts/dropDownStyles.ts","webpack://vanilla-forum/./library/src/scripts/apiv2.ts","webpack://vanilla-forum/./library/src/scripts/styles/shadowHelpers.ts","webpack://vanilla-forum/./library/src/scripts/modal/ModalSizes.ts","webpack://vanilla-forum/./library/src/scripts/forms/select/overwrites.tsx","webpack://vanilla-forum/./library/src/scripts/headers/TitleBar.variables.ts","webpack://vanilla-forum/./library/src/scripts/styles/metasStyles.ts","webpack://vanilla-forum/./library/src/scripts/embeddedContent/components/EmbedContent.tsx","webpack://vanilla-forum/./library/src/scripts/forms/ButtonPreset.ts","webpack://vanilla-forum/./library/src/scripts/icons/titleBar.tsx","webpack://vanilla-forum/./library/src/scripts/forms/InputBlockStyles.tsx","webpack://vanilla-forum/./library/src/scripts/features/users/UserActions.ts","webpack://vanilla-forum/./library/src/scripts/layout/ScreenReaderContent.tsx","webpack://vanilla-forum/./library/src/scripts/forms/inputStyles.ts","webpack://vanilla-forum/./library/src/scripts/theming/ThemeActions.ts","webpack://vanilla-forum/./library/src/scripts/forms/Button.variables.ts","webpack://vanilla-forum/./library/src/scripts/layout/DeviceContext.tsx","webpack://vanilla-forum/./library/src/scripts/forms/buttonMixins.ts","webpack://vanilla-forum/./library/src/scripts/layout/Paragraph.tsx","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersBorders.ts","webpack://vanilla-forum/./library/src/scripts/search/searchConstants.ts","webpack://vanilla-forum/./library/src/scripts/embeddedContent/components/EmbedContainer.tsx","webpack://vanilla-forum/./library/src/scripts/forms/styleHelperButtonGenerator.ts","webpack://vanilla-forum/./library/src/scripts/layout/types/interface.twoColumns.ts","webpack://vanilla-forum/./library/src/scripts/layout/types/layout.twoColumns.ts","webpack://vanilla-forum/./library/src/scripts/layout/types/layout.threeColumns.ts","webpack://vanilla-forum/./library/src/scripts/layout/types/mediaQueryFactory.ts","webpack://vanilla-forum/./library/src/scripts/layout/LayoutContext.tsx","webpack://vanilla-forum/./library/src/scripts/layout/Heading.tsx","webpack://vanilla-forum/./library/src/scripts/headers/titleBarStyles.ts","webpack://vanilla-forum/./library/src/scripts/styles/textUtils.ts","webpack://vanilla-forum/./library/src/scripts/features/users/Permission.tsx","webpack://vanilla-forum/./library/src/scripts/content/Translate.tsx","webpack://vanilla-forum/./library/src/scripts/styles/cssUtilsTypes.ts","webpack://vanilla-forum/./library/src/scripts/forms/buttonStyles.ts","webpack://vanilla-forum/./library/src/scripts/redux/getStore.ts","webpack://vanilla-forum/./library/src/scripts/features/users/userModel.ts","webpack://vanilla-forum/./library/src/scripts/features/users/ui/popupUserCardStyles.ts","webpack://vanilla-forum/./library/src/scripts/search/SearchActions.ts","webpack://vanilla-forum/./library/src/scripts/layout/ConditionalWrap.tsx","webpack://vanilla-forum/./library/src/scripts/flyouts/DropDownContents.tsx","webpack://vanilla-forum/./library/src/scripts/layout/frame/FrameHeaderMinimal.tsx","webpack://vanilla-forum/./library/src/scripts/flyouts/DropDown.tsx","webpack://vanilla-forum/./library/src/scripts/banner/SearchBarPresets.ts","webpack://vanilla-forum/./library/src/scripts/search/SearchService.tsx","webpack://vanilla-forum/./library/src/scripts/layout/components/Container.tsx","webpack://vanilla-forum/./library/src/scripts/content/dateTimeStyles.ts","webpack://vanilla-forum/./library/src/scripts/content/DateTime.tsx","webpack://vanilla-forum/./library/src/scripts/utility/componentRegistry.tsx","webpack://vanilla-forum/./library/src/scripts/routing/LinkAsButton.tsx","webpack://vanilla-forum/./library/src/scripts/search/SearchContext.tsx","webpack://vanilla-forum/./library/src/scripts/modal/ModalView.tsx","webpack://vanilla-forum/./library/src/scripts/modal/Modal.tsx","webpack://vanilla-forum/./library/src/scripts/loaders/Loader.tsx","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/userPhotoStyles.ts","webpack://vanilla-forum/./library/src/scripts/features/search/searchBarStyles.ts","webpack://vanilla-forum/./library/src/scripts/features/search/SearchScopeContext.tsx","webpack://vanilla-forum/./library/src/scripts/layout/components/containerStyles.ts","webpack://vanilla-forum/./library/src/scripts/loaders/ButtonLoader.tsx","webpack://vanilla-forum/./library/src/scripts/routing/links/LinkContextProvider.tsx","webpack://vanilla-forum/./library/src/scripts/features/search/searchResultsStyles.ts","webpack://vanilla-forum/./library/src/scripts/forms/ErrorMessages.tsx","webpack://vanilla-forum/./library/src/scripts/icons/searchIcons.tsx","webpack://vanilla-forum/./library/src/scripts/flyouts/items/DropDownItemLink.tsx","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/UserPhoto.tsx","webpack://vanilla-forum/./library/src/scripts/layout/frame/FrameBody.tsx","webpack://vanilla-forum/./library/src/scripts/layout/frame/Frame.tsx","webpack://vanilla-forum/./library/src/scripts/layout/frame/FrameHeader.tsx","webpack://vanilla-forum/./library/src/scripts/layout/ScrollOffsetContext.tsx","webpack://vanilla-forum/./library/src/scripts/forms/InputTextBlock.tsx","webpack://vanilla-forum/./library/src/scripts/gdn.ts","webpack://vanilla-forum/./library/src/scripts/layout/frame/FrameFooter.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/components/EmbedContainerSize.tsx","webpack://vanilla-forum/./library/src/scripts/routing/DocumentTitle.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/IEmbedContext.tsx","webpack://vanilla-forum/./library/src/scripts/toolTip/toolTipStyles.ts","webpack://vanilla-forum/./library/src/scripts/toolTip/ToolTip.tsx","webpack://vanilla-forum/./library/src/scripts/forms/Checkbox.tsx","webpack://vanilla-forum/./library/src/scripts/pageViews/pageViewTracking.ts","webpack://vanilla-forum/./library/src/scripts/theming/themeReducer.ts","webpack://vanilla-forum/./library/src/scripts/locales/localeReducer.ts","webpack://vanilla-forum/./library/src/scripts/features/conversations/ConversationsModel.ts","webpack://vanilla-forum/./library/src/scripts/features/tags/TagsReducer.tsx","webpack://vanilla-forum/./library/src/scripts/features/discussions/discussionModel.ts","webpack://vanilla-forum/./library/src/scripts/redux/reducerRegistry.ts","webpack://vanilla-forum/./library/src/scripts/loaders/loadingRectangleStyles.ts","webpack://vanilla-forum/./library/src/scripts/loaders/LoadingRectangle.tsx","webpack://vanilla-forum/./library/src/scripts/animation/EntranceAnimation.tsx","webpack://vanilla-forum/./library/src/scripts/banner/BannerContext.tsx","webpack://vanilla-forum/./library/src/scripts/layout/FlexSpacer.tsx","webpack://vanilla-forum/./library/src/scripts/features/notifications/NotificationsActions.ts","webpack://vanilla-forum/./library/src/scripts/headers/LogoAlignment.ts","webpack://vanilla-forum/./library/src/scripts/search/searchReducer.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersVisibility.ts","webpack://vanilla-forum/./library/src/scripts/content/userContentStyles.ts","webpack://vanilla-forum/./library/src/scripts/embeddedContent/components/embedStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/frame/frameStyles.ts","webpack://vanilla-forum/./library/src/scripts/contexts/SearchContext.tsx","webpack://vanilla-forum/./library/src/scripts/forms/dateRangeStyles.ts","webpack://vanilla-forum/./library/src/scripts/theming/getThemeVariables.ts","webpack://vanilla-forum/./library/src/scripts/icons/editorIcons.tsx","webpack://vanilla-forum/./library/src/scripts/search/SearchPageRoute.tsx","webpack://vanilla-forum/./library/src/scripts/routing/RouteHandler.tsx","webpack://vanilla-forum/./library/src/scripts/features/users/suggestion/UserSuggestionActions.ts","webpack://vanilla-forum/./library/src/scripts/forms/select/tokensStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/frame/frameBodyStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/homePageStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/bodyStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/Backgrounds.tsx","webpack://vanilla-forum/./library/src/scripts/styles/tagStyles.ts","webpack://vanilla-forum/./library/src/scripts/forms/select/selectBoxStyles.ts","webpack://vanilla-forum/./library/src/scripts/embeddedContent/embedConstants.tsx","webpack://vanilla-forum/./library/src/scripts/content/attachments/attachmentIconsStyles.ts","webpack://vanilla-forum/./library/src/scripts/content/attachments/AttatchmentType.ts","webpack://vanilla-forum/./library/src/scripts/icons/fileTypes.tsx","webpack://vanilla-forum/./library/src/scripts/content/attachments/attachmentUtils.tsx","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersAnimation.ts","webpack://vanilla-forum/./library/src/scripts/content/NumberFormatted.tsx","webpack://vanilla-forum/./library/src/scripts/forms/CheckboxGroup.tsx","webpack://vanilla-forum/./library/src/scripts/features/users/suggestion/SuggestionTrie.ts","webpack://vanilla-forum/./library/src/scripts/features/users/suggestion/UserSuggestionModel.ts","webpack://vanilla-forum/./library/src/scripts/forms/paddingOffsetFromBorderRadius.ts","webpack://vanilla-forum/./library/src/scripts/forms/checkRadioStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/frame/frameFooterStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/frame/frameHeaderStyles.ts","webpack://vanilla-forum/./library/src/scripts/content/TruncatedText.tsx","webpack://vanilla-forum/./library/src/scripts/routing/links/BackRoutingProvider.tsx","webpack://vanilla-forum/./library/src/scripts/features/users/MultiUserInput.tsx","webpack://vanilla-forum/./library/src/scripts/forms/select/Tokens.tsx","webpack://vanilla-forum/./library/src/scripts/features/search/suggestedTextStyles.ts","webpack://vanilla-forum/./library/src/scripts/features/search/SearchBar.variables.ts","webpack://vanilla-forum/./library/src/scripts/forms/datePickerStyles.ts","webpack://vanilla-forum/./library/src/scripts/forms/DatePicker.tsx","webpack://vanilla-forum/./library/src/scripts/forms/DateRange.tsx","webpack://vanilla-forum/./library/src/scripts/errorPages/pageErrorMessageStyles.ts","webpack://vanilla-forum/./library/src/scripts/errorPages/DetailedErrorMessages.tsx","webpack://vanilla-forum/./library/src/scripts/errorPages/CoreErrorMessages.tsx","webpack://vanilla-forum/./library/src/scripts/search/panels/filterPanel.styles.ts","webpack://vanilla-forum/./library/src/scripts/search/panels/FilterFrame.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/components/embedButtonStyles.ts","webpack://vanilla-forum/./library/src/scripts/embeddedContent/components/EmbedButton.tsx","webpack://vanilla-forum/./library/src/scripts/locales/localeActions.ts","webpack://vanilla-forum/./library/src/scripts/features/conversations/ConversationsActions.ts","webpack://vanilla-forum/./library/src/scripts/features/tags/TagsAction.tsx","webpack://vanilla-forum/./library/src/scripts/features/discussions/DiscussionActions.ts","webpack://vanilla-forum/./library/src/scripts/styles/fontFallbacks.ts","webpack://vanilla-forum/./library/src/scripts/loaders/loaderStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/TitleBarContext.tsx","webpack://vanilla-forum/./library/src/scripts/contexts/EntryLinkContext.tsx","webpack://vanilla-forum/./library/src/scripts/modal/modalStyles.ts","webpack://vanilla-forum/./library/src/scripts/forms/select/selectOneStyles.tsx","webpack://vanilla-forum/./library/src/scripts/search/placesSearchListing.styles.ts","webpack://vanilla-forum/./library/src/scripts/content/NumberFormatted.styles.tsx","webpack://vanilla-forum/./library/src/scripts/content/spoilers.ts","webpack://vanilla-forum/./library/src/scripts/content/index.ts","webpack://vanilla-forum/./library/src/scripts/content/emoji.ts","webpack://vanilla-forum/./library/src/scripts/embeddedContent/components/embedDropdownStyles.ts","webpack://vanilla-forum/./library/src/scripts/embeddedContent/components/EmbedDropdown.tsx","webpack://vanilla-forum/./library/src/scripts/navigation/CloseButton.tsx","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersTypography.ts","webpack://vanilla-forum/./library/src/scripts/routing/links/backLinkStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/panelWidgetStyles.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersBackgroundStyling.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersPositioning.ts","webpack://vanilla-forum/./library/src/scripts/features/search/SearchOption.tsx","webpack://vanilla-forum/./library/src/scripts/analytics/AnalyticsData.tsx","webpack://vanilla-forum/./library/src/scripts/features/search/SearchScope.tsx","webpack://vanilla-forum/./library/src/scripts/forms/select/ClearButton.tsx","webpack://vanilla-forum/./library/src/scripts/features/search/SearchBar.tsx","webpack://vanilla-forum/./library/src/scripts/navigation/ProfileLink.tsx","webpack://vanilla-forum/./library/src/scripts/result/ResultMeta.tsx","webpack://vanilla-forum/./library/src/scripts/utility/fileUtils.tsx","webpack://vanilla-forum/./library/src/scripts/features/notifications/NotificationsModel.ts","webpack://vanilla-forum/./library/src/scripts/layout/types/interface.panelLayout.ts","webpack://vanilla-forum/./library/src/scripts/forms/InputBlock.tsx","webpack://vanilla-forum/./library/src/scripts/search/PlacesSearchListingContainer.tsx","webpack://vanilla-forum/./library/src/scripts/flyouts/items/DropDownItemButton.tsx","webpack://vanilla-forum/./library/src/scripts/flyouts/items/DropDownItem.tsx","webpack://vanilla-forum/./library/src/scripts/navigation/BreadCrumbString.tsx","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/compactSearchStyles.ts","webpack://vanilla-forum/./library/src/scripts/features/users/modules/hasUserViewPermission.ts","webpack://vanilla-forum/./library/src/scripts/navigation/SimplePagerModel.ts","webpack://vanilla-forum/./library/src/scripts/search/panels/FilterPanelAll.tsx","webpack://vanilla-forum/./library/src/scripts/search/PlacesListingPlaceHolder.tsx","webpack://vanilla-forum/./library/src/scripts/search/PlacesSearchListing.tsx","webpack://vanilla-forum/./library/src/scripts/search/SearchFormContextProvider.tsx","webpack://vanilla-forum/./library/src/scripts/features/users/ui/PopupUserCard.tsx","webpack://vanilla-forum/./library/src/scripts/features/users/modules/UserCardModule.tsx","webpack://vanilla-forum/./library/src/scripts/features/users/userHooks.tsx","webpack://vanilla-forum/./library/src/scripts/features/users/modules/UserCardModuleLazyLoad.tsx","webpack://vanilla-forum/./library/src/scripts/content/attachments/AttachmentIcon.tsx","webpack://vanilla-forum/./library/src/scripts/content/attachments/AttachmentIcons.tsx","webpack://vanilla-forum/./library/src/scripts/result/Result.tsx","webpack://vanilla-forum/./library/src/scripts/content/collapsableContentStyles.tsx","webpack://vanilla-forum/./library/src/scripts/content/CollapsableContent.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/IFrameEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/BrightcoveEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/CodePenEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/components/embedErrorStyles.ts","webpack://vanilla-forum/./library/src/scripts/embeddedContent/components/EmbedRenderError.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/components/EmbedErrorBoundary.tsx","webpack://vanilla-forum/./library/src/scripts/content/attachments/Attachment.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/FileEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/GettyImagesEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/GiphyEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/ImgurEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/InstagramEmbedPlaceholder.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/InstagramEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/components/EmbedTitle.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/LinkEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/PanoptoEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/content/hashScrolling.ts","webpack://vanilla-forum/./library/src/scripts/content/UserContent.tsx","webpack://vanilla-forum/./library/src/scripts/content/userLabelStyles.ts","webpack://vanilla-forum/./library/src/scripts/content/rolesStyles.ts","webpack://vanilla-forum/./library/src/scripts/content/Roles.tsx","webpack://vanilla-forum/./library/src/scripts/content/UserLabel.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/quoteEmbedStyles.ts","webpack://vanilla-forum/./library/src/scripts/embeddedContent/QuoteEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/SoundCloudEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/twitterEmbedStyles.ts","webpack://vanilla-forum/./library/src/scripts/embeddedContent/TwitterEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/VideoEmbed.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/embedService.tsx","webpack://vanilla-forum/./library/src/scripts/features/search/IndependentSearch.tsx","webpack://vanilla-forum/./library/src/scripts/styles/widgetStyleVars.ts","webpack://vanilla-forum/./library/src/scripts/banner/bannerStyles.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersBreakpoints.ts","webpack://vanilla-forum/./library/src/scripts/banner/contentBannerStyles.tsx","webpack://vanilla-forum/./library/src/scripts/banner/DefaultBannerBg.tsx","webpack://vanilla-forum/./library/src/scripts/banner/Banner.tsx","webpack://vanilla-forum/./library/src/scripts/content/attachments/attachmentStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/components/PanelWidget.tsx","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersButtons.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersColors.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersFeedback.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersSpacing.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersReset.ts","webpack://vanilla-forum/./library/src/scripts/styles/styleHelpersSpinner.ts","webpack://vanilla-forum/./library/src/scripts/layout/PanelBackground.variables.ts","webpack://vanilla-forum/./library/src/scripts/content/code.ts","webpack://vanilla-forum/./library/src/scripts/styles/typographyStyles.ts","webpack://vanilla-forum/./library/src/scripts/styles/animationHelpers.ts","webpack://vanilla-forum/./library/src/scripts/layout/pageHeadingContext.tsx","webpack://vanilla-forum/./library/src/scripts/flyouts/FlyoutToggle.tsx","webpack://vanilla-forum/./library/src/scripts/forms/select/SelectBox.tsx","webpack://vanilla-forum/./library/src/scripts/routing/links/BackLink.tsx","webpack://vanilla-forum/./library/src/scripts/flyouts/hamburgerStyles.ts","webpack://vanilla-forum/./library/src/scripts/headers/navigationVariables.ts","webpack://vanilla-forum/./library/src/scripts/flyouts/panelNav/PanelNavItems.tsx","webpack://vanilla-forum/./library/src/scripts/flyouts/panelNav/DropDownPanelNav.tsx","webpack://vanilla-forum/./library/src/scripts/flyouts/items/DropDownItemSeparator.tsx","webpack://vanilla-forum/./library/src/scripts/headers/MobileOnlyNavigation.tsx","webpack://vanilla-forum/./library/src/scripts/flyouts/Hamburger.tsx","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/meBoxStyles.ts","webpack://vanilla-forum/./library/src/scripts/flyouts/items/DropDownItemLinkWithCount.tsx","webpack://vanilla-forum/./library/src/scripts/flyouts/items/DropDownSection.tsx","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/userDropDownStyles.ts","webpack://vanilla-forum/./library/src/scripts/flyouts/items/DropDownUserCard.tsx","webpack://vanilla-forum/./library/src/scripts/flyouts/items/DropDownEditProfileLink.tsx","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/UserDropDownContents.tsx","webpack://vanilla-forum/./library/src/scripts/content/countStyles.ts","webpack://vanilla-forum/./library/src/scripts/content/Count.tsx","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/compactMeBoxStyles.ts","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/MeBoxIcon.tsx","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/UserDropdown.tsx","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/MessagesCount.tsx","webpack://vanilla-forum/./library/src/scripts/layout/frame/FrameHeaderWithAction.tsx","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/meBoxMessageStyles.ts","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/MeBoxDropDownItem.tsx","webpack://vanilla-forum/./library/src/scripts/@types/api/conversations.ts","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/MeBoxDropDownItemList.tsx","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/MessagesContents.tsx","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/MessagesDropDown.tsx","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/NotificationsContents.tsx","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/NotificationsCount.tsx","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/NotificationsDropDown.tsx","webpack://vanilla-forum/./library/src/scripts/headers/mebox/MeBox.tsx","webpack://vanilla-forum/./library/src/scripts/navigation/tabs/TabPanel.tsx","webpack://vanilla-forum/./library/src/scripts/navigation/tabs/TabButton.tsx","webpack://vanilla-forum/./library/src/scripts/navigation/tabs/tabButtonListStyles.ts","webpack://vanilla-forum/./library/src/scripts/navigation/tabs/TabButtonList.tsx","webpack://vanilla-forum/./library/src/scripts/navigation/tabs/Tabs.tsx","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/CompactMeBox.tsx","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/CompactSearch.tsx","webpack://vanilla-forum/./library/src/scripts/theming/ThemeLogo.tsx","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/HeaderLogo.tsx","webpack://vanilla-forum/./library/src/scripts/headers/titleBarNavStyles.ts","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/TitleBarListItem.tsx","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/TitleBarNavItem.tsx","webpack://vanilla-forum/./library/src/scripts/headers/TitleBarMegaMenu.styles.ts","webpack://vanilla-forum/./library/src/scripts/headers/TitleBarMegaMenu.tsx","webpack://vanilla-forum/./library/src/scripts/headers/mebox/pieces/TitleBarNav.tsx","webpack://vanilla-forum/./library/src/scripts/headers/TitleBar.tsx","webpack://vanilla-forum/./library/src/scripts/embeddedContent/ImageEmbed.tsx"],"names":["styleUnit","val","options","unitFunction","px","isImportant","debug","undefined","output","valIsNumeric","isNumeric","toString","trim","important","logError","JSON","stringify","ColorsUtils","Error","colorValue","makeImportant","logDebugConditionnal","stringIsLinearGradient","color","referenceColor","ensureColorHelper","r","red","b","blue","g","green","Math","sqrt","weight","c","isLightColor","props","inverse","flipWeightForDark","colorObj","isLight","darken","lighten","referenceColorValue","flipIfMax","colorLightness","lightness","weightOffset","abs","weightCurved","colorDarker","colorLighter","flip","isSaturated","desaturate","saturate","Mixins","borderType","BorderType","BORDER","border","SHADOW","shadowHelper","embed","SEPARATOR","content","display","height","width","marginLeft","borderTop","singleBorder","borderBottom","NONE","property","spacings","spacingVals","propertyLeft","propertyRight","propertyTop","propertyBottom","all","vertical","horizontal","top","right","bottom","left","spacing","vars","colorOut","fontSize","size","fontWeight","lineHeight","textAlign","align","textShadow","shadow","fontFamily","family","fontFamilyWithDefaults","textTransform","transform","letterSpacing","textDecoration","fontFamilies","concat","isMonospaced","monoFallbacks","fontFallbacks","map","font","includes","join","radius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","borderTopLeftRadius","borderStyles","globalVariables","style","Object","keys","length","detailedStyles","fallbackBorderVariables","getValueIfItExists","defaultsAll","setAllBorders","merge","allStyles","singleBorderStyle","borderTopWidth","borderTopStyle","borderTopColor","topStyles","rightStyles","borderRightWidth","borderRightStyle","borderRightColor","bottomStyles","borderBottomWidth","borderBottomStyle","borderBottomColor","leftStyles","borderLeftWidth","borderLeftStyle","borderLeftColor","image","getBackgroundImage","unsetBackground","background","backgroundColor","backgroundAttachment","attachment","backgroundPosition","position","backgroundRepeat","repeat","backgroundSize","backgroundImage","opacity","boxOptions","itemSpacingOnAllItems","globalVars","contentBox","boxHasSetPaddings","values","filter","notEmpty","hasBackground","hasFullOutline","itemSpacing","padding","boxShadow","borderRadius","clear","margin","setAllRadii","itemState","overwriteColors","disableTextDecoration","linkColors","links","colors","Variables","clickable","mergedColors","default","skipDefault","linkStyleFallbacks","hover","allStates","focus","clickFocus","keyboardFocus","active","visited","styles","specificOverwrite","defaultOverwrite","globalDefault","topRight","topLeft","bottomRight","bottomLeft","middleOfParent","shrink","percent","maxHeight","maxWidth","middleLeftOfParent","middleRightOfParent","fullSizeOfParent","srOnly","overflow","clip","middle","wrap","alignItems","justifyContent","flexWrap","spaceBetween","middleLeft","inheritHeightClass","useThemeCache","styleFactory","flexDirection","flexGrow","ABSOLUTE_PATH_REGEX","getMeta","key","defaultValue","gdn","meta","parts","split","haystack","part","hasOwnProperty","setMeta","value","last","pop","isAllowedUrl","input","isUrl","protocols","require_tld","require_protocol","require_host","require_valid_protocol","allow_trailing_dot","allow_protocol_relative_urls","getSiteSection","formatUrl","path","withDomain","test","siteRoot","startsWith","replace","window","location","origin","siteUrl","urlBase","host","assetUrl","themeAsset","themeKey","_readyHandlers","onReady","callback","push","_executeReady","Promise","resolve","handlerPromises","handler","exec","then","document","readyState","addEventListener","onContent","makeProfileUrl","username","encodeURIComponent","accessibleLabel","template","variable","sprintf","unit","debugHelper","componentName","name","subElementName","label","importantUnit","withUnit","negativeUnit","negative","substring","isNaN","unitIfDefined","GlobalPreset","defaultFontFamily","forcedVars","colorPrimary","makeThemeVars","variableFactory","constants","stateColorEmphasis","fullGutter","states","bgEmphasis","borderEmphasis","selected","preset","LIGHT","elementaryColors","black","almostBlack","white","transparent","rgba","initialMainColors","fg","bg","primary","primaryContrast","secondary","secondaryContrast","colorSecondary","getRatioBasedOnBackgroundDarkness","mainColors","getRatioBasedOnDarkness","generatedMainColors","statePrimary","offsetLightness","stateSecondary","mixBgAndFg","mix","messageColors","warning","state","error","confirm","deleted","forEach","body","colorHover","formElements","buttons","modals","dropDowns","gutter","half","gutterSize","quarter","lineHeights","base","condensed","code","excerpt","foundationalWidths","panelWidth","middleColumn","minimalMiddleColumnWidth","narrowContentWidth","breakPoints","twoColumns","xs","widgetInit","widget","paddingBothSides","panelInit","panel","paddedWidth","middleColumnInit","contentWidth","fontsInit0","large","medium","small","largeTitle","title","subTitle","sizeWeight","mobile","weights","normal","semiBold","bold","googleFontFamily","forceGoogleFont","customFontUrl","customFont","url","fallbacks","fontsInit1","families","monospace","isOpenSans","fonts","alignment","headings","capitalLetterRatio","verticalOffset","horizontalOffset","verticalOffsetForAdjacentElements","icon","sizes","xSmall","spacer","animation","defaultTiming","defaultEasing","text","sizing","smallPadding","select","borderWidth","overlay","fade","horizontalMargin","verticalMargin","highlight","contrast","overlayBg","modifyColorBasedOnLightness","dropShadow","fullPageHeadingSpacer","userContent","h1","h2","h3","h4","h5","h6","list","listDecoration","minWidth","buttonIcon","offset","buttonPreset","separator","userContentHyphenation","minimumCharactersToHyphenate","minimumCharactersBeforeBreak","minimumCharactersAfterBreak","maximumConsecutiveBrokenLines","avoidLastWordToBeBroken","hyphenationZone","contentBoxes","depth1","depth2","depth3","headingBox","mobileSpacing","descriptionSpacing","itemList","mixPrimaryAndFg","mixPrimaryAndBg","findColorMatch","hexCode","_themeCacheID","hashString","random","THEME_CACHE_EVENT","resetThemeCache","dispatchEvent","CustomEvent","detail","useThemeCacheID","useState","cacheID","setCacheID","useEffect","listener","e","removeEventListener","memoize","storeState","getStore","getState","status","theme","assets","cacheKey","args","result","DEBUG_STYLES","Symbol","for","objects","debugName","shouldLogDebug","styleObjs","shift","subcomponentName","restObjects","obj","logWarning","logDebug","componentNames","themeVars","mergeWithGlobals","getThemeVariables","componentThemeVars","reduce","prev","curr","declaredVars","overrides","customVars","normalizeVariables","newObj","entries","stripUndefinedKeys","rgbRegex","rgbaRegex","hslRegex","hslaRegex","hexRegex","customVariable","defaultVariable","Array","isArray","ColorHelper","colorString","throwOnFailure","stringIsHexColor","stringIsRgbColor","parseInt","rgb","stringIsRgbaColor","a","parseFloat","stringIsHslColor","h","s","l","hsl","stringIsHslaColor","hsla","colorStringToInstance","mergedValue","match","stringIsValidColor","componentThemeVariables","componentVars","subComponentStyles","getPixelNumber","fallback","parsed","Number","LoadStatus","PublishStatus","Format","ButtonTypes","EMPTY_SPACING","EMPTY_FONTS","EMPTY_BORDER","EMPTY_BACKGROUND","EMPTY_STATE_COLORS","box","emotion","createEmotion","prepend","keyframes","cx","cssRaw","injectGlobal","css","flattenNests","original","$nest","cssRule","selector","object","media","mediaQuery","mediaQuerySections","stringMediaQuery","svgStyles","stroke","fill","strokeWidth","iconVariables","standard","fileType","newFolder","attachmentError","vanillaLogo","compact","settings","search","notifications","messages","user","userWarning","close","closeCompact","closeTiny","selectedCategory","signIn","chevronUp","plusCircle","deleteIcon","editIcon","categoryIcon","documentation","bookmarkIcon","newPostMenuIcon","typeAll","typeDiscussions","typeArticles","typeCategoriesAndGroups","typePlaces","typeFlag","chevronLeftCompact","isSmall","smallHeight","typeMember","typeIdeasIcon","typePollsIcon","typeQuestion","iconClasses","paddingRight","vanillaLogoMobile","triangeTiny","chevronLeftSmallCompact","marginRight","scale","transformOrigin","discussionIcon","globeIcon","hamburger","external","errorFgColor","warningFgColor","bookmark","normalState","loadingState","bookmarkedState","pointerEvents","itemFlyout","typeGroups","typeKnowledgeBase","DEFAULT_PREFIX","idCache","uniqueIDFromPrefix","prefix","count","useUniqueID","useMemo","getRequiredID","suffix","id","getOptionalID","getButtonStyleFromBaseClass","type","buttonUtils","buttonUtilityClasses","classes","buttonClasses","STANDARD","TEXT","TEXT_PRIMARY","textPrimary","ICON","ICON_COMPACT","buttonIconCompact","PRIMARY","TRANSPARENT","TRANSLUCID","translucid","TITLEBAR_LINK","titleBarClasses","linkButton","CUSTOM","custom","RESET","reset","DASHBOARD_STANDARD","DASHBOARD_PRIMARY","DASHBOARD_SECONDARY","DASHBOARD_LINK","NOT_STANDARD","notStandard","Button","this","baseClass","legacyMode","className","submit","ariaLabel","ariaHidden","controls","buttonRef","restProps","componentClasses","classNames","aria-label","aria-hidden","ref","aria-controls","children","React","Component","disabled","formElementsVariables","halfHeight","verticalPadding","horizontalPadding","fullBorderRadius","extraHorizontalPadding","giantInput","largeInput","errorSpacing","placeholder","buttonMarginAlignment","IIconSizes","DEFAULT","iconSize","SMALL","LARGE","root","paragraph","varsGlobal","marginBottom","paddingLeft","paddingTop","paddingBottom","actions","actionButton","activeButton","currentColorFill","leftChevronPath","horizontalChevronViewBox","centred","NBSP","RightChevronIcon","xmlns","viewBox","d","LeftChevronIcon","LeftChevronCompactIcon","BottomChevronIcon","rotate","CloseIcon","t","CloseCompactIcon","CloseTinyIcon","ClearIcon","CheckIcon","points","DropDownMenuIcon","WarningIcon","warningMessage","cy","ErrorIcon","errorMessage","fillRule","CheckCompactIcon","role","DownTriangleIcon","rotation","deg","translate","translateY","item","SignInIcon","strokeLinecap","strokeLinejoin","SearchErrorIcon","message","AccessibleImageMenuIcon","DeleteIcon","clipRule","DiscussionIcon","HamburgerIcon","LoaderIcon","version","DocumentationIcon","BookmarkIcon","ExternalIcon","ArrowIcon","layoutVariables","Devices","fallbackLayoutVariables","leftColumnBg","full","halfSize","quarterSize","contentSizes","narrow","noBleed","oneColumn","panelLayoutBreakPoints","panelLayoutSpacing","extraPadding","noBreadcrumbs","largePadding","withPanelBackground","setMediaQueries","useMinWidth","noBleedDown","twoColumnsDown","oneColumnDown","aboveOneColumn","LayoutTypes","THREE_COLUMNS","calculateDevice","clientWidth","XS","MOBILE","TABLET","NO_BLEED","DESKTOP","mediaQueries","isFullWidth","currentDevice","isCompact","generatePanelLayoutClasses","main","minHeight","viewHeight","marginTop","container","fullWidth","panelBackgroundVariables","config","render","leftColumn","flexBasis","rightColumn","mainColumn","mainColumnMaxWidth","calc","breadcrumbs","isSticky","sticky","breadcrumbsContainer","layoutSpecificStyles","middleColumnMaxWidth","ReduxActions","dispatch","api","actionCreator","apply","payload","requestType","responseType","errorType","dummyResponseType","dummyMetaType","request","createApiRequestAction","response","createApiResponseAction","createApiErrorAction","endpoint","actionCreators","params","requestPromise","get","useReduxActions","actionClass","useDispatch","apiv2","useDebugValue","bindThunkAction","asyncWorker","extra","async","started","done","failed","forwardRef","passthru","context","useLinkContext","prop","href","makeHref","to","isDynamicNavigation","rel","target","innerRef","makeLocationDescriptorObject","activeClassName","tabIndex","isForeign","sanitizeUrl","needle","checkIfKeyExistsAndIsDefined","dropDownVariables","widths","metas","sectionTitle","contents","dropDownClasses","shadows","listStyle","shadowOrBorderBasedOnLightness","dropDown","zIndex","asModal","likeDropDownContent","items","metaItems","metaItem","userSelect","section","toggleButtonIcon","buttonStates","action","actionMixin","actionActive","flex","panelNavItems","absolutePosition","panelFirstStyle","panelFirst","panelMobileOnly","panelLast","panelContent","sectionContents","sectionHeading","headingContentContainer","headingTitleContainer","arrow","actionIcon","backButton","noVerticalPadding","paddedFrame","check","flyoutOffset","contentOffsetCenter","contentOffsetLeft","contentOffsetRight","positioning","absolute","closeButton","itemButton","classBasedStates","buttonResetMixin","cursor","appearance","outline","borderColor","axios","create","baseURL","headers","common","transformResponse","defaults","responseData","errors","indexArrayByKey","paramsSerializer","qs","uploadFile","file","requestConfig","allowedExtensions","ext","toLowerCase","maxSize","filePieces","extension","humanSize","humanFileSize","stringTotal","amount","unitAbbr","attachmentsString","data","FormData","append","post","getFieldErrors","apiError","field","serverError","getGlobalErrorMessage","validFields","interceptors","use","description","contentType","newError","dom","DOMParser","parseFromString","details","querySelector","innerText","footers","querySelectorAll","rayID","footer","HTMLElement","extractJsonErrorFromCFHtmlString","reject","shadowVariables","makeVariables","blur","spread","widgetHover","modal","floatingButton","shadowBaseColor","baseColor","embedHover","hasBorder","shadowColor","makeShadow","shadowStyles","ModalSizes","Control","rest","OptionLoader","SelectOption","Menu","MenuList","MultiValueRemove","innerProps","selectProps","classesTokens","tokensClasses","classNamePrefix","onKeyDown","event","onClick","onTouchEnd","onMouseDown","removeIcon","NoOptionsMessage","NullComponent","isSelected","isFocused","parentLabel","selectOneClasses","checkIcon","ValueContainer","DropdownIndicator","components","chevron","titleBarVariables","formElementVars","colorsInit","bgImage","fullHeight","SHADOW_AS_BORDER","swoopInit","swoop","swoopOffset","fullBleed","enabled","startingOpacity","endingOpacity","bgColor","clearBorder","titleBarContainer","gutterSpacing","max","guest","buttonSize","button","generatedColors","borders","focusAccessible","dropDownContents","endElements","buttonContents","resister","mobileDropDown","meBox","logo","doubleLogoStrategy","offsetRight","LogoAlignment","LEFT","heightOffset","tablet","desktop","offsetVertical","navAlignment","CENTER","mobileLogo","breakpoints","cancelButtonInit","hoverOpacity","stateColors","metasVariables","metaContainerStyles","overwrites","allLinkStates","noState","metaItemStyle","metasClasses","tagVars","tagVariables","metaLink","metaIcon","metaLabel","whiteSpace","textOverflow","defaultTransition","metaStyle","draftStatus","noUnderline","inlineBlock","EmbedContent","useEmbedContext","inEditor","deleteSelf","descriptionID","embedContentClasses","aria-describedby","noBaseClass","EMBED_FOCUS_CLASS","embedActions","ButtonPreset","UserIconTypes","ComposeIcon","VanillaLogo","isMobile","SettingsIcon","SearchIcon","aria-labelledby","NotificationsIcon","filled","MessagesIcon","Fragment","userIconStyles","head","circle","SELECTED_INACTIVE","SELECTED_ACTIVE","UserIcon","styleType","alt","NoUserPhotoIcon","photoAlt","UserWarningIcon","inputBlockClasses","inputText","inputWrap","labelAndDescription","withIndicator","inputVariables","errorsPadding","inputClasses","inputPaddingMixin","labelNote","labelText","fieldsetGroup","multiLine","resize","related","grid","checkRadioClasses","tight","createAction","actionCreatorFactory","COUNT_CACHE_PERIOD","UserActions","users","current","LOADING","apiThunk","getMeACs","permissions","getPermissionsACs","currentTime","Date","getTime","lastRequested","countInformation","getCountsACs","query","userID","thunk","getUserACs","reponse","bindDispatch","clearInviteUsersAC","groupID","userIDs","emails","inviteUsersACs","IDs","updateInviteeIDsAC","updateInviteeEmailsAC","emailsString","updateInviteeEmailsStringAC","invitees","updateInviteesAC","useUserActions","ScreenReaderContent","Tag","tag","visibility","visuallyHidden","PureComponent","inputMixin","variables","inputVars","inputMixinVars","textInputSizingFromFixedHeight","placeholderStyles","applyInputCSSRules","cssOut","PreviewStatusType","ThemeActions","revisionID","getAssets","forceVariablesAC","getAllThemes_ACS","themeID","putCurrentThemeACs","put","putPreviewThemeACs","deleteThemeACs","delete","patchTheme","getThemeRevisions_ACs","patchTheme_ACs","patch","useThemeActions","buttonGlobalVariables","formElVars","standardContrast","compactHeight","borderMixRatio","buttonVariables","buttonGlobals","primaryPresetInit","SOLID","bgState","primaryPresetInit2","fgState","primaryPreset","OUTLINE","borderState","standardPresetInit","standardPresetInit1","standardPresetInit2","standardPreset","ADVANCED","radioPresetInit1","radioPresetInit2","radio","RADIO","extraNested","skipDynamicPadding","DeviceContext","createContext","useDevice","useContext","DeviceProvider","useCallback","twoColumn","device","setDevice","throttledUpdate","throttle","Provider","withDevice","WrappedComponent","displayName","ComponentWithDevice","Consumer","buttonSizing","paddingHorizontal","paddingOffsets","paddingOffsetBasedOnBorderRadius","overflowWrap","Paragraph","isError","accessibilityProps","typeIsStringOrNumber","EMPTY_BORDER_RADIUS","standardizeBorderRadius","radii","isShorthand","borderRadii","fallbackRadii","hasRadiusShorthand","hasRadiusShorthandFallback","ALL_CONTENT_DOMAIN_NAME","ALLOWED_GLOBAL_SEARCH_FIELDS","NEW_SEARCH_PAGE_ENABLED","MEMBERS_DOMAIN_NAME","MEMBERS_RECORD_TYPE","PLACES_DOMAIN_NAME","PLACES_KNOWLEDGE_BASE_TYPE","PLACES_GROUP_TYPE","PLACES_CATEGORY_TYPE","EmbedContainer","withPadding","htmlProps","embedContainerClasses","makeRootClass","EmbedContainerSize","MEDIUM","generateButtonStyleProperties","setZIndexOnState","stateSuffix","buttonGlobalVars","buttonDimensions","buttonTypeVars","fontColor","borderVars","defaultBorder","hoverBorder","cloneDeep","activeBorder","focusBorder","focusAccessibleBorder","fontVars","WebkitFontSmoothing","verticalAlign","touchAction","generateButtonClass","twoColumnLayoutDevices","twoColumnLayoutVariables","layoutVars","TWO_COLUMNS","threeColumnLayoutVariables","rightPanelCondition","shouldRenderLeftPanel","mediaQueryFactory","mediaQueriesByType","mediaQueriesForAllLayouts","layoutName","stylesByMediaQuery","queryName","layoutDataByType","layout","currentLayoutVariables","LayoutContext","useLayout","LayoutProvider","deviceInfo","setDeviceInfo","withLayout","Heading","depth","renderAsDepth","isLarge","finalDepth","finalRenderDepth","isPageTitle","isSubTitle","isComponentSubTitle","typographyClasses","pageTitle","componentSubTitle","flexHelper","getBorderVars","backLinkClasses","link","swoopStyles","translateX","shadowAsBorder","bg1","willChange","bg2","bgContainer","boxSizing","objectFit","bannerPadding","negativeSpacer","bar","logoOffsetDesktop","logoOffsetMobile","logoContainer","alignSelf","logoFlexBasis","nav","locales","compactSearch","compactSearchResults","viewWidth","extraMeBoxIcons","topElement","localeToggle","languages","allButtonStates","buttonOffset","centeredButton","searchCancel","tabButtonActive","tabButton","rightFlexBasis","flexShrink","leftFlexBasis","register","clearButtonClass","guestButton","desktopNavWrap","addGradientsToHintOverflow","logoCenterer","logoLeftAligned","logoAnimationWrap","signInIconOffset","skipNav","getLogoMaxHeight","titleBarHeight","specifiedLogoHeight","titleBarLogoClasses","logoFrame","mobileLogoStyles","isCenter","linearGradient","quote","lineHeightAdjustment","nestedStyles","letterToLineHeightRatio","Position","vOffset","letterRatio","calculateOffset","isBefore","BEFORE","emptySpace","em","before","after","AFTER","PermissionMode","Permission","usePermissions","permission","hasPermission","mode","resourceID","RESOURCE","GLOBAL_OR_RESOURCE","resourceType","permissionsToCheck","SUCCESS","isAdmin","permissionGroups","matchesGlobal","matchesResource","GLOBAL","hasMatch","permissionGroupToCheck","permissionKey","permissionValue","Translate","translatedSource","childrenID","childrenMatch","standaloneID","textMatch","index","getInterpolatedComponent","logIDNotFound","errorHandler","source","translateFunction","shortSource","ListSeparation","iconCompact","buttonAsText","buttonAsTextPrimary","pushLeft","pushRight","iconMixin","dimension","asTextStyles","buttonIconRightMargin","buttonIconLeftMargin","buttonLoaderClasses","flexUtils","reducedPadding","svg","spinnerLoaderAnimationProperties","buttonLabelWrapClass","store","initialActions","__ACTIONS__","middleware","enhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","actionSanitizer","quill","compose","applyMiddleware","initialState","force","reducer","appReducer","combineReducers","getReducers","createStore","suggestionReducer","UserSuggestionModel","INITIAL_USERS_STATE","PENDING","counts","suggestions","usersByID","usersInvitationsByID","GUEST_USER_ID","isUserGuest","usersReducer","produce","reducerWithInitialState","case","ERROR","results","NotificationsActions","MARK_ALL_READ_RESPONSE","countUnreadNotifications","mapUsersStoreState","currentUser","useUsersState","useSelector","getPermissions","userCardVariables","makeVars","actionContainer","buttonContainer","containerWithBorder","header","date","email","userCardClasses","metaContainer","row","avatar","buttonStyles","stat","statLabel","statLeft","borderRight","statRight","formElementsVars","userPhoto","SearchActions","ConditionalWrap","condition","component","componentProps","DropDownContentSize","DropDownContents","TabHandler","isTabbable","stopPropagation","nativeEvent","stopImmediatePropagation","asDropDownClasses","openAsModal","isMedium","asModalClasses","contentRef","selfPadded","renderCenter","renderLeft","flyoutPosition","renderAbove","doNothing","forceTryFocus","FrameHeaderMinimal","frameHeaderClasses","rootMinimal","headingMinimal","onClose","closeMinimal","DropDownOpenDirection","DropDownPreferredOpenDirections","FlyoutType","DropDown","preferredDirection","mobileTitle","ContentTag","flyoutType","FRAME","useRef","ownButtonRef","ownContentRef","ID","ownIsVisible","setOwnIsVisible","isVisible","onVisibilityChange","buttonRect","useMeasure","contentRect","openDirection","resolveOpenDirection","dropDownID","positionHidden","HIDDEN","handleID","contentID","FlyoutToggle","buttonBaseClass","buttonClassName","toggleButtonClassName","initialFocusElement","contentsClassName","ABOVE_CENTER","BELOW_CENTER","ABOVE_LEFT","BELOW_LEFT","ABOVE_RIGHT","FrameHeader","closeFrame","closeMenuHandler","topClearance","leftClearance","rightClearance","innerWidth","contentHalfWidth","AUTO","documentHeight","clientHeight","documentWidth","BELOW_RIGHT","SearchBarPresets","SearchService","supports","_supportsExtensions","domain","filterNode","extraFilters","searchDomain","pluggableDomains","subType","subTypes","Container","containerClasses","desktopSpacing","DateFormats","dateTimeVariables","month","day","dateTimeClasses","compactVars","compactRoot","compactDay","compactMonth","DateTime","dateTime","timestamp","titleTime","humanTime","interval","setInterval","forceUpdate","clearInterval","toLocaleString","getJSLocaleKey","year","weekday","hour","minute","timeZone","timezone","EXTENDED","inputMoment","moment","seconds","duration","diff","asSeconds","from","COMPACT","isSame","format","toDate","useTheme","isComponentThemingEnabled","_components","_pageComponent","addComponent","mountOptions","addPageComponent","getComponent","_mountComponents","parent","awaiting","parentPage","mountReact","node","getAttribute","parse","registeredComponent","innerHTML","removeAttribute","LinkAsButton","addWrap","fallbackTitle","SearchContext","getFilterComponentsForDomain","updateForm","resetForm","INITIAL_SEARCH_STATE","domainSearchResults","form","DEFAULT_CORE_SEARCH_FORM","searchInDomain","getDomains","getCurrentDomain","getDefaultFormValues","useSearchForm","ModalView","titleID","onDestroyed","isAnimatingOut","setIsAnimatingOut","lastVisible","useLastValue","useLayoutEffect","handleDestroy","ownRef","modalRef","modalClasses","scrollable","scroll","targetTransform","XL","xPercent","yPercent","contentTransition","fromDirection","FromDirection","BOTTOM","halfDirection","FULL_SCREEN","MODAL_AS_DROP_DOWN","TOP","MODAL_AS_SIDE_PANEL_RIGHT","MODAL_AS_SIDE_PANEL_RIGHT_LARGE","RIGHT","MODAL_AS_SIDE_PANEL_LEFT","onKeyPress","EntranceAnimation","isEntered","overlayScrim","isActive","overlayContent","onOverlayClick","aria-modal","isFullScreen","isSidePanelRight","isSidePanelRightLarge","isSidePanelLeft","isDropDown","isXL","isShadowed","onModalClick","memo","MODAL_CONTAINER_ID","mountModal","mountPortal","Modal","createRef","wasDestroyed","pageContainer","getPageContainer","setCloseFocusElement","focusInitialElement","setAttribute","stack","handleDocumentEscapePress","setState","closeFocusElement","shiftKey","keyCode","handleShiftTab","handleTab","topModal","preventDefault","isWholePage","exitHandler","handleDestroyed","handleTabbing","handleModalClick","handleScrimClick","selfRef","afterContent","prevProps","prevState","elementToFocusOnExit","onMountIn","getElementById","focusElement","elementToFocus","tabHandler","getInitial","activeElement","documentElement","nextElement","getNext","previousElement","Loader","showLoader","minimumTime","styleClass","loaderClasses","smallLoader","loaderStyleClass","fullPageLoader","loaderContainer","timeout","setTimeout","clearTimeout","userPhotoVariables","xlarge","userPhotoMixins","photo","objectFitWithFallback","userPhotoClasses","mixinStyles","noPhoto","searchBarClasses","classesInputBlock","searchBarVariables","titleBarVars","scopeMinWidth","borderStyle","isOuterBordered","isInsetBordered","NO_BORDER","independentRoot","getVerticalPaddingForTextInput","calculatedHeight","paddingOffset","side","searchResultsStyles","searchResultsVariables","min","suggestedTextStyleHelper","option","resultsAsModal","mainConditionalStyles","valueContainerConditionalStyles","valueContainer","searchIcon","gap","compoundValueContainer","scopeSeparatorStyle","scopeSeparator","heading","iconContainerBigInput","menu","scopeSelect","scopeToggleConditionalStyles","noBorder","scopeToggle","scope","selectBoxClasses","scopeIcon","ratio","scopeLabelWrap","compactIcon","standardContainer","firstItemBorderTop","iconContainer","alignRight","horizontalPosition","conditionalStyle","SEARCH_SCOPE_LOCAL","SEARCH_SCOPE_EVERYWHERE","SearchScopeContext","optionsItems","useSearchScope","emptyItems","EmptySearchScopeProvider","containerVariables","narrowContentSize","containerMainStyles","containerMainMediaQueries","ButtonLoader","alignLeft","buttonType","defaultMakeHref","stringUrl","createPath","LinkContext","linkContexts","pushSmartLocation","LinkContextProvider","history","useHistory","urlFormatter","URL","isCurrentPage","pathname","matchesContext","initial","newHref","appRelativeLink","mediaElement","searchResultsClasses","noResults","searchResultClasses","hasIcon","metaVars","mediaWidth","iconWidth","mainCompactStyles","compactMediaElement","attachmentCompactStyles","attachments","compactExcerpt","afterExcerptLink","iconWrap","commentWrap","ErrorMessages","ownID","padded","errorList","capitalizeFirstLetter","TypeAllIcon","TypeDiscussionsIcon","TypeQuestionIcon","DropDownItemLink","linkContents","lang","isChecked","UserPhotoSize","UserPhoto","userInfo","photoUrl","badImage","setBadImage","sizeClass","XLARGE","commonProps","isOpen","open","src","onError","FrameBody","frameBodyClasses","isSelfPadded","hasVerticalPadding","Frame","frameClasses","bodyWrap","bodyWrapClass","canGrow","headerWrap","footerWrap","backLink","backTitle","onBackClick","backButtonIcon","borderless","rootBorderLess","titleClass","srOnlyTitle","SCROLL_OFFSET_DEFAULTS","setScrollOffset","resetScrollOffset","scrollOffset","topOffset","setTopOffset","pixels","getCalcedHashOffset","temporarilyDisabledWatching","hashOffsetRef","offsetClass","ScrollOffsetContext","__VANILLA_GLOBAL_SCROLL_OFFSET__","ScrollOffsetProvider","isScrolledOff","hashOffset","isWatchingEnabled","shouldWatchScroll","requestAnimationFrame","newScrolledValue","scrollY","isScrollingDown","previousScrollValue","isScrollingUp","offsetElement","getBoundingClientRect","scrollWatchingEnabled","transition","scrollHandler","useScrollOffset","HashOffsetReporter","InputTextBlockBaseClass","InputTextBlock","inputProps","onChange","onBlur","onFocus","inputRef","ownInputRef","classesInput","multiLineProps","blockProps","inputClassNames","InputBox","blockParams","labelID","errorID","hasErrors","describedBy","multiline","required","aria-invalid","maxLength","autoComplete","translations","makeAccessiblePopup","$popupEl","sender","attr","$","each","find","i","tagName","getAll","element","FrameFooter","frameFooterClasses","justifyRight","justifiedRight","forDashboard","validSelection","DocumentTitle","headTitle","siteTitle","EmbedContext","tooltipVariables","nub","toolTipClasses","noPointerContent","noPointerTrigger","modalVariables","nubPosition","triggerRect","hasOverflow","toolTipVars","overTriggerPosition","underTriggerPosition","TriangleTooltip","useTooltip","trigger","tooltip","setHasOverflow","borderOffset","isScrolling","scrollTimeout","setIsScrolling","useIsScrolling","cloneElement","tooltipRect","triangleHeight","maxLeft","innerHeight","scrollX","ToolTip","CheckBox","isHorizontal","labelBold","fakeFocus","excludeFromICheck","checked","defaultChecked","tooltipLabel","EVENT_NAME","onPageView","eventListener","usePageChangeListener","previousPath","setPreviousPath","initPageViewTracking","listen","ThemeType","INITIAL_THEME_STATE","forcedVariables","themeRevisions","upDateRevision","themeReducer","revision","INITIAL_LOCALE_STATE","localeReducer","getAllLocalesACs","nextState","ConversationsModel","conversationsByID","ConversationsActions","GET_CONVERSATIONS_REQUEST","GET_CONVERSATIONS_RESPONSE","conversation","conversationID","GET_CONVERSATIONS_ERROR","tagsReducer","tagsByName","TagsAction","getTagsACs","discussionsReducer","discussionsByID","DiscussionActions","getDiscussionByIDACs","discussionID","dynamicReducers","registerReducer","replaceReducer","discussions","tags","NotificationsModel","conversations","loadingRectangleVariables","loadingAnimation","loadingRectangleClass","animationName","animationDuration","animationIterationCount","loadingSpacerClass","loadingCircleClass","LoadingRectangle","LoadingSpacer","LoadingCircle","_props","firstItemProps","lastItemProps","asElement","delay","divProps","useTransitionConfig","transitions","useTransition","AnimatedComponent","animated","div","isFirst","isLast","startOpacity","startTransform","endTransform","startX","endX","startY","endY","offsetPercent","tension","friction","clamp","trail","enter","leave","bannerExists","setBannerExists","bannerRect","setBannerRect","overlayTitleBar","setOverlayTitleBar","renderedH1","setRenderedH1","useBannerContext","useBannerContainerDivRef","measure","BannerContextProvider","BannerContextProviderNoHistory","flexSpacer","FlexSpacer","actualSpacer","dispatchApi","getNotificationACs","getNotificationsACs","markReadACs","read","markAllReadACs","generateApiActionCreators","GET_NOTIFICATION_REQUEST","GET_NOTIFICATION_RESPONSE","GET_NOTIFICATION_ERROR","GET_NOTIFICATIONS_REQUEST","GET_NOTIFICATIONS_RESPONSE","GET_NOTIFICATIONS_ERROR","MARK_READ_REQUEST","MARK_READ_RESPONSE","MARK_READ_ERROR","MARK_ALL_READ_REQUEST","MARK_ALL_READ_ERROR","page","sort","initialized","reinitilizeParams","searchReducer","reducerWithoutInitialState","updateSearchFormAC","needsResearch","reinitParam","types","performSearchACs","performDomainSearchACs","resetFormAC","onEmpty","nest","displayNone","TableStyle","userContentVariables","tableInit","HORIZONTAL_BORDER_STRIPED","cell","mobileBreakpoint","tables","striped","VERTICAL_BORDER_STRIPED","stripeColor","outerBorderRadius","VERTICAL_BORDER","horizontalBorders","verticalBorders","blocks","embeds","codeInline","paddingVertical","codeBlock","nestedList","ceil","userContentClasses","headingStyle","lists","listStylePosition","paragraphSpacing","linkStyle","codeStyles","overflowX","wordWrap","spoilersAndQuotes","blockQuoteVars","blockQuoteVariables","blockquotes","borderLeft","outerBorderMixin","tableOuterRadiusQuery","tableMobileQuery","wordBreak","embedContainerVariables","dimensions","maxEmbedWidth","hoverFocusStates","FULL_WIDTH","frameVariables","overflowY","defaultOptionProvider","supportsAutoComplete","autocomplete","makeSearchUrl","searchOptionProvider","SearchContextProvider","optionProvider","useSearch","withSearch","setOptionProvider","provider","dateRangeClasses","boundary","BoldIcon","classesRichEditor","richEditorClasses","ItalicIcon","StrikeIcon","CodeIcon","LinkIcon","EmojiIcon","PilcrowIcon","Heading2Icon","Heading3Icon","Heading4Icon","Heading5Icon","BlockquoteIcon","CodeBlockIcon","SpoilerIcon","EmbedIcon","ImageIcon","AttachmentIcon","ListUnorderedIcon","ListOrderedIcon","IndentIcon","OutdentIcon","AlignCenterIcon","FloatLeftIcon","FloatRightIcon","x","rx","ResizeLargeIcon","ResizeMediumIcon","ResizeSmallIcon","SearchPageRoute","componentPromise","LoadingComponent","LoaderWrapper","onHover","preload","provided","SmartLink","loadable","Loadable","loading","loader","finalPath","route","exact","UserSuggestionActions","setActiveAC","trie","selectSuggestionsTrie","exactLookup","getValue","loadUsersACs","partialLookup","getValueFromPartialsOfWord","USER_LIMIT","filterSuggestions","order","limit","domID","catch","debounce","interalLoadUsers","suggestionID","suggestionIndex","SET_ACTIVE_SUGGESTION","searchName","searchCollator","Intl","Collator","usage","sensitivity","ignorePunctuation","numeric","userSuggestion","suggestionIDPartial","compare","LOAD_USERS_REQUEST","LOAD_USERS_RESPONSE","LOAD_USERS_ERROR","tokensVariables","token","clearIcon","framePaddings","noContentMessage","homePageVariables","bodyCSS","msOverflowStyle","htmlBodyMixin","bodyClass","classList","add","WebkitOverflowScrolling","WebkitAppearance","MozAppearance","fullBackgroundClasses","isRootPage","homePageVars","isEmpty","Backgrounds","backgroundInfo","useBackgroundContext","isHomePage","BackgroundContext","setIsHomePage","BackgroundsProvider","COMPAT_BG_ID","fullBackgroundCompat","fullBodyBackground","createElement","frameBody","TagType","colorOverwrite","nested","tagItem","CLOUD","fontState","backgroundState","toggle","buttonItem","outdated","checkContainer","itemLabel","offsetPadding","attachmentIconVariables","errorIconHeight","attachmentIconsClasses","attachmentIconClasses","AttachmentType","FileTypeGenericIcon","FileTypeWordIcon","WORD","y","FileTypeExcelIcon","EXCEL","FileTypePDFIcon","unabbreviatedType","PDF","FileTypeImageIcon","IMAGE","fillOpacity","FileTypePowerPointIcon","PPT","FileTypeZipIcon","ARCHIVE","barStyle","mimeTypeToAttachmentType","mimeType","FILE","GetAttachmentIcon","properties","timedTransition","timing","formatNumberText","numeral","localeData","initialValue","compactValue","stripTrailingZeros","fullValue","isAbbreviated","decomposedNumberFormatted","formattedNumber","fallbackTag","attributes","numberFormattedClasses","numberFormattedForTranslations","NumberFormatted","CheckboxGroup","legend","SuggestionTrie","word","letter","char","charAt","getNode","MAX_PARTIAL_LOOKUP_ITERATIONS","potentialValue","lastSuccessfulUsername","currentUsername","activeSuggestionID","activeSuggestionIndex","insert","shouldKeepPreviousResults","previousSuccessfulName","newNameSubstring","sortSuggestions","firstUserID","stateSlice","defaultSuggestions","currentNode","isLoading","currentMoment","looseCollator","ACTIVE_THRESHOLD","recentlyActive","lessActive","daysAgo90","subtract","dateLastActive","lastActiveMoment","isSameOrAfter","sortByName","userA","userB","casedSearchName","toLocaleLowerCase","aCasedName","bCasedName","exactToTheTop","allUsers","leftOffset","rightOffset","maxValue","rawRadius","workingBorderRadius","finalBorderRadiusRatio","endsWith","checkRadioVariables","checkedHover","checkBox","disk","radioButton","isDashboard","radioIcon","diskIcon","uncheckedStateStyles","checkedStateStyles","disabledInput","markRead","spacerWidth","leftSpacer","TruncatedText","lines","expand","useMaxHeight","getComputedStyle","shave","truncateBasedOnLines","maxCharCount","newChildren","slice","DEFAULT_FALLBACK","historyDepth","canGoBack","backFallbackUrl","setBackFallbackUrl","navigateBack","BackRoutingProvider","ignoreRef","useReducer","canBrowserGoBack","referrer","back","goBack","useBackRouting","useFallbackBackUrl","MultiUserInput","suggestionActions","loadUsers","suggestion","onInputChange","withRedux","connect","mapStateToProps","Tokens","inputValue","control","multiValue","multiValueLabel","showIndicator","htmlFor","inputID","hasFocus","inputId","componentOverwrites","handleInputChange","isClearable","isDisabled","escapeClearsValue","pageSize","getTheme","getStyles","backspaceRemovesValue","isMulti","onAttributeChange","ClearIndicator","selectOverrides","LoadingMessage","Option","LoadingIndicator","overwrite","inset","sizingInit","heightMinusBorder","stateColorsInit","withBorder","dayPickerVariables","today","dayPickerClasses","navigation","DatePicker","hasBadValue","wasBlurred","normalizeIsoString","toISOString","updateDate","valueAsDate","selectedDay","contentsClasses","isRightAligned","onPreviousClick","onNextClick","toLocaleDateString","os","guessOperatingSystem","OS","ANDROID","IOS","renderNativeInput","renderReactInput","formatDate","parseDate","overlayComponent","CustomOverlay","onDayChange","handleDayPickerChange","contentClassName","dayPickerProps","captionElement","navbarElement","CustomNavBar","disabledDays","showOutsideDays","inputClassName","isInvalid","handleBlur","handleFocus","handleNativeInputChange","isoDate","substr","DateRange","endDate","end","startDate","start","fromLabel","toLabel","rangeClasses","onStartChange","onEndChange","pageErrorMessageClasses","cta","titleAsParagraph","errorIcon","DetailedErrors","detailedErrors","fieldName","DefaultError","CoreErrorMessages","errorCode","messageFromErrorCode","PERMISSION","actionItem","ErrorSignIn","NOT_FOUND","GENERIC","parseErrorCode","getErrorCode","messageAsParagraph","errorMessageProps","defaultError","filterPanelClasses","FilterFrame","handleSubmit","valid","onSubmit","embedButtonClasses","EmbedButton","otherProps","setIsFirst","previousSibling","firstSibling","parentElement","firstChild","lastSibling","lastChild","nextSibling","getConversationsACs","getTagsInternal","useTagsActions","useDiscussionActions","loaderVariables","fullPage","thickness","spinnerLoader","mediumLoader","TitleBarDevices","TitleBarDeviceContext","FULL","useTitleBarDevice","TitleBarDeviceProvider","EntryLinkContextProvider","linkParams","setLinkParams","useEntryLinkContext","useSignInLink","useRegisterLink","xl","fullScreenTitleSpacing","overlayMixin","sidePanelMixin","pageHeader","frameWrapper","selectOneVariables","checkBoxAfterInput","placesSearchListingVariables","placesSearchListingClasses","buttonIconContainer","handleToggleSpoiler","triggeringElement","spoilerContainer","closest","initAllUserContent","autoWrapCollapsableContent","convertToSafeEmojiCharacters","delegateEvent","mountAllEmbeds","initCodeHighlighting","convertAllUserContent","embedDropdownClasses","optionLabel","EmbedDropdownContext","EmbedDropdown","Icon","EmbedMenuContext","setSelected","buttonId","contentId","aria-aria-haspopup","aria-expanded","EmbedDropdownMenuContainer","menuRef","aria-checked","CloseButton","closeLabel","fullBorderWidth","getHorizontalPaddingForTextInput","singleLineEllipsis","longWordEllipsis","backLinkVariables","getLineHeight","inHeading","panelWidgetClasses","objectPosition","SearchOption","placesListingLabel","m","dateUpdated","crumbs","labels","hasLocationData","classesMetas","embedLinkClassName","legacyAnalyticsTickEnabled","enableLegacyAnalyticsTick","newValue","isLegacyAnalyticsTickEnabled","AnalyticsData","uniqueKey","SearchScope","selectBoxProps","overwriteSearchBar","SelectBox","labelWrap","afterButton","overwriteButtonContents","ClearButton","incomingRef","noHeading","optionComponent","triggerSearchOnClear","disableAutocomplete","setFocused","searchButtonID","searchInputID","forceMenuClosed","setForceMenuClosed","onSearch","resultsRef","reason","handleOptionChange","actionMeta","isMenuVisible","controlProps","focusInput","controlPropsRef","SearchBarControl","IndicatorSeparator","menuProps","SearchBarMenuPortal","mountRef","setOptions","menuIsOpen","forceMenuOpen","closeMenuOnSelect","blurInputOnSelect","allowCreateWhileLoading","controlShouldRenderValue","isValidNewOption","cached","loadOptions","placesListingResults","defaultOptions","forcedOptions","getReactSelectTheme","reactSelectCustomStyles","createOptionPosition","formatCreateLabel","formatReactSelectLabel","handleOnKeyDown","HTMLInputElement","setSelectionRange","onMenuOpen","onOpenSuggestions","onMenuClose","onCloseSuggestions","iconContainerClasses","resultsAsModalClasses","menuList","c0","ReactDOM","createPortal","contextScope","searchBarVars","hideSearchButton","hasScope","searchButtonIsVisible","buttonID","isHovered","setHovered","needsPageTitle","titleAsComponent","contentClass","withoutScope","withScope","withButton","withoutButton","onMouseEnter","onMouseLeave","valueContainerClasses","buttonLoaderClassName","buttonText","ProfileLink","isUserCard","cardAsModal","profileURL","UserCardModuleLazyLoad","buttonContent","buttonClass","userURL","ResultMeta","updateUser","isDeleted","DELETED","typeMeta","c1","countMeta","labelCode","p","BreadCrumbString","FileSizeUnit","floor","log","pow","toFixed","B","KB","MB","GB","TB","getUnabbreviatedFileSizeUnit","HumanFileSize","numBytes","notificationsByID","notification","notificationID","InputBlock","OuterTag","LabelTag","labelClassName","wrapClassName","noMargin","noteAfterInput","PlacesSearchListingItem","getSubType","PlacesSearchListingContainer","DropDownItemButton","defaultButtonClass","aria-current","DropDownItem","crumbCount","crumb","lastElement","compactSearchVariables","searchButtonOptions","isUnifiedBorder","UNIFIED_BORDER","isTransparentButton","backgrounds","useOverlay","overlayColor","bgColorActive","fgColor","activeBorderColor","searchBar","leftColor","searchButton","spinnerColor","compactSearchClasses","cancelContents","searchAndResults","hasUserViewPermission","SimplePagerModel","parseLinkHeader","total","currentPage","param","limitParam","searchParameters","ensureString","FilterPanelAll","classesDateRange","authors","PlacesListingPlaceHolder","_","PlacesSearchListing","SEARCH_LIMIT_DEFAULT","DOMAIN_SEARCH_LIMIT_DEFAULT","getGlobalSearchSorts","SearchFormContextProvider","hasPlacesDomain","ALL_CONTENT_DOMAIN","extraSearchAction","PanelComponent","getAllowedFields","getRecordTypes","allTypes","pluggableDomain","getSortValues","transformFormToQuery","isIsolatedType","ResultComponent","Result","getDate","dateInserted","searchScope","buildQuery","finalQuery","filterForm","currentDomain","allowedFields","makeFilterForm","commonQueryEntries","locale","getCurrentLocale","collapse","recordTypes","hasSpecificRecord","insertUserIDs","author","formWithDomain","getSubTypes","pagination","parseHeaders","update","extraFilter","domainDefaults","Name","Label","dangerouslySetInnerHTML","__html","ButtonContainer","Stat","Header","PopupUserCard","visible","setOpen","toggleRef","photoSize","handleVisibilityChange","countDiscussions","countComments","dateJoined","UserCardModule","fallbackButton","existingResult","getUserByID","useUser","userCardInfo","hasImage","ready","setReady","lastReady","aria-haspopup","AttachmentIcons","maxCount","attachmentsCount","renderAttachments","extraCount","renderMorePlacholder","remainingCount","attachmentOutput","headingLevel","afterExcerpt","hasAttachments","showImage","hasMedia","layoutContext","classesSearchResults","imageComponent","HeadingTag","excerptElement","collapsableContentClasses","paddingAdjustment","heightContainer","collapser","collapserIcon","gradient","CollapsableContent","isExpandedDefault","domNodesToAttach","isExpanded","setIsExpanded","containerMaxHeight","containerOvershoot","overshoot","heightLimit","scrollRef","useDomNodeAttachment","measurements","nextTick","scrollTo","hasMeasuredHeight","hasSmallMeasuredHeight","maxCollapsedHeight","targetHeight","useSpring","gradientProps","toggleID","allowsCssOverrides","scrollTop","pageYOffset","boundingRect","shrinkageHeight","scrollAdjustedByShrinkage","behavior","jsCollapsables","nodes","childNodes","remove","_supportFrames","supportsFrames","IFrameEmbed","ratioStyle","embedType","sandbox","frameBorder","BrightcoveEmbed","playerId","SCRIPT_PLAYER","account","playerID","playerEmbed","ensureScript","data-account","data-player","data-embed","data-video-id","videoID","class","MIN_HEIGHT","CodePenEmbed","codePenID","scrolling","embedErrorClasses","renderErrorRoot","renderErrorIconLink","EmbedRenderError","warningTitle","EmbedErrorBoundary","Attachment","dateUploaded","attachmentClasses","download","FileEmbed","attachmentType","GettyImagesEmbed","throwError","useThrowError","gettyPosts","foreignID","embedSignature","escapeHTML","photoID","loadGettyImages","data-height","data-width","data-sig","data-items","fallbackCallback","gie","q","widgets","load","sig","w","caption","is360","tld","GiphyEmbed","giphyID","ImgurEmbed","images","imgurEmbed","createIframe","imagesLength","tasks","data-id","imgurID","InstagramPlaceholder","postID","data-instgrm-captioned","data-instgrm-permalink","data-instgrm-version","xmlnsXlink","fontStyle","InstagramEmbed","instgrm","Embeds","process","permaLink","EmbedTitle","LinkEmbed","linkImage","PANOPTO_SCRIPT","EMBED_LOADED_CLASS","PanoptoEmbed","panoptoEmbeds","contentElement","contains","sessionId","EmbedApi","serverName","iframe","getElementsByTagName","data-domain","data-playerid","data-sessionid","data-url","previousHashOffset","useHashScrolling","calcedOffset","beforeScrollHandler","scrollToCurrentHash","hashChangeHandler","initHashScrolling","currentOffset","targetID","hash","scrollToElement","UserContent","html","responsifyTable","ignoreHashScrolling","table","firstRow","isAllTh","child","headLabels","th","tr","firstTh","td","mobileTh","textContent","insertBefore","parentNode","wrapper","appendChild","userLabelVariables","userLabelClasses","fixLineHeight","avatarLink","topRow","bottomRow","userName","rolesClasses","Roles","roles","maxRoleCount","classesMeta","userRoles","UserLabel","dateLink","displayOptions","category","showRole","showCategory","userUrl","dateComponent","categoryComponent","roleID","quoteEmbedVariables","quoteEmbedClasses","embedVars","isPadded","titleLink","footerMain","footerSeparator","postLink","postLinkIcon","discussionLink","blockquote","QuoteEmbed","insertUser","showUserLabel","showCompactUserInfo","showDiscussionLink","showPostLink","showCategoryLink","expandByDefault","discussionTitle","linkToDiscussion","postTitle","linkToPost","showHeader","cite","SoundCloudEmbed","frameSource","playlistID","trackID","parameters","show_artwork","showArtwork","visual","useVisualPlayer","soundCloudPlayerUrl","twitterEmbedClasses","card","TWITTER_SCRIPT","TwitterEmbed","twitterLoaded","setTwitterLoaded","onRenderComplete","convertTwitterEmbeds","data-tweeturl","data-tweetid","statusID","renderTweet","twttr","createTweet","tweets","promises","VideoEmbed","ratioClass","frameSrc","isPlaying","setIsPlaying","togglePlaying","simplifyFraction","shorthand","VideoIframe","VideoThumbnail","PlayIcon","allow","allowFullScreen","EMBED_DESCRIPTION_ID","registeredEmbeds","Map","registerEmbed","EmbedComponent","set","mountEmbed","mountPoint","ensureBuiltinEmbeds","exception","EmbedClass","isAsync","onMountComplete","ensureEmbedDescription","bypassPortalManager","EmbedDescription","mountPoints","parsedData","builtinsRegistered","ImageEmbed","withRouter","initialQuery","setQuery","setForcedOptions","scopeValue","searchQuery","handleSearchChange","newQuery","classesSearchBar","clone","SearchBar","buttonDropDownClassName","buttonDropDownClass","widgetVariables","inner","BannerAlignment","bannerVariables","altName","widgetVars","compactSearchVars","presets","isSolidButton","isBordered","isSolidBordered","mobileAlignment","hideDescription","hideTitle","hideSearch","searchPlacement","unifiedBorder","contentContainer","rightImage","disappearingWidth","outerBackgroundInit","outerBackground","breakpointUILabel","breakpointUIEnabled","innerBackground","shadowMix","innerShadowOpacity","outerShadowOpacity","fontMobile","margins","searchBarInit","marginMobile","show","buttonStateStyles","searchButtonBg","buttonBorderStyles","searchButtonDropDown","buttonVars","buttonShadow","searchStrip","bannerClasses","alternativeVariables","bannerVars","isCentered","searchDropDownButton","finalUrl","finalTabletUrl","finalMobileUrl","finalVars","defaultBannerSVG","backgroundOverlay","noTopMargin","conditionalUnifiedBorder","searchContainer","buttonLoader","textWrapMixin","titleAction","titleWrap","titleUrlWrap","titleFlexSpacer","descriptionWrap","imagePositioner","makeImageMinWidth","rootUnit","imageElementContainer","logoSpacer","bannerContainer","overflowRightImageContainer","hasFullWidth","middleContainer","contentBannerVariables","minHeightMobile","normalBannerVars","forced","contentBanner","contentBannerClasses","DefaultBannerBg","isContentBanner","preserveAspectRatio","x1","x2","y1","y2","gradientTransform","gradientUnits","stopColor","xlinkHref","isolation","mixBlendMode","strokeDasharray","clipPath","Banner","bannerContextRef","varsTitleBar","classesTitleBar","useComponentDebug","rightImageSrc","contentImage","logoImageSrc","logoImage","showBottomSearch","showMiddleSearch","searchAloneInContainer","hideButton","HIDE","searchComponent","forceSearchOpen","inputClass","iconClass","headingTitleLarge","extraAfterSearchBarComponents","ComponentName","registerAfterSearchBar","attachmentVariables","loadingProgress","loadingContent","isLink","debugMode","disabledStyles","appendExtraSelector","currentSelector","additionnalSelector","WebkitUserSelect","MozUserSelect","msUserSelect","extendItemContainer","itemPaddingX","spinnerLoaderAnimation","DEFAULT_SPEED","animationTimingFunction","spinnerVars","highlightCodeBlocks","domNode","importHLJS","hljs","highlightBlock","hljsCache","highlightTextSync","highlightAuto","standardAnimations","fadeIn","FontSizeCalculatorContext","setFontSize","FontSizeCalculatorProvider","useFontSizeCalculator","controllerRef","ownSetVisibility","setVisibility","closeAllFlyouts","buttonClickHandler","toElement","buttonElement","handleBlockEventPropagation","useFocusWatcher","useEscapeListener","returnElement","childrenData","classesDropDown","isContentVisible","firstValue","ownValue","setOwnValue","selectedOption","setIsVisible","funct","SelectBoxButton","activeItem","isParentWidth","widthOfParent","LIST","SelectBoxItem","SelectBoxContents","defaultProps","selectedIndex","BackLink","hasVisibleLabel","visibleLabel","linkClassName","hideIfNoHistory","fallbackUrl","chevronClass","hamburgerVariables","hamburgerClasses","navItemGenerators","navigationVariables","forumEnabled","builtins","navVars","legacyCustomNavItems","navigationItems","navItems","mapLegacyNavItem","generator","mobileOnlyNavigationItems","uuidv4","PanelNavItems","prevFocusedRef","nestedTitle","popParentItem","isNested","navItem","showChildren","isNestable","recordType","activeRecord","recordID","pushParentItem","extraSections","DropDownPanelNav","parentNavItems","setParentNavItems","afterNavSections","currentItems","DropDownItemSeparator","MobileOnlyNavigation","treeItems","varItemToNavTreeItem","getActiveRecord","extraNavGroups","Hamburger","setIsOpen","showCloseIcon","SiteNavigation","extraNavTop","extraNavBottom","GroupComponent","variableItem","parentID","isHidden","navTreeItems","currentItemID","meBoxClasses","formVars","DropDownItemLinkWithCount","showCount","hideCountWhenZero","countsClass","DropDownSection","sectionNavTitle","noSeparator","userDropDownVariables","topPadding","rightPadding","bottomPadding","leftPadding","userCard","topMargin","bottomMargin","userDropDownClasses","userCardPhotoLink","userCardPhoto","userCardName","DropDownUserCard","profileLink","classesUserDropDown","DropDownEditProfileLink","UserDropDownContents","signOutUrl","siteSection","getCountByName","countName","found","extraUserDropDownComponents","apps","forum","registerBeforeUserDropDown","ownProps","checkCountData","countVariables","countClasses","Count","hasCount","visibleCount","aria-live","compactMeBoxVariables","tab","compactMeBoxClasses","openButton","closeModal","tabList","tabButtonContent","tabPanels","scrollContainer","MeBoxIcon","countLabel","compactClasses","classesHeader","MessagesCount","countUnreadConversations","FrameHeaderWithAction","MeBoxItemType","meBoxMessageVariables","imageContainer","unreadDot","meBoxMessageClasses","ConversationParticipantStatus","GetConversationsExpand","MeBoxDropDownItem","authorList","unread","classesMeBoxMessage","MESSAGE","authorCount","countMessages","MeBoxDropDownItemList","classesFrameBody","emptyMessage","MessagesContents","renderContents","requestData","countUnread","messageDoc","participants","participant","lastMessage","itemA","itemB","timeA","timeB","convActions","getConversations","ALL","MessagesDropDown","countClass","NotificationsContents","markAllRead","userSlug","classesFrameFooter","panelBodyClass","bodyContent","NOTIFICATION","activityName","dateA","notificationActions","getNotifications","NotificationsDropDown","MeBox","UserDropdown","TabPanel","tabs","selectedTab","getTabButtonID","getTabPanelID","tabPanelClass","TabButton","setTab","ariaControls","ariaSelected","aria-selected","handleClick","tabButtonListClasses","classesCount","compactMeBoxVars","TabButtonList","setAllTabIndexes","persist","currentEl","currentTarget","tabButtons","prevElement","firstElement","getLast","hasAlternateContents","openButtonContent","handleKeyDown","extraContent","Tabs","setSelectedTab","tabButtonID","tabPanelId","tabListClass","extraTabContent","tabPanelsClass","CompactMeBox","titleText","altText","CompactSearch","LogoType","searchInputRef","openSearchButtonRef","focusOnMount","prevOpen","showingSuggestions","onCloseSearch","onSearchButtonClick","buttonContentClassName","valueContainerClass","cancelButtonClassName","cancelContentClassName","ThemeLogo","themeDesktopUrl","themeMobileUrl","isDesktop","themeUrl","overwriteLogo","logoUrl","logoUrlFromState","logoType","HeaderLogo","desktopOrMobileClass","logoClassName","titleBarNavigationVariables","varsFormElements","verticalWidth","linkActive","bottomSpace","navLinks","navPadding","titleBarNavClasses","navigationCentered","offsetWidth","firstItem","lastItem","navContiner","TitleBarListItem","TitleBarNavItem","linkContentClassName","titleBarMegaMenuVariables","menuItemSpacer","menuItem","fillerItem","menuItemTitle","menuItemChild","HIDE_TIMEOUT_MS","TitleBarMegaMenuChild","TitleBarMegaMenu","expanded","useClasses","isFocusWithin","setIsFocusWithin","isMouseWithin","setIsMouseWithin","shouldFocusFirstItem","setShouldFocusFirstItem","setIsHidden","onCloseRef","containerRef","containerDimensions","menuHeight","yBounds","useImperativeHandle","focusFirstItem","handleKeyPress","nextParentSibling","previousParentSibling","parentSiblingFirstChild","click","onCloseCallback","onMouseMove","clientY","TitleBarNav","useLocation","setMenuItem","setExpanded","megaMenuRef","firstItemRef","firstItemDimensions","dataLength","onActive","listItem","listClassName","excludeExtraNavItems","extraNavItems","ComponentClass","afterNode","addNavItem","componentClass","TitleBar","mobileDropDownContent","isFixed","useMobileBackButton","forceVisibility","containerOptions","bgRef","bg2Ref","logoRef","scrollPos","setScrollPos","fullBleedOptions","shouldOverlay","bgStart","bgEnd","bg2Start","bg2End","bannerEnd","clientHeaderStart","clientHeaderEnd","bgSpring","bg2Spring","clientHeaderSpring","bgOpacity","interpolate","range","bg2Opacity","logoOpacity","bgProps","bg2Props","actualOpacity","logoProps","useScrollTransition","useCollisionDetector","collisionSourceRef","hBoundary1Ref","hBoundary2Ref","hasCollision","isSearchOpen","setIsSearchOpen","isShowingSuggestions","setIsShowingSuggestions","showMobileDropDown","classesMeBox","isGuest","logoClasses","showSubNav","hasSubNav","MobileMeBox","DesktopMeBox","isMobileLogoCentered","isDesktopLogoCentered","isPreviewing","isPreviewFirstRender","setIsPreviewFirstRender","headerContent","isHome","extraBurgerNavigation","span","extraMeBoxComponents","searchCloseOverwrites","containerElement","wrapperComponent","registerLink","signinLink","registerBeforeMeBox","displaySize","float","setValue","syncBackEmbedValue","floatOptions","none","onSave","selectSelf","initialAlt","setImmediate"],"mappings":"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","file":"shared.min.js?5b2b7b6366dde3140703","sourcesContent":["import { important, px } from \"csx\";\nimport isNumeric from \"validator/lib/isNumeric\";\nimport { logError } from \"@vanilla/utils\";\n\nexport function styleUnit(\n    val: string | number | undefined,\n    options?: { unitFunction?: (value) => string; isImportant?: boolean; debug?: boolean },\n) {\n    const { unitFunction = px, isImportant = false, debug = false } = options || {};\n\n    if (typeof val === \"object\") {\n        logError(`You cannot pass objects (${JSON.stringify(val)}) to the \"unit\" function`);\n        return undefined;\n    }\n\n    if (val === undefined) {\n        return undefined;\n    }\n\n    const valIsNumeric = isNumeric(val.toString().trim());\n\n    let output;\n\n    if (typeof val === \"string\" && !valIsNumeric) {\n        output = val;\n    } else if (val !== undefined && val !== null && valIsNumeric) {\n        output = unitFunction(val as number);\n    } else {\n        output = val;\n    }\n\n    if (isImportant) {\n        return important(output);\n    } else {\n        return output;\n    }\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\nimport { logDebugConditionnal, logError } from \"@vanilla/utils\";\nimport { color, ColorHelper, important } from \"csx\";\nimport { stringIsLinearGradient } from \"@library/styles/styleUtils\";\nexport class ColorsUtils {\n    constructor() {\n        throw new Error(\"Not to be instantiated\");\n    }\n\n    /**\n     * Check if it's a light color or dark color.\n     * Calculation is based off of this formula. http://alienryderflex.com/hsp.html\n     * @param color - The color we're checking\n     */\n    static isLightColor = (referenceColor: ColorHelper | string): boolean => {\n        const color = ColorsUtils.ensureColorHelper(referenceColor);\n        const r = color.red();\n        const b = color.blue();\n        const g = color.green();\n        const result = Math.sqrt(0.299 * r * r + 0.587 * g * g + 0.114 * b * b);\n        // Values in the range of 128-150 seem to give acceptable results.\n        return result >= 150;\n    };\n\n    static ensureColorHelper = (colorValue: string | ColorHelper): ColorHelper => {\n        return typeof colorValue === \"string\" ? color(colorValue) : colorValue;\n    };\n\n    static colorOut(\n        colorValue?: ColorHelper | string,\n        options?: {\n            debug?: boolean;\n            makeImportant?: boolean;\n        },\n    ): string | undefined {\n        const { debug = false, makeImportant } = options || {};\n\n        logDebugConditionnal(debug, \"ColorsUtils.colorOut - colorValue: \", colorValue);\n\n        if (!colorValue) {\n            return undefined;\n        }\n\n        if (stringIsLinearGradient(colorValue)) {\n            logDebugConditionnal(debug, \"ColorsUtils.colorOut - linear gradient detected - colorValue: \", colorValue);\n            // @ts-ignore\n            return colorValue.toString();\n        } else {\n            const output = typeof colorValue === \"string\" ? color(colorValue) : colorValue;\n            // @ts-ignore\n            return makeImportant ? important(output.toString()) : output.toString();\n        }\n    }\n\n    /*\n     * Maintain good contrast by flipping ratios when we're in a dark theme\n     * @param weight - The weight for the color mix\n     * @param bgColor - Check background color to determine if we're in a dark theme\n     */\n    static getRatioBasedOnDarkness = (weight: number, c: ColorHelper | string): number => {\n        if (weight > 1) {\n            logError(\"The weight cannot be greater than 1.\");\n            weight = 1;\n        } else if (weight < 0) {\n            logError(\"The weight cannot be smaller than 0.\");\n            weight = 0;\n        }\n\n        if (ColorsUtils.isLightColor(ColorsUtils.ensureColorHelper(c))) {\n            return weight;\n        } else {\n            return 1 - weight;\n        }\n    };\n\n    /*\n     * Color modification based on colors lightness.\n     * @param color - The color we're checking and modifying\n     * @param weight - The amount you want to mix the two colors (value from 0 to 1)\n     * @param inverse - By default we darken light colours and lighten dark colors, but if you want to get the inverse result, use this param\n     * @param flipWeightForDark - For dark themes, flip ratio. Example, a weight of \".2\" for a light theme would be \".8\" for a dark theme.\n     * @param debug - Turn on debug logs\n     * Note, however, that we do not check if you've reached a maximum. Example: If you want to darken pure black, you get back pure black.\n     */\n    static modifyColorBasedOnLightness = (props: {\n        color: ColorHelper | string;\n        weight: number;\n        inverse?: boolean;\n        flipWeightForDark?: boolean;\n        debug?: boolean;\n    }): ColorHelper => {\n        const { color: referenceColor, inverse = false, flipWeightForDark = false, debug = false } = props;\n        const colorObj = ColorsUtils.ensureColorHelper(referenceColor);\n        let weight = props.weight;\n        logDebugConditionnal(debug, \"=== start modifyColorBasedOnLightness debug ===\");\n        logDebugConditionnal(debug, \"initial color: \", color);\n        logDebugConditionnal(debug, \"initial weight: \", weight);\n        logDebugConditionnal(debug, \"inverse: \", inverse);\n        logDebugConditionnal(debug, \"flipWeightForDark: \", flipWeightForDark);\n        logDebugConditionnal(debug, \": \");\n\n        let output;\n        if (weight > 1 || weight < 0) {\n            throw new Error(\"mixAmount must be a value between 0 and 1 inclusively.\");\n        }\n\n        const isLight = ColorsUtils.isLightColor(colorObj);\n        logDebugConditionnal(debug, \"is light: \", isLight);\n        if (flipWeightForDark && !isLight) {\n            weight = 1 - weight;\n        }\n        logDebugConditionnal(debug, \"final weight: \", weight);\n        if ((isLight && !inverse) || (!isLight && inverse)) {\n            output = colorObj.darken(weight);\n        } else {\n            output = colorObj.lighten(weight);\n        }\n        logDebugConditionnal(debug, \"output: \", output);\n        logDebugConditionnal(debug, \"output: \");\n        logDebugConditionnal(debug, \"=== end modifyColorBasedOnLightness debug ===\");\n        return output;\n    };\n\n    /*\n     * Color modification based on colors lightness. This function will make darks darker and lights lighter. Note, however, that if we pass\n     * pure white or pure black, the modification goes in the opposite direction, to maintain contrast if \"flipIfMax\" is true.\n     * This function is meant for smart defaults and works best with smaller weights. Not really meant for theming. There is a curve\n     * to the weight compensate for the fact that subtle weights works well for light colors, but not for dark ones (roughly 10 times\n     * less for pure black). This curve starts with colors .4 lightness or less and is accentuated more as we get closer to pure black.\n     * @param color - The color we're checking and modifying\n     * @param weight - The amount you want to mix the two colors (value from 0 to 1)\n     * @param flipIfMax - Modify in the opposite direction if we're darker than black or whiter than white.\n     */\n    static offsetLightness = (\n        referenceColorValue: ColorHelper | string,\n        weight: number,\n        flipIfMax: boolean = true,\n        debug: boolean = false,\n    ): ColorHelper => {\n        const colorValue = ColorsUtils.ensureColorHelper(referenceColorValue);\n        const colorLightness = colorValue.lightness();\n        let weightOffset = 1;\n        if (!ColorsUtils.isLightColor(colorValue)) {\n            weightOffset = Math.abs(colorLightness - 0.45) * 20; // Seems darker colors need more contrast than light colors to get the same impact\n        }\n\n        const weightCurved = weight * weightOffset;\n        const colorDarker = colorValue.darken(weightCurved) as ColorHelper;\n        const colorLighter = colorValue.lighten(weightCurved) as ColorHelper;\n\n        if (ColorsUtils.isLightColor(colorValue)) {\n            if (colorLightness + weightCurved > 1 && flipIfMax) {\n                return colorLighter;\n            } else {\n                return colorDarker;\n            }\n        } else {\n            if (colorLightness - weightCurved > 0 && !flipIfMax) {\n                return colorLighter;\n            } else {\n                return colorDarker;\n            }\n        }\n    };\n\n    /*\n     * Color modification based on saturation.\n     * @param referenceColor - The reference colour to determine if we're in a dark or light context.\n     * @param colorToModify - The color you wish to modify\n     * @param percentage - The amount you want to mix the two colors\n     * @param flip - By default we darken light colours and lighten darks, but if you want to get the opposite result, use this param\n     */\n    static modifyColorSaturationBasedOnLightness = (\n        c: ColorHelper | string,\n        weight: number,\n        flip: boolean = false,\n    ): ColorHelper => {\n        const colorObj = ColorsUtils.ensureColorHelper(c);\n        if (weight > 1 || weight < 0) {\n            throw new Error(\"mixAmount must be a value between 0 and 1 inclusively.\");\n        }\n\n        const isSaturated = colorObj.lightness() >= 0.5;\n\n        if ((isSaturated && !flip) || (!isSaturated && flip)) {\n            // Desaturate\n            return colorObj.desaturate(weight);\n        } else {\n            // Saturate\n            return colorObj.saturate(weight);\n        }\n    };\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\nimport {\n    IBackground,\n    IBorderRadiusOptions,\n    IBorderRadiusOutput,\n    IBorderStyles,\n    IBoxOptions,\n    IClickableItemOptions,\n    IFont,\n    ILinkColorOverwritesWithOptions,\n    IMixedBorderStyles,\n    IContentBoxes,\n    ISimpleBorderStyle,\n    ISpacing,\n    TLength,\n} from \"@library/styles/cssUtilsTypes\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { ColorHelper, important, percent, px } from \"csx\";\nimport { CSSObject } from \"@emotion/css\";\nimport {\n    BorderRadiusProperty,\n    BorderStyleProperty,\n    BorderWidthProperty,\n    LeftProperty,\n    PositionProperty,\n    RightProperty,\n    BottomProperty,\n} from \"csstype\";\nimport merge from \"lodash/merge\";\nimport { getValueIfItExists } from \"@library/forms/borderStylesCalculator\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { getBackgroundImage } from \"@library/styles/styleHelpersBackgroundStyling\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { IGlobalBorderStyles } from \"@library/styles/cssUtilsTypes\";\nimport { monoFallbacks, fontFallbacks } from \"@library/styles/fontFallbacks\";\nimport { Variables } from \"@library/styles/Variables\";\nimport { BorderType, singleBorder } from \"@library/styles/styleHelpersBorders\";\nimport { shadowHelper } from \"@library/styles/shadowHelpers\";\nimport { notEmpty } from \"@vanilla/utils\";\n\nexport class Mixins {\n    constructor() {\n        throw new Error(\"Not to be instantiated\");\n    }\n\n    public static box = (boxOptions: IBoxOptions): CSSObject => {\n        let { background, borderType, spacing, border, itemSpacingOnAllItems } = boxOptions;\n        const globalVars = globalVariables();\n\n        border = {\n            ...globalVariables().borderType.contentBox,\n            ...border,\n        };\n\n        const boxHasSetPaddings = Object.values(spacing).filter(notEmpty).length > 0;\n\n        const hasBackground = (background.color || background.image) && !background.unsetBackground;\n\n        // We have a clearly defined box of sometype.\n        // Anything that makes the box stand out from the background on all side\n        // Means we should apply some default behaviours, like paddings, and borderRadius.\n        const hasFullOutline = [BorderType.BORDER, BorderType.SHADOW].includes(borderType) || hasBackground;\n        if (!boxHasSetPaddings && hasFullOutline) {\n            spacing = { horizontal: 16, vertical: borderType === BorderType.SEPARATOR ? 0 : 16 };\n        }\n        let itemSpacing = boxOptions.itemSpacing || (hasFullOutline ? 16 : 0);\n        return {\n            // Resets\n            padding: 0,\n            border: \"none\",\n            boxShadow: \"none\",\n            borderRadius: hasFullOutline ? ((border.radius ?? globalVars.border.radius) as any) : 0,\n            background: \"none\",\n            clear: \"both\",\n\n            // Debugging\n            \"--border-type\": borderType,\n\n            \"&:before\": {\n                display: \"none\",\n            },\n            \"&:after\": {\n                display: \"none\",\n            },\n\n            // Apply styles\n            ...Mixins.background(background),\n            ...Mixins.borderType(borderType, { border }),\n            ...Mixins.padding(spacing),\n            ...(hasFullOutline || borderType === BorderType.SEPARATOR\n                ? {\n                      \"& .pageBox:first-of-type:before\": {\n                          // Hide separator\n                          display: \"none\",\n                      },\n                      \"& .pageBox:last-of-type:after\": {\n                          // Hide separator\n                          display: \"none\",\n                      },\n                  }\n                : {}),\n            ...(hasFullOutline\n                ? {\n                      \"& + .pageBox\": Mixins.margin({ top: itemSpacing }),\n                  }\n                : {}),\n            ...(itemSpacingOnAllItems ? Mixins.margin({ vertical: itemSpacing }) : {}),\n        };\n    };\n\n    public static borderType(borderType: BorderType, options?: { border?: IBorderStyles }): CSSObject {\n        switch (borderType) {\n            case BorderType.BORDER:\n                return {\n                    ...Mixins.border(options?.border),\n                };\n            case BorderType.SHADOW:\n                return {\n                    ...shadowHelper().embed(),\n                };\n            case BorderType.SEPARATOR:\n                return {\n                    \"&:before\": {\n                        content: `\"\"`,\n                        display: \"block\",\n                        height: 16,\n                        width: \"calc(100% + 16px)\",\n                        marginLeft: -8,\n                        borderTop: singleBorder(),\n                    },\n                    \"&:after\": {\n                        content: `\"\"`,\n                        display: \"block\",\n                        height: 16,\n                        width: \"calc(100% + 16px)\",\n                        marginLeft: -8,\n                        borderBottom: singleBorder(),\n                    },\n                    // & + & doesn't work.\n                    // https://github.com/emotion-js/emotion/issues/1922\n                    \"& + .pageBox:before\": {\n                        borderTop: \"none\",\n                    },\n                };\n            case BorderType.NONE:\n            default:\n                return {};\n        }\n    }\n\n    private static spacing(property: \"margin\" | \"padding\", spacings?: ISpacing): CSSObject {\n        if (!spacings) {\n            return {};\n        }\n\n        const spacingVals: CSSObject = {};\n\n        const propertyLeft = `${property}Left`;\n        const propertyRight = `${property}Right`;\n        const propertyTop = `${property}Top`;\n        const propertyBottom = `${property}Bottom`;\n\n        if (spacings.all !== undefined) {\n            spacingVals[propertyTop] = styleUnit(spacings.all);\n            spacingVals[propertyRight] = styleUnit(spacings.all);\n            spacingVals[propertyBottom] = styleUnit(spacings.all);\n            spacingVals[propertyLeft] = styleUnit(spacings.all);\n        }\n\n        if (spacings.vertical !== undefined) {\n            spacingVals[propertyTop] = styleUnit(spacings.vertical);\n            spacingVals[propertyBottom] = styleUnit(spacings.vertical);\n        }\n\n        if (spacings.horizontal !== undefined) {\n            spacingVals[propertyLeft] = styleUnit(spacings.horizontal);\n            spacingVals[propertyRight] = styleUnit(spacings.horizontal);\n        }\n\n        if (spacings.top !== undefined) {\n            spacingVals[propertyTop] = styleUnit(spacings.top);\n        }\n\n        if (spacings.right !== undefined) {\n            spacingVals[propertyRight] = styleUnit(spacings.right);\n        }\n\n        if (spacings.bottom !== undefined) {\n            spacingVals[propertyBottom] = styleUnit(spacings.bottom);\n        }\n\n        if (spacings.left !== undefined) {\n            spacingVals[propertyLeft] = styleUnit(spacings.left);\n        }\n\n        return spacingVals;\n    }\n\n    static padding(spacing: ISpacing): CSSObject {\n        return Mixins.spacing(\"padding\", spacing);\n    }\n\n    static margin(spacing: ISpacing): CSSObject {\n        return Mixins.spacing(\"margin\", spacing);\n    }\n\n    static font(vars: IFont): CSSObject {\n        return {\n            color: ColorsUtils.colorOut(vars.color),\n            fontSize: vars.size !== undefined ? styleUnit(vars.size) : undefined,\n            fontWeight: vars.weight,\n            lineHeight: vars.lineHeight,\n            textAlign: vars.align,\n            textShadow: vars.shadow,\n            fontFamily: vars.family ? Mixins.fontFamilyWithDefaults(vars.family) : vars.family,\n            textTransform: vars.transform,\n            letterSpacing: vars.letterSpacing,\n            textDecoration: vars.textDecoration,\n        };\n    }\n\n    static fontFamilyWithDefaults(fontFamilies: string[], options: { isMonospaced?: boolean } = {}): string {\n        return fontFamilies\n            .concat(options.isMonospaced ? monoFallbacks : fontFallbacks)\n            .map((font) => (font.includes(\" \") && !font.includes('\"') ? `\"${font}\"` : font))\n            .join(\", \");\n    }\n\n    private static setAllRadii(radius: BorderRadiusProperty<TLength>, options?: IBorderRadiusOptions) {\n        return {\n            borderTopRightRadius: styleUnit(radius, options),\n            borderBottomRightRadius: styleUnit(radius, options),\n            borderBottomLeftRadius: styleUnit(radius, options),\n            borderTopLeftRadius: styleUnit(radius, options),\n        };\n    }\n\n    private static setAllBorders = (\n        color: string,\n        width: BorderWidthProperty<TLength>,\n        style: BorderStyleProperty,\n        radius?: IBorderRadiusOutput,\n        debug = false as boolean | string,\n    ) => {\n        const output = {};\n\n        if (color !== undefined) {\n            merge(output, {\n                borderTopColor: color,\n                borderRightColor: color,\n                borderBottomColor: color,\n                borderLeftColor: color,\n            });\n        }\n\n        if (width !== undefined) {\n            merge(output, {\n                borderTopWidth: styleUnit(width),\n                borderRightWidth: styleUnit(width),\n                borderBottomWidth: styleUnit(width),\n                borderLeftWidth: styleUnit(width),\n            });\n        }\n\n        if (style !== undefined) {\n            merge(output, {\n                borderTopStyle: style,\n                borderRightStyle: style,\n                borderBottomStyle: style,\n                borderLeftStyle: style,\n            });\n        }\n\n        if (radius !== undefined && typeof radius !== \"object\") {\n            merge(output, Mixins.setAllRadii(radius));\n        }\n\n        return output;\n    };\n\n    private static singleBorderStyle(\n        borderStyles: ISimpleBorderStyle,\n        fallbackVariables: IGlobalBorderStyles = globalVariables().border,\n    ) {\n        if (!borderStyles) {\n            return;\n        }\n        const { color, width, style } = borderStyles;\n        const output: ISimpleBorderStyle = {};\n        output.color = color;\n        output.width = styleUnit(borderStyles.width ? borderStyles.width : width);\n        output.style = borderStyles.style ? borderStyles.style : style;\n\n        if (Object.keys(output).length > 0) {\n            return output;\n        } else {\n            return;\n        }\n    }\n\n    static border(\n        detailedStyles?: IBorderStyles | ISimpleBorderStyle | IMixedBorderStyles,\n        options?: {\n            fallbackBorderVariables?: IGlobalBorderStyles;\n            debug?: boolean | string;\n        },\n    ): CSSObject {\n        const { fallbackBorderVariables = globalVariables().border, debug = false } = options || {};\n        const output: CSSObject = {};\n        const style = getValueIfItExists(detailedStyles, \"style\", fallbackBorderVariables.style);\n        const color = getValueIfItExists(detailedStyles, \"color\", fallbackBorderVariables.color).toString();\n        const width = getValueIfItExists(detailedStyles, \"width\", fallbackBorderVariables.width);\n        const radius = getValueIfItExists(detailedStyles, \"radius\", fallbackBorderVariables.radius);\n        const defaultsAll = Mixins.setAllBorders(color, width, style, radius, debug);\n\n        merge(output, defaultsAll);\n\n        // Now we are sure to not have simple styles anymore.\n        detailedStyles = detailedStyles as IBorderStyles;\n        if (!detailedStyles) {\n            // @NOTE: color from fallbackBorderVariables needs to be changed to string type\n            // @ts-ignore\n            detailedStyles = fallbackBorderVariables;\n        }\n\n        const all = getValueIfItExists(detailedStyles, \"all\");\n        if (all) {\n            const allStyles = Mixins.singleBorderStyle(all, fallbackBorderVariables);\n            if (allStyles) {\n                output.borderTopWidth = allStyles?.width ?? width;\n                output.borderTopStyle = getValueIfItExists(allStyles, \"style\", style);\n                output.borderTopColor = getValueIfItExists(allStyles, \"color\", color);\n                output.borderTopRightRadius = getValueIfItExists(all, \"radius\", radius);\n                output.borderBottomRightRadius = getValueIfItExists(all, \"radius\", radius);\n                output.borderBottomLeftRadius = getValueIfItExists(all, \"radius\", radius);\n                output.borderTopLeftRadius = getValueIfItExists(all, \"radius\", radius);\n            }\n        }\n\n        const top = getValueIfItExists(detailedStyles, \"top\");\n        if (top) {\n            const topStyles = Mixins.singleBorderStyle(top, fallbackBorderVariables);\n            if (topStyles) {\n                output.borderTopWidth = getValueIfItExists(topStyles, \"width\", width);\n                output.borderTopStyle = getValueIfItExists(topStyles, \"style\", style);\n                output.borderTopColor = getValueIfItExists(topStyles, \"color\", color);\n                output.borderTopLeftRadius = getValueIfItExists(top, \"radius\", radius);\n                output.borderTopRightRadius = getValueIfItExists(top, \"radius\", radius);\n            }\n        }\n\n        const right = getValueIfItExists(detailedStyles, \"right\");\n\n        if (right) {\n            const rightStyles = Mixins.singleBorderStyle(right, fallbackBorderVariables);\n            if (rightStyles) {\n                output.borderRightWidth = getValueIfItExists(rightStyles, \"width\", width);\n                output.borderRightStyle = getValueIfItExists(rightStyles, \"style\", style);\n                output.borderRightColor = getValueIfItExists(rightStyles, \"color\", color);\n\n                output.borderBottomRightRadius = getValueIfItExists(right, \"radius\", radius);\n                output.borderTopRightRadius = getValueIfItExists(right, \"radius\", radius);\n            }\n        }\n\n        const bottom = getValueIfItExists(detailedStyles, \"bottom\");\n        if (bottom) {\n            const bottomStyles = Mixins.singleBorderStyle(bottom, fallbackBorderVariables);\n            if (bottomStyles) {\n                output.borderBottomWidth = getValueIfItExists(bottomStyles, \"width\", width);\n                output.borderBottomStyle = getValueIfItExists(bottomStyles, \"style\", style);\n                output.borderBottomColor = getValueIfItExists(bottomStyles, \"color\", color);\n                output.borderBottomLeftRadius = getValueIfItExists(bottom, \"radius\", radius);\n                output.borderBottomRightRadius = getValueIfItExists(bottom, \"radius\", radius);\n            }\n        }\n\n        const left = getValueIfItExists(detailedStyles, \"left\");\n\n        if (left) {\n            const leftStyles = Mixins.singleBorderStyle(left, fallbackBorderVariables);\n            if (leftStyles) {\n                output.borderLeftWidth = getValueIfItExists(leftStyles, \"width\", width);\n                output.borderLeftStyle = getValueIfItExists(leftStyles, \"style\", style);\n                output.borderLeftColor = getValueIfItExists(leftStyles, \"color\", color);\n                output.borderBottomLeftRadius = getValueIfItExists(left, \"radius\", radius);\n                output.borderTopLeftRadius = getValueIfItExists(left, \"radius\", radius);\n            }\n        }\n\n        return output;\n    }\n\n    static background(vars: IBackground): CSSObject {\n        const image = getBackgroundImage(vars.image);\n        if (vars.unsetBackground) {\n            return {\n                background: \"none\",\n            };\n        }\n        return {\n            backgroundColor: vars.color ? ColorsUtils.colorOut(vars.color) : undefined,\n            backgroundAttachment: vars.attachment,\n            backgroundPosition: vars.position || `50% 50%`,\n            backgroundRepeat: vars.repeat || \"no-repeat\",\n            backgroundSize: vars.size || \"cover\",\n            backgroundImage: image,\n            opacity: vars.opacity,\n        };\n    }\n\n    static clickable = {\n        itemState: (overwriteColors?: ILinkColorOverwritesWithOptions, options?: IClickableItemOptions): CSSObject => {\n            const vars = globalVariables();\n            const cssProperty = \"color\";\n            const { disableTextDecoration } = options || { disableTextDecoration: false };\n            // We want to default to the standard styles and only overwrite what we want/need\n            const linkColors = vars.links.colors;\n\n            // @NOTE: color from fallbackBorderVariables needs to be changed to string type\n            // @ts-ignore\n            const colors = Variables.clickable(overwriteColors ?? {});\n\n            const mergedColors = {\n                default: !overwriteColors?.skipDefault\n                    ? Mixins.clickable.linkStyleFallbacks(colors.default, undefined, linkColors.default)\n                    : undefined,\n                hover: Mixins.clickable.linkStyleFallbacks(colors.hover, colors.allStates, linkColors.hover),\n                focus: Mixins.clickable.linkStyleFallbacks(colors.focus, colors.allStates, linkColors.focus),\n                clickFocus: Mixins.clickable.linkStyleFallbacks(colors.clickFocus, colors.allStates, linkColors.focus),\n                keyboardFocus: Mixins.clickable.linkStyleFallbacks(\n                    colors.keyboardFocus,\n                    colors.allStates,\n                    linkColors.keyboardFocus,\n                ),\n                active: Mixins.clickable.linkStyleFallbacks(colors.active, colors.allStates, linkColors.active),\n                visited: Mixins.clickable.linkStyleFallbacks(colors.visited, colors.allStates, linkColors.visited),\n            };\n\n            const textDecoration = disableTextDecoration ? important(\"none\") : undefined;\n\n            const styles = {\n                default: {\n                    [cssProperty]: mergedColors.default?.toString(),\n                    textDecoration,\n                },\n                hover: {\n                    [cssProperty]: mergedColors.hover?.toString(),\n                    cursor: \"pointer\",\n                    textDecoration,\n                },\n                focus: {\n                    [cssProperty]: mergedColors.focus?.toString(),\n                    textDecoration,\n                },\n                clickFocus: {\n                    [cssProperty]: mergedColors.focus?.toString(),\n                    textDecoration,\n                },\n                keyboardFocus: {\n                    [cssProperty]: mergedColors.keyboardFocus?.toString(),\n                    textDecoration,\n                },\n                active: {\n                    [cssProperty]: mergedColors.active?.toString(),\n                    cursor: \"pointer\",\n                    textDecoration,\n                },\n                visited: mergedColors.visited\n                    ? {\n                          [cssProperty]: mergedColors.visited?.toString(),\n                          textDecoration,\n                      }\n                    : undefined,\n            };\n\n            const final = {\n                [cssProperty]: styles.default.color?.toString(),\n                \"&:visited\": styles.visited ?? undefined,\n                \"&:hover\": styles.hover,\n                \"&:focus, &.isFocused\": {\n                    ...(styles.focus ?? {}),\n                    ...(styles.clickFocus ?? {}),\n                },\n                \"&.focus-visible\": {\n                    ...(styles.focus ?? {}),\n                    ...(styles.keyboardFocus ?? {}),\n                },\n                \"&:active\": styles.active,\n            };\n            // @NOTE: color from fallbackBorderVariables needs to be changed to string type\n            // @ts-ignore\n            return final;\n        },\n        linkStyleFallbacks: (\n            specificOverwrite?: ColorHelper | string,\n            defaultOverwrite?: ColorHelper | string,\n            globalDefault?: ColorHelper | string,\n        ) => {\n            if (specificOverwrite) {\n                return specificOverwrite;\n            } else if (defaultOverwrite) {\n                return defaultOverwrite;\n            } else {\n                return globalDefault;\n            }\n        },\n    };\n\n    static absolute = {\n        topRight: (top: string | number = \"0\", right: RightProperty<TLength> = px(0)): CSSObject => {\n            return {\n                position: \"absolute\" as PositionProperty,\n                top: styleUnit(top),\n                right: styleUnit(right),\n            };\n        },\n        topLeft: (top: string | number = \"0\", left: LeftProperty<TLength> = px(0)): CSSObject => {\n            return {\n                position: \"absolute\" as PositionProperty,\n                top: styleUnit(top),\n                left: styleUnit(left),\n            };\n        },\n        bottomRight: (bottom: BottomProperty<TLength> = px(0), right: RightProperty<TLength> = px(0)): CSSObject => {\n            return {\n                position: \"absolute\" as PositionProperty,\n                bottom: styleUnit(bottom),\n                right: styleUnit(right),\n            };\n        },\n        bottomLeft: (bottom: BottomProperty<TLength> = px(0), left: LeftProperty<TLength> = px(0)): CSSObject => {\n            return {\n                position: \"absolute\" as PositionProperty,\n                bottom: styleUnit(bottom),\n                left: styleUnit(left),\n            };\n        },\n        middleOfParent: (shrink: boolean = false): CSSObject => {\n            if (shrink) {\n                return {\n                    position: \"absolute\" as PositionProperty,\n                    display: \"inline-block\",\n                    top: percent(50),\n                    left: percent(50),\n                    right: \"initial\",\n                    bottom: \"initial\",\n                    transform: \"translate(-50%, -50%)\",\n                };\n            } else {\n                return {\n                    position: \"absolute\" as PositionProperty,\n                    display: \"block\",\n                    top: 0,\n                    left: 0,\n                    right: 0,\n                    bottom: 0,\n                    maxHeight: percent(100),\n                    maxWidth: percent(100),\n                    margin: \"auto\",\n                };\n            }\n        },\n        middleLeftOfParent: (left: LeftProperty<TLength> = px(0)): CSSObject => {\n            return {\n                position: \"absolute\" as PositionProperty,\n                display: \"block\",\n                top: 0,\n                left,\n                bottom: 0,\n                maxHeight: percent(100),\n                maxWidth: percent(100),\n                margin: \"auto 0\",\n            };\n        },\n        middleRightOfParent: (right: RightProperty<TLength> = px(0)): CSSObject => {\n            return {\n                position: \"absolute\" as PositionProperty,\n                display: \"block\",\n                top: 0,\n                right,\n                bottom: 0,\n                maxHeight: percent(100),\n                maxWidth: percent(100),\n                margin: \"auto 0\",\n            };\n        },\n        fullSizeOfParent: (): CSSObject => {\n            return {\n                display: \"block\",\n                position: \"absolute\" as PositionProperty,\n                top: px(0),\n                left: px(0),\n                width: percent(100),\n                height: percent(100),\n            };\n        },\n        srOnly: (): CSSObject => {\n            return {\n                position: important(\"absolute\"),\n                display: important(\"block\"),\n                width: important(px(1).toString()),\n                height: important(px(1).toString()),\n                padding: important(px(0).toString()),\n                margin: important(px(-1).toString()),\n                overflow: important(\"hidden\"),\n                clip: important(`rect(0, 0, 0, 0)`),\n                border: important(px(0).toString()),\n            };\n        },\n    };\n\n    static flex = {\n        middle: (wrap = false): CSSObject => {\n            return {\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                flexWrap: wrap ? \"wrap\" : \"nowrap\",\n            };\n        },\n        spaceBetween: (wrap = false): CSSObject => {\n            return {\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"space-between\",\n                flexWrap: wrap ? \"wrap\" : \"nowrap\",\n            };\n        },\n\n        middleLeft: (wrap = false): CSSObject => {\n            return {\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"flex-start\",\n                flexWrap: wrap ? \"wrap\" : \"nowrap\",\n            };\n        },\n\n        inheritHeightClass: useThemeCache(() => {\n            const style = styleFactory(\"inheritHeight\");\n            return style({\n                display: \"flex\",\n                flexDirection: \"column\",\n                flexGrow: 1,\n                position: \"relative\",\n            });\n        }),\n    };\n}\n","/**\n * Application functions for interop between Components in different packages.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport gdn from \"@library/gdn\";\nimport { PromiseOrNormalCallback } from \"@vanilla/utils\";\nimport isUrl from \"validator/lib/isURL\";\nimport { ensureScript } from \"@vanilla/dom-utils\";\nimport { sprintf } from \"sprintf-js\";\n\n// Re-exported for backwards compatibility\nexport { t, translate } from \"@vanilla/i18n\";\n\n// Absolute path pattern\nconst ABSOLUTE_PATH_REGEX = /^\\s*(https?:)?\\/\\//i;\n\n/**\n * Get a piece of metadata passed from the server.\n *\n * @param key - The key to lookup.\n * @param defaultValue - A fallback value in case the key cannot be found.\n *\n * @returns Returns a meta value or the default value.\n */\nexport function getMeta(key: string, defaultValue?: any) {\n    if (!gdn.meta) {\n        return defaultValue;\n    }\n\n    const parts = key.split(\".\");\n    let haystack = gdn.meta;\n\n    for (const part of parts) {\n        if (!haystack.hasOwnProperty(part)) {\n            return defaultValue;\n        }\n        haystack = haystack[part];\n    }\n    return haystack;\n}\n\n/**\n * Set a piece of metadata. This will override what was passed from the server.\n *\n * @param key - The key to store under.\n * @param value - The value to set.\n */\nexport function setMeta(key: string, value: any) {\n    const parts = key.split(\".\");\n    const last = parts.pop();\n\n    if (!last) {\n        throw new Error(`Unable to set meta value ${key}. ${last} is not a valid object key.`);\n    }\n\n    let haystack = gdn.meta;\n\n    for (const part of parts) {\n        if (haystack[part] === null || typeof haystack[part] !== \"object\") {\n            haystack[part] = {};\n        }\n        haystack = haystack[part];\n    }\n    haystack[last] = value;\n}\n\n/**\n * Determine if a string is an allowed URL.\n *\n * In the future this may be extended to check if we want to whitelist/blacklist various URLs.\n *\n * @param input - The string to check.\n */\nexport function isAllowedUrl(input: string): boolean {\n    // Options https://github.com/chriso/validator.js#validators\n    const options = {\n        protocols: [\"http\", \"https\"],\n        require_tld: true,\n        require_protocol: true,\n        require_host: true,\n        require_valid_protocol: true,\n        allow_trailing_dot: false,\n        allow_protocol_relative_urls: false,\n    };\n    return isUrl(input, options);\n}\n\ninterface ISiteSection {\n    basePath: string;\n    contentLocale: string;\n    sectionGroup: string;\n    sectionID: string;\n    name: string;\n    apps: Record<string, boolean>;\n    attributes: Record<string, any>;\n}\n\n/**\n * Get the current site section.\n */\nexport function getSiteSection(): ISiteSection {\n    return getMeta(\"siteSection\");\n}\n\n/**\n * Format a URL in the format passed from the controller.\n *\n * @param path - The path to format.\n *\n * @returns Returns a URL that can be used in the APP.\n */\nexport function formatUrl(path: string, withDomain: boolean = false): string {\n    // Test if this is an absolute path\n    if (ABSOLUTE_PATH_REGEX.test(path)) {\n        return path;\n    }\n\n    // Subcommunity slug OR subcommunity\n    let siteRoot = getMeta(\"context.basePath\", \"\");\n\n    if (path.startsWith(\"~\")) {\n        path = path.replace(/^~/, \"\");\n        siteRoot = getMeta(\"context.host\", \"\");\n    }\n\n    // The context paths that come down are expect to have no / at the end of them.\n    // Normally a domain like so: https://someforum.com\n    // When we don't have that we want to fallback to \"\" so that our path with a / can get passed.\n    const urlBase = withDomain ? window.location.origin + siteRoot : siteRoot;\n    return urlBase + path;\n}\n\n/**\n * Generate a URL from the site's web root.\n *\n * No site section will be included.\n */\nexport function siteUrl(path: string): string {\n    // Test if this is an absolute path\n    if (ABSOLUTE_PATH_REGEX.test(path)) {\n        return path;\n    }\n\n    // The context paths that come down are expect to have no / at the end of them.\n    // Normally a domain like so: https://someforum.com\n    // When we don't have that we want to fallback to \"\" so that our path with a / can get passed.\n    let urlBase = window.location.origin;\n\n    const host = getMeta(\"context.host\", \"\");\n    if (!path.startsWith(host)) {\n        urlBase += host;\n    }\n    return urlBase + path;\n}\n\n/**\n * Extract relative URL part from absolute full URL.\n *\n * @param fullUrl - The absolute url to transform.\n *\n * @returns Returns a URL that can be used in the APP.\n */\nexport function getRelativeUrl(fullUrl: string): string {\n    const urlBase = window.location.origin + getMeta(\"context.basePath\", \"\");\n    return fullUrl.replace(urlBase, \"\");\n}\n\n/**\n * Create the URL of an asset of the site.\n *\n * @param path - The path to format.\n *\n * @returns Returns a URL that can be used for a static asset.\n */\nexport function assetUrl(path: string): string {\n    // Test if this is an absolute path\n    if (ABSOLUTE_PATH_REGEX.test(path)) {\n        return path;\n    }\n    // The context paths that come down are expect to have no / at the end of them.\n    // Normally a domain like so: https://someforum.com\n    // When we don't have that we want to fallback to \"\" so that our path with a / can get passed.\n    const staticPathFolder = getMeta(\"context.staticPathFolder\", \"\");\n    const urlFormat = getMeta(\"context.assetPath\", \"\");\n    return staticPathFolder + urlFormat + path;\n}\n\n/**\n * Create the URL to the theme's asset folder\n *\n * @param path - The path to format.\n *\n * @returns Returns a URL that can be used for a static asset.\n */\nexport function themeAsset(path: string): string {\n    const themeKey = getMeta(\"ui.themeKey\");\n    return assetUrl(`/themes/${themeKey}/${path}`);\n}\n\n/**\n * @type {Array}\n * @private\n */\nconst _readyHandlers: PromiseOrNormalCallback[] = [];\n\n/**\n * Register a callback that executes when the document and the core libraries are ready to use.\n *\n * @param callback - The function to call. This can return a Promise but doesn't have to.\n */\nexport function onReady(callback: PromiseOrNormalCallback) {\n    _readyHandlers.push(callback);\n}\n\n/**\n * Execute all of the registered events in order.\n *\n * @returns A Promise when the events have all fired.\n */\nexport function _executeReady(): Promise<any[]> {\n    return new Promise((resolve) => {\n        const handlerPromises = _readyHandlers.map((handler) => handler());\n        const exec = () => {\n            return Promise.all(handlerPromises).then(resolve);\n        };\n\n        if (document.readyState !== \"loading\") {\n            return exec();\n        } else {\n            document.addEventListener(\"DOMContentLoaded\", exec);\n        }\n    });\n}\n\n/**\n * Execute a callback when a piece of DOM content is ready to be operated on.\n *\n * This is similar to onReady() but also includes content that is added dynamically (ex. AJAX).\n * Note that this function is meant to bridge the non-react parts of the application with react.\n *\n * @param callback - The callback to execute.\n */\nexport function onContent(callback: (event: CustomEvent) => void) {\n    document.addEventListener(\"X-DOMContentReady\", callback);\n}\n\n/**\n * Remove a listener registered with `onContent`.\n */\nexport function removeOnContent(callback: (event: CustomEvent) => void) {\n    document.removeEventListener(\"X-DOMContentReady\", callback);\n}\n\n/**\n * Make a URL to a user's profile.\n */\nexport function makeProfileUrl(username: string) {\n    const userPath = `/profile/${encodeURIComponent(username)}`;\n    return formatUrl(userPath, true);\n}\n\ninterface IRecaptcha {\n    execute: (string) => string;\n}\n\n/**\n * Ensure that we have loaded the rec\n */\nexport async function ensureReCaptcha(): Promise<IRecaptcha | null> {\n    const siteKey = getMeta(\"reCaptchaKey\");\n    if (!siteKey) {\n        return null;\n    }\n    await ensureScript(`https://www.google.com/recaptcha/api.js?render=${siteKey}`);\n\n    return { execute: (siteKey) => window.grecaptcha.execute(siteKey) };\n}\n\n/**\n * Translation helper for accessible labels, because <Translate/> doesn't return as string\n * @param template - the template for the string (must be translated ahead of time)\n * @param variable - the variable to insert in the template\n */\nexport function accessibleLabel(template: string, variable: string[]) {\n    return sprintf(template, variable);\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ColorHelper, important, px } from \"csx\";\nimport isNumeric from \"validator/lib/isNumeric\";\nexport * from \"@library/styles/styleHelpersAnimation\";\nexport * from \"@library/styles/styleHelpersBackgroundStyling\";\nexport * from \"@library/styles/styleHelpersTypography\";\nexport * from \"@library/styles/styleHelpersBorders\";\nexport * from \"@library/styles/styleHelpersButtons\";\nexport * from \"@library/styles/styleHelpersColors\";\nexport * from \"@library/styles/styleHelpersDropShadow\";\nexport * from \"@library/styles/styleHelpersFeedback\";\nexport * from \"@library/styles/styleHelpersSpacing\";\nexport * from \"@library/styles/styleHelpersLinks\";\nexport * from \"@library/styles/styleHelpersPositioning\";\nexport * from \"@library/styles/styleHelpersReset\";\nexport * from \"@library/styles/styleHelpersSpinner\";\nexport * from \"@library/styles/styleHelpersTypography\";\nexport * from \"@library/styles/styleHelpersVisibility\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nexport const unit = styleUnit;\n\n/*\n * Helper to generate human readable classes generated from TypeStyle\n * @param componentName - The component's name.\n */\nexport const debugHelper = (componentName: string) => {\n    return {\n        name: (subElementName?: string) => {\n            if (subElementName) {\n                return { label: `${componentName}-${subElementName}` };\n            } else {\n                return { label: componentName };\n            }\n        },\n    };\n};\n\nexport const ifExistsWithFallback = (checkProp) => {\n    if (checkProp && checkProp.length > 0) {\n        const next = checkProp.pop();\n        return next ? next : ifExistsWithFallback(checkProp);\n    } else {\n        return undefined;\n    }\n};\n\nexport const processValue = (variable) => {\n    const importantString = \" !important\";\n    const isImportant: boolean = typeof variable === \"string\" && variable.endsWith(importantString);\n    let value = variable;\n\n    if (isImportant) {\n        if (isNumeric(value as string)) {\n            value = Number(value);\n        }\n    }\n\n    return {\n        value,\n        isImportant,\n    };\n};\n\nexport const importantUnit = (val: string | number | undefined, unitFunction = px) => {\n    const withUnit = styleUnit(val);\n    return withUnit ? important(withUnit.toString()) : withUnit;\n};\n\nexport const negativeImportantUnit = (val: string | number | undefined, unitFunction = px) => {\n    const withUnit = styleUnit(val);\n    return withUnit ? important(negative(withUnit).toString()) : withUnit;\n};\n\nexport const negativeUnit = (val: string | number | undefined, unitFunction = px) => {\n    return negative(styleUnit(val));\n};\n\nexport const negative = (val) => {\n    if (typeof val === \"string\") {\n        val = val.trim();\n        if (val.startsWith(\"-\")) {\n            return val.substring(1, val.length).trim();\n        } else {\n            return `-${val}`;\n        }\n    } else if (!!val && !isNaN(val)) {\n        return val * -1;\n    } else {\n        return val;\n    }\n};\n\nexport const unitIfDefined = (val: string | number | undefined, unitFunction = px) => {\n    return val !== undefined ? styleUnit(val) : undefined;\n};\n\nexport interface IStateColors {\n    allStates?: ColorHelper; // Applies to all\n    noState?: ColorHelper; // Applies to stateless link\n    hover?: ColorHelper;\n    focus?: ColorHelper;\n    clickFocus?: ColorHelper; // Focused, not through keyboard\n    keyboardFocus?: ColorHelper; // Optionally different state for keyboard accessed element. Will default to \"focus\" state if not set.\n    active?: ColorHelper;\n    source?: string; // for debugging\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ButtonPreset } from \"@library/forms/ButtonPreset\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { IBackground } from \"@library/styles/cssUtilsTypes\";\nimport { fontFallbacks, monoFallbacks } from \"@library/styles/fontFallbacks\";\nimport { BorderType } from \"@library/styles/styleHelpersBorders\";\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { Variables } from \"@library/styles/Variables\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\nimport { logDebug, logError, logWarning } from \"@vanilla/utils\";\nimport { color, ColorHelper, rgba } from \"csx\";\n\nexport enum GlobalPreset {\n    DARK = \"dark\",\n    LIGHT = \"light\",\n}\n\nexport const FULL_GUTTER = 40;\n\nexport const defaultFontFamily = \"Open Sans\";\n\nexport const globalVariables = useThemeCache((forcedVars?: IThemeVariables) => {\n    // let colorPrimary = color(\"#0291db\");\n    let colorPrimary = color(\"#037DBC\");\n    const makeThemeVars = variableFactory(\"global\", forcedVars);\n\n    const constants = makeThemeVars(\"constants\", {\n        stateColorEmphasis: 0.15,\n        fullGutter: FULL_GUTTER,\n        states: {\n            hover: {\n                bgEmphasis: 0.08,\n                borderEmphasis: 0.7,\n            },\n            selected: {\n                bgEmphasis: 0.5,\n                borderEmphasis: 1,\n            },\n            active: {\n                bgEmphasis: 0.2,\n                borderEmphasis: 1,\n            },\n            focus: {\n                bgEmphasis: 0.15,\n                borderEmphasis: 1,\n            },\n        },\n    });\n\n    const options = makeThemeVars(\n        \"options\",\n        /**\n         * @var global.options.preset\n         * @title  Options Preset\n         * @description Choose global preset\n         * @type string\n         * @enum light | dark\n         */\n        { preset: GlobalPreset.LIGHT },\n    );\n\n    const elementaryColors = {\n        black: color(\"#000\"),\n        almostBlack: color(\"#323639\"),\n        white: color(\"#fff\"),\n        transparent: rgba(0, 0, 0, 0),\n    };\n\n    /**\n     * @varGroup global.mainColors\n     * @commonDescription Global main colors\n     */\n    const initialMainColors = makeThemeVars(\"mainColors\", {\n        /**\n         * @var global.mainColors.fg\n         * @title Main Colors - Foreground\n         * @description Sets the foreground color\n         * @type string\n         * @format hex-color\n         */\n        fg: options.preset === GlobalPreset.LIGHT ? color(\"#555a62\") : elementaryColors.white,\n        /**\n         * @var global.mainColors.bg\n         * @title Main Colors - Background\n         * @description Sets the background color\n         * @type string\n         * @format hex-color\n         */\n        bg: options.preset === GlobalPreset.LIGHT ? elementaryColors.white : elementaryColors.almostBlack,\n        /**\n         * @var global.mainColors.primary\n         * @title Main Colors - Primary\n         * @description Sets the primary color\n         * @type string\n         * @format hex-color\n         */\n        primary: colorPrimary,\n        /**\n         * @var global.mainColors.primaryContrast\n         * @title Main Colors - Primary Contrast\n         * @description Primary color for contrast\n         * @type string\n         * @format hex-color\n         */\n        primaryContrast: elementaryColors.white, // for good contrast with text.\n        /**\n         * @var global.mainColors.secondary\n         * @title Main Colors - Secondary\n         * @description Sets the secondary color\n         * @type string\n         * @format hex-color\n         */\n        secondary: colorPrimary,\n        /**\n         * @var global.mainColors.secondaryContrast\n         * @title Main Colors - Secondary Contrast\n         * @description Secondary color for contrast\n         * @type string\n         * @format hex-color\n         */\n        secondaryContrast: elementaryColors.white, // for good contrast with text.\n    });\n\n    colorPrimary = initialMainColors.primary;\n    const colorSecondary = initialMainColors.secondary;\n\n    // Shorthand checking bg color for darkness\n    const getRatioBasedOnBackgroundDarkness = (\n        weight: number,\n        color: ColorHelper = mainColors ? mainColors.bg : initialMainColors.bg,\n    ) => {\n        return ColorsUtils.getRatioBasedOnDarkness(weight, color);\n    };\n\n    const generatedMainColors = makeThemeVars(\"mainColors\", {\n        primaryContrast: ColorsUtils.isLightColor(colorPrimary) ? elementaryColors.almostBlack : elementaryColors.white, // High contrast color, for bg/fg or fg/bg contrast. Defaults to bg.\n        /**\n         * @var global.mainColors.statePrimary\n         * @title Main Colors - State Primary\n         * @type string\n         * @format hex-color\n         */\n        statePrimary: ColorsUtils.offsetLightness(colorPrimary, 0.04), // Default state color change\n        secondary: ColorsUtils.offsetLightness(colorPrimary, 0.05),\n        /**\n         * @var global.mainColors.stateSecondary\n         * @title Main Colors - State Secondary\n         * @type string\n         * @format hex-color\n         */\n        stateSecondary: undefined, // Calculated below, but you can overwrite it here.\n        secondaryContrast: ColorsUtils.isLightColor(colorSecondary)\n            ? elementaryColors.almostBlack\n            : elementaryColors.white,\n    });\n\n    const mainColors = {\n        ...initialMainColors,\n        ...generatedMainColors,\n    };\n\n    const mixBgAndFg = (weight: number) => {\n        return mainColors.fg.mix(mainColors.bg, weight) as ColorHelper;\n    };\n\n    const mixPrimaryAndFg = (weight: number) => {\n        return mainColors.primary.mix(mainColors.fg, getRatioBasedOnBackgroundDarkness(weight)) as ColorHelper;\n    };\n\n    const mixPrimaryAndBg = (weight: number) => {\n        return mainColors.primary.mix(mainColors.bg, getRatioBasedOnBackgroundDarkness(weight)) as ColorHelper;\n    };\n\n    /**\n     * @varGroup global.messageColors\n     * @commonDescription Global message colors\n     */\n    const messageColors = makeThemeVars(\"messageColors\", {\n        /**\n         * @varGroup global.messageColors.warning\n         * @commonDescription Message - Warning\n         */\n        warning: {\n            /**\n             * @var global.messageColors.warning.fg\n             * @type string\n             * @format hex-color\n             */\n            fg: color(\"#4b5057\"),\n            /**\n             * @var global.messageColors.warning.bg\n             * @type string\n             * @format hex-color\n             */\n            bg: color(\"#fff1ce\"),\n            /**\n             * @var global.messageColors.warning.state\n             * @type string\n             * @format hex-color\n             */\n            state: color(\"#e55a1c\"),\n        },\n        /**\n         * @varGroup global.messageColors.error\n         * @commonDescription Message - Error\n         */\n        error: {\n            /**\n             * @var global.messageColors.error.fg\n             * @type string\n             * @format hex-color\n             */\n            fg: color(\"#d0021b\"),\n            /**\n             * @var global.messageColors.error.bg\n             * @type string\n             * @format hex-color\n             */\n            bg: color(\"#FFF3D4\"),\n        },\n        /**\n         * @var global.messageColors.confirm\n         * @type string\n         * @format hex-color\n         */\n        confirm: color(\"#60bd68\"),\n        /**\n         * @varGroup global.messageColors.deleted\n         * @commonDescription Message - Deleted\n         */\n        deleted: {\n            /**\n             * @var global.messageColors.deleted.fg\n             * @type string\n             * @format hex-color\n             */\n            fg: color(\"#D0021B\"),\n            /**\n             * @var global.messageColors.deleted.bg\n             * @type string\n             * @format hex-color\n             */\n            bg: color(\"#D0021B\"),\n        },\n    });\n\n    const links = makeThemeVars(\"links\", {\n        /**\n         * @varGroup global.links.colors\n         * @commonTitle Global Link Colors\n         * @expand clickable\n         */\n        colors: {\n            default: mainColors.secondary,\n            hover: undefined,\n            focus: undefined,\n            keyboardFocus: undefined,\n            active: undefined,\n            visited: undefined,\n        },\n    });\n\n    // Generated derived colors from mainColors.\n    // You can set all of them by setting generatedMainColors.stateSecondary\n    // You can set individual states with links.colors[\"your state\"]\n    // Will default to variation of links.colors.default (which is by default the secondary color)\n    Object.keys(links.colors).forEach((state) => {\n        if (state !== \"default\" && state !== \"visited\") {\n            if (!links[state]) {\n                links.colors[state] =\n                    generatedMainColors.stateSecondary ?? ColorsUtils.offsetLightness(links.colors.default, 0.008);\n            }\n        }\n    });\n\n    interface IBody {\n        backgroundImage: IBackground;\n    }\n\n    const body: IBody = makeThemeVars(\"body\", {\n        /**\n         * @varGroup global.body.backgroundImage\n         * @description Background variables for the page.\n         * @expand background\n         */\n        backgroundImage: Variables.background({\n            color: mainColors.bg,\n        }),\n    });\n\n    const border = makeThemeVars(\"border\", {\n        /**\n         * @var global.border.color\n         * @title Border Color\n         * @description Choose the color of the border.\n         * @type string\n         * @format hex-color\n         */\n        color: mixBgAndFg(0.2),\n        /**\n         * @var global.border.width\n         * @title Border Hover Color\n         * @description Choose the hover color of the border.\n         * @type string\n         * @format hex-color\n         */\n        colorHover: mixBgAndFg(0.4),\n        /**\n         * @var global.border.width\n         * @title Border Width\n         * @description Choose the width of the border.\n         * @type number|string\n         */\n        width: 1,\n        /**\n         * @var global.border.style\n         * @title Border Style\n         * @description Choose the style of the border.\n         * @type number|string\n         */\n        style: \"solid\",\n        /**\n         * @var global.border.radius\n         * @title  Border Radius\n         * @description Choose the radius of the border.\n         * @type number|string\n         */\n        radius: 6, // Global default\n    });\n\n    const borderType = makeThemeVars(\"borderType\", {\n        formElements: {\n            default: {\n                ...border,\n                color: mixBgAndFg(0.35).saturate(0.1),\n            },\n            buttons: border,\n        },\n        modals: border,\n        dropDowns: border,\n        contentBox: border,\n    });\n\n    const gutterSize = 16;\n    // @Deprecated - It's confusing that this gutter is 16 and the layout is 48.\n    // TODO: Refactor\n    /**\n     * @varGroup global.gutter\n     * @commonTitle Global - Gutter\n     */\n    const gutter = makeThemeVars(\"gutter\", {\n        /**\n         * @var global.gutter.size\n         */\n        size: gutterSize,\n        /**\n         * @var global.gutter.half\n         */\n        half: gutterSize / 2,\n        /**\n         * @var global.gutter.quater\n         */\n        quarter: gutterSize / 4,\n    });\n\n    /*\n    // The gutter used to be like this:\n    //     size: 16,\n    //     half: 8,\n    //     quarter: 4,\n    //\n    // This was very confusing because the layout uses \"gutter\" as well, but very different values.\n    //\n    // the fractions are not ideal, but it gives the same style as before without having 2 wildly different \"gutter\" sizes\n    //\n    // Mapping:\n    // size -> third\n    // half -> sixth\n    // quarter -> twelfth\n\n    const gutter = {\n        size: constants.fullGutter,\n        half: constants.fullGutter / 2, // 24\n        third: constants.fullGutter / 3, // 16\n        sixth: constants.fullGutter / 6, // 8\n        twelfth: constants.fullGutter / 12, // 4\n    };\n    */\n\n    /**\n     * @varGroup global.lineHeight\n     * @commonTitle Global - Line Height\n     */\n    const lineHeights = makeThemeVars(\"lineHeight\", {\n        /**\n         * @var global.lineHeight.base\n         */\n        base: 1.5,\n        /**\n         * @var global.lineHeight.condensed\n         */\n        condensed: 1.25,\n        /**\n         * @var global.lineHeight.code\n         */\n        code: 1.45,\n        /**\n         * @var global.lineHeight.excerpt\n         */\n        excerpt: 1.4,\n        /**\n         * @var global.lineHeight.meta\n         */\n        meta: 1.5,\n    });\n\n    // Three column\n    // 216 + 40 + 672 + 40 + 216 = 1184 (correct full width of three column layout)\n    // 1184 + 40 = 1224 - padded\n    // 1184 - 343px =  (two column layout)\n    //                                           52 (Extra space) + 244px (Foundation)\n\n    // These globals are here because the layout system was created based on a 3 column layout\n    // These variables are used as a starting off point and as a base, but each layout can define\n    // its own variables. These are the globals from which the rest is calculated.\n    const foundationalWidths = makeThemeVars(\"foundationalWidths\", {\n        panelWidth: 216,\n        middleColumn: 672,\n        minimalMiddleColumnWidth: 550, // Will break if middle column width is smaller than this value.\n        narrowContentWidth: 900, // For home page widgets, narrower than full width\n        breakPoints: {\n            // Other break points are calculated\n            twoColumns: 1200,\n            xs: 500,\n        },\n    });\n\n    const widgetInit = makeThemeVars(\"widget\", {\n        /**\n         * @var global.widget.padding\n         */\n        padding: 10,\n    });\n\n    const widget = makeThemeVars(\"widget\", {\n        ...widgetInit,\n        paddingBothSides: widgetInit.padding * 2,\n    });\n\n    const panelInit = makeThemeVars(\"panel\", {\n        /**\n         * @var global.panel.width\n         */\n        width: foundationalWidths.panelWidth,\n    });\n\n    const panel = makeThemeVars(\"panel\", {\n        ...panelInit,\n        paddedWidth: panelInit.width + widget.paddingBothSides,\n    });\n\n    const middleColumnInit = makeThemeVars(\"middleColumn\", {\n        width: foundationalWidths.middleColumn,\n    });\n\n    const middleColumn = makeThemeVars(\"middleColumn\", {\n        width: middleColumnInit.width,\n        paddedWidth: middleColumnInit.width + widget.paddingBothSides,\n    });\n\n    const contentWidth = middleColumn.paddedWidth + panel.paddedWidth * 2;\n\n    const fontsInit0 = makeThemeVars(\"fonts\", {\n        /**\n         * @varGroup global.fonts.size\n         * @commonDescription Preset global font size\n         */\n        size: {\n            /**\n             * @var global.fonts.size.large\n             */\n            large: 16,\n            /**\n             * @var global.fonts.size.medium\n             */\n            medium: 14,\n            /**\n             * @var global.fonts.size.small\n             */\n            small: 12,\n            /**\n             * @var global.fonts.size.largeTitle\n             */\n            largeTitle: 32,\n            /**\n             * @var global.fonts.size.title\n             */\n            title: 22,\n            /**\n             * @var global.fonts.size.subTitle\n             */\n            subTitle: 18,\n        },\n        sizeWeight: {\n            large: undefined as undefined | number,\n            medium: undefined as undefined | number,\n            small: undefined as undefined | number,\n            largeTitle: undefined as undefined | number,\n            title: undefined as undefined | number,\n            subTitle: undefined as undefined | number,\n        },\n\n        mobile: {\n            /**\n             * @varGroup global.fonts.mobile.size\n             * @commonTitle Global - Mobile\n             */\n            size: {\n                /**\n                 * @var global.mobile.size.title\n                 */\n                title: 26,\n            },\n        },\n        /**\n         * @varGroup global.fonts.weights\n         * @commonDescription Predefined global font weight\n         */\n        weights: {\n            /**\n             * @var global.fonts.weights.normal\n             */\n            normal: 400,\n            /**\n             * @var global.fonts.weights.semiBold\n             */\n            semiBold: 600,\n            /**\n             * @var global.fonts.weights.bold\n             */\n            bold: 700,\n        },\n        googleFontFamily: defaultFontFamily as undefined | string,\n        forceGoogleFont: false,\n        customFontUrl: undefined as undefined | string, // legacy\n        customFont: {\n            name: undefined as undefined | string,\n            url: undefined as undefined | string,\n            fallbacks: [],\n        },\n    });\n\n    const fontsInit1 = makeThemeVars(\"fonts\", {\n        ...fontsInit0,\n        families: {\n            body: [\n                fontsInit0.customFont.name && !fontsInit0.forceGoogleFont\n                    ? fontsInit0.customFont.name\n                    : fontsInit0.googleFontFamily ?? defaultFontFamily,\n                ...fontFallbacks,\n            ],\n            monospace: monoFallbacks,\n        },\n    });\n\n    const isOpenSans = fontsInit1.families.body[0] === defaultFontFamily;\n\n    const fonts = makeThemeVars(\"fonts\", {\n        ...fontsInit1,\n        alignment: {\n            headings: {\n                capitalLetterRatio: isOpenSans ? 0.73 : 0.75, // Calibrated for Open Sans\n                verticalOffset: 1,\n                horizontalOffset: isOpenSans ? -0.03 : 0, // Calibrated for Open Sans\n                verticalOffsetForAdjacentElements: isOpenSans ? \"-.13em\" : \"0em\", // Calibrated for Open Sans\n            },\n        },\n    });\n\n    /**\n     * @varGroup global.icon\n     * @commonDescription Sets size and color of icon\n     */\n    const icon = makeThemeVars(\"icon\", {\n        /**\n         * @varGroup global.icon.sizes\n         * @commonDescription Sets icon size\n         */\n        sizes: {\n            /**\n             * @var global.sizes.large\n             */\n            large: 32,\n            /**\n             * @var global.sizes.default\n             */\n            default: 24,\n            /**\n             * @var global.sizes.small\n             */\n            small: 16,\n            /**\n             * @var global.sizes.xSmall\n             */\n            xSmall: 9.5,\n        },\n        /**\n         * @var global.icon.color\n         * @title Icon - Color\n         * @description Sets the size of the icon\n         * @type string\n         * @format hex-color\n         */\n        color: mixBgAndFg(0.18),\n    });\n\n    const spacer = makeThemeVars(\"spacer\", {\n        /**\n         * @var global.spacer.size\n         * @description Sets the size of the spacing element\n         * @type number\n         */\n        size: fonts.size.medium * lineHeights.base,\n    });\n\n    const animation = makeThemeVars(\"animation\", {\n        defaultTiming: \".10s\",\n        defaultEasing: \"ease-out\",\n    });\n\n    /**\n     * @varGroup global.embed\n     * @commonDescription Global - Embed\n     */\n    const embed = makeThemeVars(\"embed\", {\n        /**\n         * @varGroup global.embed.error\n         * @commonDescription  Embed - Error\n         */\n        error: {\n            /**\n             * @var global.embed.error.bg\n             */\n            bg: messageColors.error,\n        },\n        /**\n         * @varGroup global.embed.focus\n         * @commonDescription  Embed - Focus\n         */\n        focus: {\n            /**\n             * @var global.embed.focus.color\n             */\n            color: mainColors.primary,\n        },\n        /**\n         * @varGroup global.embed.text\n         * @commonDescription  Embed - Text\n         */\n        text: {\n            /**\n             * @var global.embed.text.padding\n             */\n            padding: fonts.size.medium,\n        },\n        /**\n         * @varGroup global.embed.sizing\n         * @commonDescription  Embed - Sizing\n         */\n        sizing: {\n            /**\n             * @var global.embed.text.smallPadding\n             */\n            smallPadding: 4,\n            /**\n             * @var global.embed.text.width\n             */\n            width: 640,\n        },\n        /**\n         * @varGroup global.embed.select\n         * @commonDescription  Embed - Select\n         */\n        select: {\n            /**\n             * @var global.embed.select.borderWidth\n             */\n            borderWidth: 2,\n        },\n        /**\n         * @varGroup global.embed.overlay\n         * @commonDescription  Embed - Overlay\n         */\n        overlay: {\n            /**\n             * @varGroup global.embed.overlay.hover\n             * @commonDescription  Embed - Overlay - Hover\n             */\n            hover: {\n                /**\n                 * @var global.embed.overlay.hover.color\n                 */\n                color: mainColors.bg.fade(0.5),\n            },\n        },\n    });\n\n    /**\n     * @varGroup global.meta\n     * @commonDescription Global meta\n     */\n    const meta = makeThemeVars(\"meta\", {\n        /**\n         * @varGroup global.meta.font\n         * @commonDescription Global meta font\n         * @expand font\n         */\n        text: Variables.font({\n            size: fonts.size.small,\n            color: options.preset === GlobalPreset.LIGHT ? color(\"#767676\") : elementaryColors.white,\n            lineHeight: lineHeights.base,\n        }),\n        /**\n         * @varGroup global.meta.spacing\n         * @commonDescription Global meta spacing\n         */\n        spacing: {\n            /**\n             * @var global.meta.spacing.horizontalMargin\n             */\n            horizontalMargin: 4,\n            /**\n             * @var global.meta.spacing.verticalMargin\n             */\n            verticalMargin: 12,\n            /**\n             * @var global.meta.spacing.default\n             */\n            default: 4,\n        },\n        /**\n         * @varGroup global.meta.colors\n         * @commonDescription Global meta colors\n         */\n        colors: {\n            /**\n             * @var global.meta.colors.fg\n             */\n            fg: mixBgAndFg(0.85),\n        },\n        /**\n         * @var global.meta.display\n         */\n        display: \"block\",\n    });\n\n    const states = makeThemeVars(\"states\", {\n        icon: {\n            opacity: 0.6,\n        },\n        text: {\n            opacity: 0.75,\n        },\n        hover: {\n            highlight: links.colors.default.fade(constants.states.hover.bgEmphasis),\n            contrast: undefined,\n            opacity: 1.0,\n        },\n        selected: {\n            highlight: links.colors.default.fade(constants.states.selected.bgEmphasis),\n            contrast: undefined,\n            opacity: 1,\n        },\n        active: {\n            highlight: links.colors.default.fade(constants.states.active.bgEmphasis),\n            contrast: undefined,\n            opacity: 1,\n        },\n        focus: {\n            highlight: links.colors.default.fade(constants.states.focus.bgEmphasis),\n            contrast: undefined,\n            opacity: 1,\n        },\n    });\n\n    const overlayBg = ColorsUtils.modifyColorBasedOnLightness({ color: mainColors.fg, weight: 0.5 });\n\n    /**\n     * @varGroup global.overlay\n     * @commonDescription Global - OverLay\n     */\n    const overlay = makeThemeVars(\"overlay\", {\n        /**\n         * @var global.overlay.dropShadow\n         */\n        dropShadow: `2px -2px 5px ${ColorsUtils.colorOut(overlayBg.fade(0.3))}`,\n        /**\n         * @var global.overlay.bg\n         */\n        bg: overlayBg,\n        /**\n         * @varGroup global.overlay.border\n         * @expand border\n         */\n        border: {\n            color: border.color,\n            radius: border.radius,\n        },\n        /**\n         * @var global.overlay.fullPageHeadingSpacer\n         */\n        fullPageHeadingSpacer: 32,\n        /**\n         * @var global.overlay.spacer\n         */\n        spacer: 32,\n    });\n\n    const userContent = makeThemeVars(\"userContent\", {\n        font: {\n            sizes: {\n                default: fonts.size.medium,\n                h1: \"2em\",\n                h2: \"1.5em\",\n                h3: \"1.25em\",\n                h4: \"1em\",\n                h5: \".875em\",\n                h6: \".85em\",\n            },\n        },\n        list: {\n            margin: \"2em\",\n            listDecoration: {\n                minWidth: \"2em\",\n            },\n        },\n    });\n\n    const buttonIconSize = 36;\n\n    /**\n     * @varGroup global.buttonIcon\n     * @commonDescription Controls icon in button\n     */\n    const buttonIcon = makeThemeVars(\"buttonIcon\", {\n        /**\n         * @var  global.buttonIcon.size\n         * @type number\n         */\n        size: buttonIconSize,\n        /**\n         * @var  global.buttonIcon.offset\n         * @type number\n         */\n        offset: (buttonIconSize - icon.sizes.default) / 2,\n    });\n\n    // Sets global \"style\" for buttons. Use \"ButtonPreset\" enum to select. By default we use both \"bordered\" (default) and \"solid\" (primary) button styles\n    // The other button styles are all \"advanced\" and need to be overwritten manually because they can't really be converted without completely changing\n    // the style of them.\n    const buttonPreset = makeThemeVars(\"buttonPreset\", {\n        style: undefined as ButtonPreset | undefined,\n    });\n\n    /**\n     * @varGroup global.separator\n     * @commonDescription Sets color and size of separator\n     */\n    const separator = makeThemeVars(\"separator\", {\n        /**\n         * @var global.separator.color\n         * @type string\n         * @format hex-color\n         */\n        color: border.color,\n        /**\n         * @var global.separator.size\n         * @type number\n         */\n        size: 1,\n    });\n\n    // https://medium.com/@clagnut/all-you-need-to-know-about-hyphenation-in-css-2baee2d89179\n    // Requires language set on <html> tag\n    const userContentHyphenation = makeThemeVars(\"userContentHyphenation\", {\n        minimumCharactersToHyphenate: 6,\n        minimumCharactersBeforeBreak: 3,\n        minimumCharactersAfterBreak: 3,\n        maximumConsecutiveBrokenLines: 2,\n        avoidLastWordToBeBroken: true,\n        hyphenationZone: \"6em\",\n    });\n\n    // This function should not be used in production, but is helpful for development.\n    // Helps to find the right \"mix\" of bg and fg for a target hex color\n\n    const findColorMatch = (hexCode: string) => {\n        if (process.env.NODE_ENV === \"development\") {\n            logWarning(\"Don't use 'findColorMatch' in production\");\n            const globalVars = globalVariables();\n            const colorToMatch = color(hexCode.replace(\"#\", \"\"));\n            const max = 100;\n            const lightnessPrecision = 3;\n            const targetLightness = colorToMatch.lightness().toFixed(lightnessPrecision);\n            for (let i = 0; i <= max; i++) {\n                const mix = i / max;\n                const currentColor = globalVars.mixBgAndFg(mix);\n                if (currentColor.toHexString() === colorToMatch.toHexString()) {\n                    logDebug(\"---exact match\");\n                    logDebug(\"real grey: \" + colorToMatch.toHexString());\n                    logDebug(\"target grey: \" + currentColor.toHexString());\n                    logDebug(\"mix: \" + mix);\n                    logDebug(\"---\");\n                    i = max;\n                    return;\n                }\n                if (currentColor.lightness().toFixed(lightnessPrecision) === targetLightness) {\n                    logDebug(\"---lightness match: \" + mix);\n                    i = max;\n                    return;\n                }\n            }\n        } else if (process.env.NODE_ENV === \"test\") {\n            throw new Error(\"Don't use 'findColorMatch' in production\");\n        }\n        logError(\"The function 'findColorMatch' is not meant for production\");\n    };\n\n    /**\n     * @varGroup global.contentBoxes\n     * @description Global content box preset that will apply to every page.\n     * Some pages may have their own that will need to modified separately.\n     * @expand contentBoxes\n     */\n    const contentBoxes = makeThemeVars(\n        \"contentBoxes\",\n        Variables.contentBoxes({\n            depth1: {\n                borderType: BorderType.NONE,\n            },\n            depth2: {\n                borderType: BorderType.SEPARATOR,\n            },\n            depth3: {\n                borderType: BorderType.SEPARATOR,\n            },\n        }),\n    );\n\n    /**\n     * @varGroup global.headingBox\n     * @description Heading boxes sit above every box.\n     * They can have titles, subtitles, descriptions, and sometimes action items in them.\n     */\n    const headingBox = makeThemeVars(\"headingBox\", {\n        /**\n         * @varGroup global.headingBox.spacing\n         * @expand spacing\n         */\n        spacing: Variables.spacing({\n            top: 24,\n            bottom: 8,\n            horizontal: 0,\n        }),\n        /**\n         * @varGroup global.headingBox.mobileSpacing\n         * @expand spacing\n         */\n        mobileSpacing: Variables.spacing({\n            top: 28,\n            bottom: 16,\n            horizontal: 0,\n        }),\n        /**\n         * @varGroup global.headingBox.descriptionSpacing\n         * @expand spacing\n         */\n        descriptionSpacing: Variables.spacing({\n            top: 8,\n            bottom: 0,\n            horizontal: 0,\n        }),\n    });\n\n    const itemList = makeThemeVars(\"itemList\", {\n        /**\n         * @varGroup global.itemList\n         * @commonTitle Global - Item List\n         * @expand spacing\n         */\n        padding: Variables.spacing({\n            top: 15,\n            right: widget.padding,\n            bottom: 16,\n            left: widget.padding,\n        }),\n    });\n\n    return {\n        options,\n        elementaryColors,\n        mainColors,\n        messageColors,\n        body,\n        borderType,\n        border,\n        meta,\n        gutter,\n        panel,\n        middleColumn,\n        contentWidth,\n        fonts,\n        spacer,\n        lineHeights,\n        icon,\n        buttonIcon,\n        animation,\n        links,\n        embed,\n        states,\n        overlay,\n        userContent,\n        mixBgAndFg,\n        mixPrimaryAndFg,\n        mixPrimaryAndBg,\n        separator,\n        userContentHyphenation,\n        findColorMatch,\n        constants,\n        getRatioBasedOnBackgroundDarkness,\n        buttonPreset,\n        foundationalWidths,\n        widget,\n        headingBox,\n        itemList,\n        contentBoxes,\n    };\n});\n","import getStore from \"@library/redux/getStore\";\nimport { getMeta } from \"@library/utility/appUtils\";\nimport memoize from \"lodash/memoize\";\nimport { hashString } from \"@vanilla/utils\";\nimport { useEffect, useState } from \"react\";\n\n// A unique identifier that represents the current state of the theme.\nlet _themeCacheID = hashString(Math.random().toString());\n// Event name for resetting the theme cacheID.\n\nexport const THEME_CACHE_EVENT = \"V-Clear-Theme-Cache\";\n\nexport function resetThemeCache() {\n    _themeCacheID = hashString(Math.random().toString());\n    document.dispatchEvent(new CustomEvent(THEME_CACHE_EVENT, { detail: _themeCacheID }));\n    return _themeCacheID;\n}\n\nexport function useThemeCacheID() {\n    const [cacheID, setCacheID] = useState(_themeCacheID);\n    useEffect(() => {\n        const listener = (e: CustomEvent) => {\n            setCacheID(e.detail);\n        };\n        document.addEventListener(THEME_CACHE_EVENT, listener);\n\n        return () => {\n            document.removeEventListener(THEME_CACHE_EVENT, listener);\n        };\n    });\n\n    return { cacheID, resetThemeCache };\n}\n/**\n * Wrap a callback so that it will only run once with a particular set of global theme variables.\n *\n * @param callback The function to wrap.\n */\n\nexport function useThemeCache<Cb>(callback: Cb): Cb {\n    const makeCacheKey = (...args) => {\n        const storeState = getStore().getState();\n        const themeKey = getMeta(\"ui.themeKey\", \"default\");\n        const status = storeState.theme.assets.status;\n        const cacheKey = themeKey + status + _themeCacheID;\n        const result = cacheKey + JSON.stringify(args);\n        return result;\n    };\n    return memoize(callback as any, makeCacheKey);\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { CSSObject } from \"@emotion/css\";\nimport { style } from \"@library/styles/styleShim\";\nimport merge from \"lodash/merge\";\nimport { color, rgba, rgb, hsla, hsl, ColorHelper } from \"csx\";\nimport { logDebug, logWarning, logError, notEmpty } from \"@vanilla/utils\";\nimport { getThemeVariables } from \"@library/theming/getThemeVariables\";\nimport { isArray } from \"util\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\n\n// Re-export for compatibility.\nexport { useThemeCache } from \"@library/styles/themeCache\";\n\nexport const DEBUG_STYLES = Symbol.for(\"Debug\");\n\n// Use this type to allow people to to pass conditional styles in.\ntype CSSObjectOrFalsy = CSSObject | null | false | undefined;\n\n/**\n * A better helper to generate human readable classes generated from Emotion.\n *\n * This works like debugHelper but automatically. The generated function behaves just like `style()`\n * but can automatically adds a debug name & allows the first argument to be a string subcomponent name.\n *\n * Additionally passing the first parameter as true will log out out debug information about the styles.\n *\n * @example\n * const style = styleFactory(\"myComponent\");\n * const myClass = style({ color: \"red\" }); // .myComponent-sad421s\n * const mySubClass = style(\"subcomponent\", { color: \"red\" }) // .myComponent-subcomponent-23sdaf43\n * const withDebugMode = style(true, \"subcomponent\", {color: \"red\"}).\n */\nexport function styleFactory(componentName: string) {\n    function styleCreator(subcomponentName: string, ...objects: CSSObjectOrFalsy[]): string;\n    function styleCreator(debug: symbol, subcomponentName: string, ...objects: CSSObjectOrFalsy[]): string;\n    function styleCreator(...objects: CSSObjectOrFalsy[]): string;\n    function styleCreator(...objects: Array<CSSObjectOrFalsy | string | symbol>): string {\n        objects = objects.filter((val) => !!val);\n        if (objects.length === 0) {\n            return style();\n        }\n        let debugName = componentName;\n        let shouldLogDebug = false;\n        let styleObjs: CSSObject[] = objects as any;\n        if (objects[0] === DEBUG_STYLES) {\n            styleObjs.shift();\n            shouldLogDebug = true;\n        }\n        if (typeof objects[0] === \"string\") {\n            const [subcomponentName, ...restObjects] = styleObjs;\n            debugName += `-${subcomponentName}`;\n            styleObjs = restObjects;\n        }\n\n        styleObjs.forEach((obj) => (obj[\"label\"] = debugName));\n\n        if (shouldLogDebug) {\n            logWarning(`Debugging component ${debugName}`);\n            logDebug(styleObjs);\n        }\n\n        return style(...styleObjs);\n    }\n\n    return styleCreator;\n}\n\n/**\n * A helper class for declaring variables while mixing server defined variables from context.\n *\n * The function returned from the factory\n * - will search the API based theme for an item of the same key.\n * - Normalize the items {@see normalizeVariables}\n * - Merge in all subtrees. (theme variables override your defaults).\n *\n * @param componentName The base name of the component being styled.\n * @param themeVars Optionally force a particular set of variables to be used.\n *\n * @example\n *\n * // The stuff returned through the API response\n * const serverVars = {\n *      \"globalVars\": {\n *          \"links\": {\n *              \"colors\": {\n *                  \"default\": \"red\",\n *                  \"hover\": \"#444444\",\n *              }\n *          }\n *      }\n * };\n *\n * // Your declaration\n * const makeThemeVars = variableFactory(\"globalVars\");\n * const subVars = makeThemeVars(\"links\", { colors: {\n *      default: mainColors.primary, // These are `ColorHelpers`\n *      hover: mainColors.primary.darken(0.2), // They mixed variables will be automatically converted\n * }});\n */\nexport function variableFactory(\n    componentNames: string | string[],\n    themeVars?: IThemeVariables,\n    mergeWithGlobals = false,\n) {\n    if (!themeVars) {\n        themeVars = getThemeVariables();\n    } else if (mergeWithGlobals) {\n        themeVars = merge(getThemeVariables(), themeVars);\n    }\n\n    componentNames = typeof componentNames === \"string\" ? [componentNames] : componentNames;\n\n    const componentThemeVars = componentNames\n        .map((name) => themeVars?.[name] ?? {})\n        .reduce((prev, curr) => {\n            return merge(prev, curr);\n        }, {});\n\n    return function makeThemeVars<T extends object>(subElementName: string, declaredVars: T, overrides?: any): T {\n        const customVars = componentThemeVars?.[subElementName] ?? null;\n        let result = declaredVars;\n        if (customVars != null) {\n            result = normalizeVariables(customVars, result);\n        }\n\n        if (overrides != null) {\n            result = normalizeVariables(stripUndefinedKeys(overrides), result);\n        }\n        return result;\n    };\n}\n\nfunction stripUndefinedKeys(obj: any) {\n    if (typeof obj === \"object\") {\n        const newObj = {};\n        for (const [key, value] of Object.entries(obj)) {\n            if (value !== undefined) {\n                newObj[key] = value;\n            }\n        }\n        return newObj;\n    }\n\n    return obj;\n}\n\nconst rgbRegex = /^rgb\\((\\d{1,3}%?),\\s*(\\d{1,3}%?),\\s*(\\d{1,3}%?)\\)$/;\nconst rgbaRegex = /^rgba\\((\\d{1,3}%?),\\s*(\\d{1,3}%?),\\s*(\\d{1,3}%?),\\s*(\\d*(?:\\.\\d+)?)\\)$/;\nconst hslRegex = /^hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)$/;\nconst hslaRegex = /^hsla\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%,\\s*(\\d*(?:\\.\\d+)?)\\)/;\nconst hexRegex = /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;\n\n/**\n * Take some Object/Value from the variable factory and wrap it in it's proper wrapper.\n *\n * Iterates through all children and does the following:\n *\n * - Strings starting with `#` get wrapped in `color()`;\n */\nfunction normalizeVariables(customVariable: any, defaultVariable: any) {\n    try {\n        if (Array.isArray(customVariable) && isArray(defaultVariable)) {\n            // We currently can't pre-process arrays.\n            return customVariable;\n        }\n        if (\n            defaultVariable instanceof ColorHelper ||\n            (defaultVariable === undefined && typeof customVariable === \"string\" && customVariable.startsWith(\"#\"))\n        ) {\n            if (customVariable instanceof ColorHelper) {\n                return customVariable;\n            } else if (typeof customVariable === \"string\" && customVariable.startsWith(\"linear-gradient\")) {\n                return customVariable;\n            } else {\n                const color = colorStringToInstance(customVariable, defaultVariable instanceof ColorHelper);\n                return color;\n            }\n        } else if (\n            typeof customVariable === \"object\" &&\n            typeof defaultVariable === \"object\" &&\n            defaultVariable !== null\n        ) {\n            const newObj: any = {};\n            for (const [key, defaultValue] of Object.entries(defaultVariable)) {\n                const mergedValue = key in customVariable ? customVariable[key] : defaultValue;\n                newObj[key] = normalizeVariables(mergedValue, defaultValue);\n            }\n            return newObj;\n        } else {\n            return customVariable;\n        }\n    } catch (e) {\n        logError(\"Error while evaluation custom variable\", customVariable, e);\n        return defaultVariable;\n    }\n}\n\n/**\n * Check if string is valid color in hex format\n * @param colorString\n */\nexport function stringIsHexColor(colorValue) {\n    return typeof colorValue === \"string\" && colorValue.match(hexRegex);\n}\n\n/**\n * Check if string is valid color in rgb format\n * @param colorString\n */\nexport function stringIsRgbColor(colorValue) {\n    return typeof colorValue === \"string\" && colorValue.match(rgbRegex);\n}\n\n/**\n * Check if string is valid color in rgba format\n * @param colorString\n */\nexport function stringIsRgbaColor(colorValue) {\n    return typeof colorValue === \"string\" && colorValue.match(rgbaRegex);\n}\n\n/**\n * Check if string is valid color in hsl format\n * @param colorString\n */\nexport function stringIsHslColor(colorValue) {\n    return typeof colorValue === \"string\" && colorValue.match(hslRegex);\n}\n\n/**\n * Check if string is valid color in hsla format\n * @param colorString\n */\nexport function stringIsHslaColor(colorValue) {\n    return typeof colorValue === \"string\" && colorValue.match(hslaRegex);\n}\n\n/**\n * Check if string is supported color format\n * @param colorString\n */\nexport function stringIsValidColor(colorValue) {\n    return (\n        typeof colorValue === \"string\" &&\n        (stringIsRgbColor(colorValue) ||\n            stringIsHexColor(colorValue) ||\n            stringIsHslColor(colorValue) ||\n            stringIsHslaColor(colorValue) ||\n            stringIsRgbaColor(colorValue))\n    );\n}\n/**\n * Check if string is linear gradient\n * @param colorString\n */\nexport function stringIsLinearGradient(colorValue) {\n    return (\n        typeof colorValue === \"string\" &&\n        !stringIsValidColor(colorValue) &&\n        colorValue.toString().trim().startsWith(\"linear-gradient(\")\n    );\n}\n\n/**\n * Check if string or ColorHelper is valid\n * @param colorString\n */\nexport const isValidColor = (colorValue) => {\n    return colorValue && (colorValue instanceof ColorHelper || stringIsValidColor(colorValue));\n};\n\n/**\n * Takes either a custome error message string or a boolean, true gives default message\n * @param error\n * @param defaultMessage\n */\nexport const getDefaultOrCustomErrorMessage = (error, defaultMessage: string) => {\n    return typeof error === \"string\" ? error : defaultMessage;\n};\n\n/**\n * Convert a color string into an instance.\n * @param colorString\n */\nexport function colorStringToInstance(colorString: string, throwOnFailure: boolean = false) {\n    if (stringIsHexColor(colorString)) {\n        // It's a colour.\n        return color(colorString);\n    } else if (stringIsRgbColor(colorString)) {\n        const result = rgbRegex.exec(colorString)!;\n\n        const r = parseInt(result[1], 10);\n        const g = parseInt(result[2], 10);\n        const b = parseInt(result[3], 10);\n        return rgb(r, g, b);\n    } else if (stringIsRgbaColor(colorString)) {\n        const result = rgbaRegex.exec(colorString)!;\n\n        const r = parseInt(result[1], 10);\n        const g = parseInt(result[2], 10);\n        const b = parseInt(result[3], 10);\n        const a = parseFloat(result[4]);\n\n        return rgba(r, g, b, a);\n    } else if (stringIsHslColor(colorString)) {\n        const result = hslRegex.exec(colorString)!;\n\n        const h = parseInt(result[1], 10);\n        const s = parseInt(result[2], 10);\n        const l = parseInt(result[3], 10);\n        return hsl(h, s, l);\n    } else if (stringIsHslaColor(colorString)) {\n        const result = hslaRegex.exec(colorString)!;\n\n        const h = parseInt(result[1], 10);\n        const s = parseInt(result[2], 10);\n        const l = parseInt(result[3], 10);\n        const a = parseFloat(result[4]);\n\n        return hsla(h, s, l, a);\n    } else {\n        if (throwOnFailure) {\n            throw new Error(`Invalid color detected: ${colorString}`);\n        }\n\n        return colorString;\n    }\n}\n\n/**\n * Helper to overwrite styles\n * @param theme - The theme overwrites.\n * @param componentName - The name of the component to overwrite\n *\n * @deprecated\n */\nexport const componentThemeVariables = (componentName: string) => {\n    const themeVars = getThemeVariables();\n    const componentVars = (themeVars && themeVars[componentName]) || {};\n\n    const subComponentStyles = (subElementName: string): object => {\n        return (componentVars && componentVars[subElementName]) || {};\n    };\n\n    return {\n        subComponentStyles,\n    };\n};\n\n/**\n * Print a set of variables for debugging.\n */\nexport function printDebugVars(vars: any) {\n    logDebug(JSON.stringify(getDebugVars(vars)));\n}\n\nfunction getDebugVars(vars: any): any {\n    let result = {} as any;\n\n    for (const [key, value] of Object.entries(vars)) {\n        if (value instanceof ColorHelper) {\n            result[key] =\n                value.opacity() < 1\n                    ? `rgba(${value\n                          .toRGBA()\n                          .red()}, ${value.toRGBA().green()}, ${value.toRGBA().blue()}, ${value.toRGBA().alpha()})`\n                    : value.toHexString();\n        } else if (typeof value === \"object\" && value) {\n            result[key] = getDebugVars(value);\n        } else {\n            result[key] = value;\n        }\n    }\n\n    return result;\n}\n\n/**\n * For classes that allow overwriting variables, it can be difficult to trace where bugs come from.\n * This function appends a string to the class name with the file it's from.\n * Example: You've got a class: \"searchBar-closeButton_fhrk8tj\"\n * If you pass a source to this function, the classnames becomes: \"searchBar-closeButton:fromTitleBar_fhrk8tj\"\n */\nexport function appendSource(className: string, source?: string) {\n    return `${className}${source ? \"--\" + source : \"\"}`;\n}\n\nexport function getPixelNumber(val: string | number | undefined, fallback: number = 0): number {\n    if (val == undefined) {\n        return fallback;\n    }\n    if (typeof val === \"number\") {\n        return val;\n    } else {\n        val = val.replace(\"px\", \"\");\n        const parsed = Number.parseInt(val);\n        if (Number.isNaN(parsed)) {\n            return fallback;\n        } else {\n            return parsed;\n        }\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { AxiosError, AxiosResponse } from \"axios\";\nimport { IUserFragment } from \"@library/@types/api/users\";\nimport { RecordID } from \"@vanilla/utils\";\n\nexport enum LoadStatus {\n    PENDING = \"PENDING\",\n    LOADING = \"LOADING\",\n    SUCCESS = \"SUCCESS\",\n    ERROR = \"ERROR\",\n}\n\nexport interface ILoadable<T, E = IApiError> {\n    status: LoadStatus;\n    error?: E;\n    data?: T;\n}\n\nexport interface IApiResponse<DataType = any> {\n    data: DataType;\n    status: number;\n    headers?: any;\n}\n\nexport interface IFieldError {\n    message: string; // translated message\n    code: string; // translation code\n    field: string;\n    status?: number; // HTTP status\n}\n\nexport interface IServerError {\n    message: string;\n    status: number;\n    errors?: {\n        [key: string]: IFieldError[];\n    };\n}\n\nexport interface IApiError extends AxiosError {\n    response: AxiosResponse<IServerError | null>;\n}\n\ninterface IMultiType<T> {\n    recordType: T;\n    recordID: number;\n}\n\nexport type MultiTypeRecord<T, Subtract extends keyof T, TypeName extends string> = Omit<T, Subtract> &\n    IMultiType<TypeName>;\n\nexport interface INavigationItem {\n    name: string;\n    url: string;\n    parentID: RecordID;\n    recordID: RecordID;\n    sort: number | null;\n    recordType: string;\n    isLink?: boolean;\n}\n\nexport interface IApiDateInfo {\n    insertUserID: number;\n    insertDate: string;\n    updateUserID: number;\n    updateDate: string;\n}\n\nexport interface IApiDateInfoExpanded extends IApiDateInfo {\n    insertUser: IUserFragment;\n    updateUser: IUserFragment;\n}\n\nexport interface INavigationTreeItem extends INavigationItem {\n    children: INavigationTreeItem[];\n}\n\nexport interface ILinkGroup {\n    category: INavigationItem;\n    items: INavigationItem[];\n}\n\nexport interface ILinkListData {\n    groups: ILinkGroup[];\n    ungroupedItems: INavigationItem[];\n}\n\nexport enum PublishStatus {\n    DELETED = \"deleted\",\n    UNDELETED = \"undeleted\",\n    PUBLISHED = \"published\",\n}\n\nexport enum Format {\n    TEXT = \"text\",\n    TEXTEX = \"textex\",\n    MARKDOWN = \"markdown\",\n    WYSIWYG = \"wysiwyg\",\n    HTML = \"html\",\n    BBCODE = \"bbcode\",\n    RICH = \"rich\",\n}\n","export enum ButtonTypes {\n    STANDARD = \"standard\",\n    PRIMARY = \"primary\",\n    TRANSPARENT = \"transparent\",\n    TRANSLUCID = \"translucid\",\n    CUSTOM = \"custom\",\n    RESET = \"reset\",\n    RADIO = \"radioAsButton\",\n    TEXT = \"text\",\n    TEXT_PRIMARY = \"textPrimary\",\n    ICON = \"icon\",\n    ICON_COMPACT = \"iconCompact\",\n    TITLEBAR_LINK = \"titleBarLink\",\n    DASHBOARD_STANDARD = \"dashboardStandard\",\n    DASHBOARD_PRIMARY = \"dashboardPrimary\",\n    DASHBOARD_SECONDARY = \"dashboardSecondary\",\n    DASHBOARD_LINK = \"dashboardLink\",\n    NOT_STANDARD = \"notStandard\",\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport {\n    EMPTY_BACKGROUND,\n    EMPTY_BORDER,\n    EMPTY_FONTS,\n    EMPTY_SPACING,\n    EMPTY_STATE_COLORS,\n    IBackground,\n    IBorderStyles,\n    IBoxOptions,\n    IFont,\n    IContentBoxes,\n    ISpacing,\n    IStateColors,\n} from \"@library/styles/cssUtilsTypes\";\nimport { BorderType } from \"@library/styles/styleHelpers\";\nimport { DeepPartial } from \"redux\";\n\nexport class Variables {\n    constructor() {\n        throw new Error(\"Not to be instantiated\");\n    }\n\n    static spacing = (vars: ISpacing): ISpacing => ({ ...EMPTY_SPACING, ...vars });\n\n    static font = (vars: IFont): IFont => ({ ...EMPTY_FONTS, ...vars });\n\n    static border = (vars: Partial<IBorderStyles>): Partial<IBorderStyles> => ({ ...EMPTY_BORDER, ...vars });\n\n    static background = (vars: IBackground): IBackground => ({ ...EMPTY_BACKGROUND, ...vars });\n\n    static clickable = (vars: IStateColors): IStateColors => ({ ...EMPTY_STATE_COLORS, ...vars });\n\n    static box = (vars: Partial<IBoxOptions>): IBoxOptions => {\n        return {\n            borderType: BorderType.NONE,\n            background: Variables.background(vars.background ?? {}),\n            spacing: Variables.spacing(vars.spacing ?? {}),\n            border: Variables.border(vars.border ?? {}),\n            itemSpacing: vars.itemSpacing ? vars.itemSpacing : 0,\n            itemSpacingOnAllItems: vars.itemSpacingOnAllItems ?? false,\n            ...vars,\n        };\n    };\n\n    static contentBoxes = (vars?: DeepPartial<IContentBoxes>): IContentBoxes => {\n        return {\n            depth1: Variables.box(vars?.depth1 ?? {}),\n            depth2: Variables.box(vars?.depth2 ?? {}),\n            depth3: Variables.box(vars?.depth3 ?? {}),\n        };\n    };\n}\n","import createEmotion from \"@emotion/css/create-instance\";\nimport { CSSObject } from \"@emotion/css\";\n\nconst emotion = createEmotion({\n    key: \"vanilla\",\n    prepend: false,\n});\n\nexport const { keyframes, cx, injectGlobal: cssRaw, css: style } = emotion;\n\nexport declare type TLength = number | string; // a few files are stil coupled to this type from typestyle\n\ntype NestCssObject = CSSObject & { $nest?: NestCssObject };\n\n/**\n * Flatten $nest properties from typestyle declarations to be compatible with emotion.\n */\nexport function flattenNests(original?: NestCssObject) {\n    if (!original?.$nest) {\n        return original;\n    }\n\n    for (const [key, value] of Object.entries(original.$nest)) {\n        original[key] = flattenNests(value as NestCssObject);\n    }\n    delete original.$nest;\n    return original;\n}\n\nexport function cssRule(selector: string, ...objects: CSSObject[]): void {\n    objects.forEach((object) => {\n        emotion.injectGlobal({\n            [selector]: flattenNests(object),\n        });\n    });\n}\ninterface IMediaQuery {\n    minWidth?: number;\n    maxWidth?: number;\n}\n\n//  adapted from typestyle // emotion doesn't have an equivalent function to typestyle.media.\nexport const media = (mediaQuery: IMediaQuery, ...objects: CSSObject[]): CSSObject => {\n    const mediaQuerySections: string[] = [];\n    if (mediaQuery.minWidth) mediaQuerySections.push(`(min-width: ${mediaQuery.minWidth}px)`);\n    if (mediaQuery.maxWidth) mediaQuerySections.push(`(max-width: ${mediaQuery.maxWidth}px)`);\n\n    const stringMediaQuery = `@media ${mediaQuerySections.join(\" and \")}`;\n\n    const object: CSSObject = {\n        [stringMediaQuery]: objects,\n    };\n    return object;\n};\n","/*\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { ColorHelper, important, scale } from \"csx\";\nimport { pointerEvents } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { FillProperty, OpacityProperty, StrokeProperty, StrokeWidthProperty } from \"csstype\";\nimport { TLength } from \"@library/styles/styleShim\";\n\ninterface IPathState {\n    stroke?: ColorHelper | StrokeProperty;\n    fill?: ColorHelper | FillProperty;\n    opacity?: OpacityProperty;\n    strokeWidth?: StrokeWidthProperty<TLength>;\n}\n\ninterface INestedPathState extends IPathState {\n    state?: IPathState;\n}\n\ninterface IBookmarkLoading extends INestedPathState {\n    halfFill?: ColorHelper | string;\n}\n\nexport interface IBookmarkProps {\n    normalState: INestedPathState | undefined;\n    loadingState: IBookmarkLoading | undefined;\n    bookmarkedState: INestedPathState | undefined;\n}\n\nexport const svgStyles = (props: INestedPathState | undefined, debug?: boolean) => {\n    if (props === undefined) {\n        return {};\n    }\n    let stroke = props.stroke;\n    if (stroke !== \"none\") {\n        stroke = props.stroke ? ColorsUtils.colorOut(props.stroke) : props.stroke;\n    }\n\n    let fill = props.fill;\n    if (fill !== \"none\") {\n        fill = props.fill ? ColorsUtils.colorOut(props.fill) : props.fill;\n    }\n\n    return {\n        stroke: stroke,\n        fill: fill,\n        strokeWidth: props.strokeWidth ? styleUnit(props.strokeWidth) : undefined,\n        opacity: props.opacity,\n    };\n};\n\nexport const iconVariables = useThemeCache(() => {\n    const themeVars = variableFactory(\"defaultIconSizes\");\n\n    const standard = themeVars(\"defaultIcon\", {\n        width: 24,\n        height: 24,\n    });\n\n    const fileType = themeVars(\"defaultIcon\", {\n        width: 16,\n        height: 16,\n    });\n\n    const newFolder = themeVars(\"newFolderIcon\", {\n        width: 17,\n        height: 14.67,\n    });\n\n    const attachmentError = themeVars(\"attachmentError\", {\n        width: 20,\n        height: 18,\n    });\n\n    const vanillaLogo = themeVars(\"vanillaLogo\", {\n        width: 80,\n        height: 32.3,\n        mobile: {\n            width: undefined,\n            height: undefined,\n        },\n    });\n\n    const compact = themeVars(\"compact\", {\n        width: 12,\n        height: 12,\n    });\n\n    const warning = themeVars(\"warning\", {\n        width: 16,\n        height: 16,\n    });\n\n    const settings = themeVars(\"settings\", {\n        width: 20,\n        height: 18,\n    });\n\n    const search = themeVars(\"settings\", {\n        width: 18,\n        height: 20,\n    });\n\n    const notifications = themeVars(\"settings\", {\n        width: 18,\n        height: 20,\n    });\n\n    const messages = themeVars(\"messages\", {\n        width: 20.051,\n        height: 14.016,\n    });\n\n    const user = themeVars(\"user\", {\n        width: 20,\n        height: 20,\n    });\n\n    const userWarning = themeVars(\"userWarning\", {\n        width: 40,\n        height: 40,\n    });\n\n    const close = themeVars(\"close\", {\n        width: 20,\n        height: 20,\n    });\n\n    const closeCompact = themeVars(\"closeCompact\", {\n        width: 16,\n        height: 16,\n    });\n\n    const closeTiny = themeVars(\"closeTiny\", {\n        width: 10,\n        height: 10,\n    });\n\n    const chevronLeftCompact = (isSmall?: boolean) => {\n        const defaultWidth = 12;\n        const defaultHeight = 21;\n        const smallHeight = 16; // width is calculated\n\n        const width = !isSmall ? defaultWidth : (smallHeight * defaultWidth) / defaultHeight;\n        const height = !isSmall ? defaultHeight : smallHeight;\n\n        return themeVars(\"chevronLeftCompact\", {\n            width: width,\n            height: height,\n        });\n    };\n\n    const selectedCategory = themeVars(\"selectedCategory\", {\n        width: 16.8,\n        height: 13,\n    });\n\n    const signIn = themeVars(\"signIn\", {\n        width: 24,\n        height: 18,\n    });\n\n    const chevronUp = themeVars(\"selectedCategory\", {\n        width: 51,\n        height: 17,\n    });\n\n    const plusCircle = themeVars(\"plusCircle\", {\n        width: 16,\n        height: 16,\n    });\n\n    const deleteIcon = themeVars(\"deleteIcon\", {\n        width: 24,\n        height: 24,\n    });\n\n    const editIcon = themeVars(\"editIcon\", {\n        width: 24,\n        height: 24,\n    });\n\n    const categoryIcon = themeVars(\"categoryIcon\", {\n        width: 18,\n        height: 18,\n        opacity: 0.8,\n    });\n\n    const documentation = themeVars(\"documentation\", {\n        width: 12.6,\n        height: 16.02,\n    });\n\n    const bookmarkIcon = themeVars(\"bookmarkIcon\", {\n        width: 12,\n        height: 16,\n        strokeWidth: 1,\n    });\n\n    const newPostMenuIcon = themeVars(\"newPostMenuIcon\", {\n        width: 16,\n        height: 16,\n    });\n\n    // Search Types\n    const typeAll = themeVars(\"typeAll\", {\n        width: 13,\n        height: 13,\n    });\n    const typeDiscussions = themeVars(\"typeDiscussions\", {\n        width: 18.869,\n        height: 15.804,\n    });\n    const typeArticles = themeVars(\"typeArticles\", {\n        width: 14.666,\n        height: 14.666,\n    });\n    const typeCategoriesAndGroups = themeVars(\"TypeCategoriesAndGroups\", {\n        width: 15,\n        height: 16.28,\n    });\n\n    const typePlaces = themeVars(\"TypePlaces\", {\n        width: 15 * 1.2,\n        height: 16.28 * 1.2,\n    });\n\n    const typeFlag = themeVars(\"TypeFlag\", {\n        width: 26,\n        height: 26,\n    });\n\n    const typeMember = themeVars(\"TypeMember\", {\n        width: 20,\n        height: 20,\n    });\n\n    const typeIdeasIcon = themeVars(\"TypeIdeasIcon\", {\n        width: 18.444,\n        height: 16.791,\n    });\n    const typePollsIcon = themeVars(\"TypePollsIcon\", {\n        width: 26,\n        height: 26,\n    });\n    const typeQuestion = themeVars(\"TypeQuestion\", {\n        width: 26,\n        height: 26,\n    });\n\n    return {\n        standard,\n        newFolder,\n        fileType,\n        attachmentError,\n        vanillaLogo,\n        compact,\n        settings,\n        warning,\n        search,\n        notifications,\n        messages,\n        user,\n        userWarning,\n        close,\n        closeCompact,\n        closeTiny,\n        chevronLeftCompact,\n        selectedCategory,\n        signIn,\n        chevronUp,\n        plusCircle,\n        categoryIcon,\n        deleteIcon,\n        editIcon,\n        documentation,\n        bookmarkIcon,\n        newPostMenuIcon,\n        typeAll,\n        typeDiscussions,\n        typeArticles,\n        typeCategoriesAndGroups,\n        typeMember,\n        typeIdeasIcon,\n        typePollsIcon,\n        typeQuestion,\n        typePlaces,\n        typeFlag,\n    };\n});\n\nexport const iconClasses = useThemeCache(() => {\n    const vars = iconVariables();\n    const globalVars = globalVariables();\n    const style = styleFactory(\"icon\");\n\n    const standard = style(\"defaultIcon\", {\n        width: styleUnit(vars.standard.width),\n        height: styleUnit(vars.standard.height),\n    });\n\n    const fileType = style(\"fileType\", {\n        width: styleUnit(vars.fileType.width),\n        height: styleUnit(vars.fileType.height),\n    });\n\n    const newFolder = style(\"newFolder\", {\n        width: styleUnit(vars.newFolder.width),\n        height: styleUnit(vars.newFolder.height),\n        paddingRight: styleUnit(1),\n    });\n\n    const attachmentError = style(\"attachmentError\", {\n        width: styleUnit(vars.attachmentError.width),\n        height: styleUnit(vars.attachmentError.height),\n    });\n\n    const vanillaLogo = style(\"vanillaLogo\", {\n        width: styleUnit(vars.vanillaLogo.width),\n        height: styleUnit(vars.vanillaLogo.height),\n    });\n\n    const vanillaLogoMobile = style(\"vanillaLogoMobile\", {\n        width: styleUnit(vars.vanillaLogo.mobile.width ?? vars.vanillaLogo.width),\n        height: styleUnit(vars.vanillaLogo.mobile.height ?? vars.vanillaLogo.height),\n    });\n\n    const compact = style(\"compact\", {\n        width: styleUnit(vars.compact.width),\n        height: styleUnit(vars.compact.height),\n    });\n\n    const settings = style(\"settings\", {\n        width: styleUnit(vars.settings.width),\n        height: styleUnit(vars.settings.height),\n    });\n\n    const triangeTiny = style(\"triangeTiny\", {\n        width: styleUnit(8),\n        height: styleUnit(8),\n    });\n\n    const warning = style(\"warning\", {\n        width: styleUnit(vars.warning.width),\n        height: styleUnit(vars.warning.height),\n    });\n\n    const search = style(\"search\", {\n        width: styleUnit(vars.search.width),\n        height: styleUnit(vars.search.height),\n    });\n\n    const notifications = style(\"notifications\", {\n        width: styleUnit(vars.notifications.width),\n        height: styleUnit(vars.notifications.height),\n    });\n\n    const messages = style(\"messages\", {\n        width: styleUnit(vars.messages.width),\n        height: styleUnit(vars.messages.height),\n    });\n\n    const user = style(\"user\", {\n        width: styleUnit(vars.user.width),\n        height: styleUnit(vars.user.height),\n    });\n\n    const userWarning = style(\"userWarning\", {\n        width: styleUnit(vars.userWarning.width),\n        height: styleUnit(vars.userWarning.height),\n    });\n\n    const close = style(\"close\", {\n        width: styleUnit(vars.close.width),\n        height: styleUnit(vars.close.height),\n    });\n\n    // Same as close, but without extra padding\n    const closeCompact = style(\"closeCompact\", {\n        width: styleUnit(vars.closeCompact.width),\n        height: styleUnit(vars.closeCompact.height),\n    });\n\n    // For really small close buttons, like on tokens\n    const closeTiny = style(\"closeTiny\", {\n        display: \"block\",\n        width: styleUnit(vars.closeTiny.width),\n        height: styleUnit(vars.closeTiny.height),\n        margin: \"auto\",\n    });\n\n    const chevronLeftCompact = style(\"chevronLeftCompact\", {\n        width: styleUnit(vars.chevronLeftCompact().width),\n        height: styleUnit(vars.chevronLeftCompact().height),\n    });\n\n    const chevronLeftSmallCompact = style(\"chevronLeftSmallCompact\", {\n        ...{\n            [`&&, &.${chevronLeftCompact}`]: {\n                width: styleUnit(vars.chevronLeftCompact(true).width),\n                height: styleUnit(vars.chevronLeftCompact(true).height),\n            },\n        },\n    });\n\n    const selectedCategory = style(\"selectedCategory\", {\n        width: styleUnit(vars.selectedCategory.width),\n        height: styleUnit(vars.selectedCategory.height),\n    });\n\n    const signIn = style(\"signIn\", {\n        width: styleUnit(vars.signIn.width),\n        height: styleUnit(vars.signIn.height),\n    });\n\n    const chevronUp = style(\"chevronUp\", {\n        width: styleUnit(vars.chevronUp.width),\n        height: styleUnit(vars.chevronUp.height),\n    });\n\n    const plusCircle = style(\"plusCircle\", {\n        width: styleUnit(vars.plusCircle.width),\n        height: styleUnit(vars.plusCircle.height),\n    });\n\n    const categoryIcon = style(\"categoryIcon\", {\n        width: styleUnit(vars.categoryIcon.width),\n        height: styleUnit(vars.categoryIcon.height),\n        opacity: vars.categoryIcon.opacity,\n        marginRight: styleUnit(3),\n    });\n\n    const deleteIcon = style(\"deleteIcon\", {\n        width: styleUnit(vars.deleteIcon.width),\n        height: styleUnit(vars.deleteIcon.height),\n    });\n\n    const isSmall = style(\"isSmall\", {\n        transform: scale(0.85),\n        transformOrigin: \"50% 50%\",\n    });\n\n    const editIcon = style(\"editIcon\", {\n        width: styleUnit(vars.editIcon.width),\n        height: styleUnit(vars.editIcon.height),\n    });\n\n    const discussionIcon = style(\"discussionIcon\", {\n        width: styleUnit(vars.standard.width),\n        height: styleUnit(vars.standard.height),\n    });\n\n    const globeIcon = style(\"globeIcon\", {\n        width: styleUnit(vars.standard.width),\n        height: styleUnit(vars.standard.height),\n    });\n\n    const hamburger = style(\"alertIconCompact\", {\n        width: styleUnit(vars.standard.width),\n        height: styleUnit(vars.standard.height),\n    });\n\n    const external = style(\"alertIconCompact\", {\n        width: 22,\n        height: 22,\n    });\n\n    const errorFgColor = style(\"errorFgColor\", {\n        color: ColorsUtils.colorOut(globalVars.messageColors.error.fg),\n    });\n\n    const warningFgColor = style(\"warningFgColor\", {\n        color: ColorsUtils.colorOut(globalVars.messageColors.warning.fg),\n    });\n\n    const documentation = style(\"documentation\", {\n        display: \"block\",\n        width: styleUnit(vars.documentation.width),\n        height: styleUnit(vars.documentation.height),\n    });\n\n    // Goes on link, not SVG to handle states\n    const bookmark = (\n        props: IBookmarkProps = {\n            normalState: undefined as undefined | INestedPathState,\n            loadingState: undefined as undefined | INestedPathState,\n            bookmarkedState: undefined as undefined | INestedPathState,\n        },\n    ) => {\n        const globalVars = globalVariables();\n        const mainColors = globalVars.mainColors;\n\n        const {\n            normalState = {\n                stroke: globalVars.mixPrimaryAndBg(0.7),\n                fill: \"none\",\n                state: {\n                    stroke: mainColors.primary,\n                },\n            },\n            loadingState = {\n                opacity: 0.7,\n                fill: mainColors.primary,\n                strokeWidth: 0,\n            },\n            bookmarkedState = {\n                stroke: mainColors.primary,\n                fill: mainColors.primary,\n            },\n        } = props;\n\n        return style(\"bookmark\", {\n            width: styleUnit(vars.bookmarkIcon.width),\n            height: styleUnit(vars.bookmarkIcon.height),\n            opacity: 1,\n            display: \"block\",\n            position: \"relative\",\n            ...{\n                \".svgBookmark\": {\n                    ...pointerEvents(),\n                },\n                \".svgBookmark-mainPath\": svgStyles(normalState),\n                \"&.Bookmarked:not(.Bookmarking) .svgBookmark-mainPath\": svgStyles(bookmarkedState),\n                \"&:hover:not(.Bookmarked) .svgBookmark-mainPath\": svgStyles(normalState.state),\n                \"&:focus:not(.Bookmarked) .svgBookmark-mainPath\": svgStyles(normalState.state),\n                \"&:active:not(.Bookmarked) .svgBookmark-mainPath\": svgStyles(normalState.state),\n                \"&:Bookmarking .svgBookmark-mainPath\": svgStyles({\n                    fill: important(\"none\"),\n                    opacity: loadingState.opacity,\n                }),\n                \"&:Bookmarking .svgBookmark-loadingPath\": svgStyles({}),\n                \".svgBookmark-loadingPath\": {\n                    display: \"none\",\n                },\n                \"&.Bookmarking .svgBookmark-loadingPath\": {\n                    display: \"block\",\n                    ...svgStyles(loadingState, true),\n                },\n            },\n        });\n    };\n\n    const newPostMenuIcon = style(\"newPostMenuIcon\", {\n        width: styleUnit(vars.newPostMenuIcon.width),\n        height: styleUnit(vars.newPostMenuIcon.height),\n        color: ColorsUtils.colorOut(globalVars.mainColors.primaryContrast),\n        margin: \"auto\",\n    });\n\n    const itemFlyout = style(\"itemFlyout\", {\n        width: styleUnit(vars.standard.width),\n        height: styleUnit(vars.standard.height),\n    });\n\n    // Search types\n    const typeAll = style(\"typeAll\", {\n        width: styleUnit(vars.typeAll.width),\n        height: styleUnit(vars.typeAll.height),\n    });\n    const typeDiscussions = style(\"typeDiscussions\", {\n        width: styleUnit(vars.typeDiscussions.width),\n        height: styleUnit(vars.typeDiscussions.height),\n    });\n    const typeArticles = style(\"typeArticles\", {\n        width: styleUnit(vars.typeArticles.width),\n        height: styleUnit(vars.typeArticles.height),\n    });\n    const typeCategoriesAndGroups = style(\"TypeCategoriesAndGroups\", {\n        width: styleUnit(vars.typeCategoriesAndGroups.width),\n        height: styleUnit(vars.typeCategoriesAndGroups.height),\n    });\n    const typeMember = style(\"TypeMember\", {\n        width: styleUnit(vars.typeMember.width),\n        height: styleUnit(vars.typeMember.height),\n    });\n    const typeIdeasIcon = style(\"TypeIdeasIcon\", {\n        width: styleUnit(vars.typeIdeasIcon.width),\n        height: styleUnit(vars.typeIdeasIcon.height),\n    });\n    const typePollsIcon = style(\"TypePollsIcon\", {\n        width: styleUnit(vars.typePollsIcon.width),\n        height: styleUnit(vars.typePollsIcon.height),\n    });\n    const typeQuestion = style(\"TypeQuestion\", {\n        width: styleUnit(vars.typeQuestion.width),\n        height: styleUnit(vars.typeQuestion.height),\n    });\n\n    const typePlaces = style(\"TypePlaces\", {\n        width: styleUnit(vars.typePlaces.width),\n        height: styleUnit(vars.typePlaces.height),\n    });\n\n    const typeFlag = style(\"TypeFlag\", {\n        width: styleUnit(vars.typeFlag.width),\n        height: styleUnit(vars.typeFlag.height),\n    });\n\n    const typeGroups = style(\"TypeGroups\", {\n        width: styleUnit(vars.typeQuestion.width),\n        height: styleUnit(vars.typeQuestion.height),\n    });\n\n    const typeKnowledgeBase = style(\"TypeKnowledgeBase\", {\n        width: styleUnit(vars.typeQuestion.width),\n        height: styleUnit(vars.typeQuestion.height),\n    });\n\n    return {\n        standard,\n        newFolder,\n        warning,\n        errorFgColor,\n        warningFgColor,\n        fileType,\n        attachmentError,\n        vanillaLogo,\n        vanillaLogoMobile,\n        compact,\n        settings,\n        search,\n        notifications,\n        messages,\n        user,\n        userWarning,\n        close,\n        closeCompact,\n        closeTiny,\n        triangeTiny,\n        chevronLeftCompact,\n        chevronLeftSmallCompact,\n        selectedCategory,\n        signIn,\n        chevronUp,\n        plusCircle,\n        categoryIcon,\n        deleteIcon,\n        editIcon,\n        discussionIcon,\n        globeIcon,\n        isSmall,\n        external,\n        hamburger,\n        documentation,\n        bookmark,\n        newPostMenuIcon,\n        itemFlyout,\n        typeAll,\n        typeDiscussions,\n        typeArticles,\n        typeCategoriesAndGroups,\n        typeMember,\n        typeIdeasIcon,\n        typePollsIcon,\n        typeQuestion,\n        typePlaces,\n        typeFlag,\n        typeGroups,\n        typeKnowledgeBase,\n    };\n});\n","/**\n * Utilities and types for handling unique and/or required HTML ids in react components.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useMemo } from \"react\";\n\n// Optional ID\nexport interface IOptionalComponentID {\n    id?: string;\n}\n\n// Requires ID\nexport interface IRequiredComponentID {\n    id: string;\n}\n\nconst DEFAULT_PREFIX = \"\";\n\n// Cache of ID's by their prefix.\nlet idCache: { [key: string]: number } = {};\n\n// Generates unique ID from suffix\nexport function uniqueIDFromPrefix(prefix: string = DEFAULT_PREFIX) {\n    let count = 0;\n\n    if (prefix in idCache) {\n        count = idCache[prefix] + 1;\n    }\n    idCache[prefix] = count;\n\n    return prefix + \"-\" + idCache[prefix];\n}\n\n/**\n * React hook for useUniqueIDFromPrefix\n */\nexport function useUniqueID(prefix?: string) {\n    return useMemo(() => uniqueIDFromPrefix(prefix), [prefix]);\n}\n\n/**\n * Clear the cache of unique IDs. Useful for testing particularly.\n */\nexport function clearUniqueIDCache() {\n    idCache = {};\n}\n\n// Get required ID, will either return ID given through props or generate unique ID from suffix\nexport function getRequiredID(props: IOptionalComponentID, suffix: string): string {\n    if (props.id) {\n        return props.id;\n    } else {\n        return uniqueIDFromPrefix(suffix);\n    }\n}\n\n// Get optional ID, will either return given ID through props if given, if true, will get generated ID from prefix, if false, ignored\nexport function getOptionalID(props: IOptionalComponentID, suffix?: string): string | null {\n    if (props.id) {\n        // we want an ID\n        if (typeof props.id === \"string\") {\n            // Handled by parent component\n            return props.id;\n        } else if (typeof props.id === \"boolean\" && suffix) {\n            return uniqueIDFromPrefix(suffix);\n        }\n        throw new Error(\"To generate and ID, you must provide a suffix.\");\n    } else {\n        return null;\n    }\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { getOptionalID, IOptionalComponentID } from \"@library/utility/idUtils\";\nimport { buttonClasses, buttonUtilityClasses } from \"../forms/buttonStyles\";\nimport classNames from \"classnames\";\nimport { titleBarClasses } from \"@library/headers/titleBarStyles\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\n\nexport interface IButtonProps extends IOptionalComponentID, React.HTMLAttributes<HTMLButtonElement> {\n    children: React.ReactNode;\n    className?: string;\n    disabled?: boolean;\n    prefix?: string;\n    legacyMode?: boolean;\n    onClick?: (e) => void;\n    onKeyDown?: (e) => void;\n    title?: string;\n    submit?: boolean;\n    ariaLabel?: string;\n    baseClass?: ButtonTypes;\n    ariaHidden?: boolean;\n    tabIndex?: number;\n    lang?: string;\n    buttonRef?: React.Ref<HTMLButtonElement>;\n    role?: string;\n    onKeyDownCapture?: (event: any) => void;\n    controls?: string;\n    style?: {};\n}\n\ninterface IState {\n    id?: string;\n}\n\nexport const getButtonStyleFromBaseClass = (type: ButtonTypes | undefined) => {\n    if (type) {\n        const buttonUtils = buttonUtilityClasses();\n        const classes = buttonClasses();\n        switch (type) {\n            case ButtonTypes.STANDARD:\n                return classes.standard;\n            case ButtonTypes.TEXT:\n                return classes.text;\n            case ButtonTypes.TEXT_PRIMARY:\n                return classes.textPrimary;\n            case ButtonTypes.ICON:\n                return buttonUtils.buttonIcon;\n            case ButtonTypes.ICON_COMPACT:\n                return buttonUtils.buttonIconCompact;\n            case ButtonTypes.PRIMARY:\n                return classes.primary;\n            case ButtonTypes.TRANSPARENT:\n                return classes.transparent;\n            case ButtonTypes.TRANSLUCID:\n                return classes.translucid;\n            case ButtonTypes.TITLEBAR_LINK:\n                return titleBarClasses().linkButton;\n            case ButtonTypes.CUSTOM:\n                return classes.custom;\n            case ButtonTypes.RESET:\n                return buttonUtilityClasses().reset;\n            case ButtonTypes.DASHBOARD_STANDARD:\n                return \"btn\";\n            case ButtonTypes.DASHBOARD_PRIMARY:\n                return \"btn btn-primary\";\n            case ButtonTypes.DASHBOARD_SECONDARY:\n                return \"btn btn-secondary\";\n            case ButtonTypes.DASHBOARD_LINK:\n                return \"btn btn-link\";\n            case ButtonTypes.NOT_STANDARD:\n                return classes.notStandard;\n            default:\n                return \"\";\n        }\n    } else {\n        return \"\";\n    }\n};\n\n/**\n * A stylable, configurable button component.\n */\nexport default class Button extends React.Component<IButtonProps, IState> {\n    public static defaultProps: Partial<IButtonProps> = {\n        id: undefined,\n        disabled: false,\n        prefix: \"button\",\n        legacyMode: false,\n        baseClass: ButtonTypes.STANDARD,\n    };\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            id: getOptionalID(props, props.prefix) as string | undefined,\n        };\n    }\n\n    public render() {\n        const {\n            baseClass,\n            legacyMode,\n            className,\n            id,\n            submit,\n            ariaLabel,\n            ariaHidden,\n            controls,\n            buttonRef,\n            ...restProps\n        } = this.props;\n        const componentClasses = classNames(getButtonStyleFromBaseClass(baseClass), { Button: legacyMode }, className);\n\n        return (\n            <button\n                id={this.state.id}\n                type={submit ? \"submit\" : \"button\"}\n                className={componentClasses}\n                aria-label={ariaLabel ?? restProps.title}\n                aria-hidden={ariaHidden}\n                ref={buttonRef}\n                aria-controls={controls}\n                {...restProps}\n            >\n                {this.props.children}\n            </button>\n        );\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { IIconSizes } from \"@library/styles/cssUtilsTypes\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\n\nexport const formElementsVariables = useThemeCache((forcedVars?: IThemeVariables) => {\n    const vars = globalVariables(forcedVars);\n    const makeThemeVars = variableFactory(\"formElements\", forcedVars);\n\n    const mixBgAndFg = vars.mixBgAndFg;\n\n    const sizing = makeThemeVars(\"sizing\", {\n        height: 36,\n        halfHeight: 18,\n        maxWidth: 528,\n    });\n\n    const spacing = makeThemeVars(\"spacing\", {\n        margin: 12,\n        verticalPadding: 6,\n        horizontalPadding: 12,\n        fullBorderRadius: {\n            extraHorizontalPadding: 4, // Padding when you have fully rounded border radius. Will be applied based on the amount of border radius. Set to \"undefined\" to turn off\n        },\n    });\n\n    const border = makeThemeVars(\"border\", {\n        width: vars.borderType.formElements.default.width ?? vars.border.width,\n        color: vars.borderType.formElements.default.color ?? vars.border.color,\n        style: vars.borderType.formElements.default.style ?? vars.border.style,\n        radius: vars.borderType.formElements.default.radius ?? vars.border.radius,\n    });\n\n    const giantInput = makeThemeVars(\"giantInput\", {\n        height: 82,\n        fontSize: 24,\n    });\n\n    const largeInput = makeThemeVars(\"largeInput\", {\n        height: 48,\n        fontSize: 16,\n    });\n\n    const colors = makeThemeVars(\"colors\", {\n        fg: vars.mainColors.fg,\n        bg: vars.mainColors.bg,\n    });\n\n    const errorSpacing = makeThemeVars(\"errorSpacing\", {\n        horizontalPadding: vars.constants.fullGutter,\n        verticalPadding: vars.constants.fullGutter,\n        verticalMargin: vars.constants.fullGutter / 2,\n    });\n\n    const placeholder = makeThemeVars(\"placeholder\", {\n        color: mixBgAndFg(0.83),\n    });\n\n    const disabled = makeThemeVars(\"disabled\", {\n        opacity: 0.5,\n    });\n\n    const buttonMarginAlignment = (size: IIconSizes = IIconSizes.DEFAULT) => {\n        const globalVars = globalVariables();\n        let iconSize = globalVars.icon.sizes.default;\n\n        switch (size) {\n            case IIconSizes.SMALL:\n                iconSize = globalVars.icon.sizes.small;\n                break;\n            case IIconSizes.LARGE:\n                iconSize = globalVars.icon.sizes.small;\n                break;\n        }\n\n        return (sizing.height - iconSize) / 2;\n    };\n\n    return {\n        sizing,\n        errorSpacing,\n        spacing,\n        border,\n        giantInput,\n        largeInput,\n        colors,\n        placeholder,\n        disabled,\n        buttonMarginAlignment,\n    };\n});\n\nexport const accessibleErrorClasses = useThemeCache(() => {\n    const style = styleFactory(\"accessibleError\");\n    const globalVars = globalVariables();\n    const root = style({\n        display: \"flex\",\n        alignItems: \"center\",\n    });\n    const paragraph = style(\"paragraph\", {\n        color: ColorsUtils.colorOut(globalVars.messageColors.error.fg),\n        fontSize: styleUnit(globalVars.fonts.size.small),\n    });\n\n    return {\n        root,\n        paragraph,\n    };\n});\n\nexport const formErrorClasses = useThemeCache(() => {\n    const style = styleFactory(\"formError\");\n    const varsGlobal = globalVariables();\n    const vars = formElementsVariables();\n\n    const root = style({\n        backgroundColor: ColorsUtils.colorOut(varsGlobal.messageColors.error.fg),\n        color: ColorsUtils.colorOut(varsGlobal.messageColors.error.fg),\n        marginBottom: styleUnit(16),\n        paddingLeft: vars.errorSpacing.horizontalPadding,\n        paddingRight: vars.errorSpacing.horizontalPadding,\n        paddingTop: vars.errorSpacing.verticalPadding,\n        paddingBottom: vars.errorSpacing.verticalPadding,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n    });\n\n    const actions = style(\"actions\", {\n        display: \"flex\",\n        alignItems: \"center\",\n    });\n\n    const actionButton = style(\"button\", {\n        marginLeft: styleUnit(12),\n    });\n\n    const activeButton = style(\"activeButton\", {\n        fontWeight: \"bold\",\n    });\n\n    return {\n        actionButton,\n        root,\n        activeButton,\n        actions,\n    };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { t } from \"@library/utility/appUtils\";\nimport { iconClasses } from \"@library/icons/iconStyles\";\nimport { areaHiddenType } from \"@library/styles/styleHelpersVisibility\";\n\nconst currentColorFill = {\n    fill: \"currentColor\",\n};\n\nconst leftChevronPath =\n    \"M3.621,10.5l7.94-7.939A1.5,1.5,0,0,0,9.439.439h0l-9,9a1.5,1.5,0,0,0,0,2.121h0l9,9a1.5,1.5,0,0,0,2.122-2.122Z\";\n\nconst horizontalChevronViewBox = (centred?: boolean) => {\n    return centred ? \"-8 -4 30 30\" : \"0 0 24 24\";\n};\n\n// non breaking space not just a regular space.\nexport const NBSP = \" \";\n\nexport function RightChevronIcon(props: {\n    className?: string;\n    \"aria-hidden\"?: areaHiddenType;\n    centred?: boolean;\n    title?: string;\n}) {\n    const title = props.title ? props.title : `>`;\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.standard, \"icon-chevronRight\", props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox={horizontalChevronViewBox(props.centred)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            style={{ transform: \"scaleX(-1)\", transformOrigin: \"50% 50%\" }}\n        >\n            <title>{title}</title>\n            <path\n                transform=\"translate(0 1.75)\"\n                className=\"icon-chevronRightPath\"\n                d={leftChevronPath}\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function LeftChevronIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType; centred?: boolean }) {\n    const title = `<`;\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.standard, \"icon-chevronLeft\", props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox={horizontalChevronViewBox(props.centred)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{title}</title>\n            <path\n                transform=\"translate(0 1.75)\"\n                className=\"icon-chevronLeftPath\"\n                d={leftChevronPath}\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function LeftChevronCompactIcon(props: {\n    className?: string;\n    \"aria-hidden\"?: areaHiddenType;\n    isSmall?: boolean;\n}) {\n    const title = `<`;\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.chevronLeftCompact, \"icon-chevronLeftCompact\", props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 12 21\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{title}</title>\n            <path d={leftChevronPath} style={currentColorFill} />\n        </svg>\n    );\n}\n\nexport function TopChevronIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const title = `↑`;\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.standard, \"icon-chevronUp\", props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{title}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M5.467,14.858l.668.618a.442.442,0,0,0,.614,0L12,10.614l5.252,4.862a.442.442,0,0,0,.614,0l.668-.618a.369.369,0,0,0,0-.569L12.308,8.524a.443.443,0,0,0-.615,0L5.467,14.289a.376.376,0,0,0-.134.284A.381.381,0,0,0,5.467,14.858Z\"\n            />\n        </svg>\n    );\n}\n\nexport function BottomChevronIcon(props: {\n    className?: string;\n    \"aria-hidden\"?: areaHiddenType;\n    rotate?: number;\n    title?: string;\n}) {\n    const title = props.title ? props.title : `↓`;\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.standard, \"icon-chevronDown\", props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            style={{\n                transform: props.rotate ? `rotate(${props.rotate}deg)` : undefined,\n            }}\n        >\n            <title>{title}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M18.534,9.142l-.668-.618a.442.442,0,0,0-.614,0L12,13.386,6.749,8.524a.442.442,0,0,0-.614,0l-.668.618a.369.369,0,0,0,0,.569l6.226,5.765a.443.443,0,0,0,.615,0l6.226-5.765a.376.376,0,0,0,.134-.284A.381.381,0,0,0,18.534,9.142Z\"\n            />\n        </svg>\n    );\n}\n\nexport function CloseIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType; compact?: boolean }) {\n    const title = t(\"Close\");\n    const viewBox = props.compact ? \"0 0 16 16\" : \"0 0 24 24\";\n    const transform = props.compact ? \"translate(-4 -4)\" : \"\";\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(props.compact ? classes.compact : classes.close, props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox={viewBox}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{title}</title>\n            <path\n                transform={transform}\n                fill=\"currentColor\"\n                d=\"M12,10.6293581 L5.49002397,4.11938207 C5.30046135,3.92981944 4.95620859,3.96673045 4.69799105,4.22494799 L4.22494799,4.69799105 C3.97708292,4.94585613 3.92537154,5.29601344 4.11938207,5.49002397 L10.6293581,12 L4.11938207,18.509976 C3.92981944,18.6995387 3.96673045,19.0437914 4.22494799,19.3020089 L4.69799105,19.775052 C4.94585613,20.0229171 5.29601344,20.0746285 5.49002397,19.8806179 L12,13.3706419 L18.509976,19.8806179 C18.6995387,20.0701806 19.0437914,20.0332695 19.3020089,19.775052 L19.775052,19.3020089 C20.0229171,19.0541439 20.0746285,18.7039866 19.8806179,18.509976 L13.3706419,12 L19.8806179,5.49002397 C20.0701806,5.30046135 20.0332695,4.95620859 19.775052,4.69799105 L19.3020089,4.22494799 C19.0541439,3.97708292 18.7039866,3.92537154 18.509976,4.11938207 L12,10.6293581 Z\"\n            />\n        </svg>\n    );\n}\n\nexport function CloseCompactIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    return (\n        <CloseIcon\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            compact={true}\n            className={props.className}\n        />\n    );\n}\n\nexport function CloseTinyIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const title = t(\"Close\");\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.closeTiny, props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 9.5 9.5\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{title}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M10.836,11.75,7.793,8.707A1,1,0,0,1,9.207,7.293l3.043,3.043,3.043-3.043a1,1,0,0,1,1.414,1.414L13.664,11.75l3.043,3.043a1,1,0,0,1-1.414,1.414L12.25,13.164,9.207,16.207a1,1,0,1,1-1.439-1.389l.025-.025Z\"\n                transform=\"translate(-7.488 -7.012)\"\n            />\n        </svg>\n    );\n}\n\nexport function ClearIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const title = t(\"Clear\");\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.standard, \"icon-clear\", props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{title}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M12,5a7,7,0,1,0,7,7A7,7,0,0,0,12,5Zm2.873,5.244L13.118,12l1.755,1.756a.337.337,0,0,1,0,.479l-.638.638a.337.337,0,0,1-.479,0L12,13.118l-1.756,1.755a.337.337,0,0,1-.479,0l-.638-.638a.337.337,0,0,1,0-.479L10.882,12,9.127,10.244a.337.337,0,0,1,0-.479l.638-.638a.337.337,0,0,1,.479,0L12,10.882l1.756-1.755a.337.337,0,0,1,.479,0l.638.638A.337.337,0,0,1,14.873,10.244Z\"\n            />\n        </svg>\n    );\n}\n\nexport function CheckIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const title = `✓`;\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.standard, \"icon-check\", props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{title}</title>\n            <polygon fill=\"currentColor\" points=\"5,12.7 3.6,14.1 9,19.5 20.4,7.9 19,6.5 9,16.8\" />\n        </svg>\n    );\n}\n\nexport function DropDownMenuIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const title = `…`;\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.standard, \"icon-dropDownMenu\", props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{title}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M5.5 12.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm8 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm8 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z\"\n            />\n        </svg>\n    );\n}\n\nexport function NewFolderIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType; title?: string }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className={classNames(classes.newFolder, props.className)}\n            viewBox=\"0 0 22 19\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{props.title ? props.title : t(\"New Folder\")}</title>\n            <path\n                d=\"M1,15.066V3.77Q1,1,3.548,1H9.12L11.3,3.769h7.286q2.372-.083,2.372,2.6v8.7q0,3.205-2.372,3.206H3.548Q1,18.272,1,15.066Z\"\n                style={{ fill: \"none\", stroke: \"currentColor\", strokeWidth: \"1.2px\" }}\n            />\n            <path\n                d=\"M10.5,8v6m3-3h-6\"\n                style={{ fill: \"none\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeWidth: \"1.2px\" }}\n            />\n        </svg>\n    );\n}\n\nexport function WarningIcon(props: { className?: string; warningMessage?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classes = iconClasses();\n    const { className, warningMessage = t(\"Warning\") } = props;\n\n    return (\n        <svg\n            className={classNames(classes.warning, className)}\n            aria-label={warningMessage}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{warningMessage}</title>\n            <path\n                d=\"M12.709,13.405H11.314l-.291-5.9H13ZM11,15.472a1.048,1.048,0,0,1,.257-.767,1.01,1.01,0,0,1,.749-.26.982.982,0,0,1,.734.266,1.226,1.226,0,0,1,0,1.514.964.964,0,0,1-.731.275.993.993,0,0,1-.743-.269A1.042,1.042,0,0,1,11,15.472Z\"\n                transform=\"translate(-4 -4)\"\n                style={{ fill: \"currentColor\" }}\n            />\n            <circle cx=\"8\" cy=\"8\" r=\"7.5\" style={{ fill: \"none\", stroke: \"currentColor\" }} />\n        </svg>\n    );\n}\n\nexport function ErrorIcon(props: { className?: string; errorMessage?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classes = iconClasses();\n    const { className, errorMessage = t(\"Error\") } = props;\n\n    return (\n        <svg\n            className={classNames(classes.warning, className)}\n            aria-label={errorMessage}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 17 17\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{errorMessage}</title>\n            <path\n                d=\"M11.753,4.247a.843.843,0,0,1,0,1.19L9.191,8l2.562,2.562a.842.842,0,0,1,.076,1.105l-.076.086a.843.843,0,0,1-1.19,0L8,9.191,5.438,11.753a.842.842,0,0,1-1.191-1.19L6.809,8,4.247,5.438a.842.842,0,0,1-.076-1.1l.076-.086a.843.843,0,0,1,1.19,0L8,6.809l2.562-2.562a.842.842,0,0,1,1.191,0Z\"\n                transform=\"translate(0.5 0.5)\"\n                style={{ fill: \"currentColor\", fillRule: \"evenodd\" }}\n            />\n            <circle cx=\"8.5\" cy=\"8.5\" r=\"8\" style={{ fill: \"none\", stroke: \"currentColor\" }} />\n        </svg>\n    );\n}\n\nexport function PendingIcon(props: { className?: string }) {\n    const classes = iconClasses();\n    const { className } = props;\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 17 17\"\n            className={classNames(classes.standard, className)}\n            role=\"img\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <path\n                fill=\"currentColor\"\n                d=\"M5.5 12.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm8 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm8 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z\"\n                transform=\"translate(1,1) scale(0.6)\"\n            />\n            <circle cx=\"8.5\" cy=\"8.5\" r=\"8\" style={{ fill: \"none\", stroke: \"currentColor\" }} />\n        </svg>\n    );\n}\n\nexport function ApproveIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classes = iconClasses();\n    const { className } = props;\n\n    return (\n        <svg\n            className={classNames(classes.warning, className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 17 17\"\n            id=\"checkmark\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <polygon\n                points=\"12.136 3.139 13.25 4.253 6.211 11.292 2.75 7.83 3.863 6.717 6.211 9.064 12.136 3.139\"\n                fill=\"currentColor\"\n                transform=\"translate(0,1)\"\n            />\n            <circle cx=\"8.5\" cy=\"8.5\" r=\"8\" style={{ fill: \"none\", stroke: \"currentColor\" }} />\n        </svg>\n    );\n}\n\nexport function InformationIcon(props: {\n    className?: string;\n    informationMessage?: string;\n    \"aria-hidden\"?: areaHiddenType;\n}) {\n    const classes = iconClasses();\n    const { className, informationMessage = t(\"Information\") } = props;\n\n    return (\n        <svg\n            className={classNames(classes.warning, className)}\n            aria-label={informationMessage}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{informationMessage}</title>\n            <circle cx=\"8\" cy=\"8\" r=\"7.5\" style={{ fill: \"none\", stroke: \"currentColor\" }} />\n            <path\n                d=\"M9,12H7V7H9ZM7,5.006a1.063,1.063,0,0,1,.236-.757A1.006,1.006,0,0,1,8,4a1.012,1.012,0,0,1,.764.254A1.058,1.058,0,0,1,9,5.006.883.883,0,0,1,8,6,.879.879,0,0,1,7,5.006Z\"\n                style={{ fill: \"currentColor\", fillRule: \"evenodd\" }}\n            />\n        </svg>\n    );\n}\n\nexport function CategoryIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const title = t(\"Folder\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className={classNames(classes.categoryIcon, \"icon-categoryIcon\", props.className)}\n            viewBox=\"0 0 24 24\"\n            role=\"img\"\n            aria-label={title}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{title}</title>\n            <path\n                d=\"M5.5,19 L18.5,19 C19.3284271,19 20,18.3284271 20,17.5 L20,8.5 C20,7.67157288 19.3284271,7 18.5,7 L12,7 L10.2222222,5 L5.5,5 C4.67157288,5 4,5.67157288 4,6.5 L4,17.5 C4,18.3284271 4.67157288,19 5.5,19 Z\"\n                fill=\"currentColor\"\n            />\n        </svg>\n    );\n}\n\nexport function CheckCompactIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const title = `✓`;\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className={classNames(classes.selectedCategory, \"icon-selectedCategory\", props.className)}\n            viewBox=\"0 0 16.8 13\"\n            role=\"img\"\n            aria-label={title}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{title}</title>\n            <polygon\n                points=\"12.136 3.139 13.25 4.253 6.211 11.292 2.75 7.83 3.863 6.717 6.211 9.064 12.136 3.139\"\n                fill=\"currentColor\"\n            />\n        </svg>\n    );\n}\n\nexport function UpTriangleIcon(props: {\n    className?: string;\n    \"aria-hidden\"?: areaHiddenType;\n    title?: string;\n    deg?: number;\n}) {\n    return (\n        <DownTriangleIcon\n            className={props.className}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            deg={180}\n            translateY={-2}\n        />\n    );\n}\n\nexport function DownTriangleIcon(props: {\n    className?: string;\n    \"aria-hidden\"?: areaHiddenType;\n    title?: string;\n    deg?: number;\n    translateY?: number;\n}) {\n    let rotation: string | undefined = undefined;\n    if (props.deg !== undefined) {\n        rotation = `rotate(${props.deg}, 4, 4)`;\n    }\n\n    let translate: string | undefined = undefined;\n    if (props.translateY) {\n        translate = `translate(0, ${props.translateY})`;\n    }\n\n    const transform = [rotation, translate].filter((item) => item !== undefined).join(\", \");\n    const classes = iconClasses();\n\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 10 6\"\n            className={classNames(props.className, classes.triangeTiny)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{props.title ? props.title : `▾`}</title>\n            <polygon points=\"0 0 10 0 5 6 0 0\" fill=\"currentColor\" transform={transform} />\n        </svg>\n    );\n}\n\nexport function RightTriangleIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType; title?: string }) {\n    return (\n        <DownTriangleIcon\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            className={props.className}\n            title={props.title ? props.title : `▶`}\n            deg={-90}\n        />\n    );\n}\n\nexport function HelpIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const title = t(\"Help\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n            className={classNames(classes.compact, \"icon-help\", props.className)}\n            role=\"img\"\n            aria-label={title}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{title}</title>\n            <path\n                d=\"M12,19a7,7,0,1,0-7-7A7,7,0,0,0,12,19Zm0,1a8,8,0,1,1,8-8A8,8,0,0,1,12,20Zm-.866-6.5v-.338a2,2,0,0,1,.211-.969,2.757,2.757,0,0,1,.741-.8,4.09,4.09,0,0,0,.812-.773,1.156,1.156,0,0,0,.183-.656.826.826,0,0,0-.3-.683,1.333,1.333,0,0,0-.851-.238A2.941,2.941,0,0,0,11,9.185a6.65,6.65,0,0,0-.836.344L9.721,8.6a4.653,4.653,0,0,1,2.3-.6,2.485,2.485,0,0,1,1.645.508,1.727,1.727,0,0,1,.609,1.4,1.983,1.983,0,0,1-.117.706,2.006,2.006,0,0,1-.352.59,5.653,5.653,0,0,1-.812.731,3.088,3.088,0,0,0-.659.64,1.229,1.229,0,0,0-.166.682V13.5Zm-.217,1.688a.7.7,0,0,1,.778-.8.775.775,0,0,1,.582.209.818.818,0,0,1,.2.59.838.838,0,0,1-.2.595.878.878,0,0,1-1.156.006A.844.844,0,0,1,10.917,15.185Z\"\n                transform=\"translate(-4 -4)\"\n                fill=\"currentColor\"\n            />\n        </svg>\n    );\n}\n\nexport function ComposeIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            className={classNames(classes.standard, \"icon-compose\", props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{t(\"Compose\")}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M23.591,1.27l-.9-.9a1.289,1.289,0,0,0-1.807,0l-.762.863,2.6,2.587.868-.751a1.24,1.24,0,0,0,.248-.373,1.255,1.255,0,0,0,0-1.052A1.232,1.232,0,0,0,23.591,1.27ZM19.5,20.5H3.5V4.5H15.4l1.4-1.431H2.751A1,1,0,0,0,2,4.07V20.939a1,1,0,0,0,1,1H20.011a1,1,0,0,0,1-1V7L19.5,8.445ZM21.364,3.449l-9.875,9.8-.867-.861,9.874-9.8-.867-.863-4.938,4.9-4.938,4.9L8.74,15.167l3.617-1.055,9.875-9.8Z\"\n            />\n        </svg>\n    );\n}\n\nexport function PlusCircleIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const title = `+`;\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"16\"\n            height=\"16\"\n            viewBox=\"0 0 16 16\"\n            className={classNames(classes.plusCircle, \"icon-plusCircle\", props.className)}\n            role=\"img\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{title}</title>\n            <g fill=\"none\" fillRule=\"evenodd\">\n                <g>\n                    <g transform=\"translate(-969 -413) translate(970 414)\">\n                        <circle cx=\"7\" cy=\"7\" r=\"7\" stroke=\"#555A62\" strokeWidth=\".778\" />\n                        <path fill=\"#555A62\" d=\"M6.3 3.5H7.699999999999999V10.5H6.3z\" />\n                        <path fill=\"#555A62\" d=\"M6.3 3.5L7.7 3.5 7.7 10.5 6.3 10.5z\" transform=\"rotate(90 7 7)\" />\n                    </g>\n                </g>\n            </g>\n        </svg>\n    );\n}\n\nexport function SignInIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const title = t(\"Sign In\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"-4 0 24 18\"\n            className={classNames(classes.signIn, \"icon-signIn\", props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            role=\"img\"\n        >\n            <title>{title}</title>\n            <g fill=\"none\" fillRule=\"evenodd\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeWidth=\"1.5\">\n                <path strokeLinejoin=\"round\" d=\"M7.243 12.417L10.92 8.74 7.243 5.063\" />\n                <path d=\"M10.617 8.74H.843\" />\n                <path\n                    strokeLinejoin=\"round\"\n                    d=\"M2 5.07V1.235C2.051.411 2.451 0 3.2 0h11.507C15.57.033 16 .593 16 1.681v15.136c-.058.789-.346 1.183-.865 1.183H3.2c-.8-.01-1.2-.404-1.2-1.183v-4.12\"\n                />\n            </g>\n        </svg>\n    );\n}\n\nexport function ChevronUpIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType; rotate?: number }) {\n    const title = t(\"Chevron Up\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 51 17\"\n            style={{\n                transform: props.rotate ? `rotate(${props.rotate}deg)` : undefined,\n            }}\n            className={classNames(classes.chevronUp, \"icon-chevronUp\", props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{title}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M4.9,16.752A3.552,3.552,0,0,1,.329,14.668c-.039-.106-.074-.214-.1-.323A4.185,4.185,0,0,1,2.39,9.152L24.246.252a3.31,3.31,0,0,1,2.508,0l21.856,8.9a4.184,4.184,0,0,1,2.166,5.193,3.552,3.552,0,0,1-4.351,2.511,3.41,3.41,0,0,1-.325-.1L25.5,8.358Z\"\n            />\n        </svg>\n    );\n}\n\nexport function SearchErrorIcon(props: { message?: string; className?: string }) {\n    const title = props.message ? props.message : t(\"Page Not Found\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            className={classNames(classes.standard, \"icon-notFound\", props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{title}</title>\n            <path\n                d=\"M16.178,14.358l4.628,4.616c.633.631,1.2,1.417.354,2.261s-1.647.286-2.285-.336q-.627-.612-4.7-4.688a7.7,7.7,0,1,1,2.005-1.853ZM9.984,9.214,11.563,7.64a.418.418,0,0,1,.591.59L10.576,9.8l1.578,1.574a.418.418,0,0,1-.591.59L9.984,10.394,8.4,11.968a.418.418,0,0,1-.591-.59L9.392,9.8,7.814,8.23A.418.418,0,0,1,8.4,7.64Zm.063,7.545a7.044,7.044,0,1,0-7.03-7.043A7.037,7.037,0,0,0,10.047,16.759Z\"\n                fill=\"currentColor\"\n            />\n        </svg>\n    );\n}\n\nexport function AccessibleImageMenuIcon(props: { message?: string; className?: string }) {\n    const { message, className } = props;\n    const title = message ? message : t(\"Accessibility\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            className={classNames(classes.standard, \"icon-accessibleImageMenuIcon\", className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{title}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M12 22.7C6.09 22.7 1.3 17.91 1.3 12 1.3 6.09 6.09 1.3 12 1.3c5.91 0 10.7 4.79 10.7 10.7 0 5.91-4.79 10.7-10.7 10.7zm0-1.4a9.3 9.3 0 1 0 0-18.6 9.3 9.3 0 0 0 0 18.6z\"\n            />\n            <path fill=\"currentColor\" d=\"M12 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4\" />\n            <path\n                fill=\"currentColor\"\n                d=\"M16.06 9.004h-.005l-3.06.336a2.823 2.823 0 0 1-.313.018H11.32c-.104 0-.208-.006-.312-.017l-3.065-.337c-.482-.047-.902.394-.94.984-.038.59.321 1.106.803 1.153l2.473.275c.15.017.265.17.265.355v.822c0 .179-.027.356-.08.522L9.06 17.494c-.195.541.005 1.174.446 1.414.442.24.958-.005 1.154-.546l1.336-4.007 1.349 4.017c.201.528.71.762 1.144.528.435-.235.637-.853.456-1.391l-1.408-4.395a1.717 1.717 0 0 1-.08-.521v-.822c0-.185.115-.339.265-.355l2.47-.275c.48-.045.841-.56.804-1.15-.036-.59-.456-1.033-.938-.988z\"\n            />\n        </svg>\n    );\n}\n\nexport function EditIcon(props: {\n    className?: string;\n    \"aria-hidden\"?: areaHiddenType;\n    title?: string;\n    small?: boolean;\n}) {\n    const classes = iconClasses();\n    return (\n        <svg\n            viewBox=\"0 0 24 24\"\n            className={classNames(classes.editIcon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{props.title ? props.title : t(\"Edit\")}</title>\n            <g className={classNames({ [classes.isSmall]: props.small })}>\n                <g transform=\"translate(4, 3)\">\n                    <polygon fill=\"currentColor\" points=\"1.05405405 14 3 15.9736842 0 17\" />\n                    <path\n                        d=\"M1.53965611,12.8579964 L14.2200643,0.146669161 C14.4151476,-0.0488897203 14.6102308,-0.0488897203 14.805314,0.146669161 L16.8536876,2.20003741 C17.0487708,2.39559629 17.0487708,2.59115517 16.8536876,2.78671406 L4.17327936,15.4980413 L0.466698493,16.9647329 C0.076532086,17.0625124 -0.118551118,16.9647329 0.076532086,16.5736152 L1.53965611,12.8579964 Z\"\n                        stroke=\"currentColor\"\n                        fill=\"none\"\n                    />\n                </g>\n            </g>\n        </svg>\n    );\n}\n\nexport function DeleteIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            viewBox=\"0 0 17 17\"\n            className={classNames(classes.deleteIcon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{t(\"Delete\")}</title>\n            <g clipRule=\"evenodd\" fillRule=\"evenodd\" fill=\"currentColor\">\n                <path\n                    d=\"M14,4v9c0,1.1-0.9,2-2,2H5c-1.1,0-2-0.9-2-2V4H2.3C2.1,4,2,3.9,2,3.7V3.3C2,3.1,2.1,3,2.3,3h3.2l0.3-1\n\t\tC5.9,1.4,6.4,1,7,1h3c0.6,0,1.1,0.4,1.2,1l0.3,1h3.2C14.9,3,15,3.1,15,3.3v0.4C15,3.9,14.9,4,14.7,4H14z M7,2.2C7,2.1,7.1,2,7.2,2\n\t\th2.6C9.9,2,10,2.1,10,2.2L10.2,3H6.8L7,2.2z M4,4h9v9c0,0.5-0.4,1-1,1H5c-0.6,0-1-0.5-1-1V4z\"\n                />\n                <path\n                    d=\"M8.5,5.5L8.5,5.5C8.8,5.5,9,5.7,9,6v6c0,0.3-0.2,0.5-0.5,0.5l0,0C8.2,12.5,8,12.3,8,12V6\n\t\tC8,5.7,8.2,5.5,8.5,5.5z\"\n                />\n                <path\n                    d=\"M10.5,5.5L10.5,5.5C10.8,5.5,11,5.7,11,6v6c0,0.3-0.2,0.5-0.5,0.5l0,0c-0.3,0-0.5-0.2-0.5-0.5V6\n\t\tC10,5.7,10.2,5.5,10.5,5.5z\"\n                />\n                <path\n                    d=\"M6.5,5.5L6.5,5.5C6.8,5.5,7,5.7,7,6v6c0,0.3-0.2,0.5-0.5,0.5l0,0C6.2,12.5,6,12.3,6,12V6\n\t\tC6,5.7,6.2,5.5,6.5,5.5z\"\n                />\n            </g>\n        </svg>\n    );\n}\n\nexport function DiscussionIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType; title?: string }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.discussionIcon, props.className)}\n            viewBox=\"0 0 24 24\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{props.title ? props.title : t(\"Speech Bubble\")}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M12 17.431c4.418 0 8-2.783 8-6.216C20 7.782 16.418 5 12 5s-8 2.783-8 6.216c0 1.572.75 3.008 1.99 4.102l-.765 3.11 3.28-1.619a9.9 9.9 0 0 0 3.495.623zm-6.332 1.892c-.762.376-1.616-.31-1.414-1.134l.627-2.55C3.678 14.396 3 12.854 3 11.215 3 7.168 7.077 4 12 4s9 3.168 9 7.215c0 4.048-4.077 7.215-9 7.215-1.192 0-2.352-.185-3.43-.54l-2.902 1.433z\"\n            />\n        </svg>\n    );\n}\n\nexport function GlobeIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType; title?: string }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.globeIcon, props.className)}\n            viewBox=\"0 0 24 24\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{props.title ? props.title : t(\"Globe\")}</title>\n            <path\n                d=\"M18.75,6.055A8.983,8.983,0,0,0,12.082,3l-.019,0H12a8.994,8.994,0,0,0-.035,17.988.415.415,0,0,0,.207,0A8.979,8.979,0,0,0,18.689,18a.382.382,0,0,0,.045-.052,8.966,8.966,0,0,0,.016-11.9ZM18.3,17.089a10.836,10.836,0,0,0-1.975-.815,15.225,15.225,0,0,0,.593-4.06h3.215A7.994,7.994,0,0,1,18.3,17.089ZM3.868,12.214H7.083A15.44,15.44,0,0,0,7.676,16.3a10.707,10.707,0,0,0-1.975.762A7.924,7.924,0,0,1,3.868,12.214ZM5.7,6.794a10.707,10.707,0,0,0,1.975.762,15.667,15.667,0,0,0-.589,3.8H3.879A8.027,8.027,0,0,1,5.7,6.794Zm5.844.577a16.12,16.12,0,0,1-2.829-.33C9.4,5.3,10.47,4.108,11.545,3.893Zm0,.857v3.13h-3.6A13.983,13.983,0,0,1,8.478,7.8,15.459,15.459,0,0,0,11.545,8.228Zm0,3.986v3.547a15.492,15.492,0,0,0-3.066.32,14.064,14.064,0,0,1-.537-3.867Zm0,4.4V20.1c-1.075-.215-2.15-1.41-2.829-3.148A16.312,16.312,0,0,1,11.545,16.618Zm.86,0a13.668,13.668,0,0,1,2.7.327c-.653,1.672-1.628,2.842-2.7,3.119V16.62Zm0-.857v-3.55h3.653a13.891,13.891,0,0,1-.625,3.867,15.962,15.962,0,0,0-3.029-.318Zm0-4.407V8.225A15.634,15.634,0,0,0,15.433,7.8a13.924,13.924,0,0,1,.62,3.555H12.405Zm0-3.99V3.922c1.074.277,2.049,1.446,2.7,3.118a13.521,13.521,0,0,1-2.7.327Zm2.153-3.1A8.164,8.164,0,0,1,17.7,6.19a10.084,10.084,0,0,1-1.648.633A7.94,7.94,0,0,0,14.558,4.271ZM7.95,6.823A10.016,10.016,0,0,1,6.3,6.19a8.166,8.166,0,0,1,3.14-1.92A7.95,7.95,0,0,0,7.95,6.823Zm0,10.342a7.952,7.952,0,0,0,1.492,2.553A8.14,8.14,0,0,1,6.3,17.8,10.177,10.177,0,0,1,7.95,17.165Zm8.1,0A10.129,10.129,0,0,1,17.7,17.8a8.14,8.14,0,0,1-3.14,1.919A7.91,7.91,0,0,0,16.05,17.165Zm.863-5.808a15.454,15.454,0,0,0-.589-3.775A10.7,10.7,0,0,0,18.3,6.767a8.107,8.107,0,0,1,1.822,4.59Z\"\n                style={{ fill: \"currentColor\" }}\n            />\n        </svg>\n    );\n}\n\nexport function TranslateIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType; title?: string }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.standard, props.className)}\n            viewBox=\"0 0 24 24\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{props.title ? props.title : t(\"Translate\")}</title>\n            <path\n                d=\"M9.836,13.2l-.455-1.495H7.09L6.635,13.2H5.2L7.417,6.892H9.046L11.27,13.2Zm-.773-2.612q-.359-1.149-.711-2.3-.065-.209-.114-.42-.142.549-.812,2.72Zm9.472,1.626a.5.5,0,0,0,0-1h-2.07V10a.466.466,0,1,0-.93,0v1.214h-1.9c-.256,0-.088.22,0,.5s0,.5.255.5h.216a4.936,4.936,0,0,0,1.164,2.75c-.528.34.31.329-.35.329-.256,0,0,.077,0,.353s.093.508.35.508c.614,0,.01.03.73-.508a4.216,4.216,0,0,0,2.535.854.5.5,0,0,0,0-1,3.319,3.319,0,0,1-1.8-.536,4.936,4.936,0,0,0,1.164-2.75h.641ZM16,14.34a3.893,3.893,0,0,1-.956-2.125h1.912A3.893,3.893,0,0,1,16,14.34Z\"\n                style={{ fill: \"currentColor\" }}\n            />\n            <path\n                d=\"M11.271,2.709H4.017q-1.418,0-1.417,1.9V16.445q0,1.575,1.733,1.575H16.1Z\"\n                style={{ fill: \"none\", stroke: \"currentColor\", strokeWidth: \"1.2px\" }}\n            />\n            <path\n                d=\"M12.348,6.116h7.7q1.313,0,1.312,1.234v12.7q0,1.47-1.312,1.47H13.635L12,18.02h4.1Zm1.287,15.4,2.817-3.287\"\n                style={{ fill: \"none\", stroke: \"currentColor\", strokeWidth: \"1.2px\" }}\n            />\n        </svg>\n    );\n}\n\nexport function HamburgerIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType; title?: string }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.hamburger, props.className)}\n            viewBox=\"0 0 21.999 15.871\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{props.title ? props.title : t(\"Menu\")}</title>\n            <path\n                d=\"M21.111,8.9H.89a.925.925,0,0,1,0-1.849H21.11a.925.925,0,0,1,0,1.849m0-7.012H.89A.906.906,0,0,1,0,.97.907.907,0,0,1,.889.045H21.11A.907.907,0,0,1,22,.969a.907.907,0,0,1-.889.924m0,14.023H.89a.925.925,0,0,1,0-1.849H21.11a.925.925,0,0,1,0,1.849\"\n                transform=\"translate(0 -0.045)\"\n                style={{ fill: \"currentcolor\" }}\n            />\n        </svg>\n    );\n}\n\nexport function DarkThemeIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType; title?: string }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"24\"\n            height=\"24\"\n            viewBox=\"0 0 24 24\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <g fill=\"none\" fillRule=\"evenodd\" transform=\"translate(2 2)\">\n                <circle cx=\"10\" cy=\"10\" r=\"10\" fill=\"#1E1E1E\" stroke=\"#DDDEE0\" transform=\"rotate(-180 10 10)\" />\n                <path fill=\"#DDDEE0\" d=\"M10 19.986V.014C15.573.288 20 4.654 20 10c0 5.346-4.428 9.712-10 9.986z\" />\n                <circle cx=\"4.444\" cy=\"4.444\" r=\"3.951\" stroke=\"#DDDEE0\" transform=\"rotate(-90 10 4.444)\" />\n                <path\n                    fill=\"#D8D8D8\"\n                    d=\"M6.097 5.564l-.305-1.392-1.348-.279 1.348-.318.305-1.353.239 1.353 1.462.314-1.462.283zM3.875 8.898L3.57 7.506l-1.348-.28 1.348-.318.305-1.352.238 1.352 1.462.314-1.462.284z\"\n                />\n            </g>\n        </svg>\n    );\n}\n\nexport function LightThemeIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType; title?: string }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"24\"\n            height=\"24\"\n            viewBox=\"0 0 24 24\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <g fill=\"none\" fillRule=\"evenodd\" transform=\"translate(2 2)\">\n                <circle cx=\"10\" cy=\"10\" r=\"10\" fill=\"#555A62\" stroke=\"#555A62\" />\n                <path fill=\"#DDDEE0\" d=\"M10 .556v18.888A9.444 9.444 0 1 1 10 .556z\" />\n                <g transform=\"rotate(90 8.889 10)\">\n                    <path\n                        fill=\"#555A62\"\n                        fillRule=\"nonzero\"\n                        d=\"M17.18 7.901h-1.768c-.322 0-.597.228-.597.494s.275.494.597.494h1.769c.321 0 .597-.228.597-.494s-.276-.494-.597-.494zM8.395 14.815c-.266 0-.494.275-.494.597v1.769c0 .321.228.597.494.597s.494-.276.494-.597v-1.769c0-.322-.228-.597-.494-.597zM8.395 0c-.266 0-.494.276-.494.597v1.769c0 .321.228.597.494.597s.494-.276.494-.597V.597C8.889.276 8.66 0 8.395 0zM12.71 12.779c-.184.182-.145.535.084.763l1.255 1.256c.229.228.581.267.764.084.183-.183.144-.535-.084-.763l-1.256-1.256c-.228-.229-.58-.267-.764-.084zM2.484 2.553c-.183.183-.144.536.084.764l1.256 1.256c.228.228.581.267.764.084.183-.183.144-.535-.084-.764L3.248 2.638c-.228-.229-.58-.268-.764-.085zM4.588 12.779c-.183-.183-.536-.145-.764.084l-1.256 1.256c-.228.228-.267.58-.084.763.183.183.536.144.764-.084l1.256-1.256c.228-.228.267-.58.084-.763zM14.813 2.553c-.183-.183-.535-.144-.764.085l-1.255 1.255c-.229.229-.268.581-.085.764.183.183.536.144.764-.084l1.256-1.256c.228-.228.267-.58.084-.764zM2.366 7.901H.597c-.321 0-.597.228-.597.494s.253.494.597.494h1.769c.321 0 .597-.228.597-.494s-.276-.494-.597-.494z\"\n                    />\n                    <circle cx=\"8.889\" cy=\"8.889\" r=\"3.951\" stroke=\"#555A62\" />\n                </g>\n                <circle cx=\"10\" cy=\"10\" r=\"10\" fill=\"#555A62\" stroke=\"#555A62\" />\n                <path fill=\"#FFF\" d=\"M10 .556v18.888A9.444 9.444 0 1 1 10 .556z\" />\n                <g transform=\"rotate(90 8.889 10)\">\n                    <path\n                        fill=\"#555A62\"\n                        fillRule=\"nonzero\"\n                        d=\"M17.18 7.901h-1.768c-.322 0-.597.228-.597.494s.275.494.597.494h1.769c.321 0 .597-.228.597-.494s-.276-.494-.597-.494zM8.395 14.815c-.266 0-.494.275-.494.597v1.769c0 .321.228.597.494.597s.494-.276.494-.597v-1.769c0-.322-.228-.597-.494-.597zM8.395 0c-.266 0-.494.276-.494.597v1.769c0 .321.228.597.494.597s.494-.276.494-.597V.597C8.889.276 8.66 0 8.395 0zM12.71 12.779c-.184.182-.145.535.084.763l1.255 1.256c.229.228.581.267.764.084.183-.183.144-.535-.084-.763l-1.256-1.256c-.228-.229-.58-.267-.764-.084zM2.484 2.553c-.183.183-.144.536.084.764l1.256 1.256c.228.228.581.267.764.084.183-.183.144-.535-.084-.764L3.248 2.638c-.228-.229-.58-.268-.764-.085zM4.588 12.779c-.183-.183-.536-.145-.764.084l-1.256 1.256c-.228.228-.267.58-.084.763.183.183.536.144.764-.084l1.256-1.256c.228-.228.267-.58.084-.763zM14.813 2.553c-.183-.183-.535-.144-.764.085l-1.255 1.255c-.229.229-.268.581-.085.764.183.183.536.144.764-.084l1.256-1.256c.228-.228.267-.58.084-.764zM2.366 7.901H.597c-.321 0-.597.228-.597.494s.253.494.597.494h1.769c.321 0 .597-.228.597-.494s-.276-.494-.597-.494z\"\n                    />\n                    <circle cx=\"8.889\" cy=\"8.889\" r=\"3.951\" stroke=\"#555A62\" />\n                </g>\n            </g>\n        </svg>\n    );\n}\n\nexport function PlusIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType; title?: string }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"80\"\n            height=\"81\"\n            viewBox=\"0 0 80 81\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <g fill=\"currentColor\" fillRule=\"evenodd\">\n                <path d=\"M32 0h16v80.762H32zM80 32.381v16H48v-16zM32 32.381v16H0v-16z\" />\n            </g>\n        </svg>\n    );\n}\n\nexport function LoaderIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    return (\n        <svg\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"18px\"\n            height=\"18px\"\n            viewBox=\"0 0 18 18\"\n            version=\"1.1\"\n            className={props.className}\n        >\n            <title>{t(\"Loader\")}</title>\n            <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n                <g fill=\"currentColor\">\n                    <path\n                        d=\"M9,0 C13.9705627,0 18,4.02943725 18,9 C18,13.9705627 13.9705627,18 9,18 C4.07738737,18 0,13.97 0,9 C0,8.99144674 1,8.99144674 3,9 C3,12.3137085 5.6862915,15 9,15 C12.3137085,15 15,12.3137085 15,9 C15,5.6862915 12.3137085,3 9,3 L9,0 Z\"\n                        id=\"Path\"\n                        opacity=\"0.3\"\n                    ></path>\n                    <path\n                        d=\"M9,5.1159077e-13 C9,5 4.97,9 1.42108547e-14,9 C1.42108547e-14,9 1.42108547e-14,6 1.42108547e-14,6 C3.31,6 5.95313475,3.31 6,5.1159077e-13 C6,5.1159077e-13 9,5.1159077e-13 9,5.1159077e-13 Z\"\n                        id=\"Path\"\n                        transform=\"translate(4.500000, 4.500000) rotate(180.000000) translate(-4.500000, -4.500000) \"\n                    ></path>\n                </g>\n            </g>\n        </svg>\n    );\n}\n\nexport function ResetIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.standard, props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"25\"\n            height=\"24\"\n            viewBox=\"0 0 25 24\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{t(\"Reset\")}</title>\n            <path\n                fill=\"currentColor\"\n                fillOpacity=\"0.7\"\n                fillRule=\"evenodd\"\n                d=\"M12 6c3.315 0 6 2.685 6 6s-2.685 6-6 6-6-2.685-6-6 2.685-6 6-6zm-.006 3a2.988 2.988 0 00-2.066.83l-.432-.43A.29.29 0 009 9.604v1.622c0 .16.13.29.29.29h1.622a.29.29 0 00.205-.495l-.505-.506a2.032 2.032 0 11.05 3.015.145.145 0 00-.198.006l-.48.48a.144.144 0 00.006.21A3 3 0 1011.994 9z\"\n            />\n        </svg>\n    );\n}\n\nexport function DocumentationIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            className={classNames(classes.documentation, props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 11.795 15\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{t(\"Documentation\")}</title>\n            <path\n                fill=\"currentColor\"\n                fillRule=\"evenodd\"\n                d=\"M11.689,3.442,8.761.142A.429.429,0,0,0,8.443,0H.424A.424.424,0,0,0,0,.424V14.576A.424.424,0,0,0,.424,15H11.371a.424.424,0,0,0,.424-.424V3.724A.429.429,0,0,0,11.689,3.442ZM8.861,1.534,10.446,3.32H8.861Zm2.086,12.617H.848V.85H8.012v2.9a.424.424,0,0,0,.424.424h2.51v9.977ZM2.368,6.4a.424.424,0,0,0,.424.424H9a.425.425,0,0,0,0-.849H2.793a.425.425,0,0,0-.425.425ZM9,8.269H2.793a.425.425,0,1,0-.041.849H9a.425.425,0,0,0,0-.849Zm0,2.293H2.793a.424.424,0,0,0,0,.848H9a.424.424,0,0,0,0-.848Z\"\n                style={{ fill: \"currentColor\", fillRule: \"evenodd\" }}\n            />\n        </svg>\n    );\n}\n\nexport function BookmarkIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    return (\n        <svg\n            className={classNames(\"svgBookmark\", props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 12.733 16.394\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{t(\"Bookmark\")}</title>\n            <path\n                className={\"svgBookmark-mainPath\"}\n                strokeWidth={2}\n                d=\"M1.05.5H11.683a.55.55,0,0,1,.55.55h0V15.341a.549.549,0,0,1-.9.426L6.714,12a.547.547,0,0,0-.7,0L1.4,15.767a.55.55,0,0,1-.9-.426V1.05A.55.55,0,0,1,1.05.5z\"\n            />\n            <path\n                d=\"M11.7,0.5H6.4v11.4c0.1,0,0.2,0,0.3,0.1l4.6,3.8c0.1,0.1,0.2,0.1,0.4,0.1c0.3,0,0.5-0.2,0.5-0.6V1.1C12.2,0.7,12,0.5,11.7,0.5z\"\n                className={\"svgBookmark-loadingPath\"}\n            />\n        </svg>\n    );\n}\n\nexport function NewPostMenuIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    return (\n        <svg\n            className={classNames(iconClasses().newPostMenuIcon, props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{t(\"New Post\")}</title>\n            <path\n                d=\"M8,0A1,1,0,0,1,9,1V7h6a1,1,0,0,1,.993.883L16,8a1,1,0,0,1-1,1H9v6a1,1,0,0,1-.883.993L8,16a1,1,0,0,1-1-1V9H1a1,1,0,0,1-.993-.883L0,8A1,1,0,0,1,1,7H7V1A1,1,0,0,1,7.883.006Z\"\n                fill=\"currentColor\"\n            />\n        </svg>\n    );\n}\n\nexport function NewDiscussionIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classes = iconClasses();\n\n    return (\n        <svg\n            className={classNames(classes.itemFlyout)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{t(\"New Discussion Icon\")}</title>\n            <path\n                fill=\"currentColor\"\n                fillRule=\"evenodd\"\n                d=\"M17.101 4l-.866 1.5H4c-.276 0-.5.224-.5.5v14c0 .276.224.5.5.5h7.324l-.002.044.059-.044H19c.276 0 .5-.224.5-.5v-8.154L21 9.248V20c0 1.105-.895 2-2 2H4c-1.105 0-2-.895-2-2V6c0-1.105.895-2 2-2h13.101zm-4.455 9.718l.243.245c.413.397.86.734 1.34 1.012.482.278.997.496 1.547.654l.334.089-3.689 2.757c-.088.066-.213.048-.28-.04-.03-.042-.044-.093-.038-.144l.543-4.573zM21.172.35l2.252 1.3c.335.193.45.621.256.956L16.358 15.29c-.677-.162-1.303-.41-1.88-.743-.482-.278-.929-.615-1.341-1.012l-.243-.245L20.216.606c.193-.335.621-.45.956-.256z\"\n            />\n        </svg>\n    );\n}\n\nexport function NewIdeaIcon(props: { className?: string; \"area-hidden\"?: areaHiddenType }) {\n    const classes = iconClasses();\n\n    return (\n        <svg\n            className={classNames(classes.itemFlyout)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{t(\"New Idea Icon\")}</title>\n            <path\n                d=\"M14.24,22.642a.536.536,0,0,1,0,1.042H9.76a.536.536,0,0,1,0-1.042Zm1.093-2.482a.521.521,0,1,1,0,1.042H8.667a.521.521,0,1,1,0-1.042ZM12,1.128a7.678,7.678,0,0,1,7.786,7.525,7.483,7.483,0,0,1-2.577,5.576l-.084.082c-1.232,1.19-1.092,3.735-1.092,3.762a.506.506,0,0,1-.14.352.472.472,0,0,1-.336.135H8.415a.527.527,0,0,1-.336-.135.439.439,0,0,1-.14-.352c.028-.027.14-2.571-1.092-3.762A7.483,7.483,0,0,1,4.214,8.653,7.678,7.678,0,0,1,12,1.128Zm-.028.893A6.713,6.713,0,0,0,5.139,8.626a6.5,6.5,0,0,0,2.352,4.98,6.156,6.156,0,0,1,1.4,4.007h6.19a6.179,6.179,0,0,1,1.316-3.9c0-.027.056-.081.084-.108a6.48,6.48,0,0,0,2.324-4.981A6.713,6.713,0,0,0,11.972,2.021ZM11.318,3.09a6.016,6.016,0,0,1,6.262,5.8.494.494,0,0,1-.985,0A5.094,5.094,0,0,0,11.318,4a.491.491,0,0,1-.493-.456.491.491,0,0,1,.493-.456Z\"\n                fill=\"currentColor\"\n                stroke=\"currentColor\"\n                strokeWidth=\"0.5px\"\n            />\n            <path\n                d=\"M21.75,1.75l-1.5,1.5m3.856,4.659L22,8.167M.068,7.734l2.11.222m.05-6.123L3.877,3.167\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeLinecap=\"round\"\n                strokeWidth=\"1.5px\"\n            />\n        </svg>\n    );\n}\n\nexport function NewPollIcon(props: { className?: string; \"area-hidden\"?: areaHiddenType }) {\n    const classes = iconClasses();\n\n    return (\n        <svg\n            className={classNames(classes.itemFlyout)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n        >\n            <title>{t(\"New Poll Icon\")}</title>\n            <rect\n                x=\"1\"\n                y=\"14.238\"\n                width=\"11\"\n                height=\"5\"\n                rx=\"1.6\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth=\"1.2px\"\n            />\n            <rect\n                x=\"1\"\n                y=\"4.6\"\n                width=\"7.333\"\n                height=\"5\"\n                rx=\"1.6\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth=\"1.2px\"\n            />\n            <path\n                d=\"M19.081,7.153H13.843\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"1.8px\"\n            />\n            <path\n                d=\"M11.538,7.153l2.514-2.5v5Z\"\n                fill=\"currentColor\"\n                stroke=\"currentColor\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"0.9px\"\n                fillRule=\"evenodd\"\n            />\n            <path\n                d=\"M15.62,16.532h5.238\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"1.8px\"\n            />\n            <path\n                d=\"M23.163,16.532l-2.514,2.5v-5Z\"\n                fill=\"currentColor\"\n                stroke=\"currentColor\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"0.9px\"\n                fillRule=\"evenodd\"\n            />\n        </svg>\n    );\n}\n\nexport function ExternalIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"24\"\n            height=\"24\"\n            viewBox=\"0 0 24 24\"\n            className={classNames(classes.external, props.className)}\n            style={{ height: 22, width: 22 }}\n            aria-hidden={props[\"aria-hidden\"]}\n        >\n            <g fill=\"none\" fillRule=\"evenodd\" stroke=\"#555A62\" strokeLinecap=\"round\">\n                <path d=\"M17.274 12.111v5.614h0c0 .414-.313.749-.699.749H6.095h0c-.385 0-.698-.335-.698-.749V7.245h0c0-.413.313-.748.699-.748h5.589M11.608 12.111l6.737-6.737\"></path>\n                <path strokeLinejoin=\"round\" d=\"M14.602 5.374h3.743v3.743\"></path>\n            </g>\n        </svg>\n    );\n}\n\nexport function FeatureIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"24\"\n            height=\"24\"\n            viewBox=\"0 0 24 24\"\n            className={classNames(classes.external, props.className)}\n            style={{ height: 24, width: 24 }}\n            aria-hidden={props[\"aria-hidden\"]}\n        >\n            <g fill=\"none\" fillRule=\"evenodd\" opacity=\"1.0\">\n                <g stroke=\"currentColor\" strokeWidth=\"1.0\">\n                    <g>\n                        <path\n                            d=\"M10 14.329L5.365 16.766 6.25 11.604 2.5 7.949 7.682 7.196 10 2.5 12.318 7.196 17.5 7.949 13.75 11.604 14.635 16.766z\"\n                            transform=\"translate(-1167 -297) translate(1167 297)\"\n                        />\n                    </g>\n                </g>\n            </g>\n        </svg>\n    );\n}\n\nexport function ArrowIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            width=\"12\"\n            height=\"12\"\n            className={classNames(classes, props.className)}\n            style={{ height: 12, width: 12 }}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 12 12\"\n        >\n            <path fill=\"currentColor\" id=\"arrow\" d=\"M6,0,4.909,1.091l4.13,4.13H0V6.779H9.039l-4.13,4.13L6,12l6-6Z\" />\n        </svg>\n    );\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { calc, important, percent, viewHeight } from \"csx\";\nimport { cssRule, media } from \"@library/styles/styleShim\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { CSSObject } from \"@emotion/css\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\nimport { sticky } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { panelBackgroundVariables } from \"@library/layout/PanelBackground.variables\";\nimport { LayoutTypes } from \"@library/layout/types/interface.layoutTypes\";\nimport {\n    fallbackLayoutVariables,\n    IMediaQueryFunction,\n    IPanelLayoutVariables,\n} from \"@library/layout/types/interface.panelLayout\";\nimport { logError } from \"@vanilla/utils\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\ninterface IProps extends IPanelLayoutVariables {\n    contentSizes: any;\n    setMediaQueries: (breakPoints, Devices) => any;\n    panelLayoutBreakPoints: any;\n}\n\n// Global defaults for layouts. These variables are not meant to be used extended through a layout type, like a three or two column layout\nexport const layoutVariables = useThemeCache(\n    (forcedVars?: IThemeVariables): IProps => {\n        const globalVars = globalVariables(forcedVars);\n        const makeThemeVars = variableFactory(\"layoutVariables\", forcedVars);\n        const Devices = fallbackLayoutVariables;\n\n        const colors = makeThemeVars(\"colors\", {\n            leftColumnBg: globalVars.mainColors.bg,\n        });\n\n        // Important variables that will be used to calculate other variables\n        const foundationalWidths = makeThemeVars(\"foundationalWidths\", {\n            fullGutter: globalVars.constants.fullGutter,\n            panelWidth: globalVars.panel.width,\n            middleColumn: globalVars.middleColumn.width,\n            minimalMiddleColumnWidth: 550, // Will break if middle column width is smaller than this value.\n            narrowContentWidth: 900, // For home page widgets, narrower than full width\n            breakPoints: {\n                // Other break points are calculated\n                twoColumns: 1200,\n                xs: 500,\n            },\n        });\n\n        const gutter = {\n            full: foundationalWidths.fullGutter, // 40\n            size: foundationalWidths.fullGutter / 2, // 20\n            halfSize: foundationalWidths.fullGutter / 4, // 10\n            quarterSize: foundationalWidths.fullGutter / 8, // 5\n        };\n\n        const panelInit = makeThemeVars(\"panel\", {\n            width: foundationalWidths.panelWidth,\n        });\n\n        const panel = makeThemeVars(\"panel\", {\n            ...panelInit,\n            paddedWidth: panelInit.width + gutter.full,\n        });\n\n        const middleColumnInit = makeThemeVars(\"middleColumn\", {\n            width: foundationalWidths.middleColumn,\n        });\n\n        const middleColumn = makeThemeVars(\"middleColumn\", {\n            ...middleColumnInit,\n            paddedWidth: middleColumnInit.width + gutter.full,\n        });\n\n        const contentWidth = middleColumn.paddedWidth + panel.paddedWidth * 2;\n\n        // @Deprecated - Needs to be split into separate layouts\n        const contentSizes = makeThemeVars(\"content\", {\n            full: contentWidth,\n            narrow:\n                foundationalWidths.narrowContentWidth < contentWidth\n                    ? foundationalWidths.narrowContentWidth\n                    : contentWidth,\n        });\n\n        // @Deprecated - Use LayoutContext to get variables\n        const breakPoints = makeThemeVars(\"breakPoints\", {\n            noBleed: contentWidth,\n            twoColumns: foundationalWidths.breakPoints.twoColumns,\n            oneColumn: foundationalWidths.minimalMiddleColumnWidth + panel.paddedWidth,\n            xs: foundationalWidths.breakPoints.xs,\n        });\n\n        // @Deprecated - set to reduce refactoring changes\n        const panelLayoutBreakPoints = breakPoints;\n\n        const panelLayoutSpacing = makeThemeVars(\"panelLayoutSpacing\", {\n            margin: {\n                top: 0,\n                bottom: 0,\n            },\n            padding: {\n                top: gutter.halfSize * 1.5,\n            },\n            extraPadding: {\n                top: 32,\n                bottom: 32,\n                noBreadcrumbs: {},\n                mobile: {\n                    noBreadcrumbs: {\n                        top: 16,\n                    },\n                },\n            },\n            largePadding: {\n                top: 64,\n            },\n            offset: {\n                left: -44,\n                right: -36,\n            },\n            withPanelBackground: {\n                gutter: 70,\n            },\n        });\n\n        // Allows to be recalculated in another layout (i.e. the three column layout)\n        const setMediaQueries = (breakPoints) => {\n            const noBleed = (styles: CSSObject, useMinWidth: boolean = true): CSSObject => {\n                return media(\n                    {\n                        maxWidth: breakPoints.noBleed,\n                        minWidth: useMinWidth ? breakPoints.twoColumns + 1 : undefined,\n                    },\n                    styles,\n                );\n            };\n\n            const noBleedDown = (styles: CSSObject): CSSObject => {\n                return media(\n                    {\n                        maxWidth: breakPoints.noBleed,\n                    },\n                    styles,\n                );\n            };\n\n            const twoColumnsDown = (styles: CSSObject): CSSObject => {\n                return media(\n                    {\n                        maxWidth: breakPoints.twoColumns,\n                    },\n                    styles,\n                );\n            };\n\n            const twoColumns = (styles: CSSObject, useMinWidth: boolean = true) => {\n                return media(\n                    {\n                        maxWidth: breakPoints.twoColumns,\n                        minWidth: useMinWidth ? breakPoints.oneColumn + 1 : undefined,\n                    },\n                    styles,\n                );\n            };\n\n            const oneColumn = (styles: CSSObject, useMinWidth: boolean = true) => {\n                return media(\n                    {\n                        maxWidth: breakPoints.oneColumn,\n                        minWidth: useMinWidth ? breakPoints.xs + 1 : undefined,\n                    },\n                    styles,\n                );\n            };\n\n            const oneColumnDown = (styles: CSSObject): CSSObject => {\n                return media(\n                    {\n                        maxWidth: breakPoints.oneColumn,\n                    },\n                    styles,\n                );\n            };\n\n            const aboveOneColumn = (styles: CSSObject): CSSObject => {\n                return media(\n                    {\n                        minWidth: breakPoints.oneColumn + 1,\n                    },\n                    styles,\n                );\n            };\n\n            const xs = (styles: CSSObject): CSSObject => {\n                return media(\n                    {\n                        maxWidth: breakPoints.xs,\n                    },\n                    styles,\n                );\n            };\n\n            return {\n                noBleed,\n                noBleedDown,\n                twoColumns,\n                twoColumnsDown,\n                oneColumn,\n                oneColumnDown,\n                aboveOneColumn,\n                xs,\n            };\n        };\n\n        // @Deprecated - Use LayoutContext to get media queries of current layout.\n        const mediaQueries = () => {\n            return setMediaQueries(breakPoints);\n        };\n\n        // @Deprecated - Use a specific layout, like the three or two column layout and use the context\n        const calculateDevice = () => {\n            const width = document.body.clientWidth;\n            if (width <= breakPoints.xs) {\n                return Devices.XS.toString();\n            } else if (width <= breakPoints.oneColumn) {\n                return Devices.MOBILE.toString();\n            } else if (width <= breakPoints.twoColumns) {\n                return Devices.TABLET.toString();\n            } else if (width <= breakPoints.noBleed) {\n                return Devices.NO_BLEED.toString();\n            } else {\n                return Devices.DESKTOP.toString();\n            }\n        };\n\n        const isFullWidth = (currentDevice) => {\n            return currentDevice === Devices.DESKTOP || currentDevice === Devices.NO_BLEED;\n        };\n\n        const isCompact = (currentDevice) => {\n            return currentDevice === Devices.XS || currentDevice === Devices.MOBILE;\n        };\n\n        const vars: IProps = {\n            type: LayoutTypes.THREE_COLUMNS.toString(),\n            Devices,\n            colors,\n            foundationalWidths,\n            gutter,\n            setMediaQueries,\n            panel,\n            middleColumn,\n            contentSizes,\n            calculateDevice,\n            contentWidth,\n            mediaQueries,\n            isFullWidth,\n            isCompact,\n            panelLayoutSpacing,\n            breakPoints,\n            panelLayoutBreakPoints,\n        };\n\n        return vars;\n    },\n);\n\nexport interface IPanelLayoutClasses {\n    root: string;\n    content: string;\n    top: string;\n    main: string;\n    container: string;\n    fullWidth: string;\n    leftColumn?: string;\n    rightColumn: string;\n    mainColumn: string;\n    mainColumnMaxWidth: string;\n    panel: string;\n    isSticky: string;\n    breadcrumbs: string;\n    breadcrumbsContainer: string;\n    layoutSpecificStyles?: any;\n}\n\nexport const doNothingWithMediaQueries = (styles: any) => {\n    logError(\"Media queries are undefined, unable to set the following styles: \", styles);\n    return {};\n};\n\nexport const generatePanelLayoutClasses = (props: {\n    vars: IPanelLayoutVariables;\n    name: string;\n    mediaQueries: IMediaQueryFunction;\n}): IPanelLayoutClasses => {\n    const { vars, name, mediaQueries } = props;\n    const globalVars = globalVariables();\n    const style = styleFactory(name);\n\n    if (typeof mediaQueries !== \"function\") {\n        logError(\"mediaQueries needs to be a function of type IMediaQueryFunction: \", mediaQueries);\n        return {} as IPanelLayoutClasses;\n    }\n\n    const main = style(\"main\", {\n        minHeight: viewHeight(20),\n        width: percent(100),\n    });\n\n    const root = style({\n        ...Mixins.margin(vars.panelLayoutSpacing.margin),\n        width: percent(100),\n        ...{\n            [`&.noBreadcrumbs > .${main}`]: {\n                paddingTop: styleUnit(globalVars.gutter.size),\n                ...mediaQueries({\n                    [LayoutTypes.THREE_COLUMNS]: {\n                        oneColumnDown: {\n                            paddingTop: 0,\n                        },\n                    },\n                }),\n            },\n            \"&.hasTopPadding\": {\n                paddingTop: styleUnit(vars.panelLayoutSpacing.extraPadding.top),\n            },\n            \"&.hasTopPadding.noBreadcrumbs\": {\n                paddingTop: styleUnit(vars.panelLayoutSpacing.extraPadding.mobile.noBreadcrumbs.top),\n            },\n            \"&.hasLargePadding\": {\n                ...Mixins.padding(vars.panelLayoutSpacing.largePadding),\n            },\n            ...mediaQueries({\n                [LayoutTypes.THREE_COLUMNS]: {\n                    oneColumnDown: {\n                        ...{\n                            \"&.hasTopPadding.noBreadcrumbs\": {\n                                paddingTop: styleUnit(vars.panelLayoutSpacing.extraPadding.mobile.noBreadcrumbs.top),\n                            },\n                        },\n                    },\n                },\n            }),\n        },\n    });\n\n    const content = style(\"content\", {\n        display: \"flex\",\n        flexGrow: 1,\n        width: percent(100),\n        justifyContent: \"space-between\",\n    });\n\n    const panel = style(\"panel\", {\n        width: percent(100),\n        ...{\n            [`& > .panelArea:first-child .panelList`]: {\n                marginTop: styleUnit(\n                    (globalVars.fonts.size.title * globalVars.lineHeights.condensed) / 2 -\n                        globalVariables().fonts.size.medium / 2,\n                ),\n            },\n        },\n    });\n\n    const top = style(\"top\", {\n        width: percent(100),\n        marginBottom: styleUnit(globalVars.gutter.half),\n    });\n\n    const container = style(\"container\", {\n        display: \"flex\",\n        flexWrap: \"nowrap\",\n        alignItems: \"flex-start\",\n        justifyContent: \"space-between\",\n    });\n\n    const fullWidth = style(\"fullWidth\", {\n        position: \"relative\",\n        padding: 0,\n    });\n\n    const offset = panelBackgroundVariables().config.render\n        ? layoutVariables().panelLayoutSpacing.withPanelBackground.gutter - globalVars.widget.padding * 2\n        : 0;\n\n    const leftColumn = style(\"leftColumn\", {\n        position: \"relative\",\n        width: styleUnit(vars.panel.paddedWidth),\n        flexBasis: styleUnit(vars.panel.paddedWidth),\n        minWidth: styleUnit(vars.panel.paddedWidth),\n        paddingRight: styleUnit(offset),\n    });\n\n    const rightColumn = style(\"rightColumn\", {\n        position: \"relative\",\n        width: styleUnit(vars.panel.paddedWidth),\n        flexBasis: styleUnit(vars.panel.paddedWidth),\n        minWidth: styleUnit(vars.panel.paddedWidth),\n        overflow: \"initial\",\n        paddingLeft: styleUnit(offset),\n    });\n\n    const mainColumn = style(\"mainColumn\", {\n        justifyContent: \"space-between\",\n        flexGrow: 1,\n        width: percent(100),\n        maxWidth: percent(100),\n        paddingBottom: styleUnit(vars.panelLayoutSpacing.extraPadding.bottom),\n        ...mediaQueries({\n            [LayoutTypes.THREE_COLUMNS]: {\n                oneColumnDown: {\n                    ...Mixins.padding({\n                        left: important(0),\n                        right: important(0),\n                    }),\n                },\n            },\n        }),\n    });\n\n    const mainColumnMaxWidth = style(\"mainColumnMaxWidth\", {\n        ...{\n            \"&.hasAdjacentPanel\": {\n                flexBasis: calc(`100% - ${styleUnit(vars.panel.paddedWidth)}`),\n                maxWidth: calc(`100% - ${styleUnit(vars.panel.paddedWidth)}`),\n\n                ...mediaQueries({\n                    [LayoutTypes.THREE_COLUMNS]: {\n                        oneColumnDown: {\n                            flexBasis: percent(100),\n                            maxWidth: percent(100),\n                        },\n                    },\n                }),\n            },\n            \"&.hasTwoAdjacentPanels\": {\n                flexBasis: calc(`100% - ${styleUnit(vars.panel.paddedWidth * 2)}`),\n                maxWidth: calc(`100% - ${styleUnit(vars.panel.paddedWidth * 2)}`),\n                ...mediaQueries({\n                    [LayoutTypes.THREE_COLUMNS]: {\n                        oneColumnDown: {\n                            flexBasis: percent(100),\n                            maxWidth: percent(100),\n                        },\n                    },\n                }),\n            },\n        },\n    });\n\n    const breadcrumbs = style(\"breadcrumbs\", {});\n\n    const isSticky = style(\"isSticky\", {\n        ...sticky(),\n        height: percent(100),\n        ...mediaQueries({\n            [LayoutTypes.THREE_COLUMNS]: {\n                oneColumnDown: {\n                    position: \"relative\",\n                    top: \"auto\",\n                    left: \"auto\",\n                    bottom: \"auto\",\n                },\n            },\n        }),\n    });\n\n    // To remove when we have overlay styles converted\n    cssRule(`.overlay .${root}.noBreadcrumbs .${main}`, {\n        paddingTop: 0,\n    });\n\n    const breadcrumbsContainer = style(\"breadcrumbs\", {\n        paddingBottom: styleUnit(14),\n    });\n\n    const layoutSpecificStyles = (style) => {\n        const middleColumnMaxWidth = style(\"middleColumnMaxWidth\", {\n            ...{\n                \"&.hasAdjacentPanel\": {\n                    flexBasis: calc(`100% - ${styleUnit(vars.panel.paddedWidth)}`),\n                    maxWidth: calc(`100% - ${styleUnit(vars.panel.paddedWidth)}`),\n                    ...mediaQueries({\n                        [LayoutTypes.THREE_COLUMNS]: {\n                            oneColumnDown: {\n                                flexBasis: percent(100),\n                                maxWidth: percent(100),\n                            },\n                        },\n                    }),\n                },\n                \"&.hasTwoAdjacentPanels\": {\n                    flexBasis: calc(`100% - ${styleUnit(vars.panel.paddedWidth * 2)}`),\n                    maxWidth: calc(`100% - ${styleUnit(vars.panel.paddedWidth * 2)}`),\n                    ...mediaQueries({\n                        [LayoutTypes.THREE_COLUMNS]: {\n                            oneColumnDown: {\n                                flexBasis: percent(100),\n                                maxWidth: percent(100),\n                            },\n                        },\n                    }),\n                },\n            },\n        });\n\n        const leftColumn = style(\"leftColumn\", {\n            position: \"relative\",\n            width: styleUnit(vars.panel.paddedWidth),\n            flexBasis: styleUnit(vars.panel.paddedWidth),\n            minWidth: styleUnit(vars.panel.paddedWidth),\n            paddingRight: offset ? styleUnit(offset) : undefined,\n        });\n\n        const rightColumn = style(\"rightColumn\", {\n            position: \"relative\",\n            width: styleUnit(vars.panel.paddedWidth),\n            flexBasis: styleUnit(vars.panel.paddedWidth),\n            minWidth: styleUnit(vars.panel.paddedWidth),\n            overflow: \"initial\",\n            paddingRight: offset ? styleUnit(offset) : undefined,\n        });\n\n        return {\n            leftColumn,\n            rightColumn,\n            middleColumnMaxWidth,\n        };\n    };\n\n    return {\n        root,\n        content,\n        top,\n        main,\n        container,\n        fullWidth,\n        leftColumn,\n        rightColumn,\n        mainColumn,\n        mainColumnMaxWidth,\n        panel,\n        isSticky,\n        breadcrumbs,\n        breadcrumbsContainer,\n        layoutSpecificStyles,\n    };\n};\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { IApiError, IApiResponse } from \"@library/@types/api/core\";\nimport { AxiosResponse, AxiosInstance } from \"axios\";\nimport { logError } from \"@vanilla/utils\";\nimport { ThunkDispatch, ThunkAction } from \"redux-thunk\";\nimport { AnyAction } from \"redux\";\nimport { AsyncActionCreators } from \"typescript-fsa\";\nimport { ICoreStoreState } from \"@library/redux/reducerRegistry\";\nimport { useDispatch } from \"react-redux\";\nimport { useMemo, useDebugValue } from \"react\";\nimport apiv2 from \"@library/apiv2\";\n\n/**\n * Base class for creating redux actions.\n */\nexport default class ReduxActions<S extends ICoreStoreState = ICoreStoreState> {\n    /**\n     * Utility to create an action with our a without a payload of a given type.\n     * The action generated can have its type narrowed in a reducer switch statement if the type T matches.\n     *\n     * @see ActionsUnion\n     *\n     * @param type The action type.\n     * @param payload The payload data.\n     */\n    public static createAction<ActionType extends string>(type: ActionType): IAction<ActionType>;\n    public static createAction<ActionType extends string, Payload>(\n        type: ActionType,\n        payload: Payload,\n    ): IActionWithPayload<ActionType, Payload>;\n    public static createAction<ActionType extends string, Payload>(type: ActionType, payload?: Payload) {\n        return payload === undefined ? { type } : { type, payload };\n    }\n\n    /**\n     * Create request, response, and error action creators.\n     *\n     * The dummy types are needed because typescript currently requires all generic types to be specified or all to be inferred. They cannot currently be mixed.\n     *\n     * @see https://github.com/Microsoft/TypeScript/issues/10571#issuecomment-345402872\n     *\n     * @param requestType The string for the request type. This should be a unique constant.\n     * @param responseType The string for the response type. This should be a unique constant.\n     * @param errorType The string for the error type. This should be a unique constant.\n     * @param dummyResponseType A placeholder to infer the type of the response. This isn't used for anything other than inferring a type.\n     * @param dummyMetaType A placeholder to infer the type of the meta. This isn't used for anything other than inferringa  type.\n     *\n     * @example\n     *\n     * ```\n     * const GET_THING_REQUEST = \"GET_THING_REQUEST\";\n     * const GET_THING_RESPONSE = \"GET_THING_RESPONSE\";\n     * const GET_THING_ERROR = \"GET_THING_ERROR\";\n     * interface IThing { thing: string }\n     * interface IThingOptions { page?: number }\n     *\n     * generateApiActionCreators(GET_THING_REQUEST, GET_THING_RESPONSE, GET_THING_ERROR, {} as IThing, {} as IThingOptions);\n     * ```\n     */\n    public static generateApiActionCreators<\n        RequestActionType extends string,\n        ResponseActionType extends string,\n        ErrorActionType extends string,\n        ResponseDataType,\n        Meta = any\n    >(\n        requestType: RequestActionType,\n        responseType: ResponseActionType,\n        errorType: ErrorActionType,\n        dummyResponseType?: ResponseDataType,\n        dummyMetaType?: Meta,\n    ): {\n        request: (meta?: Meta) => IApiAction<RequestActionType, Meta>;\n        response: (\n            payload: IApiResponse<ResponseDataType>,\n            meta?: Meta,\n        ) => IApiResponseAction<ResponseActionType, Meta, ResponseDataType>;\n        error: (error: IApiError, meta?: Meta) => IApiErrorAction<ErrorActionType, Meta>;\n    } {\n        return {\n            request: (meta: Meta) => ReduxActions.createApiRequestAction(requestType, meta),\n            response: (response: IApiResponse<ResponseDataType>, meta: Meta) =>\n                ReduxActions.createApiResponseAction(responseType, meta, response),\n            error: (error: IApiError, meta: Meta) => ReduxActions.createApiErrorAction(errorType, meta, error),\n        };\n    }\n\n    /**\n     * Create an API request action. For use in createApiActions().\n     *\n     * @param type The action's type.\n     * @param meta The type of the meta for the action.\n     */\n    private static createApiRequestAction<ActionType extends string, Meta>(\n        type: ActionType,\n        meta: Meta,\n    ): IApiAction<ActionType, Meta> {\n        return {\n            type,\n            meta,\n        };\n    }\n\n    /**\n     * Create an API error action. For use in createApiActions().\n     *\n     * @param type The action's type.\n     * @param meta The type of the meta for the action.\n     * @param error An API error.\n     */\n    private static createApiErrorAction<ActionType extends string, Meta>(\n        type: ActionType,\n        meta: Meta,\n        error: IApiError,\n    ): IApiErrorAction<ActionType, Meta> {\n        logError(error);\n        return {\n            type,\n            meta,\n            payload: error,\n        };\n    }\n\n    /**\n     * Create an API response action. For use in createApiActions().\n     *\n     * @param type The action's type.\n     * @param meta The type of the meta for the action.\n     * @param payload The shape of the IApiResponse data.\n     */\n    private static createApiResponseAction<ActionType extends string, Meta, ResponseDataType>(\n        type: ActionType,\n        meta: Meta,\n        payload: IApiResponse<ResponseDataType>,\n    ): IApiResponseAction<ActionType, Meta, ResponseDataType> {\n        return {\n            type,\n            meta,\n            payload,\n        };\n    }\n\n    /**\n     * Constructor for the redux actions.\n     *\n     * @param dispatch A redux dispatch function.\n     * @param api An API instance.\n     * @param getState Optionally override the getState method. (generally for testin purposes.)\n     */\n    constructor(protected dispatch: any, protected api: AxiosInstance, getState?: () => any) {\n        if (getState) {\n            this.getState = getState;\n        }\n    }\n\n    /**\n     * Bind dispatch to an action creator.\n     */\n    protected bindDispatch = <T extends (...args) => void>(actionCreator: T): T => {\n        return ((...args) => {\n            return this.dispatch(actionCreator.apply(this, args));\n        }) as any;\n    };\n\n    /**\n     * Generate a simple redux thunk for an API request using action creators.\n     *\n     * @param requestType The request method. Eg. post, patch, get, put.\n     * @param endpoint The endpoint requested.\n     * @param actionCreators Action creators generated from {@link ReduxActions.generateApiActionCreators()}\n     * @param params A parameter object for the request. This will be serialized as a JSON body or query string.\n     * @param meta\n     */\n    protected async dispatchApi<T>(\n        requestType: RequestType,\n        endpoint: string,\n        actionCreators: ReturnType<typeof ReduxActions.generateApiActionCreators>,\n        params: any,\n        meta: any = {},\n    ): Promise<AxiosResponse<T> | undefined> {\n        meta = {\n            ...params,\n            ...meta,\n        };\n        this.dispatch(actionCreators.request(meta));\n        try {\n            const requestPromise =\n                requestType === \"get\"\n                    ? this.api.get(endpoint, { params })\n                    : this.api[requestType as any](endpoint, params);\n            const response: AxiosResponse<T> = await requestPromise;\n            this.dispatch(actionCreators.response(response, meta));\n            return response;\n        } catch (apiError) {\n            this.dispatch(actionCreators.error(apiError, meta));\n        }\n    }\n\n    protected getState(): S {\n        return this.dispatch((c, getState) => {\n            return getState();\n        });\n    }\n}\n\ntype ReduxActionConstructor<T extends ICoreStoreState, R extends ReduxActions<T>> = {\n    new (dispatch: any, api: AxiosInstance): R;\n};\nexport function useReduxActions<T extends ICoreStoreState, R extends ReduxActions<T>>(\n    actionClass: ReduxActionConstructor<T, R>,\n): R {\n    const dispatch = useDispatch();\n    const actions = useMemo(() => {\n        return new actionClass(dispatch, apiv2);\n    }, [dispatch, actionClass]);\n    useDebugValue(actions);\n    return actions;\n}\n\n// Redux FSA\n\n/**\n * It's either a promise, or it isn't\n */\ntype MaybePromise<Type> = Type | Promise<Type>;\n\n/**\n * A redux-thunk with the params as the first argument.  You don't have to\n * return a promise; but, the result of the dispatch will be one.\n */\ntype AsyncWorker<Params, Succ, State, Extra = any> = (\n    params: Params,\n    dispatch: ThunkDispatch<State, Extra, AnyAction>,\n    getState: () => State,\n    extra: Extra,\n) => MaybePromise<Succ>;\n\n/** A function that takes parameters and returns a redux-thunk */\ntype ThunkActionCreator<Params, Result, State, Extra> = (\n    params?: Params,\n) => ThunkAction<Result, State, Extra, AnyAction>;\n\n/**\n * Bind a redux-thunk to typescript-fsa async action creators\n * @param actionCreators The typescript-fsa async action creators\n * @param asyncWorker A redux-thunk with extra `params` as the first argument\n * @returns a ThunkActionCreator, the result of which you can pass to dispatch()\n */\nexport const bindThunkAction = <Params, Succ, Err, State, Extra = any>(\n    actionCreators: AsyncActionCreators<Params, Succ, Err>,\n    asyncWorker: AsyncWorker<Params, Succ, State, Extra>,\n): ThunkActionCreator<Params, Promise<Succ>, State, Extra> => (params: Params) => async (dispatch, getState, extra) => {\n    try {\n        dispatch(actionCreators.started(params!));\n        const result = await asyncWorker(params!, dispatch, getState, extra);\n        dispatch(actionCreators.done({ params: params!, result }));\n        return result;\n    } catch (error) {\n        dispatch(actionCreators.failed({ params: params!, error }));\n        throw error;\n    }\n};\n\n// Action interfaces\nexport interface IAction<T extends string> {\n    type: T;\n}\n\nexport interface IActionWithPayload<T extends string, P> extends IAction<T> {\n    payload: P;\n    meta?: any;\n}\n\nexport interface IActionCreator<T extends string> {\n    (): IAction<T>;\n}\n\ntype FunctionType = (...args: any[]) => any;\ninterface IActionCreatorsMapObject {\n    [actionCreator: string]: FunctionType;\n}\n\n// API Action interfaces\ninterface IApiAction<ActionType, Meta> {\n    type: ActionType;\n    meta: Meta;\n}\n\ninterface IApiErrorAction<ActionType, Meta> extends IApiAction<ActionType, Meta> {\n    payload: IApiError;\n}\n\ninterface IApiResponseAction<ActionType, Meta, ResponseDataType> extends IApiAction<ActionType, Meta> {\n    payload: IApiResponse<ResponseDataType>;\n}\n\ntype RequestType = \"get\" | \"post\" | \"put\" | \"delete\" | \"patch\";\n\n// Utility to pull a group of action types out of an actions object\nexport type ActionsUnion<A extends IActionCreatorsMapObject> = ReturnType<A[keyof A]>;\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { NavLink, NavLinkProps } from \"react-router-dom\";\nimport { makeLocationDescriptorObject, LinkContext, useLinkContext } from \"@library/routing/links/LinkContextProvider\";\nimport { sanitizeUrl } from \"@vanilla/utils\";\nimport { LocationDescriptor } from \"history\";\nimport { siteUrl } from \"@library/utility/appUtils\";\n\nexport interface ISmartLinkProps extends NavLinkProps {\n    tabIndex?: number;\n    to: LocationDescriptor;\n}\n\n/**\n * Link component that checks it's <LinkContext /> to know if it needs to do a full refresh\n * or a partial refresh of the page.\n *\n * If the passed `to` is a subset of the context then a partial navigation will be completed.\n * If the resulting URL has the same pathname as the current page we will do a full refresh.\n *\n * Eg.\n * Context = https://test.com/root\n * To = https://test.com/root/someUrl/deeper/nested\n * Result = /root/someUrl/deeper/nested (react router navigation)\n *\n * Context = https://test.com/otherRoot\n * To = https://test.com/root/someUrl/deeper/nested\n * Result = https://test.com/root/someUrl/deeper/nested (full refresh)\n */\nexport default React.forwardRef(function SmartLink(props: ISmartLinkProps, ref: React.Ref<HTMLAnchorElement>) {\n    const { replace, ...passthru } = props;\n    const context = useLinkContext();\n\n    // Filter out undefined props\n    for (const prop in passthru) {\n        if (!passthru[prop]) {\n            delete passthru[prop];\n        }\n    }\n\n    const href = context.makeHref(props.to);\n    if (context.isDynamicNavigation(href)) {\n        return (\n            <NavLink\n                rel={props.target === \"_blank\" ? \"noreferer noopener ugc\" : undefined}\n                {...passthru}\n                innerRef={ref}\n                to={makeLocationDescriptorObject(props.to, href)}\n                activeClassName=\"isCurrent\"\n                tabIndex={props.tabIndex ? props.tabIndex : 0}\n                replace={replace}\n            />\n        );\n    } else {\n        const isForeign = !href.startsWith(siteUrl(\"\"));\n        return (\n            <a\n                {...passthru}\n                ref={ref}\n                href={sanitizeUrl(href)}\n                tabIndex={props.tabIndex ? props.tabIndex : 0}\n                target={isForeign ? \"_blank\" : undefined}\n                rel={isForeign ? \"noopener\" : props.rel}\n            />\n        );\n    }\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nexport enum LayoutTypes {\n    THREE_COLUMNS = \"three columns\", // Dynamic layout with up to 3 columns that adjusts to its contents. This is the default for KB\n    TWO_COLUMNS = \"two columns\", // Single column, but full width of page\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nexport const getValueIfItExists = (haystack: object | undefined, needle: string, fallback?: any, debug = false) => {\n    if (haystack && checkIfKeyExistsAndIsDefined(haystack, needle)) {\n        return haystack[needle];\n    } else {\n        return fallback;\n    }\n};\n\nexport const checkIfKeyExistsAndIsDefined = (haystack: object, needle: string) => {\n    if (haystack && typeof haystack === \"object\" && !!needle) {\n        return needle in haystack && haystack[needle] !== undefined;\n    } else {\n        return false;\n    }\n};\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport {\n    buttonStates,\n    userSelect,\n    IStateSelectors,\n    absolutePosition,\n    negativeUnit,\n    pointerEvents,\n} from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { Variables } from \"@library/styles/Variables\";\nimport { shadowHelper, shadowOrBorderBasedOnLightness } from \"@library/styles/shadowHelpers\";\nimport { CSSObject } from \"@emotion/css\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { important, percent, rgba } from \"csx\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { buttonResetMixin } from \"@library/forms/buttonMixins\";\n\nexport const notUserContent = \"u-notUserContent\";\n\nexport const dropDownVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"dropDown\");\n\n    const sizing = makeThemeVars(\"sizing\", {\n        widths: {\n            default: 250,\n            medium: 350,\n        },\n        minHeight: 600,\n    });\n\n    const spacer = makeThemeVars(\"spacer\", {\n        margin: {\n            vertical: 8,\n        },\n    });\n\n    const metas = makeThemeVars(\"metas\", {\n        font: Variables.font({\n            size: globalVars.meta.text.size,\n            color: globalVars.meta.text.color,\n        }),\n        padding: {\n            vertical: 6,\n            horizontal: 14,\n        },\n    });\n\n    const item = makeThemeVars(\"item\", {\n        colors: {\n            fg: globalVars.mainColors.fg,\n        },\n        minHeight: 30,\n        mobile: {\n            minHeight: 44,\n            fontSize: 16,\n        },\n\n        padding: {\n            top: 6,\n            horizontal: 14,\n        },\n    });\n\n    const sectionTitle = makeThemeVars(\"sectionTitle\", {\n        padding: {\n            top: 0,\n            bottom: 0,\n        },\n    });\n\n    const title = makeThemeVars(\"title\", {\n        color: globalVars.mainColors.fg,\n    });\n\n    const contents = makeThemeVars(\"contents\", {\n        bg: globalVars.mainColors.bg,\n        fg: globalVars.mainColors.fg,\n        border: globalVars.borderType.dropDowns,\n        padding: {\n            vertical: 9,\n            horizontal: 16,\n        },\n    });\n\n    return {\n        sizing,\n        metas,\n        item,\n        sectionTitle,\n        spacer,\n        title,\n        contents,\n    };\n});\n\nexport const dropDownClasses = useThemeCache(() => {\n    const vars = dropDownVariables();\n    const globalVars = globalVariables();\n    const style = styleFactory(\"dropDown\");\n    const shadows = shadowHelper();\n    const mediaQueries = layoutVariables().mediaQueries();\n\n    const root = style({\n        position: \"relative\",\n        listStyle: \"none\",\n    });\n\n    const contents = style(\n        \"contents\",\n        {\n            position: \"absolute\",\n            minWidth: styleUnit(vars.sizing.widths.default),\n            backgroundColor: ColorsUtils.colorOut(vars.contents.bg),\n            color: ColorsUtils.colorOut(vars.contents.fg),\n            overflow: \"auto\",\n            ...Mixins.border(vars.contents.border),\n            ...shadowOrBorderBasedOnLightness(\n                vars.contents.bg,\n                Mixins.border(vars.contents.border),\n                shadows.dropDown(),\n            ),\n            ...{\n                \"&&\": {\n                    zIndex: 3,\n                    ...Mixins.border(vars.contents.border),\n                },\n                \"&.isMedium\": {\n                    width: styleUnit(vars.sizing.widths.medium),\n                },\n                \"&.isParentWidth\": {\n                    minWidth: \"initial\",\n                    left: 0,\n                    right: 0,\n                },\n                \"&.isOwnWidth\": {\n                    width: \"initial\",\n                },\n                \"&.isRightAligned\": {\n                    right: 0,\n                    top: 0,\n                },\n                \".frame\": {\n                    boxShadow: \"none\",\n                },\n                \"&.noMinWidth\": {\n                    minWidth: 0,\n                },\n                \"&.hasVerticalPadding\": {\n                    ...Mixins.padding({\n                        vertical: 12,\n                        horizontal: important(0),\n                    }),\n                },\n            },\n        },\n        mediaQueries.oneColumnDown({\n            ...{\n                \"&.isOwnWidth\": {\n                    width: percent(100),\n                },\n            },\n        }),\n    );\n\n    const asModal = style(\"asModal\", {\n        ...{\n            \"&.hasVerticalPadding\": Mixins.padding({\n                vertical: 12,\n            }),\n        },\n    });\n\n    const likeDropDownContent = style(\"likeDropDownContent\", {\n        ...shadows.dropDown(),\n        backgroundColor: ColorsUtils.colorOut(globalVars.mainColors.bg),\n        ...Mixins.border(vars.contents.border),\n    });\n\n    const items = style(\n        \"items\",\n        {\n            padding: 0,\n            fontSize: styleUnit(globalVars.fonts.size.medium),\n        },\n        mediaQueries.oneColumnDown({\n            ...Mixins.padding({\n                vertical: 9,\n            }),\n        }),\n    );\n\n    const metaItems = style(\"metaItems\", {\n        ...{\n            \"&&\": {\n                display: \"block\",\n            },\n        },\n        ...Mixins.padding(vars.metas.padding),\n    });\n\n    const metaItem = style(\"metaItem\", {\n        ...{\n            \"& + &\": {\n                paddingTop: styleUnit(vars.item.padding.top),\n            },\n        },\n        ...Mixins.font(vars.metas.font),\n    });\n\n    // wrapping element\n    const item = style(\"item\", {\n        ...userSelect(\"none\"),\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n        width: percent(100),\n        margin: 0,\n        color: \"inherit\",\n        textAlign: \"left\",\n        lineHeight: globalVars.lineHeights.condensed,\n    });\n\n    const section = style(\"section\", {\n        display: \"block\",\n    });\n\n    const toggleButtonIcon = style(\"toggleButtonIcon\", {\n        ...{\n            ...buttonStates({\n                allStates: {\n                    color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n                },\n            }),\n        },\n    });\n\n    const action = style(\"action\", {\n        ...{\n            \"&&\": actionMixin(),\n        },\n    });\n\n    const actionActive = style(\"actionActive\", {\n        ...{\n            \"&&\": {\n                color: important(ColorsUtils.colorOut(globalVars.links.colors.active)!),\n                fontWeight: important(globalVars.fonts.weights.bold) as any,\n            },\n        },\n    });\n\n    const text = style(\"text\", {\n        display: \"block\",\n        flex: 1,\n    });\n\n    const separator = style(\"separator\", {\n        listStyle: \"none\",\n        height: styleUnit(globalVars.separator.size),\n        backgroundColor: ColorsUtils.colorOut(globalVars.separator.color),\n        ...Mixins.margin(vars.spacer.margin),\n        border: \"none\",\n        ...{\n            \"&:first-child\": {\n                height: 0,\n                ...Mixins.margin({ all: 0, top: vars.spacer.margin.vertical * 1.5 }),\n            },\n        },\n    });\n\n    const panelNavItems = style(\"panelNavItems\", {\n        display: \"flex\",\n        alignItems: \"flex-start\",\n    });\n\n    const panel = style(\"panel\", {\n        backgroundColor: ColorsUtils.colorOut(vars.contents.bg),\n        ...absolutePosition.fullSizeOfParent(),\n        zIndex: 2,\n    });\n\n    const panelFirstStyle: CSSObject = {\n        // We want the initial view to have no left space\n        \"& li\": {\n            paddingLeft: important(styleUnit(0)),\n        },\n        \"&&\": {\n            position: \"relative\",\n            height: \"initial\",\n            zIndex: 0,\n        },\n    };\n    const panelFirst = style(\"panelFirst\", panelFirstStyle);\n\n    const panelMobileOnly = style(\"panelMobileOnly\", panelFirstStyle);\n\n    const panelLast = style(\"panelLast\", {\n        ...{\n            \"&&\": {},\n        },\n    });\n\n    const panelContent = style(\"panelContent\", {\n        flex: 1,\n        ...{\n            \"&.isNested\": {},\n        },\n    });\n    const sectionContents = style(\"sectionContents\", {\n        display: \"block\",\n        position: \"relative\",\n    });\n\n    const sectionHeading = style(\"sectionHeading\", {\n        ...{\n            \"&&\": {\n                color: ColorsUtils.colorOut(globalVars.meta.text.color),\n                fontSize: styleUnit(globalVars.fonts.size.small),\n                textTransform: \"uppercase\",\n                textAlign: \"center\",\n                fontWeight: globalVars.fonts.weights.semiBold,\n                ...Mixins.padding(vars.sectionTitle.padding),\n            },\n            [`& + .${sectionContents} li:first-child`]: { paddingTop: styleUnit(vars.spacer.margin.vertical) },\n        },\n    });\n\n    const headingContentContainer = style(\"headingContentContainer\", {\n        display: \"flex\",\n        alignItems: \"center\",\n        height: styleUnit(44),\n    });\n\n    const headingTitleContainer = style(\"headingTitleContainer\", {\n        flex: \"auto\",\n    });\n\n    const arrow = style(\"arrow\", {\n        ...{\n            \"&&\": {\n                padding: styleUnit(globalVars.gutter.quarter),\n            },\n        },\n    });\n\n    const actionIcon = style(\"actionIcon\", {\n        marginRight: globalVars.gutter.half,\n    });\n\n    const backButton = style(\n        \"backButton\",\n        {\n            ...{\n                \"&&\": {\n                    zIndex: 2,\n                    minHeight: styleUnit(vars.item.minHeight),\n                    transform: \"translateX(12px)\",\n                },\n            },\n        },\n        mediaQueries.oneColumnDown({\n            ...{\n                \"&&\": {\n                    minHeight: styleUnit(vars.item.mobile.minHeight),\n                },\n            },\n        }),\n    );\n\n    const count = style(\"count\", {\n        fontSize: styleUnit(globalVars.fonts.size.small),\n        paddingLeft: \"1em\",\n        marginLeft: \"auto\",\n    });\n\n    const verticalPadding = style(\n        \"verticalPadding\",\n        {\n            ...Mixins.padding({\n                vertical: vars.contents.padding.vertical,\n                horizontal: 0,\n            }),\n        },\n        mediaQueries.oneColumnDown({\n            ...Mixins.padding({\n                vertical: 0,\n            }),\n        }),\n    );\n\n    const noVerticalPadding = style(\"noVerticalPadding\", {\n        ...Mixins.padding({ vertical: 0 }),\n    });\n\n    const title = style(\"title\", {\n        ...Mixins.font({\n            weight: globalVars.fonts.weights.semiBold,\n            size: globalVars.fonts.size.medium,\n            lineHeight: globalVars.lineHeights.condensed,\n        }),\n        ...Mixins.padding({\n            all: 0,\n        }),\n        ...Mixins.margin({\n            all: 0,\n        }),\n        textAlign: \"left\",\n        flexGrow: 1,\n        color: ColorsUtils.colorOut(vars.title.color),\n    });\n\n    const paddedFrame = style(\"paddedFrame\", {\n        ...Mixins.padding(vars.contents.padding),\n    });\n\n    const check = style(\"check\", {\n        color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n\n        /// Check to fix icon alignment.\n        transform: `translateX(4px)`,\n    });\n\n    const flyoutOffset = vars.item.padding.horizontal + globalVars.border.width;\n\n    const contentOffsetCenter = style(\"contentOffsetCenter\", {\n        transform: `translateX(-50%)`,\n    });\n\n    const contentOffsetLeft = style(\"contentOffsetLeft\", {\n        transform: `translateX(${styleUnit(flyoutOffset)})`,\n    });\n\n    const contentOffsetRight = style(\"contentOffsetRight\", {\n        transform: `translateX(${negativeUnit(flyoutOffset)})`,\n    });\n\n    // Used to figure out the position of the flyout,\n    // without it being visible to the user until the calculation is complete\n    const positioning = style(\"positioning\", {\n        ...pointerEvents(),\n        ...Mixins.absolute.srOnly(),\n    });\n\n    const closeButton = style(\"closeButtonOffsetRight\", {\n        display: \"inline-block\",\n        marginRight: styleUnit(12),\n    });\n\n    const itemButton = style(\"itemButton\", {\n        paddingLeft: globalVars.gutter.size,\n    });\n\n    return {\n        root,\n        contents,\n        asModal,\n        likeDropDownContent,\n        items,\n        metaItems,\n        metaItem,\n        item,\n        section,\n        toggleButtonIcon,\n        action,\n        actionIcon,\n        actionActive,\n        text,\n        separator,\n        sectionHeading,\n        sectionContents,\n        count,\n        arrow,\n        verticalPadding,\n        title,\n        noVerticalPadding,\n        paddedFrame,\n        panelFirst,\n        panelMobileOnly,\n        panelLast,\n        panelNavItems,\n        panel,\n        panelContent,\n        backButton,\n        check,\n        contentOffsetCenter,\n        contentOffsetLeft,\n        contentOffsetRight,\n        positioning,\n        closeButton,\n        itemButton,\n        headingContentContainer,\n        headingTitleContainer,\n    };\n});\n\n// Contents (button or link)\n// Replaces: .dropDownItem-button, .dropDownItem-link\nexport const actionMixin = (classBasedStates?: IStateSelectors): CSSObject => {\n    const vars = dropDownVariables();\n    const globalVars = globalVariables();\n    const mediaQueries = layoutVariables().mediaQueries();\n\n    return {\n        ...buttonResetMixin(),\n        cursor: \"pointer\",\n        appearance: \"none\",\n        display: \"flex\",\n        alignItems: \"center\",\n        width: percent(100),\n        textAlign: \"left\",\n        minHeight: styleUnit(vars.item.minHeight),\n        lineHeight: globalVars.lineHeights.condensed,\n        ...Mixins.padding({\n            vertical: 4,\n            horizontal: vars.item.padding.horizontal,\n        }),\n        ...Mixins.border({\n            color: rgba(0, 0, 0, 0),\n            radius: 0,\n        }),\n        color: ColorsUtils.colorOut(vars.item.colors.fg),\n        ...userSelect(\"none\"),\n        ...buttonStates(\n            {\n                allStates: {\n                    textShadow: \"none\",\n                    outline: 0,\n                },\n                hover: {\n                    backgroundColor: important(ColorsUtils.colorOut(globalVars.states.hover.highlight) as string),\n                    color: globalVars.states.hover.contrast\n                        ? ColorsUtils.colorOut(globalVars.states.hover.contrast)\n                        : undefined,\n                },\n                focus: {\n                    backgroundColor: important(ColorsUtils.colorOut(globalVars.states.focus.highlight) as string),\n                    color: globalVars.states.hover.contrast\n                        ? ColorsUtils.colorOut(globalVars.states.focus.contrast)\n                        : undefined,\n                },\n                active: {\n                    backgroundColor: important(ColorsUtils.colorOut(globalVars.states.active.highlight) as string),\n                    color: globalVars.states.hover.contrast\n                        ? ColorsUtils.colorOut(globalVars.states.active.contrast)\n                        : undefined,\n                },\n                keyboardFocus: {\n                    borderColor: ColorsUtils.colorOut(globalVars.states.focus.highlight),\n                    color: globalVars.states.hover.contrast\n                        ? ColorsUtils.colorOut(globalVars.states.focus.contrast)\n                        : undefined,\n                },\n            },\n            undefined,\n            classBasedStates,\n        ),\n        ...mediaQueries.oneColumnDown({\n            fontSize: styleUnit(vars.item.mobile.fontSize),\n            fontWeight: globalVars.fonts.weights.semiBold,\n            minHeight: styleUnit(vars.item.mobile.minHeight),\n        }),\n    };\n};\n","/**\n * Entrypoint for the APIv2 calls. Prepulates an axios instance with some config settings.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { t, getMeta, siteUrl } from \"@library/utility/appUtils\";\nimport { indexArrayByKey, notEmpty } from \"@vanilla/utils\";\nimport axios, { AxiosResponse, AxiosRequestConfig, AxiosError } from \"axios\";\nimport qs from \"qs\";\nimport { sprintf } from \"sprintf-js\";\nimport { humanFileSize } from \"@library/utility/fileUtils\";\nimport { IApiError, IFieldError } from \"@library/@types/api/core\";\nimport { IError } from \"@library/errorPages/CoreErrorMessages\";\n\nfunction fieldErrorTransformer(responseData, headers: any) {\n    if (responseData && responseData.status >= 400 && responseData.errors && responseData.errors.length > 0) {\n        responseData.errors = indexArrayByKey(responseData.errors, \"field\");\n    }\n\n    return responseData;\n}\n\nconst apiv2 = axios.create({\n    baseURL: siteUrl(\"/api/v2/\"),\n    headers: {\n        common: {\n            \"X-Requested-With\": \"vanilla\",\n        },\n    },\n    transformResponse: [...(axios.defaults.transformResponse as any), fieldErrorTransformer],\n    paramsSerializer: (params) => qs.stringify(params),\n});\n\n/**\n * Try to extract a JSON error out of a cloudflare HTML error.\n */\nexport function extractJsonErrorFromCFHtmlString(body: string): IError | null {\n    try {\n        const parser = new DOMParser();\n        const dom = parser.parseFromString(body, \"text/html\");\n        const details = dom.querySelector(\".cf-error-details\");\n        if (!details) {\n            return null;\n        }\n\n        const title = details.querySelector(\"h1\")?.innerText ?? t(\"An Error has Occured\");\n        const description = details.querySelector(\"p\")?.innerText ?? \"\";\n\n        const footers = dom.querySelectorAll(\".footer-p\");\n        let rayID: string | null = null;\n        for (const footer of footers) {\n            if (!(footer instanceof HTMLElement)) {\n                continue;\n            }\n\n            if (!footer.innerText.includes(\"Ray ID\")) {\n                continue;\n            }\n\n            rayID = footer.innerText;\n        }\n\n        return {\n            message: title,\n            description: [description, rayID].filter(notEmpty).join(\" \"),\n        };\n    } catch (e) {\n        return null;\n    }\n}\n\n/**\n * Error handler for cloudflare errors when making APIv2 requests.\n */\nfunction cloudflareAxiosErrorHandler(error: AxiosError) {\n    const data = error.response?.data || \"\";\n\n    if (typeof data === \"object\" && data.message) {\n        (error as any).description = data.message;\n    }\n\n    const contentType = error.response?.headers?.[\"content-type\"];\n    if (error.response && typeof contentType === \"string\" && contentType.startsWith(\"text/html\")) {\n        // we have an HTML error.\n\n        const htmlResponse = error.response.data || \"\";\n        const newError = extractJsonErrorFromCFHtmlString(htmlResponse);\n        if (newError) {\n            return Promise.reject(newError);\n        }\n    }\n\n    return Promise.reject(error);\n}\n\n// Apply the cloudflare error handler.\napiv2.interceptors.response.use(undefined, cloudflareAxiosErrorHandler);\n\nexport default apiv2;\n\nexport type ProgressHandler = (progressEvent: any) => void;\n\nexport function createTrackableRequest(\n    requestFunction: (progressHandler: ProgressHandler) => () => Promise<AxiosResponse>,\n) {\n    return (onUploadProgress: ProgressHandler) => {\n        return requestFunction(onUploadProgress);\n    };\n}\n\n/**\n * Upload an image using Vanilla's API v2.\n *\n * @param file - The file to upload.\n */\nexport async function uploadFile(file: File, requestConfig: AxiosRequestConfig = {}) {\n    let allowedExtensions = getMeta(\"upload.allowedExtensions\", []) as string[];\n    allowedExtensions = allowedExtensions.map((ext: string) => ext.toLowerCase());\n    const maxSize = getMeta(\"upload.maxSize\", 0);\n    const filePieces = file.name.split(\".\");\n    const extension = filePieces[filePieces.length - 1] || \"\";\n\n    if (file.size > maxSize) {\n        const humanSize = humanFileSize(maxSize);\n        const stringTotal: string = humanSize.amount + humanSize.unitAbbr;\n        const message = sprintf(t(\"The uploaded file was too big (max %s).\"), stringTotal);\n        throw new Error(message);\n    } else if (!allowedExtensions.includes(extension.toLowerCase())) {\n        const attachmentsString = allowedExtensions.join(\", \");\n        const message = sprintf(\n            t(\n                \"The uploaded file did not have an allowed extension. \\nOnly the following extensions are allowed. \\n%s.\",\n            ),\n            attachmentsString,\n        );\n        throw new Error(message);\n    }\n\n    const data = new FormData();\n    data.append(\"file\", file, file.name);\n\n    const result = await apiv2.post(\"/media\", data, requestConfig);\n    return result.data;\n}\n\n/**\n * Extract a field specific error from an ILoadable if applicable.\n *\n * @param apiError - The error to extract from.\n * @param field - The field to extract.\n *\n * @returns an array of IFieldErrors if found or undefined.\n */\nexport function getFieldErrors(apiError: IApiError | undefined, field: string): IFieldError[] | undefined {\n    if (!apiError) {\n        return;\n    }\n\n    const serverError = apiError.response.data;\n    if (serverError && serverError.errors && serverError.errors[field]) {\n        return serverError.errors[field];\n    }\n}\n\n/**\n * Extract a global error message out of an ILoadable if applicable.\n *\n * @param apiError - The error to extract from.\n * @param validFields - Field to check for overriding fields errors from. A global error only shows if there are no valid field errors.\n *\n * @returns A global error message or an undefined.\n */\nexport function getGlobalErrorMessage(apiError: IApiError | undefined, validFields: string[] = []): string | undefined {\n    if (!apiError) {\n        return;\n    }\n    for (const field of validFields) {\n        if (getFieldErrors(apiError, field)) {\n            return;\n        }\n    }\n\n    const serverError = apiError.response && apiError.response.data;\n    if (serverError && serverError.message) {\n        return serverError.message;\n    }\n\n    return t(\"Something went wrong while contacting the server.\");\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { BorderRadiusProperty } from \"csstype\";\nimport { ColorHelper } from \"csx\";\nimport { TLength } from \"@library/styles/styleShim\";\nimport { CSSObject } from \"@emotion/css\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\n\ninterface IShadowSizing {\n    horizontalOffset: number;\n    verticalOffset: number;\n    blur: number;\n    spread: number;\n    opacity: number;\n}\n\nexport const shadowVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeVariables = variableFactory(\"shadow\");\n\n    const widget: IShadowSizing = makeVariables(\"widget\", {\n        horizontalOffset: 0,\n        verticalOffset: 1,\n        blur: 3,\n        spread: 0,\n        opacity: 0.22,\n    });\n\n    const widgetHover: IShadowSizing = makeVariables(\"widgetHover\", {\n        horizontalOffset: 0,\n        verticalOffset: 2,\n        blur: 4,\n        spread: 0,\n        opacity: 0.22,\n    });\n\n    const dropDown: IShadowSizing = makeVariables(\"dropDown\", {\n        horizontalOffset: 0,\n        verticalOffset: 5,\n        blur: 10,\n        spread: 0,\n        opacity: globalVars.borderType.dropDowns.width > 1 ? 0 : 0.3,\n    });\n\n    const modal: IShadowSizing = makeVariables(\"modal\", {\n        horizontalOffset: 0,\n        verticalOffset: 5,\n        blur: 20,\n        spread: 0,\n        opacity: 0.5,\n    });\n\n    const floatingButton: IShadowSizing = makeVariables(\"floatingButton\", {\n        horizontalOffset: 0,\n        verticalOffset: 5,\n        blur: 10,\n        spread: 0,\n        opacity: 0.5,\n    });\n\n    return { widget, widgetHover, dropDown, modal, floatingButton };\n});\n\nexport const shadowHelper = useThemeCache(() => {\n    const vars = shadowVariables();\n    const globalVars = globalVariables();\n    const shadowBaseColor = globalVars.mainColors.fg;\n    const makeShadow = (opacity: number = 0.3) => `0 1px 3px 0 ${shadowBaseColor.fade(opacity)}`;\n    const embed = (baseColor: ColorHelper = shadowBaseColor) => {\n        const { verticalOffset, horizontalOffset, blur, spread, opacity } = vars.widget;\n        return {\n            boxShadow: `${horizontalOffset} ${styleUnit(verticalOffset)} ${styleUnit(blur)} ${styleUnit(\n                spread,\n            )} ${baseColor.fade(opacity)}`,\n        };\n    };\n\n    const embedHover = (baseColor: ColorHelper = shadowBaseColor) => {\n        const { verticalOffset, horizontalOffset, blur, spread, opacity } = vars.widgetHover;\n        return {\n            boxShadow: `${horizontalOffset} ${styleUnit(verticalOffset)} ${styleUnit(blur)} ${styleUnit(\n                spread,\n            )} ${baseColor.darken(0.5).fade(opacity)}`,\n        };\n    };\n\n    const dropDown = (baseColor: ColorHelper = shadowBaseColor) => {\n        const { verticalOffset, horizontalOffset, blur, spread, opacity } = vars.dropDown;\n        return {\n            boxShadow: `${horizontalOffset} ${styleUnit(verticalOffset)} ${styleUnit(blur)} ${styleUnit(\n                spread,\n            )} ${baseColor.fade(opacity)}`,\n        };\n    };\n\n    const floatingButton = (baseColor: ColorHelper = shadowBaseColor) => {\n        const { verticalOffset, horizontalOffset, blur, spread, opacity } = vars.floatingButton;\n        return {\n            boxShadow: `${horizontalOffset} ${styleUnit(verticalOffset)} ${styleUnit(blur)} ${styleUnit(\n                spread,\n            )} ${baseColor.fade(opacity)}`,\n        };\n    };\n\n    const modal = (baseColor: ColorHelper = shadowBaseColor) => {\n        const { verticalOffset, horizontalOffset, blur, spread, opacity } = vars.modal;\n        return {\n            boxShadow: `${horizontalOffset} ${styleUnit(verticalOffset)} ${styleUnit(blur)} ${styleUnit(\n                spread,\n            )} ${baseColor.fade(opacity)}`,\n        };\n    };\n\n    const contrast = (\n        baseColor: ColorHelper = globalVars.mainColors.fg,\n        hasBorder: boolean = false,\n        borderRadius: BorderRadiusProperty<TLength> = 0,\n    ) => {\n        const shadowColor = baseColor.fade(0.2);\n        let border = {};\n\n        if (hasBorder) {\n            border = {\n                outline: `solid 1px ${shadowColor.toString()}`,\n                radius: borderRadius,\n            };\n        }\n\n        return {\n            boxShadow: `0 0 3px 0 ${baseColor.fade(0.3)}`,\n            ...border,\n        };\n    };\n\n    return { embed, embedHover, dropDown, modal, contrast, makeShadow, floatingButton };\n});\n\nexport const shadowOrBorderBasedOnLightness = (\n    referenceColor?: ColorHelper | string,\n    borderStyles?: CSSObject,\n    shadowStyles?: CSSObject,\n    flip?: boolean,\n): CSSObject => {\n    const globalVars = globalVariables();\n    if (!referenceColor) {\n        referenceColor = globalVars.mainColors.bg;\n    }\n\n    if (!borderStyles) {\n        borderStyles = Mixins.border();\n    }\n\n    if (!shadowStyles) {\n        shadowStyles = shadowHelper().dropDown();\n    }\n\n    if (referenceColor instanceof ColorHelper && ColorsUtils.isLightColor(referenceColor) && !flip) {\n        // Shadow for light colors\n        return shadowStyles;\n    } else {\n        // Border for dark colors\n        return borderStyles;\n    }\n};\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nenum ModalSizes {\n    FULL_SCREEN = \"full screen\",\n    MODAL_AS_SIDE_PANEL_RIGHT = \"render as full screen side panel from right\",\n    MODAL_AS_SIDE_PANEL_RIGHT_LARGE = \"render as full screen side panel from right large\",\n    MODAL_AS_SIDE_PANEL_LEFT = \"render as full screen side panel from left\",\n    MODAL_AS_DROP_DOWN = \"render as drop down\",\n    XL = \"xl\",\n    LARGE = \"large\",\n    MEDIUM = \"medium\",\n    SMALL = \"small\",\n}\n\nexport default ModalSizes;\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport ButtonLoader from \"@library/loaders/ButtonLoader\";\nimport { tokensClasses } from \"@library/forms/select/tokensStyles\";\nimport { t } from \"@library/utility/appUtils\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { dropDownClasses } from \"@library/flyouts/dropDownStyles\";\nimport { MultiValueRemoveProps } from \"react-select/lib/components/MultiValue\";\nimport { MenuListComponentProps, MenuProps } from \"react-select/lib/components/Menu\";\nimport { ControlProps } from \"react-select/lib/components/Control\";\nimport { ValueContainerProps } from \"react-select/lib/components/containers\";\nimport classNames from \"classnames\";\nimport { OptionProps } from \"react-select/lib/components/Option\";\nimport { components } from \"react-select\";\nimport { CloseTinyIcon, CheckCompactIcon, DownTriangleIcon } from \"@library/icons/common\";\nimport { IComboBoxOption } from \"@library/features/search/SearchBar\";\nimport { selectOneClasses } from \"@library/forms/select/selectOneStyles\";\n\n/**\n * Overwrite for the controlContainer component in React Select\n * @param props\n */\nexport function Control(props: ControlProps<any>) {\n    const { className, ...rest } = props;\n    return <components.Control className={classNames(\"suggestedTextInput-control\", className)} {...rest} />;\n}\n\n/**\n * Overwrite for the menuOption component in React Select\n * @param props\n */\nexport function OptionLoader(props: OptionProps<any>) {\n    props = {\n        ...props,\n        children: <ButtonLoader />,\n    };\n\n    return <SelectOption {...props} value=\"\" />;\n}\n\n/**\n * Overwrite for the menu component in React Select\n * @param props - menu props\n */\nexport function Menu(props: MenuProps<any>) {\n    const classes = dropDownClasses();\n    return (\n        <components.Menu\n            {...props}\n            className={classNames(\"suggestedTextInput-menu\", \"dropDown-contents\", \"isParentWidth\", classes.contents)}\n        />\n    );\n}\n\n/**\n * Overwrite for the input menuList component in React Select\n * @param props - props for menuList\n */\nexport function MenuList(props: MenuListComponentProps<any>) {\n    const { ...rest } = props;\n\n    return (\n        <components.MenuList {...rest}>\n            <ul className=\"suggestedTextInput-menuItems\">{props.children}</ul>\n        </components.MenuList>\n    );\n}\n\n/**\n * Overwrite for the multiValueRemove component in React Select\n * @param props - props of component\n */\nexport function MultiValueRemove(props: MultiValueRemoveProps<any>) {\n    const { innerProps, selectProps } = props;\n    const classesTokens = tokensClasses();\n\n    // We need to bind the function to the props for that component\n    const handleKeyDown = (event) => {\n        switch (event.key) {\n            case \"Enter\":\n            case \"Spacebar\":\n            case \" \":\n                innerProps.onClick(event);\n                break;\n        }\n    };\n\n    return (\n        <components.MultiValueRemove {...props} className=\"suggestedTextInput-tokenRemove\">\n            <button\n                {...innerProps}\n                className={classNames(ButtonTypes.CUSTOM, `${selectProps.classNamePrefix}-clear`)}\n                type=\"button\"\n                style={{}}\n                aria-hidden={undefined} // Unset the prop in restInnerProps\n                onKeyDown={handleKeyDown}\n                onClick={innerProps.onClick}\n                onTouchEnd={innerProps.onTouchEnd}\n                onMouseDown={innerProps.onMouseDown}\n                title={t(\"Clear\")}\n                aria-label={t(\"Clear\")}\n            >\n                <CloseTinyIcon className={classNames(\"suggestedTextInput-tokenRemoveIcon\", classesTokens.removeIcon)} />\n            </button>\n        </components.MultiValueRemove>\n    );\n}\n\n/**\n * Overwrite for the noOptionsMessage component in React Select\n * @param props\n */\nexport function NoOptionsMessage(props: OptionProps<any>) {\n    props = {\n        ...props,\n        className: classNames(\"suggestedTextInput-noOptions\", props.className),\n    };\n    return <components.NoOptionsMessage {...props} />;\n}\n\nexport function NullComponent() {\n    return <></>;\n}\n\ntype ISelectOptionOverwrite = OptionProps<any> & IComboBoxOption;\n\n/**\n * Overwrite for the menuOption component in React Select\n * @param props\n */\nexport function SelectOption(props: ISelectOptionOverwrite) {\n    const { isSelected, isFocused, selectProps, value } = props;\n\n    return (\n        <li className=\"suggestedTextInput-item\">\n            <button\n                {...(props.innerProps as any)}\n                type=\"button\"\n                className={classNames(\"suggestedTextInput-option\", {\n                    isSelected,\n                    isFocused,\n                })}\n            >\n                <span className=\"suggestedTextInput-head\">\n                    <span className=\"suggestedTextInput-title\">\n                        {props.children}\n                        {props.data?.data?.parentLabel && (\n                            <span\n                                className={\"suggestedTextInput-parentTag\"}\n                            >{` - ${props.data.data.parentLabel}`}</span>\n                        )}\n                    </span>\n                    {(isSelected || value === selectProps.value?.value) && (\n                        <CheckCompactIcon className={selectOneClasses().checkIcon} />\n                    )}\n                </span>\n            </button>\n        </li>\n    );\n}\n\n/**\n * Overwrite for the valueContainer component in React Select\n * @param children\n * @param props\n */\nexport function ValueContainer(props: ValueContainerProps<any>) {\n    return (\n        <components.ValueContainer\n            {...props}\n            className={classNames(\"suggestedTextInput-valueContainer inputBlock-inputText inputText\", props.className)}\n        />\n    );\n}\n\n/**\n * Overwrite for the DropdownIndicator component in React Select\n * @param props - props of component\n */\nexport function DropdownIndicator(props) {\n    const { innerProps } = props;\n    const Component: React.ComponentType = components.DropdownIndicator as any;\n    return (\n        <Component {...props}>\n            <div {...innerProps}>\n                <DownTriangleIcon className={selectOneClasses().chevron} />\n            </div>\n        </Component>\n    );\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2021 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { BorderType } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Variables } from \"@library/styles/Variables\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { getPixelNumber, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { color, px, rgba, viewHeight } from \"csx\";\nimport { media, TLength } from \"@library/styles/styleShim\";\nimport { CSSObject } from \"@emotion/css\";\nimport { IButtonType } from \"@library/forms/styleHelperButtonInterface\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { LogoAlignment } from \"./LogoAlignment\";\nimport { BackgroundProperty } from \"csstype\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\n\n/**\n * @varGroup titleBar\n * @title Title Bar\n * @description The TitleBar is the sticky navigation bar, normally containing a logo,\n * navigation links, a searchbar, and the mebox.\n */\n\nexport const titleBarVariables = useThemeCache((forcedVars?: IThemeVariables) => {\n    const globalVars = globalVariables(forcedVars);\n    const formElementVars = formElementsVariables(forcedVars);\n    const makeThemeVars = variableFactory(\"titleBar\", forcedVars);\n\n    const sizing = makeThemeVars(\"sizing\", {\n        /**\n         * @var titleBar.sizing.height\n         * @description Pixel height of the Title Bar. Recommended between 48 and 90\n         * @type number|string\n         */\n        height: 48,\n        spacer: 12,\n        mobile: {\n            /**\n             * @var titleBar.sizing.mobile.height\n             * @title Height (Mobile)\n             * @description Pixel height of the Title Bar for mobile screen sizes.\n             * As mobile devices have smaller screens, it's recommended to use a smaller height here than on desktop.\n             * @type number|string\n             */\n            height: 44,\n            width: formElementVars.sizing.height,\n        },\n    });\n\n    const spacing = makeThemeVars(\"spacing\", {\n        /**\n         * @varGroup titleBar.spacing.padding\n         * @title Title Bar\n         * @expand spacing\n         */\n        padding: Variables.spacing({\n            top: 0,\n            bottom: 0,\n        }),\n    });\n\n    // Note that this overlay will go on top of the bg image, if you have one.\n    const overlay = makeThemeVars(\"overlay\", {\n        /**\n         * @var titleBar.overlay.background\n         * @title Background Overlay\n         * @description An background to overlay on top of a background image if one is specified.\n         * Accepts any value that works for a CSS \"background\" property.\n         * This can be useful to add contrast to a titlebar background that otherwise might not have enough.\n         * @default linear-gradient(to bottom, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.3))\n         */\n        background: undefined as BackgroundProperty<TLength> | Array<BackgroundProperty<TLength>> | undefined,\n    });\n\n    const colorsInit = makeThemeVars(\"colors\", {\n        /**\n         * @var titleBar.colors.fg\n         * @title Foreground/Text Color\n         * @description Foreground color for the titlebar.\n         * It's recommended that this color have sufficient color with the background color.\n         * @type string\n         * @format hex-color\n         */\n        fg: globalVars.mainColors.primaryContrast,\n        /**\n         * @var titleBar.colors.bg\n         * @title Background Color\n         * @description Background color for the titlebar.\n         * It's recommended that this color have sufficient color with the foreground color.\n         * @type string\n         * @format hex-color\n         */\n        bg: globalVars.mainColors.primary,\n        /**\n         * @var titleBar.colors.bgImage\n         * @title Background Image\n         * @type string\n         * @description Apply a background image over the Title Bar.\n         * This image will will fill the full background of the Title Bar and will not be stretched.\n         *\n         * It's recommended to use a very wide patterned image,\n         * of which the middle portion make sense on it's own (for mobile devices.)\n         *\n         * This should be a full URL to an image.\n         */\n        bgImage: null as string | null,\n    });\n\n    const colors = makeThemeVars(\"colors\", {\n        ...colorsInit,\n        /**\n         * @varGroup titleBar.colors.state\n         * @title TitleBar - State Colors\n         * @commonTitle TitleBar\n         * @commonDescription By default this color is generated based on the regular color.\n         */\n        state: {\n            /**\n             * @var titleBar.colors.state.bg\n             * @title Background Color (State)\n             * @description The background hover/state color for various buttons in the Title Bar.\n             * It is recommended that this color have strong contrast with the foreground color.\n             * @type string\n             * @format hex-color\n             */\n            bg: ColorsUtils.isLightColor(colorsInit.bg) ? rgba(0, 0, 0, 0.1) : rgba(255, 255, 255, 0.1),\n\n            /**\n             * @var titleBar.colors.state.bg\n             * @title Foreground Color (State)\n             * @description The foreground hover/state color for various buttons in the Title Bar.\n             * It is recommended that this color have strong contrast with the background color.\n             * @type string\n             * @format hex-color\n             */\n            fg: colorsInit.fg,\n        },\n    });\n\n    /**\n     * @varGroup titleBar.border\n     * @title TitleBar - Border\n     * @expand border\n     */\n    const border = makeThemeVars(\"border\", {\n        /**\n         * @var titleBar.border.type\n         * @type string\n         * @enum none|border|shadow\n         */\n        type: BorderType.NONE,\n        color: globalVars.border.color,\n        width: globalVars.border.width,\n    });\n\n    // sizing.height gives you the height of the contents of the titleBar.\n    // If spacing.paddingBottom is set, this value will be different than the height. To be used if you need to get the full height, not just the contents height.\n    const fullHeight =\n        getPixelNumber(sizing.height) +\n            getPixelNumber(spacing.padding.bottom) +\n            getPixelNumber(spacing.padding.top) +\n            border.type ==\n        BorderType.SHADOW_AS_BORDER\n            ? getPixelNumber(border.width)\n            : 0;\n\n    /**\n     * @varGroup titleBar.swoop\n     * @title Banner - Swoop\n     * @commonDescription The follow variables should be used together to fine your desired swoop.\n     * - titleBar.spacings.paddings.top\n     * - titleBar.spacings.paddings.bottom\n     * - titleBar.swoop.amount\n     * - titleBar.swoop.swoopOffset\n     * - titleBar.sizing.height\n     */\n    const swoopInit = makeThemeVars(\"swoop\", {\n        /**\n         * @var titleBar.swoop.amount\n         * @description Create a curved bottom border on the Title Bar.\n         * Larger numbers give a bigger \"swoop\". Please note that this adds some additional space into the bottom of the titlebar.\n         * A value of 10 gives a very subtle swoop that should not require much adjustment elsewhere.\n         * A value of 50 gives a very pronounced swoop and will require adjustments in padding to compensate.\n         * @default 20\n         * @type number\n         */\n        amount: 0,\n    });\n\n    const swoop = makeThemeVars(\"swoop\", {\n        ...swoopInit,\n        /**\n         * @var titleBar.swoop.swoopOffset\n         * @title Offset\n         * @description This parameter determines how much the swoop extends \"outside\" of the TitleBar\n         * Large offsets may require adjustments in padding.\n         * @type number\n         */\n        swoopOffset: (16 * swoopInit.amount) / 50,\n    });\n\n    /**\n     * @varGroup titleBar.fullBleed\n     * @title TitleBar - Full Bleed\n     */\n    const fullBleed = makeThemeVars(\"fullBleed\", {\n        /**\n         * @var titleBar.fullBleed.enabled\n         * @description Enable a \"full bleed\" title bar.\n         * This caused to titlebar to be transparent or semi-transparent and site *on top* of the banner.\n         * @type boolean\n         */\n        enabled: false,\n\n        /**\n         * @var titleBar.fullBleed.startingOpacity\n         * @type number\n         * @description An opacity value between 0 and 1 that determins how transparent the full bleed titlebar is\n         * when sitting on top of the banner.\n         *\n         * 0 - Fully transparent.\n         * 0.3 - Semi transparent.\n         * 1 - Completely solid\n         * @default 0\n         */\n        startingOpacity: 0,\n\n        /**\n         * @var titleBar.fullBleed.endingOpacity\n         * @type number\n         * @description An opacity value between 0 and 1 that determins how transparent the full bleed titlebar is\n         * as the banner is scrolled out of view.\n         *\n         * The banner *always* becomes completely solid after the transition,\n         * so this value only affects the transition between states.\n         *\n         * This value cannot be less than the `titleBar.fullBleed.startingOpacity` value.\n         *\n         * 0 - Fully transparent.\n         * 0.3 - Semi transparent.\n         * 1 - Completely solid\n         * @default 0.15\n         */\n        endingOpacity: 0.15,\n\n        /**\n         * @var titleBar.fullBleed.bgColor\n         * @title Background Color\n         * @description The background color of the full bleed titlebar when it is transparent/semi-transparent.\n         * This defaults to the normal titleBar.colors.bg color, but can be a different color.\n         *\n         * For example, you may want to use a semi-transparent white/black while overlaying the banner,\n         * but want the titlebar to transition a brand color when on it's own or scrolled down the page.\n         * @type string\n         * @format hex-color\n         */\n        bgColor: colors.bg,\n    });\n\n    const clearBorder = {\n        type: BorderType.NONE,\n        color: \"transparent\",\n        width: styleUnit(0),\n        radius: styleUnit(0),\n    };\n\n    const titleBarContainer = makeThemeVars(\"titleBarContainer\", {\n        /**\n         * @var titleBar.titleBarContainer.maxWidth\n         * @description Set the maximum width of the titlebar.\n         * @type number\n         */\n        maxWidth: undefined as number | undefined,\n\n        /**\n         * @varGroup titleBar.titleBarContainer.gutterSpacing\n         * @description Gutters for the container of the titlebar.\n         * @expand spacing\n         */\n        gutterSpacing: Variables.spacing({}),\n        border: Variables.border({\n            left: {\n                ...clearBorder,\n            },\n            right: {\n                ...clearBorder,\n            },\n            top: {\n                ...clearBorder,\n            },\n            bottom: {\n                ...clearBorder,\n            },\n        }),\n    });\n\n    // Fix up the ending opacity so it is always darker than the starting one.\n    fullBleed.endingOpacity = Math.max(fullBleed.startingOpacity, fullBleed.endingOpacity);\n\n    const guest = makeThemeVars(\"guest\", {\n        spacer: 8,\n    });\n\n    const buttonSize = globalVars.buttonIcon.size;\n    const button = makeThemeVars(\"button\", {\n        borderRadius: globalVars.border.radius,\n        size: buttonSize,\n        guest: {\n            minWidth: 86,\n        },\n        mobile: {\n            fontSize: 16,\n            width: buttonSize,\n        },\n        state: {\n            bg: colors.state.bg,\n        },\n    });\n\n    const generatedColors = makeThemeVars(\"generatedColors\", {\n        state: ColorsUtils.offsetLightness(colors.bg, 0.04),\n    });\n\n    const linkButtonDefaults: IButtonType = {\n        name: ButtonTypes.TITLEBAR_LINK,\n        colors: {\n            bg: rgba(0, 0, 0, 0),\n            fg: colors.fg,\n        },\n        fonts: Variables.font({\n            color: colors.fg,\n        }),\n        sizing: {\n            minWidth: styleUnit(globalVars.icon.sizes.large),\n            minHeight: styleUnit(globalVars.icon.sizes.large),\n        },\n        padding: {\n            horizontal: 6,\n        },\n        borders: {\n            style: \"none\",\n            color: rgba(0, 0, 0, 0),\n        },\n        hover: {\n            colors: {\n                bg: generatedColors.state,\n            },\n        },\n        focus: {\n            colors: {\n                bg: generatedColors.state,\n            },\n        },\n        focusAccessible: {\n            colors: {\n                bg: generatedColors.state,\n            },\n        },\n        active: {\n            colors: {\n                bg: generatedColors.state,\n            },\n        },\n    };\n    const linkButton: IButtonType = makeThemeVars(\"linkButton\", linkButtonDefaults);\n\n    const count = makeThemeVars(\"count\", {\n        size: 18,\n        fontSize: 10,\n        fg: globalVars.mainColors.bg,\n        bg: globalVars.mainColors.primary,\n    });\n\n    const dropDownContents = makeThemeVars(\"dropDownContents\", {\n        minWidth: 350,\n        maxHeight: viewHeight(90),\n    });\n\n    const endElements = makeThemeVars(\"endElements\", {\n        flexBasis: buttonSize * 4,\n        mobile: {\n            flexBasis: button.mobile.width - 20,\n        },\n    });\n\n    const buttonContents = makeThemeVars(\"buttonContents\", {\n        state: {\n            bg: button.state.bg,\n        },\n    });\n\n    const signIn = makeThemeVars(\"signIn\", {\n        fg: colors.fg,\n        bg: ColorsUtils.modifyColorBasedOnLightness({\n            color: globalVars.mainColors.primary,\n            weight: 0.1,\n            inverse: true,\n        }),\n        hover: {\n            bg: ColorsUtils.modifyColorBasedOnLightness({\n                color: globalVars.mainColors.primary,\n                weight: 0.2,\n                inverse: true,\n            }),\n        },\n    });\n\n    const resister = makeThemeVars(\"register\", {\n        fg: colors.bg,\n        bg: colors.fg,\n        borderColor: colors.bg,\n        states: {\n            bg: colors.fg.fade(0.9),\n        },\n    });\n\n    const mobileDropDown = makeThemeVars(\"mobileDropdown\", {\n        height: px(sizing.mobile.height),\n    });\n\n    const meBox = makeThemeVars(\"meBox\", {\n        sizing: {\n            buttonContents: formElementVars.sizing.height,\n        },\n    });\n\n    // Note that the logo defined here is the last fallback. If set through the dashboard, it will overwrite these values.\n    /**\n     * @varGroup titleBar.logo\n     * @title TitleBar - Logo\n     */\n    const logo = makeThemeVars(\"logo\", {\n        /**\n         * @var titleBar.logo.doubleLogoStrategy\n         * @description A strategy for dealing with multiple logos when using a custom theme header with the titlebar.\n         * - visible (default) - Always show the logo in the titlebar.\n         * - hidden - Hide the logo in the titlebar.\n         * - fade-in - Fade the logo in after the custom theme header scrolls of the page.\n         * @type string\n         * @enum visible | hidden | fade-in\n         * @default visible\n         */\n        doubleLogoStrategy: \"visible\" as \"hidden\" | \"visible\" | \"fade-in\",\n        /**\n         * @var titleBar.logo.offsetRight\n         * @title Right Margin\n         * @description Apply some spacing between the logo and the navigation items.\n         * @type number\n         */\n        offsetRight: globalVars.gutter.size,\n\n        /**\n         * @var titleBar.logo.justifyContent\n         * @title Logo Placement\n         * @description Where to place the logo in the TitleBar.\n         * @type string\n         * @enum left | center\n         */\n        justifyContent: LogoAlignment.LEFT,\n        maxHeight: undefined,\n        /**\n         * @var titleBar.logo.maxWidth\n         * @type string|number\n         * @description Maximum pixel width to the display the logo.\n         */\n        maxWidth: 200,\n        heightOffset: sizing.height / 3,\n        tablet: {},\n        desktop: {\n            url: undefined,\n        },\n        mobile: {\n            url: undefined,\n            /**\n             * @var titleBar.logo.mobile.maxWidth\n             * @type string | number\n             * @description Maximum pixel width to the display the logo on mobile device sizes.\n             */\n            maxWidth: undefined,\n            maxHeight: undefined,\n            heightOffset: sizing.mobile.height / 4,\n        },\n        offsetVertical: {\n            amount: 0,\n            mobile: {\n                amount: 0,\n            },\n        },\n    });\n\n    /**\n     * @var titleBar.navAlignment.alignment\n     * @title Navigation Alignment\n     * @description How to align the navigation in the titlebar.\n     * _Note: The navigation cannot use center alignment while the logo placement is set to center.\n     * @type string\n     * @enum left | center\n     */\n    const navAlignment = makeThemeVars(\"navAlignment\", {\n        alignment: \"left\" as \"left\" | \"center\",\n    });\n\n    if (logo.justifyContent === LogoAlignment.CENTER) {\n        // Forced to the left because they can't both be in the center.\n        navAlignment.alignment = \"left\";\n    }\n\n    const mobileLogo = makeThemeVars(\"mobileLogo\", {\n        justifyContent: LogoAlignment.CENTER,\n    });\n\n    const breakpoints = makeThemeVars(\"breakpoints\", {\n        compact: 800,\n    });\n\n    const mediaQueries = () => {\n        const full = (styles: CSSObject, useMinWidth: boolean = true) => {\n            return media(\n                {\n                    minWidth: breakpoints.compact + 1,\n                },\n                styles,\n            );\n        };\n\n        const compact = (styles: CSSObject) => {\n            return media(\n                {\n                    maxWidth: breakpoints.compact,\n                },\n                styles,\n            );\n        };\n\n        return {\n            full,\n            compact,\n        };\n    };\n\n    const cancelButtonInit = makeThemeVars(\"closeButtonInit\", {\n        allStates: colors.fg,\n        hoverOpacity: globalVars.constants.states.hover.borderEmphasis,\n    });\n\n    const stateColors = makeThemeVars(\"stateColors\", {\n        hover: cancelButtonInit.allStates.mix(colorsInit.bg, cancelButtonInit.hoverOpacity),\n        focus: cancelButtonInit.allStates,\n        active: cancelButtonInit.allStates,\n    });\n\n    return {\n        fullBleed,\n        titleBarContainer,\n        border,\n        sizing,\n        colors,\n        overlay,\n        signIn,\n        resister,\n        guest,\n        button,\n        linkButton,\n        count,\n        dropDownContents,\n        endElements,\n        buttonContents,\n        mobileDropDown,\n        meBox,\n        logo,\n        mediaQueries,\n        breakpoints,\n        navAlignment,\n        mobileLogo,\n        spacing,\n        swoop,\n        fullHeight,\n        stateColors,\n    };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { allLinkStates, defaultTransition, userSelect } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { calc, important } from \"csx\";\nimport { CSSObject } from \"@emotion/css\";\nimport { tagVariables } from \"@library/styles/tagStyles\";\n\nexport const metasVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"metas\");\n\n    const fonts = makeThemeVars(\"fonts\", {\n        size: globalVars.fonts.size.small,\n    });\n\n    const colors = makeThemeVars(\"color\", {\n        fg: globalVars.meta.text.color,\n        hover: {\n            fg: globalVars.links.colors.active,\n        },\n        focus: {\n            fg: globalVars.links.colors.active,\n        },\n        active: {\n            fg: globalVars.links.colors.active,\n        },\n        deleted: globalVars.messageColors.deleted,\n    });\n\n    const text = makeThemeVars(\"text\", {\n        margin: 4,\n        lineHeight: globalVars.lineHeights.base,\n    });\n\n    const spacing = makeThemeVars(\"spacing\", {\n        verticalMargin: 24,\n        default: globalVars.gutter.quarter,\n    });\n\n    return {\n        fonts,\n        colors,\n        text,\n        spacing,\n    };\n});\n\nexport const metaContainerStyles = (overwrites?: any) => {\n    const vars = metasVariables();\n    const globalVars = globalVariables();\n    const flexed = { display: \"flex\", flexWrap: \"wrap\", justifyContent: \"flex-start\", alignItems: \"center\" };\n    return {\n        display: \"block\",\n        lineHeight: globalVars.lineHeights.meta,\n        color: ColorsUtils.colorOut(vars.colors.fg),\n        width: calc(`100% + ${styleUnit(vars.spacing.default * 2)}`),\n        overflow: \"initial\", // We can't hide overflow or stuff like user cards will not be shown.\n        textAlign: \"left\",\n        fontSize: styleUnit(globalVars.meta.text.size),\n        ...Mixins.margin({\n            left: -vars.spacing.default,\n            right: vars.spacing.default,\n        }),\n        ...{\n            a: {\n                ...allLinkStates({\n                    allStates: {\n                        textShadow: \"none\",\n                    },\n                    noState: {\n                        color: ColorsUtils.colorOut(vars.colors.fg),\n                    },\n                    hover: {\n                        color: ColorsUtils.colorOut(vars.colors.hover.fg),\n                    },\n                    focus: {\n                        color: ColorsUtils.colorOut(vars.colors.focus.fg),\n                    },\n                    active: {\n                        color: ColorsUtils.colorOut(vars.colors.active.fg),\n                    },\n                }),\n            },\n            \"&.isFlexed\": flexed,\n        },\n        ...overwrites,\n    };\n};\n\nexport const metaItemStyle = useThemeCache(() => {\n    const vars = metasVariables();\n    return {\n        display: \"inline-block\",\n        fontSize: styleUnit(vars.fonts.size),\n        color: ColorsUtils.colorOut(vars.colors.fg),\n        ...Mixins.margin({\n            top: 0,\n            right: vars.spacing.default,\n            bottom: 0,\n            left: vars.spacing.default,\n        }),\n        ...{\n            \"& &\": {\n                margin: 0,\n            },\n            \".isDeleted, &.isDeleted\": {\n                color: ColorsUtils.colorOut(vars.colors.deleted.fg),\n            },\n        },\n    };\n});\n\nexport const metasClasses = useThemeCache(() => {\n    const vars = metasVariables();\n    const tagVars = tagVariables();\n    const globalVars = globalVariables();\n    const style = styleFactory(\"metas\");\n\n    const root = style(metaContainerStyles());\n    const meta = style(\"meta\", metaItemStyle());\n    const metaLink = style(\"meta\", { ...metaItemStyle(), fontWeight: globalVars.fonts.weights.semiBold });\n\n    const metaIcon = style(\"metaIcon\", {\n        ...metaItemStyle(),\n        maxHeight: 14,\n        ...{\n            \"& svg\": {\n                display: \"inline-block\",\n                marginBottom: -6,\n            },\n        },\n    });\n\n    const metaLabel = style(\"metaLabel\", {\n        display: \"inline-block\",\n        maxWidth: \"100%\",\n        whiteSpace: \"normal\",\n        textOverflow: \"ellipsis\",\n        ...userSelect(),\n        ...Mixins.padding(tagVars.padding),\n        ...Mixins.border(tagVars.border),\n        ...Mixins.font(tagVars.font),\n        ...defaultTransition(\"border\"),\n        ...Mixins.margin(tagVars.margin),\n    });\n\n    // Get styles of meta, without the margins\n    const metaStyle = style(\"metaStyles\", {\n        display: \"inline-block\",\n        fontSize: styleUnit(vars.fonts.size),\n        color: ColorsUtils.colorOut(vars.colors.fg),\n    });\n\n    const draftStatus = style(\"draftStatus\", {\n        flexGrow: 1,\n        textAlign: \"left\",\n    });\n\n    const noUnderline = style(\"noUnderline\", {\n        textDecoration: important(\"none\"),\n    });\n\n    const inlineBlock = style(\"inlineBlock\", {\n        display: \"inline-flex\",\n        borderTop: \"none !important\",\n        ...{\n            \"& *:hover, & *:focus, & .isFocused\": {\n                color: `${globalVars.links.colors.default} !important`,\n                backgroundColor: \"transparent !important\",\n            },\n        },\n    });\n\n    return {\n        root,\n        meta,\n        metaLabel,\n        metaLink,\n        metaIcon,\n        metaStyle,\n        draftStatus,\n        noUnderline,\n        inlineBlock,\n    };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { EmbedButton } from \"@library/embeddedContent/components/EmbedButton\";\nimport { embedContentClasses } from \"@library/embeddedContent/components/embedStyles\";\nimport { EMBED_FOCUS_CLASS } from \"@library/embeddedContent/embedConstants\";\nimport { useEmbedContext } from \"@library/embeddedContent/IEmbedContext\";\nimport { DeleteIcon } from \"@library/icons/common\";\nimport { EmbedMenu } from \"@rich-editor/editor/pieces/EmbedMenu\";\nimport classNames from \"classnames\";\nimport React from \"react\";\n\ninterface IProps {\n    className?: string;\n    type: string;\n    description?: string;\n    children?: React.ReactNode;\n    noBaseClass?: boolean;\n    isSmall?: boolean;\n    embedActions?: React.ReactNode;\n}\n\nexport const EmbedContent = React.forwardRef<HTMLDivElement, IProps>(function EmbedContent(props: IProps, ref) {\n    const { inEditor, isSelected, deleteSelf, descriptionID } = useEmbedContext();\n    const classes = embedContentClasses();\n\n    return (\n        <div\n            aria-describedby={descriptionID}\n            aria-label={\"External embed content - \" + props.type}\n            className={classNames(props.className, classes.root, !props.noBaseClass && \"embedExternal-content\", {\n                [EMBED_FOCUS_CLASS]: inEditor,\n                [classes.small]: props.isSmall,\n            })}\n            tabIndex={inEditor ? -1 : undefined} // Should only as a whole when inside the editor.\n            ref={ref}\n        >\n            {props.children}\n            {inEditor && isSelected && (\n                <EmbedMenu>\n                    {props.embedActions}\n                    <EmbedButton onClick={deleteSelf}>\n                        <DeleteIcon />\n                    </EmbedButton>\n                </EmbedMenu>\n            )}\n        </div>\n    );\n});\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nexport enum ButtonPreset {\n    SOLID = \"solid\",\n    OUTLINE = \"outline\",\n    TRANSPARENT = \"transparent\",\n    ADVANCED = \"advanced\",\n    HIDE = \"hide\",\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { AriaAttributes } from \"react\";\nimport { t } from \"@library/utility/appUtils\";\nimport classNames from \"classnames\";\nimport { iconClasses } from \"@library/icons/iconStyles\";\nimport { areaHiddenType } from \"@library/styles/styleHelpersVisibility\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\n\nexport function HelpIcon(props: { className?: string }) {\n    const title = t(\"Help\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n            className={classNames(classes.compact, \"icon-help\", props.className)}\n            role=\"img\"\n            aria-label={title}\n        >\n            <title>{title}</title>\n            <path\n                d=\"M12,19a7,7,0,1,0-7-7A7,7,0,0,0,12,19Zm0,1a8,8,0,1,1,8-8A8,8,0,0,1,12,20Zm-.866-6.5v-.338a2,2,0,0,1,.211-.969,2.757,2.757,0,0,1,.741-.8,4.09,4.09,0,0,0,.812-.773,1.156,1.156,0,0,0,.183-.656.826.826,0,0,0-.3-.683,1.333,1.333,0,0,0-.851-.238A2.941,2.941,0,0,0,11,9.185a6.65,6.65,0,0,0-.836.344L9.721,8.6a4.653,4.653,0,0,1,2.3-.6,2.485,2.485,0,0,1,1.645.508,1.727,1.727,0,0,1,.609,1.4,1.983,1.983,0,0,1-.117.706,2.006,2.006,0,0,1-.352.59,5.653,5.653,0,0,1-.812.731,3.088,3.088,0,0,0-.659.64,1.229,1.229,0,0,0-.166.682V13.5Zm-.217,1.688a.7.7,0,0,1,.778-.8.775.775,0,0,1,.582.209.818.818,0,0,1,.2.59.838.838,0,0,1-.2.595.878.878,0,0,1-1.156.006A.844.844,0,0,1,10.917,15.185Z\"\n                transform=\"translate(-4 -4)\"\n                fill=\"currentColor\"\n            />\n        </svg>\n    );\n}\n\nexport function ComposeIcon(props: { className?: string }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            className={classNames(classes.standard, \"icon-compose\", props.className)}\n            aria-hidden=\"true\"\n        >\n            <path\n                fill=\"currentColor\"\n                d=\"M23.591,1.27l-.9-.9a1.289,1.289,0,0,0-1.807,0l-.762.863,2.6,2.587.868-.751a1.24,1.24,0,0,0,.248-.373,1.255,1.255,0,0,0,0-1.052A1.232,1.232,0,0,0,23.591,1.27ZM19.5,20.5H3.5V4.5H15.4l1.4-1.431H2.751A1,1,0,0,0,2,4.07V20.939a1,1,0,0,0,1,1H20.011a1,1,0,0,0,1-1V7L19.5,8.445ZM21.364,3.449l-9.875,9.8-.867-.861,9.874-9.8-.867-.863-4.938,4.9-4.938,4.9L8.74,15.167l3.617-1.055,9.875-9.8Z\"\n            />\n        </svg>\n    );\n}\n\nexport function DownloadIcon(props: { className?: string }) {\n    const title = t(\"Download\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            className={classNames(classes.standard, \"icon-compose\", props.className)}\n            role=\"img\"\n            aria-label={title}\n        >\n            <title>{title}</title>\n            <path\n                d=\"M6.483,10.462h.005a.5.5,0,0,1,.707.01l3.954,4.066V3.887a.5.5,0,0,1,.5-.5h.621a.5.5,0,0,1,.5.5V14.533l4.035-4.073h0a.5.5,0,0,1,.707,0l.437.437a.5.5,0,0,1,0,.707h0l-5.6,5.6a.5.5,0,0,1-.707,0h0l-5.6-5.6a.5.5,0,0,1,0-.707h0ZM20.25,19.5V17.25a.75.75,0,0,1,1.5,0v3A.75.75,0,0,1,21,21H3a.75.75,0,0,1-.75-.75v-3a.75.75,0,0,1,1.5,0V19.5Z\"\n                fill=\"currentColor\"\n            />\n        </svg>\n    );\n}\n\nexport function VanillaLogo(props: { className?: string; fill?: string; isMobile?: boolean }) {\n    const { className, isMobile } = props;\n    const title = `Vanilla`;\n    const classes = iconClasses();\n    const fill = props.fill ? props.fill : \"currentColor\";\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className={classNames(props.className, {\n                [classes.vanillaLogo]: !isMobile,\n                [classes.vanillaLogoMobile]: isMobile,\n            })}\n            viewBox=\"0 0 296.866 119.883\"\n            role=\"img\"\n            aria-label={title}\n        >\n            <title>{title}</title>\n            <path\n                d=\"M107.031,93.8a11.987,11.987,0,0,1-4.588-3.006c-1.349-1.609-2.163-4.3-2.687-6.309-1.277-4.909-.906-10.05-.531-15.051.186-2.492.421-4.98.67-7.467.2-2.026.42-4.049.607-6.077a17.515,17.515,0,0,0,.181-3.355.63.63,0,0,0-.014-.1c-.576-3.325-5.01-4.707-8.435-2.27a8.433,8.433,0,0,0-3.044,5.032c-.252,1-.419,2.018-.593,3.033a15.146,15.146,0,0,1-.606,2.957c-.249.633-.44-.04-.635-.392a10.111,10.111,0,0,0-.787-1.217,9.962,9.962,0,0,0-1.941-1.945A11.521,11.521,0,0,0,79.5,55.5a17.266,17.266,0,0,0-4.669-.143,13.178,13.178,0,0,0-2.5.52c-6.04,1.9-9.562,8.271-11.488,14.013a35.571,35.571,0,0,0-1.681,8.376,40.449,40.449,0,0,0,.22,8.653A36.014,36.014,0,0,0,61.393,95a25.329,25.329,0,0,0,3.692,6.681c3.27,4.142,8.059,6.5,13.376,5.376,5.916-1.244,11.448-7.1,13.25-12.745.23-.72.243-2.379,1.166-1.986.481.2,1.271,2.328,1.608,2.835A14.728,14.728,0,0,0,99.021,99.7c2.893,1.747,12.325,3.29,11.44-2.6C110.159,95.1,108.662,94.491,107.031,93.8ZM87.125,89.332a8.331,8.331,0,0,1-4.608,3.676c-8.591,2.91-12.453-6.761-12.418-13.194.018-3.509,1.116-7.516,3.7-10.067a10.819,10.819,0,0,1,8.8-2.793,6,6,0,0,1,3.031,1.455c1.782,1.594,2.263,3.82,2.64,6.014a41.431,41.431,0,0,1,.657,6.527A15.8,15.8,0,0,1,87.125,89.332Z\"\n                fill={fill}\n            />\n            <path\n                d=\"M144.421,86.531c-.9-7.164,6.483-17.488,6.237-25.784-.117-3.939-1.216-8.582-4.991-10.579A7.246,7.246,0,0,0,144,49.546a16.508,16.508,0,0,0-5.386-.172,17.9,17.9,0,0,0-5.824,1.568,26.016,26.016,0,0,0-8.6,7.126c-1.2,1.415-2.328,2.883-3.468,4.342.091-.116-.685-1.323-.776-1.479q-.445-.765-.961-1.488a16.611,16.611,0,0,0-2.324-2.638,9.659,9.659,0,0,0-5.719-2.737,7.376,7.376,0,0,0-3.453.671,5.485,5.485,0,0,0-2.441,1.825c-.73,1.229-.391,2.852-.02,4.138,1.153,3.989,3.474,7.577,5.192,11.331.18.393.355.789.52,1.188,1.771,4.257,3.91,8.588,4.159,12.893.17,2.942-1.623,7.1.832,7.486,7.989.954,5.764-12.772,7.484-19.963A16.019,16.019,0,0,1,133.728,61.7a1.824,1.824,0,0,1,2.585,1.755c.227,3.507-1.259,7.688-1.937,11.126a78.288,78.288,0,0,0-1.643,12.1c-.293,7.721,2,15.561,10.436,17.4,4.15.906,7.977,1.071,11.322-1.9,2.976-2.643,4.715-6.779,1.989-10.255C150.9,92.26,145.225,92.93,144.421,86.531Z\"\n                fill={fill}\n            />\n            <path\n                d=\"M60.774,114.764c-.59-1.313-1.177-2.628-1.748-3.951-1.492-3.462-2.876-6.972-4.089-10.544C48.983,82.728,46.572,60.9,61.494,47.027a37.626,37.626,0,0,1,16.914-8.781c1.521-.37,6.336-.913,7.03-1.159,1.678-.6.964-4.956.685-6.2-1.45-6.476-9.885-8.881-15.658-8.33-5.986.571-11.164,4.164-15.138,8.487a47.922,47.922,0,0,0-8.6,13.562c-8.145,19.013-4.241,50.08,1.041,58.816-1.489-2.381-4.769-4.529-6.815-6.473-1.976-1.877-3.983-3.723-5.912-5.65A57.731,57.731,0,0,1,24.531,77.77C20.7,70.557,17.91,62.356,17.858,54.148c-.029-4.749.575-10.126,3.241-14.2-4.969-.946-9.68,1.9-13.308,5C3.577,48.546-.487,53.691.047,59.5c.591,6.424,4.5,12.558,7.563,18.083,5.932,10.709,14.266,19.769,23.636,27.6a111.456,111.456,0,0,0,16.287,11.246c3.855,2.2,8.913,4.791,13.336,2.654.4-.2,1.158-.479,1.277-.95.125-.5-.274-1.135-.468-1.563C61.4,115.958,61.052,115.378,60.774,114.764Z\"\n                fill={fill}\n            />\n            <path d=\"M7.791,44.946\" fill={fill} />\n            <path\n                d=\"M167.28,66.51c2.04-3.913,7.259-9.81,5.71-14.594a7.188,7.188,0,0,0-11.143-3.162c-5.4,4.456-5.088,30.312-3.17,34.111,1.021,4.243,7.938,7.332,10.939,3.185a1.75,1.75,0,0,0-.265-2.461h0l-.035-.027a3.983,3.983,0,0,0-1.732-.21c-2.729-.161-3.345-5.914-3.256-7.912C164.467,72.273,165.838,69.275,167.28,66.51Z\"\n                fill={fill}\n            />\n            <path\n                d=\"M291.726,67.85c-4.677-.667-8.018,3.9-11.228,5.406,2.768-7.411-3.456-12.191-4.988-13.723-21.435-14.167-51.728,23.317-36.6,37.842,6.541,5.14,16.874,6.412,24.121.832,1.019,11.687,23.945,13.514,24.118,2.078-27.916,7.189,5.087-16.211,9.15-24.952C297.936,71.817,295.906,68.443,291.726,67.85ZM272.873,78.4a36.587,36.587,0,0,1-5.69,8.773c-2.284,2.779-4.846,5.587-8.354,5.936a7.864,7.864,0,0,1-2.155-.093c-4.034-.724-6.165-3.017-5.937-7.245A17.967,17.967,0,0,1,256.076,74C262.482,67.756,277.819,66.512,272.873,78.4Z\"\n                fill={fill}\n            />\n            <path\n                d=\"M238.05,103.619a21.449,21.449,0,0,1-3.981-1.923,22.521,22.521,0,0,1-6.186-5.578c-3.555-4.656-5.269-10.456-6.017-16.2a65.7,65.7,0,0,1-.46-10.389c30.989-6.622,46.037-40.689,41.17-49.071-4.42-7.613-13.253-5.3-21.08-.23a69.362,69.362,0,0,0-30.177,45.207,12.444,12.444,0,0,1-5.719.042c-.738-.161-1.851-.786-2.592-.536a1.344,1.344,0,0,0-.735,1.753h0c.009.021.018.042.028.063a3.273,3.273,0,0,0,1.641,1.5,18.358,18.358,0,0,0,6.34,2.089c-1.466,13.033,2.769,34.078,11.125,42.85a11.474,11.474,0,0,0,11.389,3.093c3.756-1.037,9.94-4.814,8.5-9.513A4.914,4.914,0,0,0,238.05,103.619Zm17.394-81.455c4.186,1.82-7.493,31.419-32.376,39.883,4.667-15.91,26.575-42.462,32.376-39.884Z\"\n                fill={fill}\n            />\n            <path\n                d=\"M204.208,98.1a21.29,21.29,0,0,1-5.391-1.808,14.9,14.9,0,0,1-3.412-2.7,20.436,20.436,0,0,1-4.333-7.525A39.316,39.316,0,0,1,189.2,73.617a62.079,62.079,0,0,1,2.008-15.76,50.976,50.976,0,0,1,2.27-6.874c.354-.848,1.106-2.384,1.106-2.384s3.1-.121,4.23-.325c11.838-2.139,22.332-12,28.136-22.125C230.93,19.2,235.11,7.9,226.676,2.4c-13.238-8.62-25.25,8.079-30.466,16.7a115.671,115.671,0,0,0-7.479,15.043c-.929,2.2-1.814,4.425-2.683,6.652-.307.787-1.327,3.282-1.327,3.282s-1.626-.273-2.058-.379a23.111,23.111,0,0,1-3.051-.97c-2.76-1.1-6.1-2.994-6.912-6.1,11.01,3.7,16.084-14.924,4.157-17.049-7-.96-10.982,4.883-10.256,11.358a18.377,18.377,0,0,0,4.543,10.506,23.143,23.143,0,0,0,9.23,5.414c.747.264,2.259.739,2.259.739l.852.226s-.371,1.406-.471,1.753c-.62,2.154-1.222,4.312-1.782,6.483a105.862,105.862,0,0,0-2.686,13.678,70.63,70.63,0,0,0-.306,13.427c.587,8.4,2.151,19.117,8.93,24.945,3.11,2.675,9.048,4.589,12.839,2.238,3.312-2.053,4.169-6.421,5.374-9.814a1.869,1.869,0,0,0-.279-2.047A2.238,2.238,0,0,0,204.208,98.1Zm16.448-92.26C235.415,5.6,208.029,44,196.469,43.68,201.529,31.274,213.243,5.933,220.656,5.842Z\"\n                fill={fill}\n            />\n        </svg>\n    );\n}\n\nexport function SettingsIcon(props: { className?: string }) {\n    const title = t(\"Settings\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 20 18\"\n            className={classNames(classes.settings, \"icon-settings\", props.className)}\n            aria-hidden=\"true\"\n        >\n            <title>{title}</title>\n            <path\n                d=\"M6,18v-.5a.5.5,0,0,1,.5-.5h4a.5.5,0,0,1,.5.5V18H22v2H11v.5a.5.5,0,0,1-.5.5h-4a.5.5,0,0,1-.5-.5V20H2V18Zm9-7v-.5a.5.5,0,0,1,.5-.5h4a.5.5,0,0,1,.5.5V11h2v2H20v.5a.5.5,0,0,1-.5.5h-4a.5.5,0,0,1-.5-.5V13H2V11ZM4,4V3.5A.5.5,0,0,1,4.5,3h4a.5.5,0,0,1,.5.5V4H22V6H9v.5a.5.5,0,0,1-.5.5h-4A.5.5,0,0,1,4,6.5V6H2V4ZM5,4V6H8V4Zm11,7v2h3V11ZM7,18v2h3V18Z\"\n                transform=\"translate(-2 -3)\"\n                fill=\"currentColor\"\n            />\n        </svg>\n    );\n}\n\nexport function SearchIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType; \"aria-labelledby\"?: string }) {\n    const title = t(\"Search\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 13.312 13.311\"\n            className={classNames(classes.search, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            aria-label={title}\n            aria-labelledby={props[\"aria-labelledby\"] || \"\"}\n        >\n            <title>{title}</title>\n            <path\n                d=\"M5.193,1.143A4.059,4.059,0,1,0,9.267,5.2,4.059,4.059,0,0,0,5.193,1.143h0M13.043,13.08a1.019,1.019,0,0,1-1.349-.054L8.125,9.456A5.182,5.182,0,1,1,9.477,8.113l3.559,3.559a1.033,1.033,0,0,1,0,1.409Z\"\n                transform=\"translate(-0.031 0.01)\"\n                fill=\"currentColor\"\n            />\n        </svg>\n    );\n}\n\nexport function NotificationsIcon(props: { filled?: boolean; className?: string }) {\n    const title = t(\"Notifications\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 18 20\"\n            className={classNames(classes.notifications, \"icon-notifications\", props.className)}\n            aria-hidden=\"true\"\n        >\n            <title>{title}</title>\n            {!props.filled && (\n                <path\n                    d=\"M10,1.066A5.742,5.742,0,0,1,15,7v3q0,2.288,2.51,4.574A1.5,1.5,0,0,1,18,15.683V16.5A1.5,1.5,0,0,1,16.5,18H11a2,2,0,0,1-4,0H1.5A1.5,1.5,0,0,1,0,16.5v-.817a1.5,1.5,0,0,1,.49-1.109Q3,12.287,3,10V7A5.742,5.742,0,0,1,8,1.066V.958C8,.429,8.3,0,8.677,0h.646C9.7,0,10,.422,10,.951ZM1.5,16.5h15v-.817C14.541,13.9,13.5,12,13.5,10V7A4.262,4.262,0,0,0,9.49,2.5,4.45,4.45,0,0,0,9,2.5,4.262,4.262,0,0,0,4.5,6.51,4.45,4.45,0,0,0,4.5,7v3c0,2-1.041,3.9-3,5.682Z\"\n                    fill=\"currentColor\"\n                />\n            )}\n            {!!props.filled && (\n                <path\n                    d=\"M10,1.066A5.742,5.742,0,0,1,15,7v3q0,2.288,2.51,4.574A1.5,1.5,0,0,1,18,15.683V16.5A1.5,1.5,0,0,1,16.5,18H11a2,2,0,0,1-4,0H1.5A1.5,1.5,0,0,1,0,16.5v-.817a1.5,1.5,0,0,1,.49-1.109Q3,12.287,3,10V7A5.742,5.742,0,0,1,8,1.066V.958C8,.429,8.3,0,8.677,0h.646C9.7,0,10,.422,10,.951Z\"\n                    fill=\"currentColor\"\n                />\n            )}\n        </svg>\n    );\n}\n\nexport function MessagesIcon(props: { filled?: boolean; className?: string }) {\n    const title = t(\"Messages\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 20.051 14.016\"\n            className={classNames(classes.messages, \"icon-messages\", props.className)}\n            aria-hidden=\"true\"\n        >\n            <title>{title}</title>\n            {!props.filled && (\n                <path\n                    d=\"M8.7,10.991,4,7.339V17.5H21V7.339l-4.7,3.652.016.017S19.725,15.819,19.5,16s-4.346-3.966-4.346-3.966a.435.435,0,0,1-.06-.1l-1.827,1.42a1.249,1.249,0,0,1-1.534,0l-1.827-1.42C9.888,11.973,5.725,16.181,5.5,16S8.69,11,8.7,10.991ZM19.636,6.5H5.364L12.5,12.05ZM4,5H21a1.5,1.5,0,0,1,1.5,1.5v11A1.5,1.5,0,0,1,21,19H4a1.5,1.5,0,0,1-1.5-1.5V6.5A1.5,1.5,0,0,1,4,5Z\"\n                    transform=\"translate(-2.5 -4.984)\"\n                    fill=\"currentColor\"\n                />\n            )}\n            {!!props.filled && (\n                <React.Fragment>\n                    <path\n                        d=\"M22.466,6.187l-6.162,4.8c.3.421,3.37,4.857,3.2,5.009-.216.189-4.377-4.057-4.376-4.083L13.3,13.337a1.418,1.418,0,0,1-.7.262,1.473,1.473,0,0,1-.831-.262l-1.827-1.42S8.922,12.954,8.1,13.753a20.909,20.909,0,0,1-2.49,2.217c-.038.017-.068.025-.081.014-.211-.169,2.83-4.489,3.2-5.009,0,0-6.1-4.816-6.184-4.816a.865.865,0,0,0-.042.29c0,.076.03,11.035.03,11.035a1.5,1.5,0,0,0,1.5,1.5h17a1.5,1.5,0,0,0,1.5-1.5S22.606,6.41,22.466,6.187Z\"\n                        transform=\"translate(-2.5 -4.984)\"\n                        fill=\"currentColor\"\n                    />\n                    <path\n                        d=\"M21.463,5.08a1.694,1.694,0,0,0-.433-.1h-17a1.861,1.861,0,0,0-.5.1L12.5,12.05Z\"\n                        transform=\"translate(-2.5 -4.984)\"\n                        fill=\"currentColor\"\n                    />\n                </React.Fragment>\n            )}\n        </svg>\n    );\n}\n\nexport enum UserIconTypes {\n    DEFAULT = \"default\",\n    SELECTED_INACTIVE = \"fg background added\",\n    SELECTED_ACTIVE = \"primary color and primary background added\",\n}\n\ninterface IUserIconType {\n    head: {\n        outline: string | undefined;\n        bg: string | undefined;\n    };\n    body: {\n        outline: string | undefined;\n        bg: string | undefined;\n    };\n    circle: {\n        outline: string;\n        bg: string;\n    };\n}\n\nconst userIconStyles = (type: UserIconTypes): IUserIconType => {\n    const mainColors = globalVariables().mainColors;\n    const fg = ColorsUtils.colorOut(mainColors.fg) as string;\n    const bg = ColorsUtils.colorOut(mainColors.bg) as string;\n    const primary = ColorsUtils.colorOut(mainColors.primary) as string;\n\n    const styles: IUserIconType = {\n        head: {\n            outline: undefined,\n            bg: undefined,\n        },\n        body: {\n            outline: undefined,\n            bg: undefined,\n        },\n        circle: {\n            outline: fg,\n            bg: bg,\n        },\n    };\n\n    switch (type) {\n        case UserIconTypes.SELECTED_INACTIVE:\n            styles.head.bg = bg;\n            styles.body.bg = bg;\n            styles.circle.bg = fg;\n            break;\n        case UserIconTypes.SELECTED_ACTIVE:\n            styles.head.bg = bg;\n            styles.body.bg = bg;\n            styles.circle.outline = primary;\n            styles.circle.bg = primary;\n            break;\n        default:\n            // DEFAULT\n            styles.head.outline = fg;\n            styles.body.outline = fg;\n    }\n    return styles;\n};\n\nexport function UserIcon(props: { styleType?: UserIconTypes; className?: string; title: string; alt: string }) {\n    const { styleType = UserIconTypes.DEFAULT, className, title = t(\"Me\"), alt } = props;\n    const classes = iconClasses();\n\n    const { head, body, circle } = userIconStyles(styleType);\n\n    return (\n        <svg\n            role={\"image\"}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 20 20\"\n            className={classNames(classes.user, className)}\n            aria-label={title}\n        >\n            <title>{title}</title>\n            <desc>{alt}</desc>\n\n            {/*Background for whole Icon*/}\n            {circle.bg && <path d=\"M10,0A10,10,0,1,0,20,10,10,10,0,0,0,10,0Z\" style={{ fill: circle.bg }} />}\n\n            {/*Body bg*/}\n            {body.bg && (\n                <path\n                    d=\"M15.415,17.3a8.761,8.761,0,0,0,.761-.653c.18-.175.325-.335.436-.463A4.027,4.027,0,0,0,12.656,12.5c-.827,0-1.226.459-2.581.459S8.325,12.5,7.494,12.5a4.023,4.023,0,0,0-3.823,3.17,3.034,3.034,0,0,0,.486.916,3.559,3.559,0,0,0,.909.781,10.755,10.755,0,0,0,4.8,1.616A10.634,10.634,0,0,0,15.415,17.3Z\"\n                    style={{ fill: body.bg }}\n                />\n            )}\n\n            {/*Body Outline */}\n            {body.outline && (\n                <path\n                    d=\"M12.663,12.5c-.827,0-1.226.459-2.581.459S8.332,12.5,7.5,12.5a4.022,4.022,0,0,0-3.824,3.173,13.175,13.175,0,0,0,1.4,1.7l-.02-.512a2.486,2.486,0,0,1,2.488-2.982h.049a10.754,10.754,0,0,0,2.5.475,10.684,10.684,0,0,0,2.487-.472c1.408.059,2.474.732,2.52,3.1l.325.326a6.453,6.453,0,0,0,1.2-1.117A4.025,4.025,0,0,0,12.663,12.5Z\"\n                    style={{ fill: body.outline }}\n                />\n            )}\n\n            {/*Head Background */}\n            {head.bg && (\n                <path\n                    d=\"M10.141,4.514h0a3.55,3.55,0,1,0,3.533,3.567V8.063a3.54,3.54,0,0,0-3.531-3.549h0Z\"\n                    style={{ fill: head.bg }}\n                />\n            )}\n\n            {/*Head Outline*/}\n            {head.outline && (\n                <path\n                    d=\"M10.141,4.514h0a3.55,3.55,0,1,0,3.533,3.567V8.063a3.54,3.54,0,0,0-3.531-3.549h0Zm0,5.808a2.26,2.26,0,1,1,2.253-2.267v.009a2.254,2.254,0,0,1-2.25,2.258Z\"\n                    style={{ fill: head.outline }}\n                />\n            )}\n\n            {/*Circle Border*/}\n            {circle.outline && (\n                <path\n                    d=\"M10,0A10,10,0,1,0,20,10,10,10,0,0,0,10,0Zm0,18.419A8.418,8.418,0,1,1,18.417,10,8.418,8.418,0,0,1,10,18.419Z\"\n                    style={{ fill: circle.outline }}\n                />\n            )}\n        </svg>\n    );\n}\n\nexport function NoUserPhotoIcon(props: { className?: string; photoAlt?: string }) {\n    const title = t(\"User\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            className={classNames(classes.standard, \"icon-noUserPhoto\", props.className)}\n            aria-hidden=\"true\"\n            aria-label={props.photoAlt}\n        >\n            <title>{props.photoAlt || title}</title>\n            <path\n                d=\"M12.046,12.907c-2.225,0-4.03-2.218-4.03-4.954C8.016,4.16,9.82,3,12.046,3s4.03,1.16,4.03,4.953C16.076,10.689,14.271,12.907,12.046,12.907Zm8.9,6.452a17.94,17.94,0,0,1-.194,4.2A1.025,1.025,0,0,1,19.9,24H3.96a1.024,1.024,0,0,1-.852-.443,17.956,17.956,0,0,1,.04-4.2l2.033-4.39a1,1,0,0,1,.46-.469L8.8,12.926a.211.211,0,0,1,.217.017,5.149,5.149,0,0,0,6.068,0,.211.211,0,0,1,.216-.017L18.452,14.5a1,1,0,0,1,.46.469Z\"\n                fill=\"currentColor\"\n            />\n        </svg>\n    );\n}\n\nexport function UserWarningIcon(props: { className?: string }) {\n    const title = t(\"Warning\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 40 40\"\n            className={classNames(classes.userWarning, props.className)}\n            aria-hidden=\"true\"\n        >\n            <title>{title}</title>\n            <path\n                d=\"M32.707,25.862a2.167,2.167,0,0,1-1.876,3.249H9.169a2.168,2.168,0,0,1-1.877-3.249L18.123,7.083a2.168,2.168,0,0,1,3.754,0Z\"\n                fill=\"#d0021b\"\n                stroke=\"#fff\"\n                strokeWidth=\"1px\"\n            />\n            <path\n                d=\"M20,20.979a2.077,2.077,0,1,0,2.076,2.077A2.076,2.076,0,0,0,20,20.979Zm-1.971-7.463.335,6.139a.541.541,0,0,0,.54.512H21.1a.543.543,0,0,0,.541-.512l.334-6.139a.542.542,0,0,0-.54-.572H18.569A.542.542,0,0,0,18.029,13.516Z\"\n                fill=\"#fff\"\n            />\n        </svg>\n    );\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { negativeUnit } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { percent } from \"csx\";\nimport { OverflowProperty, ResizeProperty } from \"csstype\";\nimport { inputClasses, inputVariables } from \"@library/forms/inputStyles\";\nimport { tokensClasses } from \"@library/forms/select/tokensStyles\";\nimport { CSSObject } from \"@emotion/css\";\nimport { checkRadioClasses } from \"@library/forms/checkRadioStyles\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const inputBlockClasses = useThemeCache(() => {\n    const style = styleFactory(\"inputBlock\");\n    const globalVars = globalVariables();\n    const formElementVars = formElementsVariables();\n\n    const inputText = style(\"inputText\", {\n        display: \"block\",\n    });\n\n    const inputWrap = style(\"inputWrap\", {\n        display: \"block\",\n    });\n\n    const labelAndDescription = style(\"labelAndDescription\", {\n        display: \"block\",\n        width: percent(100),\n    });\n\n    const root = style({\n        display: \"block\",\n        width: percent(100),\n        ...{\n            [`& + &`]: {\n                marginTop: styleUnit(formElementVars.spacing.margin),\n            },\n            [`&.isLast`]: {\n                marginBottom: styleUnit(formElementVars.spacing.margin),\n            },\n            [`&.hasError .${inputText}`]: {\n                borderColor: ColorsUtils.colorOut(globalVars.messageColors.error.fg),\n                backgroundColor: ColorsUtils.colorOut(globalVars.messageColors.error.fg),\n                color: ColorsUtils.colorOut(globalVars.messageColors.error.fg),\n            },\n            \"&.isHorizontal\": {\n                display: \"flex\",\n                width: percent(100),\n                alignItems: \"center\",\n                flexWrap: \"wrap\",\n            },\n            [`&.isHorizontal .${labelAndDescription}`]: {\n                display: \"inline-flex\",\n                width: \"auto\",\n            },\n            [`&.isHorizontal .${inputWrap}`]: {\n                display: \"inline-flex\",\n                flexGrow: 1,\n            },\n            [`&.${tokensClasses().withIndicator} .tokens__value-container`]: {\n                paddingRight: styleUnit(inputVariables().sizing.height),\n            },\n            [`&.${tokensClasses().withIndicator} .tokens__indicators`]: {\n                position: \"absolute\",\n                top: 0,\n                right: 6,\n                bottom: 0,\n            },\n        },\n    });\n\n    const errors = style(\"errors\", {\n        display: \"block\",\n        fontSize: styleUnit(globalVars.fonts.size.small),\n    });\n\n    const errorsPadding = style(\"errorsPadding\", inputClasses().inputPaddingMixin);\n\n    const error = style(\"error\", {\n        display: \"block\",\n        color: ColorsUtils.colorOut(globalVars.messageColors.error.fg),\n        ...{\n            \"& + &\": {\n                marginTop: styleUnit(6),\n            },\n        },\n    });\n    const labelNote = style(\"labelNote\", {\n        display: \"block\",\n        fontSize: styleUnit(globalVars.fonts.size.small),\n        fontWeight: globalVars.fonts.weights.normal,\n        opacity: 0.6,\n    });\n\n    const labelText = style(\"labelText\", {\n        display: \"block\",\n        fontWeight: globalVars.fonts.weights.semiBold,\n        fontSize: styleUnit(globalVars.fonts.size.medium),\n        marginBottom: styleUnit(formElementVars.spacing.margin),\n    });\n\n    const sectionTitle = style(\"sectionTitle\", {\n        fontWeight: globalVars.fonts.weights.semiBold,\n        lineHeight: globalVars.lineHeights.base,\n    });\n\n    const fieldsetGroup = style(\"fieldsetGroup\", {\n        marginTop: styleUnit(formElementVars.spacing.margin),\n        ...{\n            \"&.noMargin\": {\n                marginTop: styleUnit(0),\n            },\n        },\n    });\n\n    const multiLine = (resize?: ResizeProperty, overflow?: OverflowProperty) => {\n        return style(\"multiLine\", {\n            ...Mixins.padding({ vertical: 9 }),\n            resize: (resize ? resize : \"vertical\") as ResizeProperty,\n            overflow: (overflow ? overflow : \"auto\") as OverflowProperty,\n        });\n    };\n\n    const related = style(\"related\", {\n        marginTop: styleUnit(globalVars.gutter.size),\n    });\n\n    const grid = style(\"grid\", {\n        display: \"flex\",\n        flexWrap: \"wrap\",\n        ...{\n            [`.${checkRadioClasses().root}`]: {\n                width: percent(50),\n                alignItems: \"flex-start\",\n            },\n            [`&.${fieldsetGroup}`]: {\n                marginTop: styleUnit(9),\n            },\n        },\n    });\n\n    const tight = style(\"tight\", {\n        ...{\n            [`&&&`]: {\n                marginTop: negativeUnit(9),\n            },\n        },\n    });\n\n    return {\n        root,\n        inputText,\n        errors,\n        errorsPadding,\n        error,\n        labelNote,\n        labelText,\n        inputWrap,\n        labelAndDescription,\n        sectionTitle,\n        fieldsetGroup,\n        multiLine,\n        related,\n        grid,\n        tight,\n    };\n});\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { IApiError, LoadStatus } from \"@library/@types/api/core\";\nimport { IMe, IMeCounts, IUser, IInvitees } from \"@library/@types/api/users\";\nimport ReduxActions, { bindThunkAction, useReduxActions } from \"@library/redux/ReduxActions\";\nimport { actionCreatorFactory } from \"typescript-fsa\";\nimport { IPermissions } from \"@library/features/users/userTypes\";\nimport { IComboBoxOption } from \"@library/features/search/SearchBar\";\n\nconst createAction = actionCreatorFactory(\"@@users\");\n\nexport interface IGetUserByIDQuery {\n    userID: number;\n}\n\nexport interface IInviteUsersByGroupIDQuery {\n    userID: number;\n    groupID: number; // The group to be invited\n    userIDs: number[]; // The invitees\n    emails: string[]; // The invitees\n}\n\n// The duration we wait to check for new counts.\nconst COUNT_CACHE_PERIOD = 60; // 60 Seconds\n\n/**\n * Redux actions for the users data.\n */\nexport default class UserActions extends ReduxActions {\n    public static getMeACs = createAction.async<{}, IMe, IApiError>(\"GET_ME\");\n    /**\n     * Request the currently signed in user data if it's not loaded.\n     */\n    public getMe = () => {\n        const currentUser = this.getState().users.current;\n        if (currentUser.status === LoadStatus.LOADING) {\n            // Don't request the user more than once.\n            return;\n        }\n        const apiThunk = bindThunkAction(UserActions.getMeACs, async () => {\n            const response = await this.api.get(\"/users/me\");\n            return response.data;\n        })();\n\n        return this.dispatch(apiThunk);\n    };\n\n    public static getPermissionsACs = createAction.async<{}, IPermissions, IApiError>(\"GET_PERMISSIONS\");\n    /**\n     * Request the currently signed in user data if it's not loaded.\n     */\n    public getPermissions = () => {\n        const permissions = this.getState().users.permissions;\n        if (permissions.status === LoadStatus.LOADING) {\n            // Don't request the user more than once.\n            return;\n        }\n        const apiThunk = bindThunkAction(UserActions.getPermissionsACs, async () => {\n            const response = await this.api.get(\"/users/$me/permissions\");\n            return response.data;\n        })();\n\n        return this.dispatch(apiThunk);\n    };\n\n    public static getCountsACs = createAction.async<{}, { counts: IMeCounts }, IApiError>(\"GET_ME_COUNTS\");\n\n    /**\n     * Check if we have valid count data and request it again if it is stale.\n     */\n    public checkCountData = () => {\n        const currentTime = new Date().getTime();\n        const { lastRequested } = this.getState().users.countInformation;\n\n        if (lastRequested !== null && currentTime < lastRequested + COUNT_CACHE_PERIOD) {\n            // Bailout if we've requested this data within the previous cache period\n            return;\n        }\n        const apiThunk = bindThunkAction(UserActions.getCountsACs, async () => {\n            const response = await this.api.get(\"/users/me-counts\");\n            return response.data;\n        })();\n\n        return this.dispatch(apiThunk);\n    };\n\n    public static getUserACs = createAction.async<{ userID: number }, IUser, IApiError>(\"GET_USER\");\n\n    public getUserByID = (query: IGetUserByIDQuery) => {\n        const { userID } = query;\n        const thunk = bindThunkAction(UserActions.getUserACs, async () => {\n            const reponse = await this.api.get(`/users/${userID}/?expand[]=all`);\n            return reponse.data;\n        })({ userID });\n        return this.dispatch(thunk);\n    };\n\n    public static clearInviteUsersAC = createAction<{ userID: number }>(\"CLEAR_INVITE_USER\");\n    public clearInviteUsers = this.bindDispatch(UserActions.clearInviteUsersAC);\n\n    public static inviteUsersACs = createAction.async<IInviteUsersByGroupIDQuery, IInvitees[], IApiError>(\n        \"INVITE_USERS\",\n    );\n\n    public inviteUsersByGroupID = (query: IInviteUsersByGroupIDQuery) => {\n        const { groupID, userIDs, emails } = query;\n        const body = { userIDs, emails };\n        const thunk = bindThunkAction(UserActions.inviteUsersACs, async () => {\n            const response = await this.api.post(`/groups/${groupID}/invitations`, body);\n            return response.data;\n        })(query);\n        return this.dispatch(thunk);\n    };\n\n    public static updateInviteeIDsAC = createAction<{ userID: number; IDs: number[] }>(\"UPDATE_INVITEE_IDS\");\n    public updateIDs = ({ userID, IDs }) => {\n        this.dispatch(UserActions.updateInviteeIDsAC({ userID, IDs }));\n    };\n\n    public static updateInviteeEmailsAC = createAction<{ userID: number; emails: string[] }>(\"UPDATE_INVITEE_EMAIlS\");\n    public updateEmails = ({ userID, emails }) => {\n        this.dispatch(UserActions.updateInviteeEmailsAC({ userID, emails }));\n    };\n\n    public static updateInviteeEmailsStringAC = createAction<{ userID: number; emailsString: string }>(\n        \"UPDATE_INVITEE_EMAIlS_STRING\",\n    );\n    public updateEmailsString = ({ userID, emailsString }) => {\n        this.dispatch(UserActions.updateInviteeEmailsStringAC({ userID, emailsString }));\n    };\n\n    public static updateInviteesAC = createAction<{ userID: number; invitees: IComboBoxOption[] }>(\"UPDATE_INVITEES\");\n    public updateInvitees = ({ userID, invitees }) => {\n        this.dispatch(UserActions.updateInviteesAC({ userID, invitees }));\n    };\n}\n\nexport function useUserActions() {\n    return useReduxActions(UserActions);\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { visibility } from \"@library/styles/styleHelpers\";\nimport classNames from \"classnames\";\n\ninterface IProps extends React.HTMLAttributes<HTMLDivElement> {\n    children: React.ReactNode;\n    tag?: keyof JSX.IntrinsicElements;\n}\n\n/**\n * Children of component only visible to screen readers\n */\nexport default class ScreenReaderContent extends React.PureComponent<IProps> {\n    public render() {\n        const Tag = (this.props.tag || \"div\") as \"div\";\n        return (\n            <Tag {...this.props} className={classNames(visibility().visuallyHidden, \"sr-only\")}>\n                {this.props.children}\n            </Tag>\n        );\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { placeholderStyles, textInputSizingFromFixedHeight } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { Variables } from \"@library/styles/Variables\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\nimport { important, percent } from \"csx\";\nimport merge from \"lodash/merge\";\nimport { CSSObject } from \"@emotion/css\";\n\nexport const inputVariables = useThemeCache((forcedVars?: IThemeVariables) => {\n    const globalVars = globalVariables(forcedVars);\n    const formElementVars = formElementsVariables(forcedVars);\n    const makeThemeVars = variableFactory(\"input\", forcedVars);\n\n    const colors = makeThemeVars(\"colors\", {\n        placeholder: globalVars.mixBgAndFg(0.5),\n        fg: globalVars.mainColors.fg,\n        bg: globalVars.mainColors.bg,\n        state: {\n            fg: globalVars.mainColors.primary,\n        },\n    });\n\n    const sizing = makeThemeVars(\"sizing\", {\n        height: formElementVars.sizing.height,\n    });\n\n    const font = makeThemeVars(\n        \"font\",\n        Variables.font({\n            size: globalVars.fonts.size.large,\n            weight: globalVars.fonts.weights.normal,\n            color: colors.fg,\n        }),\n    );\n\n    const border = makeThemeVars(\"borders\", { ...globalVars.borderType.formElements.default });\n\n    return {\n        colors,\n        border,\n        sizing,\n        font,\n    };\n});\n\nexport const inputMixinVars = (vars?: { sizing?: any; font?: any; colors?: any; border?: any }) => {\n    const inputVars = inputVariables();\n    return {\n        sizing: merge(inputVars.sizing, vars?.sizing ?? {}),\n        font: Variables.font(merge(inputVars.font, vars?.font ?? {})),\n        colors: merge(inputVars.colors, vars?.colors ?? {}),\n        border: merge(inputVars.border, vars?.border ?? {}),\n    };\n};\n\nexport const inputMixin = (vars?: { sizing?: any; font?: any; colors?: any; border?: any }): CSSObject => {\n    const variables = inputMixinVars(vars);\n    const globalVars = globalVariables();\n    const {\n        sizing,\n        font = Variables.font({\n            size: globalVars.fonts.size.large,\n        }),\n        colors,\n        border,\n    } = variables;\n\n    return {\n        ...textInputSizingFromFixedHeight(sizing.height, font.size as number, border.width * 2),\n        backgroundColor: ColorsUtils.colorOut(colors.bg),\n        color: ColorsUtils.colorOut(colors.fg),\n        ...Mixins.border(border),\n        ...Mixins.font(font),\n        outline: 0,\n        ...{\n            ...placeholderStyles({\n                color: ColorsUtils.colorOut(colors.placeholder),\n            }),\n            \".SelectOne__input\": {\n                width: percent(100),\n            },\n            \".SelectOne__placeholder\": {\n                color: ColorsUtils.colorOut(formElementsVariables().placeholder.color),\n            },\n            \".tokens__placeholder\": {\n                color: ColorsUtils.colorOut(formElementsVariables().placeholder.color),\n            },\n            \".SelectOne__input input\": {\n                display: \"inline-block\",\n                width: important(`100%`),\n                overflow: \"hidden\",\n                lineHeight: undefined,\n                minHeight: 0,\n            },\n            \"&:active, &:hover, &:focus, &.focus-visible\": {\n                ...Mixins.border({\n                    ...border,\n                    color: colors.state.fg,\n                }),\n            },\n        },\n    };\n};\n\nexport const inputClasses = useThemeCache(() => {\n    const vars = inputVariables();\n    const style = styleFactory(\"input\");\n    const formElementVars = formElementsVariables();\n    const globalVars = globalVariables();\n\n    const inputPaddingMixin: CSSObject = {\n        padding: inputMixin().padding,\n        paddingTop: inputMixin().paddingTop,\n        paddingBottom: inputMixin().paddingBottom,\n        paddingLeft: inputMixin().paddingLeft,\n        paddingRight: inputMixin().paddingRight,\n    };\n\n    // Use as assignable unique style.\n    const text = style(\"text\", inputMixin());\n\n    // Use as a global selector. This should be refactored in the future.\n    const applyInputCSSRules = () => cssOut(\" .inputText.inputText\", inputMixin());\n\n    const inputText = style(\"inputText\", {\n        ...inputMixin(),\n        marginBottom: 0,\n        ...{\n            \"&&\": {\n                marginTop: styleUnit(globalVars.gutter.quarter),\n            },\n        },\n    });\n\n    return { text, inputText, inputPaddingMixin, inputMixin, applyInputCSSRules };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport ReduxActions, { bindThunkAction, useReduxActions } from \"@library/redux/ReduxActions\";\nimport { actionCreatorFactory } from \"typescript-fsa\";\nimport { IApiError } from \"@library/@types/api/core\";\nimport { ITheme, IThemeAssets, IThemeRevision } from \"@library/theming/themeReducer\";\nimport { IThemeInfo } from \"@library/theming/CurrentThemeInfo\";\nimport { resetThemeCache } from \"@library/styles/themeCache\";\nimport { setMeta } from \"@library/utility/appUtils\";\nimport { RecordID } from \"@vanilla/utils\";\n\nconst createAction = actionCreatorFactory(\"@@themes\");\n\ntype IGetThemeResponse = ITheme;\nexport interface IPatchThemeRequest {\n    themeID: RecordID;\n    name?: string;\n    parentTheme?: string;\n    parentVersion?: string;\n    revisionID?: number;\n    assets?: Partial<IPostPatchThemeAssets>;\n}\nexport type IPostPatchThemeAssets = Partial<IThemeAssets>;\n\nexport enum PreviewStatusType {\n    PREVIEW = \"preview\",\n    APPLY = \"apply\",\n    CANCEL = \"cancel\",\n}\n\ntype IGetAllThemeResponse = ITheme[];\ntype IPatchThemeResponse = ITheme;\n\ninterface IPutCurrentThemeRequest {\n    themeID: RecordID;\n    revisionID?: number;\n    type: PreviewStatusType;\n}\n/**\n * Actions for working with resources from the /api/v2/knowledge-bases endpoint.\n */\n\nexport default class ThemeActions extends ReduxActions {\n    public static getAssets = createAction.async<{ themeKey: string; revisionID: number | null }, ITheme, IApiError>(\n        \"GET\",\n    );\n\n    public getAssets = (themeKey: string, revisionID: number | null = null) => {\n        const { theme } = this.getState();\n        if (theme.assets.data) {\n            return theme.assets.data;\n        }\n\n        const apiThunk = bindThunkAction(ThemeActions.getAssets, async () => {\n            const response = await this.api.get(`/themes/${themeKey}`, {\n                params: { revisionID: revisionID },\n            });\n\n            return response.data;\n        })({ themeKey, revisionID });\n        return this.dispatch(apiThunk);\n    };\n\n    public static forceVariablesAC = createAction<Record<string, any>>(\"FORCE_VARIABLES\");\n\n    public forceVariables = (variables: Record<string, any>) => {\n        this.dispatch(ThemeActions.forceVariablesAC(variables));\n\n        // Clear the cache of variables.\n        resetThemeCache();\n    };\n\n    public static readonly getAllThemes_ACS = createAction.async<{}, IGetAllThemeResponse, IApiError>(\"GET_ALL_THEMES\");\n\n    public static readonly putCurrentThemeACs = createAction.async<{ themeID: RecordID }, ITheme, IApiError>(\n        \"PUT_CURRENT\",\n    );\n\n    public static readonly putPreviewThemeACs = createAction.async<IPutCurrentThemeRequest, ITheme, IApiError>(\n        \"PUT_PREVIEW\",\n    );\n\n    public static readonly deleteThemeACs = createAction.async<{ themeID: RecordID }, undefined, IApiError>(\"DELETE\");\n\n    public static getThemeRevisions_ACs = createAction.async<{ themeID: RecordID }, IThemeRevision[], IApiError>(\n        \"GET_THEME\",\n    );\n\n    public static patchTheme_ACs = createAction.async<IPatchThemeRequest, IPatchThemeResponse, IApiError>(\n        \"PATCH_THEME\",\n    );\n\n    public getAllThemes = () => {\n        const thunk = bindThunkAction(ThemeActions.getAllThemes_ACS, async () => {\n            const response = await this.api.get(`/themes`);\n            return response.data;\n        })();\n        return this.dispatch(thunk);\n    };\n\n    public putCurrentTheme = (themeID: RecordID) => {\n        const body = { themeID };\n        const thunk = bindThunkAction(ThemeActions.putCurrentThemeACs, async () => {\n            const response = await this.api.put(`/themes/current`, body);\n            setMeta(\"ui.themeKey\", themeID);\n            setMeta(\"ui.mobileThemeKey\", themeID);\n            return response.data;\n        })(body);\n        return this.dispatch(thunk);\n    };\n\n    public putPreviewTheme = (options: IPutCurrentThemeRequest) => {\n        const { themeID, revisionID, type } = options;\n        const thunk = bindThunkAction(ThemeActions.putPreviewThemeACs, async () => {\n            const response = await this.api.put(`/themes/preview`, { themeID: themeID, revisionID: revisionID });\n\n            return response.data;\n        })(options);\n        return this.dispatch(thunk);\n    };\n\n    public deleteTheme = (themeID: RecordID) => {\n        const apiThunk = bindThunkAction(ThemeActions.deleteThemeACs, async () => {\n            const response = await this.api.delete(`/themes/${themeID}`);\n            return response.data;\n        })({ themeID });\n        return this.dispatch(apiThunk);\n    };\n\n    public getThemeRevisions(themeID: RecordID) {\n        const thunk = bindThunkAction(ThemeActions.getThemeRevisions_ACs, async () => {\n            const response = await this.api.get(`/themes/${themeID}/revisions`);\n            return response.data;\n        })({ themeID });\n\n        return this.dispatch(thunk);\n    }\n\n    public patchThemeWithRevisionID = async (body: IPatchThemeRequest) => {\n        let result = await this.patchTheme({ themeID: body.themeID, revisionID: body.revisionID });\n        return result;\n    };\n\n    public patchTheme(options: IPatchThemeRequest) {\n        const { themeID, ...body } = options;\n\n        const thunk = bindThunkAction(ThemeActions.patchTheme_ACs, async () => {\n            const response = await this.api.patch(`/themes/${options.themeID}`, body);\n            return response.data;\n        })(options);\n\n        return this.dispatch(thunk);\n    }\n}\n\nexport function useThemeActions() {\n    return useReduxActions(ThemeActions);\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { IButtonType } from \"@library/forms/styleHelperButtonInterface\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { Variables } from \"@library/styles/Variables\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { ButtonPreset } from \"./ButtonPreset\";\nimport { getThemeVariables } from \"@library/theming/getThemeVariables\";\n\nexport const buttonGlobalVariables = useThemeCache((forcedVars?: IThemeVariables) => {\n    // Fetch external global variables\n    const globalVars = globalVariables(forcedVars);\n    const formElVars = formElementsVariables(forcedVars);\n    const makeThemeVars = variableFactory(\"buttonGlobals\", forcedVars);\n\n    let colors = makeThemeVars(\"colors\", {\n        fg: globalVars.mainColors.fg,\n        bg: globalVars.mainColors.bg,\n        primary: globalVars.mainColors.primary,\n        primaryContrast: globalVars.mainColors.primaryContrast,\n        standard: globalVars.mainColors.secondary,\n        standardContrast: globalVars.mainColors.primaryContrast,\n    });\n\n    const font = makeThemeVars(\n        \"font\",\n        Variables.font({\n            size: globalVars.fonts.size.medium,\n            weight: globalVars.fonts.weights.semiBold,\n        }),\n    );\n\n    const padding = makeThemeVars(\"padding\", {\n        top: 2,\n        bottom: 3,\n        horizontal: 12,\n        fullBorderRadius: {\n            extraHorizontalPadding: 8,\n        },\n    });\n\n    const sizing = makeThemeVars(\"sizing\", {\n        minHeight: formElVars.sizing.height,\n        minWidth: 104,\n        compactHeight: 24,\n    });\n\n    const border = makeThemeVars(\"border\", globalVars.borderType.formElements.buttons);\n\n    const constants = makeThemeVars(\"constants\", {\n        borderMixRatio: 0.24,\n    });\n\n    return {\n        padding,\n        sizing,\n        border,\n        font,\n        constants,\n        colors,\n    };\n});\n\nexport const buttonVariables = useThemeCache((forcedVars?: IThemeVariables) => {\n    const globalVars = globalVariables(forcedVars);\n    const makeThemeVars = variableFactory(\"button\", forcedVars);\n    const vars = buttonGlobalVariables(forcedVars);\n    const buttonGlobals = buttonGlobalVariables();\n\n    const primaryPresetInit = makeThemeVars(\"primary\", {\n        preset: {\n            style: ButtonPreset.SOLID,\n            bg: globalVars.mainColors.primary,\n            fg: globalVars.mainColors.primaryContrast,\n        },\n    });\n\n    const bgState = ColorsUtils.offsetLightness(primaryPresetInit.preset.bg, 0.05);\n    const primaryPresetInit2 = makeThemeVars(\"primary\", {\n        preset: {\n            ...primaryPresetInit.preset,\n            borders: primaryPresetInit.preset.bg,\n            bg:\n                primaryPresetInit.preset.style === ButtonPreset.SOLID\n                    ? globalVars.mainColors.primary\n                    : globalVars.mainColors.bg,\n            fg:\n                primaryPresetInit.preset.style === ButtonPreset.SOLID\n                    ? globalVars.mainColors.primaryContrast\n                    : primaryPresetInit.preset.bg,\n            bgState: bgState,\n            fgState: ColorsUtils.isLightColor(bgState)\n                ? globalVars.elementaryColors.almostBlack\n                : globalVars.elementaryColors.white,\n        },\n    });\n\n    const primaryPreset = makeThemeVars(\"primary\", {\n        preset: {\n            ...primaryPresetInit2.preset,\n            borders:\n                primaryPresetInit.preset.style === ButtonPreset.OUTLINE\n                    ? globalVars.mixBgAndFg(vars.constants.borderMixRatio)\n                    : primaryPresetInit2.preset.bg,\n            borderState:\n                primaryPresetInit.preset.style === ButtonPreset.OUTLINE\n                    ? primaryPresetInit2.preset.fgState\n                    : primaryPresetInit2.preset.bgState,\n        },\n    });\n\n    const primary = makeThemeVars(\"primary\", {\n        name: ButtonTypes.PRIMARY,\n        preset: primaryPreset.preset,\n        colors: {\n            fg: primaryPreset.preset.fg,\n            bg: primaryPreset.preset.bg,\n        },\n        borders: {\n            ...globalVars.borderType.formElements.buttons,\n            radius: buttonGlobals.border.radius,\n            color: primaryPreset.preset.borders,\n        },\n        state: {\n            colors: {\n                bg: primaryPreset.preset.bgState,\n                fg: primaryPreset.preset.fgState,\n            },\n            borders: {\n                radius: buttonGlobals.border.radius,\n                color: primaryPreset.preset.borderState,\n            },\n        },\n    });\n\n    const standardPresetInit = makeThemeVars(\"standard\", {\n        preset: {\n            style: ButtonPreset.OUTLINE,\n            borders: globalVars.mixBgAndFg(vars.constants.borderMixRatio),\n        },\n    });\n\n    const standardPresetInit1 = makeThemeVars(\"standard\", {\n        preset: {\n            ...standardPresetInit.preset,\n            bg:\n                standardPresetInit.preset.style === ButtonPreset.OUTLINE\n                    ? globalVars.mainColors.bg\n                    : standardPresetInit.preset.borders,\n            fg:\n                standardPresetInit.preset.style === ButtonPreset.OUTLINE\n                    ? globalVars.mainColors.fg\n                    : ColorsUtils.offsetLightness(globalVars.mainColors.fg, 0.1),\n        },\n    });\n\n    const standardPresetInit2 = makeThemeVars(\"standard\", {\n        preset: {\n            ...standardPresetInit1.preset,\n            bgState: primary.preset.bgState,\n            fgState: primary.preset.fgState,\n        },\n    });\n\n    const standardPreset = makeThemeVars(\"standard\", {\n        preset: {\n            ...standardPresetInit2.preset,\n            borders:\n                standardPresetInit.preset.style === ButtonPreset.OUTLINE\n                    ? standardPresetInit2.preset.borders\n                    : standardPresetInit2.preset.bg,\n            borderState:\n                standardPresetInit.preset.style === ButtonPreset.OUTLINE\n                    ? standardPresetInit2.preset.fgState\n                    : standardPresetInit2.preset.bgState,\n        },\n    });\n\n    const standard: IButtonType = makeThemeVars(\"standard\", {\n        name: ButtonTypes.STANDARD,\n        preset: standardPreset.preset,\n        colors: {\n            fg: standardPreset.preset.fg,\n            bg: standardPreset.preset.bg,\n        },\n        borders: {\n            ...globalVars.borderType.formElements.buttons,\n            radius: buttonGlobals.border.radius,\n            color: standardPreset.preset.borders,\n        },\n        state: {\n            borders: {\n                ...globalVars.borderType.formElements.buttons,\n                radius: buttonGlobals.border.radius,\n                color: standardPreset.preset.borderState,\n            },\n            colors: {\n                bg: standardPreset.preset.bgState,\n                fg: standardPreset.preset.fgState,\n            },\n        },\n    });\n\n    const transparent: IButtonType = makeThemeVars(\"transparent\", {\n        name: ButtonTypes.TRANSPARENT,\n        preset: { style: ButtonPreset.ADVANCED },\n        colors: {\n            fg: globalVars.mainColors.bg,\n            bg: globalVars.mainColors.fg.fade(0.1),\n        },\n        borders: {\n            ...globalVars.borderType.formElements.buttons,\n            color: globalVars.mainColors.bg,\n        },\n        hover: {\n            colors: {\n                bg: globalVars.mainColors.fg.fade(0.2),\n            },\n        },\n        active: {\n            colors: {\n                bg: globalVars.mainColors.fg.fade(0.2),\n            },\n        },\n        focus: {\n            colors: {\n                bg: globalVars.mainColors.fg.fade(0.2),\n            },\n        },\n        focusAccessible: {\n            colors: {\n                bg: globalVars.mainColors.fg.fade(0.2),\n            },\n        },\n    });\n\n    const translucid: IButtonType = makeThemeVars(\"translucid\", {\n        name: ButtonTypes.TRANSLUCID,\n        preset: { style: ButtonPreset.ADVANCED },\n        colors: {\n            bg: globalVars.mainColors.bg,\n            fg: globalVars.mainColors.primary,\n        },\n        borders: {\n            ...globalVars.borderType.formElements.buttons,\n            color: globalVars.mainColors.bg,\n        },\n        hover: {\n            colors: {\n                bg: globalVars.mainColors.bg.fade(0.8),\n            },\n        },\n        active: {\n            colors: {\n                bg: globalVars.mainColors.bg.fade(0.8),\n            },\n        },\n        focus: {\n            colors: {\n                bg: globalVars.mainColors.bg.fade(0.8),\n            },\n        },\n        focusAccessible: {\n            colors: {\n                bg: globalVars.mainColors.bg.fade(0.8),\n            },\n        },\n    });\n\n    const notStandard: IButtonType = makeThemeVars(\"notStandard\", {\n        name: ButtonTypes.NOT_STANDARD,\n        preset: { style: ButtonPreset.ADVANCED },\n        colors: {\n            bg: globalVars.mainColors.bg,\n            fg: globalVars.mainColors.primary,\n        },\n        borders: {\n            ...globalVars.borderType.formElements.buttons,\n            color: globalVars.mainColors.bg,\n        },\n        state: {\n            colors: {\n                bg: globalVars.mainColors.bg,\n                fg: globalVars.mainColors.primary,\n            },\n            borders: {\n                radius: buttonGlobals.border.radius,\n                color: globalVars.mainColors.bg,\n            },\n        },\n    });\n\n    const radioPresetInit1 = makeThemeVars(\"radio\", {\n        sizing: {\n            minHeight: formElementsVariables().sizing.height - 4,\n        },\n    });\n\n    const radioPresetInit2 = makeThemeVars(\"radio\", {\n        ...radioPresetInit1,\n        borders: {\n            ...globalVars.border,\n            radius: radioPresetInit1.sizing.minHeight / 2,\n        },\n        state: {\n            colors: {\n                fg: globalVars.mainColors.primary,\n            },\n            borders: {\n                color: globalVars.mainColors.primary,\n                radius: radioPresetInit1.sizing.minHeight / 2,\n            },\n        },\n        //special case\n        active: {\n            color: ColorsUtils.colorOut(globalVars.mixBgAndFg(0.1)),\n        },\n    });\n\n    const radio: IButtonType = makeThemeVars(\"radio\", {\n        name: ButtonTypes.RADIO,\n        preset: { style: ButtonPreset.ADVANCED },\n        colors: {\n            fg: globalVars.mainColors.fg,\n            bg: globalVars.mainColors.bg,\n        },\n        padding: {\n            horizontal: 12,\n        },\n        borders: radioPresetInit2.borders,\n        state: radioPresetInit2.state,\n        sizing: {\n            minHeight: radioPresetInit2.sizing.minHeight,\n        },\n        extraNested: {\n            [\"&.isActive\"]: {\n                borderColor: ColorsUtils.colorOut(radioPresetInit2.active.color),\n                backgroundColor: ColorsUtils.colorOut(radioPresetInit2.active.color),\n            },\n        },\n        skipDynamicPadding: true,\n    });\n\n    return {\n        standard,\n        primary,\n        transparent,\n        translucid,\n        notStandard,\n        radio,\n    };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { Optionalize } from \"@library/@types/utils\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport throttle from \"lodash/throttle\";\nimport React, { useCallback, useContext, useEffect, useState } from \"react\";\n\n/**\n * @deprecated get Devices from LayoutContext\n */\nexport enum Devices {\n    XS = \"xs\",\n    MOBILE = \"mobile\",\n    TABLET = \"tablet\",\n    NO_BLEED = \"no_bleed\", // Not enough space for back link which goes outside the margin.\n    DESKTOP = \"desktop\",\n}\n\nexport interface IDeviceProps {\n    device: Devices;\n}\n\n/**\n * @deprecated get Devices from LayoutContext\n */\nconst DeviceContext = React.createContext<Devices>(Devices.DESKTOP);\nexport default DeviceContext;\n\n/**\n * @deprecated use LayoutContext\n */\nexport function useDevice() {\n    const device = useContext(DeviceContext);\n    return device;\n}\n\ninterface IProps {\n    children: React.ReactNode;\n}\n\n/**\n * @deprecated get Devices from LayoutContext\n */\nexport function DeviceProvider(props: IProps) {\n    const calculateDevice = useCallback(() => {\n        const breakpoints = layoutVariables().panelLayoutBreakPoints;\n        const width = document.body.clientWidth;\n        if (width <= breakpoints.xs) {\n            return Devices.XS;\n        } else if (width <= breakpoints.oneColumn) {\n            return Devices.MOBILE;\n        } else if (width <= breakpoints.twoColumn) {\n            return Devices.TABLET;\n        } else if (width <= breakpoints.noBleed) {\n            return Devices.NO_BLEED;\n        } else {\n            return Devices.DESKTOP;\n        }\n    }, []);\n    const [device, setDevice] = useState<Devices>(calculateDevice());\n\n    useEffect(() => {\n        const throttledUpdate = throttle(() => {\n            setDevice(calculateDevice);\n        }, 100);\n        window.addEventListener(\"resize\", throttledUpdate);\n        return () => {\n            window.removeEventListener(\"resize\", throttledUpdate);\n        };\n    }, [calculateDevice, setDevice]);\n\n    return <DeviceContext.Provider value={device}>{props.children}</DeviceContext.Provider>;\n}\n\n/**\n * HOC to inject DeviceContext as props.\n * @param WrappedComponent - The component to wrap\n * @deprecated get Devices from LayoutContext\n */\nexport function withDevice<T extends IDeviceProps = IDeviceProps>(WrappedComponent: React.ComponentType<T>) {\n    const displayName = WrappedComponent.displayName || WrappedComponent.name || \"Component\";\n    const ComponentWithDevice = (props: Optionalize<T, IDeviceProps>) => {\n        return (\n            <DeviceContext.Consumer>\n                {(context) => {\n                    // https://github.com/Microsoft/TypeScript/issues/28938\n                    return <WrappedComponent device={context} {...(props as any)} />;\n                }}\n            </DeviceContext.Consumer>\n        );\n    };\n    ComponentWithDevice.displayName = `withDevice(${displayName})`;\n    return ComponentWithDevice;\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport { userSelect } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { CSSObject } from \"@emotion/css\";\nimport { important, px } from \"csx\";\nimport { paddingOffsetBasedOnBorderRadius } from \"@library/forms/paddingOffsetFromBorderRadius\";\nimport { buttonGlobalVariables } from \"./Button.variables\";\n\nexport const buttonSizing = (props: {\n    minHeight;\n    minWidth;\n    fontSize;\n    paddingHorizontal;\n    formElementVars;\n    borderRadius;\n    skipDynamicPadding;\n    debug?: boolean;\n}) => {\n    const buttonGlobals = buttonGlobalVariables();\n    const {\n        minHeight = buttonGlobals.sizing.minHeight,\n        minWidth = buttonGlobals.sizing.minWidth,\n        fontSize = buttonGlobals.font.size,\n        paddingHorizontal = buttonGlobals.padding.horizontal,\n        formElementVars,\n        borderRadius,\n        skipDynamicPadding,\n        debug = false,\n    } = props;\n\n    const borderWidth = formElementVars.borders ? formElementVars.borders : buttonGlobals.border.width;\n    const height = minHeight ?? formElementVars.sizing.minHeight;\n\n    const paddingOffsets = !skipDynamicPadding\n        ? paddingOffsetBasedOnBorderRadius({\n              radius: borderRadius,\n              extraPadding: buttonGlobals.padding.fullBorderRadius.extraHorizontalPadding,\n              height,\n          })\n        : {\n              right: 0,\n              left: 0,\n          };\n\n    return {\n        minHeight: styleUnit(height),\n        minWidth: minWidth ? styleUnit(minWidth) : undefined,\n        fontSize: styleUnit(fontSize),\n        padding: `0px ${px(paddingHorizontal + (paddingOffsets.right || 0) ?? 0)} 0px ${px(\n            paddingHorizontal + (paddingOffsets.left || 0) ?? 0,\n        )}`,\n        lineHeight: styleUnit(height - borderWidth * 2),\n    };\n};\n\nexport const buttonResetMixin = (): CSSObject => ({\n    ...userSelect(),\n    appearance: \"none\",\n    border: 0,\n    padding: 0,\n    background: \"none\",\n    cursor: \"pointer\",\n    color: \"inherit\",\n    textDecoration: important(\"none\"),\n    textAlign: \"inherit\",\n    overflowWrap: \"break-word\",\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { getOptionalID, IOptionalComponentID } from \"@library/utility/idUtils\";\n\nexport interface IParagraphProps extends IOptionalComponentID {\n    className?: string;\n    isError?: boolean;\n    children?: React.ReactNode;\n}\n\nexport default class Paragraph extends React.Component<IParagraphProps> {\n    public static defaultProps = {\n        id: false,\n    };\n\n    public id: string;\n\n    constructor(props) {\n        super(props);\n        this.id = getOptionalID(props, \"Paragraph\") as string;\n    }\n\n    public render() {\n        if (this.props.children) {\n            const componentClasses = classNames({ isError: this.props.isError }, this.props.className);\n\n            let accessibilityProps = {};\n\n            if (this.props.isError) {\n                accessibilityProps = {\n                    \"aria-live\": \"assertive\",\n                    role: \"alert\",\n                };\n            }\n\n            return (\n                <p id={this.id} className={componentClasses} {...accessibilityProps}>\n                    {this.props.children}\n                </p>\n            );\n        } else {\n            return null;\n        }\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { BorderRadiusProperty } from \"csstype\";\nimport { TLength } from \"@library/styles/styleShim\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport merge from \"lodash/merge\";\nimport { getValueIfItExists } from \"@library/forms/borderStylesCalculator\";\nimport {\n    IBorderRadiusOptions,\n    IBorderRadiusOutput,\n    IRadiusShorthand,\n    IRadiusValue,\n    ISimpleBorderStyle,\n} from \"@library/styles/cssUtilsTypes\";\n\nexport enum BorderType {\n    BORDER = \"border\",\n    SEPARATOR = \"separator\",\n    NONE = \"none\",\n    SHADOW = \"shadow\",\n    SHADOW_AS_BORDER = \"shadow_as_border\", // Note that is applied on a different element\n}\n\nexport type radiusValue = BorderRadiusProperty<TLength> | string;\n\nexport interface IMixedRadiusDeclaration extends IRadiusShorthand, IBorderRadiusOutput {}\n\ntype IRadiusInput = IMixedRadiusDeclaration | IRadiusValue;\n\nconst typeIsStringOrNumber = (variable: unknown): variable is number | string => {\n    if (variable !== null) {\n        const type = typeof variable;\n        return type === \"string\" || type === \"number\";\n    } else {\n        return false;\n    }\n};\n\nconst setAllRadii = (radius: BorderRadiusProperty<TLength>, options?: IBorderRadiusOptions) => {\n    return {\n        borderTopRightRadius: styleUnit(radius, options),\n        borderBottomRightRadius: styleUnit(radius, options),\n        borderBottomLeftRadius: styleUnit(radius, options),\n        borderTopLeftRadius: styleUnit(radius, options),\n    };\n};\n\nexport const EMPTY_BORDER_RADIUS = {\n    borderTopRightRadius: undefined,\n    borderBottomRightRadius: undefined,\n    borderBottomLeftRadius: undefined,\n    borderTopLeftRadius: undefined,\n};\n\n/**\n * Main utility function for generation proper border radiuses. Supports numerous shorthand properties.\n *\n * @param radii\n * @param options\n */\nexport const standardizeBorderRadius = (radii: IRadiusInput, options?: IBorderRadiusOptions): IBorderRadiusOutput => {\n    const output: IBorderRadiusOutput = {};\n    const { debug } = options || {};\n\n    if (typeof radii === \"object\" && Object.keys(radii).length === 0) {\n        return output;\n    }\n\n    if (typeIsStringOrNumber(radii)) {\n        // direct value\n        const value = styleUnit(radii as number | string);\n        return {\n            borderTopRightRadius: styleUnit(value, options),\n            borderBottomRightRadius: styleUnit(value, options),\n            borderBottomLeftRadius: styleUnit(value, options),\n            borderTopLeftRadius: styleUnit(value, options),\n        };\n    }\n\n    // Otherwise we need to check all of the values.\n    const all = getValueIfItExists(radii, \"all\", getValueIfItExists(radii, \"radius\"));\n    const top = getValueIfItExists(radii, \"top\");\n    const bottom = getValueIfItExists(radii, \"bottom\");\n    const left = getValueIfItExists(radii, \"left\");\n    const right = getValueIfItExists(radii, \"right\");\n\n    if (typeIsStringOrNumber(all)) {\n        merge(output, {\n            borderTopRightRadius: styleUnit(all, options),\n            borderBottomRightRadius: styleUnit(all, options),\n            borderBottomLeftRadius: styleUnit(all, options),\n            borderTopLeftRadius: styleUnit(all, options),\n        });\n    }\n\n    if (top !== undefined) {\n        const isShorthand = typeIsStringOrNumber(top);\n\n        if (isShorthand) {\n            const value = !isShorthand ? styleUnit(top, options) : top;\n            merge(output, {\n                borderTopRightRadius: styleUnit(value, options),\n                borderTopLeftRadius: styleUnit(value, options),\n            });\n        } else {\n            merge(\n                output,\n                right !== undefined ? { borderTopRightRadius: styleUnit(right, options) } : {},\n                left !== undefined ? { borderTopLeftRadius: styleUnit(left, options) } : {},\n            );\n        }\n    }\n\n    if (bottom !== undefined) {\n        const isShorthand = typeIsStringOrNumber(bottom);\n\n        if (isShorthand) {\n            const value = !isShorthand ? styleUnit(bottom, options) : bottom;\n            merge(output, {\n                borderBottomRightRadius: styleUnit(value, options),\n                borderBottomLeftRadius: styleUnit(value, options),\n            });\n        } else {\n            merge(\n                output,\n                right !== undefined ? { borderBottomRightRadius: styleUnit(right, options) } : {},\n                left !== undefined ? { borderBottomLeftRadius: styleUnit(left, options) } : {},\n            );\n        }\n    }\n\n    if (left !== undefined) {\n        const isShorthand = typeIsStringOrNumber(left);\n\n        if (isShorthand) {\n            const value = !isShorthand ? styleUnit(left, options) : left;\n            merge(output, {\n                borderTopLeftRadius: styleUnit(value, options),\n                borderBottomLeftRadius: styleUnit(value, options),\n            });\n        } else {\n            const topStyles = top !== undefined ? { borderTopLeftRadius: styleUnit(top, options) } : {};\n            const bottomStyles = bottom !== undefined ? { borderBottomLeftRadius: styleUnit(bottom, options) } : {};\n            merge(\n                output,\n                !typeIsStringOrNumber(topStyles) ? topStyles : {},\n                !typeIsStringOrNumber(bottomStyles) ? bottomStyles : {},\n            );\n        }\n    }\n    if (right !== undefined) {\n        const isShorthand = typeIsStringOrNumber(right);\n\n        if (isShorthand) {\n            const value = !isShorthand ? styleUnit(right, options) : right;\n            merge(output, {\n                borderTopRightRadius: styleUnit(value, options),\n                borderBottomRightRadius: styleUnit(value, options),\n            });\n        } else {\n            const topStyles = top !== undefined ? { borderTopRightRadius: styleUnit(top, options) } : {};\n            const bottomStyles = bottom !== undefined ? { borderBottomRightRadius: styleUnit(bottom, options) } : {};\n            merge(\n                output,\n                !typeIsStringOrNumber(topStyles) ? topStyles : {},\n                !typeIsStringOrNumber(bottomStyles) ? bottomStyles : {},\n            );\n        }\n    }\n\n    const borderTopRightRadius = getValueIfItExists(radii, \"borderTopRightRadius\");\n    if (borderTopRightRadius !== undefined) {\n        merge(output, {\n            borderTopRightRadius: styleUnit(borderTopRightRadius, options),\n        });\n    }\n    const borderTopLeftRadius = getValueIfItExists(radii, \"borderTopLeftRadius\");\n    if (borderTopLeftRadius !== undefined) {\n        merge(output, {\n            borderTopLeftRadius: styleUnit(borderTopLeftRadius, options),\n        });\n    }\n    const borderBottomRightRadius = getValueIfItExists(radii, \"borderBottomRightRadius\");\n    if (borderBottomRightRadius !== undefined) {\n        merge(output, {\n            borderBottomRightRadius: styleUnit(borderBottomRightRadius, options),\n        });\n    }\n    const borderBottomLeftRadius = getValueIfItExists(radii, \"borderBottomLeftRadius\");\n    if (borderBottomLeftRadius !== undefined) {\n        merge(output, {\n            borderBottomLeftRadius: styleUnit(borderBottomLeftRadius, options),\n        });\n    }\n\n    return output;\n};\n\nexport const borderRadii = (radii: IRadiusValue, options?: IBorderRadiusOptions) => {\n    const { fallbackRadii = globalVariables().border.radius, isImportant = false, debug = false } = options || {};\n\n    const output: IBorderRadiusOutput = {};\n\n    if (typeIsStringOrNumber(fallbackRadii)) {\n        merge(output, setAllRadii(fallbackRadii, { isImportant }));\n    } else {\n        merge(output, typeIsStringOrNumber(fallbackRadii) ? fallbackRadii : fallbackRadii);\n    }\n\n    const hasRadiusShorthand = typeIsStringOrNumber(radii);\n    const hasRadiusShorthandFallback = typeIsStringOrNumber(fallbackRadii);\n\n    // Make sure we have a value before overwriting.\n    if (hasRadiusShorthand) {\n        merge(output, setAllRadii(radii as any, { isImportant }));\n    } else if (hasRadiusShorthandFallback) {\n        merge(output, setAllRadii(fallbackRadii as any, { isImportant }));\n    } else {\n        // our fallback must be an object.\n        merge(output, standardizeBorderRadius(fallbackRadii as any, { isImportant }));\n    }\n    merge(output, standardizeBorderRadius(radii as any, { isImportant }));\n    return output;\n};\n\nexport const singleBorder = (styles?: ISimpleBorderStyle) => {\n    const vars = globalVariables();\n    const borderStyles = styles !== undefined ? styles : {};\n    return `${borderStyles.style ? borderStyles.style : vars.border.style} ${\n        borderStyles.color ? ColorsUtils.colorOut(borderStyles.color) : ColorsUtils.colorOut(vars.border.color)\n    } ${borderStyles.width ? styleUnit(borderStyles.width) : styleUnit(vars.border.width)}` as any;\n};\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { getMeta } from \"@library/utility/appUtils\";\n\nexport const ALL_CONTENT_DOMAIN_NAME = \"all_content\";\nexport const ALLOWED_GLOBAL_SEARCH_FIELDS = [\"query\", \"name\", \"insertUserIDs\", \"dateInserted\", \"page\", \"types\"];\nexport const NEW_SEARCH_PAGE_ENABLED = getMeta(\"themeFeatures.useNewSearchPage\", false);\nexport const MEMBERS_DOMAIN_NAME = \"members\";\nexport const MEMBERS_RECORD_TYPE = \"user\";\nexport const PLACES_DOMAIN_NAME = \"places\";\nexport const PLACES_KNOWLEDGE_BASE_TYPE = \"knowledgeBase\";\nexport const PLACES_GROUP_TYPE = \"group\";\nexport const PLACES_CATEGORY_TYPE = \"category\";\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useEmbedContext } from \"@library/embeddedContent/IEmbedContext\";\nimport { embedContainerClasses } from \"@library/embeddedContent/components/embedStyles\";\nimport classNames from \"classnames\";\nimport React, { DetailedHTMLProps, forwardRef } from \"react\";\nimport { EmbedContainerSize } from \"./EmbedContainerSize\";\n\ninterface IProps extends DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement> {\n    className?: string;\n    children?: React.ReactNode;\n    size?: EmbedContainerSize;\n    withPadding?: boolean;\n}\n\nexport const EmbedContainer = forwardRef(function EmbedContainer(props: IProps, ref: React.Ref<HTMLDivElement>) {\n    const { size, withPadding, ...htmlProps } = props;\n    const classes = embedContainerClasses();\n\n    const { inEditor } = useEmbedContext();\n    return (\n        <div\n            ref={ref}\n            {...htmlProps}\n            className={classNames(\n                \"embedExternal\",\n                classes.makeRootClass(props.size || EmbedContainerSize.MEDIUM, !!inEditor, !!withPadding),\n                props.className,\n            )}\n        >\n            {props.children}\n        </div>\n    );\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { buttonGlobalVariables } from \"@library/forms/Button.variables\";\nimport { buttonResetMixin, buttonSizing } from \"@library/forms/buttonMixins\";\nimport { ButtonPreset } from \"@library/forms/ButtonPreset\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { IButtonType } from \"@library/forms/styleHelperButtonInterface\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { Variables } from \"@library/styles/Variables\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { percent } from \"csx\";\nimport merge from \"lodash/merge\";\nimport { CSSObject } from \"@emotion/css\";\nimport cloneDeep from \"lodash/cloneDeep\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { defaultTransition } from \"@library/styles/styleHelpersAnimation\";\n\nexport const generateButtonStyleProperties = (props: {\n    buttonTypeVars: IButtonType;\n    setZIndexOnState?: boolean;\n    stateSuffix?: string;\n    debug?: boolean | string;\n    globalVars?: any;\n    formElementVars?: any;\n    buttonGlobalVars?: any;\n}) => {\n    const {\n        setZIndexOnState = false,\n        stateSuffix,\n        globalVars = globalVariables(),\n        formElementVars = formElementsVariables(),\n        buttonGlobalVars = buttonGlobalVariables(),\n        debug = false,\n    } = props;\n\n    const zIndex = setZIndexOnState ? 1 : undefined;\n    const buttonDimensions = props.buttonTypeVars.sizing || {};\n\n    const state = props.buttonTypeVars.state ?? {};\n    const colors = props.buttonTypeVars.colors ?? {\n        bg: globalVars.mainColors.bg,\n        fg: globalVars.mainColors.fg,\n    };\n\n    // Make sure we have the second level, if it was empty\n    const buttonTypeVars = merge(\n        {\n            preset: ButtonPreset.ADVANCED,\n            colors,\n            state,\n            hover: state,\n            focus: state,\n            active: state,\n            focusAccessible: state,\n        },\n        props.buttonTypeVars,\n    );\n\n    let backgroundColor =\n        buttonTypeVars.colors && buttonTypeVars.colors.bg ? buttonTypeVars.colors.bg : buttonGlobalVars.colors.bg;\n\n    let fontColor =\n        buttonTypeVars.fonts && buttonTypeVars.fonts.color\n            ? buttonTypeVars.fonts.color\n            : buttonTypeVars.colors && buttonTypeVars.colors.fg\n            ? buttonTypeVars.colors.fg\n            : undefined;\n\n    if (!buttonTypeVars.borders) {\n        buttonTypeVars.borders = {};\n    }\n\n    if (!buttonTypeVars.borders.color) {\n        buttonTypeVars.borders = {};\n    }\n\n    const borderVars = {\n        ...buttonGlobalVars.borders,\n        ...buttonTypeVars.borders,\n    };\n\n    const defaultBorder = Mixins.border(borderVars, {\n        fallbackBorderVariables: buttonGlobalVars.border,\n        debug,\n    });\n\n    const hoverBorder =\n        buttonTypeVars.hover && buttonTypeVars.hover.borders\n            ? merge(\n                  cloneDeep(defaultBorder),\n                  Mixins.border(\n                      { ...buttonTypeVars.hover.borders },\n                      { fallbackBorderVariables: buttonGlobalVars.border },\n                  ),\n              )\n            : {};\n\n    const activeBorder =\n        buttonTypeVars.active && buttonTypeVars.active.borders\n            ? merge(\n                  cloneDeep(defaultBorder),\n                  Mixins.border(\n                      { ...buttonTypeVars.active.borders },\n                      { fallbackBorderVariables: buttonGlobalVars.border },\n                  ),\n              )\n            : {};\n\n    const focusBorder =\n        buttonTypeVars.focus && buttonTypeVars.focus.borders\n            ? merge(\n                  cloneDeep(defaultBorder),\n                  Mixins.border(\n                      { ...(buttonTypeVars.focus && buttonTypeVars.focus.borders) },\n                      { fallbackBorderVariables: buttonGlobalVars.border },\n                  ),\n              )\n            : defaultBorder;\n\n    const focusAccessibleBorder =\n        buttonTypeVars.focusAccessible && buttonTypeVars.focusAccessible.borders\n            ? merge(\n                  cloneDeep(defaultBorder),\n                  Mixins.border(\n                      { ...buttonTypeVars.focusAccessible.borders },\n                      { fallbackBorderVariables: buttonGlobalVars.border },\n                  ),\n              )\n            : {};\n\n    const fontVars = Variables.font({ ...buttonGlobalVars.font, ...buttonTypeVars.fonts });\n\n    const paddingHorizontal =\n        buttonTypeVars.padding && buttonTypeVars.padding.horizontal !== undefined\n            ? buttonTypeVars.padding.horizontal\n            : buttonGlobalVars.padding.horizontal;\n    const fontSize =\n        buttonTypeVars.fonts && buttonTypeVars.fonts.size !== undefined\n            ? buttonTypeVars.fonts.size\n            : buttonGlobalVars.font.size;\n\n    const { minHeight, minWidth } = buttonDimensions;\n    const { skipDynamicPadding = false } = buttonTypeVars;\n\n    const result: CSSObject = {\n        ...buttonResetMixin(),\n        textOverflow: \"ellipsis\",\n        overflow: \"hidden\",\n        width: \"auto\",\n        maxWidth: percent(100),\n        backgroundColor: ColorsUtils.colorOut(backgroundColor),\n        ...Mixins.font({\n            ...fontVars,\n            size: fontSize,\n            color: fontColor,\n            weight: fontVars.weight ?? undefined,\n        }),\n        WebkitFontSmoothing: \"antialiased\",\n        ...defaultBorder,\n        ...buttonSizing({\n            minHeight,\n            minWidth,\n            fontSize,\n            paddingHorizontal,\n            formElementVars: formElementVars,\n            borderRadius: borderVars[\"radius\"] ?? undefined,\n            skipDynamicPadding,\n        }),\n        display: \"inline-flex\",\n        alignItems: \"center\",\n        position: \"relative\",\n        textAlign: \"center\",\n        whiteSpace: \"nowrap\",\n        verticalAlign: \"middle\",\n        justifyContent: \"center\",\n        touchAction: \"manipulation\",\n        cursor: \"pointer\",\n        ...defaultTransition(\"background\", \"color\", \"border\"),\n        ...{\n            [`&:not([disabled]):not(.focus-visible)`]: {\n                outline: 0,\n            },\n            [`&:not([disabled]):hover${stateSuffix ?? \"\"}`]: {\n                zIndex,\n                color: ColorsUtils.colorOut(\n                    buttonTypeVars.hover && buttonTypeVars.hover.colors && buttonTypeVars.hover.colors.fg\n                        ? buttonTypeVars.hover.colors.fg\n                        : undefined,\n                ),\n                backgroundColor: ColorsUtils.colorOut(\n                    buttonTypeVars.hover && buttonTypeVars.hover.colors && buttonTypeVars.hover.colors.bg\n                        ? buttonTypeVars.hover.colors.bg\n                        : undefined,\n                ),\n                ...hoverBorder,\n            },\n            [`&:not([disabled]):focus${stateSuffix ?? \"\"}`]: {\n                zIndex,\n                color: ColorsUtils.colorOut(\n                    buttonTypeVars.focus!.colors && buttonTypeVars.focus!.colors.fg\n                        ? buttonTypeVars.focus!.colors.fg\n                        : undefined,\n                ),\n                backgroundColor: ColorsUtils.colorOut(\n                    buttonTypeVars.focus!.colors && buttonTypeVars.focus!.colors.bg\n                        ? buttonTypeVars.focus!.colors.bg\n                        : undefined,\n                ),\n                ...focusBorder,\n            },\n            [`&:not([disabled]):active${stateSuffix ?? \"\"}`]: {\n                zIndex,\n                color: ColorsUtils.colorOut(\n                    buttonTypeVars.active!.colors && buttonTypeVars.active!.colors.fg\n                        ? buttonTypeVars.active!.colors.fg\n                        : undefined,\n                ),\n                backgroundColor: ColorsUtils.colorOut(\n                    buttonTypeVars.active!.colors && buttonTypeVars.active!.colors.bg\n                        ? buttonTypeVars.active!.colors.bg\n                        : undefined,\n                ),\n                ...activeBorder,\n            },\n            [`&:not([disabled]):focus-visible${stateSuffix ?? \"\"}`]: {\n                zIndex,\n                color: ColorsUtils.colorOut(\n                    buttonTypeVars.focusAccessible!.colors && buttonTypeVars.focusAccessible!.colors.fg\n                        ? buttonTypeVars.focusAccessible!.colors.fg\n                        : undefined,\n                ),\n                backgroundColor: ColorsUtils.colorOut(\n                    buttonTypeVars.focusAccessible!.colors && buttonTypeVars.focusAccessible!.colors.bg\n                        ? buttonTypeVars.focusAccessible!.colors.bg\n                        : undefined,\n                ),\n                ...focusAccessibleBorder,\n            },\n            \"&[disabled]\": {\n                opacity: formElementVars.disabled.opacity,\n            },\n            ...(buttonTypeVars.extraNested ?? {}),\n        },\n    };\n\n    return result;\n};\n\nconst generateButtonClass = (\n    buttonTypeVars: IButtonType,\n    options?: { setZIndexOnState?: boolean; debug?: boolean | string },\n) => {\n    const { setZIndexOnState = false, debug = false } = options || {};\n    const style = styleFactory(`button-${buttonTypeVars.name}`);\n    const buttonStyles = generateButtonStyleProperties({\n        buttonTypeVars,\n        setZIndexOnState,\n    });\n    const buttonClass = style(buttonStyles);\n    return buttonClass;\n};\n\nexport default generateButtonClass;\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { CSSObject } from \"@emotion/css\";\n\nexport enum twoColumnLayoutDevices {\n    XS = \"xs\",\n    MOBILE = \"mobile\",\n    DESKTOP = \"desktop\",\n    NO_BLEED = \"no_bleed\", // Not enough space for back link which goes outside the margin.\n}\n\nexport interface ITwoColumnLayoutMediaQueryStyles {\n    noBleed?: CSSObject;\n    noBleedDown?: CSSObject;\n    oneColumn?: CSSObject;\n    oneColumnDown?: CSSObject;\n    aboveOneColumn?: CSSObject;\n    xs?: CSSObject;\n}\n\nexport interface ITwoColumnLayoutMediaQueries {\n    noBleed: (styles: CSSObject) => CSSObject;\n    oneColumn: (styles: CSSObject) => CSSObject;\n    oneColumnDown: (styles: CSSObject) => CSSObject;\n    aboveOneColumn: (styles: CSSObject) => CSSObject;\n    noBleedDown: (styles: CSSObject) => CSSObject;\n    xs: (styles: CSSObject) => CSSObject;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { CSSObject } from \"@emotion/css\";\nimport { media } from \"@library/styles/styleShim\";\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { generatePanelLayoutClasses, layoutVariables } from \"../panelLayoutStyles\";\nimport { LayoutTypes } from \"@library/layout/types/interface.layoutTypes\";\nimport { ITwoColumnLayoutMediaQueries, twoColumnLayoutDevices } from \"@library/layout/types/interface.twoColumns\";\nimport { IPanelLayoutVariables } from \"@library/layout/types/interface.panelLayout\";\nimport { mediaQueryFactory } from \"@library/layout/types/mediaQueryFactory\";\n\nexport const twoColumnLayoutVariables = useThemeCache(\n    (): IPanelLayoutVariables => {\n        const layoutVars = layoutVariables();\n        const Devices = twoColumnLayoutDevices;\n        const { fullGutter } = layoutVars.foundationalWidths;\n\n        const makeThemeVars = variableFactory(\"twoColumnLayout\");\n\n        // Important variables that will be used to calculate other variables\n        const foundationalWidths = makeThemeVars(\"foundationalWidths\", {\n            fullGutter,\n            minimalMiddleColumnWidth: 600,\n            panelWidth: 343,\n            breakPoints: {\n                xs: layoutVars.foundationalWidths.breakPoints.xs,\n            }, // Other break point are calculated\n        });\n\n        const gutter = makeThemeVars(\"gutter\", {\n            full: foundationalWidths.fullGutter, // 40\n            size: foundationalWidths.fullGutter / 2, // 20\n            halfSize: foundationalWidths.fullGutter / 4, // 10\n            quarterSize: foundationalWidths.fullGutter / 8, // 5\n        });\n\n        const panelInit = makeThemeVars(\"panel\", {\n            width: foundationalWidths.panelWidth,\n        });\n\n        const panel = makeThemeVars(\"panel\", {\n            ...panelInit,\n            paddedWidth: panelInit.width + layoutVars.gutter.full,\n        });\n\n        const middleColumnInit = makeThemeVars(\"mainColumn\", {\n            width: layoutVars.contentWidth - panel.paddedWidth - layoutVars.gutter.full,\n        });\n\n        const middleColumn = makeThemeVars(\"mainColumn\", {\n            ...middleColumnInit,\n            paddedWidth: middleColumnInit.width + layoutVars.gutter.full,\n        });\n\n        const breakPoints = makeThemeVars(\"breakPoints\", {\n            noBleed: layoutVars.contentWidth,\n            oneColumn: foundationalWidths.minimalMiddleColumnWidth + panel.paddedWidth,\n            xs: foundationalWidths.breakPoints.xs,\n        });\n\n        const contentWidth = middleColumn.paddedWidth + panel.paddedWidth * 2;\n\n        const mediaQueries = (): ITwoColumnLayoutMediaQueries => {\n            const noBleed = (styles: CSSObject, useMinWidth: boolean = true) => {\n                return media(\n                    {\n                        maxWidth: breakPoints.noBleed,\n                        minWidth: useMinWidth ? breakPoints.oneColumn + 1 : undefined,\n                    },\n                    styles,\n                );\n            };\n\n            const noBleedDown = (styles: CSSObject) => {\n                return media(\n                    {\n                        maxWidth: breakPoints.noBleed,\n                    },\n                    styles,\n                );\n            };\n\n            const oneColumn = (styles: CSSObject, useMinWidth: boolean = true) => {\n                return media(\n                    {\n                        maxWidth: breakPoints.oneColumn,\n                        minWidth: useMinWidth ? breakPoints.xs + 1 : undefined,\n                    },\n                    styles,\n                );\n            };\n\n            const oneColumnDown = (styles: CSSObject) => {\n                return media(\n                    {\n                        maxWidth: breakPoints.oneColumn,\n                    },\n                    styles,\n                );\n            };\n\n            const aboveOneColumn = (styles: CSSObject) => {\n                return media(\n                    {\n                        minWidth: breakPoints.oneColumn + 1,\n                    },\n                    styles,\n                );\n            };\n\n            const xs = (styles: CSSObject) => {\n                return media(\n                    {\n                        maxWidth: breakPoints.xs,\n                    },\n                    styles,\n                );\n            };\n\n            return {\n                noBleed,\n                noBleedDown,\n                oneColumn,\n                oneColumnDown,\n                aboveOneColumn,\n                xs,\n            };\n        };\n\n        const calculateDevice = (): string => {\n            const width = document.body.clientWidth;\n            if (width <= breakPoints.xs) {\n                return Devices.XS.toString();\n            } else if (width <= breakPoints.oneColumn) {\n                return Devices.MOBILE.toString();\n            } else if (width <= breakPoints.noBleed) {\n                return Devices.NO_BLEED.toString();\n            } else {\n                return Devices.DESKTOP.toString();\n            }\n        };\n\n        const isFullWidth = (currentDevice) => {\n            return currentDevice === Devices.DESKTOP || currentDevice === Devices.NO_BLEED;\n        };\n\n        const isCompact = (currentDevice) => {\n            return currentDevice === Devices.XS || currentDevice === Devices.MOBILE;\n        };\n\n        const panelLayoutSpacing = makeThemeVars(\"panelLayoutSpacing\", layoutVars.panelLayoutSpacing);\n\n        return {\n            type: LayoutTypes.TWO_COLUMNS.toString(),\n            Devices,\n            foundationalWidths,\n            panel,\n            middleColumn,\n            gutter,\n            panelLayoutSpacing,\n            contentWidth,\n            breakPoints,\n            mediaQueries,\n            calculateDevice,\n            isFullWidth,\n            isCompact,\n        };\n    },\n);\n\nexport const twoColumnLayoutClasses = () => {\n    return generatePanelLayoutClasses({\n        vars: twoColumnLayoutVariables(),\n        name: \"twoColumnLayout\",\n        mediaQueries: mediaQueryFactory(twoColumnLayoutVariables().mediaQueries, LayoutTypes.TWO_COLUMNS),\n    });\n};\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { generatePanelLayoutClasses, layoutVariables } from \"../panelLayoutStyles\";\nimport { LayoutTypes } from \"@library/layout/types/interface.layoutTypes\";\nimport { fallbackLayoutVariables, IPanelLayoutVariables } from \"@library/layout/types/interface.panelLayout\";\nimport { mediaQueryFactory } from \"@library/layout/types/mediaQueryFactory\";\n\ninterface IProps extends IPanelLayoutVariables {\n    contentSizes: object;\n}\n\nexport const threeColumnLayoutVariables = useThemeCache(\n    (): IProps => {\n        const layoutVars = layoutVariables();\n        const Devices = fallbackLayoutVariables;\n\n        const makeThemeVars = variableFactory(\"threeColumnLayout\");\n\n        const colors = makeThemeVars(\"colors\", {\n            ...layoutVars.colors,\n        });\n        const contentSizes = makeThemeVars(\"contentSizes\", {\n            ...layoutVars.contentSizes,\n        });\n        const gutter = makeThemeVars(\"gutter\", {\n            ...layoutVars.gutter,\n        });\n\n        const panelLayoutSpacing = makeThemeVars(\"panelLayoutSpacing\", {\n            ...layoutVars.panelLayoutSpacing,\n        });\n\n        const rightPanelCondition = (currentDevice, shouldRenderLeftPanel: boolean) => {\n            return currentDevice === Devices.TABLET && !shouldRenderLeftPanel;\n        };\n\n        const foundationalWidths = makeThemeVars(\"foundationalWidths\", {\n            ...layoutVars.foundationalWidths,\n        });\n\n        const panelInit = makeThemeVars(\"panel\", {\n            width: foundationalWidths.panelWidth,\n        });\n\n        const panel = makeThemeVars(\"panel\", {\n            ...panelInit,\n            paddedWidth: panelInit.width + layoutVars.gutter.full,\n        });\n\n        const middleColumnInit = makeThemeVars(\"middleColumn\", {\n            width: layoutVars.middleColumn.width,\n        });\n\n        const middleColumn = makeThemeVars(\"middleColumn\", {\n            ...middleColumnInit,\n            paddedWidth: middleColumnInit.width + layoutVars.gutter.full,\n        });\n\n        const contentWidth = middleColumn.paddedWidth + panel.paddedWidth * 2;\n\n        const breakPoints = makeThemeVars(\"breakPoints\", {\n            noBleed: contentWidth,\n            twoColumns: foundationalWidths.breakPoints.twoColumns,\n            oneColumn: foundationalWidths.minimalMiddleColumnWidth + panel.paddedWidth,\n            xs: foundationalWidths.breakPoints.xs,\n        });\n\n        const mediaQueries = layoutVars.mediaQueries;\n\n        const calculateDevice = () => {\n            const width = document.body.clientWidth;\n            if (width <= breakPoints.xs) {\n                return Devices.XS.toString();\n            } else if (width <= breakPoints.oneColumn) {\n                return Devices.MOBILE.toString();\n            } else if (width <= breakPoints.twoColumns) {\n                return Devices.TABLET.toString();\n            } else if (width <= breakPoints.noBleed) {\n                return Devices.NO_BLEED.toString();\n            } else {\n                return Devices.DESKTOP.toString();\n            }\n        };\n\n        const isFullWidth = (currentDevice) => {\n            return currentDevice === Devices.DESKTOP || currentDevice === Devices.NO_BLEED;\n        };\n\n        const isCompact = (currentDevice) => {\n            return currentDevice === Devices.XS || currentDevice === Devices.MOBILE;\n        };\n\n        return {\n            colors,\n            contentSizes,\n            gutter,\n            panelLayoutSpacing,\n            type: LayoutTypes.THREE_COLUMNS,\n            Devices,\n            foundationalWidths,\n            panel,\n            middleColumn,\n            contentWidth,\n            breakPoints,\n            mediaQueries,\n            calculateDevice,\n            isFullWidth,\n            isCompact,\n            rightPanelCondition,\n        };\n    },\n);\n\nexport const threeColumnLayoutClasses = () => {\n    return generatePanelLayoutClasses({\n        vars: threeColumnLayoutVariables(),\n        name: \"threeColumnLayout\",\n        mediaQueries: mediaQueryFactory(threeColumnLayoutVariables().mediaQueries, LayoutTypes.THREE_COLUMNS),\n    });\n};\n","import { CSSObject } from \"@emotion/css\";\nimport { logError } from \"@vanilla/utils\";\nimport {\n    IAllLayoutMediaQueries,\n    ILayoutMediaQueryFunction,\n    IMediaQueryFunction,\n} from \"@library/layout/types/interface.panelLayout\";\nimport { LayoutTypes } from \"@library/layout/types/interface.layoutTypes\";\nimport { twoColumnLayoutVariables } from \"@library/layout/types/layout.twoColumns\";\nimport { threeColumnLayoutClasses, threeColumnLayoutVariables } from \"@library/layout/types/layout.threeColumns\";\n\n/* Allows to declare styles for any layout without causing errors\nDeclare media query styles like this:\n\n    mediaQueries({\n        [LayoutTypes.TWO_COLUMNS]: {\n            oneColumnDown: {\n                ...srOnly(),\n            },\n        },\n        [LayoutTypes.THREE_COLUMNS]: {\n            twoColumns: {\n                // Styles go here\n            }\n        }\n    }),\n    Note that \"twoColumns\" does not exist in two column layout media queries, but it does not crash!\n*/\nexport const mediaQueryFactory = (mediaQueriesByType, type): IMediaQueryFunction => {\n    // The following function is the one called in component styles.\n    return (mediaQueriesForAllLayouts: IAllLayoutMediaQueries): CSSObject => {\n        let output = {};\n        Object.keys(mediaQueriesForAllLayouts).forEach((layoutName) => {\n            // Check if we're in the correct layout before applying\n            if (layoutName === type) {\n                // Fetch the available styles and the media queries for the current layout\n                const stylesByMediaQuery = mediaQueriesForAllLayouts[layoutName];\n                const mediaQueries =\n                    type === LayoutTypes.TWO_COLUMNS\n                        ? twoColumnLayoutVariables().mediaQueries()\n                        : threeColumnLayoutVariables().mediaQueries();\n\n                // Match the two together\n                if (stylesByMediaQuery) {\n                    Object.keys(stylesByMediaQuery).forEach((queryName) => {\n                        const query: ILayoutMediaQueryFunction = mediaQueries[queryName];\n                        const styles: CSSObject = stylesByMediaQuery[queryName];\n                        if (!query) {\n                            logError(\n                                `Error calculating media queries: \\nThe styles provided were not in a valid media query.\\nYou likely forgot to wrap your styles in the key of the proper media query.\\nMedia queries available: ${JSON.stringify(\n                                    Object.keys(mediaQueries),\n                                )}\\nLooking for media query called \"${queryName}\"\\nin: `,\n                                JSON.stringify(stylesByMediaQuery),\n                            );\n                        } else {\n                            output = query(styles as any);\n                        }\n                    });\n                }\n            }\n        });\n        return output;\n    };\n};\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { Optionalize } from \"@library/@types/utils\";\nimport throttle from \"lodash/throttle\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { IPanelLayoutClasses } from \"@library/layout/panelLayoutStyles\";\nimport { LayoutTypes } from \"@library/layout/types/interface.layoutTypes\";\nimport { mediaQueryFactory } from \"@library/layout/types/mediaQueryFactory\";\nimport { IAllLayoutDevices, ILayoutMediaQueryFunction } from \"@library/layout/types/interface.panelLayout\";\nimport { twoColumnLayoutClasses, twoColumnLayoutVariables } from \"@library/layout/types/layout.twoColumns\";\nimport { threeColumnLayoutClasses, threeColumnLayoutVariables } from \"@library/layout/types/layout.threeColumns\";\n\nexport interface ILayoutProps {\n    type: LayoutTypes;\n    currentDevice: string;\n    Devices: IAllLayoutDevices;\n    isCompact: boolean; // Usually mobile and/or xs, but named this way to be more generic and not be confused with the actual mobile media query\n    isFullWidth: boolean; // Usually desktop and no bleed, but named this way to be more generic and just to mean it's the full size\n    classes: IPanelLayoutClasses;\n    currentLayoutVariables: any;\n    mediaQueries: ILayoutMediaQueryFunction;\n    contentWidth: number;\n    calculateDevice: () => any;\n    layoutSpecificStyles: (style) => any | undefined;\n    rightPanelCondition: (currentDevice: string, shouldRenderRightPanel: boolean) => boolean;\n}\n\nconst layoutDataByType = (type: LayoutTypes): ILayoutProps => {\n    const layout = {\n        variables: type === LayoutTypes.TWO_COLUMNS ? twoColumnLayoutVariables() : threeColumnLayoutVariables(),\n        classes: type === LayoutTypes.TWO_COLUMNS ? twoColumnLayoutClasses() : threeColumnLayoutClasses(),\n    };\n\n    const currentDevice = layout.variables.calculateDevice().toString();\n\n    return {\n        type,\n        currentDevice,\n        Devices: layout.variables.Devices as any,\n        isCompact: layout.variables.isCompact(currentDevice),\n        isFullWidth: layout.variables.isFullWidth(currentDevice),\n        classes: layout.classes as IPanelLayoutClasses,\n        currentLayoutVariables: layout.variables,\n        mediaQueries: mediaQueryFactory(layout.variables.mediaQueries, type),\n        contentWidth: layout.variables.contentWidth,\n        calculateDevice: layout.variables.calculateDevice,\n        layoutSpecificStyles: layout.variables[\"layoutSpecificStyles\"] ?? undefined,\n        rightPanelCondition:\n            layout.variables[\"rightPanelCondition\"] !== undefined\n                ? layout.variables[\"rightPanelCondition\"]\n                : () => {\n                      return false;\n                  },\n    };\n};\n\nconst LayoutContext = React.createContext<ILayoutProps>(layoutDataByType(LayoutTypes.THREE_COLUMNS));\n\nexport default LayoutContext;\n\nexport function useLayout() {\n    return useContext(LayoutContext);\n}\n\nexport function LayoutProvider(props: { type?: LayoutTypes; children: React.ReactNode }) {\n    const { type = LayoutTypes.THREE_COLUMNS, children } = props;\n\n    const [deviceInfo, setDeviceInfo] = useState<ILayoutProps>(layoutDataByType(type));\n\n    useEffect(() => {\n        const throttledUpdate = throttle(() => {\n            setDeviceInfo(layoutDataByType(type));\n        }, 100);\n        window.addEventListener(\"resize\", throttledUpdate);\n        return () => {\n            window.removeEventListener(\"resize\", throttledUpdate);\n        };\n    }, [type, setDeviceInfo]);\n\n    return <LayoutContext.Provider value={deviceInfo}>{children}</LayoutContext.Provider>;\n}\n\n/**\n * HOC to inject DeviceContext as props.\n *\n * @param WrappedComponent - The component to wrap\n */\nexport function withLayout<T extends ILayoutProps = ILayoutProps>(WrappedComponent: React.ComponentType<T>) {\n    const displayName = WrappedComponent.displayName || WrappedComponent.name || \"Component\";\n    const ComponentWithDevice = (props: Optionalize<T, ILayoutProps>) => {\n        return (\n            <LayoutContext.Consumer>\n                {(context) => {\n                    // https://github.com/Microsoft/TypeScript/issues/28938\n                    return <WrappedComponent device={context} {...(props as T)} />;\n                }}\n            </LayoutContext.Consumer>\n        );\n    };\n    ComponentWithDevice.displayName = `withLayout(${displayName})`;\n    return ComponentWithDevice;\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { typographyClasses } from \"@library/styles/typographyStyles\";\nimport { cx } from \"@library/styles/styleShim\";\n\nexport interface ICommonHeadingProps {\n    id?: string;\n    depth?: 1 | 2 | 3 | 4 | 5 | 6;\n    renderAsDepth?: 1 | 2 | 3 | 4 | 5 | 6;\n    className?: string;\n    title?: React.ReactNode;\n}\n\nexport interface IHeadingProps extends ICommonHeadingProps, Omit<React.HTMLAttributes<HTMLHeadingElement>, \"title\"> {\n    isLarge?: boolean;\n    children?: React.ReactNode;\n}\n\n/**\n * A component representing a element.\n */\nconst Heading = React.forwardRef<HTMLHeadingElement, IHeadingProps>(function Heading(props: IHeadingProps, ref) {\n    const { children, title, depth, renderAsDepth, className, isLarge, ...restProps } = props;\n    const finalDepth = depth ?? 2;\n    const finalRenderDepth = renderAsDepth ?? finalDepth;\n\n    const isPageTitle = finalRenderDepth === 1;\n    const isSubTitle = finalRenderDepth === 2;\n    const isComponentSubTitle = finalRenderDepth >= 3;\n\n    const Tag = `h${finalDepth}` as \"h1\";\n    const classes = typographyClasses();\n\n    return (\n        <Tag\n            {...restProps}\n            ref={ref}\n            className={cx(\n                {\n                    [classes.pageTitle]: isPageTitle,\n                    [classes.largeTitle]: isLarge,\n                    [classes.subTitle]: isSubTitle,\n                    [classes.componentSubTitle]: isComponentSubTitle,\n                },\n                \"heading\",\n                `heading-${finalRenderDepth}`,\n                className,\n            )}\n        >\n            {children ?? title}\n        </Tag>\n    );\n});\n\nexport default Heading;\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport {\n    absolutePosition,\n    allButtonStates,\n    BorderType,\n    flexHelper,\n    pointerEvents,\n    singleBorder,\n    sticky,\n    userSelect,\n    negativeUnit,\n} from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport {\n    calc,\n    ColorHelper,\n    linearGradient,\n    percent,\n    px,\n    quote,\n    rgba,\n    translate,\n    translateX,\n    translateY,\n    viewWidth,\n} from \"csx\";\nimport backLinkClasses from \"@library/routing/links/backLinkStyles\";\nimport { CSSObject } from \"@emotion/css\";\nimport { shadowHelper } from \"@library/styles/shadowHelpers\";\nimport { buttonResetMixin } from \"@library/forms/buttonMixins\";\nimport generateButtonClass from \"@library/forms/styleHelperButtonGenerator\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { titleBarVariables } from \"./TitleBar.variables\";\n\nexport const titleBarClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = titleBarVariables();\n    const formElementVars = formElementsVariables();\n    const mediaQueries = vars.mediaQueries();\n    const flex = flexHelper();\n    const style = styleFactory(\"titleBar\");\n\n    const getBorderVars = (): CSSObject => {\n        switch (vars.border.type) {\n            case BorderType.BORDER:\n                return {\n                    borderBottom: singleBorder({\n                        color: vars.border.color,\n                        width: vars.border.width,\n                    }),\n                };\n            case BorderType.SHADOW:\n                return {\n                    boxShadow: shadowHelper().embed(globalVars.elementaryColors.black).boxShadow,\n                };\n            case BorderType.SHADOW_AS_BORDER:\n                // Note that this is empty because this option is set on the background elsewhere.\n                return {};\n            case BorderType.NONE:\n                return {};\n            default:\n                return {};\n        }\n    };\n\n    const root = style({\n        maxWidth: percent(100),\n        color: ColorsUtils.colorOut(vars.colors.fg),\n        position: \"relative\",\n        ...getBorderVars(),\n        ...{\n            \".searchBar__control\": {\n                color: vars.colors.fg.toString(),\n                cursor: \"pointer\",\n            },\n            \".searchBar__placeholder\": {\n                textAlign: \"left\",\n                color: vars.colors.fg.fade(0.8).toString(),\n            },\n            [`.${backLinkClasses().link}`]: {\n                ...{\n                    \"&, &:hover, &:focus, &:active\": {\n                        color: ColorsUtils.colorOut(vars.colors.fg),\n                    },\n                },\n            },\n        },\n        ...(vars.swoop.amount\n            ? {\n                  ...{\n                      \"& + *\": {\n                          // Offset the next element to account for the swoop. (next element should go under the swoop slightly).\n                          marginTop: -vars.swoop.swoopOffset,\n                      },\n                  },\n              }\n            : {}),\n    });\n\n    const swoopStyles = {\n        top: 0,\n        left: 0,\n        margin: `0 auto`,\n        position: `absolute`,\n        height: calc(`80% - ${styleUnit(vars.border.width + 1)}`),\n        transform: translateX(`-10vw`),\n        width: `120vw`,\n        borderRadius: `0 0 100% 100%/0 0 ${percent(vars.swoop.amount)} ${percent(vars.swoop.amount)}`,\n    };\n\n    const swoop = style(\"swoop\", {});\n\n    const shadowAsBorder =\n        vars.border.type === BorderType.SHADOW_AS_BORDER\n            ? { boxShadow: `0 ${styleUnit(vars.border.width)} 0 ${ColorsUtils.colorOut(vars.border.color)}` }\n            : {};\n\n    const bg1 = style(\"bg1\", {\n        willChange: \"opacity\",\n        ...absolutePosition.fullSizeOfParent(),\n        backgroundColor: ColorsUtils.colorOut(vars.fullBleed.enabled ? vars.fullBleed.bgColor : vars.colors.bg),\n        ...shadowAsBorder,\n        overflow: \"hidden\",\n        ...{\n            [`&.${swoop}`]: swoopStyles,\n        },\n    });\n\n    const bg2 = style(\"bg2\", {\n        willChange: \"opacity\",\n        ...absolutePosition.fullSizeOfParent(),\n        backgroundColor: ColorsUtils.colorOut(vars.colors.bg),\n        ...shadowAsBorder,\n        overflow: \"hidden\",\n        ...{\n            [`&.${swoop}`]: swoopStyles,\n        },\n    });\n\n    const container = style(\"container\", {\n        position: \"relative\",\n        height: percent(100),\n        width: percent(100),\n        ...Mixins.padding(vars.spacing.padding),\n    });\n\n    const bgContainer = style(\"bgContainer\", {\n        ...absolutePosition.fullSizeOfParent(),\n        height: percent(100),\n        width: percent(100),\n        ...Mixins.padding(vars.spacing.padding),\n        boxSizing: \"content-box\",\n        overflow: \"hidden\",\n    });\n\n    const bgImage = style(\"bgImage\", {\n        ...absolutePosition.fullSizeOfParent(),\n        objectFit: \"cover\",\n    });\n\n    const bannerPadding = style(\n        \"bannerPadding\",\n        {\n            paddingTop: px(vars.sizing.height / 2),\n        },\n        mediaQueries.compact({\n            paddingTop: px(vars.sizing.mobile.height / 2 + 20),\n        }),\n    );\n\n    const negativeSpacer = style(\n        \"negativeSpacer\",\n        {\n            marginTop: px(-vars.sizing.height),\n        },\n        mediaQueries.compact({\n            marginTop: px(-vars.sizing.mobile.height),\n        }),\n    );\n\n    const spacer = style(\n        \"spacer\",\n        {\n            height: px(vars.sizing.height),\n        },\n        mediaQueries.compact({\n            height: px(vars.sizing.mobile.height),\n        }),\n    );\n\n    const bar = style(\n        \"bar\",\n        {\n            display: \"flex\",\n            justifyContent: \"flex-start\",\n            flexWrap: \"nowrap\",\n            alignItems: \"center\",\n            height: px(vars.sizing.height),\n            width: percent(100),\n            ...{\n                \"&.isHome\": {\n                    justifyContent: \"space-between\",\n                },\n            },\n        },\n        mediaQueries.compact({ height: px(vars.sizing.mobile.height) }),\n    );\n\n    const logoOffsetDesktop = vars.logo.offsetVertical.amount\n        ? {\n              transform: translateY(`${styleUnit(vars.logo.offsetVertical.amount)}`),\n          }\n        : {};\n\n    const logoOffsetMobile = vars.logo.offsetVertical.mobile.amount\n        ? {\n              transform: translateY(`${styleUnit(vars.logo.offsetVertical.mobile.amount)}`),\n          }\n        : {};\n\n    const logoContainer = style(\n        \"logoContainer\",\n        {\n            display: \"inline-flex\",\n            alignSelf: \"center\",\n            color: ColorsUtils.colorOut(vars.colors.fg),\n            marginRight: styleUnit(vars.logo.offsetRight),\n            justifyContent: vars.logo.justifyContent,\n            ...logoOffsetDesktop,\n            maxHeight: percent(100),\n            ...{\n                \"&&\": {\n                    color: ColorsUtils.colorOut(vars.colors.fg),\n                },\n                \"&.focus-visible\": {\n                    ...{\n                        \"&.headerLogo-logoFrame\": {\n                            outline: `5px solid ${vars.buttonContents.state.bg}`,\n                            background: ColorsUtils.colorOut(vars.buttonContents.state.bg),\n                            borderRadius: vars.button.borderRadius,\n                        },\n                    },\n                },\n            },\n        },\n        mediaQueries.compact({\n            height: px(vars.sizing.mobile.height),\n            marginRight: styleUnit(0),\n            ...logoOffsetMobile,\n        }),\n    );\n\n    const logoFlexBasis = style(\"logoFlexBasis\", {\n        flexBasis: vars.endElements.flexBasis,\n    });\n\n    const meBox = style(\"meBox\", {\n        justifyContent: \"flex-end\",\n    });\n\n    const nav = style(\n        \"nav\",\n        {\n            display: \"flex\",\n            flexWrap: \"wrap\",\n            height: px(vars.sizing.height),\n            color: \"inherit\",\n            flexGrow: 1,\n            justifyContent: vars.navAlignment.alignment === \"left\" ? \"flex-start\" : \"center\",\n            ...{\n                \"&.titleBar-guestNav\": {\n                    flex: \"initial\",\n                },\n            },\n        },\n        mediaQueries.compact({ height: px(vars.sizing.mobile.height) }),\n    );\n\n    const locales = style(\n        \"locales\",\n        {\n            height: px(vars.sizing.height),\n            ...{\n                \"&.buttonAsText\": {\n                    ...{\n                        \"&:hover\": {\n                            color: \"inherit\",\n                        },\n                        \"&:focus\": {\n                            color: \"inherit\",\n                        },\n                    },\n                },\n            },\n        },\n        mediaQueries.compact({ height: px(vars.sizing.mobile.height) }),\n    );\n\n    const messages = style(\"messages\", {\n        color: vars.colors.fg.toString(),\n    });\n\n    const notifications = style(\"notifications\", {\n        color: \"inherit\",\n    });\n\n    const compactSearch = style(\n        \"compactSearch\",\n        {\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            marginLeft: \"auto\",\n            minWidth: styleUnit(formElementVars.sizing.height),\n            flexBasis: px(formElementVars.sizing.height),\n            maxWidth: percent(100),\n            height: styleUnit(vars.sizing.height),\n            ...{\n                \"&.isOpen\": {\n                    flex: 1,\n                },\n            },\n        },\n        mediaQueries.compact({ height: px(vars.sizing.mobile.height) }),\n    );\n\n    const compactSearchResults = style(\n        \"compactSearchResults\",\n        {\n            position: \"absolute\",\n            top: styleUnit(formElementVars.sizing.height + 2),\n            width: percent(100),\n            ...{\n                \"&:empty\": {\n                    display: \"none\",\n                },\n            },\n        },\n        layoutVariables()\n            .mediaQueries()\n            .xs({\n                ...{\n                    \"&&&\": {\n                        width: viewWidth(100),\n                        left: calc(`50% + ${styleUnit(40)}`), // This is not arbitrary, it's based on the hamburger placement, but because of the way it's calculated, it makes for a messy calculation. We need to refactor it.\n                        transform: translateX(\"-50%\"),\n                        borderTopRightRadius: 0,\n                        borderTopLeftRadius: 0,\n                    },\n                    \".suggestedTextInput-option\": {\n                        ...Mixins.padding({\n                            horizontal: 21,\n                        }),\n                    },\n                },\n            }),\n    );\n\n    const extraMeBoxIcons = style(\"extraMeBoxIcons\", {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"flex-end\",\n        marginLeft: \"auto\",\n        ...{\n            [`& + .${compactSearch}`]: {\n                marginLeft: 0,\n            },\n            li: {\n                listStyle: \"none\",\n            },\n        },\n    });\n\n    const topElement = style(\n        \"topElement\",\n        {\n            color: vars.colors.fg.toString(),\n            padding: `0 ${px(vars.sizing.spacer / 2)}`,\n            margin: `0 ${px(vars.sizing.spacer / 2)}`,\n            borderRadius: px(vars.button.borderRadius),\n        },\n        mediaQueries.compact({\n            // fontSize: px(vars.button.mobile.fontSize),\n        }),\n    );\n\n    const localeToggle = style(\n        \"localeToggle\",\n        {\n            height: px(vars.sizing.height),\n        },\n        mediaQueries.compact({\n            height: px(vars.sizing.mobile.height),\n        }),\n    );\n\n    const languages = style(\"languages\", {\n        marginLeft: \"auto\",\n    });\n\n    const button = style(\n        \"button\",\n        {\n            ...buttonResetMixin(),\n            height: px(vars.button.size),\n            minWidth: px(vars.button.size),\n            maxWidth: percent(100),\n            padding: px(0),\n            color: ColorsUtils.colorOut(vars.colors.fg),\n            ...{\n                \"&&\": {\n                    ...allButtonStates(\n                        {\n                            allStates: {\n                                color: ColorsUtils.colorOut(vars.colors.fg),\n                                ...{\n                                    \".meBox-buttonContent\": {\n                                        backgroundColor: ColorsUtils.colorOut(vars.buttonContents.state.bg),\n                                    },\n                                },\n                            },\n                            keyboardFocus: {\n                                outline: 0,\n                                color: ColorsUtils.colorOut(vars.colors.fg),\n                                ...{\n                                    \".meBox-buttonContent\": {\n                                        borderColor: ColorsUtils.colorOut(vars.colors.fg),\n                                        backgroundColor: ColorsUtils.colorOut(vars.buttonContents.state.bg),\n                                    },\n                                },\n                            },\n                        },\n                        {\n                            \".meBox-buttonContent\": {\n                                ...Mixins.border({\n                                    width: 1,\n                                    color: rgba(0, 0, 0, 0),\n                                }),\n                            },\n                            \"&.isOpen\": {\n                                color: ColorsUtils.colorOut(vars.colors.fg),\n                                ...{\n                                    \".meBox-buttonContent\": {\n                                        backgroundColor: ColorsUtils.colorOut(vars.buttonContents.state.bg),\n                                    },\n                                    \"&:focus\": {\n                                        color: ColorsUtils.colorOut(vars.colors.fg),\n                                    },\n                                    \"&.focus-visible\": {\n                                        color: ColorsUtils.colorOut(vars.colors.fg),\n                                    },\n                                },\n                            },\n                        },\n                    ),\n                },\n            },\n        },\n        mediaQueries.compact({\n            height: px(vars.sizing.mobile.height),\n            width: px(vars.sizing.mobile.width),\n            minWidth: px(vars.sizing.mobile.width),\n        }),\n    );\n\n    const linkButton = generateButtonClass(vars.linkButton);\n\n    const buttonOffset = style(\"buttonOffset\", {\n        transform: `translateX(6px)`,\n    });\n\n    const centeredButton = style(\"centeredButton\", {\n        ...flex.middle(),\n    });\n\n    const searchCancel = style(\"searchCancel\", {\n        ...buttonResetMixin(),\n        ...userSelect(),\n        height: px(formElementVars.sizing.height),\n        ...{\n            \"&.focus-visible\": {\n                ...{\n                    \"&.meBox-buttonContent\": {\n                        borderRadius: px(vars.button.borderRadius),\n                        backgroundColor: vars.buttonContents.state.bg.toString(),\n                    },\n                },\n            },\n        },\n    });\n\n    const tabButtonActive = {\n        color: globalVars.mainColors.primary.toString(),\n        ...{\n            \".titleBar-tabButtonContent\": {\n                color: vars.colors.fg.toString(),\n                backgroundColor: ColorsUtils.colorOut(\n                    ColorsUtils.modifyColorBasedOnLightness({ color: vars.colors.fg, weight: 1 }),\n                ),\n                borderRadius: px(vars.button.borderRadius),\n            },\n        },\n    };\n\n    const tabButton = style(\"tabButton\", {\n        display: \"block\",\n        height: percent(100),\n        padding: px(0),\n        ...{\n            \"&:active\": tabButtonActive,\n            \"&:hover\": tabButtonActive,\n            \"&:focus\": tabButtonActive,\n        },\n    });\n\n    const dropDownContents = style(\"dropDownContents\", {\n        ...{\n            \"&&&\": {\n                minWidth: styleUnit(vars.dropDownContents.minWidth),\n                maxHeight: styleUnit(vars.dropDownContents.maxHeight),\n            },\n        },\n    });\n\n    const count = style(\"count\", {\n        height: px(vars.count.size),\n        fontSize: px(vars.count.fontSize),\n        backgroundColor: vars.count.bg.toString(),\n        color: vars.count.fg.toString(),\n    });\n\n    const rightFlexBasis = style(\n        \"rightFlexBasis\",\n        {\n            display: \"flex\",\n            height: px(vars.sizing.height),\n            flexWrap: \"nowrap\",\n            justifyContent: \"flex-end\",\n            alignItems: \"center\",\n            flexBasis: vars.endElements.flexBasis,\n        },\n        mediaQueries.compact({\n            flexShrink: 1,\n            flexBasis: px(vars.endElements.mobile.flexBasis),\n            height: px(vars.sizing.mobile.height),\n        }),\n    );\n\n    const leftFlexBasis = style(\"leftFlexBasis\", {\n        ...flex.middleLeft(),\n        flexShrink: 1,\n        flexBasis: px(vars.endElements.mobile.flexBasis),\n    });\n\n    const signIn = style(\"signIn\", {\n        marginLeft: styleUnit(vars.guest.spacer),\n        marginRight: styleUnit(vars.guest.spacer),\n        ...{\n            \"&&&\": {\n                color: ColorsUtils.colorOut(vars.signIn.fg),\n                borderColor: ColorsUtils.colorOut(vars.colors.fg),\n            },\n        },\n    });\n\n    const register = style(\"register\", {\n        marginLeft: styleUnit(vars.guest.spacer),\n        marginRight: styleUnit(vars.guest.spacer),\n        backgroundColor: ColorsUtils.colorOut(vars.resister.bg),\n        ...{\n            \"&&\": {\n                // Ugly solution, but not much choice until: https://github.com/vanilla/knowledge/issues/778\n                ...allButtonStates({\n                    allStates: {\n                        borderColor: ColorsUtils.colorOut(vars.resister.borderColor),\n                        color: ColorsUtils.colorOut(vars.resister.fg),\n                    },\n                    noState: {\n                        backgroundColor: ColorsUtils.colorOut(vars.resister.bg),\n                    },\n                    hover: {\n                        color: ColorsUtils.colorOut(vars.resister.fg),\n                        backgroundColor: ColorsUtils.colorOut(vars.resister.states.bg),\n                    },\n                    focus: {\n                        color: ColorsUtils.colorOut(vars.resister.fg),\n                        backgroundColor: ColorsUtils.colorOut(vars.resister.states.bg),\n                    },\n                    active: {\n                        color: ColorsUtils.colorOut(vars.resister.fg),\n                        backgroundColor: ColorsUtils.colorOut(vars.resister.states.bg),\n                    },\n                }),\n            },\n        },\n    });\n\n    const clearButtonClass = style(\"clearButtonClass\", {\n        // opacity: 0.7,\n        //     \"&:hover, &:focus\": {\n        //         opacity: 1,\n        //     },\n        // },\n    });\n\n    const guestButton = style(\"guestButton\", {\n        minWidth: styleUnit(vars.button.guest.minWidth),\n        borderRadius: styleUnit(vars.button.borderRadius),\n    });\n\n    const desktopNavWrap = style(\"desktopNavWrap\", {\n        position: \"relative\",\n        flexGrow: 1,\n        ...(addGradientsToHintOverflow(globalVars.gutter.half * 4, vars.colors.bg) as any),\n    });\n\n    const logoCenterer = style(\"logoCenterer\", {\n        ...absolutePosition.middleOfParent(true),\n        display: \"inline-flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n    });\n\n    const logoLeftAligned = style(\"logoLeftAligned\", {\n        position: \"relative\",\n        height: percent(100),\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n    });\n\n    const hamburger = style(\"hamburger\", {\n        marginRight: styleUnit(12),\n        marginLeft: negativeUnit(globalVars.buttonIcon.offset),\n        ...{\n            \"&&\": {\n                ...allButtonStates({\n                    allStates: {\n                        color: ColorsUtils.colorOut(vars.colors.fg),\n                    },\n                }),\n            },\n        },\n    });\n\n    const isSticky = style(\"isSticky\", {\n        ...sticky(),\n        top: 0,\n        zIndex: 10,\n    });\n\n    const logoAnimationWrap = style(\"logoAnimationWrap\", {\n        display: \"inline-flex\",\n        alignItems: \"center\",\n    });\n\n    const overlay = style(\"overlay\", {\n        ...absolutePosition.fullSizeOfParent(),\n        background: vars.overlay.background,\n    });\n\n    const signInIconOffset = style(\"signInIconOffset\", {\n        marginRight: negativeUnit(globalVars.buttonIcon.offset + 3),\n    });\n\n    const titleBarContainer = style(\"titleBarContainer\", {\n        ...Mixins.border(vars.titleBarContainer.border),\n    });\n\n    const skipNav = style(\"skipNav\", {\n        position: \"absolute\",\n        backgroundColor: ColorsUtils.colorOut(globalVars.mainColors.bg),\n        color: \"gray\",\n        border: 0,\n        borderRadius: styleUnit(6),\n        clip: \"rect(0 0 0 0)\",\n        height: styleUnit(0),\n        width: styleUnit(0),\n        margin: styleUnit(-1),\n        padding: 0,\n        overflow: \"hidden\",\n        display: \"inline-flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        ...{\n            \"&:focus, &:active\": {\n                // This is over the icon and we want it to be a little further to the left of the main nav\n                left: styleUnit(-40),\n                width: styleUnit(144),\n                height: styleUnit(38),\n                clip: \"auto\",\n            },\n        },\n    });\n\n    return {\n        root,\n        bg1,\n        bg2,\n        container,\n        bgContainer,\n        bgImage,\n        negativeSpacer,\n        bannerPadding,\n        spacer,\n        bar,\n        logoContainer,\n        meBox,\n        nav,\n        locales,\n        messages,\n        notifications,\n        compactSearch,\n        topElement,\n        localeToggle,\n        languages,\n        button,\n        buttonOffset,\n        linkButton,\n        searchCancel,\n        tabButton,\n        dropDownContents,\n        count,\n        extraMeBoxIcons,\n        rightFlexBasis,\n        leftFlexBasis,\n        signIn,\n        register,\n        centeredButton,\n        compactSearchResults,\n        clearButtonClass,\n        guestButton,\n        logoFlexBasis,\n        desktopNavWrap,\n        logoCenterer,\n        logoLeftAligned,\n        hamburger,\n        isSticky,\n        logoAnimationWrap,\n        overlay,\n        swoop,\n        signInIconOffset,\n        titleBarContainer,\n        skipNav,\n    };\n});\n\nconst getLogoMaxHeight = (vars, mobile: boolean) => {\n    const titleBarHeight = mobile ? vars.sizing.mobile ?? vars.sizing.height : vars.sizing.height;\n    let specifiedLogoHeight = mobile\n        ? vars.logo.mobile.maxHeight ?? vars.logo.maxHeight ?? vars.sizing.mobile.height\n        : vars.logo.maxHeight ?? vars.sizing.height;\n\n    // Make sure it doesn't go over the size of the title bar\n    if (specifiedLogoHeight > titleBarHeight) {\n        specifiedLogoHeight = titleBarHeight;\n    }\n\n    return specifiedLogoHeight - (mobile ? vars.logo.mobile.heightOffset : vars.logo.heightOffset);\n};\n\nexport const titleBarLogoClasses = useThemeCache(() => {\n    const vars = titleBarVariables();\n    const style = styleFactory(\"titleBarLogo\");\n    const mediaQueries = vars.mediaQueries();\n\n    const logoFrame = style(\"logoFrame\", {\n        display: \"inline-flex\",\n        alignSelf: \"center\",\n        justifyContent: \"center\",\n    });\n\n    const mobileLogoStyles = {\n        display: \"flex\",\n        justifyContent: vars.mobileLogo.justifyContent,\n        maxHeight: styleUnit(getLogoMaxHeight(vars, true)),\n        maxWidth: styleUnit(vars.logo.mobile.maxWidth ?? vars.logo.maxWidth),\n    };\n\n    const logo = style(\n        \"logo\",\n        {\n            display: \"block\",\n            maxHeight: styleUnit(getLogoMaxHeight(vars, false)),\n            maxWidth: styleUnit(vars.logo.maxWidth),\n            width: \"auto\",\n            ...{\n                \"&.isCentred\": {\n                    margin: \"auto\",\n                },\n            },\n        },\n        mediaQueries.compact(mobileLogoStyles),\n    );\n\n    const mobileLogo = style(\"mobileLogo\", mobileLogoStyles);\n\n    const isCenter = style(\"isCenter\", {\n        position: \"absolute\",\n        left: percent(50),\n        transform: translate(`-50%`, `-50%`),\n    });\n\n    return {\n        logoFrame,\n        logo,\n        mobileLogo,\n        isCenter,\n    };\n});\n\nexport const addGradientsToHintOverflow = (width: number | string, color: ColorHelper) => {\n    return {\n        \"&:after\": {\n            ...absolutePosition.topRight(),\n            background: linearGradient(\n                \"right\",\n                `${ColorsUtils.colorOut(color.fade(0))} 0%`,\n                `${ColorsUtils.colorOut(color.fade(0.3))} 20%`,\n                `${ColorsUtils.colorOut(color)} 90%`,\n            ),\n        },\n        \"&:before\": {\n            ...absolutePosition.topLeft(),\n            background: linearGradient(\n                \"left\",\n                `${ColorsUtils.colorOut(color.fade(0))} 0%`,\n                `${ColorsUtils.colorOut(color.fade(0.3))} 20%`,\n                `${ColorsUtils.colorOut(color)} 90%`,\n            ),\n        },\n        \"&:before, &:after\": {\n            ...pointerEvents(),\n            content: quote(``),\n            height: percent(100),\n            width: styleUnit(width),\n            zIndex: 1,\n        },\n    };\n};\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { em, quote } from \"csx\";\nimport { CSSObject } from \"@emotion/css\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { negative } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\n/**\n * Many fonts don't set the capital letter to take the whole line height. This mixin is used to line up the top of the Text with the top of the container.\n *\n * @see https://medium.com/codyhouse/line-height-crop-a-simple-css-formula-to-remove-top-space-from-your-text-9c3de06d7c6f\n *\n * @param nestedStyles - Any additional styles to add\n * @param letterToLineHeightRatio - The ratio is a value from 0 to 1 to set how much of\n *      the line height the capital takes compared to the line height\n *      Example, if it takes 3/4 of the line height, set .75\n * @param verticalOffset - Sometimes the base line isn't centered,\n *      0 remove from top, .5 use font default, 1 remove from bottom\n *\n *  When \"leading-trim\" is supported, we can instead output:\n *  ```\n *      text-edge: cap alphabetic;\n *      leading-trim: both;\n *  ```\n */\nexport function lineHeightAdjustment(\n    nestedStyles?: CSSObject,\n    letterToLineHeightRatio?: number,\n    verticalOffset?: number,\n) {\n    const globalVars = globalVariables();\n    const vOffset = verticalOffset ? verticalOffset : globalVars.fonts.alignment.headings.verticalOffset; // for now we only support one font, but if we add more than one, we'll need to distinguish between them\n    const letterRatio = letterToLineHeightRatio\n        ? letterToLineHeightRatio\n        : globalVars.fonts.alignment.headings.capitalLetterRatio; // for now we only support one font, but if we add more than one, we'll need to distinguish between them\n    enum Position {\n        BEFORE = \"before\",\n        AFTER = \"after\",\n    }\n\n    /**\n     * Calculate the actual margin values.\n     */\n    const calculateOffset = (type: Position) => {\n        const isBefore = type === Position.BEFORE;\n        const offset = isBefore ? vOffset : 1 - vOffset!; // If the text is not centered in the line, we need to cheat it vertically\n        const emptySpace = 1 - letterRatio; // This is the pixel value of the dead space in the line from top and/or bottom of line\n        const margin = emptySpace * offset!; // Splits the empty space between top and bottom. .5 gives you even amount on both sides.\n        const verticalMargin = em(emptySpace < 1 ? negative(margin) : margin);\n\n        if (verticalMargin === 0) {\n            return null;\n        } else {\n            return {\n                content: quote(\"\"),\n                display: \"block\",\n                position: \"relative\",\n                height: 0,\n                width: 0,\n                ...Mixins.margin({\n                    top: isBefore ? verticalMargin : undefined,\n                    bottom: !isBefore ? verticalMargin : undefined,\n                }),\n            };\n        }\n    };\n    const result = nestedStyles ? nestedStyles : {};\n\n    const before = calculateOffset(Position.BEFORE) as CSSObject;\n    if (before) {\n        result[\"::before\"] = before;\n    }\n\n    const after = calculateOffset(Position.AFTER) as CSSObject;\n    if (after) {\n        result[\"::after\"] = after;\n    }\n\n    return result;\n}\n\nexport function defaultHyphenation(): CSSObject {\n    const vars = globalVariables().userContentHyphenation;\n    return {\n        msHyphens: \"auto\",\n        WebkitHyphens: \"auto\",\n        hyphens: \"auto\",\n        /* legacy properties */\n        \"-webkit-hyphenate-limit-before\": vars.minimumCharactersBeforeBreak,\n        \"-webkit-hyphenate-limit-after\": vars.minimumCharactersAfterBreak,\n        /* current proposal */\n        \"-moz-hyphenate-limit-chars\": `${vars.minimumCharactersToHyphenate} ${vars.minimumCharactersBeforeBreak} ${vars.minimumCharactersAfterBreak}` /* not yet supported */,\n        \"-webkit-hyphenate-limit-chars\": `${vars.minimumCharactersToHyphenate} ${vars.minimumCharactersBeforeBreak} ${vars.minimumCharactersAfterBreak}` /* not yet supported */,\n        msHyphenateLimitChars: `${vars.minimumCharactersToHyphenate} ${vars.minimumCharactersBeforeBreak} ${vars.minimumCharactersAfterBreak}`,\n        hyphenateLimitChars: `${vars.minimumCharactersToHyphenate} ${vars.minimumCharactersBeforeBreak} ${vars.minimumCharactersAfterBreak}`,\n        // Maximum consecutive lines to have hyphenation\n        msHyphenateLimitLines: vars.maximumConsecutiveBrokenLines,\n        \"-webkit-hyphenate-limit-lines\": vars.maximumConsecutiveBrokenLines,\n        \"hyphenate-limit-lines\": vars.maximumConsecutiveBrokenLines,\n        // Limit \"zone\" to hyphenate\n        \"hyphenate-limit-zone\": styleUnit(vars.hyphenationZone),\n    };\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { LoadStatus } from \"@library/@types/api/core\";\nimport getStore from \"@library/redux/getStore\";\nimport React from \"react\";\nimport { usePermissions } from \"@library/features/users/userModel\";\n\nexport enum PermissionMode {\n    GLOBAL = \"global\",\n    RESOURCE = \"resource\",\n    GLOBAL_OR_RESOURCE = \"globalOrResource\",\n}\n\ninterface IProps {\n    permission?: string | string[];\n    mode?: PermissionMode;\n    resourceType?: string;\n    resourceID?: number;\n    children: React.ReactNode;\n    fallback?: React.ReactNode;\n}\n\n/**\n * Component for checking one or many permissions.\n *\n * Conditionally renders either it's children or a fallback based on if the user has a permission.\n */\nexport default function Permission(props: IProps) {\n    usePermissions();\n\n    if (!props.permission) {\n        return <>{props.children}</>;\n    }\n\n    const result = hasPermission(props.permission, {\n        mode: props.mode ?? (props.resourceID != null ? PermissionMode.RESOURCE : PermissionMode.GLOBAL_OR_RESOURCE),\n        resourceType: props.resourceType,\n        resourceID: props.resourceID,\n    })\n        ? props.children\n        : props.fallback ?? null;\n    return <>{result}</>;\n}\n\ninterface IPermissionOptions {\n    mode: PermissionMode;\n    resourceType?: string;\n    resourceID?: number | null;\n}\n\n/**\n * Determine if the user has one of the given permissions.\n *\n * - Always false if the data isn't loaded yet.\n * - Always true if the user has the admin flag set.\n * - Only 1 one of the provided permissions needs to match.\n */\nexport function hasPermission(permission: string | string[], options?: IPermissionOptions) {\n    const { permissions } = getStore().getState().users;\n\n    let permissionsToCheck = permission;\n    if (!Array.isArray(permissionsToCheck)) {\n        permissionsToCheck = [permissionsToCheck];\n    }\n\n    if (!permissions.data || permissions.status !== LoadStatus.SUCCESS) {\n        return false;\n    }\n\n    if (permissions.data.isAdmin) {\n        return true;\n    }\n\n    if (!options) {\n        options = {\n            mode: PermissionMode.GLOBAL_OR_RESOURCE,\n        };\n    }\n\n    if (!options.resourceType) {\n        options.resourceType = \"global\";\n        options.resourceID = null;\n    }\n\n    const permissionGroups = permissions.data.permissions.filter((permission) => {\n        const matchesGlobal = permission.type === \"global\";\n        const matchesResource = permission.type === options?.resourceType && permission.id === options?.resourceID;\n        switch (options!.mode) {\n            case PermissionMode.GLOBAL:\n                return matchesGlobal;\n            case PermissionMode.GLOBAL_OR_RESOURCE:\n                return true; // All allowed to be checked.\n            case PermissionMode.RESOURCE:\n                return matchesResource;\n        }\n    });\n\n    let hasMatch = false;\n    permissionGroups.forEach((permissionGroupToCheck) => {\n        for (const [permissionKey, permissionValue] of Object.entries(permissionGroupToCheck.permissions)) {\n            if (permissionsToCheck.includes(permissionKey) && permissionValue) {\n                hasMatch = true;\n            }\n        }\n    });\n    return hasMatch;\n}\n\nexport function isUserAdmin(): boolean {\n    return getStore().getState().users.current.data?.isAdmin ?? false;\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { logError } from \"@vanilla/utils\";\nimport { t } from \"@library/utility/appUtils\";\n\ntype TranslateCallback = (contents: string) => React.ReactNode;\n\ninterface IProps {\n    source: string;\n    shortSource?: string;\n    errorHandler?: (...values) => void;\n    translateFunction?: (source: string, fallback?: string) => string;\n    c0?: TranslateCallback | React.ReactNode;\n    c1?: TranslateCallback | React.ReactNode;\n    c2?: TranslateCallback | React.ReactNode;\n    c3?: TranslateCallback | React.ReactNode;\n    c4?: TranslateCallback | React.ReactNode;\n}\n\n/**\n * Component for translating text with interpolated components.\n * Can accept source strings with interpolated translation components in a form such as:\n * - \"Published on <0/> by <1 />.\"\n * - \"For more information, please see our <0>public documentation</0>.\"\n *\n * About the placeholders:\n * - Self closing placeholders will be replace with the result from the prop that has a correspsonding ID.\n *   Eg. \"<0/>\" will be replaced by prop `c0`.\n *   \"<3 />\" will be replaced by prop `c3`.\n * - Placeholders content will have their translated content passed as an argument to their callback prop.\n *\n * Limitations\n * - Only placeholders 0-4 are currently allowed. Break up your translation strings!\n * - These tag's CANNOT be nested currently.\n *\n * Examples\n * <Translate source=\"test\" />\n *   -> translated text of \"test\"\n * <Translate source=\"Hello <0/>\" />\n *   -> Error because c0 was not provided.\n * <Translate source=\"Hello <0/> world!\" c0={<SomeComponent />}/>\n *   -> Hello <SomeComponent/> world!\n * <Translate source=\"Visit <0>our site</0> for help.\" c0={content => <a href=\"http://site.com\">{content}</a>}/>\"\n *   -> Visit <a href=\"http://site.com\">our site</a> for help.\n */\nexport default class Translate extends React.Component<IProps> {\n    public static defaultProps: Partial<IProps> = {\n        errorHandler: logError,\n        translateFunction: t,\n    };\n\n    /**\n     * @inheritDoc\n     */\n    public render(): React.ReactNode {\n        // First parse out the self closing elements.\n        const tagRegex = /<([\\d ]+)>(.*?)<\\/\\1>|<([\\d ]+)\\/>|([^<]+|<)/g;\n\n        const result: React.ReactNode[] = [];\n        this.translatedSource.replace(tagRegex, (match, childrenID, childrenMatch, standaloneID, textMatch, index) => {\n            if (textMatch != null) {\n                result.push(<React.Fragment key={index}>{textMatch}</React.Fragment>);\n            }\n\n            if (standaloneID != null) {\n                result.push(this.getInterpolatedComponent(standaloneID, index));\n            }\n\n            if (childrenMatch != null && childrenID != null) {\n                result.push(this.getInterpolatedComponent(childrenID, index, childrenMatch));\n            }\n            return match;\n        });\n\n        return result;\n    }\n\n    /**\n     * Create an interpolated component inside of a react fragment.\n     *\n     * @param id The id of the component we are replacing. Eg. <0/> -> 0.\n     * @param key The key of the fragment (index).\n     * @param value The content to pass along to the prop callback.\n     */\n    private getInterpolatedComponent(id: string, key: number, value?: string): React.ReactNode {\n        id = id.trim();\n\n        if (!(`c${id}` in this.props)) {\n            this.logIDNotFound(id);\n            return null;\n        }\n\n        const prop = this.props[`c${id}`];\n        const contents = typeof prop === \"function\" ? prop(value) : prop;\n\n        return <React.Fragment key={key}>{contents}</React.Fragment>;\n    }\n\n    /**\n     * Get a translated version of the source string.\n     */\n    private get translatedSource(): string {\n        return this.props.translateFunction!(this.props.shortSource ?? this.props.source, this.props.source);\n    }\n\n    /**\n     * Log that an ID has not been found with some context.\n     */\n    private logIDNotFound(id) {\n        this.props.errorHandler!(\n            `A translation interpolation value #${id} was not provided for source string ${this.props.source}. \\nThe translated value of source is ${this.translatedSource}.`,\n        );\n    }\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\nimport { BorderType } from \"@library/styles/styleHelpersBorders\";\nimport {\n    FontFamilyProperty,\n    FontSizeProperty,\n    FontWeightProperty,\n    LineHeightProperty,\n    TextShadowProperty,\n    TextTransformProperty,\n    TextAlignProperty,\n    LetterSpacingProperty,\n    BackgroundAttachmentProperty,\n    BackgroundImageProperty,\n    BackgroundPositionProperty,\n    BackgroundRepeatProperty,\n    BackgroundSizeProperty,\n    OpacityProperty,\n    BorderRadiusProperty,\n    BorderStyleProperty,\n    BorderWidthProperty,\n} from \"csstype\";\nimport { ColorHelper } from \"csx\";\n\nexport type TLength = string | number;\nexport type IRadiusValue = IBorderRadiusValue | IRadiusShorthand | IBorderRadiusOutput;\nexport type IBorderRadiusValue = BorderRadiusProperty<TLength> | number | string | undefined;\nexport interface IRadiusShorthand {\n    all?: IBorderRadiusValue;\n    top?: IBorderRadiusValue;\n    bottom?: IBorderRadiusValue;\n    left?: IBorderRadiusValue;\n    right?: IBorderRadiusValue;\n}\n\nexport interface IBorderRadiusOutput {\n    borderTopRightRadius?: IBorderRadiusValue;\n    borderTopLeftRadius?: IBorderRadiusValue;\n    borderBottomRightRadius?: IBorderRadiusValue;\n    borderBottomLeftRadius?: IBorderRadiusValue;\n}\n\nexport interface ISpacing {\n    top?: string | number;\n    right?: string | number;\n    bottom?: string | number;\n    left?: string | number;\n    horizontal?: string | number;\n    vertical?: string | number;\n    all?: string | number;\n}\n\nexport interface IFont {\n    color?: ColorHelper | string;\n    size?: FontSizeProperty<TLength>;\n    weight?: FontWeightProperty | number;\n    lineHeight?: LineHeightProperty<TLength>;\n    shadow?: TextShadowProperty;\n    align?: TextAlignProperty;\n    family?: FontFamilyProperty[];\n    transform?: TextTransformProperty;\n    letterSpacing?: LetterSpacingProperty<TLength>;\n    textDecoration?: \"none\" | \"underline\";\n}\n\nexport interface IBackground {\n    color?: ColorHelper | string;\n    attachment?: BackgroundAttachmentProperty;\n    position?: BackgroundPositionProperty<TLength>;\n    repeat?: BackgroundRepeatProperty;\n    size?: BackgroundSizeProperty<TLength>;\n    image?: BackgroundImageProperty;\n    fallbackImage?: BackgroundImageProperty;\n    opacity?: OpacityProperty;\n    unsetBackground?: boolean; // do not apply background.\n}\n\nexport interface IMixedBorderStyles extends IBorderStyles, ISimpleBorderStyle {}\n\ninterface IRadiusFlex {\n    radius?: IRadiusValue;\n}\n\nexport interface IBorderRadiusOptions {\n    fallbackRadii?: object;\n    debug?: boolean;\n    isImportant?: boolean;\n}\n\nexport interface ISimpleBorderStyle {\n    color?: ColorHelper | string;\n    width?: BorderWidthProperty<TLength>;\n    style?: BorderStyleProperty;\n    radius?: IRadiusValue;\n}\n\nexport interface IBorderStyles extends ISimpleBorderStyle, IRadiusFlex {\n    all?: ISimpleBorderStyle & IRadiusFlex;\n    topBottom?: ISimpleBorderStyle & IRadiusFlex;\n    leftRight?: ISimpleBorderStyle & IRadiusFlex;\n    top?: ISimpleBorderStyle & IRadiusFlex;\n    bottom?: ISimpleBorderStyle & IRadiusFlex;\n    left?: ISimpleBorderStyle & IRadiusFlex;\n    right?: ISimpleBorderStyle & IRadiusFlex;\n}\n\nexport interface IStateColors {\n    default?: ColorHelper | string;\n    hover?: ColorHelper | string;\n    focus?: ColorHelper | string;\n    clickFocus?: ColorHelper | string;\n    keyboardFocus?: ColorHelper | string;\n    active?: ColorHelper | string;\n    visited?: ColorHelper | string;\n    allStates?: ColorHelper | string;\n}\nexport interface ILinkColorOverwritesWithOptions extends IStateColors {\n    skipDefault?: boolean;\n}\n\nexport interface IClickableItemOptions {\n    disableTextDecoration?: boolean;\n}\n\n/**\n * @deprecated Use Variables.border({}) instead.\n */\nexport const EMPTY_BORDER: Partial<ISimpleBorderStyle> = {\n    color: undefined,\n    width: undefined,\n    style: undefined,\n    radius: undefined,\n};\n\n/**\n * @deprecated Use Variables.fonts({}) instead.\n */\nexport const EMPTY_FONTS: IFont = {\n    color: undefined,\n    size: undefined,\n    weight: undefined,\n    lineHeight: undefined,\n    shadow: undefined,\n    align: undefined,\n    family: undefined,\n    transform: undefined,\n    letterSpacing: undefined,\n    textDecoration: undefined,\n};\n\n/**\n * @deprecated Use Variables.spacing({}) instead.\n */\nexport const EMPTY_SPACING = {\n    top: undefined as undefined | number | string,\n    right: undefined as undefined | number | string,\n    bottom: undefined as undefined | number | string,\n    left: undefined as undefined | number | string,\n    horizontal: undefined as undefined | number | string,\n    vertical: undefined as undefined | number | string,\n    all: undefined as undefined | number | string,\n};\n\n/**\n * .@deprecated Use Variables.background({}) instead.\n */\nexport const EMPTY_BACKGROUND: IBackground = {\n    color: undefined,\n    attachment: undefined,\n    position: undefined,\n    repeat: undefined,\n    size: undefined,\n    image: undefined,\n    opacity: undefined,\n    unsetBackground: false,\n};\n\n/**\n * .@deprecated Use Variables.clickable({}) instead.\n */\nexport const EMPTY_STATE_COLORS = {\n    default: undefined as undefined | ColorHelper,\n    hover: undefined as undefined | ColorHelper,\n    focus: undefined as undefined | ColorHelper,\n    clickFocus: undefined as undefined | ColorHelper,\n    keyboardFocus: undefined as undefined | ColorHelper,\n    active: undefined as undefined | ColorHelper,\n    visited: undefined as undefined | ColorHelper,\n    allStates: undefined as undefined | ColorHelper,\n};\n\nexport interface IGlobalBorderStyles extends IBorderRadiusOutput {\n    color?: ColorHelper;\n    width?: BorderWidthProperty<TLength> | number;\n    style?: BorderStyleProperty;\n    radius?: BorderRadiusProperty<TLength> | string;\n}\n\nexport enum IIconSizes {\n    SMALL = \"small\",\n    DEFAULT = \"default\",\n    LARGE = \"large\",\n}\n\nexport enum ListSeparation {\n    /**\n     * Item 1\n     * Item 2\n     * Item 3\n     */\n    NONE = \"none\",\n\n    /**\n     * -------\n     * |Item 1|\n     * --------\n     *\n     * --------\n     * |Item 2|\n     * --------\n     */\n    BORDER = \"border\",\n    /**\n     * Item 1\n     * -------\n     * Item 2\n     * -------\n     * Item 3\n     */\n    SEPARATOR = \"separator\",\n}\n\nexport interface IBoxOptions {\n    borderType: BorderType;\n    background: IBackground;\n    spacing: ISpacing;\n    border: ISimpleBorderStyle;\n    itemSpacing: number;\n    itemSpacingOnAllItems: boolean;\n}\n\nexport interface IContentBoxes {\n    depth1: IBoxOptions;\n    depth2: IBoxOptions;\n    depth3: IBoxOptions;\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { allButtonStates, flexHelper, spinnerLoaderAnimationProperties } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { CSSObject } from \"@emotion/css\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { important, percent } from \"csx\";\nimport merge from \"lodash/merge\";\nimport generateButtonClass from \"./styleHelperButtonGenerator\";\nimport { IButtonType } from \"@library/forms/styleHelperButtonInterface\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { buttonResetMixin } from \"./buttonMixins\";\nimport { buttonVariables, buttonGlobalVariables } from \"./Button.variables\";\n\nexport const overwriteButtonClass = (\n    buttonTypeVars: IButtonType,\n    overwriteVars: IButtonType,\n    setZIndexOnState = false,\n) => {\n    const buttonVars = merge(buttonTypeVars, overwriteVars);\n    // append names for debugging purposes\n    buttonVars.name = `${buttonTypeVars.name}-${overwriteVars.name}`;\n    return generateButtonClass(buttonVars, {\n        setZIndexOnState,\n    });\n};\n\nexport const buttonClasses = useThemeCache(() => {\n    const vars = buttonVariables();\n    return {\n        primary: generateButtonClass(vars.primary),\n        standard: generateButtonClass(vars.standard),\n        transparent: generateButtonClass(vars.transparent),\n        translucid: generateButtonClass(vars.translucid),\n        icon: buttonUtilityClasses().buttonIcon,\n        iconCompact: buttonUtilityClasses().buttonIconCompact,\n        text: buttonUtilityClasses().buttonAsText,\n        textPrimary: buttonUtilityClasses().buttonAsTextPrimary,\n        radio: generateButtonClass(vars.radio),\n        custom: \"\",\n        notStandard: generateButtonClass(vars.notStandard),\n    };\n});\n\nexport const buttonUtilityClasses = useThemeCache(() => {\n    const vars = buttonGlobalVariables();\n    const globalVars = globalVariables();\n    const formElementVars = formElementsVariables();\n    const style = styleFactory(\"buttonUtils\");\n    const mediaQueries = layoutVariables().mediaQueries();\n\n    const pushLeft = style(\"pushLeft\", {\n        marginRight: important(\"auto\"),\n    });\n\n    const pushRight = style(\"pushRight\", {\n        marginLeft: important(\"auto\"),\n    });\n\n    const iconMixin = (dimension: number): CSSObject => ({\n        ...buttonResetMixin(),\n        alignItems: \"center\",\n        display: \"flex\",\n        height: styleUnit(dimension),\n        minWidth: styleUnit(dimension),\n        width: styleUnit(dimension),\n        justifyContent: \"center\",\n        border: \"none\",\n        padding: 0,\n        background: \"transparent\",\n        ...allButtonStates({\n            allStates: {\n                color: ColorsUtils.colorOut(globalVars.mainColors.secondary),\n            },\n            hover: {\n                color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n            },\n            clickFocus: {\n                outline: 0,\n            },\n            keyboardFocus: {\n                outline: \"initial\",\n            },\n        }),\n        color: \"inherit\",\n    });\n\n    const buttonIcon = style(\n        \"buttonIcon\",\n        iconMixin(formElementVars.sizing.height),\n        mediaQueries.oneColumnDown({\n            height: vars.sizing.compactHeight,\n            width: vars.sizing.compactHeight,\n            minWidth: vars.sizing.compactHeight,\n        }),\n    );\n\n    const buttonIconCompact = style(\"iconCompact\", iconMixin(vars.sizing.compactHeight));\n\n    const asTextStyles: CSSObject = {\n        ...buttonResetMixin(),\n        minWidth: important(0),\n        padding: 0,\n        overflow: \"hidden\",\n        textAlign: \"left\",\n        lineHeight: globalVars.lineHeights.base,\n        fontWeight: globalVars.fonts.weights.semiBold,\n        whiteSpace: \"nowrap\",\n    };\n\n    const buttonAsText = style(\"asText\", asTextStyles, {\n        color: \"inherit\",\n        ...{\n            \"&:not(.focus-visible)\": {\n                outline: 0,\n            },\n            \"&:focus, &:active, &:hover\": {\n                color: ColorsUtils.colorOut(globalVars.mainColors.secondary),\n            },\n        },\n    });\n\n    const buttonAsTextPrimary = style(\"asTextPrimary\", asTextStyles, {\n        ...{\n            \"&&\": {\n                color: ColorsUtils.colorOut(globalVars.links.colors.default),\n            },\n            \"&&:not(.focus-visible)\": {\n                outline: 0,\n            },\n            \"&&:hover, &&:focus, &&:active\": {\n                color: ColorsUtils.colorOut(globalVars.links.colors.active),\n            },\n        },\n    });\n\n    const buttonIconRightMargin = style(\"buttonIconRightMargin\", {\n        marginRight: styleUnit(6),\n    });\n\n    const buttonIconLeftMargin = style(\"buttonIconLeftMargin\", {\n        marginLeft: styleUnit(6),\n    });\n\n    const reset = style(\"reset\", buttonResetMixin());\n\n    return {\n        pushLeft,\n        buttonAsText,\n        buttonAsTextPrimary,\n        pushRight,\n        iconMixin,\n        buttonIconCompact,\n        buttonIcon,\n        buttonIconRightMargin,\n        buttonIconLeftMargin,\n        reset,\n    };\n});\n\nexport const buttonLoaderClasses = useThemeCache(() => {\n    const flexUtils = flexHelper();\n    const style = styleFactory(\"buttonLoader\");\n\n    const root = useThemeCache((alignment: \"left\" | \"center\" = \"center\") =>\n        style({\n            ...(alignment === \"center\" ? flexUtils.middle() : flexUtils.middleLeft),\n            padding: styleUnit(4),\n            height: percent(100),\n            width: percent(100),\n            ...{\n                [`& + .suggestedTextInput-parentTag`]: {\n                    display: \"none\",\n                },\n            },\n        }),\n    );\n\n    const reducedPadding = style(\"reducedPadding\", {\n        ...{\n            \"&&\": {\n                padding: styleUnit(3),\n            },\n        },\n    });\n\n    const svg = style(\"svg\", spinnerLoaderAnimationProperties());\n    return { root, svg, reducedPadding };\n});\n\nexport const buttonLabelWrapClass = useThemeCache(() => {\n    const style = styleFactory(\"buttonLabelWrap\");\n    const root = style({\n        maxWidth: percent(100),\n        textOverflow: \"ellipsis\",\n        overflow: \"hidden\",\n    });\n\n    return {\n        root,\n    };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { createStore, compose, applyMiddleware, combineReducers, Store, AnyAction, DeepPartial, Action } from \"redux\";\nimport { getReducers, ICoreStoreState } from \"@library/redux/reducerRegistry\";\nimport thunk from \"redux-thunk\";\n\n// There may be an initial state to import.\nconst initialActions = window.__ACTIONS__ || [];\n\nconst middleware = [thunk];\n\n// https://github.com/zalmoxisus/redux-devtools-extension/blob/master/docs/Troubleshooting.md#excessive-use-of-memory-and-cpu\nconst actionSanitizer = (action: AnyAction) =>\n    (action.type as string).includes(\"[editorInstance]\") && action.payload && action.payload.quill\n        ? {\n              ...action,\n              payload: { ...action.payload, quill: \"<<Quill Instance>>\" },\n          }\n        : action;\n// Browser may have redux dev tools installed, if so integrate with it.\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({ actionSanitizer })\n    : compose;\nconst enhancer = composeEnhancers(applyMiddleware(...middleware));\n\n// Build the store, add devtools extension support if it's available.\nlet store;\n\nexport function resetStore() {\n    store = undefined;\n}\n\nexport const resetActionAC = (newState: ICoreStoreState) => {\n    return {\n        type: \"@@store/RESET\",\n        payload: newState,\n    };\n};\n\nfunction createRootReducer() {\n    const appReducer = combineReducers(getReducers());\n\n    return (state, action) => {\n        if (action.type === \"@@store/RESET\") {\n            return action.payload;\n        } else {\n            return appReducer(state, action);\n        }\n    };\n}\n\nexport default function getStore<S = ICoreStoreState>(initialState?: DeepPartial<S>, force?: boolean): Store<S, any> {\n    if (store === undefined || force) {\n        // Get our reducers.\n        const reducer = createRootReducer();\n        store = createStore(reducer, initialState || {}, enhancer);\n\n        // Dispatch initial actions returned from the server.\n        initialActions.forEach(store.dispatch);\n    }\n\n    return store;\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { LoadStatus } from \"@library/@types/api/core\";\nimport { IUserFragment } from \"@library/@types/api/users\";\nimport UserSuggestionModel from \"@library/features/users/suggestion/UserSuggestionModel\";\nimport UserActions, { useUserActions } from \"@library/features/users/UserActions\";\nimport produce from \"immer\";\nimport { reducerWithInitialState } from \"typescript-fsa-reducers\";\nimport { ICoreStoreState } from \"@library/redux/reducerRegistry\";\nimport NotificationsActions from \"@library/features/notifications/NotificationsActions\";\nimport { useSelector } from \"react-redux\";\nimport { useEffect } from \"react\";\nimport { IUsersState, IInjectableUserState } from \"./userTypes\";\n\nconst suggestionReducer = new UserSuggestionModel().reducer;\n\nexport const INITIAL_USERS_STATE: IUsersState = {\n    current: {\n        status: LoadStatus.PENDING,\n    },\n    permissions: {\n        status: LoadStatus.PENDING,\n    },\n    countInformation: {\n        counts: [],\n        lastRequested: null,\n    },\n    suggestions: suggestionReducer(undefined, \"\" as any),\n    usersByID: {},\n    usersInvitationsByID: {},\n};\n\nexport const GUEST_USER_ID = 0;\n\n/**\n * Determine if a user fragment is a guest.\n */\nexport function isUserGuest(user: IUserFragment | null | undefined) {\n    return user && user.userID === GUEST_USER_ID;\n}\n/**\n * Reducer for user related data.\n */\nexport const usersReducer = produce(\n    reducerWithInitialState(INITIAL_USERS_STATE)\n        .case(UserActions.getMeACs.started, (state) => {\n            state.current.status = LoadStatus.LOADING;\n            return state;\n        })\n        .case(UserActions.getMeACs.done, (state, payload) => {\n            state.current.data = payload.result;\n            state.current.status = LoadStatus.SUCCESS;\n            return state;\n        })\n        .case(UserActions.getMeACs.failed, (state, payload) => {\n            state.current.status = LoadStatus.ERROR;\n            state.current.error = payload.error;\n            return state;\n        })\n        .case(UserActions.getPermissionsACs.started, (state) => {\n            state.permissions.status = LoadStatus.LOADING;\n            return state;\n        })\n        .case(UserActions.getPermissionsACs.done, (state, payload) => {\n            state.permissions.data = payload.result;\n            state.permissions.status = LoadStatus.SUCCESS;\n            return state;\n        })\n        .case(UserActions.getPermissionsACs.failed, (state, payload) => {\n            state.permissions.status = LoadStatus.ERROR;\n            state.permissions.error = payload.error;\n            return state;\n        })\n        .case(UserActions.getCountsACs.started, (state) => {\n            state.countInformation.lastRequested = new Date().getTime();\n            return state;\n        })\n        .case(UserActions.getCountsACs.done, (state, payload) => {\n            state.countInformation.counts = payload.result.counts;\n            return state;\n        })\n        .case(UserActions.getUserACs.started, (state, params) => {\n            const { userID } = params;\n            state.usersByID[userID] = { status: LoadStatus.LOADING };\n            return state;\n        })\n        .case(UserActions.getUserACs.done, (state, payload) => {\n            const { userID } = payload.params;\n            state.usersByID[userID] = {\n                data: payload.result,\n                status: LoadStatus.SUCCESS,\n            };\n            return state;\n        })\n        .case(UserActions.getUserACs.failed, (state, payload) => {\n            const { userID } = payload.params;\n            state.usersByID[userID] = {\n                status: LoadStatus.ERROR,\n                error: payload.error,\n            };\n            return state;\n        })\n        .case(UserActions.inviteUsersACs.started, (state, params) => {\n            const { userID } = params;\n            state.usersInvitationsByID[userID].results = { status: LoadStatus.LOADING };\n            return state;\n        })\n        .case(UserActions.inviteUsersACs.done, (state, payload) => {\n            const { userID } = payload.params;\n            // The data returned is currently not used\n            state.usersInvitationsByID[userID].results = {\n                status: LoadStatus.SUCCESS,\n                data: payload.result,\n            };\n            // So that after invitations are sent out, the forms are cleared\n            state.usersInvitationsByID[userID].emailsString = \"\";\n            state.usersInvitationsByID[userID].invitees = [];\n            return state;\n        })\n        .case(UserActions.clearInviteUsersAC, (state, payload) => {\n            const { userID } = payload;\n            delete state.usersInvitationsByID[userID];\n            return state;\n        })\n        .case(UserActions.inviteUsersACs.failed, (state, payload) => {\n            const { userID } = payload.params;\n            state.usersInvitationsByID[userID].results = {\n                status: LoadStatus.ERROR,\n                error: payload.error,\n            };\n            return state;\n        })\n        .case(UserActions.updateInviteeIDsAC, (state, payload) => {\n            const { userID, IDs } = payload;\n            state.usersInvitationsByID[userID] = {\n                ...state.usersInvitationsByID[userID],\n                userIDs: [...(state.usersInvitationsByID[userID]?.userIDs ?? []), ...IDs],\n            };\n\n            return state;\n        })\n        .case(UserActions.updateInviteesAC, (state, payload) => {\n            const { userID, invitees } = payload;\n            state.usersInvitationsByID[userID] = {\n                ...state.usersInvitationsByID[userID],\n                invitees: invitees,\n            };\n            return state;\n        })\n        .case(UserActions.updateInviteeEmailsAC, (state, payload) => {\n            const { userID, emails } = payload;\n            state.usersInvitationsByID[userID] = {\n                ...state.usersInvitationsByID[userID],\n                emails: [...(state.usersInvitationsByID[userID]?.emails ?? []), ...emails],\n            };\n            return state;\n        })\n        .case(UserActions.updateInviteeEmailsStringAC, (state, payload) => {\n            const { userID, emailsString } = payload;\n            state.usersInvitationsByID[userID] = {\n                ...state.usersInvitationsByID[userID],\n                emailsString: emailsString,\n            };\n            return state;\n        })\n        .default((state, action) => {\n            if (action.type === NotificationsActions.MARK_ALL_READ_RESPONSE) {\n                if (state.current.data) {\n                    state.current.data.countUnreadNotifications = 0;\n                }\n            }\n            state.suggestions = suggestionReducer(state.suggestions, action as any);\n            return state;\n        }),\n);\n\nexport function mapUsersStoreState(state: ICoreStoreState): IInjectableUserState {\n    if (!state.users || !state.users.current) {\n        throw new Error(\n            `It seems you did not initialize the users model correctly. Could not find \"users.current\" in state: ${state}`,\n        );\n    }\n\n    return {\n        currentUser: state.users.current,\n    };\n}\n\nexport function useUsersState(): IInjectableUserState {\n    return useSelector(mapUsersStoreState);\n}\n\nexport function usePermissions() {\n    const permissions = useSelector((state: ICoreStoreState) => state.users.permissions);\n    const { getPermissions } = useUserActions();\n    const { status } = permissions;\n\n    useEffect(() => {\n        if ([LoadStatus.PENDING, LoadStatus.LOADING].includes(status)) {\n            void getPermissions();\n        }\n    }, [status, getPermissions]);\n\n    return permissions;\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { variableFactory, styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { absolutePosition, pointerEvents, singleBorder } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { Variables } from \"@library/styles/Variables\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { important, percent } from \"csx\";\nimport { buttonVariables } from \"@library/forms/Button.variables\";\nimport { buttonResetMixin } from \"@library/forms/buttonMixins\";\nimport { generateButtonStyleProperties } from \"@library/forms/styleHelperButtonGenerator\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\n\nexport const userCardVariables = useThemeCache((forcedVars?: IThemeVariables) => {\n    const makeVars = variableFactory(\"popupUserCard\", forcedVars);\n    const globalVars = globalVariables();\n\n    const container = makeVars(\"container\", {\n        spacing: globalVars.gutter.size / 2,\n    });\n\n    const actionContainer = makeVars(\"actionContainer\", {\n        spacing: 12,\n    });\n\n    const button = makeVars(\"button\", {\n        minWidth: 120,\n        mobile: {\n            minWidth: 0,\n        },\n    });\n\n    const buttonContainer = makeVars(\"buttonContainer\", {\n        padding: globalVars.gutter.half,\n    });\n\n    const name = makeVars(\"name\", {\n        size: globalVars.fonts.size.large,\n        weight: globalVars.fonts.weights.bold,\n    });\n\n    const label = makeVars(\"label\", {\n        border: Variables.border({\n            color: globalVars.mainColors.primary,\n            radius: 3,\n        }),\n        padding: Variables.spacing({\n            vertical: 2,\n            horizontal: 10,\n        }),\n        font: Variables.font({\n            color: globalVars.mainColors.primary,\n            size: 10,\n            transform: \"uppercase\",\n        }),\n    });\n\n    const containerWithBorder = makeVars(\"containerWithBorder\", {\n        color: ColorsUtils.colorOut(globalVars.border.color),\n        ...Mixins.padding({\n            horizontal: container.spacing * 2,\n            vertical: container.spacing * 4,\n        }),\n    });\n\n    const count = makeVars(\"count\", {\n        size: 28,\n    });\n\n    const header = makeVars(\"header\", {\n        height: 32,\n    });\n\n    const date = makeVars(\"date\", {\n        padding: globalVars.gutter.size,\n    });\n\n    const email = makeVars(\"email\", {\n        color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n    });\n\n    return {\n        container,\n        button,\n        buttonContainer,\n        actionContainer,\n        name,\n        label,\n        containerWithBorder,\n        count,\n        header,\n        date,\n        email,\n    };\n});\n\nexport const userCardClasses = useThemeCache((props: { compact?: boolean } = {}) => {\n    const style = styleFactory(\"popupUserCard\");\n    const vars = userCardVariables();\n    const linkColors = Mixins.clickable.itemState();\n    const mediaQueries = layoutVariables().mediaQueries();\n    const globalVars = globalVariables();\n\n    const container = style(\"container\", {\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"stretch\",\n        justifyContent: \"center\",\n        ...Mixins.padding({\n            all: vars.container.spacing,\n        }),\n        flexWrap: \"wrap\",\n    });\n\n    const metaContainer = style(\"metaContainer\", {\n        ...Mixins.padding({\n            all: vars.container.spacing,\n        }),\n    });\n\n    const row = style(\"row\", {\n        display: \"flex\",\n        justifyContent: \"center\",\n    });\n\n    const actionContainer = style(\"actionContainer\", {\n        ...{\n            \"&&\": {\n                ...Mixins.padding({\n                    horizontal: vars.actionContainer.spacing,\n                    top: vars.container.spacing,\n                    bottom: vars.actionContainer.spacing * 2 - vars.container.spacing,\n                }),\n                ...mediaQueries.oneColumnDown({\n                    ...Mixins.padding({\n                        vertical: vars.actionContainer.spacing * 2 - vars.container.spacing,\n                        horizontal: vars.actionContainer.spacing,\n                    }),\n                }),\n            },\n        },\n    });\n\n    const containerWithBorder = style(\"containerWithBorder\", {\n        borderTop: `1px solid ${vars.containerWithBorder.color}`,\n    });\n\n    const avatar = style(\"avatar\", {\n        ...buttonResetMixin(),\n    });\n\n    // Fetch button styles\n    const buttonStyles = generateButtonStyleProperties({\n        buttonTypeVars: buttonVariables().standard,\n    });\n    // Create new class with same styles\n    const buttonClass = style(buttonStyles);\n\n    const button = style(\n        \"button\",\n        {\n            maxWidth: percent(100),\n            ...{\n                \"&&\": {\n                    minWidth: styleUnit(vars.button.minWidth),\n                },\n            },\n        },\n        mediaQueries.oneColumnDown({\n            ...{\n                \"&&\": {\n                    width: percent(100),\n                    minWidth: styleUnit(vars.button.mobile.minWidth),\n                },\n            },\n        }),\n    );\n\n    const buttonContainer = style(\n        \"buttonContainer\",\n        {\n            maxWidth: percent(100),\n            ...Mixins.padding({\n                all: vars.container.spacing,\n            }),\n        },\n        mediaQueries.oneColumnDown({\n            ...{\n                \"&&\": {\n                    flexGrow: 1,\n                    flexBasis: percent(50),\n                },\n            },\n        }),\n    );\n\n    const name = style(\n        \"name\",\n        {\n            margin: \"auto\",\n            fontSize: vars.name.size,\n            fontWeight: vars.name.weight,\n            width: percent(100),\n            textAlign: \"center\",\n        },\n        mediaQueries.oneColumnDown({\n            fontSize: vars.name.size * 1.25,\n        }),\n    );\n\n    const label = style(\"label\", {\n        ...Mixins.padding(vars.label.padding),\n        ...Mixins.font(vars.label.font),\n        ...Mixins.border(vars.label.border),\n        ...Mixins.margin({\n            top: vars.container.spacing,\n            horizontal: \"auto\",\n        }),\n    });\n\n    const stat = style(\"stat\", {\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        flexGrow: 1,\n        maxWidth: percent(50),\n    });\n\n    const statLabel = style(\"statLabel\", {\n        marginTop: styleUnit(2),\n        marginBottom: styleUnit(3),\n        ...Mixins.font({\n            size: globalVars.fonts.size.small,\n            lineHeight: globalVars.lineHeights.condensed,\n        }),\n        ...mediaQueries.oneColumnDown({\n            ...Mixins.font({\n                size: globalVars.fonts.size.medium,\n                lineHeight: globalVars.lineHeights.condensed,\n            }),\n        }),\n    });\n\n    const statLeft = style(\"statLeft\", {\n        borderRight: singleBorder({}),\n        ...Mixins.padding({\n            vertical: vars.container.spacing,\n            right: globalVars.spacer.size / 2,\n            left: globalVars.spacer.size,\n        }),\n    });\n\n    const statRight = style(\"statRight\", {\n        ...Mixins.padding({\n            vertical: vars.container.spacing,\n            right: globalVars.spacer.size,\n            left: globalVars.spacer.size / 2,\n        }),\n    });\n\n    const count = style(\"count\", {\n        marginTop: styleUnit(3),\n        ...Mixins.font({\n            size: vars.count.size,\n            lineHeight: globalVars.lineHeights.condensed,\n        }),\n    });\n\n    const header = style(\"header\", {\n        position: \"relative\",\n        height: styleUnit(vars.header.height),\n    });\n\n    const section = style(\"section\", {});\n\n    const email = style(\"email\", {\n        ...{\n            \"&&&&\": {\n                ...Mixins.font({\n                    color: globalVars.mainColors.fg,\n                    size: globalVars.fonts.size.small,\n                    align: \"center\",\n                }),\n                display: \"inline-flex\",\n                margin: \"auto\",\n                marginTop: styleUnit(vars.container.spacing * 1.8),\n            },\n            ...linkColors,\n        },\n    });\n\n    const date = style(\"date\", {\n        padding: vars.buttonContainer.padding,\n        fontSize: styleUnit(12),\n    });\n\n    const formElementsVars = formElementsVariables();\n\n    const close = style(\"close\", {\n        ...{\n            \"&&&\": {\n                ...absolutePosition.topRight(),\n                width: styleUnit(formElementsVars.sizing.height),\n                height: styleUnit(formElementsVars.sizing.height),\n                ...mediaQueries.oneColumnDown({\n                    height: styleUnit(formElementsVars.sizing.height),\n                }),\n            },\n        },\n    });\n\n    const userPhoto = style(\"userPhoto\", {\n        margin: \"auto\",\n        display: \"block\",\n    });\n\n    const link = style(\"link\", {\n        color: \"inherit\",\n        fontSize: \"inherit\",\n        ...{\n            \"&.isLoading\": {\n                cursor: important(\"wait\"),\n                ...pointerEvents(\"auto\"),\n            },\n        },\n    });\n\n    return {\n        container,\n        containerWithBorder,\n        button,\n        buttonContainer,\n        name,\n        label,\n        stat,\n        count,\n        avatar,\n        header,\n        section,\n        email,\n        date,\n        statLabel,\n        statLeft,\n        statRight,\n        close,\n        userPhoto,\n        actionContainer,\n        link,\n        metaContainer,\n        row,\n    };\n});\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ISearchForm, ISearchRequestQuery, ISearchResults } from \"@library/search/searchTypes\";\nimport { IApiError } from \"@vanilla/library/src/scripts/@types/api/core\";\nimport { actionCreatorFactory } from \"typescript-fsa\";\n\nconst createAction = actionCreatorFactory(\"@@search\");\n\nexport class SearchActions {\n    public static performSearchACs = createAction.async<ISearchRequestQuery, ISearchResults, IApiError>(\"SEARCH\");\n    public static updateSearchFormAC = createAction<Partial<ISearchForm>>(\"UPDATE_FORM\");\n    public static resetFormAC = createAction(\"RESET_FORM\");\n\n    public static performDomainSearchACs = createAction.async<ISearchRequestQuery, ISearchResults, IApiError>(\n        \"DOMAIN_SEARCH\",\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\n\ninterface IProps {\n    condition: boolean;\n    className?: string;\n    tag?: keyof JSX.IntrinsicElements;\n    component?: React.ComponentType<any>;\n    children?: React.ReactNode;\n    componentProps?: object;\n}\n\n/**\n * Facilitates wrapping conditionally a component\n */\nexport default function ConditionalWrap(props: IProps) {\n    const { condition, className, tag, children, component, componentProps = {} } = props;\n    const Component = component || tag || \"div\";\n    if (condition) {\n        return (\n            <Component className={className} {...componentProps}>\n                {children}\n            </Component>\n        );\n    } else {\n        return <>{children}</>;\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport * as React from \"react\";\nimport classNames from \"classnames\";\nimport { flyoutPosition } from \"@rich-editor/flyouts/pieces/flyoutPosition\";\nimport { dropDownClasses } from \"@library/flyouts/dropDownStyles\";\nimport { TabHandler } from \"@vanilla/dom-utils\";\n\nexport interface IProps {\n    id: string;\n    className?: string;\n    children: React.ReactNode;\n    isVisible?: boolean;\n    renderAbove: boolean;\n    renderLeft: boolean;\n    renderCenter: boolean;\n    legacyMode?: boolean;\n    openAsModal?: boolean;\n    selfPadded?: boolean;\n    size: DropDownContentSize;\n    horizontalOffset?: boolean;\n    contentRef?: React.RefObject<HTMLDivElement>;\n}\n\nexport enum DropDownContentSize {\n    SMALL = \"small\",\n    MEDIUM = \"medium\",\n}\n\n/**\n * The contents of the flyouts (not the wrapper and not the button to toggle it).\n * Note that it renders an empty, hidden div when closed so that the aria-labelledby points to an element in the DOM.\n */\nexport default class DropDownContents extends React.Component<IProps> {\n    public render() {\n        const classes = dropDownClasses();\n        const asDropDownClasses = !this.props.openAsModal\n            ? classNames(\"dropDown-contents\", classes.contents, {\n                  isMedium: this.props.size === DropDownContentSize.MEDIUM,\n              })\n            : undefined;\n        const asModalClasses = this.props.openAsModal ? classNames(\"dropDown-asModal\", classes.asModal) : undefined;\n        if (this.props.openAsModal) {\n            return this.props.children;\n        }\n\n        return (\n            <div\n                ref={this.props.contentRef}\n                id={this.props.id}\n                className={classNames(asDropDownClasses, asModalClasses, this.props.className, {\n                    [classes.verticalPadding]: !this.props.selfPadded,\n                    [classes.contentOffsetCenter]: this.props.renderCenter,\n                    [classes.contentOffsetLeft]: this.props.horizontalOffset && this.props.renderLeft,\n                    [classes.contentOffsetRight]: this.props.horizontalOffset && !this.props.renderLeft,\n                })}\n                style={flyoutPosition(\n                    this.props.renderAbove,\n                    this.props.renderLeft,\n                    !!this.props.legacyMode,\n                    this.props.renderCenter,\n                )}\n                onClick={this.doNothing}\n                tabIndex={-1}\n                onMouseDown={this.forceTryFocus}\n            >\n                {this.props.children}\n            </div>\n        );\n    }\n\n    /**\n     * Our focus watcher has an exclusion for moving away focus when focus is moved to the body.\n     * This is standard behaviour on mousedown, if a non-focusable element is clicked.\n     *\n     * Unfortunately if this is rendered inside of a `content-editable`,\n     * the content editable will be focused instead of the body. This simple handler ensures that focus goes to the body\n     * if a non-focusable element is clicked inside a dropdown inside a content-editable.\n     */\n    private forceTryFocus = (e: React.MouseEvent) => {\n        if (e.target instanceof HTMLElement) {\n            if (!TabHandler.isTabbable(e.target)) {\n                // this.doNothing(e);\n                // this.selfRef.current && this.selfRef.current.focus();\n            }\n        }\n    };\n\n    private doNothing = (e: React.MouseEvent) => {\n        e.stopPropagation();\n        e.nativeEvent.stopPropagation();\n        e.nativeEvent.stopImmediatePropagation();\n    };\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport Button from \"@library/forms/Button\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { CloseTinyIcon } from \"@library/icons/common\";\nimport { frameHeaderClasses } from \"@library/layout/frame/frameHeaderStyles\";\nimport classNames from \"classnames\";\nimport React from \"react\";\nimport ScreenReaderContent from \"@library/layout/ScreenReaderContent\";\nimport { t } from \"@vanilla/i18n/src\";\n\ninterface IProps {\n    children?: React.ReactNode;\n    onClose?: () => void;\n}\n\nexport function FrameHeaderMinimal(props: IProps) {\n    const classes = frameHeaderClasses();\n    return (\n        <header className={classNames(classes.root, classes.rootMinimal)}>\n            <h2 className={classNames(classes.centred, classes.headingMinimal)}>{props.children}</h2>\n            {props.onClose && (\n                <Button baseClass={ButtonTypes.ICON_COMPACT} onClick={props.onClose} className={classes.closeMinimal}>\n                    <ScreenReaderContent>{t(\"Close\")}</ScreenReaderContent>\n                    <CloseTinyIcon aria-hidden=\"true\" />\n                </Button>\n            )}\n        </header>\n    );\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useRef, useState } from \"react\";\nimport DropDownContents, { DropDownContentSize } from \"@library/flyouts/DropDownContents\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { useUniqueID } from \"@library/utility/idUtils\";\nimport { dropDownClasses } from \"@library/flyouts/dropDownStyles\";\nimport FlyoutToggle from \"@library/flyouts/FlyoutToggle\";\nimport classNames from \"classnames\";\nimport { Devices, useDevice } from \"@library/layout/DeviceContext\";\nimport { DropDownMenuIcon } from \"@library/icons/common\";\nimport FrameHeader from \"@library/layout/frame/FrameHeader\";\nimport { FrameHeaderMinimal } from \"@library/layout/frame/FrameHeaderMinimal\";\nimport { useMeasure } from \"@vanilla/react-utils\";\n\nimport ConditionalWrap from \"@library/layout/ConditionalWrap\";\n\nexport enum DropDownOpenDirection {\n    ABOVE_LEFT = \"aboveLeft\",\n    ABOVE_RIGHT = \"aboveRight\",\n    ABOVE_CENTER = \"aboveCenter\",\n    BELOW_LEFT = \"belowLeft\",\n    BELOW_RIGHT = \"belowRight\",\n    BELOW_CENTER = \"belowCenter\",\n    AUTO = \"auto\",\n    HIDDEN = \"hidden\",\n}\n\n// We can add more as we need, but for now, only this one is supported\nexport enum DropDownPreferredOpenDirections {\n    ABOVE_CENTER = \"aboveCenter\",\n}\n\ninterface IOpenDirectionProps {\n    openDirection?: DropDownOpenDirection;\n    preferredDirection?: DropDownPreferredOpenDirections;\n    renderAbove?: boolean; // @deprecated\n    renderLeft?: boolean; // @deprecated\n}\n\nexport interface IDropDownProps extends IOpenDirectionProps {\n    name?: string;\n    children: React.ReactNode;\n    className?: string;\n    describedBy?: string;\n    contentsClassName?: string;\n    buttonContents?: React.ReactNode;\n    buttonClassName?: string;\n    buttonBaseClass?: ButtonTypes;\n    disabled?: boolean;\n    toggleButtonClassName?: string;\n    initialFocusElement?: HTMLElement | null;\n    buttonRef?: React.RefObject<HTMLButtonElement>;\n    contentRef?: React.RefObject<HTMLDivElement>;\n    isVisible?: boolean;\n    onVisibilityChange?: (isVisible: boolean) => void;\n    openAsModal?: boolean;\n    title?: string;\n    mobileTitle?: string;\n    flyoutType: FlyoutType;\n    selfPadded?: boolean;\n    isSmall?: boolean;\n    handleID?: string;\n    contentID?: string;\n    horizontalOffset?: boolean;\n    tag?: string;\n    accessibleLabel?: string;\n}\n\nexport enum FlyoutType {\n    LIST = \"list\",\n    FRAME = \"frame\",\n}\n\nexport interface IState {\n    selectedText: string;\n}\n\n/**\n * Creates a drop down menu\n */\nexport default function DropDown(props: IDropDownProps) {\n    const device = useDevice();\n    const { title, preferredDirection } = props;\n    const mobileTitle = props.mobileTitle ?? title;\n    const classes = dropDownClasses();\n    const ContentTag = props.flyoutType === FlyoutType.FRAME ? \"div\" : \"ul\";\n    const openAsModal = props.openAsModal || device === Devices.MOBILE || device === Devices.XS;\n    const buttonRef = useRef<HTMLButtonElement>(null);\n    const contentRef = useRef<HTMLDivElement>(null);\n    const ownButtonRef = props.buttonRef ?? buttonRef;\n    const ownContentRef = props.contentRef ?? contentRef;\n    const ID = useUniqueID(\"flyout\");\n\n    const [ownIsVisible, setOwnIsVisible] = useState(false);\n    const isVisible = props.isVisible ?? (preferredDirection ? ownIsVisible : undefined);\n    const onVisibilityChange = props.onVisibilityChange ?? (preferredDirection ? setOwnIsVisible : undefined);\n\n    const buttonRect = useMeasure(ownButtonRef); // Dimensions of button\n    const contentRect = useMeasure(ownContentRef); // Dimensions of content\n\n    const openDirection = resolveOpenDirection({\n        props,\n        buttonRect,\n        contentRect,\n        dropDownID: ID,\n    });\n\n    const positionHidden = openDirection === DropDownOpenDirection.HIDDEN;\n\n    const handleID = props.handleID ?? ID + \"-handle\";\n    const contentID = props.contentID ?? ID + \"-contents\";\n\n    return (\n        <FlyoutToggle\n            id={handleID}\n            className={classNames(props.className)}\n            buttonBaseClass={props.buttonBaseClass || ButtonTypes.ICON}\n            name={props.name!}\n            buttonContents={props.buttonContents || <DropDownMenuIcon />}\n            buttonClassName={props.buttonClassName}\n            disabled={props.disabled}\n            buttonRef={ownButtonRef}\n            toggleButtonClassName={props.toggleButtonClassName}\n            isVisible={isVisible}\n            onVisibilityChange={onVisibilityChange}\n            openAsModal={openAsModal}\n            initialFocusElement={props.initialFocusElement}\n            tag={props.tag}\n            contentID={contentID}\n        >\n            {(params) => {\n                return (\n                    <ConditionalWrap\n                        condition={(!isVisible || positionHidden) && !openAsModal && !!preferredDirection}\n                        className={classes.positioning}\n                    >\n                        <DropDownContents\n                            {...params}\n                            contentRef={ownContentRef}\n                            id={contentID}\n                            className={classNames(props.contentsClassName)}\n                            renderCenter={[\n                                DropDownOpenDirection.ABOVE_CENTER,\n                                DropDownOpenDirection.BELOW_CENTER,\n                            ].includes(openDirection)}\n                            renderLeft={[DropDownOpenDirection.ABOVE_LEFT, DropDownOpenDirection.BELOW_LEFT].includes(\n                                openDirection,\n                            )}\n                            renderAbove={[\n                                DropDownOpenDirection.ABOVE_RIGHT,\n                                DropDownOpenDirection.ABOVE_LEFT,\n                                DropDownOpenDirection.ABOVE_CENTER,\n                            ].includes(openDirection)}\n                            openAsModal={openAsModal}\n                            selfPadded={\n                                props.selfPadded !== undefined\n                                    ? props.selfPadded\n                                    : props.flyoutType === FlyoutType.FRAME\n                            }\n                            size={\n                                props.flyoutType === FlyoutType.FRAME && !props.isSmall\n                                    ? DropDownContentSize.MEDIUM\n                                    : DropDownContentSize.SMALL\n                            }\n                            horizontalOffset={props.horizontalOffset}\n                        >\n                            {!openAsModal && title && (\n                                <FrameHeader title={title} closeFrame={params.closeMenuHandler} />\n                            )}\n                            {openAsModal && mobileTitle && (\n                                <FrameHeaderMinimal onClose={params.closeMenuHandler}>\n                                    {mobileTitle ?? title}\n                                </FrameHeaderMinimal>\n                            )}\n                            {openAsModal && props.flyoutType === FlyoutType.FRAME ? (\n                                props.children\n                            ) : (\n                                <ContentTag className={classNames(\"dropDownItems\", classes.items)}>\n                                    {props.children}\n                                </ContentTag>\n                            )}\n                        </DropDownContents>\n                    </ConditionalWrap>\n                );\n            }}\n        </FlyoutToggle>\n    );\n}\n\ninterface IResolveDirectionProps {\n    props: IOpenDirectionProps;\n    buttonRect: DOMRect;\n    contentRect: DOMRect;\n    setFlyoutHasPlacement?: (positioned: boolean) => void;\n    dropDownID: string;\n}\n\nconst resolveOpenDirection = (data: IResolveDirectionProps): DropDownOpenDirection => {\n    const { props, buttonRect, contentRect } = data;\n    let { renderAbove, renderLeft, preferredDirection, openDirection } = props;\n\n    if (preferredDirection && (contentRect.height === 0 || contentRect.width === 0)) {\n        return DropDownOpenDirection.HIDDEN;\n    }\n\n    // @deprecated, do not use these props anymore\n    if ((openDirection && renderAbove) || (openDirection && renderLeft)) {\n        throw new Error(\"`renderAbove` & `renderLeft` may not be used with `openDirection` in <DropDown />\");\n    }\n\n    // check for preferred positioning. We currently only support 1, but more can be added\n    if (preferredDirection && buttonRect.width !== 0 && contentRect.width !== 0) {\n        switch (preferredDirection) {\n            case DropDownPreferredOpenDirections.ABOVE_CENTER:\n                const topClearance = buttonRect.top;\n                const leftClearance = buttonRect.left;\n                const rightClearance = window.innerWidth - buttonRect.right;\n\n                const contentHalfWidth = contentRect.width / 2;\n                const contentHeight = contentRect.height;\n\n                renderAbove = topClearance >= contentHeight;\n\n                const renderCentered = contentHalfWidth <= leftClearance && contentHalfWidth <= rightClearance;\n\n                if (renderCentered) {\n                    if (renderAbove) {\n                        return DropDownOpenDirection.ABOVE_CENTER;\n                    } else {\n                        return DropDownOpenDirection.BELOW_CENTER;\n                    }\n                } // Else, we've just determined one direction. The left or right position is calculated below\n                break;\n        }\n    }\n\n    // Early bailout if we aren't auto.\n    if (props.openDirection === DropDownOpenDirection.AUTO || !renderAbove || !renderLeft) {\n        if (!renderAbove) {\n            const documentHeight = document.body.clientHeight;\n            const centerY = (buttonRect.top + buttonRect.bottom) / 2; // center Y position of button\n            renderAbove = centerY > documentHeight / 2;\n        }\n        if (!renderLeft) {\n            const documentWidth = document.body.clientWidth;\n            const centerX = (buttonRect.left + buttonRect.right) / 2; // center X position of button\n            renderLeft = centerX > documentWidth / 2;\n        }\n    } else if (props.openDirection) {\n        return props.openDirection;\n    }\n\n    if (renderAbove && renderLeft) {\n        return DropDownOpenDirection.ABOVE_LEFT;\n    } else if (renderAbove && !renderLeft) {\n        return DropDownOpenDirection.ABOVE_RIGHT;\n    } else if (!renderAbove && renderLeft) {\n        return DropDownOpenDirection.BELOW_LEFT;\n    } else if (!renderAbove && !renderLeft) {\n        return DropDownOpenDirection.BELOW_RIGHT;\n    }\n\n    // DEFAULT\n    return DropDownOpenDirection.BELOW_RIGHT;\n};\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nexport enum SearchBarPresets {\n    NO_BORDER = \"no border\",\n    BORDER = \"border\",\n    UNIFIED_BORDER = \"unified border\",\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport { ISearchForm, ISearchRequestQuery } from \"@library/search/searchTypes\";\nimport React from \"react\";\nimport { ISelectBoxItem } from \"@library/forms/select/SelectBox\";\n\nexport class SearchService {\n    private static _supportsExtensions = false;\n    static setSupportsExtensions(supports: boolean) {\n        this._supportsExtensions = supports;\n    }\n    static supportsExtensions(): boolean {\n        return this._supportsExtensions;\n    }\n    static extraFilters = [] as IExtraFilter[];\n    static addSearchFilter = (domain: string, filterNode: React.ReactNode) => {\n        SearchService.extraFilters.push({\n            searchDomain: domain,\n            filterNode,\n        });\n    };\n\n    static pluggableDomains = [] as ISearchDomain[];\n\n    static addPluggableDomain = (domain: ISearchDomain) => {\n        SearchService.pluggableDomains.push(domain);\n    };\n\n    static subTypes = {} as Record<string, ISearchSubType>;\n    static addSubType = (subType: ISearchSubType) => {\n        SearchService.subTypes[subType.type] = subType;\n    };\n    static getSubTypes = (): ISearchSubType[] => {\n        return Object.values(SearchService.subTypes);\n    };\n    static getSubType = (type: string): ISearchSubType | null => {\n        return SearchService.subTypes[type] ?? null;\n    };\n}\ninterface ISearchSubType {\n    domain?: string;\n    recordType: string;\n    icon: React.ReactNode;\n    type: string;\n    label: string;\n}\ninterface IExtraFilter {\n    searchDomain: string;\n    filterNode: React.ReactNode;\n}\n\nexport interface ISearchDomain {\n    key: string;\n    name: string;\n    sort: number; // The order the panel appears from left to right\n    icon: React.ReactNode;\n    heading?: React.ReactNode;\n    extraSearchAction?(): void;\n    getName?(): string;\n    PanelComponent: React.ComponentType<any>;\n    resultHeader?: React.ReactNode;\n    getAllowedFields(): string[];\n    getRecordTypes(): string[];\n    transformFormToQuery(form: Partial<ISearchForm>): Partial<ISearchRequestQuery>;\n    getDefaultFormValues(): Partial<ISearchForm>;\n    isIsolatedType(): boolean;\n    getSortValues(): ISelectBoxItem[];\n    ResultComponent: React.ComponentType<any>;\n    ResultWrapper?: React.ComponentType<any>;\n    MetaComponent?: React.ComponentType<any>;\n    hasSpecificRecord?(form: Partial<ISearchForm>): boolean;\n    getSpecificRecord?(form: Partial<ISearchForm>): number;\n    SpecificRecordPanel?: React.ComponentType<any>;\n    SpecificRecordComponent?: React.ComponentType<any>;\n    showSpecificRecordCrumbs?(): boolean; // We could later make this into a config object\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { containerClasses } from \"@library/layout/components/containerStyles\";\nimport classNames from \"classnames\";\nimport { ISpacing } from \"@library/styles/cssUtilsTypes\";\n\nexport interface IContainer {\n    className?: string;\n    children?: React.ReactNode;\n    tag?: keyof JSX.IntrinsicElements;\n    fullGutter?: boolean; // Use when a component wants a full mobile/desktop gutter.\n    // Useful for components that don't provide their own padding.\n    narrow?: boolean;\n    style?: object;\n    maxWidth?: number;\n    gutterSpacing?: ISpacing;\n}\n\n/*\n * Implements \"Container\" component used to set max width of content of page.\n */\nexport const Container = React.forwardRef(function Container(props: IContainer, ref: React.Ref<HTMLElement>) {\n    const { tag, children, className, fullGutter = false, narrow = false, style = {}, maxWidth, gutterSpacing } = props;\n\n    if (children) {\n        const classes = containerClasses({ maxWidth, desktopSpacing: gutterSpacing });\n        const Tag = tag || \"div\";\n        return (\n            <Tag\n                ref={ref}\n                style={style}\n                className={classNames(classes.root, className, {\n                    [classes.fullGutter]: fullGutter,\n                    isNarrow: narrow,\n                })}\n            >\n                {children}\n            </Tag>\n        );\n    } else {\n        return null;\n    }\n});\n\nexport default Container;\n","import { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { userSelect } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { Variables } from \"@library/styles/Variables\";\n\nexport const dateTimeVariables = useThemeCache((forcedVars?: IThemeVariables) => {\n    const makeVars = variableFactory(\"dateTime\", forcedVars);\n    const globalVars = globalVariables();\n\n    const compact = makeVars(\"compact\", {\n        container: {\n            size: 38, // cheated to align with text\n            bg: globalVars.mixBgAndFg(0.1),\n            border: {\n                radius: 8,\n            },\n        },\n        month: {\n            font: Variables.font({\n                size: 10,\n                transform: \"uppercase\",\n                lineHeight: 1,\n            }),\n        },\n        day: {\n            font: Variables.font({\n                size: 16,\n                weight: globalVars.fonts.weights.bold,\n                lineHeight: 1,\n            }),\n        },\n    });\n\n    return { compact };\n});\n\nexport const dateTimeClasses = useThemeCache(() => {\n    const style = styleFactory(\"dateTime\");\n    const vars = dateTimeVariables();\n    const compactVars = vars.compact;\n\n    const compactRoot = style(\"compactRoot\", {\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        backgroundColor: ColorsUtils.colorOut(compactVars.container.bg),\n        minWidth: styleUnit(compactVars.container.size),\n        minHeight: styleUnit(compactVars.container.size),\n        ...userSelect(),\n        ...{\n            \"&&\": {\n                borderRadius: styleUnit(compactVars.container.border.radius),\n            },\n        },\n    });\n\n    const compactDay = style(\"compactDay\", {\n        ...Mixins.font(compactVars.day.font),\n    });\n\n    const compactMonth = style(\"compactMonth\", {\n        ...Mixins.font(compactVars.month.font),\n    });\n\n    return { compactRoot, compactDay, compactMonth };\n});\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { t } from \"@library/utility/appUtils\";\nimport React, { Component } from \"react\";\nimport moment from \"moment\";\nimport { getJSLocaleKey } from \"@vanilla/i18n\";\nimport { dateTimeClasses } from \"@library/content/dateTimeStyles\";\n\nexport enum DateFormats {\n    DEFAULT = \"default\",\n    EXTENDED = \"extended\",\n    COMPACT = \"compact\",\n}\n\ninterface IDateTimeProps {\n    /** The timestamp to format and display */\n    timestamp: string;\n    /** Pass an explicit time zone to format in. */\n    timezone?: string;\n    /** An additional classname to apply to the root of the component */\n    className?: string;\n    /** Display a fixed or relative visible time. */\n    mode?: \"relative\" | \"fixed\";\n    type?: DateFormats;\n}\n\n/**\n * Component for displaying an accessible nicely formatted time string.\n */\nexport default class DateTime extends Component<IDateTimeProps> {\n    public static defaultProps: Partial<IDateTimeProps> = {\n        mode: \"fixed\",\n        type: DateFormats.DEFAULT,\n    };\n    private interval;\n\n    public render() {\n        return (\n            <time className={this.props.className} dateTime={this.props.timestamp} title={this.titleTime}>\n                {this.humanTime}\n            </time>\n        );\n    }\n\n    public componentDidMount() {\n        if (this.props.mode === \"relative\") {\n            this.interval = setInterval(() => {\n                this.forceUpdate();\n            }, 30000);\n        }\n    }\n\n    public componentWillUnmount() {\n        if (this.interval) {\n            clearInterval(this.interval);\n        }\n    }\n\n    /**\n     * Get the title of the time tag (long extended date)\n     */\n    private get titleTime(): string {\n        const date = new Date(this.props.timestamp);\n        return date.toLocaleString(getJSLocaleKey(), {\n            year: \"numeric\",\n            month: \"long\",\n            day: \"numeric\",\n            weekday: \"long\",\n            hour: \"numeric\",\n            minute: \"numeric\",\n            timeZone: this.props.timezone,\n        });\n    }\n\n    private get options() {\n        switch (this.props.type) {\n            case DateFormats.EXTENDED:\n                return {\n                    year: \"numeric\",\n                    month: \"short\",\n                    day: \"numeric\",\n                    hour: \"numeric\",\n                    minute: \"numeric\",\n                    timeZone: this.props.timezone,\n                };\n            default:\n                return {\n                    year: \"numeric\",\n                    month: \"short\",\n                    day: \"numeric\",\n                    timeZone: this.props.timezone,\n                };\n        }\n    }\n\n    /**\n     * Get a shorter human readable time for the time tag.\n     */\n    private get humanTime(): React.ReactNode {\n        const inputMoment = moment(this.props.timestamp);\n\n        if (this.props.mode === \"relative\") {\n            const difference = moment.duration(moment().diff(inputMoment));\n            const seconds = difference.asSeconds();\n            if (seconds >= 0 && seconds <= 5) {\n                return t(\"just now\");\n            }\n            return inputMoment.from(moment());\n        } else {\n            if (this.props.type !== DateFormats.COMPACT) {\n                // If it's the same day, return the time.\n                if (moment().isSame(inputMoment, \"day\")) {\n                    return inputMoment.format(\"h:mm a\");\n                }\n                // Otherwise return the date.\n                return inputMoment.toDate().toLocaleString(getJSLocaleKey(), this.options);\n            } else {\n                const classes = dateTimeClasses();\n                return (\n                    <span className={classes.compactRoot}>\n                        <span className={classes.compactMonth} key={\"month\"}>\n                            {inputMoment.toDate().toLocaleString(getJSLocaleKey(), {\n                                month: \"short\",\n                                timeZone: this.props.timezone,\n                            })}\n                        </span>\n                        <span className={classes.compactDay} key={\"day\"}>\n                            {inputMoment.toDate().toLocaleString(getJSLocaleKey(), {\n                                day: \"numeric\",\n                                timeZone: this.props.timezone,\n                            })}\n                        </span>\n                    </span>\n                );\n            }\n        }\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { resetThemeCache } from \"@library/styles/themeCache\";\nimport { IComponentMountOptions, mountReact } from \"@vanilla/react-utils\";\nimport { logDebug, logWarning } from \"@vanilla/utils\";\nimport React from \"react\";\n\nlet useTheme = true;\n\n/**\n * Disable theming for the site. This is useful for sections like the dashboard.\n */\nexport function disableComponentTheming() {\n    useTheme = false;\n    resetThemeCache();\n}\n\n/**\n * Enable theming for the site. This is useful for sections like the dashboard.\n */\nexport function enableComponentTheming() {\n    useTheme = true;\n    resetThemeCache();\n}\n\nexport function isComponentThemingEnabled() {\n    return useTheme;\n}\n\nexport interface IRegisteredComponent {\n    Component: React.ComponentType<any>;\n    mountOptions?: IComponentMountOptions;\n}\n\n/**\n * The currently registered Components.\n * @private\n */\nconst _components: {\n    [key: string]: IRegisteredComponent;\n} = {};\n\nlet _pageComponent: React.ComponentType<any> | null = null;\n\n/**\n * Register a component in the Components registry.\n *\n * @param name The name of the component.\n * @param component The component to register.\n */\nexport function addComponent(name: string, Component: React.ComponentType<any>, mountOptions?: IComponentMountOptions) {\n    _components[name.toLowerCase()] = {\n        Component,\n        mountOptions,\n    };\n}\n\n/**\n * Register a component in the Components registry.\n *\n * @param name The name of the component.\n * @param component The component to register.\n */\nexport function addPageComponent(Component: React.ComponentType<any>) {\n    _pageComponent = Component;\n}\n\n/**\n * Test to see if a component has been registered.\n *\n * @param name The name of the component to test.\n * @returns Returns **true** if the component has been registered or **false** otherwise.\n */\nexport function componentExists(name: string): boolean {\n    return _components[name.toLowerCase()] !== undefined;\n}\n\n/**\n * Get a component from the component registry.\n *\n * @param name The name of the component.\n * @returns Returns the component or **undefined** if there is no registered component.\n */\nexport function getComponent(name: string): IRegisteredComponent | undefined {\n    return _components[name.toLowerCase()];\n}\n\n/**\n * Mount all declared Components on the dom.\n *\n * The page signifies that an element contains a component with the `data-react=\"<Component>\"` attribute.\n *\n * @param parent - The parent element to search. This element is not included in the search.\n */\nexport async function _mountComponents(parent: Element) {\n    const awaiting: Array<Promise<any>> = [];\n    const parentPage = parent.querySelector(\"#app\");\n    if (parentPage instanceof HTMLElement && _pageComponent !== null) {\n        mountReact(<_pageComponent />, parentPage);\n    }\n\n    parent.querySelectorAll(\"[data-react]\").forEach((node) => {\n        if (!(node instanceof HTMLElement)) {\n            logWarning(\"Attempting to mount a data-react component on an invalid element\", node);\n            return;\n        }\n\n        const name = node.getAttribute(\"data-react\") || \"\";\n        let props = node.getAttribute(\"data-props\") || {};\n        if (typeof props === \"string\") {\n            props = JSON.parse(props);\n        }\n        const registeredComponent = getComponent(name);\n\n        if (!registeredComponent) {\n            return;\n        }\n        const children = node.innerHTML;\n        node.innerHTML = \"\";\n\n        node.removeAttribute(\"data-react\");\n        node.removeAttribute(\"data-props\");\n\n        awaiting.push(\n            new Promise((resolve) => {\n                if (registeredComponent) {\n                    mountReact(\n                        <registeredComponent.Component {...props} contents={children} />,\n                        node,\n                        () => {\n                            if (node.getAttribute(\"data-unhide\") === \"true\") {\n                                node.removeAttribute(\"style\");\n                            }\n                            resolve();\n                        },\n                        registeredComponent.mountOptions,\n                    );\n                } else {\n                    logDebug(\"Could not find component %s.\", name);\n                    resolve();\n                }\n            }),\n        );\n    });\n\n    await Promise.all(awaiting);\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { getButtonStyleFromBaseClass } from \"@library/forms/Button\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport { IOptionalComponentID } from \"@library/utility/idUtils\";\nimport { LinkProps } from \"react-router-dom\";\nimport ConditionalWrap from \"@library/layout/ConditionalWrap\";\nimport { buttonLabelWrapClass } from \"@library/forms/buttonStyles\";\n\ninterface IProps extends IOptionalComponentID, LinkProps {\n    children: React.ReactNode;\n    className?: string;\n    to: string;\n    title?: string;\n    ariaLabel?: string;\n    baseClass?: ButtonTypes;\n    tabIndex?: number;\n    addWrap?: boolean; // Adds wrapper class to help with overflowing text\n}\n\n/**\n * A Link component that looks like a Button component.\n */\nexport default class LinkAsButton extends React.Component<IProps> {\n    public static defaultProps: Partial<IProps> = {\n        tabIndex: 0,\n    };\n\n    public render() {\n        const {\n            baseClass,\n            className,\n            title,\n            ariaLabel,\n            to,\n            children,\n            tabIndex,\n            addWrap = false,\n            ...restProps\n        } = this.props;\n        const componentClasses = classNames(getButtonStyleFromBaseClass(baseClass || ButtonTypes.STANDARD), className);\n        const fallbackTitle = typeof children === \"string\" ? children : undefined;\n        return (\n            <SmartLink\n                className={componentClasses}\n                title={title ?? fallbackTitle}\n                aria-label={ariaLabel || title || fallbackTitle}\n                tabIndex={tabIndex}\n                role={\"button\"}\n                to={to}\n                {...restProps}\n            >\n                <ConditionalWrap className={buttonLabelWrapClass().root} condition={addWrap}>\n                    {children}\n                </ConditionalWrap>\n            </SmartLink>\n        );\n    }\n}\n","import { DEFAULT_CORE_SEARCH_FORM, INITIAL_SEARCH_STATE } from \"@library/search/searchReducer\";\nimport { ISearchForm, ISearchResults, ISearchFormBase } from \"@library/search/searchTypes\";\nimport { ILoadable } from \"@vanilla/library/src/scripts/@types/api/core\";\nimport React, { useContext } from \"react\";\nimport { ISearchDomain } from \"./SearchService\";\n\nexport const SearchContext = React.createContext<ISearchContextValue>({\n    getFilterComponentsForDomain: () => null,\n    updateForm: () => {},\n    resetForm: () => {},\n    results: INITIAL_SEARCH_STATE.results,\n    domainSearchResults: INITIAL_SEARCH_STATE.domainSearchResults,\n    form: DEFAULT_CORE_SEARCH_FORM,\n    search: () => {},\n    searchInDomain: () => {},\n    getDomains: () => {\n        return [];\n    },\n    getCurrentDomain: () => {\n        throw new Error(\"Context implementation is required for this method\");\n    },\n    getDefaultFormValues: () => {\n        return DEFAULT_CORE_SEARCH_FORM;\n    },\n});\ninterface ISearchContextValue<ExtraFormValues extends object = ISearchFormBase> {\n    results: ILoadable<ISearchResults>;\n\n    domainSearchResults: Record<string, ILoadable<ISearchResults>>;\n\n    form: ISearchForm<ExtraFormValues>;\n\n    /**\n     * Get all of the DOM elements for selecting query values for a search domain.\n     * @param domain The search domain to get values for.\n     */\n    getFilterComponentsForDomain(domain: string): React.ReactNode;\n\n    /**\n     * Update some form values.\n     */\n    updateForm(updateValues: Partial<ISearchForm<ExtraFormValues>>): void;\n\n    /**\n     * Update some form values.\n     */\n    resetForm(): void;\n\n    /**\n     * Perform a search.\n     */\n    search(): void;\n\n    /**\n     * Perform a separate search in any domain outside of the current domain\n     */\n    searchInDomain(domain: string): void;\n\n    /**\n     * Get all of the regitered search domains.\n     */\n    getDomains(): ISearchDomain[];\n\n    /**\n     * Get the current search domain of the form.\n     */\n    getCurrentDomain(): ISearchDomain;\n\n    /**\n     * Get the default values for the form.\n     */\n    getDefaultFormValues(): ISearchForm;\n}\n\nexport function useSearchForm<T extends object>() {\n    return useContext(SearchContext) as ISearchContextValue<T>;\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport ModalSizes from \"@library/modal/ModalSizes\";\nimport { modalClasses } from \"@library/modal/modalStyles\";\nimport { uniqueIDFromPrefix } from \"@library/utility/idUtils\";\nimport classNames from \"classnames\";\nimport React, { useMemo, useRef, useState, useLayoutEffect, useCallback } from \"react\";\nimport ScrollLock, { TouchScrollable } from \"react-scrolllock\";\nimport { EntranceAnimation, ITargetTransform, FromDirection } from \"@library/animation/EntranceAnimation\";\nimport { useLastValue } from \"@vanilla/react-utils\";\n\ninterface IProps {\n    id?: string;\n    onOverlayClick: React.MouseEventHandler;\n    onModalClick: React.MouseEventHandler;\n    onKeyDown: React.KeyboardEventHandler;\n    description?: string;\n    titleID?: string;\n    label?: string;\n    className?: boolean;\n    scrollable?: boolean;\n    size: ModalSizes;\n    modalRef?: React.RefObject<HTMLDivElement>;\n    children?: React.ReactNode;\n    isVisible: boolean;\n    onDestroyed: () => void;\n    onKeyPress?: (e) => void;\n}\n\n/**\n * Render the contents into a portal.\n */\nexport function ModalView(props: IProps) {\n    const { titleID, label, size, isVisible, onDestroyed } = props;\n    const [isAnimatingOut, setIsAnimatingOut] = useState(false);\n\n    const lastVisible = useLastValue(isVisible);\n    useLayoutEffect(() => {\n        if (lastVisible && !isVisible) {\n            setIsAnimatingOut(true);\n        }\n    }, [isVisible, lastVisible]);\n\n    const handleDestroy = useCallback(() => {\n        setIsAnimatingOut(false);\n        onDestroyed();\n    }, [onDestroyed]);\n\n    const domID = useMemo(() => uniqueIDFromPrefix(\"modal\"), []);\n    const descriptionID = domID + \"-description\";\n\n    const ownRef = useRef<HTMLDivElement>(null);\n    const modalRef = props.modalRef || ownRef;\n\n    const classes = modalClasses();\n\n    let contents = (\n        <>\n            {props.description && (\n                <div id={descriptionID} className=\"sr-only\">\n                    {props.description}\n                </div>\n            )}\n            {props.children}\n        </>\n    );\n\n    if (props.scrollable) {\n        contents = (\n            <TouchScrollable>\n                <div className={classes.scroll}>{contents}</div>\n            </TouchScrollable>\n        );\n    }\n\n    const targetTransform: Partial<ITargetTransform> | undefined = useMemo(() => {\n        switch (size) {\n            case ModalSizes.SMALL:\n            case ModalSizes.MEDIUM:\n            case ModalSizes.LARGE:\n            case ModalSizes.XL:\n                return {\n                    xPercent: -50,\n                    yPercent: -50,\n                };\n            default:\n                return undefined;\n        }\n    }, [size]);\n\n    const contentTransition = (() => {\n        switch (props.size) {\n            case ModalSizes.SMALL:\n            case ModalSizes.MEDIUM:\n            case ModalSizes.LARGE:\n                return {\n                    fade: true,\n                    fromDirection: FromDirection.BOTTOM,\n                    halfDirection: true,\n                };\n            case ModalSizes.XL:\n                return {\n                    fade: true,\n                };\n            case ModalSizes.FULL_SCREEN:\n                return {\n                    fade: false,\n                };\n            case ModalSizes.MODAL_AS_DROP_DOWN:\n                return {\n                    fade: false,\n                    fromDirection: FromDirection.TOP,\n                };\n            case ModalSizes.MODAL_AS_SIDE_PANEL_RIGHT:\n            case ModalSizes.MODAL_AS_SIDE_PANEL_RIGHT_LARGE:\n                return {\n                    fade: false,\n                    fromDirection: FromDirection.RIGHT,\n                };\n            case ModalSizes.MODAL_AS_SIDE_PANEL_LEFT:\n                return {\n                    fade: false,\n                    fromDirection: FromDirection.LEFT,\n                };\n        }\n    })();\n\n    return (\n        <div onKeyPress={props.onKeyPress}>\n            <EntranceAnimation\n                fade\n                isEntered={props.isVisible}\n                className={classes.overlayScrim}\n                onDestroyed={handleDestroy}\n            >\n                <span />\n            </EntranceAnimation>\n            <ScrollLock isActive={props.isVisible || lastVisible || isAnimatingOut}>\n                <div\n                    className={classes.overlayContent}\n                    onClick={props.onOverlayClick}\n                    style={{ pointerEvents: props.isVisible ? \"initial\" : \"none\" }}\n                >\n                    <EntranceAnimation\n                        id={props.id}\n                        {...contentTransition}\n                        targetTransform={targetTransform}\n                        isEntered={props.isVisible}\n                        role=\"dialog\"\n                        aria-modal={true}\n                        className={classNames(\n                            classes.root,\n                            {\n                                isFullScreen:\n                                    size === ModalSizes.FULL_SCREEN ||\n                                    size === ModalSizes.MODAL_AS_SIDE_PANEL_RIGHT ||\n                                    size === ModalSizes.MODAL_AS_SIDE_PANEL_LEFT,\n                                isSidePanelRight: size === ModalSizes.MODAL_AS_SIDE_PANEL_RIGHT,\n                                isSidePanelRightLarge: size === ModalSizes.MODAL_AS_SIDE_PANEL_RIGHT_LARGE,\n                                isSidePanelLeft: size === ModalSizes.MODAL_AS_SIDE_PANEL_LEFT,\n                                isDropDown: size === ModalSizes.MODAL_AS_DROP_DOWN,\n                                isXL: size === ModalSizes.XL,\n                                isLarge: size === ModalSizes.LARGE,\n                                isMedium: size === ModalSizes.MEDIUM,\n                                isSmall: size === ModalSizes.SMALL,\n                                isShadowed: size === ModalSizes.LARGE || ModalSizes.MEDIUM || ModalSizes.SMALL,\n                            },\n                            props.className,\n                        )}\n                        ref={modalRef}\n                        onKeyDown={props.onKeyDown}\n                        onClick={props.onModalClick}\n                        aria-label={label}\n                        aria-labelledby={titleID}\n                        aria-describedby={props.description ? descriptionID : undefined}\n                    >\n                        {contents}\n                    </EntranceAnimation>\n                </div>\n            </ScrollLock>\n        </div>\n    );\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport ModalSizes from \"@library/modal/ModalSizes\";\nimport { ModalView } from \"@library/modal/ModalView\";\nimport { logWarning, debug } from \"@vanilla/utils\";\nimport React, { ReactElement } from \"react\";\nimport { TabHandler } from \"@vanilla/dom-utils\";\nimport { mountPortal } from \"@vanilla/react-utils\";\n\nReact.memo(\n    function MyComponent() {\n        return <div></div>;\n    },\n    () => {\n        return true;\n    },\n);\n\ninterface IProps {\n    id?: string;\n    className?: string;\n    exitHandler?: (event?: React.SyntheticEvent<any>) => void;\n    pageContainer?: Element | null;\n    container?: Element;\n    description?: string;\n    children: React.ReactNode;\n    elementToFocus?: HTMLElement;\n    size: ModalSizes;\n    scrollable?: boolean;\n    elementToFocusOnExit?: HTMLElement; // Should either be a specific element or use document.activeElement\n    isWholePage?: boolean;\n    isVisible: boolean;\n    afterContent?: React.ReactNode;\n    titleID?: string;\n    label?: string; // Necessary if there's no proper title\n    onKeyPress?: (e) => void;\n}\n\ninterface IState {\n    wasDestroyed: boolean;\n}\n\nexport const MODAL_CONTAINER_ID = \"modals\";\nexport const PAGE_CONTAINER_ID = \"page\";\n\n/**\n * Mount a modal from a top level context.\n *\n * If you are already in a react context, just use `<Modal />`.\n */\nexport function mountModal(node: ReactElement<any>) {\n    return mountPortal(node, MODAL_CONTAINER_ID);\n}\n\n/**\n * An accessible Modal component.\n *\n * - Renders into the `#modals` element with a React portal.\n * - Implements tab trapping.\n * - Closes with the escape key.\n * - Sets aria-hidden on the main application.\n * - Prevents scrolling of the body.\n * - Focuses the first focusable element in the Modal.\n */\nexport default class Modal extends React.Component<IProps, IState> {\n    public static stack: Modal[] = [];\n    private closeFocusElement: HTMLElement | null = null;\n    private selfRef = React.createRef<HTMLDivElement>();\n\n    public state: IState = {\n        wasDestroyed: !this.props.isVisible,\n    };\n\n    /**\n     * Render the contents into a portal.\n     */\n    public render() {\n        if (this.state.wasDestroyed) {\n            return null;\n        }\n\n        return mountPortal(\n            <>\n                <ModalView\n                    id={this.props.id}\n                    onDestroyed={this.handleDestroyed}\n                    scrollable={this.props.scrollable}\n                    onKeyDown={this.handleTabbing}\n                    onModalClick={this.handleModalClick}\n                    onOverlayClick={this.handleScrimClick}\n                    description={this.props.description}\n                    size={this.props.size}\n                    modalRef={this.selfRef}\n                    titleID={\"titleID\" in this.props ? this.props.titleID : undefined}\n                    label={\"label\" in this.props ? this.props.label : undefined}\n                    isVisible={this.props.isVisible}\n                    onKeyPress={this.props.onKeyPress}\n                >\n                    {this.props.children}\n                </ModalView>\n                {this.props.afterContent}\n            </>,\n            MODAL_CONTAINER_ID,\n            true,\n        );\n    }\n\n    /**\n     * Get a fresh instance of the TabHandler.\n     *\n     * Since the contents of the modal could be changing constantly\n     * we are creating a new instance every time we need it.\n     */\n    private get tabHandler(): TabHandler | null {\n        return this.selfRef.current ? new TabHandler(this.selfRef.current) : null;\n    }\n\n    /**\n     * Initial component setup.\n     *\n     * Everything here should be torn down in componentWillUnmount\n     */\n    public componentDidMount() {\n        const pageContainer = this.getPageContainer();\n        if (!pageContainer) {\n            logWarning(`\nA modal was mounted, but the page container could not be found.\nPlease wrap your primary content area with the ID \"${PAGE_CONTAINER_ID}\" so it can be hidden to screenreaders.\n            `);\n        }\n    }\n\n    public onMountIn = () => {\n        const pageContainer = this.getPageContainer();\n        this.setCloseFocusElement();\n        this.focusInitialElement();\n        pageContainer && pageContainer.setAttribute(\"aria-hidden\", true);\n\n        // Add the escape keyboard listener only on the first modal in the stack.\n        if (Modal.stack.length === 0) {\n            document.addEventListener(\"keydown\", this.handleDocumentEscapePress);\n        }\n        Modal.stack.push(this);\n    };\n\n    public handleDestroyed = () => {\n        // Do some quick state updates to bump the modal to the top of the portal stack.\n        // When we set this to true we render null once.\n        // The in the update we set back to false.\n        // The second render will re-create the portal.\n        this.setState({ wasDestroyed: true });\n\n        const pageContainer = this.getPageContainer();\n        // Set aria-hidden on page and reenable scrolling if we're removing the last modal\n        Modal.stack.pop();\n        if (Modal.stack.length === 0) {\n            pageContainer && pageContainer.removeAttribute(\"aria-hidden\");\n\n            // This event listener is only added once (on the top modal).\n            // So we only remove when clearing the last one.\n            document.removeEventListener(\"keydown\", this.handleDocumentEscapePress);\n        } else {\n            pageContainer && pageContainer.setAttribute(\"aria-hidden\", true);\n        }\n\n        // We were destroyed so we should focus back to the last element.\n        this.closeFocusElement?.focus();\n    };\n\n    public componentDidUpdate(prevProps: IProps, prevState: IState) {\n        if (this.props.elementToFocusOnExit !== prevProps.elementToFocusOnExit) {\n            this.setCloseFocusElement();\n        }\n\n        if (prevState.wasDestroyed && !this.state.wasDestroyed) {\n            this.onMountIn();\n        }\n\n        if (!prevProps.isVisible && this.props.isVisible) {\n            this.setState({ wasDestroyed: false });\n        }\n    }\n\n    private getPageContainer(): HTMLElement | null {\n        return document.getElementById(PAGE_CONTAINER_ID);\n    }\n\n    /**\n     * Focus the initial element in the Modal.\n     */\n    private focusInitialElement() {\n        const focusElement = this.props.elementToFocus ? this.props.elementToFocus : this.tabHandler?.getInitial();\n        if (focusElement) {\n            focusElement!.focus();\n        }\n    }\n\n    /**\n     * Set focus on element to target when we close the modal\n     */\n    private setCloseFocusElement() {\n        // if we need to rerender the component, we don't want to include a bad value in the focus history\n        if (this.props.elementToFocusOnExit) {\n            this.closeFocusElement = this.props.elementToFocusOnExit;\n        } else {\n            // Get the last focused element\n            this.closeFocusElement = document.activeElement as HTMLElement;\n        }\n\n        if (debug() && (!this.closeFocusElement || this.closeFocusElement === document.documentElement)) {\n            const message = `\nDev Mode Error: Could not detect an element to focus on <Modal /> close.\n\nIt seems auto-detection isn't working, so you'll need to specify the \"elementToFocusOnExit\" props.`;\n            throw new Error(message);\n        }\n    }\n\n    /**\n     * Handle tab keyboard presses.\n     */\n    private handleTabbing = (event: React.KeyboardEvent) => {\n        const tabKey = 9;\n\n        if (event.shiftKey && event.keyCode === tabKey) {\n            this.handleShiftTab(event);\n        } else if (!event.shiftKey && event.keyCode === tabKey) {\n            this.handleTab(event);\n        }\n    };\n\n    /**\n     * Handle escape press and close the top modal.\n     *\n     * This listener is added to the document in the event a non-focusable element inside the modal is clicked.\n     * In that case focus will be on the document.\n     *\n     * Because of this we have to be smarter and call only the top modal's escape handler.\n     */\n    private handleDocumentEscapePress = (event: React.SyntheticEvent | KeyboardEvent) => {\n        const topModal = Modal.stack[Modal.stack.length - 1];\n        const escKey = 27;\n\n        if (\"keyCode\" in event && event.keyCode === escKey) {\n            event.preventDefault();\n            event.stopPropagation();\n            if (Modal.stack.length === 1 && this.props.isWholePage) {\n                return;\n            } else {\n                if (topModal.props.exitHandler) {\n                    topModal.props.exitHandler(event as any);\n                }\n            }\n        }\n    };\n\n    /**\n     * Stop propagation of events at the top of the modal so they don't make it\n     * to the scrim click handler.\n     */\n    private handleModalClick = (event: React.MouseEvent) => {\n        event.stopPropagation();\n    };\n\n    /**\n     * Call the exit handler when the scrim is clicked directly.\n     */\n    private handleScrimClick = (event: React.MouseEvent) => {\n        event.preventDefault();\n        if (this.props.exitHandler) {\n            this.props.exitHandler(event);\n        }\n    };\n\n    /**\n     * Handle shift tab key presses.\n     *\n     * - Focuses the previous element in the modal.\n     * - Loops if we are at the beginning\n     *\n     * @param event The react event.\n     */\n    private handleShiftTab(event: React.KeyboardEvent) {\n        const nextElement = this.tabHandler?.getNext(undefined, true);\n        if (nextElement) {\n            event.preventDefault();\n\n            event.stopPropagation();\n            nextElement.focus();\n        }\n    }\n\n    /**\n     * Handle tab key presses.\n     *\n     * - Focuses the next element in the modal.\n     * - Loops if we are at the end.\n     *\n     * @param event The react event.\n     */\n    private handleTab(event: React.KeyboardEvent) {\n        const previousElement = this.tabHandler?.getNext();\n        if (previousElement) {\n            event.preventDefault();\n            event.stopPropagation();\n            previousElement.focus();\n        }\n    }\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { TLength } from \"@library/styles/styleShim\";\nimport { t } from \"@library/utility/appUtils\";\nimport { loaderClasses } from \"@library/loaders/loaderStyles\";\nimport ScreenReaderContent from \"@library/layout/ScreenReaderContent\";\nimport { style } from \"@library/styles/styleShim\";\nimport { PaddingProperty } from \"csstype\";\nimport ConditionalWrap from \"@library/layout/ConditionalWrap\";\nimport classNames from \"classnames\";\n\ninterface IProps {\n    minimumTime?: number;\n    loaderStyleClass?: string;\n    size?: number;\n    padding?: PaddingProperty<TLength>;\n    small?: boolean;\n}\n\ninterface IState {\n    showLoader: boolean;\n}\n\n/**\n * A smart loading component. Takes up the full page and only displays in certain scenarios.\n */\nexport default class Loader extends React.Component<IProps, IState> {\n    public state: IState = {\n        showLoader: false,\n    };\n\n    public render() {\n        if (this.props.minimumTime && this.props.minimumTime > 0 && !this.state.showLoader) {\n            return null;\n        }\n        const styleClass = this.props.small\n            ? loaderClasses().smallLoader\n            : this.props.loaderStyleClass || loaderClasses().fullPageLoader;\n        return (\n            <React.Fragment>\n                <ConditionalWrap\n                    condition={!!this.props.padding || !!this.props.size}\n                    className={classNames(\n                        this.props.padding && style({ padding: styleUnit(this.props.padding) }),\n                        this.props.size && loaderClasses().loaderContainer(this.props.size),\n                    )}\n                >\n                    <div className={styleClass} aria-hidden=\"true\" />\n                    <ScreenReaderContent>\n                        <p>{t(\"Loading\")}</p>\n                    </ScreenReaderContent>\n                </ConditionalWrap>\n            </React.Fragment>\n        );\n    }\n\n    private timeout: NodeJS.Timeout;\n\n    public componentDidMount() {\n        const duration = this.props.minimumTime || 150;\n        this.timeout = setTimeout(() => {\n            this.setState({ showLoader: true });\n        }, duration);\n    }\n\n    public componentWillUnmount() {\n        this.timeout && clearTimeout(this.timeout);\n    }\n}\n","/*\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { objectFitWithFallback } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { Variables } from \"@library/styles/Variables\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\nimport { CSSObject } from \"@emotion/css\";\nimport { important, percent } from \"csx\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\n\n/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nexport const userPhotoVariables = useThemeCache((forcedVars?: IThemeVariables) => {\n    const makeThemeVars = variableFactory(\"userPhoto\", forcedVars);\n    const globalVars = globalVariables();\n\n    const border = makeThemeVars(\n        \"border\",\n        Variables.border({\n            radius: \"50%\",\n            width: 1,\n            color: globalVars.mixBgAndFg(0.5).fade(0.3),\n        }),\n    );\n\n    const sizing = makeThemeVars(\"sizing\", {\n        small: 28,\n        medium: 40,\n        large: 100,\n        xlarge: 145,\n    });\n\n    return { border, sizing };\n});\n\nexport const userPhotoMixins = (vars = userPhotoVariables()) => {\n    // wrapper of image\n    const root: CSSObject = {\n        position: \"relative\",\n        overflow: \"hidden\",\n        ...Mixins.border(vars.border),\n    };\n\n    const photo = {\n        ...objectFitWithFallback(),\n        padding: important(0),\n        margin: important(0),\n        ...{\n            \"&&\": {\n                width: percent(100),\n                height: \"auto\",\n            },\n        },\n    };\n\n    const small = {\n        width: styleUnit(vars.sizing.small),\n        height: styleUnit(vars.sizing.small),\n        flexBasis: styleUnit(vars.sizing.small),\n    };\n\n    const medium = {\n        width: styleUnit(vars.sizing.medium),\n        height: styleUnit(vars.sizing.medium),\n        flexBasis: styleUnit(vars.sizing.medium),\n    };\n\n    const large = {\n        width: styleUnit(vars.sizing.large),\n        height: styleUnit(vars.sizing.large),\n        flexBasis: styleUnit(vars.sizing.large),\n    };\n\n    const xlarge = {\n        width: styleUnit(vars.sizing.xlarge),\n        height: styleUnit(vars.sizing.xlarge),\n        flexBasis: styleUnit(vars.sizing.xlarge),\n    };\n\n    return {\n        root,\n        photo,\n        small,\n        medium,\n        large,\n        xlarge,\n    };\n};\n\nexport const userPhotoClasses = useThemeCache(() => {\n    const vars = userPhotoVariables();\n    const style = styleFactory(\"userPhoto\");\n    // I'm doing this so we can import the styles in the compatibility styles.\n    const mixinStyles = userPhotoMixins(vars);\n\n    const root = style(mixinStyles.root as CSSObject);\n    const photo = style(\"photo\", mixinStyles.photo);\n    const small = style(\"small\", mixinStyles.small);\n    const medium = style(\"medium\", mixinStyles.medium);\n    const large = style(\"large\", mixinStyles.large);\n    const xlarge = style(\"large\", mixinStyles.xlarge);\n\n    const noPhoto = style(\"noPhoto\", {\n        display: \"block\",\n        ...{\n            \"&&\": {\n                width: percent(100),\n            },\n        },\n    });\n\n    return {\n        root,\n        small,\n        medium,\n        large,\n        xlarge,\n        photo,\n        noPhoto,\n    };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport {\n    absolutePosition,\n    borderRadii,\n    defaultTransition,\n    flexHelper,\n    getVerticalPaddingForTextInput,\n    importantUnit,\n    singleBorder,\n    userSelect,\n} from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { calc, important, percent, px, translateX } from \"csx\";\nimport { titleBarVariables } from \"@library/headers/TitleBar.variables\";\nimport { buttonGlobalVariables } from \"@library/forms/Button.variables\";\nimport { buttonResetMixin } from \"@library/forms/buttonMixins\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { shadowHelper } from \"@library/styles/shadowHelpers\";\nimport { inputBlockClasses } from \"@library/forms/InputBlockStyles\";\nimport { CSSObject } from \"@emotion/css\";\nimport { inputVariables } from \"@library/forms/inputStyles\";\nimport { suggestedTextStyleHelper } from \"@library/features/search/suggestedTextStyles\";\nimport { searchResultsVariables } from \"@library/features/search/searchResultsStyles\";\nimport { paddingOffsetBasedOnBorderRadius } from \"@library/forms/paddingOffsetFromBorderRadius\";\nimport { selectBoxClasses } from \"@library/forms/select/selectBoxStyles\";\nimport { SearchBarPresets } from \"@library/banner/SearchBarPresets\";\nimport { IBorderRadiusValue } from \"@library/styles/cssUtilsTypes\";\nimport { searchBarVariables } from \"./SearchBar.variables\";\n\nexport interface ISearchBarOverwrites {\n    borderRadius?: IBorderRadiusValue;\n    compact?: boolean;\n    preset?: SearchBarPresets;\n}\n\nexport const searchBarClasses = useThemeCache((overwrites?: ISearchBarOverwrites) => {\n    const style = styleFactory(\"searchBar\");\n    const shadow = shadowHelper();\n    const classesInputBlock = inputBlockClasses();\n    const vars = searchBarVariables();\n    const { compact = vars.options.compact, borderRadius = vars.border.radius, preset = vars.options.preset } =\n        overwrites || {};\n    const globalVars = globalVariables();\n    const layoutVars = layoutVariables();\n    const inputVars = inputVariables();\n    const titleBarVars = titleBarVariables();\n    const formElementVars = formElementsVariables();\n    const scopeMinWidth = compact ? vars.search.compact.minWidth : vars.search.minWidth;\n    const mediaQueries = layoutVars.mediaQueries();\n    const borderStyle = overwrites && overwrites.preset ? overwrites.preset : vars.options.preset;\n\n    const isOuterBordered = borderStyle === SearchBarPresets.BORDER;\n    const isInsetBordered = borderStyle === SearchBarPresets.NO_BORDER;\n\n    const borderColor = isInsetBordered ? vars.input.bg : vars.border.color;\n\n    const independentRoot = style(\"independentRoot\", {\n        display: \"block\",\n        height: percent(100),\n    });\n\n    const verticalPadding = getVerticalPaddingForTextInput(\n        vars.sizing.height,\n        inputVars.font.size as number,\n        formElementVars.border.width * 2,\n    );\n    const calculatedHeight = vars.sizing.height - verticalPadding * 2 - formElementVars.border.width * 2;\n\n    const borderVars = vars.border || globalVars.border;\n\n    const paddingOffset = paddingOffsetBasedOnBorderRadius({\n        radius: borderRadius,\n        extraPadding: vars.search.fullBorderRadius.extraHorizontalPadding,\n        height: vars.sizing.height,\n        side: \"right\",\n    });\n\n    const root = style({\n        cursor: \"pointer\",\n        ...{\n            \".searchBar__placeholder\": {\n                color: ColorsUtils.colorOut(vars.placeholder.color),\n                margin: \"auto\",\n                height: styleUnit(calculatedHeight),\n                lineHeight: styleUnit(calculatedHeight),\n                overflow: \"hidden\",\n                whiteSpace: \"nowrap\",\n                textOverflow: \"ellipsis\",\n                top: 0,\n                transform: \"none\",\n                cursor: \"text\",\n                // Needed otherwise you can't use copy/paste in the context menu.\n                // @see https://github.com/JedWatson/react-select/issues/612\n                // @see https://github.com/vanilla/support/issues/3252\n                pointerEvents: \"none\",\n            },\n\n            \".suggestedTextInput-valueContainer\": {\n                ...{\n                    [`.${classesInputBlock.inputText}`]: {\n                        height: \"auto\",\n                    },\n                    \"& > *\": {\n                        width: percent(100),\n                    },\n                },\n            },\n            \".searchBar-submitButton\": {\n                position: \"relative\",\n                minWidth: styleUnit(scopeMinWidth + 2),\n                flexBasis: styleUnit(scopeMinWidth),\n                minHeight: styleUnit(vars.sizing.height),\n                margin: styleUnit(-1),\n                ...{\n                    \"&:hover, &:focus\": {\n                        zIndex: 2,\n                    },\n                },\n                borderTopLeftRadius: important(0),\n                borderBottomLeftRadius: important(0),\n                borderBottomRightRadius: importantUnit(borderRadius),\n                borderTopRightRadius: importantUnit(borderRadius),\n                paddingRight: importantUnit(buttonGlobalVariables().padding.horizontal + paddingOffset.right),\n            },\n            \".wrap__control\": {\n                width: percent(100),\n            },\n            \".searchBar__control\": {\n                border: 0,\n                backgroundColor: ColorsUtils.colorOut(globalVars.elementaryColors.transparent),\n                width: percent(100),\n                flexBasis: percent(100),\n                ...{\n                    \"&.searchBar__control--is-focused\": {\n                        boxShadow: \"none\",\n                    },\n                },\n            },\n            \".searchBar__value-container\": {\n                position: \"static\",\n                overflow: \"auto\",\n                cursor: \"text\",\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n                lineHeight: styleUnit(globalVars.lineHeights.base * globalVars.fonts.size.medium),\n                fontSize: styleUnit(inputVars.font.size),\n                height: styleUnit(calculatedHeight),\n                ...{\n                    \"& > div\": {\n                        width: percent(100),\n                    },\n                },\n            },\n            \".searchBar__indicators\": {\n                display: \"none\",\n            },\n            \".searchBar__input\": {\n                width: percent(100),\n            },\n            \".searchBar__input input\": {\n                height: \"auto\",\n                minHeight: 0,\n                width: important(`100%`),\n                borderRadius: important(0),\n                lineHeight: styleUnit(globalVars.lineHeights.base * globalVars.fonts.size.medium),\n            },\n            ...mediaQueries.oneColumnDown({\n                ...{\n                    \".searchBar-submitButton\": {\n                        minWidth: 0,\n                    },\n                },\n            }),\n        },\n    });\n\n    // The styles have been split here so they can be exported to the compatibility styles.\n    const searchResultsStyles = {\n        title: {\n            ...Mixins.font({\n                size: globalVars.fonts.size.large,\n                weight: globalVars.fonts.weights.semiBold,\n                lineHeight: globalVars.lineHeights.condensed,\n            }),\n        },\n        meta: {\n            ...Mixins.font(globalVars.meta.text),\n        },\n        excerpt: {\n            marginTop: styleUnit(searchResultsVariables().excerpt.margin),\n            ...Mixins.font({\n                size: globalVars.fonts.size.medium,\n                color: vars.results.fg,\n                lineHeight: globalVars.lineHeights.excerpt,\n            }),\n        },\n    };\n\n    const results = style(\"results\", {\n        position: \"absolute\",\n        width: percent(100),\n        backgroundColor: ColorsUtils.colorOut(vars.results.bg),\n        color: ColorsUtils.colorOut(vars.results.fg),\n        ...borderRadii({\n            all: Math.min(parseInt(borderRadius.toString()), 6),\n        }),\n        ...{\n            \"&:empty\": {\n                display: important(\"none\"),\n            },\n            \".suggestedTextInput__placeholder\": {\n                color: ColorsUtils.colorOut(formElementVars.placeholder.color),\n            },\n            \".suggestedTextInput-noOptions\": {\n                padding: px(12),\n            },\n            \".suggestedTextInput-head\": {\n                ...flexHelper().middleLeft(),\n                justifyContent: \"space-between\",\n            },\n            \".suggestedTextInput-option\": suggestedTextStyleHelper().option,\n            \".suggestedTextInput-menuItems\": {\n                margin: 0,\n                padding: 0,\n            },\n            \".suggestedTextInput-item\": {\n                listStyle: \"none\",\n                ...{\n                    \"& + .suggestedTextInput-item\": {\n                        borderTop: `solid 1px ${globalVars.border.color.toString()}`,\n                    },\n                },\n            },\n            \".suggestedTextInput-title\": {\n                ...searchResultsStyles.title,\n            },\n            \".suggestedTextInput-title .suggestedTextInput-searchingFor\": {\n                fontWeight: globalVars.fonts.weights.normal,\n            },\n        },\n    } as CSSObject);\n\n    const resultsAsModal = style(\"resultsAsModal\", {\n        position: \"absolute\",\n        top: styleUnit(vars.sizing.height),\n        left: 0,\n        overflow: \"hidden\",\n        boxSizing: \"border-box\",\n        ...shadow.dropDown(),\n        zIndex: 2,\n    });\n\n    const clear = style(\"clear\", {\n        position: \"relative\",\n        display: \"flex\",\n        boxSizing: \"border-box\",\n        height: styleUnit(vars.sizing.height),\n        width: styleUnit(vars.sizing.height),\n        color: ColorsUtils.colorOut(globalVars.mixBgAndFg(0.78)),\n        transform: translateX(`${styleUnit(4)}`),\n        ...{\n            \"&, &.buttonIcon\": {\n                border: \"none\",\n                boxShadow: \"none\",\n            },\n            \"&:hover\": {\n                color: ColorsUtils.colorOut(vars.stateColors.hover),\n            },\n            \"&:focus\": {\n                color: ColorsUtils.colorOut(vars.stateColors.focus),\n            },\n        },\n    });\n\n    const mainConditionalStyles = isInsetBordered\n        ? {\n              padding: `0 ${styleUnit(borderVars.width)}`,\n          }\n        : {};\n\n    const main = style(\"main\", {\n        flexGrow: 1,\n        position: \"relative\",\n        borderRadius: 0,\n        ...mainConditionalStyles,\n        ...{\n            \"&&.withoutButton.withoutScope\": {\n                ...borderRadii({\n                    right: borderRadius,\n                    left: borderRadius,\n                }),\n            },\n            \"&&.withButton.withScope\": {\n                ...borderRadii({\n                    left: borderRadius,\n                }),\n            },\n            \"&&.withoutButton.withScope\": {\n                ...borderRadii({\n                    right: borderRadius,\n                }),\n            },\n            \"&&.withButton.withoutScope\": {\n                ...borderRadii({\n                    left: borderRadius,\n                    right: 0,\n                }),\n            },\n            \"&.isFocused\": {\n                zIndex: isOuterBordered ? 3 : 1,\n            },\n            \"&.isHovered\": {\n                zIndex: isOuterBordered ? 3 : undefined,\n            },\n        },\n    });\n\n    const valueContainerConditionalStyles = isInsetBordered\n        ? {\n              position: \"absolute\",\n              top: 0,\n              left: 0,\n              height: calc(`100% - 2px`),\n              minHeight: calc(`100% - 2px`),\n              width: calc(`100% - 2px`),\n              margin: styleUnit(1),\n          }\n        : {\n              height: percent(100),\n          };\n\n    const valueContainer = style(\"valueContainer\", {\n        ...{\n            \"&&&\": {\n                ...valueContainerConditionalStyles,\n                display: \"flex\",\n                alignItems: \"center\",\n                backgroundColor: ColorsUtils.colorOut(vars.input.bg),\n                color: ColorsUtils.colorOut(vars.input.fg),\n                cursor: \"text\",\n                flexWrap: \"nowrap\",\n                justifyContent: \"flex-start\",\n                borderRadius: 0,\n                zIndex: isInsetBordered ? 2 : undefined,\n                ...defaultTransition(\"border-color\"),\n                ...Mixins.border({\n                    color: borderColor,\n                }),\n                ...borderRadii({\n                    all: borderRadius,\n                }),\n            },\n            \"&&&:not(.isFocused)\": {\n                borderColor: isInsetBordered ? ColorsUtils.colorOut(vars.input.bg) : vars.border.color,\n            },\n            \"&&&:not(.isFocused).isHovered\": {\n                borderColor: ColorsUtils.colorOut(vars.stateColors.hover),\n            },\n            [`&&&&.isFocused .${main}`]: {\n                borderColor: ColorsUtils.colorOut(vars.stateColors.hover),\n            },\n\n            // -- Text Input Radius --\n            // Both sides round\n            \"&&.inputText.withoutButton.withoutScope\": {\n                paddingLeft: styleUnit(vars.searchIcon.gap),\n                ...borderRadii({\n                    all: borderRadius,\n                }),\n            },\n            // Right side flat\n            \"&&.inputText.withButton.withoutScope\": {\n                paddingLeft: styleUnit(vars.searchIcon.gap),\n                paddingRight: styleUnit(vars.searchIcon.gap),\n                ...borderRadii({\n                    left: borderRadius,\n                    right: 0,\n                }),\n            },\n            [`&&.inputText.withButton.withoutScope .${clear}`]: {\n                ...absolutePosition.topRight(),\n                bottom: 0,\n                ...Mixins.margin({\n                    vertical: \"auto\",\n                }),\n                transform: translateX(styleUnit(vars.border.width * 2)),\n            },\n            // Both sides flat\n            \"&&.inputText.withButton.withScope\": {\n                ...borderRadii({\n                    left: 0,\n                }),\n            },\n            // Left side flat\n            \"&&.inputText.withoutButton.withScope:not(.compactScope)\": {\n                paddingRight: styleUnit(vars.searchIcon.gap),\n            },\n            \"&&.inputText.withoutButton.withScope\": {\n                ...borderRadii({\n                    right: borderRadius,\n                    left: 0,\n                }),\n            },\n        },\n    } as CSSObject);\n\n    // Has a search button attached.\n    const compoundValueContainer = style(\"compoundValueContainer\", {\n        ...{\n            \"&&\": {\n                borderTopRightRadius: important(0),\n                borderBottomRightRadius: important(0),\n            },\n        },\n    });\n\n    const actionButton = style(\"actionButton\", {\n        marginLeft: -borderVars.width,\n    });\n\n    const label = style(\"label\", {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n    });\n\n    const scopeSeparatorStyle = isOuterBordered\n        ? {\n              display: \"none\",\n          }\n        : {\n              ...absolutePosition.topRight(),\n              bottom: 0,\n              margin: \"auto 0\",\n              height: percent(90),\n              width: styleUnit(borderVars.width),\n              borderRight: singleBorder({\n                  color: borderVars.color,\n              }),\n          };\n\n    const scopeSeparator = style(\"scopeSeparator\", scopeSeparatorStyle);\n\n    const content = style(\"content\", {\n        display: \"flex\",\n        alignItems: \"stretch\",\n        justifyContent: \"flex-start\",\n        position: \"relative\",\n        backgroundColor: ColorsUtils.colorOut(vars.input.bg),\n        width: percent(100),\n        height: percent(100),\n        ...{\n            \"&&.withoutButton.withoutScope\": {\n                ...borderRadii({\n                    all: borderRadius,\n                }),\n            },\n            \"&&.withButton.withScope\": {},\n            \"&&.withoutButton.withScope\": {\n                ...borderRadii({\n                    all: borderRadius,\n                }),\n            },\n            \"&&.withButton.withoutScope\": {\n                ...borderRadii({\n                    left: borderRadius,\n                    right: 0,\n                }),\n            },\n            [`&.hasFocus .${scopeSeparator}`]: {\n                display: \"none\",\n            },\n            [`&.hasFocus .${valueContainer}`]: {\n                borderColor: ColorsUtils.colorOut(vars.stateColors.focus),\n            },\n        },\n    });\n\n    // special selector\n    const heading = style(\"heading\", {\n        ...{\n            \"&&\": {\n                marginBottom: styleUnit(vars.heading.margin),\n            },\n        },\n    });\n\n    const icon = style(\"icon\", {});\n\n    const iconContainer = (alignRight?: boolean) => {\n        const { compact = false } = overwrites || {};\n        const horizontalPosition = styleUnit(compact ? vars.scope.compact.padding : vars.scope.padding);\n\n        const conditionalStyle = alignRight\n            ? {\n                  right: horizontalPosition,\n              }\n            : {\n                  left: horizontalPosition,\n              };\n\n        return style(\"iconContainer\", {\n            ...buttonResetMixin(),\n            // ...pointerEvents(), // messes with hover of input. It'll click on the input anyways\n            position: \"absolute\",\n            top: 0,\n            bottom: 0,\n            ...conditionalStyle,\n            height: percent(100),\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            zIndex: 5,\n            outline: 0,\n            color: ColorsUtils.colorOut(vars.searchIcon.fg),\n            ...{\n                [`.${icon}`]: {\n                    width: styleUnit(vars.searchIcon.width),\n                    height: styleUnit(vars.searchIcon.height),\n                },\n                [`&&& + .searchBar-valueContainer`]: {\n                    paddingLeft: styleUnit(vars.searchIcon.gap),\n                },\n                \"&:hover\": {\n                    color: ColorsUtils.colorOut(vars.stateColors.hover),\n                },\n                \"&:focus\": {\n                    color: ColorsUtils.colorOut(vars.stateColors.focus),\n                },\n            },\n        });\n    };\n\n    const iconContainerBigInput = style(\"iconContainerBig\", {\n        ...{\n            \"&&\": {\n                height: styleUnit(vars.sizing.height),\n            },\n        },\n    });\n\n    const menu = style(\"menu\", {\n        display: \"flex\",\n        alignItems: \"flex-start\",\n        justifyContent: \"flex-start\",\n        ...{\n            \"&.hasFocus .searchBar-valueContainer\": {\n                borderColor: ColorsUtils.colorOut(vars.stateColors.focus),\n            },\n            \"&&\": {\n                position: \"relative\",\n            },\n            \".searchBar__menu-list\": {\n                maxHeight: calc(`100vh - ${styleUnit(titleBarVars.sizing.height)}`),\n                width: percent(100),\n            },\n            \".searchBar__input\": {\n                color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n                width: percent(100),\n                display: important(\"block\"),\n                ...{\n                    input: {\n                        width: important(percent(100).toString()),\n                        lineHeight: globalVars.lineHeights.base,\n                    },\n                },\n            },\n            \".suggestedTextInput-menu\": {\n                borderRadius: styleUnit(globalVars.border.radius),\n                marginTop: styleUnit(-formElementVars.border.width),\n                marginBottom: styleUnit(-formElementVars.border.width),\n            },\n            \"&:empty\": {\n                display: \"none\",\n            },\n        },\n    });\n\n    const scopeSelect = style(\"scopeSelect\", {\n        display: \"flex\",\n        width: calc(\"100%\"),\n        height: calc(\"100%\"),\n        justifyContent: \"center\",\n        alignItems: \"stretch\",\n        ...{\n            \".selectBox-dropDown\": {\n                position: \"relative\",\n                padding: isInsetBordered ? styleUnit(vars.border.width) : undefined,\n                width: percent(100),\n                height: percent(100),\n            },\n        },\n    });\n\n    const scopeToggleConditionalStyles = isInsetBordered\n        ? {\n              position: \"absolute\",\n              top: 0,\n              left: 0,\n              height: calc(`100% - 2px`),\n              width: calc(`100% - 2px`),\n              margin: styleUnit(vars.noBorder.offset),\n          }\n        : {\n              width: percent(100),\n              height: percent(100),\n          };\n\n    const scopeToggle = style(\"scopeToggle\", {\n        display: \"flex\",\n        justifyContent: \"stretch\",\n        alignItems: \"center\",\n        lineHeight: \"2em\",\n        flexWrap: \"nowrap\",\n        ...scopeToggleConditionalStyles,\n        ...Mixins.border({\n            color: borderColor,\n        }),\n        ...userSelect(),\n        backgroundColor: ColorsUtils.colorOut(globalVars.mainColors.bg),\n        ...Mixins.padding({\n            horizontal: compact ? vars.scope.compact.padding : vars.scope.padding,\n        }),\n        outline: 0,\n        ...borderRadii({\n            left: borderRadius,\n            right: 0,\n        }),\n        ...{\n            [`.${selectBoxClasses().buttonIcon}`]: {\n                width: styleUnit(vars.scopeIcon.width),\n                flexBasis: styleUnit(vars.scopeIcon.width),\n                height: styleUnit(vars.scopeIcon.width * vars.scopeIcon.ratio),\n                margin: \"0 0 0 auto\",\n                color: ColorsUtils.colorOut(vars.input.fg),\n            },\n            \"&:focus, &:hover, &:active, &.focus-visible\": {\n                zIndex: 3,\n            },\n            \"&:hover\": {\n                borderColor: ColorsUtils.colorOut(vars.stateColors.hover),\n            },\n            \"&:active\": {\n                borderColor: ColorsUtils.colorOut(vars.stateColors.active),\n            },\n            \"&:focus, &.focus-visible\": {\n                borderColor: ColorsUtils.colorOut(vars.stateColors.focus),\n            },\n\n            // Nested above doesn't work\n            [`&:focus .${scopeSeparator},\n                &:hover .${scopeSeparator},\n                &:active .${scopeSeparator},\n                &.focus-visible .${scopeSeparator}`]: {\n                display: \"none\",\n            },\n        },\n    } as CSSObject);\n\n    const scopeLabelWrap = style(\"scopeLabelWrap\", {\n        display: \"flex\",\n        textOverflow: \"ellipsis\",\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        lineHeight: 2,\n        color: ColorsUtils.colorOut(vars.input.fg),\n    });\n\n    const scope = style(\"scope\", {\n        position: \"relative\",\n        minHeight: styleUnit(vars.sizing.height),\n        width: styleUnit(compact ? vars.scope.compact.width : vars.scope.width),\n        flexBasis: styleUnit(compact ? vars.scope.compact.width : vars.scope.width),\n        display: \"flex\",\n        alignItems: \"stretch\",\n        justifyContent: \"flex-start\",\n        backgroundColor: ColorsUtils.colorOut(globalVars.mainColors.bg),\n        paddingRight: isInsetBordered ? styleUnit(vars.border.width) : undefined,\n        transform: isOuterBordered ? translateX(styleUnit(vars.border.width)) : undefined,\n        zIndex: isOuterBordered ? 2 : undefined,\n        ...borderRadii({\n            left: borderRadius,\n            right: 0,\n        }),\n        ...{\n            [`\n                &.isOpen .${scopeSeparator},\n                &.isActive .${scopeSeparator}\n            `]: {\n                display: \"none\",\n            },\n            [`.${scopeSelect}`]: {\n                ...borderRadii({\n                    left: borderRadius,\n                    right: 0,\n                }),\n            },\n            [`.selectBox-dropDown`]: {\n                ...borderRadii({\n                    left: borderRadius,\n                    right: 0,\n                }),\n            },\n            [`.${scopeToggle}`]: {\n                ...borderRadii({\n                    left: borderRadius,\n                    right: 0,\n                }),\n            },\n            [`&.isCompact .${scopeToggle}`]: {\n                paddingLeft: styleUnit(12),\n                paddingRight: styleUnit(12),\n            },\n            [`& + .${main}`]: {\n                maxWidth: calc(`100% - ${styleUnit(compact ? vars.scope.compact.width : vars.scope.width)}`),\n                flexBasis: calc(`100% - ${styleUnit(compact ? vars.scope.compact.width : vars.scope.width)}`),\n            },\n        },\n    });\n\n    const wrap = style(\"wrap\", {\n        display: \"flex\",\n        height: percent(100),\n        width: percent(100),\n    });\n\n    const form = style(\"form\", {\n        display: \"flex\",\n        width: percent(100),\n        flexWrap: \"nowrap\",\n        alignItems: \"center\",\n    });\n\n    const closeButton = style(\"closeButton\", {\n        marginLeft: styleUnit(6),\n        borderRadius: \"6px\",\n    });\n\n    const compactIcon = style(\"compactIcon\", {\n        ...{\n            \"&&\": {\n                width: styleUnit(vars.searchIcon.width),\n                height: styleUnit(vars.searchIcon.height),\n            },\n        },\n    });\n\n    const standardContainer = style(\"standardContainer\", {\n        display: \"block\",\n        position: \"relative\",\n        height: styleUnit(vars.sizing.height),\n    });\n\n    const firstItemBorderTop = style(\"firstItemBorderTop\", {\n        borderTop: `solid 1px ${globalVars.border.color.toString()}`,\n    });\n\n    return {\n        root,\n        independentRoot,\n        compoundValueContainer,\n        valueContainer,\n        actionButton,\n        label,\n        clear,\n        form,\n        content,\n        heading,\n        iconContainer,\n        iconContainerBigInput,\n        icon,\n        results,\n        resultsAsModal,\n        menu,\n        searchResultsStyles, // for compatibility\n        scope,\n        scopeToggle,\n        scopeSeparator,\n        scopeSelect,\n        scopeLabelWrap,\n        closeButton,\n        wrap,\n        main,\n        compactIcon,\n        standardContainer,\n        firstItemBorderTop,\n    };\n});\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport React, { useContext } from \"react\";\nimport { ISelectBoxItem } from \"@library/forms/select/SelectBox\";\n\nexport const SEARCH_SCOPE_LOCAL = \"site\";\nexport const SEARCH_SCOPE_EVERYWHERE = \"hub\";\n\ninterface ISearchScope {\n    optionsItems: ISelectBoxItem[];\n    value?: ISelectBoxItem;\n    onChange?: (value: ISelectBoxItem) => void;\n    setValue?: (value: string) => void;\n    compact?: boolean;\n}\n\nexport interface ISearchScopeNoCompact extends Omit<ISearchScope, \"compact\"> {}\n\nexport const SearchScopeContext = React.createContext<ISearchScope>({\n    optionsItems: [],\n});\n\nexport function useSearchScope() {\n    return useContext(SearchScopeContext);\n}\n\nconst emptyItems = [];\n\nexport function EmptySearchScopeProvider(props: { children: React.ReactNode }) {\n    return (\n        <SearchScopeContext.Provider\n            value={{\n                optionsItems: emptyItems,\n            }}\n        >\n            {props.children}\n        </SearchScopeContext.Provider>\n    );\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { percent } from \"csx\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { CSSObject } from \"@emotion/css\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { ISpacing } from \"@library/styles/cssUtilsTypes\";\n\nexport const containerVariables = useThemeCache(() => {\n    const vars = layoutVariables();\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"containerVariables\");\n\n    let spacing = makeThemeVars(\"spacing\", {\n        padding: globalVars.constants.fullGutter / 2,\n        mobile: {\n            padding: globalVars.widget.padding,\n        },\n    });\n\n    const sizing = makeThemeVars(\"sizes\", {\n        full: vars.contentWidth,\n        narrowContentSize: vars.contentSizes.narrow,\n    });\n\n    const colors = makeThemeVars(\"colors\", {\n        bg: globalVars.mainColors.bg,\n    });\n\n    return {\n        sizing,\n        colors,\n        spacing,\n    };\n});\n\nexport const containerMainStyles = (): CSSObject => {\n    const vars = containerVariables();\n    return {\n        display: \"flex\",\n        flexDirection: \"column\",\n        position: \"relative\",\n        boxSizing: \"border-box\",\n        width: percent(100),\n        maxWidth: styleUnit(vars.sizing.full + vars.spacing.padding * 2),\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        ...Mixins.padding({\n            horizontal: vars.spacing.padding,\n        }),\n        \"&.isNarrow\": {\n            maxWidth: vars.sizing.narrowContentSize,\n        },\n    };\n};\n\nexport function containerMainMediaQueries() {\n    const mediaQueries = layoutVariables().mediaQueries();\n    const vars = containerVariables();\n    return mediaQueries.oneColumnDown({\n        ...Mixins.padding({\n            horizontal: vars.spacing.mobile.padding,\n        }),\n    });\n}\n\nexport const containerClasses = useThemeCache((options?: { desktopSpacing?: ISpacing; maxWidth?: number }) => {\n    const style = styleFactory(\"container\");\n    const mediaQueries = layoutVariables().mediaQueries();\n    const vars = containerVariables();\n    const root = style(containerMainStyles(), containerMainMediaQueries());\n\n    const fullGutter = style(\n        \"fullGutter\",\n        {\n            ...containerMainStyles(),\n            ...Mixins.padding({\n                horizontal: vars.spacing.padding * 2,\n            }),\n            ...(options?.maxWidth ? { maxWidth: options.maxWidth } : {}),\n        },\n        options?.desktopSpacing && Mixins.padding(options.desktopSpacing),\n        mediaQueries.oneColumnDown({\n            ...Mixins.padding({\n                horizontal: vars.spacing.mobile.padding * 2,\n            }),\n        }),\n    );\n\n    return { root, fullGutter };\n});\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { t } from \"@library/utility/appUtils\";\nimport { buttonLoaderClasses } from \"@library/forms/buttonStyles\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport ScreenReaderContent from \"@library/layout/ScreenReaderContent\";\nimport { LoaderIcon } from \"@library/icons/common\";\nimport classNames from \"classnames\";\n\ninterface IProps {\n    className?: string;\n    buttonType?: ButtonTypes;\n    alignLeft?: boolean;\n}\n\n/**\n * A smart loading component. Takes up the full page and only displays in certain scenarios.\n */\nexport default function ButtonLoader(props: IProps) {\n    const classes = buttonLoaderClasses();\n    return (\n        <span\n            className={classNames(\n                classes.root(props.alignLeft ? \"left\" : \"center\"),\n                props.buttonType?.startsWith(\"dashboard\") && classes.reducedPadding,\n            )}\n        >\n            <LoaderIcon className={classes.svg} />\n            <ScreenReaderContent>{t(\"Loading\")}</ScreenReaderContent>\n        </span>\n    );\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useContext, useCallback } from \"react\";\nimport { formatUrl } from \"@library/utility/appUtils\";\nimport { createPath, LocationDescriptor, LocationDescriptorObject } from \"history\";\nimport { useHistory } from \"react-router\";\n\nexport interface IWithLinkContext {\n    linkContexts: string[];\n    pushSmartLocation(location: LocationDescriptor);\n    isDynamicNavigation(location: LocationDescriptor): boolean;\n    makeHref(location: LocationDescriptor): string;\n}\n\nconst defaultMakeHref = (location: LocationDescriptor) => {\n    const stringUrl = typeof location === \"string\" ? location : createPath(location);\n    return formatUrl(stringUrl, true);\n};\nexport const LinkContext = React.createContext<IWithLinkContext>({\n    linkContexts: [formatUrl(\"/\")],\n    pushSmartLocation: (location) => {\n        const href = defaultMakeHref(location);\n        window.location.href = href;\n    },\n    isDynamicNavigation: () => {\n        return false;\n    },\n    makeHref: defaultMakeHref,\n});\n\ninterface IProps {\n    linkContexts: string[];\n    children: React.ReactNode;\n    urlFormatter?: (url: string, withDomain?: boolean) => string;\n}\n\nexport const LinkContextProvider = (props: IProps) => {\n    const history = useHistory();\n    const { urlFormatter, linkContexts } = props;\n\n    const makeHref = useCallback(\n        (location: LocationDescriptor): string => {\n            const finalUrlFormatter = urlFormatter ? urlFormatter : formatUrl;\n            const stringUrl = typeof location === \"string\" ? location : createPath(location);\n            const href = finalUrlFormatter(stringUrl, true);\n            return href;\n        },\n        [urlFormatter],\n    );\n\n    /**\n     * Determine if the URL is one that we are able to navigate to dynamically.\n     *\n     * This should be true if we are nested inside of or are the linkContext.\n     * The current URL is excluded so that a click on your own page does something the user can see.\n     *\n     * @param href The URL to check.\n     */\n    const isDynamicNavigation = useCallback(\n        (href: string): boolean => {\n            const link = new URL(href, window.location.href);\n            const isCurrentPage = link.pathname === window.location.pathname && link.search === window.location.search;\n\n            let matchesContext = false;\n            for (const context of linkContexts) {\n                if (href.startsWith(context)) {\n                    matchesContext = true;\n                    break;\n                }\n            }\n\n            return matchesContext && !isCurrentPage;\n        },\n        [linkContexts],\n    );\n\n    const pushSmartLocation = useCallback(\n        (location: LocationDescriptor) => {\n            const href = makeHref(location);\n            if (isDynamicNavigation(href)) {\n                history.push(makeLocationDescriptorObject(location, href));\n            } else {\n                window.location.href = href;\n            }\n        },\n        [makeHref, isDynamicNavigation, history],\n    );\n\n    return (\n        <LinkContext.Provider\n            value={{\n                linkContexts: props.linkContexts,\n                pushSmartLocation,\n                isDynamicNavigation,\n                makeHref,\n            }}\n        >\n            {props.children}\n        </LinkContext.Provider>\n    );\n};\n\nexport function useLinkContext() {\n    return useContext(LinkContext);\n}\n\n/**\n * Create a new LocationDescriptor with a \"relative\" path.\n *\n * This way we ensure we use react-router's navigation and not a full refresh.\n *\n * @param initial The starting location. We may want to preserve state here if we can.\n * @param newHref The new string url to point to.\n */\nexport function makeLocationDescriptorObject(initial: LocationDescriptor, newHref: string): LocationDescriptorObject {\n    // Get the search and pathName\n    const link = new URL(newHref, window.location.href);\n    const { search, pathname } = link;\n\n    const appRelativeLink = pathname.replace(formatUrl(\"/\"), \"/\");\n\n    if (typeof initial === \"string\") {\n        return {\n            pathname: appRelativeLink,\n            search,\n        };\n    } else {\n        return {\n            ...initial,\n            pathname: appRelativeLink,\n            search,\n        };\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { metasVariables } from \"@library/styles/metasStyles\";\nimport { negativeUnit, objectFitWithFallback, singleBorder } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { calc, important, percent } from \"csx\";\nimport { BorderBottomProperty } from \"csstype\";\nimport { CSSObject } from \"@emotion/css\";\nimport { TLength } from \"@library/styles/styleShim\";\nimport { LayoutTypes } from \"@library/layout/types/interface.layoutTypes\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { Variables } from \"@library/styles/Variables\";\n\n/**\n * @varGroup searchResults\n * @commonTitle Search Results\n * @description Controls search results\n */\nexport const searchResultsVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"searchResults\");\n\n    const colors = makeThemeVars(\"colors\", {\n        /**\n         * @var searchResults.colors.fg\n         * @title Foreground Color\n         * @description Defaults to the globally set main foreground color.\n         * @type string\n         * @format hex-color\n         */\n        fg: globalVars.mainColors.fg,\n    });\n\n    const title = makeThemeVars(\"title\", {\n        /**\n         * @varGroup searchResults.title.font\n         * @commonTitle Search Results Font\n         * @expand font\n         */\n        font: Variables.font({\n            color: colors.fg,\n            size: globalVars.fonts.size.large,\n            weight: globalVars.fonts.weights.semiBold,\n            lineHeight: globalVars.lineHeights.condensed,\n        }),\n    });\n\n    const excerpt = makeThemeVars(\"excerpt\", {\n        /**\n         * @var searchResults.excerpt.fg\n         * @title Excerpt Color\n         * @description Excerpt foreground color. Defaults to the globally set foreground color.\n         * @type string\n         * @format hex-color\n         */\n        fg: globalVars.mainColors.fg,\n        /**\n         * @var searchResults.excerpt.margin\n         * @title Excerpt Margin\n         * @description Sets the margin of the excerpt\n         * @type string\n         */\n        margin: \"0.7em\",\n    });\n\n    const image = makeThemeVars(\"image\", {\n        border: {\n            /**\n             * @var searchResults.image.border.color\n             * @title Excerpt Image Border Color\n             * @description Sets the border color of the excerpt image\n             * @type string\n             * @format hex-color\n             */\n            color: globalVars.mixBgAndFg(0.1),\n        },\n    });\n\n    /**\n     * @varGroup searchResults.icon\n     * @commonTitle  Icon\n     */\n    const icon = makeThemeVars(\"icon\", {\n        /**\n         * @var searchResults.icon.size\n         * @title Size\n         * @description Sets the size of the icon\n         * @type number\n         */\n        size: 26,\n\n        /**\n         * @var searchResults.icon.bg\n         * @title Background Color\n         * @description Sets the background color of the icon\n         * @type string\n         * @format hex-color\n         */\n        bg: ColorsUtils.colorOut(globalVars.mixBgAndFg(0.1)),\n    });\n\n    /**\n     * @varGroup searchResults.separator\n     * @commonTitle  Separator\n     * @commonDescription Refers to the border of the result\n     */\n    const separator = makeThemeVars(\"separator\", {\n        /**\n         * @var searchResults.separator.fg\n         * @title Foreground color\n         * @description Sets the foreground color of the separator\n         * @type string\n         * @format hex-color\n         */\n        fg: globalVars.separator.color,\n        /**\n         * @var searchResults.separator.width\n         * @title Width\n         * @description Sets the width of the separator\n         * @type number\n         */\n        width: globalVars.separator.size,\n    });\n\n    const spacing = makeThemeVars(\"spacing\", {\n        /**\n         * @varGroup searchResults.spacing.padding\n         * @commonTitle Spacing: Padding\n         * @expand spacing\n         */\n        padding: globalVars.itemList.padding,\n    });\n\n    const mediaElement = makeThemeVars(\"mediaElement\", {\n        width: 190,\n        height: 106.875,\n        margin: 15,\n        compact: {\n            ratio: (9 / 16) * 100,\n        },\n    });\n\n    return {\n        colors,\n        title,\n        excerpt,\n        image,\n        separator,\n        spacing,\n        icon,\n        mediaElement,\n    };\n});\n\nexport const searchResultsClasses = useThemeCache((mediaQueries) => {\n    const vars = searchResultsVariables();\n    const globalVars = globalVariables();\n    const style = styleFactory(\"searchResults\");\n\n    const root = style({\n        display: \"block\",\n        position: \"relative\",\n        borderTop: singleBorder({\n            color: vars.separator.fg,\n            width: vars.separator.width,\n        }),\n        marginTop: negativeUnit(globalVars.gutter.half),\n        ...mediaQueries({\n            [LayoutTypes.TWO_COLUMNS]: {\n                oneColumnDown: {\n                    borderTop: 0,\n                },\n            },\n            [LayoutTypes.THREE_COLUMNS]: {\n                oneColumnDown: {\n                    borderTop: 0,\n                },\n            },\n        }),\n    });\n\n    const noResults = style(\"noResults\", {\n        fontSize: globalVars.userContent.font.sizes.default,\n    });\n\n    const item = style(\"item\", {\n        position: \"relative\",\n        display: \"block\",\n        userSelect: \"none\",\n        borderBottom: singleBorder({\n            color: vars.separator.fg,\n            width: vars.separator.width,\n        }) as BorderBottomProperty<TLength>,\n    });\n\n    const result = style(\"result\", {\n        position: \"relative\",\n        display: \"flex\",\n        alignItems: \"flex-start\",\n        width: percent(100),\n    });\n\n    return {\n        root,\n        noResults,\n        item,\n        result,\n    };\n});\n\nexport const searchResultClasses = useThemeCache((mediaQueries, hasIcon = false) => {\n    const vars = searchResultsVariables();\n    const globalVars = globalVariables();\n    const style = styleFactory(\"searchResult\");\n    const metaVars = metasVariables();\n\n    const linkColors = Mixins.clickable.itemState({ skipDefault: true });\n\n    const title = style(\"title\", {\n        display: \"block\",\n        ...Mixins.font(vars.title.font),\n        overflow: \"hidden\",\n        flexGrow: 1,\n        margin: 0,\n        paddingRight: styleUnit(24),\n        ...linkColors,\n    });\n\n    // This is so 100% is the space within the padding of the root element\n    const content = style(\"contents\", {\n        display: \"flex\",\n        alignItems: \"stretch\",\n        justifyContent: \"space-between\",\n        width: percent(100),\n        color: ColorsUtils.colorOut(vars.title.font.color),\n        ...mediaQueries({\n            [LayoutTypes.TWO_COLUMNS]: {\n                oneColumnDown: {\n                    flexWrap: \"wrap\",\n                },\n            },\n            [LayoutTypes.THREE_COLUMNS]: {\n                oneColumnDown: {\n                    flexWrap: \"wrap\",\n                },\n            },\n        }),\n    });\n\n    const root = style({\n        display: \"block\",\n        width: percent(100),\n        ...Mixins.padding(vars.spacing.padding),\n    });\n\n    const mediaWidth = vars.mediaElement.width + vars.mediaElement.margin;\n    const iconWidth = hasIcon ? vars.icon.size + (vars.spacing.padding.left as number) : 0;\n\n    const mainCompactStyles = {\n        ...{\n            \"&.hasMedia\": {\n                width: percent(100),\n            },\n            \"&.hasIcon\": {\n                width: calc(`100% - ${styleUnit(iconWidth)}`),\n            },\n            \"&.hasMedia.hasIcon\": {\n                width: calc(`100% - ${styleUnit(iconWidth)}`),\n            },\n        },\n    };\n\n    const main = style(\"main\", {\n        display: \"block\",\n        width: percent(100),\n        ...{\n            \"&.hasMedia\": {\n                width: calc(`100% - ${styleUnit(mediaWidth)}`),\n            },\n            \"&.hasIcon\": {\n                width: calc(`100% - ${styleUnit(iconWidth)}`),\n            },\n            \"&.hasMedia.hasIcon\": {\n                width: calc(`100% - ${styleUnit(mediaWidth + iconWidth)}`),\n            },\n            ...mediaQueries({\n                [LayoutTypes.TWO_COLUMNS]: {\n                    oneColumnDown: mainCompactStyles,\n                },\n                [LayoutTypes.THREE_COLUMNS]: {\n                    oneColumnDown: mainCompactStyles,\n                },\n            }),\n        },\n    });\n\n    const image = style(\"image\", {\n        ...objectFitWithFallback(),\n    });\n\n    const compactMediaElement = style(\"compactMediaElement\", {\n        ...{\n            [`.${image}`]: {\n                position: important(\"absolute\"),\n            },\n        },\n    });\n\n    const mediaElement = style(\"mediaElement\", {\n        position: \"relative\",\n        width: styleUnit(vars.mediaElement.width),\n        height: styleUnit(vars.mediaElement.height),\n        overflow: \"hidden\",\n        ...{\n            [`&.${compactMediaElement}`]: {\n                overflow: \"hidden\",\n                position: \"relative\",\n                marginTop: styleUnit(globalVars.gutter.size),\n                paddingTop: percent(vars.mediaElement.compact.ratio),\n                width: percent(100),\n            },\n        },\n    });\n\n    const attachmentCompactStyles: CSSObject = {\n        flexWrap: \"wrap\",\n        width: percent(100),\n        marginTop: styleUnit(12),\n    };\n\n    const attachments = style(\"attachments\", {\n        display: \"flex\",\n        flexWrap: \"nowrap\",\n        ...mediaQueries({\n            [LayoutTypes.TWO_COLUMNS]: {\n                oneColumnDown: attachmentCompactStyles,\n            },\n            [LayoutTypes.THREE_COLUMNS]: {\n                oneColumnDown: attachmentCompactStyles,\n            },\n        }),\n    });\n\n    const metas = style(\"metas\", {\n        marginTop: styleUnit(2),\n        ...Mixins.margin({\n            left: -metaVars.spacing.default,\n        }),\n        width: calc(`100% + ${styleUnit(metaVars.spacing.default * 2)}`),\n    });\n\n    const compactExcerpt = style(\"compactExcerpt\", {});\n\n    const excerpt = style(\"excerpt\", {\n        marginTop: styleUnit(vars.excerpt.margin),\n        color: ColorsUtils.colorOut(vars.excerpt.fg),\n        lineHeight: globalVars.lineHeights.excerpt,\n        ...{\n            [`&.${compactExcerpt}`]: {\n                ...Mixins.margin({\n                    top: globalVars.gutter.size,\n                    left: iconWidth,\n                }),\n            },\n        },\n    });\n\n    const link = style(\"link\", {\n        color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n        ...linkColors,\n    });\n\n    const afterExcerptLink = style(\"afterExcerptLink\", {\n        ...Mixins.font(globalVars.meta.text),\n        ...linkColors,\n    });\n\n    const iconWrap = style(\"iconWrap\", {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        backgroundColor: ColorsUtils.colorOut(vars.icon.bg),\n        borderRadius: \"50%\",\n        width: styleUnit(vars.icon.size),\n        height: styleUnit(vars.icon.size),\n        cursor: \"pointer\",\n    });\n\n    const commentWrap = style(\"commentWrap\", {\n        display: \"flex\",\n        marginTop: styleUnit(globalVars.gutter.size),\n    });\n\n    return {\n        root,\n        main,\n        mediaElement,\n        compactMediaElement,\n        image,\n        title,\n        attachments,\n        metas,\n        excerpt,\n        compactExcerpt,\n        afterExcerptLink,\n        attachmentCompactStyles,\n        link,\n        iconWrap,\n        commentWrap,\n        content,\n    };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { IOptionalComponentID, useUniqueID } from \"@library/utility/idUtils\";\nimport classNames from \"classnames\";\nimport { inputBlockClasses } from \"@library/forms/InputBlockStyles\";\nimport { capitalizeFirstLetter } from \"@vanilla/utils\";\n\ninterface IError {\n    message: string;\n    [key: string]: any;\n}\n\ninterface IProps extends IOptionalComponentID {\n    className?: string;\n    errors?: IError[];\n    padded?: boolean;\n}\n\nexport default function ErrorMessages(props: IProps) {\n    const ownID = useUniqueID(\"errorMessages\");\n    const id = props.id ?? ownID;\n    const { errors, padded } = props;\n    const classesInputBlock = inputBlockClasses();\n    if (errors && errors.length > 0) {\n        const componentClasses = classNames(\n            classesInputBlock.errors,\n            props.className,\n            padded && classesInputBlock.errorsPadding,\n        );\n\n        const errorList = errors.map((error, index) => {\n            return (\n                <span key={index} className={classesInputBlock.error}>\n                    {capitalizeFirstLetter(error.message)}\n                </span>\n            );\n        });\n\n        return (\n            <span id={id} className={componentClasses}>\n                {errorList}\n            </span>\n        );\n    } else {\n        return null;\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { iconClasses } from \"@library/icons/iconStyles\";\nimport { areaHiddenType } from \"@library/styles/styleHelpersVisibility\";\nimport { SearchIcon } from \"./titleBar\";\nimport { t } from \"@vanilla/i18n/src\";\n\nexport function TypeAllIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType; centred?: boolean }) {\n    const classes = iconClasses();\n    return <SearchIcon {...props} className={classNames(classes.typeAll, props.className)} />;\n}\n\nexport function TypeDiscussionsIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            className={classNames(classes.typeDiscussions, props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 18.869 15.804\"\n        >\n            <title>{t(\"Discussions\")}</title>\n            <path\n                d=\"M18.911,8.991a7.516,7.516,0,0,0-3.346-1.476c-.607-2.508-3.854-4.13-6.544-4.13h0c-3.8,0-6.952,2.446-6.952,5.572a4.9,4.9,0,0,0,1.453,3.417l-.484,1.97a.772.772,0,0,0,1.092.875l2.242-1.106a8.334,8.334,0,0,0,.894.235,5.371,5.371,0,0,0,1.8,2.522,7.876,7.876,0,0,0,4.92,1.63,8.447,8.447,0,0,0,2.649-.417l2.242,1.106.608-2.845a4.932,4.932,0,0,0,1.453-3.417A5.038,5.038,0,0,0,18.911,8.991ZM6.321,13.018l-2.533,1.51.764-2.4A4.184,4.184,0,0,1,3.062,8.96c0-2.652,2.546-4.58,5.959-4.58s5.362,1.986,5.362,2.98c0,.007.017.022.024.032-.141-.006-.278-.033-.421-.033A7.877,7.877,0,0,0,9.061,8.99a5.038,5.038,0,0,0-2.027,3.94c0,.134.013.265.024.4C6.831,13.238,6.616,13.129,6.321,13.018Zm12.361,2.729-.106.1-.4,1.886L16.7,17.011l-.2.07a7.4,7.4,0,0,1-2.515.43,6.881,6.881,0,0,1-4.3-1.415A4.073,4.073,0,0,1,8.027,12.93,4.068,4.068,0,0,1,9.682,9.765a6.88,6.88,0,0,1,4.3-1.414,6.867,6.867,0,0,1,4.3,1.415,4.066,4.066,0,0,1,1.655,3.164A3.923,3.923,0,0,1,18.682,15.747Z\"\n                transform=\"translate(-2.069 -3.385)\"\n                style={{ fill: \"currentColor\" }}\n            />\n        </svg>\n    );\n}\n\nexport function TypeArticlesIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            className={classNames(classes.typeArticles, props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 14.666 14.666\"\n        >\n            <title>{t(\"Articles\")}</title>\n            <path\n                d=\"M17.417,3.667a.916.916,0,0,1,.916.916h0V17.417a.916.916,0,0,1-.916.916H4.583a.916.916,0,0,1-.916-.916h0V4.583a.916.916,0,0,1,.916-.916Zm0,.916H4.583V17.417H17.417ZM12.833,13.75v.917H6.417V13.75Zm2.75-1.833v.916H6.417v-.916ZM11,6.417V11H6.417V6.417Zm4.583,3.666V11H11.917v-.917Zm-5.5-2.75H7.333v2.75h2.75Zm5.5.917v.917H11.917V8.25Zm0-1.833v.916H11.917V6.417Z\"\n                transform=\"translate(-3.667 -3.667)\"\n                style={{ fill: \"currentColor\", fillRule: \"evenodd\" }}\n            />\n        </svg>\n    );\n}\n\nexport function TypeCategoriesAndGroupsIcon(props: {\n    className?: string;\n    \"aria-hidden\"?: areaHiddenType;\n    title?: string;\n}) {\n    const classes = iconClasses();\n    return (\n        <svg\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            className={classNames(classes.typeCategoriesAndGroups, props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n        >\n            <title>{props.title ?? t(\"Categories & Groups\")}</title>\n            <defs>\n                <filter id=\"2etungn3ea\">\n                    <feColorMatrix in=\"SourceGraphic\" values=\"currentColor\" />\n                </filter>\n            </defs>\n            <g style={{ fill: \"none\", fillRule: \"evenodd\" }}>\n                <g filter=\"url(#2etungn3ea)\" transform=\"translate(-120 -263)\">\n                    <g>\n                        <g style={{ stroke: \"currentColor\", strokeWidth: \".667px\" }}>\n                            <path\n                                d=\"M10.654 8.896l2.574 1.417L7.47 13.69l-6.328-3.265c.136-.062.325-.138.472-.229.665-.414 1.606-.935 2.262-1.296.653.384 1.95 1.066 2.692 1.44.57.242 2.371-.575 3.611-1.205.173-.088.333-.169.475-.239h0z\"\n                                transform=\"translate(120 263) translate(1.333 .667)\"\n                            />\n                            <path\n                                d=\"M10.389 5.695l2.84 1.562-5.759 3.377-6.33-3.266c.15-.068.366-.157.537-.262.717-.442 1.73-1.003 2.438-1.393 1.007.713 3.073 1.62 3.15 1.62.052 0 .924-.386 1.852-.895.614-.344.987-.562 1.272-.743h0z\"\n                                transform=\"translate(120 263) translate(1.333 .667)\"\n                            />\n                            <path\n                                d=\"M7.066.734l6.146 3.171L7.47 7.273 1.324 4.102 7.066.734z\"\n                                transform=\"translate(120 263) translate(1.333 .667)\"\n                            />\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </svg>\n    );\n}\n\nexport function TypeMemberIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            className={classNames(classes.typeMember, props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 20 20\"\n        >\n            <title>{t(\"Members\")}</title>\n            <path\n                d=\"M13.49,11.415l.064.015a8.462,8.462,0,0,1,4.354,3.113,11.459,11.459,0,0,1-.034,3.156,1.016,1.016,0,0,1-.756.3H2.861a1.016,1.016,0,0,1-.756-.3,11.428,11.428,0,0,1,.013-3.156A9.494,9.494,0,0,1,6.471,11.43a.232.232,0,0,1,.193.012A7.144,7.144,0,0,0,9.99,12.675a7.339,7.339,0,0,0,3.372-1.233.234.234,0,0,1,.192-.012ZM10.012,2c1.974,0,3.575,1.029,3.575,4.395,0,2.427-1.6,4.394-3.575,4.394S6.437,8.822,6.437,6.4C6.437,3.029,8.038,2,10.013,2Z\"\n                style={{ fill: \"none\", stroke: \"currentColor\" }}\n            />\n        </svg>\n    );\n}\n\nexport function TypeCategoriesIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    return <TypeCategoriesAndGroupsIcon {...props} title={t(\"Categories\")} />;\n}\n\nexport function TypeIdeasIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            className={classNames(classes.typeIdeasIcon, props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 18.444 16.791\"\n        >\n            <title>{t(\"Ideas\")}</title>\n            <path\n                d=\"M14.618,20.686a.388.388,0,0,1,0,.753H11.381a.387.387,0,0,1,0-.753h3.237Zm.79-1.793a.377.377,0,1,1,0,.753H10.592a.377.377,0,1,1,0-.753h4.817ZM13,5.148a5.544,5.544,0,0,1,5.623,5.434,5.406,5.406,0,0,1-1.861,4.028l-.06.058a4.1,4.1,0,0,0-.79,2.718.367.367,0,0,1-.1.254.341.341,0,0,1-.243.1H10.411a.385.385,0,0,1-.243-.1.319.319,0,0,1-.1-.254,3.988,3.988,0,0,0-.79-2.718,5.4,5.4,0,0,1-1.9-4.085A5.546,5.546,0,0,1,13,5.148Zm-.02.645a4.849,4.849,0,0,0-4.936,4.77,4.7,4.7,0,0,0,1.7,3.6,4.44,4.44,0,0,1,1.01,2.893h4.47a4.471,4.471,0,0,1,.951-2.815c0-.02.04-.058.061-.078a4.68,4.68,0,0,0,1.679-3.6A4.848,4.848,0,0,0,12.979,5.793Zm-.472.77a4.345,4.345,0,0,1,4.522,4.187.357.357,0,0,1-.712,0,3.677,3.677,0,0,0-3.81-3.527.331.331,0,1,1,0-.66Z\"\n                transform=\"translate(-3.84 -4.898)\"\n                style={{ fill: \"currentColor\", stroke: \"currentColor\", strokeWidth: \"0.5px\" }}\n            />\n            <path\n                d=\"M19.658,5.213a.542.542,0,0,1,.766.767L19.341,7.063a.542.542,0,1,1-.766-.766l1.083-1.083ZM22.28,9.979a.542.542,0,0,1-.471.6l-1.521.186a.542.542,0,1,1-.132-1.075l1.52-.187A.542.542,0,0,1,22.28,9.979ZM4.438,9.38l1.524.16a.542.542,0,0,1-.113,1.078l-1.524-.16a.542.542,0,0,1,.113-1.079ZM5.521,5.316a.541.541,0,0,1,.762-.08L7.474,6.2a.542.542,0,0,1-.682.842L5.6,6.077a.54.54,0,0,1-.08-.761Z\"\n                transform=\"translate(-3.84 -4.898)\"\n                style={{ fill: \"currentColor\", fillRule: \"evenodd\" }}\n            />\n        </svg>\n    );\n}\n\nexport function TypePollsIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            className={classNames(classes.typePollsIcon, props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 26 26\"\n        >\n            <title>{t(\"Polls\")}</title>\n            <rect\n                x=\"4.603\"\n                y=\"14.818\"\n                width=\"8.938\"\n                height=\"4.063\"\n                rx=\"1.3\"\n                style={{ fill: \"none\", stroke: \"currentColor\", strokeWidth: \"0.9750000238418579px\" }}\n            />\n            <rect\n                x=\"4.604\"\n                y=\"6.987\"\n                width=\"5.958\"\n                height=\"4.063\"\n                rx=\"1.3\"\n                style={{ fill: \"none\", stroke: \"currentColor\", strokeWidth: \"0.9750000238418579px\" }}\n            />\n            <path\n                d=\"M18.211,9.062H13.955\"\n                style={{\n                    fill: \"none\",\n                    stroke: \"currentColor\",\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: \"1.4620000123977661px\",\n                }}\n            />\n            <path\n                d=\"M12.083,9.062l2.043-2.031v4.063Z\"\n                style={{\n                    fill: \"currentColor\",\n                    stroke: \"currentColor\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: \"0.7310000061988831px;fill-rule: evenodd\",\n                }}\n            />\n            <path\n                d=\"M15.4,16.681h4.256\"\n                style={{\n                    fill: \"none\",\n                    stroke: \"currentColor\",\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: \"1.4620000123977661px\",\n                }}\n            />\n            <path\n                d=\"M21.526,16.681l-2.043,2.031V14.649Z\"\n                style={{\n                    fill: \"currentColor\",\n                    stroke: \"currentColor\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: \"0.7310000061988831px;fill-rule: evenodd\",\n                }}\n            />\n        </svg>\n    );\n}\n\nexport function TypeQuestionIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            className={classNames(classes.typeQuestion, props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 26 26\"\n        >\n            <title>{t(\"Question\")}</title>\n            <path\n                d=\"M13.245,15.427v-.34a1.756,1.756,0,0,1,.238-.973,4.438,4.438,0,0,1,.94-.914,8.084,8.084,0,0,0,1.159-1.042,2.689,2.689,0,0,0,.668-1.849,2.465,2.465,0,0,0-.868-2,3.547,3.547,0,0,0-2.348-.726,6.653,6.653,0,0,0-3.284.853l.634,1.33a9.357,9.357,0,0,1,1.193-.492,4.2,4.2,0,0,1,1.329-.2,1.9,1.9,0,0,1,1.215.34,1.174,1.174,0,0,1,.423.973,1.655,1.655,0,0,1-.26.936,5.8,5.8,0,0,1-1.16,1.1,3.941,3.941,0,0,0-1.056,1.14,2.844,2.844,0,0,0-.3,1.382v.483h1.479ZM12.565,19a1.074,1.074,0,0,0,.828-.313,1.205,1.205,0,0,0,.29-.85,1.159,1.159,0,0,0-.287-.841,1.093,1.093,0,0,0-.83-.3,1,1,0,0,0-1.11,1.14,1.2,1.2,0,0,0,.287.857,1.074,1.074,0,0,0,.823.306Z\"\n                style={{ fill: \"currentColor\" }}\n            />\n            <circle\n                cx=\"13\"\n                cy=\"13\"\n                r=\"8.667\"\n                style={{ fill: \"none\", stroke: \"currentColor\", strokeWidth: \"1.083px\" }}\n            />\n        </svg>\n    );\n}\n\nexport function TypeFlagIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            className={classNames(classes.typeFlag, props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 20 20\"\n        >\n            <title>{t(\"Flag\")}</title>\n            <path\n                strokeLinecap=\"round\"\n                d=\"M0.595 0.417L0.595 14.5\"\n                transform=\"translate(5) rotate(-11 12.731 -4.133)\"\n                style={{ fill: \"none\", stroke: \"currentColor\", strokeWidth: \".833px\" }}\n            />\n            <path\n                d=\"M2.305 1.25L7.916 1.25 5.63 3.847 7.916 6.445 0.643 6.445 0.643 1.25z\"\n                transform=\"translate(5) rotate(-11 12.731 -4.133)\"\n                style={{ fill: \"none\", stroke: \"currentColor\", strokeWidth: \".833px\" }}\n            />\n            <ellipse\n                cx=\"4.286\"\n                cy=\"16.429\"\n                rx=\"4.286\"\n                ry=\"1.429\"\n                style={{ fill: \"none\", stroke: \"currentColor\", strokeWidth: \".833px\" }}\n                transform=\"translate(5)\"\n            />\n        </svg>\n    );\n}\n\nexport function TypePlacesIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType; title?: string }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            className={classNames(classes.typePlaces, props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 15.122 16.416\"\n        >\n            <title>{props.title ?? t(\"Places\")}</title>\n            <defs>\n                <filter id=\"2etungn3ea\">\n                    <feColorMatrix in=\"SourceGraphic\" values=\"currentColor\" />\n                </filter>\n            </defs>\n            <g style={{ fill: \"none\", fillRule: \"evenodd\" }}>\n                <g filter=\"url(#2etungn3ea)\" transform=\"translate(-120 -263)\">\n                    <g>\n                        <g style={{ stroke: \"currentColor\", strokeWidth: \".667px\" }}>\n                            <path\n                                d=\"M10.654 8.896l2.574 1.417L7.47 13.69l-6.328-3.265c.136-.062.325-.138.472-.229.665-.414 1.606-.935 2.262-1.296.653.384 1.95 1.066 2.692 1.44.57.242 2.371-.575 3.611-1.205.173-.088.333-.169.475-.239h0z\"\n                                transform=\"translate(120 263) translate(1.333 .667)\"\n                            />\n                            <path\n                                d=\"M10.389 5.695l2.84 1.562-5.759 3.377-6.33-3.266c.15-.068.366-.157.537-.262.717-.442 1.73-1.003 2.438-1.393 1.007.713 3.073 1.62 3.15 1.62.052 0 .924-.386 1.852-.895.614-.344.987-.562 1.272-.743h0z\"\n                                transform=\"translate(120 263) translate(1.333 .667)\"\n                            />\n                            <path\n                                d=\"M7.066.734l6.146 3.171L7.47 7.273 1.324 4.102 7.066.734z\"\n                                transform=\"translate(120 263) translate(1.333 .667)\"\n                            />\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </svg>\n    );\n}\n\nexport function TypeGroupsIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            className={classNames(classes.typeGroups, props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 17 16\"\n        >\n            <title>{t(\"Groups\")}</title>\n            <g style={{ fill: \"none\", stroke: \"currentColor\", strokeWidth: \".867px\", fillRule: \"evenodd\" }}>\n                <g style={{ fill: \"none\", stroke: \"currentColor\", strokeWidth: \"0.0.64px\", fillRule: \"nonzero\" }}>\n                    <g>\n                        <g>\n                            <path\n                                d=\"M5.182 4.218l.028.006c.674.185 1.298.65 1.873 1.395.053.092.057 1.33-.015 1.414-.072.085-.193.135-.325.135h0H.61c-.132 0-.253-.05-.325-.135C.214 6.95.238 5.711.291 5.62c.374-.558.998-1.022 1.873-1.395.026-.01.059-.008.083.006.34.197.865.553 1.43.553s1.11-.356 1.45-.553c.024-.014.056-.016.083-.006zM3.687 0c.85 0 1.538.46 1.538 1.969 0 1.087-.689 1.969-1.538 1.969-.85 0-1.538-.882-1.538-1.97C2.15.462 2.838 0 3.687 0z\"\n                                transform=\"translate(-625 -263) translate(625 263) translate(8.533 4.8)\"\n                            />\n                        </g>\n                        <g>\n                            <path\n                                d=\"M5.182 4.218l.028.006c.674.185 1.298.65 1.873 1.395.053.092.057 1.33-.015 1.414-.072.085-.193.135-.325.135h0H.61c-.132 0-.253-.05-.325-.135C.214 6.95.238 5.711.291 5.62c.374-.558.998-1.022 1.873-1.395.026-.01.059-.008.083.006.34.197.865.553 1.43.553s1.11-.356 1.45-.553c.024-.014.056-.016.083-.006zM3.687 0c.85 0 1.538.46 1.538 1.969 0 1.087-.689 1.969-1.538 1.969-.85 0-1.538-.882-1.538-1.97C2.15.462 2.838 0 3.687 0z\"\n                                transform=\"translate(-625 -263) translate(625 263) translate(0 4.8)\"\n                            />\n                        </g>\n                        <g fill=\"#FFF\">\n                            <path\n                                d=\"M7.403 6.026l.04.009c.962.264 1.854.928 2.675 1.992.076.132.082 1.9-.02 2.02-.103.121-.277.193-.465.193h0-8.76c-.188 0-.362-.072-.464-.193-.103-.12-.07-1.888.007-2.02.533-.796 1.425-1.46 2.675-1.992.038-.015.084-.012.118.008.487.28 1.237.79 2.044.79.807 0 1.585-.51 2.072-.79.034-.02.08-.023.118-.008zM5.267 0C6.48 0 7.464.658 7.464 2.813c0 1.553-.984 2.812-2.197 2.812S3.07 4.365 3.07 2.813C3.07.658 4.054 0 5.267 0z\"\n                                transform=\"translate(-625 -263) translate(625 263) translate(2.667 2.667)\"\n                            />\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </svg>\n    );\n}\n\nexport function TypeKnowledgeBaseIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classes = iconClasses();\n    return (\n        <svg\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            className={classNames(classes.typeKnowledgeBase, props.className)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n        >\n            <title>{t(\"Knowledge Base\")}</title>\n            <g style={{ fill: \"none\", fillRule: \"evenodd\" }}>\n                <g style={{ stroke: \"currentColor\" }}>\n                    <g>\n                        <g transform=\"translate(-243 -263) translate(243 263) translate(3 2)\">\n                            <path style={{ strokeWidth: \"0.64px\" }} d=\"M1.75 0L1.75 8.565\" />\n                            <rect style={{ strokeWidth: \"0.64px\" }} width=\"9.1\" height=\"10.541\" x=\".35\" rx=\".8\" />\n                            <path\n                                style={{ strokeWidth: \"0.64px\" }}\n                                d=\"M.35 9.882s0-1.317 1.4-1.317h6.3c.933 0 1.4-.44 1.4-1.318\"\n                            />\n                            <path\n                                style={{ strokeWidth: \"0.72px\", strokeLinecap: \"round\" }}\n                                d=\"M3.5 2.965L7 2.965M3.5 4.282L7 4.282\"\n                            />\n                            <path\n                                style={{ fill: \"currentColor\", strokeWidth: \"0.64px\" }}\n                                d=\"M2.45 8.565L2.45 11.765 3.15 11.125 3.85 11.765 3.85 8.565z\"\n                            />\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </svg>\n    );\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { dropDownClasses } from \"@library/flyouts/dropDownStyles\";\nimport DropDownItem from \"@library/flyouts/items/DropDownItem\";\nimport ModalLink from \"@library/modal/ModalLink\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport classNames from \"classnames\";\nimport { LocationDescriptor } from \"history\";\nimport React from \"react\";\nimport { CheckIcon, DropDownMenuIcon, CheckCompactIcon } from \"@library/icons/common\";\n\nexport interface IDropDownItemLink {\n    to: LocationDescriptor;\n    name?: string;\n    children?: React.ReactNode;\n    className?: string;\n    lang?: string;\n    isChecked?: boolean;\n    isActive?: boolean;\n}\n\n/**\n * Implements link type of item for DropDownMenu\n */\nexport default class DropDownItemLink extends React.Component<IDropDownItemLink> {\n    public render() {\n        const { children, name, className, to } = this.props;\n        const linkContents = children ? children : name;\n        const classes = dropDownClasses();\n        return (\n            <DropDownItem className={classNames(className, classes.item)}>\n                <SmartLink\n                    to={to}\n                    title={name}\n                    lang={this.props.lang}\n                    className={classNames(classes.action, this.props.isActive && classes.actionActive)}\n                >\n                    {linkContents}\n                    {this.props.isChecked && <CheckCompactIcon className={classes.check} aria-hidden={true} />}\n                </SmartLink>\n            </DropDownItem>\n        );\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useState } from \"react\";\nimport { IUser, IUserFragment } from \"@library/@types/api/users\";\nimport { userPhotoClasses } from \"@library/headers/mebox/pieces/userPhotoStyles\";\nimport classNames from \"classnames\";\nimport { UserIcon, UserIconTypes } from \"@library/icons/titleBar\";\nimport { accessibleLabel } from \"@library/utility/appUtils\";\n\nexport enum UserPhotoSize {\n    SMALL = \"small\",\n    MEDIUM = \"medium\",\n    LARGE = \"large\",\n    XLARGE = \"xlarge\",\n}\n\ninterface IProps {\n    className?: string;\n    size?: UserPhotoSize;\n    styleType?: UserIconTypes;\n    userInfo: IUserFragment;\n}\n\n/**\n * Implements User Photo Component\n */\nexport function UserPhoto(props: IProps) {\n    const { className, userInfo = {} as IUserFragment, size, styleType } = props;\n    const { name, photoUrl } = userInfo;\n    const classes = userPhotoClasses();\n    const [badImage, setBadImage] = useState(!photoUrl);\n\n    let sizeClass = classes.small;\n    switch (size) {\n        case UserPhotoSize.XLARGE:\n            sizeClass = classes.xlarge;\n            break;\n        case UserPhotoSize.LARGE:\n            sizeClass = classes.large;\n            break;\n        case UserPhotoSize.MEDIUM:\n            sizeClass = classes.medium;\n            break;\n    }\n\n    const commonProps = {\n        title: name,\n        alt: accessibleLabel(`User: \"%s\"`, [name]),\n    };\n\n    return (\n        <div className={classNames(className, sizeClass, classes.root, { isOpen: open })}>\n            {!badImage ? (\n                <img\n                    {...commonProps}\n                    src={photoUrl}\n                    className={classNames(classes.photo)}\n                    onError={(e) => {\n                        setBadImage(true);\n                    }}\n                />\n            ) : (\n                <UserIcon\n                    {...commonProps}\n                    styleType={styleType}\n                    className={classNames(classes.photo, classes.noPhoto)}\n                />\n            )}\n        </div>\n    );\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { frameBodyClasses } from \"@library/layout/frame/frameBodyStyles\";\nimport classNames from \"classnames\";\n\nexport interface IFrameBodyProps {\n    className?: string;\n    selfPadded?: boolean;\n    hasVerticalPadding?: boolean;\n    children: React.ReactNode;\n    scrollable?: boolean; // DON'T use at the same time as the Modal scrollable.\n}\n\n/**\n * This section goes between the header/footer.\n * Note the each child will be split into a separate \"FramePanel\". This will allow animations/transitions in the future.\n */\nexport default class FrameBody extends React.PureComponent<IFrameBodyProps> {\n    public render() {\n        const classes = frameBodyClasses();\n        return (\n            <div\n                className={classNames(\"frameBody\", this.props.className, classes.root, {\n                    isSelfPadded: this.props.selfPadded,\n                    hasVerticalPadding: this.props.hasVerticalPadding,\n                })}\n            >\n                {this.props.children}\n            </div>\n        );\n    }\n}\n\ninterface ILayoutContainer extends React.HTMLAttributes<HTMLDivElement> {\n    children?: React.ReactNode;\n}\n/**\n * Container to apply paddings inside of a frame body.\n */\nexport function FrameBodyContainer(props: ILayoutContainer) {\n    const classes = frameBodyClasses();\n    return <div {...props} className={classNames(props.className, classes.framePaddings)} />;\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { frameClasses } from \"@library/layout/frame/frameStyles\";\nimport classNames from \"classnames\";\nimport { TouchScrollable } from \"react-scrolllock\";\nimport { inheritHeightClass } from \"@library/styles/styleHelpers\";\nimport { cx } from \"@library/styles/styleShim\";\n\ninterface IProps {\n    className?: string;\n    header?: React.ReactNode;\n    body: React.ReactNode;\n    footer?: React.ReactNode;\n    canGrow?: boolean; // Use this when the parent has a fixed height we want to fill.\n    bodyWrapClass?: string;\n    scrollable?: boolean;\n}\n\n/**\n * Generic \"frame\" component. A frame is our generic term for flyouts or modals,\n * since they often use similar components.\n */\nexport default function Frame(props: IProps) {\n    const { scrollable = true } = props;\n    const classes = frameClasses();\n\n    let content = props.body;\n    if (scrollable) {\n        content = (\n            <TouchScrollable>\n                <div className={classNames(classes.bodyWrap, props.bodyWrapClass)}>{content}</div>\n            </TouchScrollable>\n        );\n    }\n\n    return (\n        <section className={cx(\"frame\", classes.root, props.className, props.canGrow && inheritHeightClass())}>\n            {props.header && <div className={classes.headerWrap}> {props.header}</div>}\n            {content}\n            <div className={classes.footerWrap}>{props.footer}</div>\n        </section>\n    );\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport Heading, { ICommonHeadingProps } from \"@library/layout/Heading\";\nimport { frameHeaderClasses } from \"@library/layout/frame/frameHeaderStyles\";\nimport { t } from \"@library/utility/appUtils\";\nimport Button from \"@library/forms/Button\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport CloseButton from \"@library/navigation/CloseButton\";\nimport classNames from \"classnames\";\nimport backLinkClasses from \"@library/routing/links/backLinkStyles\";\nimport { LeftChevronIcon } from \"@library/icons/common\";\n\nexport interface IFrameHeaderProps extends ICommonHeadingProps {\n    closeFrame?: (e) => void; // Necessary when in modal, but not if in flyouts\n    onBackClick?: () => void;\n    titleClass?: string;\n    srOnlyTitle?: boolean;\n    titleID?: string;\n    children?: React.ReactNode;\n    borderless?: boolean;\n}\n\n/**\n * Generic header for frame\n */\nexport default class FrameHeader extends React.PureComponent<IFrameHeaderProps> {\n    public static defaultProps = {\n        heading: 2,\n        srOnlyTitle: false,\n    };\n\n    public render() {\n        const backTitle = t(\"Back\");\n        const classes = frameHeaderClasses();\n\n        let backLink;\n        if (this.props.onBackClick) {\n            backLink = (\n                <Button\n                    title={backTitle}\n                    aria-label={backTitle}\n                    baseClass={ButtonTypes.ICON_COMPACT}\n                    onClick={this.props.onBackClick}\n                    className={classNames(\"frameHeader-backButton\", classes.backButton)}\n                >\n                    <LeftChevronIcon className={classNames(classes.backButtonIcon)} centred={true} />\n                </Button>\n            );\n        }\n\n        let closeButton;\n        if (this.props.closeFrame) {\n            closeButton = (\n                <div className={classes.action}>\n                    <CloseButton className={classes.close} onClick={this.props.closeFrame} compact />\n                </div>\n            );\n        }\n\n        return (\n            <header\n                className={classNames(\n                    \"frameHeader\",\n                    this.props.className,\n                    classes.root,\n                    this.props.borderless && classes.rootBorderLess,\n                )}\n            >\n                <Heading\n                    id={this.props.titleID}\n                    title={this.props.title}\n                    depth={this.props.depth}\n                    className={classNames(\"frameHeader-heading\", classes.heading, this.props.titleClass, {\n                        \"sr-only\": this.props.srOnlyTitle,\n                    })}\n                >\n                    {backLink}\n                    {this.props.title}\n                </Heading>\n                {this.props.children}\n                {closeButton}\n            </header>\n        );\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useContext, useDebugValue } from \"react\";\nimport { logWarning } from \"@vanilla/utils\";\nimport { style } from \"@library/styles/styleShim\";\n\ntype ScollOffsetSetter = (offset: number) => void;\n\ninterface IContextParams {\n    setScrollOffset: ScollOffsetSetter;\n    resetScrollOffset: () => void;\n    scrollOffset: number | null;\n    offsetClass: string;\n    getCalcedHashOffset(): number;\n    hashOffsetRef: React.RefObject<HTMLDivElement>;\n    temporarilyDisabledWatching: (duration: number) => void;\n    topOffset: number;\n    setTopOffset(pixels: number): void;\n}\n\nexport const SCROLL_OFFSET_DEFAULTS: IContextParams = {\n    setScrollOffset: () => {\n        logWarning(\"Set scroll offset called, but a proper provider was not configured.\");\n    },\n    resetScrollOffset: () => {\n        logWarning(\"Reset scroll offset called, but a proper provider was not configured.\");\n    },\n    scrollOffset: null,\n    topOffset: 0,\n    setTopOffset: (pixels: number) => {\n        logWarning(\"Set scroll offset called, but a proper provider was not configured.\");\n    },\n    getCalcedHashOffset: () => 0,\n    temporarilyDisabledWatching: () => {\n        logWarning(\"Attempted to disable watching but a proper provider was not configured.\");\n    },\n    hashOffsetRef: {\n        current: null,\n    },\n    offsetClass: \"\",\n};\n\nexport const ScrollOffsetContext = React.createContext<IContextParams>({\n    ...SCROLL_OFFSET_DEFAULTS,\n});\n\nexport interface IWithScrollOffset {\n    setScrollOffset: ScollOffsetSetter;\n}\n\ninterface IProps {\n    scrollWatchingEnabled?: boolean;\n    children: React.ReactNode;\n}\n\ninterface IState {\n    scrollOffset: number;\n    topOffset: number;\n    isScrolledOff: boolean;\n    hashOffset: number;\n    isWatchingEnabled: boolean;\n}\n\nwindow.__VANILLA_GLOBAL_SCROLL_OFFSET__ = 0;\n\n/**\n * Provider for handling a global scroll offset.\n * This wraps `ScrollOffset.Provider` with some good default behaviour.\n *\n * Using this, you can have one component declare an offset value.\n * Other components can then recieve this value through context.\n * The context itself handles watching the scroll position and provides a CSS Class styling for the offset.\n *\n * Using the CSS class provided out of this context will translate the set value into translateY value.\n * @see setScrollOffset\n */\nexport class ScrollOffsetProvider extends React.Component<IProps, IState> {\n    public state: IState = {\n        scrollOffset: 0,\n        topOffset: 0,\n        isScrolledOff: false,\n        hashOffset: 0,\n        isWatchingEnabled: true,\n    };\n\n    private hashOffsetRef = React.createRef<HTMLDivElement>();\n\n    /**\n     * @inheritdoc\n     */\n    public render() {\n        const { scrollWatchingEnabled } = this.props;\n\n        // Generate a CSS based on our calculated values.\n        const { scrollOffset, isScrolledOff } = this.state;\n        const offsetClass = style({\n            transition: \"transform 0.3s ease\",\n            willChange: \"transform\",\n            transform: isScrolledOff ? `translateY(-${scrollOffset}px)` : \"none\",\n            label: \"offsetClass\",\n        });\n\n        // Render out the context with all values and methods.\n        return (\n            <ScrollOffsetContext.Provider\n                value={{\n                    setScrollOffset: this.setScrollOffset,\n                    resetScrollOffset: this.resetScrollOffset,\n                    scrollOffset: isScrolledOff && scrollWatchingEnabled ? scrollOffset : 0,\n                    topOffset: this.state.topOffset,\n                    setTopOffset: this.setTopOffset,\n                    offsetClass: scrollWatchingEnabled ? offsetClass : \"\",\n                    getCalcedHashOffset: this.getCalcedHashOffset,\n                    hashOffsetRef: this.hashOffsetRef,\n                    temporarilyDisabledWatching: this.temporarilyDisabledWatching,\n                }}\n            >\n                {this.props.children}\n            </ScrollOffsetContext.Provider>\n        );\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public componentDidMount() {\n        window.addEventListener(\"scroll\", this.scrollHandler);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public componentWillUnmount() {\n        window.removeEventListener(\"scroll\", this.scrollHandler);\n    }\n\n    private get shouldWatchScroll() {\n        return this.props.scrollWatchingEnabled && this.state.isWatchingEnabled;\n    }\n\n    private temporarilyDisabledWatching = (duration: number) => {\n        this.setState({ isWatchingEnabled: false });\n        setTimeout(() => {\n            this.setState({ isWatchingEnabled: true });\n        }, duration);\n    };\n\n    /** Keep a local copy of our previous window scroll value. */\n    private previousScrollValue = 0;\n\n    private scrollHandler = () => {\n        // Early bailout if we aren't watching scroll position.\n        if (!this.shouldWatchScroll) {\n            return;\n        }\n\n        // Trigger the scrolled state if we've moved up or down by a certain number of pixels.\n        requestAnimationFrame(() => {\n            const wiggleRoom = 10;\n            const newScrolledValue = window.scrollY;\n\n            // Always show if we are within the initial scrolloffset.\n            if (newScrolledValue < 400) {\n                this.setState({ isScrolledOff: false });\n                return;\n            }\n\n            const isScrollingDown = newScrolledValue > this.previousScrollValue + wiggleRoom;\n            const isScrollingUp = newScrolledValue < this.previousScrollValue - wiggleRoom;\n            this.previousScrollValue = window.scrollY;\n            if (isScrollingDown) {\n                this.setState({ isScrolledOff: true });\n            } else if (isScrollingUp) {\n                this.setState({ isScrolledOff: false });\n            }\n        });\n    };\n\n    /**\n     * Reset the context state.\n     */\n    private resetScrollOffset = () => {\n        this.setState({\n            scrollOffset: 0,\n            isScrolledOff: false,\n        });\n    };\n\n    /**\n     * Set the value items will be translated by.\n     */\n    private setScrollOffset: ScollOffsetSetter = (offset) => {\n        window.__VANILLA_GLOBAL_SCROLL_OFFSET__ = offset;\n        this.setState({ scrollOffset: offset });\n    };\n\n    /**\n     * Set the value items will be translated by.\n     */\n    private setTopOffset: ScollOffsetSetter = (offset) => {\n        this.setState({ topOffset: offset });\n    };\n\n    private getCalcedHashOffset = (): number => {\n        const offsetElement = this.hashOffsetRef.current;\n        if (!offsetElement) {\n            return 0;\n        }\n\n        const rect = offsetElement.getBoundingClientRect();\n        return rect.bottom;\n    };\n}\n\nexport function useScrollOffset() {\n    const value = useContext(ScrollOffsetContext);\n    useDebugValue(value);\n    return value;\n}\n\n/**\n * Component that reports it's bottom most position to the scroll offset provider.\n *\n * Eg. If you click a link #some-hash and an element with the ID `some-hash` is present in the page\n * that item will stay below the HashOffsetReporter.\n */\nexport function HashOffsetReporter(props: { className?: string; children: React.ReactNode }) {\n    const offset = useScrollOffset();\n    return (\n        <div className={props.className} ref={offset.hashOffsetRef}>\n            {props.children}\n        </div>\n    );\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { inputClasses } from \"@library/forms/inputStyles\";\nimport InputBlock, { IInputBlockProps } from \"@library/forms/InputBlock\";\nimport { getRequiredID } from \"@library/utility/idUtils\";\nimport classNames from \"classnames\";\nimport { inputBlockClasses } from \"@library/forms/InputBlockStyles\";\nimport { OverflowProperty, ResizeProperty } from \"csstype\";\nimport { TextareaAutosize } from \"react-autosize-textarea/lib/TextareaAutosize\";\n\nexport enum InputTextBlockBaseClass {\n    STANDARD = \"inputBlock\",\n    CUSTOM = \"\",\n}\n\nexport interface IInputProps {\n    value?: string;\n    onFocus?: (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n    onBlur?: (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n    onChange?: (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n    onKeyPress?: React.KeyboardEventHandler;\n    inputClassNames?: string;\n    type?: string;\n    defaultValue?: string;\n    placeholder?: string;\n    valid?: boolean;\n    required?: boolean;\n    disabled?: boolean;\n    inputRef?: React.RefObject<HTMLInputElement | HTMLTextAreaElement>;\n    multiline?: boolean;\n    maxLength?: number;\n    className?: string;\n    autoComplete?: boolean;\n    \"aria-label\"?: string;\n    \"aria-describedby\"?: string;\n}\n\nexport interface IInputTextProps extends Omit<IInputBlockProps, \"children\"> {\n    inputProps?: IInputProps;\n    multiLineProps?: {\n        onResize?: (event) => {};\n        rows?: number;\n        maxRows?: number;\n        async?: boolean;\n        resize?: ResizeProperty; // for textarea only\n        overflow?: OverflowProperty; // for textarea only\n        className?: string;\n    };\n}\n\nexport default class InputTextBlock extends React.Component<IInputTextProps> {\n    public static defaultProps = {\n        disabled: false,\n        type: \"text\",\n        errors: [],\n        baseClass: InputTextBlockBaseClass.STANDARD,\n        legacyMode: false,\n    };\n\n    private id: string;\n    private ownInputRef = React.createRef<HTMLInputElement | HTMLTextAreaElement>();\n    private get inputRef() {\n        const { inputProps = {} } = this.props;\n        return inputProps.inputRef || this.ownInputRef;\n    }\n\n    public constructor(props) {\n        super(props);\n        this.id = getRequiredID(props, \"inputText\");\n    }\n\n    public render() {\n        const classesInput = inputClasses();\n        const classesInputBlock = inputBlockClasses();\n\n        const { inputProps = {}, multiLineProps = {}, ...blockProps } = this.props;\n        const classes = classNames(classesInputBlock.inputText, inputProps.inputClassNames, {\n            InputBox: this.props.legacyMode,\n            [classesInput.text]: !this.props.legacyMode,\n        });\n\n        return (\n            <InputBlock {...blockProps} className={classNames(classesInputBlock.root, this.props.className)}>\n                {(blockParams) => {\n                    const { labelID, errorID, hasErrors } = blockParams;\n                    let describedBy = inputProps[\"aria-describedby\"];\n                    if (hasErrors) {\n                        describedBy = errorID;\n                    }\n\n                    return !inputProps.multiline ? (\n                        <input\n                            id={this.id}\n                            className={classNames(classes, inputProps.className)}\n                            defaultValue={inputProps.defaultValue}\n                            value={inputProps.value}\n                            type={inputProps.type}\n                            disabled={inputProps.disabled}\n                            required={inputProps.required}\n                            placeholder={inputProps.placeholder}\n                            aria-invalid={hasErrors}\n                            aria-describedby={describedBy}\n                            aria-labelledby={labelID}\n                            aria-label={inputProps[\"aria-label\"]}\n                            maxLength={inputProps.maxLength}\n                            onChange={this.onChange}\n                            onFocus={this.onFocus}\n                            onBlur={this.onBlur}\n                            ref={this.inputRef as any} // Typescripts ref checking a little ridiculous. Distinction without a difference.\n                            onKeyPress={inputProps.onKeyPress}\n                            autoComplete={inputProps.autoComplete ? \"on\" : \"off\"}\n                        />\n                    ) : (\n                        <TextareaAutosize\n                            {...multiLineProps}\n                            async\n                            id={this.id}\n                            className={classNames(classes, multiLineProps.className, {\n                                [classesInputBlock.multiLine(\n                                    multiLineProps.resize ? multiLineProps.resize : \"none\",\n                                    multiLineProps.overflow,\n                                )]: inputProps.multiline,\n                            })}\n                            defaultValue={inputProps.defaultValue}\n                            value={inputProps.value}\n                            type={inputProps.type}\n                            disabled={inputProps.disabled}\n                            required={inputProps.required}\n                            placeholder={inputProps.placeholder}\n                            aria-invalid={hasErrors}\n                            aria-describedby={describedBy}\n                            aria-labelledby={labelID}\n                            maxLength={inputProps.maxLength}\n                            onChange={this.onChange}\n                            onFocus={this.onFocus}\n                            onBlur={this.onBlur}\n                            ref={this.inputRef as any} // Typescripts ref checking a little ridiculous. Distinction without a difference.\n                            onKeyPress={inputProps.onKeyPress}\n                        />\n                    );\n                }}\n            </InputBlock>\n        );\n    }\n\n    /**\n     * Use a native change event instead of React's because of https://github.com/facebook/react/issues/1159\n     */\n    public componentDidMount() {\n        this.inputRef.current!.addEventListener(\"change\", this.onChange);\n    }\n\n    /**\n     * Use a native change event instead of React's because of https://github.com/facebook/react/issues/1159\n     */\n    public componentWillUnmount() {\n        this.inputRef.current!.removeEventListener(\"change\", this.onChange);\n    }\n\n    public get value(): any {\n        return this.inputRef.current ? this.inputRef.current.value : \"\";\n    }\n\n    public set value(value) {\n        if (this.inputRef.current) {\n            this.inputRef.current.value = value;\n        } else {\n            throw new Error(\"inputDom does not exist\");\n        }\n    }\n\n    public focus() {\n        this.inputRef.current!.focus();\n    }\n\n    public select() {\n        this.inputRef.current!.select();\n    }\n\n    private onChange = (event) => {\n        const { inputProps = {} } = this.props;\n        if (inputProps.onChange) {\n            inputProps.onChange(event);\n        }\n    };\n\n    private onBlur = (event) => {\n        const { inputProps = {} } = this.props;\n        if (inputProps.onBlur) {\n            inputProps.onBlur(event);\n        }\n    };\n\n    private onFocus = (event) => {\n        const { inputProps = {} } = this.props;\n        if (inputProps.onFocus) {\n            inputProps.onFocus(event);\n        }\n    };\n}\n","/**\n * A module to isolate meta data passed from the server into a single dependency.\n * This should always be used instead of accessing window.gdn directly.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { uniqueIDFromPrefix } from \"@library/utility/idUtils\";\nimport { TabHandler } from \"@vanilla/dom-utils/src\";\nimport { translate } from \"@vanilla/i18n/src\";\n\ninterface IGdn {\n    meta: AnyObject;\n    permissions: AnyObject;\n    translations: AnyObject;\n    [key: string]: any;\n}\n\n/** The gdn object may be set in an inline script in the head of the document. */\nconst gdn = window.gdn || {};\n\nif (!(\"meta\" in gdn)) {\n    gdn.meta = {};\n}\n\nif (!(\"permissions\" in gdn)) {\n    gdn.permissions = {};\n}\n\nif (!(\"translations\" in gdn)) {\n    gdn.translations = {};\n}\n\nif (!(\"translate\" in gdn)) {\n    gdn.translate = translate;\n}\n\nif (!(\"makeAccessiblePopup\" in gdn)) {\n    gdn.makeAccessiblePopup = ($popupEl, settings, sender) => {\n        if (sender) {\n            let id = sender.id;\n            if (!id) {\n                id = uniqueIDFromPrefix(\"popup\");\n                sender.setAttribute(\"id\", id);\n            }\n            $popupEl.attr(\"aria-labelledby\", id);\n            $popupEl.attr(\"aria-describedby\", id);\n        }\n\n        $.each($popupEl.find(\"a, input\"), function (i, link) {\n            if (link.tagName && link.tagName.toLowerCase() === \"a\") {\n                link.setAttribute(\"tabindex\", \"0\");\n            }\n        });\n\n        const tabHandler = new TabHandler($popupEl[0]);\n\n        tabHandler.getInitial()?.focus();\n        if (!tabHandler) {\n            return;\n        }\n        const elements = tabHandler.getAll() ?? [];\n        elements.map((element, i) => {\n            if (element.tagName.toLowerCase() === \"a\") {\n                element.setAttribute(\"tabindex\", \"0\");\n            }\n            element.addEventListener(\"keydown\", (e) => {\n                const tabKey = 9;\n                if (e.keyCode === tabKey) {\n                    if (!e.shiftKey) {\n                        const nextElement = tabHandler.getNext(document.activeElement, false, true);\n                        if (nextElement) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            nextElement.focus();\n                        }\n                    } else {\n                        const nextElement = tabHandler.getNext(document.activeElement, true, true);\n                        if (nextElement) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            nextElement.focus();\n                        }\n                    }\n                }\n            });\n        });\n    };\n}\n\nexport default gdn as IGdn;\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { frameFooterClasses } from \"@library/layout/frame/frameFooterStyles\";\nimport classNames from \"classnames\";\n\nexport interface IFrameFooterProps {\n    className?: string;\n    children: React.ReactNode;\n    selfPadded?: boolean;\n    justifyRight?: boolean;\n    forDashboard?: boolean;\n}\n\n/**\n * Generic footer for frame component\n */\nexport default class FrameFooter extends React.PureComponent<IFrameFooterProps> {\n    public static defaultProps = {\n        validSelection: false,\n    };\n\n    public render() {\n        const classes = frameFooterClasses();\n        return (\n            <footer\n                className={classNames(\n                    \"frameFooter\",\n                    this.props.className,\n                    classes.root,\n                    this.props.justifyRight && classes.justifiedRight,\n                    this.props.selfPadded ? classes.selfPadded : \"\",\n                    this.props.forDashboard ? classes.forDashboard : \"\",\n                )}\n            >\n                {this.props.children}\n            </footer>\n        );\n    }\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nexport enum EmbedContainerSize {\n    SMALL = \"small\",\n    MEDIUM = \"medium\",\n    FULL_WIDTH = \"fullwidth\",\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useEffect, useMemo } from \"react\";\nimport { getMeta } from \"@library/utility/appUtils\";\n\n/**\n * A component for displaying and setting the document title.\n *\n * This component can render a default title or a custom title depending on the usage.\n *\n * @example <caption>Render the title in the default h1</caption>\n * <DocumentTitle title=\"Page Title\" />\n *\n * @example <caption>Render a custom title</caption>\n * <DocumentTitle title=\"Title Bar Title >\n *     <h1>Page Title</h1>\n * </DocumentTitle>\n */\nexport default function DocumentTitle(props: IProps) {\n    /**\n     * Calculate the status bar title from the props.\n     *\n     * @param props - The props used to calculate the title.\n     * @returns Returns the title as a string.\n     */\n    const headTitle = useMemo(() => {\n        const siteTitle: string = getMeta(\"ui.siteName\", \"\");\n        const parts: string[] = [];\n\n        if (props.title && props.title.length > 0) {\n            parts.push(props.title);\n        }\n        if (siteTitle.length > 0 && siteTitle !== props.title) {\n            parts.push(siteTitle);\n        }\n\n        return parts.join(\" - \");\n    }, [props.title]);\n\n    useEffect(() => {\n        document.title = headTitle;\n    }, [headTitle]);\n\n    return <>{props.children ? props.children : <h1>{props.title}</h1>}</>;\n}\n\ninterface IProps {\n    title: string;\n    children?: React.ReactNode;\n}\n","import React, { useContext } from \"react\";\nimport Quill from \"quill/core\";\n\nexport interface IEmbedContext {\n    inEditor?: boolean;\n    descriptionID?: string;\n    onRenderComplete?: () => void;\n    syncBackEmbedValue?: (values: object) => void;\n    quill?: Quill | null;\n    isSelected?: boolean;\n    selectSelf?: () => void;\n    deleteSelf?: () => void;\n}\nexport const EmbedContext = React.createContext<IEmbedContext>({});\nexport function useEmbedContext() {\n    return useContext(EmbedContext);\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { singleBorder, userSelect } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { shadowHelper } from \"@library/styles/shadowHelpers\";\nimport { translateX, percent, px, important } from \"csx\";\nimport { modalVariables } from \"@library/modal/modalStyles\";\n\nexport const tooltipVariables = useThemeCache(() => {\n    const makeThemeVars = variableFactory(\"toolTips\");\n    const globalVars = globalVariables();\n\n    // Main colors\n    const sizes = makeThemeVars(\"sizes\", {\n        min: 150,\n        max: 250,\n    });\n\n    const nub = makeThemeVars(\"nub\", {\n        width: 12,\n    });\n\n    return {\n        sizes,\n        nub,\n    };\n});\n\nexport const toolTipClasses = useThemeCache(() => {\n    const style = styleFactory(\"toolTip\");\n    const globalVars = globalVariables();\n    const vars = tooltipVariables();\n    const shadow = shadowHelper();\n\n    const noPointerContent = style(\"content\", {\n        position: \"relative\",\n        display: \"inline-flex\",\n        ...{\n            \"& *\": {\n                pointerEvents: \"none\",\n            },\n        },\n    });\n\n    const noPointerTrigger = style(\"noPointerTrigger\", {\n        pointerEvents: important(\"initial\"),\n        position: \"absolute\",\n        top: percent(50),\n        left: percent(50),\n        minWidth: px(45),\n        minHeight: px(45),\n        transform: \"translate(-50%, -50%)\",\n        zIndex: 1,\n    });\n\n    const box = style(\"box\", {\n        position: \"absolute\",\n        fontSize: styleUnit(globalVars.fonts.size.medium),\n        minWidth: styleUnit(vars.sizes.min),\n        maxWidth: styleUnit(vars.sizes.max),\n        color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n        backgroundColor: ColorsUtils.colorOut(globalVars.mainColors.bg),\n        lineHeight: globalVars.lineHeights.base,\n        ...Mixins.border(),\n        ...Mixins.padding({\n            all: globalVars.fonts.size.medium,\n        }),\n        ...shadow.dropDown(),\n        zIndex: modalVariables().sizing.zIndex + 1,\n    });\n\n    const nubPosition = style(\"nubPosition\", {\n        position: \"absolute\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        overflow: \"hidden\",\n        width: styleUnit(vars.nub.width * 2),\n        height: styleUnit(vars.nub.width * 2),\n        transform: translateX(\"-50%\"),\n        marginLeft: styleUnit(vars.nub.width),\n        pointerEvents: \"none\",\n        zIndex: modalVariables().sizing.zIndex + 2,\n        ...userSelect(),\n    });\n\n    const nub = style(\"nub\", {\n        position: \"relative\",\n        display: \"block\",\n        width: styleUnit(vars.nub.width),\n        height: styleUnit(vars.nub.width),\n        borderTop: singleBorder({\n            width: globalVars.border.width,\n        }),\n        borderRight: singleBorder({\n            width: globalVars.border.width,\n        }),\n        boxShadow: globalVars.overlay.dropShadow,\n        background: ColorsUtils.colorOut(globalVars.mainColors.bg),\n        zIndex: 1,\n        ...{\n            [`&.isUp`]: {\n                transform: `rotate(-45deg)`,\n            },\n            [`&.isDown`]: {\n                transform: `rotate(135deg)`,\n            },\n        },\n    });\n\n    return {\n        box,\n        nub,\n        nubPosition,\n        noPointerContent,\n        noPointerTrigger,\n    };\n});\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport classNames from \"classnames\";\nimport React, { cloneElement, ReactElement, useState, useEffect, useRef } from \"react\";\nimport { useTooltip, TooltipPopup } from \"@reach/tooltip\";\nimport Portal from \"@reach/portal\";\nimport { toolTipClasses, tooltipVariables } from \"@library/toolTip/toolTipStyles\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport throttle from \"lodash/throttle\";\n\nconst nubPosition = (triggerRect, hasOverflow) => {\n    const toolTipVars = tooltipVariables();\n    const globalVars = globalVariables();\n\n    const overTriggerPosition =\n        triggerRect.top - toolTipVars.nub.width * 2 + globalVars.border.width * 2 + window.scrollY;\n    const underTriggerPosition = triggerRect.bottom - globalVars.border.width * 2 + window.scrollY;\n\n    return {\n        left: triggerRect.left + triggerRect.width / 2 - toolTipVars.nub.width,\n        top: hasOverflow ? overTriggerPosition : underTriggerPosition,\n    };\n};\n\nfunction TriangleTooltip(props: { children: React.ReactNode; label: React.ReactNode; ariaLabel?: React.ReactNode }) {\n    const globalVars = globalVariables();\n    const { children, label, ariaLabel } = props;\n\n    // get the props from useTooltip\n    const [trigger, tooltip] = useTooltip();\n\n    // destructure off what we need to position the triangle\n    const { isVisible, triggerRect } = tooltip;\n\n    const [hasOverflow, setHasOverflow] = useState(false);\n    const classes = toolTipClasses();\n    const toolTipVars = tooltipVariables();\n    const borderOffset = globalVars.border.width * 2;\n\n    const toolBoxPosition = (triggerRect, tooltipRect) => {\n        const triangleHeight = toolTipVars.nub.width / 2;\n        const triggerCenter = triggerRect.left + triggerRect.width / 2;\n        const left = triggerCenter - tooltipRect.width / 2;\n        const maxLeft = window.innerWidth - tooltipRect.width - 2;\n        const hasOverflow = triggerRect.bottom + tooltipRect.height + triangleHeight > window.innerHeight;\n\n        setHasOverflow(hasOverflow);\n\n        const overTriggerPosition =\n            triggerRect.top - tooltipRect.height + borderOffset - toolTipVars.nub.width + window.scrollY;\n        const underTriggerPosition = triggerRect.bottom - borderOffset + toolTipVars.nub.width + window.scrollY;\n\n        return {\n            left: Math.min(Math.max(2, left), maxLeft) + window.scrollX,\n            top: hasOverflow ? overTriggerPosition : underTriggerPosition,\n        };\n    };\n    const isScrolling = useIsScrolling();\n\n    return (\n        <>\n            {cloneElement(children as any, trigger)}\n            {isVisible && !isScrolling && triggerRect && (\n                // The Triangle. We position it relative to the trigger, not the popup\n                // so that collisions don't have a triangle pointing off to nowhere.\n                // Using a Portal may seem a little extreme, but we can keep the\n                // positioning logic simpler here instead of needing to consider\n                // the popup's position relative to the trigger and collisions\n                <>\n                    <Portal>\n                        <div className={classes.nubPosition} style={nubPosition(triggerRect, hasOverflow) as any}>\n                            <div className={classNames(classes.nub, hasOverflow ? \"isDown\" : \"isUp\")} />\n                        </div>\n                    </Portal>\n                    <TooltipPopup\n                        {...tooltip}\n                        label={label}\n                        aria-label={ariaLabel ? ariaLabel : label}\n                        position={toolBoxPosition}\n                        className={classes.box}\n                    />\n                </>\n            )}\n        </>\n    );\n}\n\nfunction useIsScrolling() {\n    let scrollTimeout = useRef<NodeJS.Timeout | null>(null);\n    const [isScrolling, setIsScrolling] = useState(false);\n\n    useEffect(() => {\n        const listener = throttle(() => {\n            if (scrollTimeout.current) {\n                clearTimeout(scrollTimeout.current);\n            }\n\n            setIsScrolling(true);\n            scrollTimeout.current = setTimeout(() => {\n                setIsScrolling(false);\n            }, 200);\n        }, 100);\n\n        window.addEventListener(\"scroll\", listener);\n        return () => {\n            window.removeEventListener(\"scroll\", listener);\n        };\n    }, []);\n\n    return isScrolling;\n}\n\n/**\n * Tooltip component.\n *\n * Custom children (not base dom nodes), must use React.forwardRef().\n */\nexport function ToolTip(props: { children: React.ReactNode; label: React.ReactNode; ariaLabel?: React.ReactNode }) {\n    const { children, label, ariaLabel } = props;\n\n    return (\n        <TriangleTooltip label={label} ariaLabel={ariaLabel}>\n            {children}\n        </TriangleTooltip>\n    );\n}\n\ninterface IIconProps extends React.HTMLAttributes<HTMLSpanElement> {}\n\n/**\n * Class for reprenting to wrap an icon inside of a tooltip.\n */\nexport const ToolTipIcon = React.forwardRef(function ToolTipIcon(\n    props: IIconProps,\n    ref: React.RefObject<HTMLSpanElement>,\n) {\n    const classes = toolTipClasses();\n    return (\n        <span {...props} ref={ref} tabIndex={0} className={classes.noPointerContent}>\n            <span className={classes.noPointerTrigger}></span>\n            {props.children}\n        </span>\n    );\n});\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { visibility } from \"@library/styles/styleHelpers\";\nimport { ToolTip } from \"@library/toolTip/ToolTip\";\nimport { t } from \"@library/utility/appUtils\";\nimport { IOptionalComponentID, useUniqueID } from \"@library/utility/idUtils\";\nimport classNames from \"classnames\";\nimport React from \"react\";\nimport { checkRadioClasses } from \"./checkRadioStyles\";\n\ninterface IProps extends IOptionalComponentID {\n    id?: string;\n    className?: string;\n    checked?: boolean;\n    disabled?: boolean;\n    onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n    label: React.ReactNode;\n    labelBold?: boolean;\n    isHorizontal?: boolean;\n    fakeFocus?: boolean;\n    defaultChecked?: boolean;\n    tooltipLabel?: boolean;\n    excludeFromICheck?: boolean;\n}\n\nexport default function CheckBox(props: IProps) {\n    const labelID = useUniqueID(\"checkbox_label\");\n    const classes = checkRadioClasses();\n\n    const { isHorizontal, labelBold = true } = props;\n\n    const icon = (\n        <span className={classes.iconContainer} aria-hidden=\"true\">\n            <svg className={classNames(classes.checkIcon)} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 10 10\">\n                <title>{t(\"✓\")}</title>\n                <path\n                    fill=\"currentColor\"\n                    d=\"M10,2.7c0-0.2-0.1-0.3-0.2-0.4L8.9,1.3c-0.2-0.2-0.6-0.2-0.9,0L3.8,5.6L1.9,3.7c-0.2-0.2-0.6-0.2-0.9,0L0.2,4.6c-0.2,0.2-0.2,0.6,0,0.9l3.2,3.2c0.2,0.2,0.6,0.2,0.9,0l5.5-5.5C9.9,3,10,2.8,10,2.7z\"\n                />\n            </svg>\n        </span>\n    );\n\n    return (\n        <label className={classNames(props.className, classes.root, { isHorizontal })}>\n            <input\n                className={classNames(classes.input, props.fakeFocus && \"focus-visible\", {\n                    \"exclude-icheck\": props.excludeFromICheck,\n                })}\n                aria-labelledby={labelID}\n                type=\"checkbox\"\n                onChange={props.onChange}\n                checked={props.checked}\n                defaultChecked={props.defaultChecked}\n                disabled={props.disabled}\n                tabIndex={0}\n            />\n            {props.tooltipLabel && props.label ? <ToolTip label={props.label}>{icon}</ToolTip> : icon}\n            {props.label && (\n                <span\n                    id={labelID}\n                    className={classNames(classes.label, props.tooltipLabel && visibility().visuallyHidden, {\n                        [classes.labelBold]: labelBold,\n                    })}\n                >\n                    {props.label}\n                </span>\n            )}\n        </label>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { History } from \"history\";\nimport { useEffect } from \"react\";\n\nexport type PageViewHandler = (params: { history: History }) => void | Promise<void>;\n\nconst EVENT_NAME = \"pageView\";\n\n/**\n * Register a callback for a when a pageview is triggered.\n *\n * @param handler The handler for the page view.\n */\nexport function onPageView(handler: PageViewHandler) {\n    const eventListener = (e: CustomEvent) => {\n        const history = e.detail;\n        handler(history);\n    };\n    document.addEventListener(EVENT_NAME, eventListener);\n    return () => {\n        document.removeEventListener(EVENT_NAME, eventListener);\n    };\n}\n\nexport function usePageChangeListener(handler: PageViewHandler) {\n    useEffect(() => {\n        return onPageView(handler);\n    }, [handler]);\n}\n\nlet previousPath: string | null = null;\n\nfunction getPreviousPath() {\n    return previousPath;\n}\n\nfunction setPreviousPath(path: string) {\n    previousPath = path;\n}\n\n/**\n * Initialize tracking of the page history and fire the handlers for the current page.\n */\nexport function initPageViewTracking(history: History) {\n    document.dispatchEvent(new CustomEvent(EVENT_NAME, { detail: history }));\n    setPreviousPath(history.location.pathname);\n\n    history.listen(() => {\n        if (getPreviousPath() !== history.location.pathname) {\n            document.dispatchEvent(new CustomEvent(EVENT_NAME, { detail: history }));\n        }\n\n        setPreviousPath(history.location.pathname);\n    });\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { reducerWithInitialState } from \"typescript-fsa-reducers\";\nimport ThemeActions from \"@library/theming/ThemeActions\";\nimport { ILoadable, LoadStatus } from \"@library/@types/api/core\";\nimport produce from \"immer\";\nimport { useSelector } from \"react-redux\";\nimport { ICoreStoreState } from \"@library/redux/reducerRegistry\";\nimport { IUserFragment } from \"@library/@types/api/users\";\nimport { RecordID } from \"@vanilla/utils\";\n\nexport enum ThemeType {\n    DB = \"themeDB\",\n    FS = \"themeFile\",\n}\n\nexport interface ITheme {\n    assets: IThemeAssets;\n    features: Record<string, boolean>;\n    supportedSections?: string[];\n    preview: IThemePreview;\n    themeID: RecordID;\n    name: string;\n    type: ThemeType;\n    parentTheme?: string;\n    current: boolean;\n    version: string;\n    insertUser?: IUserFragment;\n    dateInserted?: string;\n    revisionID: number | null;\n}\n\nexport interface IThemePreview {\n    info?: Record<\n        string,\n        {\n            type: string;\n            value: string;\n        }\n    >;\n    imageUrl?: string | null;\n    variables?: {\n        globalBg?: string | null;\n        globalFg?: string | null;\n        globalPrimary?: string | null;\n        titleBarBg?: string | null;\n        titleBarFg?: string | null;\n        backgroundImage?: string | null;\n    };\n}\n\nexport interface IThemeRevision extends ITheme {\n    active: boolean;\n    revisionID: number;\n}\n\ninterface IThemeAsset<DataType = string> {\n    type: string;\n    url?: string;\n    data?: DataType;\n}\n\nexport interface IThemeAssets {\n    fonts?: IThemeAsset<IThemeFont[]>;\n    logo?: IThemeAsset;\n    mobileLogo?: IThemeAsset;\n    variables?: IThemeAsset<IThemeVariables>;\n    header?: IThemeAsset;\n    footer?: IThemeAsset;\n    javascript?: IThemeAsset;\n    styles?: IThemeAsset;\n}\n\nexport interface IThemeFont {\n    name: string;\n    url: string;\n    fallbacks?: string[];\n}\n\nexport type IThemeVariables = Record<string, any>;\n\nexport interface IThemeState {\n    assets: ILoadable<IThemeAssets>;\n    forcedVariables: IThemeVariables | null;\n    themeRevisions: ILoadable<IThemeRevision[]>;\n    upDateRevision: ILoadable<ITheme>;\n}\n\nexport interface IThemesStoreState extends ICoreStoreState {\n    theme: IThemeState;\n}\n\nexport const INITIAL_THEME_STATE: IThemeState = {\n    assets: {\n        status: LoadStatus.PENDING,\n    },\n    forcedVariables: null,\n    themeRevisions: {\n        status: LoadStatus.PENDING,\n    },\n    upDateRevision: {\n        status: LoadStatus.PENDING,\n    },\n};\n\nexport const themeReducer = produce(\n    reducerWithInitialState(INITIAL_THEME_STATE)\n        .case(ThemeActions.getAssets.started, (state) => {\n            state.assets.status = LoadStatus.LOADING;\n            return state;\n        })\n        .case(ThemeActions.getAssets.done, (state, payload) => {\n            state.assets.status = LoadStatus.SUCCESS;\n            state.assets.data = payload.result.assets;\n            return state;\n        })\n        .case(ThemeActions.getAssets.failed, (state, payload) => {\n            if (payload.error.response && payload.error.response.status === 404) {\n                // This theme just doesn't have variables. Use the defaults.\n                state.assets.data = {};\n                state.assets.status = LoadStatus.SUCCESS;\n                return state;\n            } else {\n                state.assets.status = LoadStatus.ERROR;\n                state.assets.error = payload.error;\n                return state;\n            }\n        })\n        .case(ThemeActions.forceVariablesAC, (state, payload) => {\n            state.forcedVariables = payload;\n            return state;\n        })\n        .case(ThemeActions.getThemeRevisions_ACs.started, (state, payload) => {\n            state.themeRevisions.status = LoadStatus.LOADING;\n            return state;\n        })\n        .case(ThemeActions.getThemeRevisions_ACs.failed, (state, payload) => {\n            if (state.themeRevisions) {\n                state.themeRevisions.status = LoadStatus.ERROR;\n                state.themeRevisions.error = payload.error;\n            }\n            return state;\n        })\n        .case(ThemeActions.getThemeRevisions_ACs.done, (state, payload) => {\n            if (state.themeRevisions) {\n                state.themeRevisions.status = LoadStatus.SUCCESS;\n                state.themeRevisions.data = payload.result;\n            }\n            return state;\n        })\n        .case(ThemeActions.patchTheme_ACs.started, (state, payload) => {\n            state.upDateRevision.status = LoadStatus.LOADING;\n            return state;\n        })\n        .case(ThemeActions.patchTheme_ACs.failed, (state, payload) => {\n            state.upDateRevision.status = LoadStatus.ERROR;\n            state.upDateRevision.error = payload.error;\n            return state;\n        })\n        .case(ThemeActions.patchTheme_ACs.done, (state, payload) => {\n            state.upDateRevision.status = LoadStatus.SUCCESS;\n            state.upDateRevision.data = payload.result;\n            const { revisionID, themeID } = payload.result;\n\n            // Go through any active revisions if we have them, and modify their active status.\n            if (state.themeRevisions.data) {\n                state.themeRevisions.data = state.themeRevisions.data.map((revision) => {\n                    if (revision.themeID !== themeID) {\n                        return revision;\n                    }\n\n                    revision.active = revision.revisionID === revisionID;\n                    return revision;\n                });\n            }\n            return state;\n        }),\n);\n\nexport function useGetThemeState() {\n    return useSelector((state: IThemesStoreState) => {\n        return state.theme;\n    });\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { produce } from \"immer\";\nimport { reducerWithInitialState } from \"typescript-fsa-reducers\";\nimport { ILocale } from \"@vanilla/i18n\";\nimport { ILoadable, LoadStatus } from \"@library/@types/api/core\";\nimport { getAllLocalesACs } from \"@library/locales/localeActions\";\n\nexport interface ILocaleState {\n    locales: ILoadable<ILocale[]>;\n}\n\nexport const INITIAL_LOCALE_STATE = {\n    locales: {\n        status: LoadStatus.PENDING,\n    },\n};\n\nexport const localeReducer = produce(\n    reducerWithInitialState<ILocaleState>(INITIAL_LOCALE_STATE)\n        .case(getAllLocalesACs.started, (nextState, payload) => {\n            nextState.locales.status = LoadStatus.LOADING;\n            return nextState;\n        })\n        .case(getAllLocalesACs.done, (nextState, payload) => {\n            nextState.locales.status = LoadStatus.SUCCESS;\n            nextState.locales.data = payload.result;\n            return nextState;\n        })\n        .case(getAllLocalesACs.failed, (nextState, payload) => {\n            nextState.locales.status = LoadStatus.ERROR;\n            nextState.locales.error = payload.error;\n            return nextState;\n        }),\n);\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport ConversationsActions from \"@library/features/conversations/ConversationsActions\";\nimport ReduxReducer from \"@library/redux/ReduxReducer\";\nimport produce from \"immer\";\nimport { ILoadable, LoadStatus } from \"@library/@types/api/core\";\nimport { IConversation } from \"@library/@types/api/conversations\";\n\ninterface IConversationsState {\n    conversationsByID: ILoadable<{\n        [key: number]: IConversation;\n    }>;\n}\n\nexport interface IConversationsStoreState {\n    conversations: IConversationsState;\n}\n\n/**\n * Manage conversations state in Redux.\n */\nexport default class ConversationsModel implements ReduxReducer<IConversationsState> {\n    public readonly initialState: IConversationsState = {\n        conversationsByID: {\n            data: {},\n            status: LoadStatus.PENDING,\n        },\n    };\n\n    /**\n     * Update conversations state, based on the dispatched action.\n     *\n     * @param state Previous state of the store.\n     * @param action Name for the type of action that was dispatched.\n     */\n    public reducer = (\n        state: IConversationsState = this.initialState,\n        action: typeof ConversationsActions.ACTION_TYPES,\n    ): IConversationsState => {\n        return produce<IConversationsState>(state, (nextState) => {\n            switch (action.type) {\n                case ConversationsActions.GET_CONVERSATIONS_REQUEST:\n                    nextState.conversationsByID.status = LoadStatus.LOADING;\n                    break;\n                case ConversationsActions.GET_CONVERSATIONS_RESPONSE: {\n                    nextState.conversationsByID.status = LoadStatus.SUCCESS;\n                    nextState.conversationsByID.data = {};\n                    const conversations = action.payload.data as IConversation[];\n                    conversations.forEach((conversation) => {\n                        nextState.conversationsByID.data![conversation.conversationID] = conversation;\n                    });\n                    break;\n                }\n                case ConversationsActions.GET_CONVERSATIONS_ERROR:\n                    nextState.conversationsByID.status = LoadStatus.ERROR;\n                    nextState.conversationsByID.error = action.payload;\n                    break;\n            }\n        });\n    };\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { produce } from \"immer\";\nimport { reducerWithInitialState } from \"typescript-fsa-reducers\";\nimport { ILoadable, LoadStatus } from \"@vanilla/library/src/scripts/@types/api/core\";\nimport { TagsAction } from \"@library/features/tags/TagsAction\";\nimport { useSelector } from \"react-redux\";\n\nexport interface ITag {\n    id: number;\n    name: string;\n    urlCode: string;\n}\n\nexport interface ITagState {\n    tagsByName: Record<string, ILoadable<ITag[]>>;\n}\n\nexport interface ITagsStateStoreState {\n    tags: ITagState;\n}\n\nexport const INITIAL_TAGS_STATE: ITagState = {\n    tagsByName: {},\n};\n\nexport const tagsReducer = produce(\n    reducerWithInitialState<ITagState>(INITIAL_TAGS_STATE)\n        .case(TagsAction.getTagsACs.started, (nextState, action) => {\n            nextState.tagsByName[action.name] = { status: LoadStatus.LOADING };\n            return nextState;\n        })\n        .case(TagsAction.getTagsACs.done, (nextState, payload) => {\n            nextState.tagsByName[payload.params.name] = {\n                status: LoadStatus.SUCCESS,\n                data: payload.result,\n            };\n            return nextState;\n        })\n        .case(TagsAction.getTagsACs.failed, (nextState, action) => {\n            nextState.tagsByName[action.params.name] = { status: LoadStatus.ERROR };\n            return nextState;\n        }),\n);\n\nexport function useTagsState() {\n    return useSelector((state: ITagsStateStoreState) => {\n        return state.tags;\n    });\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ILoadable, LoadStatus } from \"@library/@types/api/core\";\nimport DiscussionActions from \"@library/features/discussions/DiscussionActions\";\nimport produce from \"immer\";\nimport { reducerWithInitialState } from \"typescript-fsa-reducers\";\nimport { IDiscussion } from \"@dashboard/@types/api/discussion\";\n\nexport interface IDiscussionsStoreState {\n    discussions: IDiscussionState;\n}\n\ninterface IDiscussionState {\n    discussionsByID: Record<number, ILoadable<IDiscussion>>;\n}\n\nexport const INITIAL_DISCUSSIONS_STATE: IDiscussionState = {\n    discussionsByID: {},\n};\n\n/**\n * Reducer for discussion related data.\n */\nexport const discussionsReducer = produce(\n    reducerWithInitialState(INITIAL_DISCUSSIONS_STATE)\n        .case(DiscussionActions.getDiscussionByIDACs.started, (state, params) => {\n            const { discussionID } = params;\n            state.discussionsByID[discussionID] = { status: LoadStatus.LOADING };\n            return state;\n        })\n        .case(DiscussionActions.getDiscussionByIDACs.done, (state, payload) => {\n            const { discussionID } = payload.params;\n            state.discussionsByID[discussionID] = {\n                data: payload.result,\n                status: LoadStatus.SUCCESS,\n            };\n            return state;\n        })\n        .case(DiscussionActions.getDiscussionByIDACs.failed, (state, payload) => {\n            const { discussionID } = payload.params;\n            state.discussionsByID[discussionID] = {\n                status: LoadStatus.ERROR,\n                error: payload.error,\n            };\n            return state;\n        }),\n);\n","/**\n * A reducer registry so that we can have dynamically loading reducers.\n *\n * @see http://nicolasgallagher.com/redux-modules-and-code-splitting/\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { IThemeState, themeReducer } from \"@library/theming/themeReducer\";\nimport { usersReducer } from \"@library/features/users/userModel\";\nimport { IUsersStoreState } from \"@library/features/users/userTypes\";\nimport { Reducer, ReducersMapObject, combineReducers } from \"redux\";\nimport { ILocaleState, localeReducer } from \"@library/locales/localeReducer\";\nimport getStore from \"@library/redux/getStore\";\nimport NotificationsModel from \"@library/features/notifications/NotificationsModel\";\nimport ConversationsModel from \"@library/features/conversations/ConversationsModel\";\nimport { tagsReducer } from \"@library/features/tags/TagsReducer\";\nimport { discussionsReducer } from \"@library/features/discussions/discussionModel\";\n\nlet dynamicReducers = {};\n\nexport function registerReducer(name: string, reducer: Reducer) {\n    dynamicReducers[name] = reducer;\n    const store = getStore();\n    store.replaceReducer(combineReducers(getReducers()));\n\n    const initialActions = window.__ACTIONS__ || [];\n\n    // Re-apply initial actions.\n    initialActions.forEach(store.dispatch);\n}\n\nexport interface ICoreStoreState extends IUsersStoreState {\n    theme: IThemeState;\n    locales: ILocaleState;\n}\n\nexport function getReducers(): ReducersMapObject<any, any> {\n    return {\n        // We have a few static reducers.\n        users: usersReducer,\n        discussions: discussionsReducer,\n        locales: localeReducer,\n        tags: tagsReducer,\n        notifications: new NotificationsModel().reducer,\n        conversations: new ConversationsModel().reducer,\n        theme: themeReducer,\n        ...dynamicReducers,\n    };\n}\n\nexport function resetReducers() {\n    dynamicReducers = {};\n}\n\n/**\n * @deprecated\n */\nconst reducerRegistry = {\n    register: registerReducer,\n    getReducers,\n};\n\nexport default reducerRegistry;\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { rgba, percent, linearGradient } from \"csx\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { keyframes } from \"@library/styles/styleShim\";\n\nexport const loadingRectangleVariables = useThemeCache(() => {\n    const makeVars = variableFactory(\"loadingRectatngle\");\n\n    const colors = makeVars(\"colors\", {\n        bg: linearGradient(\n            \"to right\",\n            globalVariables().mixBgAndFg(0.15),\n            globalVariables().mixBgAndFg(0.2),\n            globalVariables().mixBgAndFg(0.25),\n        ),\n    });\n\n    const loadingAnimation = keyframes({\n        \"0%\": { opacity: 0.8 },\n        \"50%\": { opacity: 1 },\n        \"100%\": { opacity: 0.8 },\n    });\n\n    return {\n        colors,\n        loadingAnimation,\n    };\n});\n\nconst style = styleFactory(\"loadingRectangle\");\nexport const loadingRectangleClass = useThemeCache((height: string | number, width: string | number = \"100%\") => {\n    const vars = loadingRectangleVariables();\n    return style({\n        display: \"block\",\n        borderRadius: 2,\n        background: ColorsUtils.colorOut(vars.colors.bg),\n        height: styleUnit(height),\n        width: styleUnit(width),\n        animationName: vars.loadingAnimation,\n        animationDuration: \"4s\",\n        animationIterationCount: \"infinite\",\n        maxWidth: percent(100),\n    });\n});\n\nexport const loadingSpacerClass = useThemeCache((height: string | number) => {\n    return style({\n        display: \"block\",\n        height: styleUnit(height),\n        width: percent(100),\n    });\n});\n\nexport const loadingCircleClass = useThemeCache((height: string | number) => {\n    const vars = loadingRectangleVariables();\n    return style({\n        height: styleUnit(50),\n        width: styleUnit(50),\n        background: ColorsUtils.colorOut(vars.colors.bg),\n        margin: 20,\n        borderRadius: 50,\n    });\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { DetailedHTMLProps } from \"react\";\nimport { loadingCircleClass, loadingRectangleClass, loadingSpacerClass } from \"@library/loaders/loadingRectangleStyles\";\nimport classNames from \"classnames\";\n\ninterface IProps extends DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement> {\n    height: string | number;\n    width?: string | number;\n}\n\nexport function LoadingRectangle(props: IProps) {\n    return <div {...props} className={classNames(loadingRectangleClass(props.height, props.width), props.className)} />;\n}\n\nexport function LoadingSpacer(props: IProps) {\n    return <div {...props} className={classNames(loadingSpacerClass(props.height), props.className)} />;\n}\n\nexport function LoadingCircle(props: IProps) {\n    return <div {...props} className={classNames(loadingCircleClass(props.height), props.className)} />;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useMemo } from \"react\";\nimport { animated, useTransition } from \"react-spring\";\nimport classNames from \"classnames\";\n\ninterface IProps extends React.HtmlHTMLAttributes<HTMLDivElement> {\n    // Whether or not the element has entered the screen and should be visible.\n    // NOTE: For animations OUT to work, you need to continue to render the element throughout it's transition.\n    // This means you can't do {isVisible && <EntranceAnimation />}\n    isEntered: boolean;\n\n    // The element to render as. All HTML props are supported.\n    // If using a fixed position element, make you apply all position to THIS element.\n    // Eg. <EntranceAnimation asElement=\"header\" /> === <header {...transitionProps} {...otherProps} />\n    asElement?: string;\n\n    // The contents that are being transitioned.\n    children?: React.ReactNode;\n\n    // A delay before the transition starts.\n    delay?: number;\n\n    // Whether or not the element should fade in.\n    fade?: boolean;\n\n    // The direction to transition in from (if applicable).\n    fromDirection?: FromDirection;\n\n    // If set the element will transition from the fromDirection, but it will start halfway away.\n    halfDirection?: boolean;\n\n    // For elements that are already transformed through CSS\n    // The transition may apply it's own transform that conflicts.\n    // Give the target transform percentages here so that calculations can be correct.\n    targetTransform?: Partial<ITargetTransform>;\n\n    // Callback that is called when the animated element is removed from the DOM (transition out complete).\n    onDestroyed?: () => void;\n\n    // Special class to apply when the first child has multiple\n    firstItemProps?: React.HtmlHTMLAttributes<HTMLDivElement>;\n    lastItemProps?: React.HtmlHTMLAttributes<HTMLDivElement>;\n}\n\nexport enum FromDirection {\n    TOP = \"top\",\n    LEFT = \"left\",\n    RIGHT = \"right\",\n    BOTTOM = \"bottom\",\n}\n\nexport interface ITargetTransform {\n    xPercent?: number;\n    yPercent?: number;\n}\n\n/**\n * A component for transitioning some child entering in.\n *\n * It's transition is configurable through props.\n */\nexport const EntranceAnimation = React.forwardRef<HTMLDivElement, IProps>(function EntranceAnimation(\n    _props: IProps,\n    ref,\n) {\n    const {\n        firstItemProps,\n        lastItemProps,\n        isEntered,\n        delay,\n        fromDirection,\n        fade,\n        asElement,\n        halfDirection,\n        targetTransform,\n        children,\n        onDestroyed,\n        ...divProps\n    } = _props;\n    const config = useTransitionConfig(_props);\n\n    const transitions = useTransition(isEntered ? children : null, (item) => item?.key, config);\n    const AnimatedComponent = asElement ? animated[asElement] : animated.div;\n\n    return transitions.map(({ item, key, props: style }, i) => {\n        const isFirst = i === 0;\n        const isLast = i === transitions.length - 1;\n        const classes = classNames(\n            divProps.className,\n            isFirst && firstItemProps?.className,\n            isLast && lastItemProps?.className,\n        );\n\n        return (\n            item && (\n                <AnimatedComponent\n                    {...divProps}\n                    {...(isFirst ? firstItemProps ?? {} : {})}\n                    {...(isLast ? lastItemProps ?? {} : {})}\n                    className={classes}\n                    ref={ref}\n                    key={key}\n                    style={style}\n                >\n                    {item}\n                </AnimatedComponent>\n            )\n        );\n    });\n});\n\nconst useTransitionConfig = (props: IProps) => {\n    const { fromDirection, delay, fade, halfDirection, targetTransform, onDestroyed } = props;\n    const { xPercent = 0, yPercent = 0 } = targetTransform ?? {};\n\n    return useMemo(() => {\n        // Opacity\n        const startOpacity = fade ? 0 : 1;\n        const endOpacity = 1;\n\n        let startTransform: string | undefined = undefined;\n        let endTransform: string | undefined = undefined;\n\n        if (fromDirection) {\n            // Sliding\n            let startX = 0;\n            let endX = 0;\n            let startY = 0;\n            let endY = 0;\n            const offsetPercent = halfDirection ? 25 : 100;\n\n            switch (fromDirection) {\n                case FromDirection.BOTTOM:\n                    startX = xPercent;\n                    endX = xPercent;\n                    startY = yPercent + offsetPercent;\n                    endY = yPercent;\n                    break;\n                case FromDirection.TOP:\n                    startX = xPercent;\n                    endX = xPercent;\n                    startY = yPercent - offsetPercent;\n                    endY = yPercent;\n                    break;\n                case FromDirection.RIGHT:\n                    startX = xPercent + offsetPercent;\n                    endX = xPercent;\n                    startY = yPercent;\n                    endY = yPercent;\n                    break;\n                case FromDirection.LEFT:\n                    startX = xPercent - offsetPercent;\n                    endX = xPercent;\n                    startY = yPercent;\n                    endY = yPercent;\n                    break;\n            }\n\n            startTransform = `translate3d(${startX}%, ${startY}%, 0)`;\n            endTransform = `translate3d(${endX}%, ${endY}%, 0)`;\n        }\n\n        const result = {\n            config: {\n                tension: 250,\n                friction: 30,\n                clamp: true,\n            },\n            trail: delay || 0,\n            onDestroyed: () => {\n                onDestroyed?.();\n            },\n            from: {\n                pointerEvents: \"none\",\n                opacity: startOpacity,\n                transform: startTransform,\n            },\n            enter: {\n                opacity: endOpacity,\n                pointerEvents: \"initial\",\n                transform: endTransform,\n            },\n            leave: {\n                opacity: startOpacity,\n                pointerEvents: \"none\",\n                transform: startTransform,\n            },\n        };\n\n        // Cleanup undefined values that useTransition can't handle.\n        if (!result.from.transform) {\n            delete result.from.transform;\n        }\n        if (!result.enter.transform) {\n            delete result.enter.transform;\n        }\n        if (!result.leave.transform) {\n            delete result.leave.transform;\n        }\n        return result;\n    }, [fade, fromDirection, delay, halfDirection, xPercent, yPercent, onDestroyed]);\n};\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useContext, useState, useEffect, useRef, useDebugValue } from \"react\";\nimport { useMeasure } from \"@vanilla/react-utils\";\nimport { usePageChangeListener } from \"@library/pageViews/pageViewTracking\";\n\ninterface IContextValue {\n    bannerExists: boolean;\n    setBannerExists: (exists: boolean) => void;\n    bannerRect: DOMRect | null;\n    setBannerRect: (rect: DOMRect | null) => void;\n    overlayTitleBar: boolean;\n    setOverlayTitleBar: (exists: boolean) => void;\n    renderedH1: boolean;\n    setRenderedH1: (exists: boolean) => void;\n}\n\nconst context = React.createContext<IContextValue>({\n    bannerExists: false,\n    setBannerExists: () => {},\n    bannerRect: null,\n    setBannerRect: () => {},\n    overlayTitleBar: false,\n    setOverlayTitleBar: () => {},\n    renderedH1: false,\n    setRenderedH1: () => {},\n});\n\nexport function useBannerContext() {\n    const value = useContext(context);\n    useDebugValue(value);\n    return value;\n}\n\n/**\n * Pass this ref to banner's container to synchronize it's information with the context.\n */\nexport function useBannerContainerDivRef() {\n    const ref = useRef<HTMLDivElement | null>(null);\n    const measure = useMeasure(ref, true);\n    const { setBannerRect, setBannerExists } = useBannerContext();\n\n    useEffect(() => {\n        if (ref.current) {\n            // Adjust the measure for the current scroll offset.\n            setBannerRect(measure);\n            setBannerExists(true);\n        }\n    }, [ref, measure, setBannerExists, setBannerRect]);\n\n    return ref;\n}\n\nexport function BannerContextProvider(props: { children: React.ReactNode }) {\n    const [bannerExists, setBannerExists] = useState(false);\n    const [overlayTitleBar, setOverlayTitleBar] = useState(false);\n    const [bannerRect, setBannerRect] = useState<DOMRect | null>(null);\n    const [renderedH1, setRenderedH1] = useState(false);\n    usePageChangeListener(() => {\n        setBannerExists(false);\n        setBannerRect(null);\n        setOverlayTitleBar(false);\n    });\n    return (\n        <context.Provider\n            value={{\n                bannerExists,\n                setBannerExists,\n                bannerRect,\n                setBannerRect,\n                overlayTitleBar,\n                setOverlayTitleBar,\n                renderedH1,\n                setRenderedH1,\n            }}\n        >\n            {props.children}\n        </context.Provider>\n    );\n}\n\nexport function BannerContextProviderNoHistory(props: { children: React.ReactNode }) {\n    const [bannerExists, setBannerExists] = useState(false);\n    const [bannerRect, setBannerRect] = useState<DOMRect | null>(null);\n    const [overlayTitleBar, setOverlayTitleBar] = useState(false);\n    const [renderedH1, setRenderedH1] = useState(false);\n    return (\n        <context.Provider\n            value={{\n                bannerExists,\n                setBannerExists,\n                bannerRect,\n                setBannerRect,\n                overlayTitleBar,\n                setOverlayTitleBar,\n                renderedH1,\n                setRenderedH1,\n            }}\n        >\n            {props.children}\n        </context.Provider>\n    );\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { flexHelper } from \"@library/styles/styleHelpers\";\nimport { style } from \"@library/styles/styleShim\";\n\ninterface IProps {\n    className?: string;\n    children?: React.ReactNode;\n    tag?: keyof JSX.IntrinsicElements;\n    actualSpacer?: boolean;\n}\n\nconst flexSpacer = style({\n    label: \"flexSpacer\",\n    flex: 1,\n});\n\n/**\n * Implements Flex Spacer component - to keep flexed iteams centered, when the components in the flex box are not symmetric\n */\nexport default class FlexSpacer extends React.Component<IProps> {\n    public render() {\n        const content = ` `;\n        const Tag = this.props.tag || \"div\";\n        return (\n            <Tag\n                className={classNames(this.props.className, this.props.actualSpacer && flexSpacer)}\n                aria-hidden={true}\n                tabIndex={-1}\n            >\n                {content}\n                {this.props.children && <span className=\"sr-only\">{this.props.children}</span>}\n            </Tag>\n        );\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport ReduxActions, { ActionsUnion } from \"@library/redux/ReduxActions\";\nimport { INotification, INotificationWritable } from \"@library/@types/api/notifications\";\n\n/**\n * Redux actions for the current user's notification data.\n */\nexport default class NotificationsActions extends ReduxActions {\n    public static readonly GET_NOTIFICATION_REQUEST = \"@@notifications/GET_NOTIFICATION_REQUEST\";\n    public static readonly GET_NOTIFICATION_RESPONSE = \"@@notifications/GET_NOTIFICATION_RESPONSE\";\n    public static readonly GET_NOTIFICATION_ERROR = \"@@notifications/GET_NOTIFICATION_ERROR\";\n\n    /**\n     * Action creators for getting a single notification.\n     */\n    public static getNotificationACs = ReduxActions.generateApiActionCreators(\n        NotificationsActions.GET_NOTIFICATION_REQUEST,\n        NotificationsActions.GET_NOTIFICATION_RESPONSE,\n        NotificationsActions.GET_NOTIFICATION_ERROR,\n        {} as INotification,\n        {},\n    );\n\n    public static readonly GET_NOTIFICATIONS_REQUEST = \"@@notifications/GET_NOTIFICATIONS_REQUEST\";\n    public static readonly GET_NOTIFICATIONS_RESPONSE = \"@@notifications/GET_NOTIFICATIONS_RESPONSE\";\n    public static readonly GET_NOTIFICATIONS_ERROR = \"@@notifications/GET_NOTIFICATIONS_ERROR\";\n\n    /**\n     * Action creators for getting a paginated list of the current user's notifications.\n     */\n    public static getNotificationsACs = ReduxActions.generateApiActionCreators(\n        NotificationsActions.GET_NOTIFICATIONS_REQUEST,\n        NotificationsActions.GET_NOTIFICATIONS_RESPONSE,\n        NotificationsActions.GET_NOTIFICATIONS_ERROR,\n        {} as INotification[],\n        {},\n    );\n\n    public static readonly MARK_READ_REQUEST = \"@@notifications/MARK_READ_REQUEST\";\n    public static readonly MARK_READ_RESPONSE = \"@@notifications/MARK_READ_RESPONSE\";\n    public static readonly MARK_READ_ERROR = \"@@notifications/MARK_READ_ERROR\";\n\n    /**\n     * Action creators for marking a single notification as read.\n     */\n    public static markReadACs = ReduxActions.generateApiActionCreators(\n        NotificationsActions.MARK_READ_REQUEST,\n        NotificationsActions.MARK_READ_RESPONSE,\n        NotificationsActions.MARK_READ_ERROR,\n        {} as INotification,\n        {} as INotificationWritable,\n    );\n\n    public static readonly MARK_ALL_READ_REQUEST = \"@@notifications/MARK_ALL_READ_REQUEST\";\n    public static readonly MARK_ALL_READ_RESPONSE = \"@@notifications/MARK_ALL_READ_RESPONSE\";\n    public static readonly MARK_ALL_READ_ERROR = \"@@notifications/MARK_ALL_READ_ERROR\";\n\n    /**\n     * Action creators for marking all of the current user's notifications as read.\n     */\n    public static markAllReadACs = ReduxActions.generateApiActionCreators(\n        NotificationsActions.MARK_ALL_READ_REQUEST,\n        NotificationsActions.MARK_ALL_READ_RESPONSE,\n        NotificationsActions.MARK_ALL_READ_ERROR,\n        {},\n        {} as INotificationWritable,\n    );\n\n    /**\n     * Union of all possible action types in this class.\n     */\n    public static readonly ACTION_TYPES:\n        | ActionsUnion<typeof NotificationsActions.getNotificationACs>\n        | ActionsUnion<typeof NotificationsActions.getNotificationsACs>\n        | ActionsUnion<typeof NotificationsActions.markReadACs>\n        | ActionsUnion<typeof NotificationsActions.markAllReadACs>;\n\n    /**\n     * Get a single notification.\n     *\n     * @param id Unique ID of the notification.\n     */\n    public getNotification = (id: number) => {\n        return this.dispatchApi(\"get\", `/notifications/${id}`, NotificationsActions.getNotificationACs, {});\n    };\n\n    /**\n     * Get a paginated list of notifications for the current user.\n     */\n    public getNotifications = () => {\n        return this.dispatchApi(\"get\", \"/notifications\", NotificationsActions.getNotificationsACs, {});\n    };\n\n    /**\n     * Mark a single notification as read.\n     *\n     * @param id Unique ID of the notification.\n     */\n    public markRead = (id: number) => {\n        return this.dispatchApi(\"patch\", `/notifications/${id}`, NotificationsActions.markReadACs, {\n            read: true,\n        });\n    };\n\n    /**\n     * Mark all notifications for the current user as read.\n     */\n    public markAllRead = () => {\n        return this.dispatchApi(\"patch\", \"/notifications\", NotificationsActions.markAllReadACs, {\n            read: true,\n        });\n    };\n}\n","export enum LogoAlignment {\n    LEFT = \"left\",\n    CENTER = \"center\",\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { SearchActions } from \"@library/search/SearchActions\";\nimport { ALL_CONTENT_DOMAIN_NAME } from \"@library/search/searchConstants\";\nimport { ISearchForm, ISearchResults } from \"@library/search/searchTypes\";\nimport { ILoadable, LoadStatus } from \"@vanilla/library/src/scripts/@types/api/core\";\nimport { produce } from \"immer\";\nimport { reducerWithoutInitialState } from \"typescript-fsa-reducers\";\nimport { SEARCH_SCOPE_LOCAL } from \"@library/features/search/SearchScopeContext\";\n\nexport interface ISearchState {\n    form: ISearchForm;\n    results: ILoadable<ISearchResults>;\n    domainSearchResults: Record<string, ILoadable<ISearchResults>>;\n}\n\nexport const DEFAULT_CORE_SEARCH_FORM: ISearchForm = {\n    domain: ALL_CONTENT_DOMAIN_NAME,\n    query: \"\",\n    page: 1,\n    sort: \"relevance\",\n    scope: SEARCH_SCOPE_LOCAL,\n    initialized: false,\n};\n\nexport const INITIAL_SEARCH_STATE: ISearchState = {\n    form: DEFAULT_CORE_SEARCH_FORM,\n    results: {\n        status: LoadStatus.PENDING,\n    },\n    domainSearchResults: {},\n};\n\nconst reinitilizeParams = [\"sort\", \"domain\", \"scope\", \"page\"];\n\nexport const searchReducer = produce(\n    reducerWithoutInitialState<ISearchState>()\n        .case(SearchActions.updateSearchFormAC, (nextState, payload) => {\n            nextState.form.needsResearch = false;\n            if (nextState.form.initialized) {\n                for (const reinitParam of reinitilizeParams) {\n                    if (payload[reinitParam] !== undefined && nextState.form[reinitParam] !== payload[reinitParam]) {\n                        nextState.form.needsResearch = true;\n                    }\n                }\n            }\n\n            if (!nextState.form.initialized && payload.initialized) {\n                nextState.form.needsResearch = true;\n            }\n\n            nextState.form = {\n                ...nextState.form,\n                ...payload,\n            };\n\n            if (!payload.initialized) {\n                // Only when the search form changes outside of initialization.\n                if (!(\"page\" in payload)) {\n                    nextState.form.page = 1;\n                }\n\n                if (\"domain\" in payload) {\n                    delete nextState.form.types;\n                }\n            }\n\n            return nextState;\n        })\n        .case(SearchActions.performSearchACs.started, (nextState, payload) => {\n            nextState.form.needsResearch = false;\n            nextState.form.initialized = true;\n            nextState.results.status = LoadStatus.LOADING;\n\n            return nextState;\n        })\n        .case(SearchActions.performSearchACs.done, (nextState, payload) => {\n            nextState.results.status = LoadStatus.SUCCESS;\n            nextState.results.data = payload.result;\n\n            return nextState;\n        })\n        .case(SearchActions.performSearchACs.failed, (nextState, payload) => {\n            nextState.results.status = LoadStatus.ERROR;\n            nextState.results.error = payload.error;\n\n            return nextState;\n        })\n        .case(SearchActions.performDomainSearchACs.started, (nextState, payload) => {\n            const { domain } = payload;\n            nextState.domainSearchResults[domain] = {\n                status: LoadStatus.LOADING,\n            };\n\n            return nextState;\n        })\n        .case(SearchActions.performDomainSearchACs.done, (nextState, payload) => {\n            const { domain } = payload.params;\n            nextState.domainSearchResults[domain].status = LoadStatus.SUCCESS;\n            nextState.domainSearchResults[domain].data = payload.result;\n\n            return nextState;\n        })\n        .case(SearchActions.performDomainSearchACs.failed, (nextState, payload) => {\n            const { domain } = payload.params;\n            nextState.domainSearchResults[domain].status = LoadStatus.ERROR;\n            nextState.domainSearchResults[domain].error = payload.error;\n\n            return nextState;\n        })\n        .case(SearchActions.resetFormAC, (nextState) => {\n            nextState.form = { ...DEFAULT_CORE_SEARCH_FORM };\n            nextState.results = {\n                status: LoadStatus.PENDING,\n            };\n            return nextState;\n        }),\n);\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { important } from \"csx\";\nexport type areaHiddenType = \"true\" | \"false\" | boolean | undefined;\n\nexport const visibility = useThemeCache(() => {\n    const style = styleFactory(\"visibility\");\n    const onEmpty = (nest?: object) => {\n        return style(\"onEmpty\", {\n            ...{\n                \"&:empty\": {\n                    display: \"none\",\n                },\n                ...nest,\n            },\n        });\n    };\n\n    const visuallyHidden = style(\"srOnly\", Mixins.absolute.srOnly());\n\n    const displayNone = style(\"displayNone\", {\n        display: important(\"none\"),\n    });\n\n    return {\n        onEmpty,\n        displayNone,\n        visuallyHidden,\n    };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { singleBorder } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { Variables } from \"@library/styles/Variables\";\nimport { shadowHelper, shadowOrBorderBasedOnLightness } from \"@library/styles/shadowHelpers\";\nimport { CSSObject } from \"@emotion/css\";\nimport { TLength } from \"@library/styles/styleShim\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { em, important, percent, px, border } from \"csx\";\nimport { lineHeightAdjustment } from \"@library/styles/textUtils\";\nimport { FontSizeProperty } from \"csstype\";\nimport { blockQuoteVariables } from \"@rich-editor/quill/components/blockQuoteStyles\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { media } from \"@library/styles/styleShim\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\n\nexport enum TableStyle {\n    HORIZONTAL_BORDER = \"horizontalBorder\",\n    HORIZONTAL_BORDER_STRIPED = \"horizontalBorderStriped\",\n    VERTICAL_BORDER = \"verticalBorder\",\n    VERTICAL_BORDER_STRIPED = \"verticalBorderStriped\",\n}\n\n/**\n * @varGroup userContent\n * @commonTitle User Content\n * @description Variables affecting content created by users of the site.\n * If you input it through a text editor, it's likely user content.\n */\nexport const userContentVariables = useThemeCache((forcedVars?: IThemeVariables) => {\n    const makeThemeVars = variableFactory(\"userContent\", forcedVars);\n    const globalVars = globalVariables(forcedVars);\n    const { mainColors } = globalVars;\n\n    /**\n     * @varGroup userContent.fonts\n     */\n    const fonts = makeThemeVars(\"fonts\", {\n        /**\n         * @var userContent.fonts.size\n         * @description Default font size for user content.\n         */\n        size: globalVars.fonts.size.large,\n\n        /**\n         * @varGroup userContent.fonts.headings\n         * @commonDescription These are best specified as a relative units. (Eg. \"1.5em\", \"2em\").\n         */\n        headings: {\n            /**\n             * @var userContent.fonts.headings.h1\n             */\n            h1: \"2em\",\n            /**\n             * @var userContent.fonts.headings.h2\n             */\n            h2: \"1.5em\",\n            /**\n             * @var userContent.fonts.headings.h3\n             */\n            h3: \"1.25em\",\n            /**\n             * @var userContent.fonts.headings.h4\n             */\n            h4: \"1em\",\n            /**\n             * @var userContent.fonts.headings.h5\n             */\n            h5: \".875em\",\n            /**\n             * @var userContent.fonts.headings.h6\n             */\n            h6: \".85em\",\n        },\n    });\n\n    /**\n     * @varGroup userContent.tables\n     * @title User Content - Tables\n     */\n    const tableInit = makeThemeVars(\"tables\", {\n        /**\n         * @var userContent.tables.style\n         * @description Choose a preset for the table styles.\n         * @type string\n         * @enum horizontalBorder|horizontalBorderStriped|verticalBorder|verticalBorderStriped\n         */\n        style: TableStyle.HORIZONTAL_BORDER_STRIPED,\n        /**\n         * @varGroup userContent.tables.borders\n         * @title User Content - Tables - Borders\n         * @expand border\n         */\n        borders: globalVars.border,\n\n        cell: {\n            /**\n             * @var userContent.tables.cell.alignment\n             * @title Cell Alignment\n             * @description Choose the alignment of table cells.\n             * @type string\n             * @enum \"center\" | \"left\" | \"right\",\n             */\n            alignment: \"left\" as \"center\" | \"left\" | \"right\",\n        },\n\n        /**\n         * @var userContent.tables.mobileBreakpoint\n         * @title Mobile Breakpoint\n         * @description The device width (pixels) where the table switches to a mobile layout.\n         */\n        mobileBreakpoint: 600,\n    });\n\n    const tables = makeThemeVars(\"tables\", {\n        ...tableInit,\n        striped: [TableStyle.HORIZONTAL_BORDER_STRIPED, TableStyle.VERTICAL_BORDER_STRIPED].includes(tableInit.style),\n        stripeColor: globalVars.mixBgAndFg(0.05),\n        outerBorderRadius: [TableStyle.VERTICAL_BORDER_STRIPED, TableStyle.VERTICAL_BORDER].includes(tableInit.style)\n            ? 4\n            : 0,\n        horizontalBorders: {\n            enabled: true, // All current variants have horizontal borders.\n            borders: tableInit.borders,\n        },\n        verticalBorders: {\n            enabled: [TableStyle.VERTICAL_BORDER_STRIPED, TableStyle.VERTICAL_BORDER].includes(tableInit.style),\n            borders: tableInit.borders,\n        },\n    });\n\n    const blocks = makeThemeVars(\"blocks\", {\n        margin: fonts.size,\n        fg: mainColors.fg,\n        bg: globalVars.mixBgAndFg(0.035),\n    });\n\n    /**\n     * @varGroup userContent.embeds\n     * @title User Content - Embeds\n     */\n    const embeds = makeThemeVars(\"embeds\", {\n        /**\n         * @var userContent.embeds.bg\n         * @title Background\n         * @type string\n         * @format hex-color\n         */\n        bg: mainColors.bg,\n        /**\n         * @var userContent.embeds.fg\n         * @title Text Color\n         * @type string\n         * @format hex-color\n         */\n        fg: mainColors.fg,\n\n        /**\n         * @var userContent.embeds.borderRadius\n         * @title Border Radius\n         * @description Border radius of an embed in pixels.\n         * @type string|number\n         */\n        borderRadius: px(2),\n    });\n\n    /**\n     * @varGroup userContent.code\n     * @title User Content - Code\n     * @commonDescription Applies to inline and block style code items.\n     */\n    const code = makeThemeVars(\"code\", {\n        /**\n         * @var userContent.code.fontSize\n         * @type string|number\n         */\n        fontSize: em(0.85),\n        /**\n         * @var userContent.code.borderRadius\n         * @type string|number\n         */\n        borderRadius: 2,\n    });\n\n    /**\n     * @varGroup userContent.codeInline\n     * @title User Content - Code (Inline)\n     * @commonDescription Applies only to inline code elements. Not Blocks.\n     */\n    const codeInline = makeThemeVars(\"codeInline\", {\n        /**\n         * @var userContent.codeInline.borderRadius\n         * @type string|number\n         */\n        borderRadius: code.borderRadius,\n\n        // TODO: replace with Variables.spacing()\n        paddingVertical: em(0.2),\n        // TODO: replace with Variables.spacing()\n        paddingHorizontal: em(0.4),\n\n        /**\n         * @var userContent.codeInline.fg\n         * @title Text Color\n         * @type string\n         * @format hex-color\n         */\n        fg: blocks.fg,\n        /**\n         * @var userContent.codeInline.bg\n         * @title Background\n         * @type string\n         * @format hex-color\n         */\n        bg: blocks.bg,\n    });\n\n    /**\n     * @varGroup userContent.codeBlock\n     * @title User Content - Code (Block)\n     * @commonDescription Applies only to code block elements. Not inline code.\n     */\n    const codeBlock = makeThemeVars(\"codeBlock\", {\n        /**\n         * @var userContent.codeBlock.borderRadius\n         * @type string|number\n         */\n        borderRadius: globalVars.border.radius,\n\n        // TODO: replace with Variables.spacing()\n        paddingVertical: fonts.size,\n        // TODO: replace with Variables.spacing()\n        paddingHorizontal: fonts.size,\n\n        /**\n         * @var userContent.codeBlock.lineHeight\n         * @type number\n         */\n        lineHeight: 1.45,\n        /**\n         * @var userContent.codeBlock.fg\n         * @title Text Color\n         * @type string\n         * @format hex-color\n         */\n        fg: blocks.fg,\n        /**\n         * @var userContent.codeBlock.bg\n         * @title Background\n         * @type string\n         * @format hex-color\n         */\n        bg: blocks.bg,\n    });\n\n    /**\n     * @varGroup userContent.list\n     * @title User Content - Lists\n     */\n    const list = makeThemeVars(\"list\", {\n        /**\n         * @varGroup userContent.list.spacing\n         * @title User Content - List - Spacing\n         * @expand spacing\n         */\n        spacing: Variables.spacing({\n            top: em(0.5),\n            left: em(2),\n        }),\n        listDecoration: {\n            minWidth: em(2),\n        },\n        nestedList: {\n            margin: \"0 0 0 1em\",\n        },\n    });\n\n    const spacing = makeThemeVars(\"spacing\", {\n        base: 2 * Math.ceil((globalVars.spacer.size * 5) / 8),\n    });\n\n    return {\n        fonts,\n        list,\n        blocks,\n        code,\n        codeInline,\n        codeBlock,\n        embeds,\n        spacing,\n        tables,\n    };\n});\n\n/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nexport const userContentClasses = useThemeCache(() => {\n    const style = styleFactory(\"userContent\");\n    const vars = userContentVariables();\n    const globalVars = globalVariables();\n\n    const listItem: CSSObject = {\n        position: \"relative\",\n        ...Mixins.margin({\n            top: vars.list.spacing.top,\n            left: vars.list.spacing.left,\n        }),\n        ...{\n            \"&:first-child\": {\n                marginTop: 0,\n            },\n            \"&:last-child\": {\n                marginBottom: 0,\n            },\n        },\n    };\n\n    const headingStyle = (tag: string, fontSize: FontSizeProperty<TLength>): CSSObject => {\n        return {\n            marginTop: styleUnit(vars.spacing.base),\n            fontSize,\n            ...lineHeightAdjustment(),\n        };\n    };\n\n    const headings: CSSObject = {\n        \"& h1:not(.heading)\": headingStyle(\"h1\", vars.fonts.headings.h1),\n        \"& h2:not(.heading)\": headingStyle(\"h2\", vars.fonts.headings.h2),\n        \"& h3:not(.heading)\": headingStyle(\"h3\", vars.fonts.headings.h3),\n        \"& h4:not(.heading)\": headingStyle(\"h4\", vars.fonts.headings.h4),\n        \"& h5:not(.heading)\": headingStyle(\"h5\", vars.fonts.headings.h5),\n        \"& h6:not(.heading)\": headingStyle(\"h6\", vars.fonts.headings.h6),\n    };\n\n    const lists: CSSObject = {\n        [\"& ol, & ul\"]: {\n            listStylePosition: \"inside\",\n            margin: `1em 0 1em 2em`,\n            padding: 0,\n        },\n        [\"& ul\"]: {\n            listStyle: \"disc\",\n            ...{\n                [`& > li`]: {\n                    listStyle: \"none\",\n                    position: \"relative\",\n                },\n                [`& > li::before`]: {\n                    fontFamily: `'Arial', serif`,\n                    content: `\"•\"`,\n                    position: \"absolute\",\n                    left: em(-1),\n                },\n                [`& ol, & ul`]: {\n                    margin: vars.list.nestedList.margin,\n                },\n            },\n        },\n        [\"& ol\"]: {\n            ...{\n                [`& > li`]: {\n                    listStyle: \"decimal\",\n                },\n                [`& ol > li`]: {\n                    listStyle: \"lower-alpha\",\n                },\n                [`& ol ol > li`]: {\n                    listStyle: \"lower-roman\",\n                },\n                [`& ol ol ol > li`]: {\n                    listStyle: \"decimal\",\n                },\n                [`& ol ol ol ol > li`]: {\n                    listStyle: \"lower-alpha\",\n                },\n                [`& ol ol ol ol ol > li`]: {\n                    listStyle: \"lower-roman\",\n                },\n                [`& ol ol ol ol ol ol > li`]: {\n                    listStyle: \"decimal\",\n                },\n                [`& ol, & ul`]: {\n                    margin: vars.list.nestedList.margin,\n                },\n            },\n        },\n        [`& li`]: {\n            margin: `5px 0`,\n            ...{\n                [`&, & *:first-child`]: {\n                    marginTop: 0,\n                },\n                [`&, & *:last-child`]: {\n                    marginBottom: 0,\n                },\n            },\n        },\n    };\n\n    const paragraphSpacing: CSSObject = {\n        \"& > p\": {\n            marginTop: 0,\n            marginBottom: 0,\n            ...{\n                \"&:not(:first-child)\": {\n                    marginTop: vars.blocks.margin * 0.5,\n                },\n                \"&:first-child\": {\n                    ...lineHeightAdjustment(),\n                },\n            },\n        },\n\n        \"&& > *:not(:last-child):not(.embedResponsive)\": {\n            marginBottom: vars.blocks.margin,\n        },\n\n        \"&& > *:first-child\": {\n            marginTop: 0,\n            ...{\n                \"&::before\": {\n                    marginTop: 0,\n                },\n            },\n        },\n    };\n\n    const linkColors = Mixins.clickable.itemState();\n    const linkStyle = {\n        \"& a\": {\n            color: ColorsUtils.colorOut(linkColors.color as string),\n        },\n        \"& a:hover\": {\n            color: ColorsUtils.colorOut(globalVars.links.colors.hover),\n            textDecoration: \"underline\",\n        },\n        \"& a:focus\": {\n            color: ColorsUtils.colorOut(globalVars.links.colors.focus),\n            textDecoration: \"underline\",\n        },\n        \"& a.focus-visible\": {\n            color: ColorsUtils.colorOut(globalVars.links.colors.keyboardFocus),\n            textDecoration: \"underline\",\n        },\n        \"& a:active\": {\n            color: ColorsUtils.colorOut(globalVars.links.colors.active),\n            textDecoration: \"underline\",\n        },\n    };\n\n    const codeStyles: CSSObject = {\n        \".code\": {\n            position: \"relative\",\n            fontSize: vars.code.fontSize,\n            fontFamily: `Menlo, Monaco, Consolas, \"Courier New\", monospace`,\n            maxWidth: percent(100),\n            overflowX: \"auto\",\n            margin: 0,\n            color: ColorsUtils.colorOut(vars.blocks.fg),\n            backgroundColor: ColorsUtils.colorOut(vars.blocks.bg),\n            border: \"none\",\n        },\n        \"&& .codeInline\": {\n            whiteSpace: \"normal\",\n            ...Mixins.padding({\n                top: vars.codeInline.paddingVertical,\n                bottom: vars.codeInline.paddingVertical,\n                left: vars.codeInline.paddingHorizontal,\n                right: vars.codeInline.paddingHorizontal,\n            }),\n            color: ColorsUtils.colorOut(vars.codeInline.fg),\n            backgroundColor: ColorsUtils.colorOut(vars.codeInline.bg),\n            borderRadius: vars.codeInline.borderRadius,\n            // We CAN'T use display: `inline` & position: `relative` together.\n            // This causes the cursor to disappear in a contenteditable.\n            // @see https://bugs.chromium.org/p/chromium/issues/detail?id=724821\n            display: \"inline\",\n            position: \"static\",\n        },\n        \"&& .codeBlock\": {\n            display: \"block\",\n            wordWrap: \"normal\",\n            lineHeight: vars.codeBlock.lineHeight,\n            borderRadius: vars.codeBlock.borderRadius,\n            flexShrink: 0, // Needed so code blocks don't collapse in the editor.\n            whiteSpace: \"pre\",\n            color: ColorsUtils.colorOut(vars.codeBlock.fg),\n            backgroundColor: ColorsUtils.colorOut(vars.codeBlock.bg),\n            ...Mixins.padding({\n                top: vars.codeBlock.paddingVertical,\n                bottom: vars.codeBlock.paddingVertical,\n                left: vars.codeBlock.paddingHorizontal,\n                right: vars.codeBlock.paddingHorizontal,\n            }),\n        },\n    };\n\n    // Blockquotes & spoilers\n    // These are temporarily kludged here due to lack of time.\n    // They should be fully converted in the future but at the moment\n    // Only the bare minimum is convverted in order to make the colors work.\n    const spoilersAndQuotes: CSSObject = {\n        \".embedExternal-content\": {\n            borderRadius: vars.embeds.borderRadius,\n            ...{\n                \"&::after\": {\n                    borderRadius: vars.embeds.borderRadius,\n                },\n            },\n        },\n        \".embedText-content\": {\n            background: ColorsUtils.colorOut(vars.embeds.bg),\n            color: ColorsUtils.colorOut(vars.embeds.fg),\n            overflow: \"hidden\",\n            ...shadowOrBorderBasedOnLightness(\n                globalVars.body.backgroundImage.color,\n                Mixins.border({\n                    color: vars.embeds.fg.fade(0.3),\n                }),\n                shadowHelper().embed(),\n            ),\n        },\n        [`.embedText-title,\n          .embedLink-source,\n          .embedLink-excerpt`]: {\n            color: ColorsUtils.colorOut(vars.blocks.fg),\n        },\n        \".metaStyle\": {\n            opacity: 0.8,\n        },\n        \".embedLoader-box\": {\n            background: ColorsUtils.colorOut(vars.embeds.bg),\n            ...Mixins.border({\n                color: vars.embeds.fg.fade(0.3),\n            }),\n        },\n    };\n\n    const embeds: CSSObject = {\n        \"&& .embedExternal\": {\n            marginBottom: vars.blocks.margin,\n        },\n        [`&& .float-left,\n          && .float-right`]: {\n            marginBottom: \"0 !important\",\n        },\n        [`&& .float-left .embedExternal-content,\n          && .float-right .embedExternal-content`]: {\n            marginBottom: vars.blocks.margin,\n        },\n    };\n\n    const blockQuoteVars = blockQuoteVariables();\n\n    const blockquotes: CSSObject = {\n        \".blockquote\": {\n            color: ColorsUtils.colorOut(blockQuoteVars.colors.fg),\n        },\n    };\n\n    const tables: CSSObject = {\n        \".tableWrapper\": {\n            overflowX: \"auto\",\n            width: percent(100),\n        },\n        \"& > .tableWrapper > table\": {\n            width: percent(100),\n        },\n        // Rest of the table styles\n        \"& > .tableWrapper th\": {\n            whiteSpace: \"nowrap\",\n        },\n        \"& > .tableWrapper td, & > .tableWrapper th\": {\n            overflowWrap: \"break-word\",\n            minWidth: 80,\n            ...Mixins.padding({\n                vertical: 6,\n                horizontal: 12,\n            }),\n            border: \"none\",\n            textAlign: vars.tables.cell.alignment,\n            ...(vars.tables.horizontalBorders.enabled\n                ? {\n                      borderTop: singleBorder(vars.tables.horizontalBorders.borders),\n                      borderBottom: singleBorder(vars.tables.horizontalBorders.borders),\n                  }\n                : {}),\n            ...(vars.tables.verticalBorders.enabled\n                ? {\n                      borderLeft: singleBorder(vars.tables.verticalBorders.borders),\n                      borderRight: singleBorder(vars.tables.verticalBorders.borders),\n                  }\n                : {}),\n        },\n        \"& > .tableWrapper tr:nth-child(even)\": vars.tables.striped\n            ? {\n                  background: ColorsUtils.colorOut(vars.tables.stripeColor),\n              }\n            : {},\n        \"& > .tableWrapper th, & > .tableWrapper thead td\": {\n            fontWeight: globalVars.fonts.weights.bold,\n        },\n\n        // Mobile table styles.\n        \".mobileTableHead\": {\n            display: \"none\",\n        },\n    };\n\n    const outerBorderMixin = (): CSSObject => {\n        return {\n            borderRadius: vars.tables.outerBorderRadius,\n            borderTop: vars.tables.horizontalBorders.enabled\n                ? singleBorder(vars.tables.horizontalBorders.borders)\n                : undefined,\n            borderBottom: vars.tables.horizontalBorders.enabled\n                ? singleBorder(vars.tables.horizontalBorders.borders)\n                : undefined,\n            borderLeft: vars.tables.verticalBorders.enabled\n                ? singleBorder(vars.tables.verticalBorders.borders)\n                : undefined,\n            borderRight: vars.tables.verticalBorders.enabled\n                ? singleBorder(vars.tables.verticalBorders.borders)\n                : undefined,\n        };\n    };\n\n    // Apply outer border radii.\n    // border-collapse prevents our outer radius from applying.\n    const tableOuterRadiusQuery = media(\n        { minWidth: vars.tables.mobileBreakpoint + 1 },\n        {\n            ...{\n                \".tableWrapper\": outerBorderMixin(),\n                \"& > .tableWrapper thead tr:first-child > *, & > .tableWrapper tbody:first-child tr:first-child > *\": {\n                    // Get rid of the outer border radius.\n                    borderTop: \"none\",\n                },\n                \"& > .tableWrapper :not(thead) tr:last-child > *\": {\n                    // Get rid of the outer border radius.\n                    borderBottom: \"none\",\n                },\n                \"& > .tableWrapper tr > *:last-child\": {\n                    // Get rid of the outer border radius.\n                    borderRight: \"none\",\n                },\n                \"& > .tableWrapper tr > *:first-child, & > .tableWrapper tr > .mobileTableHead:first-child + *\": {\n                    // Get rid of the outer border radius.\n                    borderLeft: \"none\",\n                },\n            },\n        },\n    );\n\n    const tableMobileQuery = media(\n        { maxWidth: vars.tables.mobileBreakpoint },\n        {\n            ...{\n                \".tableWrapper .tableHead\": {\n                    ...Mixins.absolute.srOnly(),\n                },\n                \".tableWrapper tr\": {\n                    display: \"block\",\n                    flexWrap: \"wrap\",\n                    width: percent(100),\n                    background: \"none !important\",\n                    marginBottom: vars.blocks.margin,\n                    ...outerBorderMixin(),\n                },\n                \".tableWrapper tr .mobileStripe\": vars.tables.striped\n                    ? {\n                          borderTop: \"none\",\n                          borderBottom: \"none\",\n                          background: ColorsUtils.colorOut(vars.tables.stripeColor),\n                      }\n                    : {\n                          borderTop: \"none\",\n                          borderBottom: \"none\",\n                      },\n                // First row.\n                \".tableWrapper tr > *:first-child\": {\n                    borderTop: \"none\",\n                },\n                // Last row.\n                \".tableWrapper tr > *:last-child\": {\n                    borderBottom: \"none\",\n                },\n                \".tableWrapper .mobileTableHead\": {\n                    borderBottom: \"none\",\n                },\n                \".tableWrapper .mobileTableHead + *\": {\n                    marginTop: -6,\n                    borderTop: \"none\",\n                },\n                \".tableWrapper tr > *\": {\n                    width: percent(100),\n                    wordWrap: \"break-word\",\n                    display: \"block\",\n                    borderLeft: \"none\",\n                    borderRight: \"none\",\n                },\n                \".tableWrapper tr > :not(.mobileTableHead)\": {\n                    borderRight: \"none\",\n                },\n            },\n        },\n    );\n\n    const root = style(\n        {\n            // These CAN'T be flexed. That breaks margin collapsing.\n            display: important(\"block\"),\n            position: \"relative\",\n            width: percent(100),\n            wordBreak: \"break-word\",\n            lineHeight: globalVars.lineHeights.base,\n            fontSize: vars.fonts.size,\n            marginTop: lineHeightAdjustment()[\"::before\"]?.marginTop,\n            ...{\n                // A placeholder might be put in a ::before element. Make sure we match the line-height adjustment.\n                \"& iframe\": {\n                    width: percent(100),\n                },\n                ...tables,\n                ...headings,\n                ...lists,\n                ...paragraphSpacing,\n                ...codeStyles,\n                ...spoilersAndQuotes,\n                ...embeds,\n                ...blockquotes,\n                ...linkStyle,\n            },\n        },\n        tableOuterRadiusQuery,\n        tableMobileQuery,\n    );\n\n    return { root };\n});\n\nexport const userContentCSS = () => {\n    const globalVars = globalVariables();\n    cssOut(\n        `\n        .Container .userContent h1,\n        .Container .userContent h2,\n        .Container.userContent h3,\n        .Container .userContent h4,\n        .Container .userContent h5,\n        .Container .userContent h6`,\n        {\n            color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n        },\n    );\n};\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { EmbedContainerSize } from \"@library/embeddedContent/components/EmbedContainerSize\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { shadowHelper, shadowOrBorderBasedOnLightness } from \"@library/styles/shadowHelpers\";\nimport { userSelect } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { important, percent, px } from \"csx\";\nimport { CSSObject } from \"@emotion/css\";\n\nexport const embedContainerVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"embedContainer\");\n\n    const colors = makeThemeVars(\"colors\", {\n        bg: globalVars.mainColors.bg,\n        fg: globalVars.mainColors.fg,\n    });\n\n    const border = makeThemeVars(\"border\", {\n        style: \"none\",\n        width: 0,\n        radius: px(4),\n    });\n\n    const title = makeThemeVars(\"title\", {\n        size: globalVars.fonts.size.medium,\n        weight: globalVars.fonts.weights.bold,\n    });\n\n    const dimensions = makeThemeVars(\"dimensions\", {\n        maxEmbedWidth: 640,\n    });\n\n    const spacing = makeThemeVars(\"padding\", {\n        padding: 18,\n    });\n\n    return { border, spacing, colors, title, dimensions };\n});\n\nexport const embedContainerClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = embedContainerVariables();\n    const style = styleFactory(\"embed\");\n\n    const hoverFocusStates = {\n        \"&:hover\": {\n            boxShadow: `0 0 0 ${px(globalVars.embed.select.borderWidth)} ${globalVars.embed.focus.color.fade(\n                0.5,\n            )} inset`,\n        },\n        \".embed-isSelected &\": {\n            boxShadow: `0 0 0 ${px(\n                globalVars.embed.select.borderWidth,\n            )} ${globalVars.embed.focus.color.toString()} inset`,\n        },\n    };\n\n    const sizes: { [x in EmbedContainerSize]: CSSObject } = {\n        [EmbedContainerSize.SMALL]: {\n            width: px(500),\n            maxWidth: percent(100),\n        },\n        [EmbedContainerSize.MEDIUM]: {\n            width: px(globalVars.embed.sizing.width),\n            maxWidth: percent(100),\n        },\n        [EmbedContainerSize.FULL_WIDTH]: {\n            maxWidth: percent(100),\n            width: percent(100),\n        },\n    };\n\n    const makeRootClass = (size: EmbedContainerSize, inEditor: boolean, withPadding: boolean = true) =>\n        style(size, {\n            fontSize: styleUnit(globalVars.fonts.size.medium),\n            background: ColorsUtils.colorOut(vars.colors.bg),\n            display: \"block\",\n            position: \"relative\",\n            textDecoration: \"none\",\n            color: ColorsUtils.colorOut(vars.colors.fg),\n            margin: \"auto\",\n            padding: withPadding ? vars.spacing.padding : 0,\n            ...(inEditor ? userSelect() : {}),\n            ...sizes[size],\n            ...Mixins.border(vars.border),\n            ...shadowOrBorderBasedOnLightness(\n                globalVars.body.backgroundImage.color,\n                Mixins.border(),\n                shadowHelper().embed(),\n            ),\n            ...{\n                // These 2 can't be joined together or their pseudselectors don't get created properly.\n                \"&.isLoading\": {\n                    cursor: \"pointer\",\n                    ...hoverFocusStates,\n                },\n                \"&.hasError\": {\n                    cursor: \"pointer\",\n                    background: ColorsUtils.colorOut(globalVars.messageColors.warning.bg),\n                    color: ColorsUtils.colorOut(globalVars.messageColors.warning.fg),\n                    ...hoverFocusStates,\n                },\n                \"&.embedImage\": {\n                    border: 0,\n                    boxShadow: \"none\",\n                },\n                \"&.embedImage .embedExternal-content\": {\n                    ...shadowOrBorderBasedOnLightness(\n                        globalVars.body.backgroundImage.color,\n                        Mixins.border(),\n                        shadowHelper().embed(),\n                    ),\n                },\n            },\n        });\n\n    const title = style(\"title\", {\n        ...{\n            \"&&&\": {\n                // Nested for compatibility.\n                fontSize: styleUnit(vars.title.size),\n                fontWeight: vars.title.weight,\n                marginTop: 0,\n                marginBottom: 4,\n                display: \"block\",\n                width: percent(100),\n                padding: 0,\n                lineHeight: globalVars.lineHeights.condensed,\n                color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n                whiteSpace: \"nowrap\",\n                overflow: \"hidden\",\n                textOverflow: \"ellipsis\",\n            },\n        },\n    });\n\n    return { makeRootClass, title };\n});\n\nexport const embedContentClasses = useThemeCache(() => {\n    const style = styleFactory(\"embedContent\");\n\n    const small = style(\"small\", {\n        display: \"inline-flex\",\n        width: \"auto\",\n    });\n\n    const root = style(\"root\", {\n        position: \"relative\",\n    });\n\n    return { small, root };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { percent, viewHeight } from \"csx\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\n\nexport const frameVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"frame\");\n\n    const colors = makeThemeVars(\"colors\", {\n        bg: globalVars.body.backgroundImage.color,\n        fg: globalVars.mainColors.fg,\n    });\n\n    const sizing = makeThemeVars(\"sizing\", {\n        large: 720,\n        medium: 516,\n        small: 375,\n    });\n\n    const border = makeThemeVars(\"border\", {\n        radius: globalVars.border.radius,\n    });\n\n    const spacing = makeThemeVars(\"spacing\", {\n        padding: 16,\n    });\n\n    const header = makeThemeVars(\"header\", {\n        spacing: spacing.padding,\n        minHeight: 44,\n        fontSize: globalVars.fonts.size.subTitle,\n    });\n\n    const footer = makeThemeVars(\"footer\", {\n        spacing: spacing.padding,\n        minHeight: header.minHeight,\n    });\n\n    return {\n        colors,\n        sizing,\n        border,\n        spacing,\n        header,\n        footer,\n    };\n});\n\nexport const frameClasses = useThemeCache(() => {\n    const vars = frameVariables();\n    const style = styleFactory(\"frame\");\n    const mediaQueries = layoutVariables().mediaQueries();\n\n    const headerWrap = style(\"headerWrap\", {\n        background: ColorsUtils.colorOut(vars.colors.bg),\n        zIndex: 2,\n        willChange: \"height\",\n    });\n    const bodyWrap = style(\"bodyWrap\", {\n        position: \"relative\",\n        background: ColorsUtils.colorOut(vars.colors.bg),\n        width: percent(100),\n    });\n    const footerWrap = style(\"footerWrap\", {\n        background: ColorsUtils.colorOut(vars.colors.bg),\n        zIndex: 2,\n        willChange: \"height\",\n    });\n\n    const root = style(\n        {\n            backgroundColor: ColorsUtils.colorOut(vars.colors.bg),\n            maxHeight: viewHeight(80),\n            height: percent(100),\n            borderRadius: styleUnit(vars.border.radius),\n            width: percent(100),\n            position: \"relative\",\n            display: \"flex\",\n            flexDirection: \"column\",\n            minHeight: 0, // https://bugs.chromium.org/p/chromium/issues/detail?id=927066\n            ...{\n                [`.${bodyWrap}`]: {\n                    flexGrow: 1,\n                    overflowY: \"auto\",\n                },\n            },\n        },\n        mediaQueries.xs({\n            maxHeight: percent(100),\n        }),\n    );\n\n    return {\n        root,\n        headerWrap,\n        bodyWrap,\n        footerWrap,\n    };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useContext } from \"react\";\nimport { Optionalize } from \"@library/@types/utils\";\nimport { ISearchOptionData } from \"@library/features/search/SearchOption\";\nimport { IComboBoxOption } from \"@library/features/search/SearchBar\";\nimport { formatUrl } from \"@library/utility/appUtils\";\n\nconst defaultOptionProvider: ISearchOptionProvider = {\n    supportsAutoComplete: false,\n    autocomplete: () => Promise.resolve([]),\n    makeSearchUrl: (query) => formatUrl(`/search?search=${query}`),\n};\n\nconst SearchContext = React.createContext<IWithSearchProps>({\n    searchOptionProvider: defaultOptionProvider,\n});\nexport default SearchContext;\n\nexport function SearchContextProvider({ children }) {\n    return (\n        <SearchContext.Provider value={{ searchOptionProvider: SearchContextProvider.optionProvider }}>\n            {children}\n        </SearchContext.Provider>\n    );\n}\n\nSearchContextProvider.optionProvider = defaultOptionProvider as ISearchOptionProvider;\nSearchContextProvider.setOptionProvider = (provider: ISearchOptionProvider) => {\n    SearchContextProvider.optionProvider = provider;\n};\n\nexport interface ISearchOptionProvider {\n    supportsAutoComplete?: boolean;\n    autocomplete(query: string, options?: { [key: string]: any }): Promise<Array<IComboBoxOption<ISearchOptionData>>>;\n    makeSearchUrl(query: string): string;\n}\n\nexport interface IWithSearchProps {\n    searchOptionProvider: ISearchOptionProvider;\n}\n\nexport function useSearch() {\n    return useContext(SearchContext);\n}\n\n/**\n * HOC to inject API context\n *\n * @param WrappedComponent - The component to wrap\n */\nexport function withSearch<T extends IWithSearchProps = IWithSearchProps>(WrappedComponent: React.ComponentType<T>) {\n    const displayName = WrappedComponent.displayName || WrappedComponent.name || \"Component\";\n    class ComponentWithDevice extends React.Component<Optionalize<T, IWithSearchProps>> {\n        public static displayName = `withSearch(${displayName})`;\n        public render() {\n            return (\n                <SearchContext.Consumer>\n                    {(context) => {\n                        // https://github.com/Microsoft/TypeScript/issues/28938\n                        return <WrappedComponent {...context} {...(this.props as T)} />;\n                    }}\n                </SearchContext.Consumer>\n            );\n        }\n    }\n    return ComponentWithDevice;\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { percent } from \"csx\";\nexport const dateRangeClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const style = styleFactory(\"dateRange\");\n\n    const input = style(\"input\", {\n        width: styleUnit(136),\n        maxWidth: percent(100),\n    });\n\n    const root = style({\n        display: \"block\",\n        position: \"relative\",\n        width: percent(100),\n    });\n\n    const boundary = style(\"boundary\", {\n        display: \"flex\",\n        flexWrap: \"wrap\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        width: percent(100),\n        ...{\n            \"& + &\": {\n                marginTop: styleUnit(12),\n            },\n        },\n    });\n\n    const label = style(\"label\", {\n        overflow: \"hidden\",\n        fontWeight: globalVars.fonts.weights.semiBold,\n        wordBreak: \"break-word\",\n        textOverflow: \"ellipsis\",\n        maxWidth: percent(100),\n        paddingLeft: styleUnit(8),\n    });\n\n    return {\n        root,\n        boundary,\n        label,\n        input,\n    };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport getStore from \"@library/redux/getStore\";\nimport { isComponentThemingEnabled } from \"@library/utility/componentRegistry\";\n\nexport function getThemeVariables() {\n    const state = getStore().getState();\n    if (state !== null) {\n        if (state.theme.forcedVariables) {\n            return state.theme.forcedVariables;\n        }\n        if (!isComponentThemingEnabled()) {\n            return {};\n        }\n        const assets = state.theme.assets.data || {};\n        const variables = assets.variables ? assets.variables.data : {};\n        return variables;\n    } else {\n        return {};\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { t } from \"@library/utility/appUtils\";\nimport { richEditorClasses } from \"@rich-editor/editor/richEditorStyles\";\nimport classNames from \"classnames\";\nimport { areaHiddenType } from \"@library/styles/styleHelpersVisibility\";\n\nconst currentColorFill = {\n    fill: \"currentColor\",\n};\n\nexport function BoldIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"Bold\")}</title>\n            <path\n                d=\"M6.511,18v-.62a4.173,4.173,0,0,0,.845-.093.885.885,0,0,0,.736-.79,5.039,5.039,0,0,0,.063-.884V8.452a6.585,6.585,0,0,0-.047-.876,1.116,1.116,0,0,0-.194-.527.726.726,0,0,0-.4-.263,3.658,3.658,0,0,0-.674-.1v-.62h4.975a7.106,7.106,0,0,1,3.6.752A2.369,2.369,0,0,1,16.68,8.964q0,1.843-2.651,2.6v.062a4.672,4.672,0,0,1,1.542.24,3.39,3.39,0,0,1,1.171.674,3.036,3.036,0,0,1,.744,1.023,3.125,3.125,0,0,1,.263,1.287,2.49,2.49,0,0,1-.38,1.379,3.05,3.05,0,0,1-1.092.992,7.794,7.794,0,0,1-3.8.775Zm6.076-.945q2.5,0,2.5-2.248a2.3,2.3,0,0,0-.9-2.015,3.073,3.073,0,0,0-1.2-.465,9.906,9.906,0,0,0-1.806-.139h-.744v3.1a1.664,1.664,0,0,0,.5,1.364A2.659,2.659,0,0,0,12.587,17.055Zm-1.24-5.8a4.892,4.892,0,0,0,1.21-.131,2.69,2.69,0,0,0,.868-.38,1.8,1.8,0,0,0,.743-1.6,2.107,2.107,0,0,0-.557-1.635,2.645,2.645,0,0,0-1.8-.5h-1.1q-.279,0-.279.264v3.983Z\"\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function ItalicIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"Italic\")}</title>\n            <path\n                d=\"M11.472,15.4a4.381,4.381,0,0,0-.186,1.085.744.744,0,0,0,.333.713,2.323,2.323,0,0,0,1.077.186L12.51,18H7.566l.17-.62a3.8,3.8,0,0,0,.791-.07,1.282,1.282,0,0,0,.566-.271,1.62,1.62,0,0,0,.41-.558,5.534,5.534,0,0,0,.326-.93L11.642,8.7a5.332,5.332,0,0,0,.233-1.271.577.577,0,0,0-.349-.612,3.714,3.714,0,0,0-1.186-.132l.171-.62h5.038l-.171.62a3.058,3.058,0,0,0-.852.1,1.246,1.246,0,0,0-.59.38,2.578,2.578,0,0,0-.441.774,11.525,11.525,0,0,0-.4,1.287Z\"\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function StrikeIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"Strikethrough\")}</title>\n            <path\n                d=\"M12.258,13H6V12h4.2l-.05-.03a4.621,4.621,0,0,1-1.038-.805,2.531,2.531,0,0,1-.55-.892A3.285,3.285,0,0,1,8.4,9.2a3.345,3.345,0,0,1,.256-1.318,3.066,3.066,0,0,1,.721-1.046,3.242,3.242,0,0,1,1.1-.682,3.921,3.921,0,0,1,1.4-.24,3.641,3.641,0,0,1,1.271.217,4.371,4.371,0,0,1,1.194.7l.4-.7h.357l.171,3.085h-.574A3.921,3.921,0,0,0,13.611,7.32a2.484,2.484,0,0,0-1.7-.619,2.269,2.269,0,0,0-1.5.465,1.548,1.548,0,0,0-.558,1.255,1.752,1.752,0,0,0,.124.674,1.716,1.716,0,0,0,.4.574,4.034,4.034,0,0,0,.729.542,9.854,9.854,0,0,0,1.116.566,20.49,20.49,0,0,1,1.906.953q.232.135.435.27h4.6v1H15.675a2.263,2.263,0,0,1,.3.544,3.023,3.023,0,0,1,.186,1.093,3.236,3.236,0,0,1-1.177,2.541,4.014,4.014,0,0,1-1.334.721,5.393,5.393,0,0,1-1.7.256,4.773,4.773,0,0,1-1.588-.248,4.885,4.885,0,0,1-1.434-.837l-.434.76H8.132L7.9,14.358h.573a3.886,3.886,0,0,0,.411,1.255A3.215,3.215,0,0,0,10.7,17.155a3.872,3.872,0,0,0,1.294.21,2.786,2.786,0,0,0,1.813-.543,1.8,1.8,0,0,0,.667-1.473,1.752,1.752,0,0,0-.573-1.34,4.04,4.04,0,0,0-.83-.6Q12.723,13.217,12.258,13Z\"\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function CodeIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"Paragraph Code Block\")}</title>\n            <path\n                fill=\"currentColor\"\n                fillRule=\"evenodd\"\n                d=\"M4.818,14.032q0-1.27-1.818-1.271V11.455a2.429,2.429,0,0,0,1.371-.311,1.075,1.075,0,0,0,.447-.947V8.071A1.763,1.763,0,0,1,5.56,6.5,4,4,0,0,1,7.785,6V7.244a1.949,1.949,0,0,0-1.131.318,1.019,1.019,0,0,0-.352.844v2.031q0,1.359-1.566,1.626v.083q1.566.246,1.566,1.62V15.81a1.034,1.034,0,0,0,.348.847,1.836,1.836,0,0,0,1.135.3v1.251a3.89,3.89,0,0,1-2.273-.537,1.982,1.982,0,0,1-.694-1.692ZM9.009,15.14a1.05,1.05,0,0,1,.26-.766,1,1,0,0,1,.752-.267.992.992,0,0,1,.758.277,1.063,1.063,0,0,1,.26.756,1.089,1.089,0,0,1-.263.769.98.98,0,0,1-.755.283.973.973,0,0,1-.752-.28A1.088,1.088,0,0,1,9.009,15.14Zm3.848,0a1.054,1.054,0,0,1,.26-.766,1.185,1.185,0,0,1,1.511.01,1.063,1.063,0,0,1,.26.756,1.089,1.089,0,0,1-.263.769,1.151,1.151,0,0,1-1.508,0A1.093,1.093,0,0,1,12.857,15.14Zm6.105.991a1.811,1.811,0,0,1-.68,1.565,3.788,3.788,0,0,1-2.178.513V16.958a1.765,1.765,0,0,0,1.012-.263,1.009,1.009,0,0,0,.363-.885V14.019a1.994,1.994,0,0,1,.362-1.279,1.879,1.879,0,0,1,1.2-.594v-.083q-1.566-.266-1.565-1.626V8.406a1.084,1.084,0,0,0-.312-.844A1.69,1.69,0,0,0,16.1,7.244V6a3.583,3.583,0,0,1,2.191.523,2.044,2.044,0,0,1,.667,1.712V10.2a1.077,1.077,0,0,0,.434.971,2.356,2.356,0,0,0,1.289.287v1.306a2.342,2.342,0,0,0-1.282.29,1.087,1.087,0,0,0-.441.981Z\"\n            />\n        </svg>\n    );\n}\n\nexport function LinkIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"Link\")}</title>\n            <path\n                d=\"M13.575,10.4a3.824,3.824,0,0,1,.266,5.107c-.17.211-.076.106-2.318,2.348a3.821,3.821,0,0,1-5.4-5.4l1.731-1.731a.327.327,0,0,1,.559.223,4.735,4.735,0,0,0,.129,1.033.325.325,0,0,1-.087.3L7.2,13.53a2.293,2.293,0,0,0,3.243,3.242L12.5,14.72a2.293,2.293,0,0,0-.623-3.685.329.329,0,0,1-.179-.337,1.412,1.412,0,0,1,.4-.829l.12-.12a.324.324,0,0,1,.375-.062A3.792,3.792,0,0,1,13.575,10.4ZM17.853,6.12a3.819,3.819,0,0,0-5.4,0C10.207,8.362,10.3,8.257,10.131,8.468a3.82,3.82,0,0,0,1.25,5.818.325.325,0,0,0,.375-.063l.12-.119a1.412,1.412,0,0,0,.4-.83.329.329,0,0,0-.179-.337,2.291,2.291,0,0,1-.623-3.684L13.53,7.2a2.293,2.293,0,1,1,3.242,3.243l-1.251,1.251a.322.322,0,0,0-.087.3,4.726,4.726,0,0,1,.129,1.032.328.328,0,0,0,.559.224c.316-.315.836-.837,1.731-1.732A3.819,3.819,0,0,0,17.853,6.12Z\"\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function EmojiIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"Emoji\")}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M12,4a8,8,0,1,0,8,8A8,8,0,0,0,12,4Zm0,14.644A6.644,6.644,0,1,1,18.644,12,6.651,6.651,0,0,1,12,18.644ZM10.706,10.2a1.25,1.25,0,1,0-1.249,1.25A1.249,1.249,0,0,0,10.706,10.2Zm3.837-1.249a1.25,1.25,0,1,0,1.25,1.249A1.249,1.249,0,0,0,14.543,8.953Zm.2,5.237a.357.357,0,0,0-.493.1,2.825,2.825,0,0,1-4.494,0,.355.355,0,1,0-.593.392,3.532,3.532,0,0,0,5.68,0A.354.354,0,0,0,14.74,14.19Z\"\n            />\n        </svg>\n    );\n}\n\nexport function EmbedErrorIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"Warning\")}</title>\n            <path\n                d=\"M11.651,3.669,2.068,21.75H21.234Zm.884-1,10,18.865A1,1,0,0,1,21.649,23h-20a1,1,0,0,1-.884-1.468l10-18.865a1,1,0,0,1,1.767,0Zm.232,13.695H10.547L10.2,10h2.905Zm-2.535,2.354a1.239,1.239,0,0,1,.363-.952,1.491,1.491,0,0,1,1.056-.34,1.443,1.443,0,0,1,1.039.34,1.258,1.258,0,0,1,.353.952,1.224,1.224,0,0,1-.367.945A1.452,1.452,0,0,1,11.65,20a1.5,1.5,0,0,1-1.042-.34A1.207,1.207,0,0,1,10.231,18.716Z\"\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function PilcrowIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"Paragraph\")}</title>\n            <path\n                fill=\"currentColor\"\n                fillRule=\"evenodd\"\n                d=\"M15,6 L17,6 L17,18 L15,18 L15,6 Z M11,6 L13.0338983,6 L13.0338983,18 L11,18 L11,6 Z M11,13.8666667 C8.790861,13.8666667 7,12.1056533 7,9.93333333 C7,7.76101332 8.790861,6 11,6 C11,7.68571429 11,11.6190476 11,13.8666667 Z\"\n            />\n        </svg>\n    );\n}\n\nexport function Heading2Icon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"H2\")}</title>\n            <path\n                d=\"M12.3,17H10.658V12.5H6.051V17H4.417V7.006H6.051v4.088h4.607V7.006H12.3Zm8,0H13.526V15.783L16.1,13.192a22.007,22.007,0,0,0,1.514-1.657,3.978,3.978,0,0,0,.543-.92,2.475,2.475,0,0,0,.171-.923,1.4,1.4,0,0,0-.407-1.066,1.557,1.557,0,0,0-1.124-.39,3,3,0,0,0-1.111.212,5.239,5.239,0,0,0-1.241.766l-.868-1.06a5.612,5.612,0,0,1,1.62-1,4.744,4.744,0,0,1,1.675-.294,3.294,3.294,0,0,1,2.235.728,2.46,2.46,0,0,1,.841,1.959,3.453,3.453,0,0,1-.242,1.285,5.212,5.212,0,0,1-.746,1.254,17.041,17.041,0,0,1-1.671,1.747l-1.736,1.682v.068H20.3Z\"\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function Heading3Icon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"H3\")}</title>\n            <path\n                d=\"M10.658,7.006H12.3V17H10.658V12.5H6.051V17H4.417V7.006H6.051v4.088h4.607Zm8.93,5.533a3.016,3.016,0,0,0-1.806-.748v-.055a2.789,2.789,0,0,0,1.56-.851A2.315,2.315,0,0,0,19.9,9.3a2.131,2.131,0,0,0-.848-1.791,3.8,3.8,0,0,0-2.36-.65,5.251,5.251,0,0,0-3.2,1.012l.786,1.121a5.226,5.226,0,0,1,1.245-.625,3.76,3.76,0,0,1,1.1-.161,1.881,1.881,0,0,1,1.232.349,1.22,1.22,0,0,1,.417.991q0,1.654-2.4,1.654H14.99v1.306h.869a4.066,4.066,0,0,1,2,.376,1.267,1.267,0,0,1,.636,1.176,1.559,1.559,0,0,1-.574,1.333,2.89,2.89,0,0,1-1.738.43,5.794,5.794,0,0,1-1.369-.171,6.372,6.372,0,0,1-1.347-.485V16.6a6.532,6.532,0,0,0,2.8.54,4.676,4.676,0,0,0,2.9-.783,2.637,2.637,0,0,0,1.019-2.225A2.143,2.143,0,0,0,19.588,12.539Z\"\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function Heading4Icon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"H4\")}</title>\n            <path style={currentColorFill} d=\"M12.3,17h-1.6v-4.5H6.1V17H4.4V7h1.6v4.1h4.6V7h1.6V17z\" />\n            <path\n                style={currentColorFill}\n                d=\"M20.8,14.9h-1.3v2.2h-1.6v-2.2h-4.6v-1.2l4.6-6.6h1.6v6.5h1.3V14.9z M17.9,13.6v-2.5c0-0.9,0-1.6,0.1-2.2h-0.1\n\t\tc-0.1,0.3-0.3,0.7-0.6,1.1l-2.5,3.6H17.9z\"\n            />\n        </svg>\n    );\n}\n\nexport function Heading5Icon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"H5\")}</title>\n            <path style={currentColorFill} d=\"M12.3,17H10.7V12.5H6.1V17H4.4V7H6v4.1h4.6V7h1.6V17Z\" />\n            <path\n                style={currentColorFill}\n                d=\"M17,10.7a3.649,3.649,0,0,1,2.4.8,2.792,2.792,0,0,1,.9,2.2,3.04,3.04,0,0,1-1,2.5,4.1,4.1,0,0,1-2.8.9,5.991,5.991,0,0,1-2.6-.5V15.2a5.023,5.023,0,0,0,1.3.5,6.882,6.882,0,0,0,1.3.2,2.348,2.348,0,0,0,1.6-.5,1.678,1.678,0,0,0,.6-1.4c0-1.2-.8-1.8-2.3-1.8a2.485,2.485,0,0,0-.8.1c-.3,0-.6.1-.8.1l-.8-.5L14.4,7h5.2V8.4H15.8l-.2,2.5c.2,0,.4-.1.6-.1S16.6,10.7,17,10.7Z\"\n            />\n        </svg>\n    );\n}\n\nexport function BlockquoteIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"Quote\")}</title>\n            <path\n                d=\"M10.531,17.286V12.755H8.122a9.954,9.954,0,0,1,.1-1.408,4.22,4.22,0,0,1,.388-1.286,2.62,2.62,0,0,1,.735-.918A1.815,1.815,0,0,1,10.49,8.8V6.755a3.955,3.955,0,0,0-2,.49A4.164,4.164,0,0,0,7.082,8.551a5.84,5.84,0,0,0-.817,1.9A9.65,9.65,0,0,0,6,12.755v4.531Zm7.469,0V12.755H15.592a9.954,9.954,0,0,1,.1-1.408,4.166,4.166,0,0,1,.388-1.286,2.606,2.606,0,0,1,.734-.918A1.819,1.819,0,0,1,17.959,8.8V6.755a3.958,3.958,0,0,0-2,.49,4.174,4.174,0,0,0-1.408,1.306,5.86,5.86,0,0,0-.816,1.9,9.649,9.649,0,0,0-.266,2.306v4.531Z\"\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function CodeBlockIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"Paragraph Code Block\")}</title>\n            <path\n                fill=\"currentColor\"\n                fillRule=\"evenodd\"\n                d=\"M9.11588626,16.5074223 L3.14440918,12.7070466 L3.14440918,11.6376386 L9.11588626,7.32465415 L9.11588626,9.04808032 L4.63575044,12.0883808 L9.11588626,14.7663199 L9.11588626,16.5074223 Z M14.48227,5.53936141 L11.1573124,18.4606386 L9.80043634,18.4606386 L13.131506,5.53936141 L14.48227,5.53936141 Z M15.1729321,14.7663199 L19.6530679,12.0883808 L15.1729321,9.04808032 L15.1729321,7.32465415 L21.1444092,11.6376386 L21.1444092,12.7070466 L15.1729321,16.5074223 L15.1729321,14.7663199 Z\"\n            />\n        </svg>\n    );\n}\n\nexport function SpoilerIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    // Exceptionally, this SVG needs a hard coded class, because it's also rendered through PHP and doesn't have access to JS classes\n    return (\n        <svg\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            className={classNames(\"spoiler-icon\", props.className)}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"Spoiler\")}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M11.469 15.47c-2.795-.313-4.73-3.017-4.06-5.8l4.06 5.8zM12 16.611a9.65 9.65 0 0 1-8.333-4.722 9.569 9.569 0 0 1 3.067-3.183L5.778 7.34a11.235 11.235 0 0 0-3.547 3.703 1.667 1.667 0 0 0 0 1.692A11.318 11.318 0 0 0 12 18.278c.46 0 .92-.028 1.377-.082l-1.112-1.589a9.867 9.867 0 0 1-.265.004zm9.77-3.876a11.267 11.267 0 0 1-4.985 4.496l1.67 2.387a.417.417 0 0 1-.102.58l-.72.504a.417.417 0 0 1-.58-.102L5.545 4.16a.417.417 0 0 1 .102-.58l.72-.505a.417.417 0 0 1 .58.103l1.928 2.754A11.453 11.453 0 0 1 12 5.5c4.162 0 7.812 2.222 9.77 5.543.307.522.307 1.17 0 1.692zm-1.437-.846A9.638 9.638 0 0 0 12.828 7.2a1.944 1.944 0 1 0 3.339 1.354 4.722 4.722 0 0 1-1.283 5.962l.927 1.324a9.602 9.602 0 0 0 4.522-3.952z\"\n            />\n        </svg>\n    );\n}\n\nexport function EmbedIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"Embed\")}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M4.5,5.5a1,1,0,0,0-1,1v11a1,1,0,0,0,1,1h15a1,1,0,0,0,1-1V6.5a1,1,0,0,0-1-1ZM4.5,4h15A2.5,2.5,0,0,1,22,6.5v11A2.5,2.5,0,0,1,19.5,20H4.5A2.5,2.5,0,0,1,2,17.5V6.5A2.5,2.5,0,0,1,4.5,4Zm5.592,12.04-1.184.92-3.5-4.5v-.92l3.5-4.5,1.184.92L6.95,12Zm3.816,0L17.05,12,13.908,7.96l1.184-.92,3.5,4.5v.92l-3.5,4.5Z\"\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function ImageIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"Image\")}</title>\n            <path\n                fill=\"currentColor\"\n                fillRule=\"nonzero\"\n                d=\"M5,17V15l2.294-3.212a.3.3,0,0,1,.418-.07h0c.013.01.025.021.037.032L10,14l4.763-5.747a.3.3,0,0,1,.422-.041h0l.02.018L19,12v5ZM4.5,5.5a1,1,0,0,0-1,1v11a1,1,0,0,0,1,1h15a1,1,0,0,0,1-1V6.5a1,1,0,0,0-1-1ZM4.5,4h15A2.5,2.5,0,0,1,22,6.5v11A2.5,2.5,0,0,1,19.5,20H4.5A2.5,2.5,0,0,1,2,17.5V6.5A2.5,2.5,0,0,1,4.5,4Zm3,6.2A1.7,1.7,0,1,1,9.2,8.5h0A1.7,1.7,0,0,1,7.5,10.2Z\"\n            />\n        </svg>\n    );\n}\n\nexport function AttachmentIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"Attachment\")}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M17.25,9.045a.75.75,0,0,1,1.5,0v6.91A6.63,6.63,0,0,1,12,22.75a6.63,6.63,0,0,1-6.75-6.795V7.318A4.811,4.811,0,0,1,10.286,2.25a4.81,4.81,0,0,1,5.035,5.068v7.773c0,2.308-1.254,4.2-3.321,4.2s-3.321-1.9-3.321-4.2V9.045a.75.75,0,0,1,1.5,0v6.046c0,1.578.745,2.7,1.821,2.7s1.821-1.126,1.821-2.7V7.318A3.319,3.319,0,0,0,10.286,3.75,3.319,3.319,0,0,0,6.75,7.318v8.637A5.132,5.132,0,0,0,12,21.25a5.132,5.132,0,0,0,5.25-5.295Z\"\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n\nexport function ListUnorderedIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"List Unordered\")}</title>\n            <path\n                fill=\"currentColor\"\n                fillRule=\"nonzero\"\n                d=\"M10.5 7a1 1 0 1 1 0-2h8a1 1 0 0 1 0 2h-8zm0 6a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2h-8zm0 6a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2h-8zM4.7 7c-.11 0-.2-.448-.2-1s.09-1 .2-1h1.6c.11 0 .2.448.2 1s-.09 1-.2 1H4.7zm0 6c-.11 0-.2-.448-.2-1s.09-1 .2-1h1.6c.11 0 .2.448.2 1s-.09 1-.2 1H4.7zm0 6c-.11 0-.2-.448-.2-1s.09-1 .2-1h1.6c.11 0 .2.448.2 1s-.09 1-.2 1H4.7z\"\n            />\n        </svg>\n    );\n}\n\nexport function ListOrderedIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"List Ordered\")}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M10.5 7a1 1 0 1 1 0-2h8a1 1 0 0 1 0 2h-8zM6.479 8h-.906V5.521l.009-.407.015-.445c-.15.15-.255.249-.314.296l-.492.395-.437-.545 1.38-1.098h.745V8zm4.021 5a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2h-8zm-3.266 1H4.24v-.63l1.075-1.087a9.93 9.93 0 0 0 .624-.678c.098-.126.168-.243.211-.35a.891.891 0 0 0 .065-.334c0-.172-.048-.3-.142-.384a.551.551 0 0 0-.38-.126c-.166 0-.327.038-.483.114-.156.077-.32.185-.49.326l-.491-.583c.21-.18.385-.307.524-.381.139-.075.29-.132.454-.172.164-.04.348-.06.55-.06.268 0 .505.05.71.147.205.097.364.234.477.41.114.176.17.377.17.603 0 .198-.034.383-.104.556-.07.172-.177.35-.322.531-.146.182-.402.44-.77.777l-.55.518v.041h1.866V14zm3.266 5a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2h-8zm-3.433-2.325c0 .267-.08.495-.243.682-.162.188-.39.317-.682.387v.018c.345.043.607.148.785.315.177.167.266.392.266.675 0 .412-.15.733-.448.962-.299.23-.725.345-1.28.345-.465 0-.877-.078-1.236-.232v-.77c.166.084.348.152.547.205.2.052.397.079.592.079.299 0 .52-.051.662-.153.143-.101.214-.264.214-.489 0-.201-.082-.344-.246-.428-.164-.084-.426-.125-.785-.125h-.325v-.695h.33c.333 0 .575-.043.729-.13.153-.087.23-.236.23-.447 0-.324-.203-.486-.61-.486-.14 0-.283.023-.429.07a2.097 2.097 0 0 0-.485.243l-.419-.624c.391-.281.857-.422 1.398-.422.443 0 .793.09 1.05.27.257.18.385.43.385.75z\"\n            />\n        </svg>\n    );\n}\n\nexport function IndentIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"Indent\")}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M10.5 11a1 1 0 1 1 0-2h8a1 1 0 1 1 0 2h-8zm0 4a1 1 0 1 1 0-2h8a1 1 0 1 1 0 2h-8zM5.438 19h13.125c.517 0 .937-.448.937-1s-.42-1-.938-1H5.438c-.517 0-.937.448-.937 1s.42 1 .938 1zM5.438 7h13.125c.517 0 .937-.448.937-1s-.42-1-.938-1H5.438C4.92 5 4.5 5.448 4.5 6s.42 1 .938 1zM8.5 12l-3 3V9z\"\n            />\n        </svg>\n    );\n}\n\nexport function OutdentIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"Outdent\")}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M10.5 11a1 1 0 1 1 0-2h8a1 1 0 1 1 0 2h-8zm0 4a1 1 0 1 1 0-2h8a1 1 0 1 1 0 2h-8zM5.438 19h13.125c.517 0 .937-.448.937-1s-.42-1-.938-1H5.438c-.517 0-.937.448-.937 1s.42 1 .938 1zM5.438 7h13.125c.517 0 .937-.448.937-1s-.42-1-.938-1H5.438C4.92 5 4.5 5.448 4.5 6s.42 1 .938 1zM4.5 12l3-3v6z\"\n            />\n        </svg>\n    );\n}\n\nexport function AlignCenterIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"Center\")}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M17 12v2H0v-2h17zM11.5 0c1.105 0 2 .895 2 2v6c0 1.105-.895 2-2 2h-6c-1.105 0-2-.895-2-2V2c0-1.105.895-2 2-2h6z\"\n                transform=\"translate(3.5 5)\"\n            />\n        </svg>\n    );\n}\n\nexport function FloatLeftIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"Float Left\")}</title>\n            <path\n                fill=\"currentColor\"\n                d=\"M17 12v2H0v-2h17zM8 0c1.105 0 2 .895 2 2v6c0 1.105-.895 2-2 2H2c-1.105 0-2-.895-2-2V2C0 .895.895 0 2 0h6zm9 8v2h-5V8h5zm0-4v2h-5V4h5zm0-4v2h-5V0h5z\"\n                transform=\"translate(3.5 5)\"\n            />\n        </svg>\n    );\n}\n\nexport function FloatRightIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"Float Right\")}</title>\n            <g fill=\"none\" fillRule=\"evenodd\">\n                <g fill=\"currentColor\" transform=\"translate(3.5 5)\">\n                    <rect width=\"10\" height=\"10\" x=\"7\" rx=\"2\" />\n                    <g>\n                        <path d=\"M17 12v2H0v-2h17zM5 8v2H0V8h5zm0-4v2H0V4h5zm0-4v2H0V0h5z\" />\n                    </g>\n                </g>\n            </g>\n        </svg>\n    );\n}\n\nexport function ResizeLargeIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"Large\")}</title>\n            <g fill=\"none\" fillRule=\"evenodd\">\n                <g transform=\"translate(4 4)\">\n                    <rect width=\"16\" height=\"16\" fill=\"currentColor\" stroke=\"currentColor\" strokeWidth=\"1.5\" rx=\"2\" />\n                    <g stroke=\"#FFF\" strokeLinecap=\"round\">\n                        <g>\n                            <path d=\"M0 6.737L6.737 0\" transform=\"translate(3.5 4) translate(1.5)\" />\n                            <path\n                                strokeLinejoin=\"round\"\n                                d=\"M2.994 0L6.737 0 6.737 3.743\"\n                                transform=\"translate(3.5 4) translate(1.5)\"\n                            />\n                        </g>\n                        <g>\n                            <path d=\"M0 6.737L6.737 0\" transform=\"translate(3.5 4) rotate(-180 3.5 4)\" />\n                            <path\n                                strokeLinejoin=\"round\"\n                                d=\"M2.994 0L6.737 0 6.737 3.743\"\n                                transform=\"translate(3.5 4) rotate(-180 3.5 4)\"\n                            />\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </svg>\n    );\n}\n\nexport function ResizeMediumIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"Medium\")}</title>\n            <g fill=\"none\" fillRule=\"evenodd\">\n                <g>\n                    <path\n                        fill=\"currentColor\"\n                        d=\"M5 9.03h10v9.5c0 1.105-.895 2-2 2H3v-9.5c0-1.105.895-2 2-2z\"\n                        transform=\"rotate(90 9 14.78)\"\n                    />\n                    <path\n                        stroke=\"currentColor\"\n                        strokeWidth=\"1.5\"\n                        d=\"M4 8V7c0-2 1-3 3-3h10c2 0 3 1 3 3v10c0 2-1 3-3 3h-1\"\n                    />\n                </g>\n            </g>\n        </svg>\n    );\n}\n\nexport function ResizeSmallIcon(props: { className?: string; \"aria-hidden\"?: areaHiddenType }) {\n    const classesRichEditor = richEditorClasses(false);\n    return (\n        <svg\n            className={classNames(\"richEditorButton-icon\", classesRichEditor.icon, props.className)}\n            aria-hidden={props[\"aria-hidden\"] !== undefined ? props[\"aria-hidden\"] : \"true\"}\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{t(\"Medium\")}</title>\n            <g fill=\"none\" fillRule=\"evenodd\">\n                <g>\n                    <g fill=\"currentColor\" fillRule=\"nonzero\">\n                        <path\n                            d=\"M0 3.104v5.714h5.714c1.105 0 2-.895 2-2V1.104H2c-1.105 0-2 .896-2 2z\"\n                            transform=\"translate(3 4) matrix(-1 0 0 1 7.914 8)\"\n                        />\n                    </g>\n                    <path\n                        stroke=\"currentColor\"\n                        strokeWidth=\"1.5\"\n                        d=\"M1 8V3c0-2 1-3 3-3h10c2 0 3 1 3 3v10c0 2-1 3-3 3H9\"\n                        transform=\"translate(3 4)\"\n                    />\n                </g>\n            </g>\n        </svg>\n    );\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport RouteHandler from \"@library/routing/RouteHandler\";\nimport { NEW_SEARCH_PAGE_ENABLED } from \"@library/search/searchConstants\";\nimport Loader from \"@library/loaders/Loader\";\n\nexport function makeSearchUrl(): string {\n    return NEW_SEARCH_PAGE_ENABLED ? \"/search\" : \"/kb/search\";\n}\n\nexport const SearchPageRoute = new RouteHandler(\n    () => import(/* webpackChunkName: \"pages/search\" */ \"@vanilla/library/src/scripts/search/SearchPage\"),\n    makeSearchUrl(),\n    makeSearchUrl,\n    Loader,\n);\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { NavLink, NavLinkProps, Route } from \"react-router-dom\";\nimport Loadable, { LoadableComponent } from \"react-loadable\";\nimport Loader from \"@library/loaders/Loader\";\nimport { Hoverable } from \"@vanilla/react-utils\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport { formatUrl } from \"@library/utility/appUtils\";\n\ntype LoadFunction = () => Promise<any>;\n\n/**\n * Class for managing routing and matching a particular page.\n */\nexport default class RouteHandler<GeneratorProps> {\n    /** A react-loadable instance. */\n    public loadable;\n\n    /** A react node representing the route of the component. */\n    public route: React.ReactNode;\n\n    /** Key to identify the route. Components with the same key share the same instance. */\n    private key: string;\n\n    public url: (data: GeneratorProps) => string;\n\n    public constructor(\n        componentPromise: LoadFunction,\n        public path: string | string[],\n        url: (data: GeneratorProps) => string,\n        LoadingComponent: React.ComponentType = Loader,\n        key?: string,\n    ) {\n        function LoaderWrapper() {\n            return <LoadingComponent />;\n        }\n        this.loadable = Loadable({\n            loading: LoaderWrapper,\n            loader: componentPromise,\n        });\n        this.url = (data: GeneratorProps) => formatUrl(url(data), true);\n        const finalPath = Array.isArray(path) ? path : [path];\n        this.key = key || finalPath.join(\"-\");\n        this.route = <Route exact path={path} component={this.loadable} key={this.key} />;\n    }\n\n    /**\n     * A component representing a link to the component.\n     *\n     * - Preloads the loadable for the component on hover.\n     */\n    public Link = (props: Omit<NavLinkProps, \"to\"> & { data: GeneratorProps }) => {\n        return (\n            <Hoverable duration={50} onHover={this.preload}>\n                {(provided) => <SmartLink {...provided} {...props} to={this.url(props.data)} />}\n            </Hoverable>\n        );\n    };\n\n    /**\n     * Call this to preload the route.\n     */\n    public preload = () => {\n        return (this.loadable as LoadableComponent).preload();\n    };\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { logError } from \"@vanilla/utils\";\nimport { LoadStatus } from \"@library/@types/api/core\";\nimport { IUsersStoreState } from \"@library/features/users/userTypes\";\nimport ReduxActions, { ActionsUnion } from \"@library/redux/ReduxActions\";\nimport { IUserSuggestion } from \"@library/features/users/suggestion/IUserSuggestion\";\nimport UserSuggestionModel from \"@library/features/users/suggestion/UserSuggestionModel\";\nimport { Dispatch } from \"redux\";\nimport apiv2 from \"@library/apiv2\";\nimport debounce from \"lodash/debounce\";\n\ninterface ILookupUserOptions {\n    username: string;\n}\n\nexport default class UserSuggestionActions extends ReduxActions {\n    public static readonly SET_ACTIVE_SUGGESTION = \"@@mentions/SET_ACTIVE_SUGGESTION\";\n    public static readonly LOAD_USERS_REQUEST = \"@@mentions/GET_USERS_REQUEST\";\n    public static readonly LOAD_USERS_RESPONSE = \"@@mentions/LOAD_USERS_RESPONSE\";\n    public static readonly LOAD_USERS_ERROR = \"@@mentions/LOAD_USERS_ERROR\";\n\n    public static readonly ACTION_TYPES:\n        | ActionsUnion<typeof UserSuggestionActions.loadUsersACs>\n        | ReturnType<typeof UserSuggestionActions.setActiveAC>;\n\n    // The number of characters that we will lookup to try and invalidate a lookup early.\n    private static USER_LIMIT = 50;\n\n    // Action creators\n    public static loadUsersACs = ReduxActions.generateApiActionCreators(\n        UserSuggestionActions.LOAD_USERS_REQUEST,\n        UserSuggestionActions.LOAD_USERS_RESPONSE,\n        UserSuggestionActions.LOAD_USERS_ERROR,\n        {} as IUserSuggestion[],\n        {} as ILookupUserOptions,\n    );\n\n    public static setActiveAC(suggestionID: string, suggestionIndex: number) {\n        return ReduxActions.createAction(UserSuggestionActions.SET_ACTIVE_SUGGESTION, {\n            suggestionID,\n            suggestionIndex,\n        });\n    }\n\n    /**\n     * Filter users down to a list that loosely matches the current searchName\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Collator\n     */\n    public static filterSuggestions(users: IUserSuggestion[], searchName: string) {\n        const searchCollator = Intl.Collator(\"en\", {\n            usage: \"search\",\n            sensitivity: \"base\",\n            ignorePunctuation: true,\n            numeric: true,\n        });\n\n        return users.filter((userSuggestion: IUserSuggestion) => {\n            if (userSuggestion.name.length < searchName.length) {\n                return false;\n            }\n\n            const suggestionIDPartial = userSuggestion.name.substring(0, searchName.length);\n            return searchCollator.compare(suggestionIDPartial, searchName) === 0;\n        });\n    }\n\n    public setActive = this.bindDispatch(UserSuggestionActions.setActiveAC);\n\n    /**\n     * Make an API request for mention suggestions. These results are cached by the lookup username.\n     */\n    private interalLoadUsers = (username: string) => {\n        return this.dispatch((dispatch: Dispatch<any>, getState: () => IUsersStoreState) => {\n            const trie = UserSuggestionModel.selectSuggestionsTrie(getState());\n            // Attempt an exact lookup first.\n            const exactLookup = trie.getValue(username);\n            if (exactLookup != null) {\n                switch (exactLookup.status) {\n                    case LoadStatus.SUCCESS:\n                        if (exactLookup.data) {\n                            return dispatch(\n                                UserSuggestionActions.loadUsersACs.response(\n                                    { data: exactLookup.data, status: 200 },\n                                    { username },\n                                ),\n                            );\n                        }\n                        break;\n                    case LoadStatus.LOADING:\n                        // Already handled\n                        return;\n                    case LoadStatus.ERROR:\n                        // Previously failed.\n                        if (exactLookup.error) {\n                            return dispatch(UserSuggestionActions.loadUsersACs.error(exactLookup.error, { username }));\n                        }\n                }\n            }\n\n            // Attempt a partial lookup to try and see if we can get results without an API request\n            const partialLookup = trie.getValueFromPartialsOfWord(username);\n            if (partialLookup != null) {\n                switch (partialLookup.status) {\n                    case LoadStatus.SUCCESS: {\n                        if (partialLookup.data && partialLookup.data.length < UserSuggestionActions.USER_LIMIT) {\n                            // The previous match already found the maximum amount of users that the server had\n                            // Return the previous results.\n                            return dispatch(\n                                UserSuggestionActions.loadUsersACs.response(\n                                    {\n                                        data: UserSuggestionActions.filterSuggestions(partialLookup.data, username),\n                                        status: 200,\n                                    },\n                                    { username },\n                                ),\n                            );\n                        }\n                        break;\n                    }\n                    case LoadStatus.ERROR:\n                        break;\n                    // Previously failed. We still want to proceed to a real lookup so do nothing.\n                    case LoadStatus.PENDING:\n                        break;\n                    // We still want to proceed to a real lookup so do nothing.\n                }\n            }\n\n            // Start the lookup.\n            dispatch(UserSuggestionActions.loadUsersACs.request({ username }));\n\n            const params = {\n                name: username + \"*\",\n                order: \"mention\",\n                limit: UserSuggestionActions.USER_LIMIT,\n            };\n            return apiv2\n                .get(\"/users/by-names/\", { params /*, cancelToken: this.apiCancelSource.token*/ })\n                .then((response) => {\n                    if (response.status >= 500) {\n                        throw new Error(response.data);\n                    }\n\n                    // Add unique domIDs to each user.\n                    response.data = response.data.map((data) => {\n                        data.domID = \"mentionSuggestion\" + data.userID;\n                        return data;\n                    });\n\n                    // Result is good. Lets GO!\n                    dispatch(UserSuggestionActions.loadUsersACs.response(response, { username }));\n                })\n                .catch((error) => {\n                    logError(error);\n                    dispatch(UserSuggestionActions.loadUsersACs.error(error, { username }));\n                });\n        });\n    };\n\n    public loadUsers = debounce(this.interalLoadUsers, 50);\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { userSelect } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { componentThemeVariables, styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { important, percent, px } from \"csx\";\n\nexport const tokensVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const themeVars = componentThemeVariables(\"tokens\");\n\n    const token = {\n        fontSize: globalVars.meta.text.size,\n        bg: globalVars.mixBgAndFg(0.1),\n        textShadow: `${globalVars.mainColors.bg} 0 0 1px`,\n        minHeight: 26,\n    };\n\n    const clearIcon = {\n        width: 8,\n        ...themeVars.subComponentStyles(\"clearIcon\"),\n    };\n\n    return {\n        clearIcon,\n        token,\n    };\n});\n\nexport const tokensClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = tokensVariables();\n    const formElVars = formElementsVariables();\n    const style = styleFactory(\"tokens\");\n\n    const root = style({\n        ...{\n            \".tokens__value-container\": {\n                display: \"flex\",\n                flexWrap: \"wrap\",\n                alignItems: \"center\",\n                justifyContent: \"flexStart\",\n                minHeight: styleUnit(formElVars.sizing.height),\n                paddingTop: 0,\n                paddingRight: px(12),\n                paddingBottom: 0,\n                paddingLeft: px(12),\n                ...Mixins.border(globalVars.borderType.formElements.default),\n                ...{\n                    \"&.tokens__value-container--has-value\": {\n                        ...Mixins.padding({\n                            horizontal: 4,\n                            vertical: 0,\n                        }),\n                    },\n                    \".tokens__multi-value + div:not(.tokens__multi-value)\": {\n                        display: \"flex\",\n                        flexWrap: \"wrap\",\n                        alignItems: \"center\",\n                        justifyContent: \"flexStart\",\n                        flexGrow: 1,\n                    },\n                    \".tokens__input\": {\n                        flexGrow: 1,\n                        display: important(\"inline-flex\"),\n                        alignItems: \"center\",\n                        justifyContent: \"stretch\",\n                        ...Mixins.margin({\n                            vertical: 0,\n                        }),\n                        minHeight: styleUnit(vars.token.minHeight),\n                    },\n                    input: {\n                        width: percent(100),\n                        minWidth: styleUnit(45),\n                        minHeight: 0,\n                    },\n                },\n            },\n            \".tokens__multi-value\": {\n                display: \"flex\",\n                alignItems: \"center\",\n                flexWrap: \"nowrap\",\n                fontSize: styleUnit(vars.token.fontSize),\n                fontWeight: globalVars.fonts.weights.bold,\n                textShadow: vars.token.textShadow,\n                margin: px((formElVars.sizing.height - vars.token.minHeight) / 2 - formElVars.border.width),\n                backgroundColor: ColorsUtils.colorOut(vars.token.bg),\n                minHeight: styleUnit(vars.token.minHeight),\n                borderRadius: px(2),\n                ...userSelect(),\n            },\n            \".tokens__multi-value__label\": {\n                paddingLeft: px(6),\n                fontWeight: globalVars.fonts.weights.normal,\n                fontSize: globalVars.fonts.size.small,\n            },\n            \".tokens--is-disabled\": {\n                opacity: formElVars.disabled.opacity,\n            },\n            \".tokens-clear\": {\n                background: 0,\n                border: 0,\n                height: styleUnit(globalVars.icon.sizes.default),\n                width: styleUnit(globalVars.icon.sizes.default),\n                padding: 0,\n                ...{\n                    \"&:hover, &:focus\": {\n                        color: globalVars.mainColors.primary.toString(),\n                    },\n                },\n            },\n        },\n    });\n\n    const inputWrap = style(\"inputWrarp\", {\n        ...{\n            \"&.hasFocus .inputBlock-inputText\": {\n                ...Mixins.border({\n                    ...globalVars.borderType.formElements.default,\n                    color: globalVars.mainColors.primary,\n                }),\n            },\n        },\n    });\n\n    const removeIcon = style(\"removeIcon\", {\n        ...{\n            \"&.icon\": {\n                width: styleUnit(vars.clearIcon.width),\n                height: styleUnit(vars.clearIcon.width),\n            },\n        },\n    });\n\n    const withIndicator = style(\"withIndicator\", {\n        ...{\n            \".inputText.inputText\": {\n                fontSize: \"inherit\",\n            },\n        },\n    });\n\n    return { root, removeIcon, inputWrap, withIndicator };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { importantUnit } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { frameVariables } from \"@library/layout/frame/frameStyles\";\nimport { inputBlockClasses } from \"@library/forms/InputBlockStyles\";\nimport { percent } from \"csx\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const frameBodyClasses = useThemeCache(() => {\n    const vars = frameVariables();\n    const globalVars = globalVariables();\n    const style = styleFactory(\"frameBody\");\n    const classesInputBlock = inputBlockClasses();\n\n    const root = style({\n        position: \"relative\",\n        width: percent(100),\n        ...Mixins.padding({\n            horizontal: vars.spacing.padding,\n        }),\n        ...{\n            \"&.isSelfPadded\": {\n                ...Mixins.padding({\n                    left: 0,\n                    right: 0,\n                }),\n            },\n            \"&.hasVerticalPadding\": {\n                ...Mixins.padding({\n                    vertical: vars.spacing.padding,\n                }),\n            },\n            [`& > .${classesInputBlock.root}`]: {\n                ...{\n                    \"&.isFirst\": {\n                        marginTop: styleUnit(globalVars.gutter.half),\n                    },\n                    \"&.isLast\": {\n                        marginBottom: styleUnit(globalVars.gutter.half),\n                    },\n                },\n            },\n        },\n    });\n\n    const framePaddings = style(\"framePaddings\", {\n        ...Mixins.padding({\n            left: vars.spacing.padding,\n            right: vars.spacing.padding,\n        }),\n    });\n\n    const noContentMessage = style(\"noContentMessage\", {\n        ...Mixins.padding({\n            top: vars.header.spacing * 2,\n            right: vars.header.spacing,\n            bottom: vars.header.spacing * 2,\n            left: vars.header.spacing,\n        }),\n    });\n    const contents = style(\"contents\", {\n        ...Mixins.padding({\n            top: vars.spacing.padding,\n            right: 0,\n            bottom: vars.spacing.padding,\n            left: 0,\n        }),\n        fontSize: importantUnit(globalVars.fonts.size.medium),\n        minHeight: styleUnit(50),\n        color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n    });\n    return {\n        root,\n        framePaddings,\n        noContentMessage,\n        contents,\n    };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { IBackground } from \"@library/styles/cssUtilsTypes\";\nimport { Variables } from \"@library/styles/Variables\";\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\n\nexport const homePageVariables = useThemeCache(() => {\n    const makeThemeVars = variableFactory(\"homePage\");\n\n    // See IBackground for options\n    const backgroundImage: IBackground = makeThemeVars(\"backgroundImage\", Variables.background({}));\n\n    return {\n        backgroundImage,\n    };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { percent, viewHeight } from \"csx\";\nimport { cssRule, style } from \"@library/styles/styleShim\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { homePageVariables } from \"@library/layout/homePageStyles\";\nimport isEmpty from \"lodash/isEmpty\";\nimport { CSSObject } from \"@emotion/css\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const bodyCSS = useThemeCache(() => {\n    const globalVars = globalVariables();\n\n    cssRule(\"html\", {\n        msOverflowStyle: \"-ms-autohiding-scrollbar\",\n    });\n\n    const htmlBodyMixin: CSSObject = {\n        background: ColorsUtils.colorOut(globalVars.body.backgroundImage.color),\n        ...Mixins.font({\n            size: globalVars.fonts.size.medium,\n            family: globalVars.fonts.families.body,\n            color: globalVars.mainColors.fg,\n        }),\n        wordBreak: \"break-word\",\n    };\n\n    const bodyClass = style({ ...htmlBodyMixin, label: \"vanillaBodyReset\" });\n    document.body.classList.add(bodyClass);\n\n    cssRule(\"*\", {\n        // For Mobile Safari -> https://developer.mozilla.org/en-US/docs/Web/CSS/overscroll-behavior\n        WebkitOverflowScrolling: \"touch\",\n    });\n\n    cssRule(\"h1, h2, h3, h4, h5, h6\", {\n        display: \"block\",\n        lineHeight: globalVars.lineHeights.condensed,\n        ...Mixins.margin({\n            all: 0,\n        }),\n        ...Mixins.padding({\n            all: 0,\n        }),\n    });\n\n    cssRule(\"p\", {\n        ...Mixins.margin({\n            all: 0,\n        }),\n        ...Mixins.padding({\n            all: 0,\n        }),\n    });\n\n    cssRule(\".page\", {\n        display: \"flex\",\n        overflow: \"visible\",\n        flexDirection: \"column\",\n        width: percent(100),\n        minHeight: viewHeight(100),\n        position: \"relative\",\n        zIndex: 0,\n    });\n\n    cssRule(\"button\", {\n        WebkitAppearance: \"none\",\n        MozAppearance: \"none\",\n    });\n\n    cssRule(\".page-minHeight\", {\n        flexGrow: 1,\n        display: \"flex\",\n        flexDirection: \"column\",\n    });\n\n    cssRule(`input[type=\"number\"]`, {\n        WebkitAppearance: \"none\",\n        MozAppearance: \"textfield\",\n        ...{\n            [`&::-webkit-inner-spin-button`]: {\n                WebkitAppearance: \"none\",\n                margin: 0,\n            },\n            [`&::-webkit-outer-spin-button`]: {\n                WebkitAppearance: \"none\",\n                margin: 0,\n            },\n        },\n    });\n\n    cssRule(\n        `input::-webkit-search-decoration,\n        input::-webkit-search-cancel-button,\n        input::-webkit-search-results-button,\n        input::-webkit-search-results-decoration,\n        input::-ms-clear`,\n        {\n            display: \"none\",\n        },\n    );\n});\n\nexport const fullBackgroundClasses = useThemeCache((isRootPage = false) => {\n    const globalVars = globalVariables();\n    const style = styleFactory(\"fullBackground\");\n    const image = globalVars.body.backgroundImage;\n    const homePageVars = homePageVariables();\n    const source = isRootPage && !isEmpty(homePageVars.backgroundImage) ? homePageVariables() : globalVars.body;\n\n    const root = style(\n        {\n            display: !image ? \"none\" : \"block\",\n            position: \"fixed\",\n            top: 0,\n            left: 0,\n            width: percent(100),\n            height: viewHeight(100),\n            zIndex: -1,\n        },\n        Mixins.background(source.backgroundImage),\n    );\n\n    return { root };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { ReactNode, useContext, useEffect, useState } from \"react\";\nimport { fullBackgroundClasses, bodyCSS } from \"@library/layout/bodyStyles\";\nimport { useHistory } from \"react-router\";\n\ninterface IProps {\n    isHomePage?: boolean;\n}\n\n/**\n * Creates a drop down menu\n */\nexport const Backgrounds = () => {\n    bodyCSS(); // set styles on body tag\n    const backgroundInfo = useBackgroundContext();\n    const classes = fullBackgroundClasses(backgroundInfo.isHomePage);\n    return <div className={classes.root} />;\n};\n\nconst BackgroundContext = React.createContext<{ setIsHomePage: (value: boolean) => void; isHomePage: boolean }>({\n    isHomePage: false,\n    setIsHomePage: () => {},\n});\n\nexport const useBackgroundContext = () => {\n    return useContext(BackgroundContext);\n};\n\nexport const BackgroundsProvider = (props: { children: ReactNode }) => {\n    const [isHomePage, setIsHomePage] = useState<boolean>(false);\n    const history = useHistory();\n    useEffect(() => {\n        const unregister = history.listen(() => {\n            setIsHomePage(false);\n        });\n        return unregister;\n    }, [history]);\n    return (\n        <BackgroundContext.Provider\n            value={{\n                isHomePage,\n                setIsHomePage,\n            }}\n        >\n            {props.children}\n        </BackgroundContext.Provider>\n    );\n};\n\nconst COMPAT_BG_ID = \"vanillaCompatBodyBg\";\n\nexport function fullBackgroundCompat(isHomePage = false) {\n    if (!document.getElementById(COMPAT_BG_ID)) {\n        bodyCSS(); // set styles on body tag\n\n        // Make a backwards compatible body background (absolute positioned).\n        const classes = fullBackgroundClasses(!!isHomePage);\n        const fullBodyBackground = document.createElement(\"div\");\n        fullBodyBackground.id = COMPAT_BG_ID;\n        fullBodyBackground.classList.add(classes.root);\n        const frameBody = document.querySelector(\".Frame-body\");\n        if (frameBody) {\n            frameBody.prepend(fullBodyBackground);\n        }\n    }\n}\n","import { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { Variables } from \"@library/styles/Variables\";\n\nexport enum TagType {\n    LIST = \"list\",\n    CLOUD = \"cloud\",\n}\n\nexport const tagVariables = useThemeCache(() => {\n    /**\n     * @varGroup tags\n     * @description Variables affecting tags throughout the application.\n     */\n    const makeThemeVars = variableFactory(\"tags\");\n    const globalVars = globalVariables();\n\n    const colorOverwrite = makeThemeVars(\"colorOverwrite\", {\n        ...Variables.clickable({}),\n        skipDefault: undefined,\n    });\n\n    const linkColors = Mixins.clickable.itemState(colorOverwrite, { disableTextDecoration: true });\n\n    const nested = makeThemeVars(\"states\", linkColors);\n\n    const colors = makeThemeVars(\"color\", {\n        fg: globalVars.meta.text.color,\n    });\n\n    /**\n     * @varGroup tags.tagItem\n     * @description Tag items are found in the tag cloud module.\n     */\n    const tagItem = makeThemeVars(\"tagItem\", {\n        /**\n         * @var forumFonts.tagItem.type\n         * @description Set the display type of tag items\n         * @type string\n         * @enum cloud | list\n         */\n        type: TagType.CLOUD,\n        /**\n         * @varGroup forumFonts.tagItem.font\n         * @description Font variables for the default state of the tag label\n         */\n        font: Variables.font({}),\n        /**\n         * @varGroup forumFonts.tagItem.fontState\n         * @description Font variables title when a tag item is being interacted with. (hover, active, focus).\n         */\n        fontState: Variables.font({}),\n        /**\n         * @varGroup forumFonts.tagItem.background\n         * @description Background variables for the default state of the tag background\n         */\n        background: Variables.background({}),\n        /**\n         * @varGroup forumFonts.tagItem.backgroundState\n         * @description Background variables title when a tag item is being interacted with. (hover, active, focus)\n         */\n        backgroundState: Variables.background({}),\n        /**\n         * @varGroup forumFonts.tagItem.margin\n         * @description Margins between tag items\n         * @expand spacing\n         */\n        margin: Variables.spacing({\n            all: 0,\n        }),\n    });\n\n    const font = makeThemeVars(\n        \"font\",\n        Variables.font({\n            color: colors.fg,\n            lineHeight: globalVars.lineHeights.meta,\n            size: globalVars.fonts.size.small,\n        }),\n    );\n\n    const padding = makeThemeVars(\n        \"padding\",\n        Variables.spacing({\n            vertical: 2,\n            horizontal: 9,\n        }),\n    );\n\n    const margin = makeThemeVars(\n        \"margin\",\n        Variables.spacing({\n            vertical: 2,\n            horizontal: globalVars.meta.spacing.default,\n        }),\n    );\n\n    const border = makeThemeVars(\n        \"border\",\n        Variables.border({\n            color: colors.fg,\n            width: 1, // these are really small, I don't think it makes sense to default to anything else.\n        }),\n    );\n\n    // If border radius not overwritten, calculate it to be round.\n    if (!border.radius) {\n        border.radius =\n            ((((font.lineHeight || 1.45) as number) * ((font.size as number) ?? 12)) as number) / 2 +\n            (padding.vertical as number) +\n            (!!border.width && border.width > 0 ? (border.width as number) : 0);\n    }\n\n    const output = {\n        colors,\n        font,\n        padding,\n        border,\n        margin,\n        tagItem,\n        nested,\n    };\n\n    return output;\n});\n\n// For now we only have compatibility styles in //forumTagStyles.ts\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { percent, px } from \"csx\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\n\nexport const selectBoxClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const style = styleFactory(\"selectBox\");\n\n    const toggle = style(\"toggle\", {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n        textAlign: \"left\",\n        maxWidth: percent(100),\n        border: 0,\n        ...{\n            \"&.minimalStyles\": {\n                justifyContent: \"center\",\n                ...{\n                    \".selectBox-buttonIcon\": {\n                        marginRight: 0,\n                    },\n                },\n            },\n        },\n    });\n\n    const buttonItem = style(\"buttonItem\", {\n        display: \"flex\",\n        overflow: \"hidden\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n        textAlign: \"left\",\n        maxWidth: percent(100),\n        lineHeight: globalVars.lineHeights.condensed,\n        paddingLeft: px(13.5),\n        ...{\n            \"&[disabled]\": {\n                opacity: 1,\n            },\n        },\n    });\n\n    const buttonIcon = style(\"buttonIcon\", {\n        marginRight: \"auto\",\n    });\n\n    const outdated = style(\"outdated\", {\n        marginLeft: \"auto\",\n        lineHeight: \"inherit\",\n        whiteSpace: \"nowrap\",\n    });\n\n    const dropDownContents = style(\"dropDownContents\", {\n        paddingTop: px(6),\n        paddingBottom: px(6),\n    });\n\n    const checkContainer = style(\"checkContainer\", {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        color: globalVars.mainColors.primary.toString(),\n        width: percent(100),\n        height: px(18),\n        flexBasis: px(18),\n        marginLeft: \"auto\",\n    });\n\n    const spacer = style(\"spacer\", {\n        display: \"block\",\n        width: px(18),\n        height: px(18),\n    });\n\n    const itemLabel = style(\"itemLabel\", {\n        display: \"block\",\n        flexGrow: 1,\n    });\n\n    const offsetPadding = style(\"offsetPadding\", {\n        paddingTop: styleUnit(0),\n        paddingBottom: styleUnit(0),\n    });\n\n    return {\n        toggle,\n        buttonItem,\n        buttonIcon,\n        outdated,\n        dropDownContents,\n        checkContainer,\n        spacer,\n        itemLabel,\n        offsetPadding,\n    };\n});\n","/**\n * @copyright 2020 Adam (charrondev) Charron\n * @license Proprietary\n */\n\nexport const EMBED_FOCUS_CLASS = \"embed-focusableElement\";\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { componentThemeVariables, styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { calc, px } from \"csx\";\n\nexport const attachmentIconVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const themeVars = componentThemeVariables(\"attachmentIcon\");\n\n    const spacing = {\n        default: 12,\n        ...themeVars.subComponentStyles(\"spacing\"),\n    };\n\n    const shadow = {\n        color: globalVars.mixBgAndFg(0.1),\n        ...themeVars.subComponentStyles(\"shadow\"),\n    };\n\n    const icon = {\n        size: 16,\n        errorIconHeight: 14.39,\n    };\n\n    return { spacing, shadow, icon };\n});\n\nexport const attachmentIconsClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = attachmentIconVariables();\n    const style = styleFactory(\"attachmentIcons\");\n\n    const root = style({\n        display: \"block\",\n        position: \"relative\",\n    });\n\n    const items = style(\"items\", {\n        display: \"flex\",\n        flexWrap: \"wrap\",\n        alignItems: \"flex-start\",\n        justifyContent: \"flex-end\",\n        width: calc(`100% + ${px(vars.spacing.default * 2)}`),\n        overflow: \"hidden\",\n        ...Mixins.margin({\n            top: -vars.spacing.default,\n            left: -vars.spacing.default,\n            right: globalVars.meta.spacing.default,\n        }),\n    });\n\n    const item = style(\"item\", {\n        margin: vars.spacing.default,\n    });\n\n    return { root, items, item };\n});\n\nexport const attachmentIconClasses = useThemeCache(() => {\n    const vars = attachmentIconVariables();\n    const style = styleFactory(\"attachmentIcon\");\n\n    const root = style({\n        display: \"block\",\n        width: px(vars.icon.size),\n        height: px(vars.icon.size),\n        boxShadow: `0 0 0 1px ${vars.shadow.color}`,\n    });\n\n    const error = style(\"error\", {\n        width: px(vars.icon.size),\n        height: px(vars.icon.errorIconHeight),\n    });\n\n    return { root, error };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nexport enum AttachmentType {\n    FILE = \"A file\",\n    PDF = \"Adobe Portable Document Format (PDF)\",\n    EXCEL = \"Microsoft Excel Spreadsheet\",\n    WORD = \"Microsoft Word Document\",\n    PPT = \"Microsoft PowerPoint Presentation\",\n    ARCHIVE = \"An archived file or files\",\n    IMAGE = \"An image file\",\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { t } from \"@library/utility/appUtils\";\nimport classNames from \"classnames\";\nimport { AttachmentType } from \"@library/content/attachments/AttatchmentType\";\nimport { iconClasses } from \"@library/icons/iconStyles\";\n\nconst currentColorFill = {\n    fill: \"currentColor\",\n};\n\nexport function FileTypeGenericIcon(props: { className?: string; fileType?: string }) {\n    const title = props.fileType ? props.fileType : t(\"File\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n            className={classNames(\"attachmentIcon-fileGeneric\", \"attachmentIcon\", classes.fileType, props.className)}\n            role=\"img\"\n            aria-label={title}\n        >\n            <title>{title}</title>\n            <rect width=\"16\" height=\"16\" rx=\"1\" style={{ fill: \"#777b81\" }} />\n            <path\n                d=\"M11.5,6v4a3.418,3.418,0,0,1-3.334,3.5H8a3.418,3.418,0,0,1-3.5-3.334c0-.055,0-.111,0-.166V5A2.362,2.362,0,0,1,6.715,2.5,2.259,2.259,0,0,1,7,2.5,2.362,2.362,0,0,1,9.5,4.715,2.258,2.258,0,0,1,9.5,5V9.5c0,1-.5,2-1.5,2s-1.5-1-1.5-2V6\"\n                style={{ fill: \"none\", stroke: \"#f1f2f2\", strokeLinecap: \"round\" }}\n            />\n        </svg>\n    );\n}\n\nexport function FileTypeWordIcon(props: { className?: string }) {\n    const title = t(\"Word\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n            className={classNames(\"attachmentIcon-fileWord\", \"attachmentIcon\", classes.fileType, props.className)}\n            role=\"img\"\n            aria-label={t(AttachmentType.WORD)}\n        >\n            <title>{title}</title>\n            <rect width=\"16\" height=\"16\" rx=\"1\" style={{ fill: \"#0175fc\" }} />\n            <rect x=\"3\" y=\"3\" width=\"10\" height=\"1\" style={{ fill: \"#cce3fe\" }} />\n            <rect x=\"3\" y=\"5\" width=\"10\" height=\"1\" style={{ fill: \"#cce3fe\" }} />\n            <rect x=\"3\" y=\"12\" width=\"10\" height=\"1\" style={{ fill: \"#cce3fe\" }} />\n            <rect x=\"3\" y=\"10\" width=\"10\" height=\"1\" style={{ fill: \"#cce3fe\" }} />\n            <rect x=\"3\" y=\"7\" width=\"6\" height=\"1\" style={{ fill: \"#cce3fe\" }} />\n        </svg>\n    );\n}\n\nexport function FileTypeExcelIcon(props: { className?: string }) {\n    const title = t(\"Excel\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n            className={classNames(\"attachmentIcon-fileExcel\", \"attachmentIcon\", classes.fileType, props.className)}\n            role=\"img\"\n            aria-label={t(AttachmentType.EXCEL)}\n        >\n            <title>{title}</title>\n            <rect width=\"16\" height=\"16\" fill=\"#2f7d32\" />\n            <polygon\n                style={{ fill: \"#fff\" }}\n                points=\"9.334 10.361 7.459 13.543 6 13.543 8.613 9.166 6.164 5 7.629 5 9.334 7.965 11.039 5 12.498 5 10.055 9.166 12.668 13.543 11.203 13.543 9.334 10.361\"\n            />\n        </svg>\n    );\n}\n\nexport function FileTypePDFIcon(props: { className?: string }) {\n    const unabbreviatedType = t(AttachmentType.PDF);\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n            className={classNames(\"attachmentIcon-filePDF\", \"attachmentIcon\", classes.fileType, props.className)}\n            role=\"img\"\n            aria-label={t(AttachmentType.PDF)}\n        >\n            <title>\n                <abbr title={unabbreviatedType || undefined}>{AttachmentType.PDF}</abbr>\n            </title>\n            <rect width=\"16\" height=\"16\" rx=\"1\" style={{ fill: \"#c80000\" }} />\n            <path\n                d=\"M2.5,11V8.5m4.5,2v-5H8q1.5,0,1.5,2.143v.714Q9.5,10.5,8,10.5Zm-4.5-2v-3h1Q5,5.5,5,6.786v.428Q5,8.5,3.5,8.5Z\"\n                style={{ stroke: \"#fff\", fill: \"none\" }}\n            />\n            <polygon\n                points=\"11 11 11 5 14 5 14 6 12.007 6 12 7.5 13.493 7.5 13.493 8.5 12 8.5 12 11 11 11\"\n                style={{ fill: \"#fff\" }}\n            />\n        </svg>\n    );\n}\n\nexport function FileTypeImageIcon(props: { className?: string }) {\n    const title = t(\"Image\");\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n            className={classNames(\"attachmentIcon-fileImage\", \"attachmentIcon\", classes.fileType, props.className)}\n            role=\"img\"\n            aria-label={t(AttachmentType.IMAGE)}\n        >\n            <title>{title}</title>\n\n            <rect width=\"16\" height=\"16\" rx=\"1\" style={{ fill: \"#c80090\" }} />\n            <path\n                d=\"M3,12.5a1,1,0,0,1-1-1V6A1,1,0,0,1,3,5h.5V4.75a.25.25,0,0,1,.25-.25h.5a.25.25,0,0,1,.25.25V5a.81.81,0,0,0,.724-.447l.5-1A1,1,0,0,1,6.618,3H9.382a1,1,0,0,1,.894.553l.448.894A1,1,0,0,0,11.618,5H13a1,1,0,0,1,1,1v5.5a1,1,0,0,1-1,1Zm5-2a2,2,0,1,1,2-2A2,2,0,0,1,8,10.5Zm0,1a3,3,0,1,0-3-3A3,3,0,0,0,8,11.5ZM11.5,6V7H13V6Z\"\n                style={{ fill: \"#fff\", fillOpacity: 0.97 }}\n            />\n        </svg>\n    );\n}\n\nexport function FileTypePowerPointIcon(props: { className?: string }) {\n    const textFill = \"#fff\";\n    const title = t(\"PPT\");\n    const unabbreviatedType = t(AttachmentType.PPT);\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n            className={classNames(\"attachmentIcon-filePowerPoint\", \"attachmentIcon\", classes.fileType, props.className)}\n            role=\"img\"\n            aria-label={t(AttachmentType.IMAGE)}\n        >\n            <title>\n                {unabbreviatedType ? <abbr title={unabbreviatedType}>{AttachmentType.PDF}</abbr> : AttachmentType.PDF}\n            </title>\n            <rect width=\"16\" height=\"16\" rx=\"1\" style={{ fill: \"#ee6a01\" }} />\n            <path d=\"M8,4V7.5h3.55A3.5,3.5,0,1,1,8,4Z\" style={{ fill: \"#fbe1cc\" }} />\n            <path d=\"M9,3h.05a3.5,3.5,0,0,1,3.5,3.5H9Z\" style={{ fill: \"#fbe1cc\" }} />\n            <rect x=\"3\" y=\"12\" width=\"10\" height=\"1\" style={{ fill: \"#fbe1cc\" }} />\n        </svg>\n    );\n}\n\nexport function FileTypeZipIcon(props: { className?: string }) {\n    const title = t(\"Zip\");\n    const unabbreviatedType = t(AttachmentType.ARCHIVE);\n    const barStyle = { fill: \"#fff\", fillOpacity: 0.9 };\n    const classes = iconClasses();\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 16 16\"\n            className={classNames(\"attachmentIcon-fileZip\", \"attachmentIcon\", classes.fileType, props.className)}\n            role=\"img\"\n            aria-label={t(AttachmentType.IMAGE)}\n        >\n            <title>\n                {unabbreviatedType ? <abbr title={unabbreviatedType}>{AttachmentType.PDF}</abbr> : AttachmentType.PDF}\n            </title>\n            <rect width=\"16\" height=\"16\" rx=\"1\" style={{ fill: \"#eeb601\" }} />\n            <path\n                d=\"M6,7.5h4l.45,4.955A.5.5,0,0,1,10,13H6.054a.5.5,0,0,1-.5-.5.338.338,0,0,1,0-.045Zm.99,3a.149.149,0,0,0-.149.14l-.08,1.2v.01a.15.15,0,0,0,.15.15H9.1a.149.149,0,0,0,.139-.16l-.08-1.2a.149.149,0,0,0-.149-.14Z\"\n                style={{ fill: \"#fdf7e6\" }}\n            />\n            <rect x=\"6\" y=\"6\" width=\"2\" height=\"1\" style={barStyle} />\n            <rect x=\"8\" y=\"5\" width=\"2\" height=\"1\" style={barStyle} />\n            <rect x=\"6\" y=\"4\" width=\"2\" height=\"1\" style={barStyle} />\n            <rect x=\"8\" y=\"3\" width=\"2\" height=\"1\" style={barStyle} />\n            <rect x=\"6\" y=\"2\" width=\"2\" height=\"1\" style={barStyle} />\n            <rect x=\"8\" y=\"1\" width=\"2\" height=\"1\" style={barStyle} />\n            <rect x=\"6\" width=\"2\" height=\"1\" style={barStyle} />\n        </svg>\n    );\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport React from \"react\";\nimport { AttachmentType } from \"@library/content/attachments/AttatchmentType\";\nimport {\n    FileTypeGenericIcon,\n    FileTypeWordIcon,\n    FileTypeExcelIcon,\n    FileTypePDFIcon,\n    FileTypeImageIcon,\n    FileTypePowerPointIcon,\n    FileTypeZipIcon,\n} from \"@library/icons/fileTypes\";\n/**\n * Map a mimeType into an AttachmentType.\n *\n * @param mimeType\n */\nexport function mimeTypeToAttachmentType(mimeType?: string | null): AttachmentType {\n    if (!mimeType) {\n        return AttachmentType.FILE;\n    }\n\n    if (mimeType.startsWith(\"image/\")) {\n        return AttachmentType.IMAGE;\n    }\n\n    switch (mimeType) {\n        case \"application/pdf\":\n            return AttachmentType.PDF;\n        case \"application/vnd.ms-excel\":\n        case \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\":\n            return AttachmentType.EXCEL;\n        case \"application/msword\":\n        case \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\":\n            return AttachmentType.WORD;\n        case \"application/vnd.ms-powerpoint\":\n        case \"application/vnd.openxmlformats-officedocument.presentationml.presentation\":\n            return AttachmentType.PPT;\n        case \"application/zip\":\n        case \"application/x-7z-compressed\":\n        case \"application/x-bzip\":\n        case \"application/x-bzip2\":\n        case \"application/x-rar-compressed\":\n            return AttachmentType.ARCHIVE;\n        default:\n            return AttachmentType.FILE;\n    }\n}\n\nexport function GetAttachmentIcon(props: { type: AttachmentType; className?: string }) {\n    switch (props.type) {\n        case AttachmentType.PDF:\n            return <FileTypePDFIcon className={props.className} />;\n        case AttachmentType.EXCEL:\n            return <FileTypeExcelIcon className={props.className} />;\n        case AttachmentType.WORD:\n            return <FileTypeWordIcon className={props.className} />;\n        case AttachmentType.PPT:\n            return <FileTypePowerPointIcon className={props.className} />;\n        case AttachmentType.ARCHIVE:\n            return <FileTypeZipIcon className={props.className} />;\n        case AttachmentType.IMAGE:\n            return <FileTypeImageIcon className={props.className} />;\n        default:\n            return <FileTypeGenericIcon className={props.className} />;\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\n\nexport const defaultTransition = (...properties: string[]) => {\n    const vars = globalVariables();\n    return timedTransition(vars.animation.defaultTiming, ...properties);\n};\n\nexport const timedTransition = (timing: string, ...properties: string[]) => {\n    const vars = globalVariables();\n    properties = properties.length === 0 ? [\"all\"] : properties;\n    return {\n        transition: `${properties.map((prop, index) => {\n            return `${prop} ${timing} ${vars.animation.defaultEasing}${index === properties.length ? \", \" : \"\"}`;\n        })}`,\n    };\n};\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport * as React from \"react\";\nimport classNames from \"classnames\";\nimport numeral from \"numeral\";\nimport { numberFormattedClasses } from \"@library/content/NumberFormatted.styles\";\n\ninterface IProps {\n    value: number;\n    className?: string;\n    title?: string;\n    fallbackTag?: string;\n}\n/**\n * Strip trailing 0s from a string.\n *\n * @param value\n */\nfunction stripTrailingZeros(value: string): string {\n    if (isNaN(Number(value))) {\n        return value;\n    } else {\n        return Number(value).toString();\n    }\n}\n\n/**\n * Format a compact value of a number.\n *\n * @param props\n */\nexport function formatNumberText(props: { value: number }) {\n    const { value } = props;\n    numeral.localeData(\"en\");\n    const initialValue = numeral(value);\n    const compactValue = stripTrailingZeros(initialValue.format(\"0a.0\"));\n    const fullValue = initialValue.format();\n    const isAbbreviated = fullValue.toString() !== initialValue.value().toString();\n\n    return {\n        compactValue,\n        fullValue,\n        isAbbreviated,\n    };\n}\n\n/**\n * If you're building a translated stirng, it can be helpful to get the same data as \"NumberFormatted\" but decomposed\n */\nexport function decomposedNumberFormatted(props: IProps) {\n    const formattedNumber = formatNumberText({ value: props.value });\n    const { fullValue, isAbbreviated } = formattedNumber;\n    const Tag = (isAbbreviated ? `abbr` : props.fallbackTag ?? `span`) as \"span\";\n    const className = classNames(\"number\", props.className, numberFormattedClasses().root);\n    const title = props.title || fullValue;\n\n    return {\n        ...formattedNumber,\n        Tag,\n        attributes: {\n            className,\n            title,\n        },\n    };\n}\n\n/**\n * A component to format numbers to plug into <Translate/>. The <NumberFormatted/> below does not play well with the component <Translate/>\n */\nexport function numberFormattedForTranslations(props: IProps) {\n    const { Tag, attributes, compactValue } = decomposedNumberFormatted(props);\n    return <Tag {...attributes}>{compactValue}</Tag>;\n}\n\n/**\n * A component to format numbers. The react number format supports localization. The way we'll pass in the options are TBD.\n */\nexport default function NumberFormatted(props: IProps) {\n    const { compactValue, Tag, attributes } = decomposedNumberFormatted(props);\n    return <Tag {...attributes}>{compactValue}</Tag>;\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport InputBlock, { IInputBlockProps } from \"@library/forms/InputBlock\";\nimport { inputBlockClasses } from \"@library/forms/InputBlockStyles\";\n\ninterface IProps extends IInputBlockProps {}\n\nexport default function CheckboxGroup(props: IProps) {\n    const classes = inputBlockClasses();\n    return (\n        <InputBlock {...props} legend={true}>\n            {props.children}\n        </InputBlock>\n    );\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { IUserSuggestion } from \"@library/features/users/suggestion/IUserSuggestion\";\nimport { ILoadable } from \"@library/@types/api/core\";\n\nexport type ISuggestionValue = ILoadable<IUserSuggestion[]>;\n\nexport interface ISuggestionNode {\n    children?: {\n        [key: string]: ISuggestionNode;\n    };\n    value?: ISuggestionValue;\n}\n\n/**\n * A trie for storage of mention data.\n */\nexport default class SuggestionTrie {\n    public MAX_PARTIAL_LOOKUP_ITERATIONS = 10;\n    private root: ISuggestionNode = {};\n\n    /**\n     * Insert a value into a node for the word. This will overwrite whatever value the node already has\n     *\n     * @param word - The location in the trie.\n     * @param value - The value for the node.\n     */\n    public insert(word: string, value: ISuggestionValue): void {\n        let current = this.root;\n\n        for (let i = 0; i < word.length; i++) {\n            const letter = word[i];\n            if (!current.children) {\n                current.children = {};\n            }\n\n            if (!(letter in current.children)) {\n                const contents: ISuggestionNode = i !== word.length - 1 ? {} : { children: {} };\n                current.children[letter] = contents;\n            }\n\n            current = current.children[letter];\n        }\n\n        current.value = value;\n    }\n\n    /**\n     * Get a node for a given word.\n     *\n     * If no word is passed the root node will be returned.\n     *\n     * @param word - The word to lookup.\n     */\n    public getNode(word?: string): ISuggestionNode | null {\n        let node = this.root;\n        if (word === undefined) {\n            return node;\n        }\n\n        for (let i = 0; i < word.length; i++) {\n            const char = word.charAt(i);\n            if (node.children && node.children[char]) {\n                node = node.children[char];\n            } else {\n                return null;\n            }\n        }\n        return node;\n    }\n\n    /**\n     * Get the value out of a particular node.\n     *\n     * @param word - The word to lookup.\n     */\n    public getValue(word: string): ISuggestionValue | null {\n        const node = this.getNode(word);\n        return (node && node.value) || null;\n    }\n\n    /**\n     * Lookup the value for a word using increasingly small substrings of the current string.\n     *\n     * Number of iterations is capped at MAX_PARTIAL_LOOKUP_ITERATIONS.\n     *\n     * ex. this.getValueFormPartials(\"test\") will lookup for\n     * - \"test\",\n     * - \"tes\",\n     * - \"te\",\n     * - \"t\"\n     *\n     * And return immediately if it finds a result.\n     */\n    public getValueFromPartialsOfWord(word: string): ISuggestionValue | null {\n        const startingLength = Math.min(this.MAX_PARTIAL_LOOKUP_ITERATIONS, word.length);\n        for (let x = startingLength; x > 0; x--) {\n            const substring = word.substring(0, x);\n            const potentialValue = this.getValue(substring);\n            if (potentialValue != null) {\n                return potentialValue;\n            }\n        }\n\n        return null;\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ILoadable, LoadStatus } from \"@library/@types/api/core\";\nimport { IUsersStoreState } from \"@library/features/users/userTypes\";\nimport SuggestionTrie from \"@library/features/users/suggestion/SuggestionTrie\";\nimport { IUserSuggestion } from \"@library/features/users/suggestion/IUserSuggestion\";\nimport UserSuggestionActions from \"@library/features/users/suggestion/UserSuggestionActions\";\nimport ReduxReducer from \"@library/redux/ReduxReducer\";\nimport moment from \"moment\";\n\nexport interface IUserSuggestionState {\n    lastSuccessfulUsername: string | null;\n    currentUsername: string | null;\n    trie: SuggestionTrie;\n    activeSuggestionID: string;\n    activeSuggestionIndex: number;\n}\n\nexport interface IInjectableSuggestionsProps {\n    lastSuccessfulUsername: string | null;\n    currentUsername: string | null;\n    activeSuggestionID: string;\n    activeSuggestionIndex: number;\n    suggestions: ILoadable<IUserSuggestion[]>;\n    isLoading: boolean;\n}\n\nexport default class UserSuggestionModel implements ReduxReducer<IUserSuggestionState> {\n    private static readonly defaultSuggestions: ILoadable<IUserSuggestion[]> = {\n        status: LoadStatus.PENDING,\n    };\n\n    public static mapStateToProps(state: IUsersStoreState): IInjectableSuggestionsProps {\n        const stateSlice = { ...UserSuggestionModel.stateSlice(state) };\n        const { trie, ...rest } = stateSlice;\n        const suggestions = stateSlice.lastSuccessfulUsername\n            ? trie.getValue(stateSlice.lastSuccessfulUsername) || UserSuggestionModel.defaultSuggestions\n            : UserSuggestionModel.defaultSuggestions;\n\n        const currentNode = stateSlice.currentUsername && trie.getValue(stateSlice.currentUsername);\n        const isLoading = !!currentNode && currentNode.status === LoadStatus.LOADING;\n\n        return {\n            ...rest,\n            suggestions,\n            isLoading,\n        };\n    }\n\n    public static selectSuggestionsTrie(state: IUsersStoreState): SuggestionTrie {\n        return UserSuggestionModel.stateSlice(state).trie;\n    }\n\n    private static stateSlice(state: IUsersStoreState): IUserSuggestionState {\n        if (!state.users || !state.users.suggestions) {\n            throw new Error(\n                `Could not find users.suggestions in state ${state}. Be sure to initialize the usersReducer()`,\n            );\n        }\n\n        return state.users.suggestions;\n    }\n\n    /**\n     * Sort a list of user suggestions.\n     *\n     * Priorities\n     * [Exact Match]\n     * [Users active in the last 90 days, sorted loosely with transliteration]\n     * [Users not active in the last 90 days, sorted loosely with transliteration]\n     *\n     * @param users The users to sort.\n     * @param searchName The current search text.\n     * @param currentMoment The current time.\n     */\n    public static sortSuggestions(users: IUserSuggestion[], searchName: string, currentMoment = moment()) {\n        const looseCollator = Intl.Collator(\"en\", {\n            usage: \"sort\",\n            sensitivity: \"variant\",\n            ignorePunctuation: true,\n            numeric: true,\n        });\n\n        // Days of recent activity to look at.\n        const ACTIVE_THRESHOLD = 90;\n\n        // Fan out into most recently active users & less active users.\n        let recentlyActive: IUserSuggestion[] = [];\n        let lessActive: IUserSuggestion[] = [];\n\n        const daysAgo90 = currentMoment.subtract(ACTIVE_THRESHOLD, \"days\");\n\n        for (const user of users) {\n            if (!user.dateLastActive) {\n                lessActive.push(user);\n                continue;\n            }\n\n            const lastActiveMoment = moment(user.dateLastActive);\n            if (lastActiveMoment.isSameOrAfter(daysAgo90)) {\n                recentlyActive.push(user);\n            } else {\n                lessActive.push(user);\n            }\n        }\n\n        const sortByName = (userA: IUserSuggestion, userB: IUserSuggestion) => {\n            const casedSearchName = searchName.toLocaleLowerCase();\n            const aCasedName = userA.name.toLocaleLowerCase();\n            const bCasedName = userB.name.toLocaleLowerCase();\n\n            // Return partial matches first.\n            if (aCasedName.startsWith(casedSearchName) && !bCasedName.startsWith(casedSearchName)) {\n                return -1;\n            }\n            if (bCasedName.startsWith(casedSearchName) && !aCasedName.startsWith(casedSearchName)) {\n                return 1;\n            }\n            return looseCollator.compare(userA.name.toLocaleLowerCase(), userB.name.toLocaleLowerCase());\n        };\n\n        const exactToTheTop = (userA: IUserSuggestion, userB: IUserSuggestion) => {\n            const casedSearchName = searchName.toLocaleLowerCase();\n            const aCasedName = userA.name.toLocaleLowerCase();\n\n            //  Return exact matches first.\n            if (aCasedName === casedSearchName) {\n                return -1;\n            }\n\n            // Don't affect the sorts otherwise.\n            return 0;\n        };\n\n        // Sort each set of users separately.\n        recentlyActive.sort(sortByName);\n        lessActive.sort(sortByName);\n\n        // Join them back together.\n        const allUsers = [...recentlyActive, ...lessActive];\n\n        // Sort exact matches to the top.\n        allUsers.sort(exactToTheTop);\n        return allUsers;\n    }\n\n    public readonly initialState: IUserSuggestionState = {\n        lastSuccessfulUsername: null,\n        currentUsername: null,\n        trie: new SuggestionTrie(),\n        activeSuggestionID: \"\",\n        activeSuggestionIndex: 0,\n    };\n\n    public reducer = (\n        state = this.initialState,\n        action: typeof UserSuggestionActions.ACTION_TYPES,\n    ): IUserSuggestionState => {\n        switch (action.type) {\n            case UserSuggestionActions.LOAD_USERS_REQUEST: {\n                const { username } = action.meta;\n                state.trie.insert(username, {\n                    status: LoadStatus.LOADING,\n                });\n\n                // We want to invalidate the previous results unless:\n                // - The new string is longer than the old one\n                // - The new string is a superset of the old one.\n                let shouldKeepPreviousResults = false;\n                const previousSuccessfulName = state.lastSuccessfulUsername;\n                if (previousSuccessfulName != null && username.length >= previousSuccessfulName.length) {\n                    const newNameSubstring = username.substring(0, previousSuccessfulName.length);\n                    if (newNameSubstring === previousSuccessfulName) {\n                        shouldKeepPreviousResults = true;\n                    }\n                }\n\n                return {\n                    ...state,\n                    currentUsername: username,\n                    lastSuccessfulUsername: shouldKeepPreviousResults ? state.lastSuccessfulUsername : null,\n                };\n            }\n            case UserSuggestionActions.LOAD_USERS_ERROR: {\n                const error = action.payload;\n                const { username } = action.meta;\n                state.trie.insert(username, {\n                    status: LoadStatus.ERROR,\n                    data: undefined,\n                    error,\n                });\n                return state;\n            }\n            case UserSuggestionActions.LOAD_USERS_RESPONSE: {\n                const users = action.payload.data;\n                const { username } = action.meta;\n                state.trie.insert(username, {\n                    status: LoadStatus.SUCCESS,\n                    data: UserSuggestionModel.sortSuggestions(users, username),\n                });\n\n                const firstUserID = users.length > 0 ? users[0].domID : \"\";\n                return {\n                    ...state,\n                    activeSuggestionID: firstUserID,\n                    activeSuggestionIndex: 0,\n                    lastSuccessfulUsername: username,\n                    currentUsername: username,\n                };\n            }\n            case UserSuggestionActions.SET_ACTIVE_SUGGESTION: {\n                const { suggestionID, suggestionIndex } = action.payload;\n                return {\n                    ...state,\n                    activeSuggestionID: suggestionID,\n                    activeSuggestionIndex: suggestionIndex,\n                };\n            }\n            default:\n                return state;\n        }\n    };\n}\n","import { formElementsVariables } from \"@library/forms/formElementStyles\";\n\nexport interface IPaddingBasedOnRadius {\n    radius?: number | string; // pixel value in integer or percentage in string\n    extraPadding?: number | string; // If undefined, return 0 for both sides\n    height?: number; // Min height of element\n    side?: \"horizontal\" | \"left\" | \"right\"; // defaults to horizontal\n    debug?: boolean;\n}\n\nexport const paddingOffsetBasedOnBorderRadius = (props: IPaddingBasedOnRadius) => {\n    let leftOffset = 0;\n    let rightOffset = 0;\n    const height = props.height ?? formElementsVariables().sizing.height;\n    const debug = props.debug;\n\n    if (props && props.radius && props.extraPadding) {\n        const maxValue = parseInt(props.extraPadding.toString());\n        const rawRadius = props.radius.toString().trim();\n        const workingBorderRadius = parseFloat(rawRadius);\n        const halfHeight = height / 2;\n\n        let finalBorderRadiusRatio = 0;\n        if (rawRadius.endsWith(\"%\")) {\n            const percent = Math.min(50, workingBorderRadius); // you can't go over 50% anyways.\n            finalBorderRadiusRatio = percent * height;\n        } else {\n            //assume pixels, we don't currently support \"ems\" or any other units.\n            finalBorderRadiusRatio =\n                (Math.min(halfHeight, parseInt(workingBorderRadius.toString())) / halfHeight) * 100; // anything above have half the height is too much\n        }\n\n        const offset = (finalBorderRadiusRatio / 100) * maxValue;\n        if (props.side !== \"right\") {\n            leftOffset = offset;\n        }\n        if (props.side !== \"left\") {\n            rightOffset = offset;\n        }\n    }\n\n    const result = {\n        left: leftOffset,\n        right: rightOffset,\n    };\n\n    return result;\n};\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { absolutePosition, defaultTransition, disabledInput, userSelect } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { Variables } from \"@library/styles/Variables\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { calc, em, important, percent, px } from \"csx\";\nimport { CSSObject } from \"@emotion/css\";\n\nexport const checkRadioVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const formElementVars = formElementsVariables();\n    const themeVars = variableFactory(\"checkRadio\");\n\n    const border = themeVars(\n        \"border\",\n        Variables.border({\n            ...formElementVars.border,\n            radius: 2,\n        }),\n    );\n\n    const main = themeVars(\"check\", {\n        fg: globalVars.mainColors.bg,\n        bg: globalVars.mainColors.bg,\n        checked: {\n            fg: globalVars.elementaryColors.white,\n            bg: globalVars.mainColors.primary,\n            border: globalVars.mainColors.primary,\n        },\n        checkedHover: {\n            fg: globalVars.mainColors.primary,\n            bg: globalVars.mainColors.primary.fade(0.15),\n        },\n        hover: {\n            border: {\n                color: globalVars.mainColors.primary,\n            },\n            fg: globalVars.mainColors.primary,\n            bg: globalVars.mainColors.primary.fade(0.1),\n            opacity: 0.8,\n        },\n    });\n\n    const checkBox = themeVars(\"checkBox\", {\n        check: {\n            width: 10,\n            height: 10,\n        },\n        disk: {\n            width: 6,\n            height: 6,\n        },\n    });\n\n    const radioButton = themeVars(\"radioButton\", {\n        icon: {\n            width: 6,\n            height: 6,\n        },\n    });\n\n    const labelNote = themeVars(\"labelNote\", {\n        fontSize: \".8em\",\n        opacity: 0.7,\n    });\n\n    const sizing = themeVars(\"sizing\", {\n        width: 18,\n    });\n\n    const spacing = themeVars(\"spacing\", {\n        horizontal: 6,\n        vertical: 9,\n    });\n\n    return {\n        border,\n        main,\n        checkBox,\n        radioButton,\n        labelNote,\n        sizing,\n        spacing,\n    };\n});\n\nexport const checkRadioClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = checkRadioVariables();\n    const style = styleFactory(\"checkRadio\");\n\n    const isDashboard = style(\"isDashboard\", {});\n\n    //.radioButton-label,\n    // .checkbox-label\n    const label = style(\"label\", {\n        lineHeight: styleUnit(vars.sizing.width),\n        paddingLeft: styleUnit(8),\n        cursor: \"pointer\",\n        ...userSelect(),\n        width: calc(`100% - ${styleUnit(vars.sizing.width)}`),\n    });\n\n    const labelBold = style(\"labelBold\", {\n        ...Mixins.font({\n            weight: globalVars.fonts.weights.semiBold,\n        }),\n    });\n\n    const labelNote = style(\"labelNote\", {\n        display: \"inline-block\",\n        fontSize: styleUnit(vars.labelNote.fontSize),\n        marginLeft: styleUnit(24),\n        opacity: vars.labelNote.opacity,\n        verticalAlign: \"middle\",\n    });\n\n    // .radioButton-disk,\n    // .checkbox-box\n    const iconContainer = style(\"iconContainer\", {\n        ...defaultTransition(\"border\", \"background\", \"opacity\"),\n        position: \"relative\",\n        display: \"inline-flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        width: styleUnit(vars.sizing.width),\n        height: styleUnit(vars.sizing.width),\n        flexBasis: styleUnit(vars.sizing.width),\n        verticalAlign: \"middle\",\n        cursor: \"pointer\",\n        backgroundColor: ColorsUtils.colorOut(vars.main.bg),\n        ...Mixins.border(vars.border),\n    });\n\n    const radioIcon = style(\"radioIcon\", {\n        ...absolutePosition.middleLeftOfParent(),\n        display: \"none\",\n        width: styleUnit(vars.radioButton.icon.width),\n        height: styleUnit(vars.radioButton.icon.height),\n        margin: \"auto\",\n    });\n\n    const checkIcon = style(\"checkBoxIcon\", {\n        ...absolutePosition.middleOfParent(),\n        display: \"none\",\n        width: styleUnit(vars.checkBox.check.width),\n        height: styleUnit(vars.checkBox.check.height),\n        color: \"inherit\",\n        margin: \"auto\",\n    });\n\n    const disk = style(\"disk\", {\n        borderRadius: percent(50),\n    });\n\n    const diskIcon = style(\"diskIcon\", {\n        display: \"none\",\n        width: vars.checkBox.disk.width,\n        height: vars.checkBox.disk.height,\n    });\n\n    const uncheckedStateStyles: CSSObject = {\n        borderColor: ColorsUtils.colorOut(vars.main.hover.border.color),\n        backgroundColor: ColorsUtils.colorOut(vars.main.hover.bg),\n    };\n\n    const checkedStateStyles: CSSObject = {\n        backgroundColor: ColorsUtils.colorOut(vars.main.checkedHover.bg),\n        color: ColorsUtils.colorOut(vars.main.checkedHover.fg),\n    };\n\n    // .radioButton-input,\n    // .checkbox-input\n    const input = style(\"input\", {\n        ...Mixins.absolute.srOnly(),\n        ...{\n            [`&:hover:not(:disabled) + .${iconContainer}`]: uncheckedStateStyles,\n            [`&.focus-visible:not(:disabled) + .${iconContainer}`]: uncheckedStateStyles,\n            [`&:checked + .${iconContainer}`]: {\n                borderColor: ColorsUtils.colorOut(vars.main.checked.border),\n                color: ColorsUtils.colorOut(vars.main.checked.fg),\n                backgroundColor: ColorsUtils.colorOut(vars.main.checked.bg),\n                ...{\n                    \"& svg\": {\n                        display: \"block\",\n                    },\n                },\n            },\n            [`&:hover:checked:not(:disabled) + .${iconContainer}`]: checkedStateStyles,\n            [`&.focus-visible:checked:not(:disabled) + .${iconContainer}`]: checkedStateStyles,\n            [`&:disabled ~ .${label}`]: disabledInput(),\n            [`&:disabled + .${iconContainer}`]: disabledInput(),\n        },\n    });\n\n    //.radioButton,\n    //.checkbox\n    const root = style({\n        display: important(\"flex\"),\n        flexWrap: \"wrap\",\n        alignItems: \"center\",\n        outline: 0,\n        ...Mixins.padding(vars.spacing),\n        ...{\n            [`&&`]: {\n                margin: 0,\n            },\n            [`&.isHorizontal.isHorizontal.isHorizontal`]: Mixins.margin({\n                all: 0,\n                right: px(globalVars.spacer.size / 2),\n            }),\n            [`&.${isDashboard} + .info`]: {\n                ...Mixins.margin({\n                    top: styleUnit(2),\n                    bottom: styleUnit(6),\n                }),\n            },\n        },\n    });\n\n    const grid = style(\"grid\", {\n        display: \"flex\",\n        flexWrap: \"wrap\",\n        alignItems: \"strech\",\n        ...{\n            [`.${root}`]: {\n                flexBasis: \"50%\",\n                display: \"block !important\",\n                ...Mixins.margin({\n                    top: 0,\n                }),\n            },\n            [`.${root}:nth-child(n + 3)`]: {\n                ...Mixins.margin({\n                    top: styleUnit(globalVars.gutter.half),\n                }),\n            },\n            [`.${root}:nth-child(odd)`]: {\n                ...Mixins.padding({\n                    right: styleUnit(globalVars.gutter.half),\n                }),\n            },\n        },\n    });\n\n    return {\n        root,\n        label,\n        labelBold,\n        labelNote,\n        iconContainer,\n        radioIcon,\n        checkIcon,\n        disk,\n        diskIcon,\n        input,\n        grid,\n        isDashboard,\n    };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { singleBorder } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { important } from \"csx\";\nimport { frameVariables } from \"@library/layout/frame/frameStyles\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const frameFooterClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const style = styleFactory(\"frameFooter\");\n    const vars = frameVariables();\n\n    const root = style({\n        display: \"flex\",\n        minHeight: styleUnit(vars.footer.minHeight),\n        alignItems: \"center\",\n        position: \"relative\",\n        zIndex: 1,\n        borderTop: singleBorder(),\n        flexWrap: \"wrap\",\n        justifyContent: \"space-between\",\n        ...Mixins.padding({\n            top: 0,\n            bottom: 0,\n            left: vars.footer.spacing,\n            right: vars.footer.spacing,\n        }),\n    });\n\n    const justifiedRight = style(\"justifiedRight\", {\n        ...{\n            \"&&\": {\n                justifyContent: \"flex-end\",\n            },\n        },\n    });\n\n    const markRead = style(\"markRead\", {\n        ...{\n            \"&.buttonAsText\": {\n                fontWeight: globalVars.fonts.weights.semiBold,\n                color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n            },\n        },\n    });\n\n    const actionButton = style(\"actionButton\", {\n        marginLeft: styleUnit(24),\n    });\n\n    const selfPadded = style({\n        paddingLeft: important(0),\n        paddingRight: important(0),\n    });\n\n    const forDashboard = style({\n        minHeight: styleUnit(65),\n    });\n\n    return {\n        root,\n        markRead,\n        selfPadded,\n        actionButton,\n        justifiedRight,\n        forDashboard,\n    };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { appearance, singleBorder, flexHelper } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { calc, em, percent } from \"csx\";\nimport { frameVariables } from \"@library/layout/frame/frameStyles\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const frameHeaderClasses = useThemeCache(() => {\n    const vars = frameVariables();\n    const globalVars = globalVariables();\n    const formElVars = formElementsVariables();\n    const style = styleFactory(\"frameHeader\");\n\n    const root = style({\n        display: \"flex\",\n        position: \"relative\",\n        alignItems: \"center\",\n        flexWrap: \"nowrap\",\n        width: percent(100),\n        color: ColorsUtils.colorOut(vars.colors.fg),\n        zIndex: 1,\n        borderBottom: singleBorder(),\n        ...Mixins.padding({\n            top: 4,\n            right: vars.footer.spacing,\n            bottom: 4,\n            left: vars.footer.spacing,\n        }),\n        ...{\n            \".button + .button\": {\n                marginLeft: styleUnit(12 - formElVars.border.width),\n            },\n        },\n    });\n\n    const rootBorderLess = style(\"rootBorderless\", {\n        borderBottom: \"none\",\n    });\n\n    const rootMinimal = style(\"rootMinimal\", {\n        display: \"block\",\n    });\n\n    const backButton = style(\"backButton\", {\n        display: \"flex\",\n        flexWrap: \"nowrap\",\n        justifyContent: \"center\",\n        alignItems: \"flex-end\",\n        flexShrink: 1,\n        transform: `translateX(-6px) translateY(-1px)`,\n    });\n\n    const heading = style(\"heading\", {\n        display: \"flex\",\n        alignItems: \"center\",\n        flexGrow: 1,\n        margin: 0,\n        textOverflow: \"ellipsis\",\n        width: calc(`100% - ${styleUnit(formElVars.sizing.height)}`),\n        flexBasis: calc(`100% - ${styleUnit(formElVars.sizing.height)}`),\n        fontWeight: globalVars.fonts.weights.semiBold,\n        fontSize: styleUnit(globalVars.fonts.size.large),\n    });\n\n    const headingMinimal = style(\"headingMinimal\", {\n        ...flexHelper().middle(),\n        ...Mixins.padding({ horizontal: 24 }),\n        ...{\n            \"& *\": {\n                textTransform: \"uppercase\",\n                fontSize: styleUnit(globalVars.fonts.size.small),\n            },\n        },\n    });\n\n    const left = style(\"left\", {\n        fontSize: styleUnit(vars.header.fontSize),\n    });\n\n    const centred = style(\"centred\", {\n        textAlign: \"center\",\n        textTransform: \"uppercase\",\n        fontSize: styleUnit(globalVars.fonts.size.small),\n        color: ColorsUtils.colorOut(globalVars.mixBgAndFg(0.6)),\n        fontWeight: globalVars.fonts.weights.semiBold,\n    });\n\n    const spacerWidth = globalVars.icon.sizes.large - (globalVars.gutter.half + globalVars.gutter.quarter);\n\n    const leftSpacer = style(\"leftSpacer\", {\n        display: \"block\",\n        height: styleUnit(spacerWidth),\n        flexBasis: styleUnit(spacerWidth),\n        width: styleUnit(spacerWidth),\n    });\n\n    const action = style(\"action\", {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        position: \"relative\",\n        flexShrink: 1,\n        height: styleUnit(formElVars.sizing.height),\n        width: styleUnit(formElVars.sizing.height),\n        flexBasis: styleUnit(formElVars.sizing.height),\n        color: ColorsUtils.colorOut(vars.colors.fg),\n        transform: `translateX(10px)`,\n        marginLeft: \"auto\",\n        ...{\n            \"&:not(.focus-visible)\": {\n                outline: 0,\n            },\n            \"&:hover, &:focus, &.focus-visible\": {\n                color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n            },\n        },\n    });\n\n    const backButtonIcon = style(\"backButtonIcon\", {\n        display: \"block\",\n    });\n\n    const close = style(\"close\", {\n        ...appearance(),\n        cursor: \"pointer\",\n        height: styleUnit(formElVars.sizing.height),\n        width: styleUnit(formElVars.sizing.height),\n        flexBasis: styleUnit(formElVars.sizing.height),\n        padding: 0,\n        border: 0,\n    });\n\n    const closeMinimal = style(\"closeMinimal\", {\n        color: ColorsUtils.colorOut(globalVars.mixBgAndFg(0.6)),\n        position: \"absolute\",\n        top: 0,\n        bottom: 0,\n        ...Mixins.margin({ vertical: \"auto\" }),\n        right: styleUnit(6),\n    });\n\n    const categoryIcon = style(\"categoryIcon\", {\n        flexBasis: styleUnit(18),\n        marginRight: 0,\n        opacity: 0.8,\n    });\n\n    return {\n        closeMinimal,\n        root,\n        rootMinimal,\n        rootBorderLess,\n        backButton,\n        heading,\n        left,\n        centred,\n        leftSpacer,\n        action,\n        backButtonIcon,\n        close,\n        categoryIcon,\n        headingMinimal,\n    };\n});\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useMeasure } from \"@vanilla/react-utils\";\nimport React, { useEffect, useRef } from \"react\";\nimport shave from \"shave\";\n\ninterface IProps {\n    tag?: string;\n    className?: string;\n    children: React.ReactNode;\n    useMaxHeight?: boolean;\n    lines?: number;\n    expand?: boolean;\n    maxCharCount?: number;\n}\n\nconst TruncatedText = React.memo(function TruncatedText(_props: IProps) {\n    const ref = useRef<HTMLDivElement | null>(null);\n    const props = {\n        lines: 3,\n        expand: false,\n        ..._props,\n    };\n\n    const measure = useMeasure(ref);\n\n    useEffect(() => {\n        truncate();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [measure]);\n\n    function truncate() {\n        if (props.useMaxHeight) {\n            truncateTextBasedOnMaxHeight();\n        } else {\n            truncateBasedOnLines();\n        }\n    }\n\n    /**\n     * Truncate element text based on a certain number of lines.\n     *\n     * @param excerpt - The excerpt to truncate.\n     */\n    function truncateBasedOnLines() {\n        const lineHeight = calculateLineHeight();\n        if (lineHeight !== null && !Number.isNaN(lineHeight)) {\n            const maxHeight = props.lines! * lineHeight;\n            shave(ref.current!, maxHeight);\n        }\n    }\n\n    /**\n     * Truncate element text based on max-height\n     *\n     * @param excerpt - The excerpt to truncate.\n     */\n    function truncateTextBasedOnMaxHeight() {\n        const element = ref.current!;\n        const maxHeight = parseInt(getComputedStyle(element)[\"max-height\"], 10);\n        if (maxHeight && maxHeight > 0) {\n            shave(element, maxHeight);\n        }\n    }\n\n    function calculateLineHeight(): number | null {\n        if (ref.current) {\n            return parseInt(getComputedStyle(ref.current)[\"line-height\"], 10);\n        } else {\n            return null;\n        }\n    }\n\n    const Tag = (props.tag || \"span\") as \"span\";\n\n    let { children } = props;\n    if (props.maxCharCount && typeof children === \"string\") {\n        let newChildren = children.slice(0, props.maxCharCount);\n\n        if (newChildren.length < children.length) {\n            newChildren += \"…\";\n        }\n\n        children = newChildren;\n    }\n\n    return (\n        <Tag className={props.className} ref={ref}>\n            {children}\n        </Tag>\n    );\n});\n\nexport default TruncatedText;\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useReducer, useEffect, useContext, useDebugValue, useState, useCallback, useRef } from \"react\";\nimport { useHistory } from \"react-router\";\nimport * as H from \"history\";\nimport { siteUrl } from \"@library/utility/appUtils\";\nimport { useLinkContext, makeLocationDescriptorObject } from \"@library/routing/links/LinkContextProvider\";\n\nconst DEFAULT_FALLBACK = siteUrl(\"/\");\n\nconst context = React.createContext<{\n    historyDepth: number;\n    canGoBack: boolean;\n    backFallbackUrl: string;\n    setBackFallbackUrl: (newUrl: string) => void;\n    navigateBack: (customFallback?: string) => void;\n}>({\n    historyDepth: 1,\n    canGoBack: false,\n    backFallbackUrl: DEFAULT_FALLBACK,\n    setBackFallbackUrl: () => {},\n    navigateBack: () => (window.location.href = DEFAULT_FALLBACK),\n});\n\n/**\n * Provider for measuring how deep in our dynamic routing history we are.\n */\nexport function BackRoutingProvider(props: { children: React.ReactNode }) {\n    const [backFallbackUrl, setBackFallbackUrl] = useState(DEFAULT_FALLBACK);\n    const ignoreRef = useRef<boolean>(false);\n\n    const [{ historyDepth }, dispatch] = useReducer(\n        (\n            nextState: { historyDepth: number },\n            action: {\n                type: H.Action;\n                location: H.Location;\n            },\n        ) => {\n            if (ignoreRef.current === true) {\n                ignoreRef.current = false;\n                // Ignored so our \"fake\" back routing doesn't create an entry.\n                return nextState;\n            }\n\n            if (action.type === \"PUSH\") {\n                return { historyDepth: nextState.historyDepth + 1 };\n            } else if (action.type === \"POP\") {\n                return { historyDepth: nextState.historyDepth - 1 };\n            }\n            return nextState;\n        },\n        { historyDepth: 1 },\n    );\n\n    const history = useHistory();\n    const { pushSmartLocation } = useLinkContext();\n    const canGoBack = historyDepth > 1;\n    const canBrowserGoBack = !!document.referrer && !!window.history?.back;\n\n    const navigateBack = useCallback(\n        (url?: string) => {\n            if (canGoBack) {\n                history.goBack();\n            } else if (canBrowserGoBack) {\n                window.history.back();\n                setTimeout(() => {\n                    // In case the browser back didn't actually work.\n                    window.location.href = document.referrer;\n                }, 300);\n            } else {\n                ignoreRef.current = true;\n                pushSmartLocation(url ?? backFallbackUrl);\n            }\n        },\n        [canGoBack, history, pushSmartLocation, backFallbackUrl, canBrowserGoBack],\n    );\n\n    useEffect(() => {\n        const unregister = history.listen((location: H.Location, action: H.Action) => {\n            dispatch({ type: action, location });\n        });\n\n        return unregister;\n    }, [dispatch, history]);\n\n    const value = {\n        canGoBack,\n        historyDepth,\n        backFallbackUrl,\n        setBackFallbackUrl,\n        navigateBack,\n    };\n\n    return <context.Provider value={value}>{props.children}</context.Provider>;\n}\n\n/**\n * Hook for knowing how deep in our routing history that we are.\n */\nexport function useBackRouting() {\n    const value = useContext(context);\n    useDebugValue(value);\n    return value;\n}\n\n/**\n * Component version of `useFallbackBackUrl`.\n */\nexport function FallbackBackUrlSetter(props: { url: string }) {\n    useFallbackBackUrl(props.url);\n    return <React.Fragment />;\n}\n\n/**\n * Hook to set some url as the fallback backlink as long as it's active.\n */\nexport function useFallbackBackUrl(url?: string) {\n    const { setBackFallbackUrl } = useBackRouting();\n\n    useEffect(() => {\n        // Sync this value into the context as long as it's being rendered.\n        if (url) {\n            setBackFallbackUrl(url);\n        }\n\n        return () => {\n            // Cleanup to the default when we unmount.\n            setBackFallbackUrl(DEFAULT_FALLBACK);\n        };\n    }, [setBackFallbackUrl, url]);\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport React from \"react\";\nimport { t } from \"@library/utility/appUtils\";\nimport { LoadStatus } from \"@library/@types/api/core\";\nimport UserSuggestionActions from \"@library/features/users/suggestion/UserSuggestionActions\";\nimport { IComboBoxOption } from \"@library/features/search/SearchBar\";\nimport UserSuggestionModel, {\n    IInjectableSuggestionsProps,\n} from \"@library/features/users/suggestion/UserSuggestionModel\";\nimport apiv2 from \"@library/apiv2\";\nimport Tokens from \"@library/forms/select/Tokens\";\nimport { connect } from \"react-redux\";\n\ninterface IProps extends IInjectableSuggestionsProps {\n    suggestionActions: UserSuggestionActions;\n    onChange: (users: IComboBoxOption[]) => void;\n    value: IComboBoxOption[];\n    className?: string;\n    label?: string;\n}\n\n/**\n * Form component for searching/selecting users.\n */\nexport class MultiUserInput extends React.Component<IProps> {\n    public render() {\n        const { suggestions, label } = this.props;\n        let options: IComboBoxOption[] | undefined;\n        if (suggestions.status === LoadStatus.SUCCESS && suggestions.data) {\n            options = suggestions.data.map((suggestion) => {\n                return {\n                    value: suggestion.userID,\n                    label: suggestion.name,\n                };\n            });\n        }\n\n        return (\n            <Tokens\n                label={label ? t(label) : t(\"Author\")}\n                options={options}\n                isLoading={suggestions.status === LoadStatus.LOADING || suggestions.status === LoadStatus.PENDING}\n                onChange={this.props.onChange}\n                value={this.props.value}\n                onInputChange={this.onInputChange}\n                className={this.props.className}\n            />\n        );\n    }\n\n    /**\n     * React to changes in the token input.\n     */\n    private onInputChange = (value: string) => {\n        value = value.trim();\n        if (!value) return;\n        this.props.suggestionActions.loadUsers(value);\n    };\n}\n\nconst withRedux = connect(UserSuggestionModel.mapStateToProps, (dispatch) => ({\n    suggestionActions: new UserSuggestionActions(dispatch, apiv2),\n}));\n\nexport default withRedux(MultiUserInput);\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useRef } from \"react\";\nimport { tokensClasses } from \"@library/forms/select/tokensStyles\";\nimport { t } from \"@library/utility/appUtils\";\nimport { getRequiredID, IOptionalComponentID } from \"@library/utility/idUtils\";\nimport Select from \"react-select\";\nimport { IComboBoxOption } from \"@library/features/search/SearchBar\";\nimport Paragraph from \"@library/layout/Paragraph\";\nimport classNames from \"classnames\";\nimport * as selectOverrides from \"@library/forms/select/overwrites\";\nimport { inputBlockClasses } from \"@library/forms/InputBlockStyles\";\nimport MutationObserver from \"react-mutation-observer\";\n\nexport interface ITokenProps extends IOptionalComponentID {\n    label: string | null;\n    labelNote?: string;\n    disabled?: boolean;\n    className?: string;\n    placeholder?: string;\n    options: IComboBoxOption[] | undefined;\n    isLoading?: boolean;\n    value: IComboBoxOption[];\n    onFocus?: () => void;\n    onChange: (tokens: IComboBoxOption[]) => void;\n    onInputChange?: (value: string) => void;\n    menuPlacement?: string;\n    showIndicator?: boolean;\n}\n\ninterface IState {\n    inputValue: string;\n    focus: boolean;\n}\n\n/**\n * Implements the search bar component\n */\nexport default class Tokens extends React.Component<ITokenProps, IState> {\n    private prefix = \"tokens\";\n    private id: string = getRequiredID(this.props, this.prefix);\n    private inputID: string = this.id + \"-tokenInput\";\n\n    public state: IState = {\n        inputValue: \"\",\n        focus: false,\n    };\n\n    public render() {\n        const { className, disabled, options, isLoading } = this.props;\n        const classes = tokensClasses();\n        const classesInputBlock = inputBlockClasses();\n\n        return (\n            <>\n                <div\n                    className={classNames(\"tokens\", classesInputBlock.root, this.props.className, classes.root, {\n                        [classes.withIndicator]: this.props.showIndicator,\n                    })}\n                >\n                    {this.props.label !== null && (\n                        <label htmlFor={this.inputID} className={classesInputBlock.labelAndDescription}>\n                            <span className={classesInputBlock.labelText}>{this.props.label}</span>\n                            <Paragraph className={classesInputBlock.labelNote}>{this.props.labelNote}</Paragraph>\n                        </label>\n                    )}\n\n                    <div\n                        className={classNames(classesInputBlock.inputWrap, classes.inputWrap, {\n                            hasFocus: this.state.focus,\n                        })}\n                    >\n                        <Select\n                            id={this.id}\n                            inputId={this.inputID}\n                            components={this.componentOverwrites}\n                            onChange={this.props.onChange}\n                            inputValue={this.state.inputValue}\n                            value={this.props.value}\n                            onInputChange={this.handleInputChange}\n                            isClearable={true}\n                            isDisabled={disabled}\n                            options={options}\n                            isLoading={this.showLoader}\n                            classNamePrefix={this.prefix}\n                            className={classNames(this.prefix, className)}\n                            placeholder={this.props.placeholder}\n                            aria-label={t(\"Search\")}\n                            escapeClearsValue={true}\n                            pageSize={20}\n                            theme={this.getTheme}\n                            styles={this.getStyles()}\n                            backspaceRemovesValue={true}\n                            isMulti={true}\n                            onFocus={this.onFocus}\n                            onBlur={this.onBlur}\n                        />\n                    </div>\n\n                    <MutationObserver\n                        onAttributeChange={(e) => {\n                            if (e.to && e.to !== e.from) {\n                                this.props.onChange(JSON.parse(e.to));\n                            }\n                        }}\n                    >\n                        <input\n                            className={\"js-\" + this.prefix + \"-tokenInput\"}\n                            aria-hidden={true}\n                            value={JSON.stringify(this.props.value)}\n                            type=\"hidden\"\n                            tabIndex={-1}\n                        />\n                    </MutationObserver>\n                </div>\n            </>\n        );\n    }\n\n    private get showLoader(): boolean {\n        return !!this.props.isLoading && this.state.inputValue.length > 0;\n    }\n\n    private handleInputChange = (val) => {\n        this.setState({ inputValue: val });\n        this.props.onInputChange?.(val);\n    };\n\n    /*\n     * Overwrite components in Select component\n     */\n    private get componentOverwrites() {\n        const overwrites = {\n            ClearIndicator: selectOverrides.NullComponent,\n            LoadingMessage: selectOverrides.OptionLoader,\n            Menu:\n                !this.props.options || this.props.options?.length > 0\n                    ? selectOverrides.Menu\n                    : selectOverrides.NullComponent,\n            MenuList: selectOverrides.MenuList,\n            Option: selectOverrides.SelectOption,\n            ValueContainer: selectOverrides.ValueContainer,\n            Control: selectOverrides.Control,\n            MultiValueRemove: selectOverrides.MultiValueRemove,\n            NoOptionsMessage: this.showLoader\n                ? selectOverrides.OptionLoader\n                : this.state.inputValue.length > 0\n                ? selectOverrides.NoOptionsMessage\n                : selectOverrides.NullComponent,\n            LoadingIndicator: selectOverrides.NullComponent,\n            DropdownIndicator: selectOverrides.DropdownIndicator,\n        };\n\n        if (!this.props.showIndicator) {\n            overwrites[\"DropdownIndicator\"] = selectOverrides.NullComponent;\n        }\n\n        return overwrites;\n    }\n\n    /**\n     * Overwrite theme in Select component\n     */\n    private getTheme = (theme) => {\n        return {\n            ...theme,\n            border: {},\n            colors: {},\n            spacing: {},\n        };\n    };\n\n    /**\n     * Set class for focus\n     */\n    private onFocus = () => {\n        if (this.props.onFocus) {\n            this.props.onFocus();\n        }\n        this.setState({\n            focus: true,\n        });\n    };\n\n    /**\n     * Set class for blur\n     */\n    private onBlur = () => {\n        this.setState({\n            focus: false,\n        });\n    };\n\n    /**\n     * Overwrite styles in Select component\n     */\n    private getStyles = () => {\n        return {\n            option: (provided: React.CSSProperties) => ({\n                ...provided,\n            }),\n            menu: (provided: React.CSSProperties, state) => {\n                return { ...provided, backgroundColor: undefined, boxShadow: undefined };\n            },\n            control: (provided: React.CSSProperties) => ({\n                ...provided,\n                borderWidth: 0,\n            }),\n            multiValue: (provided: React.CSSProperties, state) => {\n                return {\n                    ...provided,\n                    borderRadius: undefined,\n                    opacity: state.isFocused ? 1 : 0.85,\n                };\n            },\n            multiValueLabel: (provided: React.CSSProperties) => {\n                return { ...provided, borderRadius: undefined, padding: 0 };\n            },\n        };\n    };\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { percent } from \"csx\";\nimport { buttonResetMixin } from \"@library/forms/buttonMixins\";\nimport { CSSObject } from \"@emotion/css\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const suggestedTextStyleHelper = useThemeCache((overwrite?: { forDashboard?: boolean }) => {\n    const globalVars = globalVariables();\n    const { forDashboard = false } = overwrite || {};\n    const mediaQueries = layoutVariables().mediaQueries();\n\n    // The styles have been split here so they can be exported to the compatibility styles.\n    const option: CSSObject = {\n        ...buttonResetMixin(),\n        width: percent(100),\n        ...Mixins.padding({\n            vertical: 6,\n            horizontal: 12,\n        }),\n        ...Mixins.font({\n            color: globalVars.mainColors.fg,\n            size: forDashboard ? globalVars.fonts.size.medium : globalVars.fonts.size.large,\n        }),\n        textAlign: \"left\",\n        display: \"block\",\n        color: \"inherit\",\n        ...{\n            \".suggestedTextInput-parentTag\": {\n                ...Mixins.font({\n                    ...globalVars.meta.text,\n                    lineHeight: \"inherit\",\n                }),\n            },\n            \"&:hover, &:focus, &.isFocused\": {\n                color: \"inherit\",\n                backgroundColor: globalVars.states.hover.highlight.toString(),\n            },\n            \"&\": {\n                ...mediaQueries.xs({\n                    ...Mixins.padding({\n                        vertical: 10,\n                    }),\n                }),\n            },\n        },\n    };\n\n    return {\n        option,\n    };\n});\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { IStateColors } from \"@library/styles/styleHelpers\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\nimport { SearchBarPresets } from \"@library/banner/SearchBarPresets\";\n\nexport const searchBarVariables = useThemeCache((forcedVars?: IThemeVariables) => {\n    const globalVars = globalVariables(forcedVars);\n    const formElementVars = formElementsVariables(forcedVars);\n    const makeThemeVars = variableFactory(\"searchBar\", forcedVars);\n\n    const search = makeThemeVars(\"search\", {\n        minWidth: 109,\n        fullBorderRadius: {\n            extraHorizontalPadding: 10,\n        },\n        compact: {\n            minWidth: formElementVars.sizing.height,\n        },\n    });\n\n    const placeholder = makeThemeVars(\"placeholder\", {\n        color: formElementVars.placeholder.color,\n    });\n\n    const heading = makeThemeVars(\"heading\", {\n        margin: 12,\n    });\n\n    const border = makeThemeVars(\"border\", {\n        color: globalVars.border.color,\n        width: globalVars.borderType.formElements.default.width,\n        radius: globalVars.borderType.formElements.default.radius,\n        inset: false,\n    });\n\n    const sizingInit = makeThemeVars(\"sizing\", {\n        height: formElementVars.sizing.height,\n    });\n\n    const sizing = makeThemeVars(\"sizing\", {\n        height: sizingInit.height,\n        heightMinusBorder: sizingInit.height - border.width * 2,\n    });\n\n    const input = makeThemeVars(\"input\", {\n        fg: globalVars.mainColors.fg,\n        bg: globalVars.mainColors.bg,\n    });\n\n    const searchIcon = makeThemeVars(\"searchIcon\", {\n        gap: 40,\n        height: 13,\n        width: 14,\n        fg: input.fg.fade(0.7),\n        padding: {\n            right: 5,\n        },\n    });\n\n    const results = makeThemeVars(\"results\", {\n        fg: globalVars.mainColors.fg,\n        bg: globalVars.mainColors.bg,\n        borderRadius: globalVars.border.radius,\n    });\n\n    const scope = makeThemeVars(\"scope\", {\n        width: 142,\n        padding: 18,\n        compact: {\n            padding: 12,\n            width: 58,\n        },\n    });\n\n    const scopeIcon = makeThemeVars(\"scopeIcon\", {\n        width: 10,\n        ratio: 6 / 10,\n    });\n\n    const stateColorsInit = makeThemeVars(\"stateColors\", {\n        allStates: globalVars.mainColors.primary,\n        hoverOpacity: globalVars.constants.states.hover.borderEmphasis,\n    });\n\n    const stateColors: IStateColors = makeThemeVars(\"stateColors\", {\n        ...stateColorsInit,\n        hover: stateColorsInit.allStates.fade(stateColorsInit.hoverOpacity),\n        focus: stateColorsInit.allStates,\n        active: stateColorsInit.allStates,\n    });\n\n    // Used when `SearchBarPresets.NO_BORDER` is active\n    const noBorder = makeThemeVars(\"noBorder\", {\n        offset: 1,\n    });\n\n    // Used when `SearchBarPresets.BORDER` is active\n    const withBorder = makeThemeVars(\"withBorder\", {\n        borderColor: globalVars.border.color,\n    });\n\n    const options = makeThemeVars(\"options\", {\n        compact: false,\n        preset: SearchBarPresets.NO_BORDER,\n    });\n\n    return {\n        search,\n        noBorder,\n        withBorder,\n        searchIcon,\n        sizing,\n        placeholder,\n        input,\n        heading,\n        results,\n        border,\n        scope,\n        scopeIcon,\n        stateColors,\n        options,\n    };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\n\nexport const dayPickerVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const formElementVars = formElementsVariables();\n    const makeThemeVars = variableFactory(\"datePicker\");\n\n    const spacing = makeThemeVars(\"spacing\", {\n        padding: 9,\n    });\n\n    const sizing = makeThemeVars(\"sizing\", {\n        height: formElementVars.sizing.height,\n    });\n\n    const colors = makeThemeVars(\"colors\", {\n        today: globalVars.mainColors.primary,\n        selected: {\n            color: globalVars.states.selected.highlight,\n        },\n        hover: {\n            bg: globalVars.states.hover.highlight,\n        },\n    });\n\n    const border = makeThemeVars(\"border\", {\n        radius: globalVars.border.radius,\n    });\n\n    return {\n        spacing,\n        sizing,\n        colors,\n        border,\n    };\n});\n\nexport const dayPickerClasses = useThemeCache(() => {\n    const style = styleFactory(\"dayPicker\");\n    const vars = dayPickerVariables();\n\n    // From third party, so we're targetting them this way\n    const root = style({\n        ...{\n            \".DayPicker-wrapper\": {\n                padding: 0,\n            },\n            \".DayPicker-Month\": {\n                margin: styleUnit(vars.spacing.padding),\n            },\n            \".DayPicker-Day\": {\n                borderRadius: styleUnit(vars.border.radius),\n                padding: styleUnit(vars.spacing.padding),\n                whiteSpace: \"nowrap\",\n                ...{\n                    \"&:hover\": {\n                        backgroundColor: vars.colors.hover.bg.toString(),\n                    },\n                },\n            },\n            \".DayPicker-Day--selected:not(.DayPicker-Day--disabled):not(.DayPicker-Day--outside)\": {\n                backgroundColor: vars.colors.selected.color.toString(),\n                ...{\n                    \"&:hover\": {\n                        backgroundColor: vars.colors.selected.color.toString(),\n                    },\n                },\n            },\n            \".DayPicker-Day.DayPicker-Day--today\": {\n                color: ColorsUtils.colorOut(vars.colors.today),\n            },\n        },\n    });\n\n    const header = style(\"header\", {\n        display: \"flex\",\n        alignItems: \"center\",\n        height: styleUnit(vars.sizing.height),\n        paddingLeft: styleUnit(vars.spacing.padding),\n        marginTop: styleUnit(vars.spacing.padding),\n    });\n\n    const title = style(\"title\", {\n        flex: 1,\n        padding: styleUnit(vars.spacing.padding),\n    });\n\n    const navigation = style(\"navigation\", {\n        display: \"flex\",\n        alignItems: \"center\",\n    });\n\n    return {\n        root,\n        header,\n        title,\n        navigation,\n    };\n});\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { NullComponent } from \"@library/forms/select/overwrites\";\nimport DayPickerInput from \"react-day-picker/DayPickerInput\";\nimport { t } from \"@library/utility/appUtils\";\nimport moment, { Moment } from \"moment\";\nimport Button from \"@library/forms/Button\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { guessOperatingSystem, OS } from \"@vanilla/utils\";\nimport { dropDownClasses } from \"@library/flyouts/dropDownStyles\";\nimport { dayPickerClasses } from \"@library/forms/datePickerStyles\";\nimport classNames from \"classnames\";\nimport { formatDate, parseDate } from \"react-day-picker/moment\";\nimport { LeftChevronIcon, RightChevronIcon } from \"@library/icons/common\";\nimport RelativePortal from \"react-relative-portal\";\nimport \"@library/forms/DatePicker.libStyles.scss\";\n\ninterface IProps {\n    value: string; // ISO formatted date\n    onChange: (value: string) => void;\n    contentClassName?: string;\n    inputClassName?: string;\n    alignment: \"left\" | \"right\";\n    disabledDays?: any; // See http://react-day-picker.js.org/examples/disabled\n}\n\ninterface IState {\n    hasBadValue: boolean;\n    wasBlurred: boolean;\n}\n\n/**\n * Implements the DateRange component\n */\nexport default class DatePicker extends React.PureComponent<IProps, IState> {\n    public static defaultProps: Partial<IProps> = {\n        alignment: \"left\",\n    };\n\n    public state: IState = {\n        hasBadValue: false,\n        wasBlurred: false,\n    };\n\n    public render() {\n        // Attempt to use a native input on operating systems that have nice, accessible built in date pickers.\n        // EG. mobile\n        const os = guessOperatingSystem();\n        const useNativeInput = os === OS.ANDROID || os === OS.IOS;\n\n        return useNativeInput ? this.renderNativeInput() : this.renderReactInput();\n    }\n\n    /**\n     * Render a react day picker component.\n     */\n    private renderReactInput() {\n        const value = this.props.value ? moment(this.props.value).toDate() : undefined;\n        const classes = dayPickerClasses();\n        return (\n            <div className={classNames(classes.root)}>\n                <DayPickerInput\n                    format=\"YYYY-MM-DD\"\n                    placeholder={t(`yyyy-mm-dd`)}\n                    formatDate={formatDate}\n                    parseDate={parseDate}\n                    value={value}\n                    overlayComponent={this.CustomOverlay}\n                    onDayChange={this.handleDayPickerChange}\n                    classNames={\n                        {\n                            container: classNames(\"dayPickerInput-container\", this.props.contentClassName),\n                            overlay: \"dayPickerInput-overlay\",\n                        } as any\n                    }\n                    dayPickerProps={{\n                        captionElement: NullComponent,\n                        navbarElement: this.CustomNavBar,\n                        disabledDays: this.props.disabledDays,\n                        showOutsideDays: true,\n                    }}\n                    inputProps={{\n                        className: classNames(\"inputText\", this.props.inputClassName, {\n                            isInvalid: this.state.hasBadValue && this.state.wasBlurred,\n                        }),\n                        \"aria-label\": t(\"Date Input \") + \"(yyyy-mm-dd)\",\n                        onBlur: this.handleBlur,\n                        onFocus: this.handleFocus,\n                        onChange: this.handleNativeInputChange,\n                    }}\n                />\n            </div>\n        );\n    }\n\n    /**\n     * Render a native date picker component. These can be much nicer on mobile devices.\n     */\n    private renderNativeInput() {\n        // The native date input MUST have it's value in short ISO format, even it doesn't display that way.\n        const value = this.props.value ? this.normalizeIsoString(this.props.value) : \"\";\n        return (\n            <input\n                className=\"inputText\"\n                type=\"date\"\n                placeholder={t(`yyyy-mm-dd`)}\n                onChange={this.handleNativeInputChange}\n                value={value}\n            />\n        );\n    }\n\n    /**\n     * Handle a new date.\n     */\n    private updateDate = (date?: Moment | null, isEmpty: boolean = false) => {\n        if (date) {\n            this.setState({ hasBadValue: false });\n            this.props.onChange(this.normalizeIsoString(date.toISOString()));\n        } else if (!isEmpty) {\n            // invalid date\n            this.setState({ hasBadValue: true });\n            this.props.onChange(\"\");\n        } else {\n            this.setState({ hasBadValue: false });\n            this.props.onChange(\"\");\n        }\n    };\n\n    /**\n     * Ensure that our date string is always the day only form of an ISO date. EG. No time.\n     */\n    private normalizeIsoString(isoDate: string): string {\n        return isoDate.substr(0, 10);\n    }\n\n    /**\n     * Track blurred state.\n     */\n    private handleBlur = (event: React.FocusEvent) => {\n        this.setState({ wasBlurred: true });\n    };\n\n    /**\n     * Track blurred state.\n     */\n    private handleFocus = (event: React.FocusEvent) => {\n        this.setState({ wasBlurred: false });\n    };\n\n    /**\n     * Handle changes in the day picker input. Eg. A day selection in the modal.\n     *\n     * Other changes will call the handleTextChange event.\n     */\n    private handleDayPickerChange = (date?: Date | null) => {\n        if (date) {\n            this.updateDate(moment(date));\n        }\n    };\n\n    /**\n     * Handle changes in the native input.\n     */\n    private handleNativeInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.updateDate(event.target.valueAsDate ? moment(event.target.valueAsDate) : null, event.target.value === \"\");\n    };\n\n    /**\n     * Override for the date pickers flyouts.\n     */\n    private CustomOverlay = ({ classNames: c, selectedDay, children, ...props }) => {\n        const classes = dropDownClasses();\n        const contentsClasses = classNames(\"dropDown-contents\", classes.contents, \"isOwnWidth\", {\n            isRightAligned: this.props.alignment === \"right\",\n        });\n        return (\n            // dayPickerClasses needs to be reapplied here, because it's rendered outside the root\n            <RelativePortal component=\"div\" top={0} right={0} className={dayPickerClasses().root}>\n                <div className={classNames(\"dropDown\", classes.root)} {...props}>\n                    <div className={contentsClasses}>{children}</div>\n                </div>\n            </RelativePortal>\n        );\n    };\n\n    /**\n     * Override date pickers navigation component to use our icons.\n     */\n    private CustomNavBar = ({ month, onPreviousClick, onNextClick, className }) => {\n        // The example override shows these methods being rebound in this way.\n        // If you attempt to pass these callbacks directly to the overriden component,\n        // They crash it when clicked.\n        const prev = () => onPreviousClick();\n        const next = () => onNextClick();\n        const title = (month as Date).toLocaleDateString(undefined, { year: \"numeric\", month: \"long\" });\n        const classes = dayPickerClasses();\n        return (\n            <div className={classNames(\"datePicker-header\", classes.header)}>\n                <h3 className={classNames(\"datePicker-title\", classes.title)}>{title}</h3>\n                <span className={classNames(\"datePicker-navigation\", className, classes.navigation)}>\n                    <Button baseClass={ButtonTypes.ICON} onClick={prev}>\n                        <LeftChevronIcon centred={true} />\n                    </Button>\n                    <Button baseClass={ButtonTypes.ICON} onClick={next}>\n                        <RightChevronIcon centred={true} />\n                    </Button>\n                </span>\n            </div>\n        );\n    };\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license Proprietary\n */\nimport React from \"react\";\nimport { dateRangeClasses } from \"@library/forms/dateRangeStyles\";\nimport { t } from \"@library/utility/appUtils\";\nimport DatePicker from \"@library/forms/DatePicker\";\nimport moment from \"moment\";\nimport classNames from \"classnames\";\nimport { inputBlockClasses } from \"@library/forms/InputBlockStyles\";\n\ninterface IProps {\n    start: string | undefined;\n    end: string | undefined;\n    onStartChange: (value: string) => void;\n    onEndChange: (value: string) => void;\n    className?: string;\n    label?: string;\n}\n\ninterface IState {}\n\n/**\n * Implements the DateRange component\n */\nexport default class DateRange extends React.PureComponent<IProps> {\n    public render() {\n        const endDate = this.props.end ? moment(this.props.end).toDate() : null;\n        const startDate = this.props.start ? moment(this.props.start).toDate() : null;\n        const fromLabel = t(\"From\");\n        const toLabel = t(\"To\");\n        const rangeClasses = dateRangeClasses();\n        const classesInputBlock = inputBlockClasses();\n\n        return (\n            <fieldset\n                className={classNames(\"dateRange\", classesInputBlock.root, this.props.className, rangeClasses.root)}\n            >\n                <legend className={classNames(classesInputBlock.sectionTitle)}>\n                    {this.props.label || t(\"Date Updated\")}\n                </legend>\n                <label className={classNames(\"dateRange-boundary\", rangeClasses.boundary)}>\n                    <span className={classNames(\"dateRange-label\", rangeClasses.label)}>{fromLabel}</span>\n                    <DatePicker\n                        alignment=\"right\"\n                        contentClassName={rangeClasses.input}\n                        onChange={this.props.onStartChange}\n                        value={this.props.start}\n                        disabledDays={[\n                            {\n                                after: endDate,\n                            },\n                        ]}\n                    />\n                </label>\n                <label className={classNames(\"dateRange-boundary\", rangeClasses.boundary)}>\n                    <span className={classNames(\"dateRange-label\", rangeClasses.label)}>{toLabel}</span>\n                    <DatePicker\n                        alignment=\"right\"\n                        contentClassName={rangeClasses.input}\n                        onChange={this.props.onEndChange}\n                        value={this.props.end}\n                        disabledDays={[\n                            {\n                                before: startDate,\n                            },\n                        ]}\n                    />\n                </label>\n            </fieldset>\n        );\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const pageErrorMessageClasses = () => {\n    const style = styleFactory(\"pageErrorMessage\");\n    const globalVars = globalVariables();\n\n    const root = style({\n        justifyContent: \"center\",\n    });\n\n    const title = style(\"title\", {\n        fontSize: styleUnit(globalVars.fonts.size.title),\n        lineHeight: globalVars.lineHeights.condensed,\n        fontWeight: globalVars.fonts.weights.semiBold,\n        textAlign: \"center\",\n    });\n\n    const description = style(\"description\", {\n        textAlign: \"center\",\n        fontSize: styleUnit(globalVars.fonts.size.large),\n        marginTop: styleUnit(12),\n    });\n\n    const cta = style(\"cta\", {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        ...Mixins.margin({\n            top: styleUnit(21),\n            horizontal: \"auto\",\n        }),\n    });\n\n    const titleAsParagraph = style(\"titleAsParagraph\", {\n        fontSize: globalVars.fonts.size.large,\n    });\n\n    const errorIcon = style(\"icon\", {\n        ...{\n            \"&&\": {\n                display: \"block\",\n                color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n                height: styleUnit(85),\n                width: styleUnit(85),\n                ...Mixins.margin({\n                    bottom: 12,\n                    horizontal: \"auto\",\n                }),\n            },\n        },\n    });\n\n    return {\n        root,\n        title,\n        description,\n        cta,\n        titleAsParagraph,\n        errorIcon,\n    };\n};\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport React from \"react\";\nimport { debug } from \"@vanilla/utils\";\nimport ErrorMessages from \"@library/forms/ErrorMessages\";\nimport { userContentClasses } from \"@library/content/userContentStyles\";\n\ninterface IDetailedError {\n    code: string;\n    field: string;\n    index: number;\n    message: string;\n    status: number;\n}\n\ntype IDetailedErrors = Record<string, IDetailedError[]>;\n\nexport function DetailedErrors(props: { detailedErrors?: IDetailedErrors }) {\n    const { detailedErrors } = props;\n    if (!detailedErrors || Object.keys(props).length === 0) {\n        return <></>;\n    }\n    return (\n        <div className={userContentClasses().root}>\n            <h3>Debug Errors</h3>\n            {Object.entries(detailedErrors).map(([fieldName, errors], i) => {\n                return (\n                    <label key={i}>\n                        <strong>{fieldName}</strong>\n                        <ErrorMessages errors={errors} />\n                    </label>\n                );\n            })}\n        </div>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license Proprietary\n */\n\nimport { LoadStatus } from \"@library/@types/api/core\";\nimport { isUserGuest, useUsersState } from \"@library/features/users/userModel\";\nimport { buttonClasses } from \"@library/forms/buttonStyles\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { SearchErrorIcon } from \"@library/icons/common\";\nimport Heading from \"@library/layout/Heading\";\nimport Paragraph from \"@library/layout/Paragraph\";\nimport LinkAsButton from \"@library/routing/LinkAsButton\";\nimport { formatUrl, t } from \"@library/utility/appUtils\";\nimport classNames from \"classnames\";\nimport React, { ReactNode } from \"react\";\nimport { pageErrorMessageClasses } from \"@library/errorPages/pageErrorMessageStyles\";\nimport { DetailedErrors } from \"@library/errorPages/DetailedErrorMessages\";\nimport { debug } from \"@vanilla/utils\";\n\nexport function CoreErrorMessages(props: IProps) {\n    const classes = pageErrorMessageClasses();\n    const error = {\n        ...parseErrorCode(getErrorCode(props)),\n        ...(props.error || {}),\n    };\n    const { message, messageAsParagraph, description } = error;\n    return (\n        <main className={classNames(props.className, classes.root)}>\n            {error.icon}\n            {!messageAsParagraph && <Heading depth={1} className={classes.title} title={message} />}\n            {messageAsParagraph && <Paragraph className={classes.titleAsParagraph}>{message}</Paragraph>}\n            {error.description && <Paragraph className={classes.description}>{description}</Paragraph>}\n            {debug() && <DetailedErrors detailedErrors={error?.response?.data?.errors} />}\n            {error.actionItem && <div className={classes.cta}>{error.actionItem}</div>}\n        </main>\n    );\n}\n\nexport function parseErrorCode(errorCode?: string | number): IError {\n    const classes = pageErrorMessageClasses();\n    const buttons = buttonClasses();\n    const message = messageFromErrorCode(errorCode);\n\n    switch (errorCode) {\n        case 403:\n        case DefaultError.PERMISSION: {\n            return {\n                message,\n                description: t(\"You don't have permission to view this resource.\"),\n                actionItem: <ErrorSignIn />,\n                icon: <SearchErrorIcon message={message} className={classes.errorIcon} />,\n            };\n        }\n        case 404:\n        case DefaultError.NOT_FOUND: {\n            return {\n                message,\n                description: t(\"The page you were looking for could not be found.\"),\n                actionItem: (\n                    <LinkAsButton baseClass={ButtonTypes.PRIMARY} to={\"/\"}>\n                        {t(\"Back to home page\")}\n                    </LinkAsButton>\n                ),\n                icon: <SearchErrorIcon message={message} className={classes.errorIcon} />,\n            };\n        }\n        case DefaultError.GENERIC:\n        default: {\n            return {\n                message,\n                description: t(\"Please try again later.\"),\n                actionItem: (\n                    <LinkAsButton className={buttons.primary} to={\"/\"}>\n                        {t(\"Back to Home\")}\n                    </LinkAsButton>\n                ),\n                icon: <SearchErrorIcon message={message} className={classes.errorIcon} />,\n            };\n        }\n    }\n}\n\nfunction ErrorSignIn() {\n    const { currentUser } = useUsersState();\n    if (currentUser.status === LoadStatus.SUCCESS && currentUser.data && isUserGuest(currentUser.data)) {\n        return (\n            <LinkAsButton to={`/entry/signin?Target=${encodeURIComponent(window.location.href)}`}>\n                {t(\"Sign In\")}\n            </LinkAsButton>\n        );\n    } else {\n        return null;\n    }\n}\n\nexport function messageFromErrorCode(errorCode?: string | number) {\n    switch (errorCode) {\n        case 403:\n        case DefaultError.PERMISSION:\n            return t(\"Permission Problem\");\n        case 404:\n        case DefaultError.GENERIC:\n        default:\n            return t(\"There was an error\");\n    }\n}\n\nexport function getErrorCode(errorMessageProps: IErrorMessageProps) {\n    if (errorMessageProps.apiError) {\n        return errorMessageProps.apiError.response.status;\n    } else if (errorMessageProps.error && errorMessageProps.error.status) {\n        return errorMessageProps.error.status;\n    } else if (errorMessageProps.defaultError) {\n        return errorMessageProps.defaultError;\n    } else {\n        return errorMessageProps.defaultError;\n    }\n}\n\nexport interface IAPIErrorFragment {\n    response: {\n        status: number;\n    };\n}\n\nexport interface IErrorMessageProps {\n    defaultError?: string;\n    error?: Partial<IError>;\n    apiError?: IAPIErrorFragment;\n}\n\nexport interface IError {\n    status?: number;\n    message: string;\n    messageAsParagraph?: boolean;\n    description?: ReactNode;\n    actionItem?: ReactNode;\n    icon?: ReactNode;\n    response?: any;\n}\n\nexport enum DefaultError {\n    GENERIC = \"generic\",\n    PERMISSION = \"permission\",\n    NOT_FOUND = \"notfound\",\n}\n\ninterface IProps extends IErrorMessageProps {\n    className?: string;\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { LayoutTypes } from \"@library/layout/types/interface.layoutTypes\";\n\nexport const filterPanelClasses = useThemeCache((mediaQueries) => {\n    const globalVars = globalVariables();\n    const style = styleFactory(\"filterPanel\");\n\n    const header = style(\n        \"header\",\n        {\n            marginBottom: styleUnit(globalVars.gutter.size * 1.5),\n            ...{\n                \"&&\": {\n                    border: 0,\n                    ...Mixins.padding({\n                        horizontal: 0,\n                        bottom: 0,\n                    }),\n                },\n            },\n        },\n        mediaQueries({\n            [LayoutTypes.TWO_COLUMNS]: {\n                oneColumnDown: {\n                    ...Mixins.absolute.srOnly(),\n                },\n            },\n        }),\n    );\n\n    const body = style(\"body\", {\n        ...{\n            \"&&\": {\n                ...Mixins.padding({\n                    horizontal: 0,\n                }),\n            },\n        },\n    });\n\n    const footer = style(\"body\", {\n        ...{\n            \"&&\": {\n                border: 0,\n                marginTop: styleUnit(globalVars.gutter.size),\n                ...Mixins.padding({\n                    horizontal: 0,\n                }),\n            },\n        },\n    });\n\n    const title = style(\"title\", {\n        ...{\n            \"&&\": {\n                ...Mixins.font({\n                    size: globalVars.fonts.size.large,\n                    weight: globalVars.fonts.weights.bold,\n                }),\n            },\n        },\n    });\n\n    return {\n        header,\n        body,\n        footer,\n        title,\n    };\n});\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport Button from \"@library/forms/Button\";\nimport Frame from \"@library/layout/frame/Frame\";\nimport FrameBody from \"@library/layout/frame/FrameBody\";\nimport FrameFooter from \"@library/layout/frame/FrameFooter\";\nimport FrameHeader from \"@library/layout/frame/FrameHeader\";\nimport { t } from \"@library/utility/appUtils\";\nimport { useUniqueID } from \"@library/utility/idUtils\";\nimport React from \"react\";\nimport { filterPanelClasses } from \"@library/search/panels/filterPanel.styles\";\nimport { useLayout } from \"@library/layout/LayoutContext\";\n\nexport interface ISearchFilterPanel {\n    title?: string;\n    handleSubmit: (data) => void;\n    children: React.ReactNode;\n    valid?: boolean;\n}\n\n/**\n * Implement search filter panel main component\n */\nexport function FilterFrame(props: ISearchFilterPanel) {\n    const { title = t(\"Filter Results\"), handleSubmit, children, valid } = props;\n    const onSubmit = (e: React.FormEvent) => {\n        e.preventDefault();\n        e.stopPropagation();\n        handleSubmit({});\n    };\n\n    const titleID = useUniqueID(\"searchFilter\");\n    const classes = filterPanelClasses(useLayout().mediaQueries);\n\n    return (\n        <form onSubmit={onSubmit} aria-describedby={titleID}>\n            <Frame\n                scrollable={false}\n                header={\n                    <FrameHeader\n                        titleID={titleID}\n                        title={title}\n                        className={classes.header}\n                        titleClass={classes.title}\n                    />\n                }\n                body={\n                    <FrameBody scrollable={false} className={classes.body}>\n                        {children}\n                    </FrameBody>\n                }\n                footer={\n                    <FrameFooter justifyRight={true} className={classes.footer}>\n                        <Button disabled={valid} submit={true}>\n                            {t(\"Filter\")}\n                        </Button>\n                    </FrameFooter>\n                }\n            />\n        </form>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\n\nexport const embedButtonClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const style = styleFactory(\"embedButton\");\n\n    const button = style(\"button\", {\n        width: 36,\n        height: 36,\n        display: \"flex\",\n        alignItems: \"center\",\n        border: 0,\n        background: \"none\",\n        cursor: \"pointer\",\n        borderRadius: globalVars.border.radius,\n        ...{\n            \"&:hover, &:focus\": {\n                color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n            },\n            \"&.isActive\": {\n                color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n                background: ColorsUtils.colorOut(globalVars.mainColors.primary.fade(0.1)),\n            },\n        },\n    });\n\n    return { button };\n});\n","/**\n * @author Dominic Lacaille <dominic.lacaille@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport Button, { IButtonProps } from \"@library/forms/Button\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport classNames from \"classnames\";\nimport React, { PropsWithChildren, KeyboardEvent, useLayoutEffect, useState, useRef } from \"react\";\nimport { embedButtonClasses } from \"./embedButtonStyles\";\n\ninterface IProps extends IButtonProps {\n    isActive?: boolean;\n}\n\nexport function EmbedButton(props: PropsWithChildren<IProps>) {\n    const { isActive, children, buttonRef, onKeyDown, ...otherProps } = props;\n    const classes = embedButtonClasses();\n    const [isFirst, setIsFirst] = useState(false);\n\n    return (\n        <Button\n            buttonRef={(button) => {\n                if (typeof buttonRef === \"function\") buttonRef(button);\n                else if (buttonRef && typeof buttonRef === \"object\") (buttonRef as any).current = button;\n                if (!button) return;\n                setIsFirst(button.previousSibling === null);\n            }}\n            tabIndex={isFirst ? 0 : -1}\n            onKeyDown={(e: React.KeyboardEvent<HTMLElement>) => {\n                const key = e.key;\n                let target = e.target as HTMLElement & EventTarget;\n                const firstSibling = () => target.parentElement?.firstChild as HTMLElement | undefined;\n                const lastSibling = () => target.parentElement?.lastChild as HTMLElement | undefined;\n                switch (key) {\n                    case \"ArrowRight\": {\n                        e.preventDefault();\n                        let nextSibling = target.nextSibling as HTMLElement | undefined;\n                        if (!nextSibling && target.parentElement) {\n                            nextSibling = firstSibling();\n                        }\n                        (nextSibling as HTMLElement).focus();\n                        break;\n                    }\n                    case \"ArrowLeft\": {\n                        e.preventDefault();\n                        let previousSibling = target.previousSibling as HTMLElement | undefined;\n                        if (!previousSibling && target.parentElement) {\n                            previousSibling = lastSibling();\n                        }\n                        (previousSibling as HTMLElement).focus();\n                        break;\n                    }\n                    case \"Home\": {\n                        e.preventDefault();\n                        (firstSibling() as HTMLElement)?.focus();\n                        break;\n                    }\n                    case \"End\": {\n                        e.preventDefault();\n                        (lastSibling() as HTMLElement)?.focus();\n                        break;\n                    }\n                    default:\n                        break;\n                }\n                if (onKeyDown) onKeyDown(e);\n            }}\n            baseClass={ButtonTypes.CUSTOM}\n            className={classNames({ [classes.button]: true, isActive })}\n            {...otherProps}\n        >\n            {children}\n        </Button>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ILocale } from \"@vanilla/i18n\";\nimport { actionCreatorFactory } from \"typescript-fsa\";\nimport { IApiError } from \"@library/@types/api/core\";\n\nconst createAction = actionCreatorFactory(\"@@locales\");\nexport const getAllLocalesACs = createAction.async<{}, ILocale[], IApiError>(\"GET_ALL\");\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport ReduxActions, { ActionsUnion } from \"@library/redux/ReduxActions\";\nimport { IConversation, IGetConversationsRequest } from \"@library/@types/api/conversations\";\n\n/**\n * Redux actions for the current user's conversations.\n */\nexport default class ConversationsActions extends ReduxActions {\n    public static readonly GET_CONVERSATIONS_REQUEST = \"@@conversations/GET_CONVERSATIONS_REQUEST\";\n    public static readonly GET_CONVERSATIONS_RESPONSE = \"@@conversations/GET_CONVERSATIONS_RESPONSE\";\n    public static readonly GET_CONVERSATIONS_ERROR = \"@@conversations/GET_CONVERSATIONS_ERROR\";\n\n    /**\n     * Action creators for getting a paginated list of the current user's conversations.\n     */\n    public static getConversationsACs = ReduxActions.generateApiActionCreators(\n        ConversationsActions.GET_CONVERSATIONS_REQUEST,\n        ConversationsActions.GET_CONVERSATIONS_RESPONSE,\n        ConversationsActions.GET_CONVERSATIONS_ERROR,\n        {} as IConversation[],\n        {},\n    );\n\n    /**\n     * Union of all possible action types in this class.\n     */\n    public static readonly ACTION_TYPES: ActionsUnion<typeof ConversationsActions.getConversationsACs>;\n\n    /**\n     * Get a paginated list of conversations for the current user.\n     */\n    public getConversations = (params: IGetConversationsRequest = {}) => {\n        return this.dispatchApi(\"get\", \"/conversations\", ConversationsActions.getConversationsACs, params);\n    };\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport ReduxActions, { bindThunkAction, useReduxActions } from \"@vanilla/library/src/scripts/redux/ReduxActions\";\nimport actionCreatorFactory from \"typescript-fsa\";\nimport { IApiError } from \"@vanilla/library/src/scripts/@types/api/core\";\nimport { ITag } from \"@library/features/tags/TagsReducer\";\nimport debounce from \"lodash/debounce\";\n\nconst createAction = actionCreatorFactory(\"@@tags\");\n\nexport class TagsAction extends ReduxActions {\n    public static getTagsACs = createAction.async<{ name: string }, ITag[], IApiError>(\"GET\");\n    private getTagsInternal = (options: { name: string }) => {\n        const thunk = bindThunkAction(TagsAction.getTagsACs, async () => {\n            const response = await this.api.get(`/tags?query=${options.name}`);\n            return response.data;\n        })(options);\n\n        return this.dispatch(thunk);\n    };\n\n    public getTags = debounce(this.getTagsInternal, 100);\n}\n\nexport function useTagsActions() {\n    return useReduxActions(TagsAction);\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { IApiError } from \"@library/@types/api/core\";\nimport ReduxActions, { bindThunkAction, useReduxActions } from \"@library/redux/ReduxActions\";\nimport { actionCreatorFactory } from \"typescript-fsa\";\nimport { IDiscussion } from \"@dashboard/@types/api/discussion\";\n\nconst createAction = actionCreatorFactory(\"@@discussions\");\n\nexport interface IGetDiscussionByID {\n    discussionID: number;\n}\n\nexport default class DiscussionActions extends ReduxActions {\n    public static getDiscussionByIDACs = createAction.async<{ discussionID: number }, IDiscussion, IApiError>(\n        \"GET_DISCUSSION\",\n    );\n\n    public getDiscussionByID = (query: IGetDiscussionByID) => {\n        const { discussionID } = query;\n        const thunk = bindThunkAction(DiscussionActions.getDiscussionByIDACs, async () => {\n            const reponse = await this.api.get(`/discussions/${discussionID}`, {\n                params: {\n                    expand: [\"insertUser\", \"breadcrumbs\"],\n                },\n            });\n            return reponse.data;\n        })({ discussionID });\n        return this.dispatch(thunk);\n    };\n}\n\nexport function useDiscussionActions() {\n    return useReduxActions(DiscussionActions);\n}\n","/**\n * @copyright 2020 Adam (charrondev) Charron\n * @license Proprietary\n */\n\nexport const fontFallbacks = [\n    \"-apple-system\",\n    \"BlinkMacSystemFont\",\n    \"HelveticaNeue-Light\",\n    \"Segoe UI\",\n    \"Helvetica Neue\",\n    \"Helvetica\",\n    \"Raleway\",\n    \"Arial\",\n    \"sans-serif\",\n    \"Apple Color Emoji\",\n    \"Segoe UI Emoji\",\n    \"Segoe UI Symbol\",\n];\n\nexport const monoFallbacks = [\n    \"Consolas\",\n    \"Andale Mono WT\",\n    \"Andale Mono\",\n    \"Lucida Console\",\n    \"Lucida Sans Typewriter\",\n    \"DejaVu Sans Mono\",\n    \"Bitstream Vera Sans Mono\",\n    \"Liberation Mono\",\n    \"Nimbus Mono L\",\n    \"Monaco\",\n    \"Courier New\",\n    \"Courier\",\n    \"monospace\",\n];\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { absolutePosition, flexHelper, ISpinnerProps, spinnerLoader } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { TLength } from \"@library/styles/styleShim\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { percent } from \"csx\";\n\nexport const loaderVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"loader\");\n\n    const colors = makeThemeVars(\"colors\", {\n        fg: globalVars.mainColors.primary,\n    });\n\n    const fullPage: ISpinnerProps = makeThemeVars(\"fullPage\", {\n        size: 100,\n        thickness: 6,\n        color: colors.fg,\n    });\n\n    const medium: ISpinnerProps = makeThemeVars(\"medium\", {\n        size: 50,\n        thickness: 4,\n        color: colors.fg,\n    });\n\n    const small: ISpinnerProps = makeThemeVars(\"small\", {\n        size: 36,\n        thickness: 4,\n        color: colors.fg,\n    });\n\n    return { fullPage, small, medium };\n});\n\nexport const loaderClasses = useThemeCache(() => {\n    const vars = loaderVariables();\n    const flex = flexHelper();\n    const style = styleFactory(\"loader\");\n    const fullPageLoader = style(\"fullPageLoader\", {\n        position: \"fixed\",\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        margin: \"auto\",\n        height: styleUnit(vars.fullPage.size),\n        width: styleUnit(vars.fullPage.size),\n        ...{\n            \"&:after\": {\n                ...spinnerLoader(vars.fullPage),\n            },\n        },\n        zIndex: 1,\n    });\n    const mediumLoader = style(\"mediumLoader\", {\n        ...absolutePosition.fullSizeOfParent(),\n        ...flex.middle(),\n        height: percent(100),\n        width: percent(100),\n        ...{\n            \"&:after\": {\n                ...spinnerLoader(vars.medium),\n            },\n        },\n    });\n    const smallLoader = style(\"smallLoader\", {\n        ...flex.middle(),\n        height: percent(46),\n        width: percent(46),\n        margin: \"auto\",\n        ...{\n            \"&:after\": {\n                ...spinnerLoader(vars.small),\n            },\n        },\n    });\n\n    const loaderContainer = (size: TLength) => {\n        return style(\"loaderContainer\", {\n            position: \"relative\",\n            display: \"block\",\n            margin: \"auto\",\n            height: styleUnit(size),\n            width: styleUnit(size),\n        });\n    };\n\n    return {\n        fullPageLoader,\n        mediumLoader,\n        smallLoader,\n        loaderContainer,\n    };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { Optionalize } from \"@library/@types/utils\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport throttle from \"lodash/throttle\";\nimport React, { useCallback, useContext, useEffect, useState } from \"react\";\nimport { titleBarVariables } from \"@library/headers/TitleBar.variables\";\n\nexport enum TitleBarDevices {\n    COMPACT = \"compact\",\n    FULL = \"full\",\n}\n\nexport interface ITitleBarDeviceProps {\n    device: TitleBarDevices;\n}\n\nconst TitleBarDeviceContext = React.createContext<TitleBarDevices>(TitleBarDevices.FULL);\nexport default TitleBarDeviceContext;\n\nexport function useTitleBarDevice() {\n    const device = useContext(TitleBarDeviceContext);\n    return device;\n}\n\ninterface IProps {\n    children: React.ReactNode;\n}\n\nexport function TitleBarDeviceProvider(props: IProps) {\n    const calculateDevice = useCallback(() => {\n        // const breakpoints = layoutVariables().panelLayoutBreakPoints;\n        const breakpoints = titleBarVariables().breakpoints;\n        const width = document.body.clientWidth;\n        if (width <= breakpoints.compact) {\n            return TitleBarDevices.COMPACT;\n        } else {\n            return TitleBarDevices.FULL;\n        }\n    }, []);\n    const [device, setDevice] = useState<TitleBarDevices>(calculateDevice());\n\n    useEffect(() => {\n        const throttledUpdate = throttle(() => {\n            setDevice(calculateDevice);\n        }, 100);\n        window.addEventListener(\"resize\", throttledUpdate);\n        return () => {\n            window.removeEventListener(\"resize\", throttledUpdate);\n        };\n    }, [calculateDevice, setDevice]);\n\n    return <TitleBarDeviceContext.Provider value={device}>{props.children}</TitleBarDeviceContext.Provider>;\n}\n\n/**\n * HOC to inject DeviceContext as props.\n *\n * @param WrappedComponent - The component to wrap\n */\nexport function withTitleBarDevice<T extends ITitleBarDeviceProps = ITitleBarDeviceProps>(\n    WrappedComponent: React.ComponentType<T>,\n) {\n    const displayName = WrappedComponent.displayName || WrappedComponent.name || \"Component\";\n    const ComponentWithDevice = (props: Optionalize<T, ITitleBarDeviceProps>) => {\n        return (\n            <TitleBarDeviceContext.Consumer>\n                {(context) => {\n                    // https://github.com/Microsoft/TypeScript/issues/28938\n                    return <WrappedComponent device={context} {...(props as any)} />;\n                }}\n            </TitleBarDeviceContext.Consumer>\n        );\n    };\n    ComponentWithDevice.displayName = `useTitleBarDevice(${displayName})`;\n    return ComponentWithDevice;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useContext, useEffect, useState } from \"react\";\nimport qs from \"qs\";\n\n// The name of the custom event that we fire when an update happens.\nconst EVENT_NAME = \"X-Apply-Entry-Link-Parameters\";\n\ninterface IEntryLinkContext {\n    [key: string]: any;\n}\n\nconst context = React.createContext<IEntryLinkContext>({});\n\n/**\n * Context provider for applying arbitrary query parameters for entry urls.\n */\nexport const EntryLinkContextProvider = (props: { children: React.ReactNode }) => {\n    const [linkParams, setLinkParams] = useState({});\n\n    useEffect(() => {\n        // Listen for the event that occurs when contents are updated.\n        const handler = (e: CustomEvent) => {\n            setLinkParams(e.detail);\n        };\n\n        document.addEventListener(EVENT_NAME, handler);\n\n        return () => {\n            document.removeEventListener(EVENT_NAME, handler);\n        };\n    }, []);\n\n    return <context.Provider {...props} value={linkParams} />;\n};\n\n/**\n * Get the context value.\n */\nexport function useEntryLinkContext() {\n    return useContext(context);\n}\n\n/**\n * Update the current query parameters contexts.\n *\n * @param newParameters\n */\nexport function applyEntryLinkParameters(newParameters: IEntryLinkContext) {\n    document.dispatchEvent(new CustomEvent(EVENT_NAME, { detail: newParameters }));\n}\n\n/**\n * Get the current signin link.\n */\nexport function useSignInLink(): string {\n    const contextQuery = useEntryLinkContext();\n\n    const query = {\n        ...contextQuery,\n        target: window.location.href,\n    };\n\n    return `/entry/signin?${qs.stringify(query)}`;\n}\n\n/**\n * Get the current register link.\n */\nexport function useRegisterLink(): string {\n    const contextQuery = useEntryLinkContext();\n\n    const query = {\n        ...contextQuery,\n        target: window.location.href,\n    };\n\n    return `/entry/register?${qs.stringify(query)}`;\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { titleBarVariables } from \"@library/headers/TitleBar.variables\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { shadowHelper } from \"@library/styles/shadowHelpers\";\nimport { sticky } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { calc, percent, translate, translateX, viewHeight } from \"csx\";\nimport { CSSObject } from \"@emotion/css\";\nimport { cssRule } from \"@library/styles/styleShim\";\nimport { dropDownClasses } from \"@library/flyouts/dropDownStyles\";\n\nexport const modalVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"modal\");\n\n    const { elementaryColors } = globalVars;\n\n    const colors = makeThemeVars(\"colors\", {\n        fg: globalVars.mainColors.fg,\n        bg: globalVars.mainColors.bg,\n        overlayBg:\n            globalVars.mainColors.fg.lightness() > 0.5\n                ? elementaryColors.white.fade(0.4)\n                : elementaryColors.black.fade(0.4),\n    });\n\n    const sizing = makeThemeVars(\"sizing\", {\n        xl: 1022, // from legacy back-end modals\n        large: 720,\n        medium: 516,\n        small: 375,\n        height: percent(96), // VH units cause issues on iOS.\n        zIndex: 1050, // Sorry it's so high. Our dashboard uses some bootstrap which specifies 1040 for the old modals.\n        // When nesting our modals on top we need to be higher.\n    });\n\n    const spacing = makeThemeVars(\"spacing\", {\n        horizontalMargin: 40,\n    });\n\n    const border = makeThemeVars(\"border\", {\n        radius: globalVars.borderType.modals.radius,\n    });\n\n    const dropDown = makeThemeVars(\"dropDown\", {\n        padding: globalVars.spacer.size,\n    });\n\n    const header = makeThemeVars(\"header\", {\n        minHeight: 60,\n        verticalPadding: 12,\n        boxShadow: `0 1px 2px 0 ${ColorsUtils.colorOut(globalVars.overlay.bg)}`,\n    });\n\n    const footer = makeThemeVars(\"footer\", {\n        minHeight: header.minHeight,\n        verticalPadding: header.verticalPadding,\n        boxShadow: `0 -1px 2px 0 ${ColorsUtils.colorOut(globalVars.overlay.bg)}`,\n    });\n\n    const fullScreenTitleSpacing = makeThemeVars(\"fullScreenModalTitle\", {\n        gap: 52,\n    });\n\n    return {\n        colors,\n        sizing,\n        spacing,\n        border,\n        dropDown,\n        header,\n        footer,\n        fullScreenTitleSpacing,\n    };\n});\n\nexport const modalClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = modalVariables();\n    const style = styleFactory(\"modal\");\n    const mediaQueries = layoutVariables().mediaQueries();\n    const shadows = shadowHelper();\n    const titleBarVars = titleBarVariables();\n\n    cssRule(\"#modals\", {\n        position: \"relative\",\n        zIndex: 1050, // Sorry it's so high. Our dashboard uses some bootstrap which specifies 1040 for the old modals.\n        // When nesting our modals on top we need to be higher.\n    });\n\n    const overlayMixin: CSSObject = {\n        position: \"fixed\",\n        // Viewport units are useful here because\n        // we're actually fine this being taller than the initially visible viewport.\n        height: viewHeight(100),\n        width: percent(100),\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        zIndex: 10,\n    };\n\n    const overlayScrim = style(\"overlayScrim\", {\n        ...overlayMixin,\n        background: ColorsUtils.colorOut(vars.colors.overlayBg),\n    });\n\n    const overlayContent = style(\"overlayContent\", {\n        ...overlayMixin,\n    });\n\n    const sidePanelMixin: CSSObject = {\n        left: styleUnit(vars.dropDown.padding),\n        width: calc(`100% - ${styleUnit(vars.dropDown.padding)}`),\n        display: \"flex\",\n        flexDirection: \"column\",\n        top: 0,\n        bottom: 0,\n        transform: \"none\",\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0,\n        maxWidth: 400,\n        ...{\n            [`.${dropDownClasses().action}`]: {\n                fontWeight: globalVars.fonts.weights.normal,\n            },\n        },\n    };\n\n    const root = style({\n        display: \"flex\",\n        flexDirection: \"column\",\n        width: percent(100),\n        maxWidth: percent(100),\n        maxHeight: styleUnit(vars.sizing.height),\n        zIndex: 1,\n        backgroundColor: ColorsUtils.colorOut(vars.colors.bg),\n        color: ColorsUtils.colorOut(vars.colors.fg),\n        position: \"fixed\",\n        top: percent(50),\n        left: percent(50),\n        bottom: \"initial\",\n        overflow: \"hidden\",\n        borderRadius: styleUnit(vars.border.radius),\n        // NOTE: This transform can cause issues if anything inside of us needs fixed positioning.\n        // See http://meyerweb.com/eric/thoughts/2011/09/12/un-fixing-fixed-elements-with-css-transforms/\n        // See also https://www.w3.org/TR/2009/WD-css3-2d-transforms-20091201/#introduction\n        // This is why fullscreen unsets the transforms.\n        transform: translate(`-50%`, `-50%`),\n        ...Mixins.margin({ all: \"auto\" }),\n        ...{\n            \"&&.isFullScreen\": {\n                width: percent(100),\n                height: percent(100),\n                maxHeight: percent(100),\n                maxWidth: percent(100),\n                borderRadius: 0,\n                border: \"none\",\n                top: 0,\n                bottom: 0,\n                transform: \"none\",\n                left: 0,\n                right: 0,\n            },\n            \"&.isXL\": {\n                width: styleUnit(vars.sizing.xl),\n                height: percent(100),\n                maxWidth: calc(`100% - ${styleUnit(vars.spacing.horizontalMargin)}`),\n            },\n            \"&.isLarge\": {\n                width: styleUnit(vars.sizing.large),\n                maxWidth: calc(`100% - ${styleUnit(vars.spacing.horizontalMargin)}`),\n            },\n            \"&.isMedium\": {\n                width: styleUnit(vars.sizing.medium),\n                maxWidth: calc(`100% - ${styleUnit(vars.spacing.horizontalMargin)}`),\n            },\n            \"&.isSmall\": {\n                width: styleUnit(vars.sizing.small),\n                maxWidth: calc(`100% - ${styleUnit(vars.spacing.horizontalMargin)}`),\n            },\n            \"&&&.isSidePanelRight\": {\n                ...sidePanelMixin,\n                right: 0,\n                left: \"initial\",\n            },\n            \"&&&.isSidePanelRightLarge\": {\n                ...sidePanelMixin,\n                right: 0,\n                left: \"initial\",\n                width: styleUnit(vars.sizing.xl),\n                maxWidth: calc(`100% - ${styleUnit(vars.spacing.horizontalMargin)}`),\n                height: percent(100),\n                maxHeight: percent(100),\n                top: 0,\n                bottom: 0,\n            },\n            \"&&&.isSidePanelLeft\": {\n                ...sidePanelMixin,\n                left: 0,\n                right: \"initial\",\n            },\n            \"&&.isDropDown\": {\n                top: 0,\n                left: 0,\n                right: 0,\n                width: percent(100),\n                marginBottom: \"auto\",\n                transform: \"none\",\n                maxHeight: calc(`100% - ${styleUnit(globalVars.gutter.size)}`),\n                borderTopLeftRadius: 0,\n                borderTopRightRadius: 0,\n                border: \"none\",\n            },\n            \"&.isShadowed\": {\n                ...shadows.dropDown(),\n                ...Mixins.border(globalVars.borderType.modals),\n            },\n            \".form-group\": {\n                marginLeft: styleUnit(-16),\n                marginRight: styleUnit(-16),\n            },\n        },\n    });\n\n    const scroll = style(\"scroll\", {\n        // ...absolutePosition.fullSizeOfParent(),\n        width: percent(100),\n        height: percent(100),\n        maxHeight: percent(100),\n        overflow: \"auto\",\n    });\n\n    const content = style(\"content\", shadows.modal());\n\n    const pageHeader = style(\n        \"pageHeader\",\n        sticky(),\n        {\n            ...shadows.embed(),\n            top: 0,\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            height: styleUnit(titleBarVars.sizing.height),\n            minHeight: styleUnit(titleBarVars.sizing.height),\n            zIndex: 2,\n            background: ColorsUtils.colorOut(vars.colors.bg),\n            ...{\n                \"&.noShadow\": {\n                    boxShadow: \"none\",\n                },\n            },\n        },\n        mediaQueries.oneColumnDown({\n            height: styleUnit(titleBarVars.sizing.mobile.height),\n            minHeight: styleUnit(titleBarVars.sizing.mobile.height),\n        }),\n    );\n\n    const frameWrapper = style(\"frameWrapper\", {\n        position: \"relative\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        height: percent(100),\n        maxHeight: percent(100),\n        minHeight: percent(0),\n        width: percent(100),\n        ...{\n            \".frame\": {\n                maxHeight: \"100%\",\n                flex: 1,\n            },\n        },\n    });\n\n    return {\n        root,\n        scroll,\n        content,\n        pageHeader,\n        overlayScrim,\n        overlayContent,\n        frameWrapper,\n    };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { flexHelper, pointerEvents } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { calc, percent } from \"csx\";\nimport { inputMixin, inputVariables } from \"@library/forms/inputStyles\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { checkRadioClasses } from \"@library/forms/checkRadioStyles\";\n\nexport const selectOneVariables = useThemeCache(() => {\n    const vars = variableFactory(\"selectOne\");\n\n    const padding = vars(\"padding\", {\n        right: 30,\n        left: inputMixin().paddingRight as string,\n    });\n\n    return { padding };\n});\n\nexport const selectOneClasses = useThemeCache(() => {\n    const style = styleFactory(\"selectOne\");\n    const vars = selectOneVariables();\n    const globalVars = globalVariables();\n\n    const singleValueOffset = 26;\n    const rightSpacing = 6;\n\n    const inputWrap = style(\"inputWrap\", {\n        ...{\n            \"&.hasFocus .inputBlock-inputText\": {\n                ...Mixins.border({\n                    ...globalVars.borderType.formElements.default,\n                    color: globalVars.mainColors.primary,\n                }),\n            },\n            \".inputBlock-inputText\": {\n                paddingRight: styleUnit(vars.padding.right),\n                paddingLeft: styleUnit(vars.padding.left),\n                position: \"relative\",\n            },\n            \".SelectOne__indicators\": {\n                position: \"absolute\",\n                top: 0,\n                right: styleUnit(rightSpacing),\n                bottom: 0,\n                display: \"flex\",\n                justifyContent: \"flex-end\",\n                alignItems: \"center\",\n                width: styleUnit(inputVariables().sizing.height),\n            },\n            \".SelectOne__indicator-separator\": {\n                display: \"none\",\n            },\n            \".SelectOne__indicator\": {\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                width: styleUnit(inputVariables().sizing.height / 2),\n                cursor: \"pointer\",\n            },\n            \".suggestedTextInput-head\": {\n                ...flexHelper().middleLeft(),\n                justifyContent: \"space-between\",\n            },\n            \".SelectOne__single-value\": {\n                textOverflow: \"ellipsis\",\n                maxWidth: calc(`100% - ${styleUnit(vars.padding.right + singleValueOffset)}`),\n            },\n            \".SelectOne__single-value + div\": {\n                textOverflow: \"ellipsis\",\n                maxWidth: calc(`100% - ${styleUnit(vars.padding.right)}`),\n            },\n            \".SelectOne__value-container.inputText.inputText\": {\n                paddingRight: styleUnit(inputVariables().sizing.height + rightSpacing),\n                ...pointerEvents(), // sometimes this element blocks the click to focus the input.\n            },\n            \".SelectOne__value-container > *\": {\n                width: percent(100),\n                overflow: \"hidden\",\n                lineHeight: \"inherit\",\n            },\n            \".SelectOne--is-disabled\": {\n                cursor: \"pointer\",\n                opacity: 0.5,\n            },\n            \".SelectOne__menu-notice--no-options\": {\n                padding: 10,\n                overflow: \"hidden\",\n            },\n            \".suggestedTextInput-option\": {\n                width: \"100%\",\n                textAlign: \"left\",\n                ...Mixins.padding({\n                    vertical: 6,\n                    horizontal: 12,\n                }),\n            },\n            \".suggestedTextInput-option:hover\": {\n                backgroundColor: ColorsUtils.colorOut(globalVars.states.hover.highlight),\n            },\n            \".icon-selectedCategory\": {\n                ...Mixins.margin({\n                    horizontal: 4,\n                }),\n            },\n            \".inputBlock\": inputMixin(),\n        },\n    });\n\n    const checkIcon = style(\"checkIcon\", {\n        color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n    });\n\n    const checkBoxAfterInput = style(\"checkBoxAfterInput\", {\n        marginTop: styleUnit(12),\n        ...{\n            [`.${checkRadioClasses().root}`]: {\n                paddingLeft: 0,\n            },\n        },\n    });\n\n    const chevron = style(\"chevron\", {\n        marginRight: 8,\n    });\n\n    return { inputWrap, checkIcon, checkBoxAfterInput, chevron };\n});\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { important } from \"csx\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const placesSearchListingVariables = useThemeCache(() => {\n    const makeThemeVars = variableFactory(\"placesSearchListing\");\n    const globalVars = globalVariables();\n\n    const colors = makeThemeVars(\"color\", {\n        fg: globalVars.meta.text.color,\n        hover: {\n            fg: globalVars.links.colors.active,\n        },\n        focus: {\n            fg: globalVars.links.colors.active,\n        },\n        active: {\n            fg: globalVars.links.colors.active,\n        },\n        deleted: globalVars.messageColors.deleted,\n    });\n\n    const iconSize = makeThemeVars(\"iconSize\", {\n        size: {\n            width: globalVars.icon.sizes.small,\n            height: globalVars.icon.sizes.small,\n        },\n    });\n    return {\n        iconSize,\n        colors,\n    };\n});\n\nexport const placesSearchListingClasses = useThemeCache(() => {\n    const style = styleFactory(\"placesSearchListing\");\n    const globalVars = globalVariables();\n    const vars = placesSearchListingVariables();\n    const linkColors = Mixins.clickable.itemState();\n\n    const container = style(\"container\", {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n        flexWrap: \"wrap\",\n    });\n\n    const buttonIconContainer = style(\"buttonIconContainer\", {\n        display: \"flex\",\n        alignItems: \"center\",\n        ...vars.iconSize.size,\n    });\n\n    const link = style(\"link\", {\n        fontSize: important(globalVars.fonts.size.small),\n        display: important(\"flex\"),\n        alignItems: important(\"center\"),\n        color: ColorsUtils.colorOut(vars.colors.fg),\n        marginRight: styleUnit(24),\n        padding: \"6px 0\",\n        ...linkColors,\n    });\n\n    return {\n        container,\n        buttonIconContainer,\n        link,\n    };\n});\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\n\nexport const numberFormattedClasses = useThemeCache(() => {\n    const style = styleFactory(\"numberFormatter\");\n\n    const root = style({\n        textDecoration: \"inherit\",\n    });\n\n    return { root };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { delegateEvent } from \"@vanilla/dom-utils\";\n\nexport function initSpoilers() {\n    // Setup\n    delegateEvent(\"click\", \".js-toggleSpoiler\", handleToggleSpoiler);\n}\n\n/**\n * Toggle a spoiler open and closed.\n */\nfunction handleToggleSpoiler(event: MouseEvent, triggeringElement: HTMLElement) {\n    const toggleButton = triggeringElement;\n\n    const spoilerContainer = toggleButton.closest(\".spoiler\");\n    if (spoilerContainer) {\n        spoilerContainer.classList.toggle(\"isShowingSpoiler\");\n    }\n}\n","/**\n * Wire together the different parts of the application.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { initCodeHighlighting } from \"@library/content/code\";\nimport { initEmojiSupport } from \"@library/content/emoji\";\nimport { initSpoilers } from \"@library/content/spoilers\";\nimport { mountAllEmbeds } from \"@library/embeddedContent/embedService\";\nimport { autoWrapCollapsableContent } from \"@library/content/CollapsableContent\";\n\nexport async function initAllUserContent() {\n    await autoWrapCollapsableContent();\n    initEmojiSupport();\n    initSpoilers();\n    await mountAllEmbeds();\n    initCodeHighlighting();\n}\n\n/**\n * Runs method for all embeds that need to be rendered everytime content changes.\n * This is ideal for something like react's `componentDidMount`.\n */\nexport function convertAllUserContent() {\n    mountAllEmbeds();\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { onReady, onContent } from \"@library/utility/appUtils\";\nimport { convertToSafeEmojiCharacters } from \"@vanilla/dom-utils\";\n\nexport function initEmojiSupport() {\n    // Emoji\n    onReady(() => convertToSafeEmojiCharacters(document.body));\n    onContent(() => convertToSafeEmojiCharacters(document.body));\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\n\nexport const embedDropdownClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const style = styleFactory(\"embedDropdown\");\n    const container = style(\"container\", {\n        listStyle: \"none !important\", // Overrides default ul/li style\n        margin: \"0 !important\", // Overrides default ul/li style\n        position: \"absolute\",\n        top: \"100%\",\n        left: -1,\n        right: -1,\n        background: \"white\",\n        ...Mixins.border(),\n        borderTopLeftRadius: 0,\n        borderTopRightRadius: 0,\n    });\n\n    const option = style(\"option\", {\n        display: \"flex\",\n        ...Mixins.padding({ horizontal: 8, vertical: 4 }),\n        alignItems: \"center\",\n        margin: \"4px !important\", // Overrides default ul/li style\n        height: 32,\n        borderRadius: globalVars.border.radius,\n        ...{\n            \"&:hover\": {\n                color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n            },\n            \"&:before\": {\n                display: \"none\",\n            },\n        },\n    });\n\n    const optionLabel = style(\"optionLabel\", {\n        flex: 1,\n        textAlign: \"left\",\n        marginLeft: 12,\n    });\n\n    const check = style(\"check\", {\n        color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n        marginBottom: -1,\n    });\n\n    return { container, option, optionLabel, check };\n});\n","/**\n * @author Dominic Lacaille <dominic.lacaille@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport React, { createContext, PropsWithChildren, useContext, useEffect, useRef } from \"react\";\nimport { EmbedMenuContext } from \"@rich-editor/editor/pieces/EmbedMenu\";\nimport { embedDropdownClasses } from \"@library/embeddedContent/components/embedDropdownStyles\";\nimport { CheckIcon } from \"@library/icons/common\";\nimport { EmbedButton } from \"@library/embeddedContent/components/EmbedButton\";\nimport { useUniqueID } from \"@library/utility/idUtils\";\n\ninterface IEmbedDropdownContext {\n    selected?: string;\n}\n\nconst EmbedDropdownContext = createContext<IEmbedDropdownContext>({ selected: undefined });\n\ninterface IEmbedDropdownProps {\n    Icon: React.FunctionComponent;\n    name: string;\n    value: string;\n    label: string;\n}\n\nexport function EmbedDropdown(props: PropsWithChildren<IEmbedDropdownProps>) {\n    const { Icon, name, children, value, label } = props;\n    const { selected, setSelected } = useContext(EmbedMenuContext);\n\n    const isSelected = name === selected;\n    const buttonRef = useRef<HTMLButtonElement>(null);\n\n    const id = useUniqueID(\"embedDropdown\");\n    const buttonId = id + \"-button\";\n    const contentId = id + \"-content\";\n\n    return (\n        <>\n            <EmbedButton\n                id={buttonId}\n                aria-aria-haspopup=\"true\"\n                aria-controls={contentId}\n                aria-expanded={isSelected ? \"true\" : \"false\"}\n                aria-label={label}\n                buttonRef={buttonRef}\n                isActive={isSelected}\n                onKeyDown={(e) => {\n                    const key = e.key;\n                    switch (key) {\n                        case \"Enter\":\n                        case \"\":\n                        case \"ArrowDown\": {\n                            e.preventDefault();\n                            setSelected(name);\n                            break;\n                        }\n                        default:\n                            break;\n                    }\n                }}\n                onClick={() => {\n                    if (isSelected) setSelected(undefined);\n                    else setSelected(name);\n                }}\n            >\n                <Icon />\n            </EmbedButton>\n            {isSelected && (\n                <EmbedDropdownMenuContainer\n                    buttonRef={buttonRef}\n                    setSelected={setSelected}\n                    label={label}\n                    id={contentId}\n                >\n                    <EmbedDropdownContext.Provider value={{ selected: value }}>\n                        {children}\n                    </EmbedDropdownContext.Provider>\n                </EmbedDropdownMenuContainer>\n            )}\n        </>\n    );\n}\ninterface IEmbedDropdownMenuContainerProps {\n    setSelected: (name: string | undefined) => void;\n    id: string;\n    label: string;\n    buttonRef: React.RefObject<HTMLButtonElement>;\n}\n\nfunction EmbedDropdownMenuContainer(props: PropsWithChildren<IEmbedDropdownMenuContainerProps>) {\n    const { children, setSelected, label, buttonRef, id } = props;\n    const classes = embedDropdownClasses();\n    const menuRef = useRef<HTMLUListElement | null>(null);\n\n    useEffect(() => {\n        if (menuRef && menuRef.current) {\n            (menuRef.current.firstChild as HTMLElement).focus();\n        }\n    }, [menuRef]);\n\n    return (\n        <ul\n            role=\"menu\"\n            aria-label={label}\n            id={id}\n            tabIndex={-1}\n            onKeyDown={(e: React.KeyboardEvent<HTMLElement>) => {\n                const key = e.key;\n                let target = e.target as HTMLElement & EventTarget;\n                const firstSibling = () => target.parentElement?.firstChild as HTMLElement | undefined;\n                const lastSibling = () => target.parentElement?.lastChild as HTMLElement | undefined;\n                switch (key) {\n                    case \"ArrowDown\": {\n                        e.preventDefault();\n                        let nextSibling = target.nextSibling as HTMLElement | undefined;\n                        if (!nextSibling && target.parentElement) {\n                            nextSibling = firstSibling();\n                        }\n                        (nextSibling as HTMLElement).focus();\n                        break;\n                    }\n                    case \"ArrowUp\": {\n                        e.preventDefault();\n                        let previousSibling = target.previousSibling as HTMLElement | undefined;\n                        if (!previousSibling && target.parentElement) {\n                            previousSibling = lastSibling();\n                        }\n                        (previousSibling as HTMLElement).focus();\n                        break;\n                    }\n                    case \"Home\": {\n                        e.preventDefault();\n                        (firstSibling() as HTMLElement)?.focus();\n                        break;\n                    }\n                    case \"End\": {\n                        e.preventDefault();\n                        (lastSibling() as HTMLElement)?.focus();\n                        break;\n                    }\n                    case \"Escape\":\n                        e.preventDefault();\n                        setSelected(undefined);\n                        buttonRef.current?.focus();\n                        break;\n                    default:\n                        break;\n                }\n            }}\n            ref={menuRef}\n            className={classes.container}\n        >\n            {children}\n        </ul>\n    );\n}\n\ninterface IEmbedDropdownOptionProps {\n    Icon: React.FunctionComponent;\n    value: string;\n    label: string;\n    onClick(e): void;\n}\n\nEmbedDropdown.Option = function EmbedDropdownOption(props: IEmbedDropdownOptionProps) {\n    const { Icon, value, label, onClick } = props;\n    const { selected } = useContext(EmbedDropdownContext);\n    const isSelected = selected === value;\n    const classes = embedDropdownClasses();\n\n    return (\n        <li\n            role=\"menuitemradio\"\n            aria-label={label}\n            aria-checked={isSelected ? \"true\" : \"false\"}\n            tabIndex={-1}\n            className={classes.option}\n            onClick={onClick}\n            onKeyDown={(e: React.KeyboardEvent<HTMLElement>) => {\n                const key = e.key;\n                switch (key) {\n                    case \"Enter\":\n                    case \" \":\n                        e.preventDefault();\n                        onClick((e) => undefined);\n                        break;\n                    default:\n                        break;\n                }\n            }}\n        >\n            <Icon />\n            <div className={classes.optionLabel}>{label}</div>\n            {isSelected && (\n                <div className={classes.check}>\n                    <CheckIcon />\n                </div>\n            )}\n        </li>\n    );\n};\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { t } from \"@library/utility/appUtils\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport Button from \"@library/forms/Button\";\nimport { CloseCompactIcon, CloseIcon } from \"@library/icons/common\";\n\ninterface IProps {\n    className?: string;\n    disabled?: boolean;\n    onClick: any;\n    baseClass?: ButtonTypes;\n    title?: string;\n    compact?: boolean;\n}\n\n/**\n * A standardized close button.\n */\nexport default class CloseButton extends React.PureComponent<IProps> {\n    public static defaultProps = {\n        baseClass: ButtonTypes.ICON,\n        compact: false,\n    };\n\n    /**\n     * There are 2 rendering modes. 1 with w real icon, and one using text in place of an icon.\n     */\n    public render() {\n        const closeLabel = this.props.title ? this.props.title : t(\"Close\");\n        const componentClasses = classNames(\"buttonClose\", \"closeButton\", this.props.className);\n        return (\n            <Button\n                disabled={this.props.disabled}\n                className={componentClasses}\n                title={closeLabel}\n                onClick={this.props.onClick}\n                baseClass={this.props.baseClass}\n            >\n                {this.props.compact ? <CloseCompactIcon /> : <CloseIcon />}\n            </Button>\n        );\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ColorHelper, important, percent, px } from \"csx\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { MaxWidthProperty, OverflowXProperty, TextOverflowProperty, WhiteSpaceProperty } from \"csstype\";\nimport { CSSObject } from \"@emotion/css\";\nimport { TLength } from \"@library/styles/styleShim\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { paddingOffsetBasedOnBorderRadius } from \"@library/forms/paddingOffsetFromBorderRadius\";\nimport { EMPTY_SPACING } from \"@library/styles/cssUtilsTypes\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport function inputLineHeight(height: number, paddingTop: number, fullBorderWidth: number) {\n    return styleUnit(height - (2 * paddingTop + fullBorderWidth));\n}\n\nexport const textInputSizingFromSpacing = (fontSize: number, paddingTop: number, fullBorderWidth: number) => {\n    return {\n        fontSize: styleUnit(fontSize),\n        width: percent(100),\n        lineHeight: 1.5,\n        ...Mixins.padding({\n            ...EMPTY_SPACING,\n            top: styleUnit(paddingTop),\n            bottom: styleUnit(paddingTop),\n            left: styleUnit(paddingTop * 2),\n            right: styleUnit(paddingTop * 2),\n        }),\n    };\n};\n\nexport const getVerticalPaddingForTextInput = (height: number, fontSize: number, fullBorderWidth: number) => {\n    return (height - fullBorderWidth - fontSize * 1.5) / 2;\n};\n\nexport const getHorizontalPaddingForTextInput = (height: number, fontSize: number, fullBorderWidth: number) => {\n    return getVerticalPaddingForTextInput(height, fontSize, fullBorderWidth) * 2;\n};\n\nexport const textInputSizingFromFixedHeight = (\n    height: number,\n    fontSize: number,\n    fullBorderWidth: number,\n    borderRadius?: number | string,\n): CSSObject => {\n    const paddingVertical = getVerticalPaddingForTextInput(height, fontSize, fullBorderWidth);\n    const paddingHorizontal = getHorizontalPaddingForTextInput(height, fontSize, fullBorderWidth);\n\n    const formElementVars = formElementsVariables();\n\n    const paddingOffsets = paddingOffsetBasedOnBorderRadius({\n        radius: borderRadius ?? globalVariables().borderType.formElements.default.radius,\n        extraPadding: formElementVars.spacing.fullBorderRadius.extraHorizontalPadding,\n        height: height,\n    });\n\n    return {\n        fontSize: styleUnit(fontSize),\n        width: percent(100),\n        lineHeight: 1.5,\n        minHeight: styleUnit(height),\n        ...Mixins.padding({\n            vertical: styleUnit(px(paddingVertical)),\n            left: px(paddingHorizontal + paddingOffsets.left ?? 0),\n            right: px(paddingHorizontal + paddingOffsets.right ?? 0),\n        }),\n    };\n};\n\n// must be nested\nexport const placeholderStyles = (styles: CSSObject): CSSObject => {\n    return {\n        \"&::-webkit-input-placeholder\": {\n            ...styles,\n        },\n        \"&::-moz-placeholder\": {\n            ...styles,\n        },\n        \"&::-ms-input-placeholder\": {\n            ...styles,\n        },\n    };\n};\n\nexport const autoFillReset = (fg?: ColorHelper, bg?: ColorHelper) => {\n    return {\n        \"&&&:-webkit-autofill, &&&&:-webkit-autofill:hover, &&&&:-webkit-autofill:focus\": {\n            [\"-webkit-text-fill-color\"]: important(ColorsUtils.colorOut(fg) as string),\n            [\"-webkit-box-shadow\"]: important(`0 0 0px 1000px ${ColorsUtils.colorOut(bg)} inset`),\n            [\"transition\"]: important(`background-color 5000s ease-in-out 0s`),\n        },\n        \"&&&:-webkit-autofill\": {\n            fontSize: important(\"inherit\"),\n        },\n    };\n};\n\nexport const singleLineEllipsis = () => {\n    return {\n        whiteSpace: \"nowrap\" as WhiteSpaceProperty,\n        textOverflow: \"ellipsis\" as TextOverflowProperty,\n        overflow: \"hidden\" as OverflowXProperty,\n        maxWidth: percent(100) as MaxWidthProperty<TLength>,\n    };\n};\n\nexport const longWordEllipsis = (): CSSObject => {\n    return {\n        textOverflow: \"ellipsis\",\n        overflowX: \"hidden\",\n        maxWidth: percent(100),\n    };\n};\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { absolutePosition, negative, userSelect } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { important, percent, px, translateY } from \"csx\";\nimport { titleBarVariables } from \"@library/headers/TitleBar.variables\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\n\nconst backLinkVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"backLink\");\n\n    const sizing = makeThemeVars(\"backLink\", {\n        height: globalVars.icon.sizes.default,\n        width: (globalVars.icon.sizes.default * 12) / 21, // From SVG ratio\n    });\n\n    // We do a best guess based on calculations for the vertical position of the back link.\n    // However, it might visually be a little off and need some adjustment\n    const position = makeThemeVars(\"position\", {\n        verticalOffset: globalVars.fonts.alignment.headings.verticalOffsetForAdjacentElements,\n    });\n\n    return {\n        sizing,\n        position,\n    };\n});\n\nconst backLinkClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const mediaQueries = layoutVariables().mediaQueries();\n    const style = styleFactory(\"backLink\");\n    const titleBarVars = titleBarVariables();\n    const vars = backLinkVariables();\n\n    const root = style(\n        {\n            ...userSelect(),\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"flex-start\",\n            overflow: \"visible\",\n            height: styleUnit(vars.sizing.height),\n            minWidth: styleUnit(vars.sizing.width),\n            ...Mixins.margin({\n                left: negative(22),\n                right: globalVars.gutter.half,\n            }),\n            transform: translateY(\"-0.1em\"),\n        },\n        mediaQueries.oneColumnDown({\n            ...Mixins.margin({\n                left: 0,\n            }),\n        }),\n    );\n\n    const link = style(\"link\", {\n        display: \"inline-flex\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n        color: \"inherit\",\n        height: styleUnit(vars.sizing.height),\n        ...{\n            \"&:hover, &:focus\": {\n                color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n                outline: 0,\n            },\n        },\n    });\n\n    const inHeading = (fontSize?: number | null) => {\n        if (fontSize) {\n            return style(\"inHeading\", {\n                ...absolutePosition.topLeft(\".5em\"),\n                fontSize: styleUnit(fontSize),\n                transform: `translateY(-50%)`,\n                marginTop: styleUnit(vars.position.verticalOffset),\n            });\n        } else {\n            return \"\";\n        }\n    };\n\n    const label = style(\n        \"label\",\n        {\n            fontWeight: globalVars.fonts.weights.semiBold,\n            whiteSpace: \"nowrap\",\n            paddingLeft: px(12),\n        },\n        mediaQueries.xs(Mixins.absolute.srOnly()),\n    );\n\n    const icon = style(\"icon\", {\n        height: styleUnit(vars.sizing.height),\n        width: styleUnit(vars.sizing.width),\n    });\n\n    // Since the back link needs to be outside the heading, we need a way to get the height of one line of text to center the link vertically.\n    // We need to get the height from the text, so this element is a hidden space used for aligning.\n    const getLineHeight = style(\"getLineHeight\", {\n        visibility: important(\"hidden\"),\n    });\n\n    return {\n        root,\n        link,\n        label,\n        icon,\n        getLineHeight,\n        inHeading,\n    };\n});\n\nexport default backLinkClasses;\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { percent } from \"csx\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { LayoutTypes } from \"@library/layout/types/interface.layoutTypes\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const panelWidgetClasses = useThemeCache((mediaQueries) => {\n    const globalVars = globalVariables();\n    const style = styleFactory(\"panelWidget\");\n\n    const root = style({\n        display: \"flex\",\n        flexDirection: \"column\",\n        position: \"relative\",\n        width: percent(100),\n        ...Mixins.padding({\n            all: globalVars.widget.padding,\n        }),\n        ...{\n            \"&.hasNoVerticalPadding\": {\n                ...Mixins.padding({ vertical: 0 }),\n            },\n            \"&.hasNoHorizontalPadding\": {\n                ...Mixins.padding({ horizontal: 0 }),\n            },\n            \"&.isSelfPadded\": {\n                ...Mixins.padding({ all: 0 }),\n            },\n            ...mediaQueries({\n                [LayoutTypes.TWO_COLUMNS]: {\n                    oneColumnDown: {\n                        ...Mixins.padding({\n                            all: globalVars.widget.padding,\n                        }),\n                    },\n                },\n                [LayoutTypes.THREE_COLUMNS]: {\n                    oneColumnDown: {\n                        ...Mixins.padding({\n                            all: globalVars.widget.padding,\n                        }),\n                    },\n                },\n            }),\n        },\n    });\n\n    return { root: root + \" panelWidget\" };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { BackgroundImageProperty } from \"csstype\";\nimport { important, percent, px, quote, url, viewHeight, viewWidth } from \"csx\";\nimport { CSSObject } from \"@emotion/css\";\nimport { assetUrl, themeAsset } from \"@library/utility/appUtils\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\n\nexport const getBackgroundImage = (image?: BackgroundImageProperty) => {\n    if (!image) {\n        return undefined;\n    }\n    image = image.toString();\n    if (image.charAt(0) === \"~\") {\n        // Relative path to theme folder\n        image = themeAsset(image.substr(1, image.length - 1));\n        return `url(${image})`;\n    }\n\n    if (image.startsWith(\"data:image/\")) {\n        return `url(${image})`;\n    }\n\n    if (image.startsWith(\"linear-gradient(\")) {\n        return image;\n    }\n\n    // Fallback to a general asset URL.\n    return `url(${assetUrl(image)})`;\n};\n\nexport const objectFitWithFallback = (): CSSObject => {\n    return {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        margin: \"auto\",\n        height: \"auto\",\n        width: percent(100),\n        ...{\n            \"@supports (object-fit: cover)\": {\n                position: important(\"relative\"),\n                objectFit: \"cover\",\n                objectPosition: \"center\",\n                height: important(percent(100).toString()),\n            },\n        },\n    };\n};\nexport function fakeBackgroundFixed() {\n    return {\n        content: quote(\"\"),\n        display: \"block\",\n        position: \"fixed\",\n        top: px(0),\n        left: px(0),\n        width: viewWidth(100),\n        height: viewHeight(100),\n    };\n}\n\nexport function centeredBackgroundProps() {\n    return {\n        backgroundPosition: `50% 50%`,\n        backgroundRepeat: \"no-repeat\",\n    };\n}\n\nexport function centeredBackground() {\n    const style = styleFactory(\"centeredBackground\");\n    return style(centeredBackgroundProps());\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport {\n    AlignItemsProperty,\n    BottomProperty,\n    DisplayProperty,\n    FlexWrapProperty,\n    JustifyContentProperty,\n    LeftProperty,\n    PositionProperty,\n    RightProperty,\n} from \"csstype\";\nimport { TLength } from \"@library/styles/styleShim\";\nimport { CSSObject } from \"@emotion/css\";\nimport { percent, px } from \"csx\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\n\nexport const absolutePosition = {\n    topRight: (top: string | number = \"0\", right: RightProperty<TLength> = px(0)): CSSObject => {\n        return {\n            position: \"absolute\" as PositionProperty,\n            top: styleUnit(top),\n            right: styleUnit(right),\n        };\n    },\n    topLeft: (top: string | number = \"0\", left: LeftProperty<TLength> = px(0)): CSSObject => {\n        return {\n            position: \"absolute\" as PositionProperty,\n            top: styleUnit(top),\n            left: styleUnit(left),\n        };\n    },\n    bottomRight: (bottom: BottomProperty<TLength> = px(0), right: RightProperty<TLength> = px(0)): CSSObject => {\n        return {\n            position: \"absolute\" as PositionProperty,\n            bottom: styleUnit(bottom),\n            right: styleUnit(right),\n        };\n    },\n    bottomLeft: (bottom: BottomProperty<TLength> = px(0), left: LeftProperty<TLength> = px(0)): CSSObject => {\n        return {\n            position: \"absolute\" as PositionProperty,\n            bottom: styleUnit(bottom),\n            left: styleUnit(left),\n        };\n    },\n    middleOfParent: (shrink: boolean = false): CSSObject => {\n        if (shrink) {\n            return {\n                position: \"absolute\" as PositionProperty,\n                display: \"inline-block\",\n                top: percent(50),\n                left: percent(50),\n                right: \"initial\",\n                bottom: \"initial\",\n                transform: \"translate(-50%, -50%)\",\n            };\n        } else {\n            return {\n                position: \"absolute\" as PositionProperty,\n                display: \"block\",\n                top: 0,\n                left: 0,\n                right: 0,\n                bottom: 0,\n                maxHeight: percent(100),\n                maxWidth: percent(100),\n                margin: \"auto\",\n            };\n        }\n    },\n    middleLeftOfParent: (left: LeftProperty<TLength> = px(0)): CSSObject => {\n        return {\n            position: \"absolute\" as PositionProperty,\n            display: \"block\",\n            top: 0,\n            left,\n            bottom: 0,\n            maxHeight: percent(100),\n            maxWidth: percent(100),\n            margin: \"auto 0\",\n        };\n    },\n    middleRightOfParent: (right: RightProperty<TLength> = px(0)): CSSObject => {\n        return {\n            position: \"absolute\" as PositionProperty,\n            display: \"block\",\n            top: 0,\n            right,\n            bottom: 0,\n            maxHeight: percent(100),\n            maxWidth: percent(100),\n            margin: \"auto 0\",\n        };\n    },\n    fullSizeOfParent: (): CSSObject => {\n        return {\n            display: \"block\",\n            position: \"absolute\" as PositionProperty,\n            top: px(0),\n            left: px(0),\n            width: percent(100),\n            height: percent(100),\n        };\n    },\n};\n\nexport function sticky(): CSSObject {\n    return {\n        position: [\"-webkit-sticky\", \"sticky\"],\n    };\n}\n\nexport function flexHelper() {\n    const middle = (wrap = false): CSSObject => {\n        return {\n            display: \"flex\" as DisplayProperty,\n            alignItems: \"center\" as AlignItemsProperty,\n            justifyContent: \"center\" as JustifyContentProperty,\n            flexWrap: (wrap ? \"wrap\" : \"nowrap\") as FlexWrapProperty,\n        };\n    };\n\n    const middleLeft = (wrap = false): CSSObject => {\n        return {\n            display: \"flex\" as DisplayProperty,\n            alignItems: \"center\" as AlignItemsProperty,\n            justifyContent: \"flex-start\" as JustifyContentProperty,\n            flexWrap: wrap ? \"wrap\" : (\"nowrap\" as FlexWrapProperty),\n        };\n    };\n\n    return { middle, middleLeft };\n}\n\nexport function fullSizeOfParent(): CSSObject {\n    return {\n        position: \"absolute\",\n        display: \"block\",\n        top: px(0),\n        left: px(0),\n        width: percent(100),\n        height: percent(100),\n    };\n}\n\nexport const inheritHeightClass = useThemeCache(() => {\n    const style = styleFactory(\"inheritHeight\");\n    return style({\n        display: \"flex\",\n        flexDirection: \"column\",\n        flexGrow: 1,\n        position: \"relative\",\n    });\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { SelectOption } from \"@library/forms/select/overwrites\";\nimport { ICrumb } from \"@library/navigation/Breadcrumbs\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport BreadCrumbString from \"@library/navigation/BreadCrumbString\";\nimport { IComboBoxOption } from \"@library/features/search/SearchBar\";\nimport { metasClasses } from \"@library/styles/metasStyles\";\nimport DateTime from \"@library/content/DateTime\";\nimport classNames from \"classnames\";\nimport { OptionProps } from \"react-select/lib/components/Option\";\nimport { PlacesSearchListingItem } from \"@library/search/PlacesSearchListingContainer\";\nimport { searchBarClasses } from \"@library/features/search/searchBarStyles\";\n\nexport interface ISearchOptionData {\n    crumbs: ICrumb[];\n    name: string;\n    dateUpdated: string;\n    labels?: string[];\n    url: string;\n    type?: string;\n    isFirst?: boolean;\n}\n\ninterface IProps extends OptionProps<ISearchOptionData> {\n    data: IComboBoxOption<ISearchOptionData>;\n}\n\n/**\n */\nexport default function SearchOption(props: IProps) {\n    const { innerProps, isSelected, isFocused } = props;\n    const data = props.data.data;\n\n    if (data) {\n        const label = props.label;\n        const m = label.match(/places___(.+)___/);\n        let placesListingLabel;\n        if (m) {\n            placesListingLabel = m[1];\n        }\n\n        const { dateUpdated, crumbs, url, labels } = data;\n        const hasLocationData = crumbs && crumbs.length > 0;\n        const classesMetas = metasClasses();\n\n        return m ? (\n            <>\n                {data.isFirst && <div className={searchBarClasses().firstItemBorderTop}></div>}\n                <PlacesSearchListingItem\n                    className={classNames(\"suggestedTextInput-item\", { [`${classesMetas.inlineBlock}`]: true })}\n                    embedLinkClassName={classNames(\"suggestedTextInput-option\", {\n                        isSelected,\n                        isFocused,\n                    })}\n                    name={placesListingLabel}\n                    type={data.type}\n                    url={data.url}\n                />\n            </>\n        ) : (\n            <li className=\"suggestedTextInput-item\">\n                <SmartLink\n                    {...(innerProps as any)}\n                    // We want to use the SmarkLink clickHandler, not the innerProps one from the SearchBar.\n                    // The innerProps click handler will trigger a search event (goes to search page).\n                    // The SmartLink will navigate to the result itself.\n                    onClick={undefined}\n                    to={url}\n                    title={label}\n                    aria-label={label}\n                    className={classNames(\"suggestedTextInput-option\", {\n                        isSelected,\n                        isFocused,\n                    })}\n                >\n                    <span className=\"suggestedTextInput-head\">\n                        <span className=\"suggestedTextInput-title\">{props.children}</span>\n                    </span>\n                    <span className=\"suggestedTextInput-main\">\n                        <span className={classNames(\"isFlexed\", classesMetas.root)}>\n                            {labels &&\n                                labels.map((label) => (\n                                    <span key={label} className={classesMetas.metaLabel}>\n                                        {label}\n                                    </span>\n                                ))}\n                            {dateUpdated && (\n                                <span className={classesMetas.meta}>\n                                    <DateTime className={classesMetas.meta} timestamp={dateUpdated} />\n                                </span>\n                            )}\n                            {hasLocationData && <BreadCrumbString className={classesMetas.meta} crumbs={crumbs} />}\n                        </span>\n                    </span>\n                </SmartLink>\n            </li>\n        );\n    } else {\n        return <SelectOption {...props} value={props.data.value} />;\n    }\n}\n","/*\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useEffect, FC } from \"react\";\n\ninterface IProps {\n    data?: object;\n    uniqueKey: string | number; // A new analytics event is only fired when this changes.\n}\n\nlet legacyAnalyticsTickEnabled = false;\n\nexport function enableLegacyAnalyticsTick(newValue: boolean) {\n    legacyAnalyticsTickEnabled = newValue;\n}\n\nexport function isLegacyAnalyticsTickEnabled() {\n    return legacyAnalyticsTickEnabled;\n}\n\n/**\n * A component to trigger an analytics event. The unique key must change between renders for a new event to fire.\n */\nexport const AnalyticsData: FC<IProps> = (props: IProps) => {\n    const { data, uniqueKey } = props;\n\n    useEffect(() => {\n        document.dispatchEvent(new CustomEvent(\"pageViewWithContext\", { detail: data }));\n        // Setting data here will cause the analytics event to fired far to often.\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [uniqueKey]);\n    return <>{null}</>;\n};\n\nexport const onPageViewWithContext = (callback: EventListenerOrEventListenerObject) => {\n    document.addEventListener(\"pageViewWithContext\", callback);\n};\n","import SelectBox, { ISelectBoxItem, ISelectBoxProps } from \"@library/forms/select/SelectBox\";\nimport React, { useState } from \"react\";\nimport classNames from \"classnames\";\nimport { ISearchBarOverwrites, searchBarClasses } from \"@library/features/search/searchBarStyles\";\nimport { t } from \"@vanilla/i18n/src\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { useUniqueID } from \"@library/utility/idUtils\";\nimport ScreenReaderContent from \"@library/layout/ScreenReaderContent\";\nimport { SearchIcon } from \"@library/icons/titleBar\";\nimport { useDevice, Devices } from \"@library/layout/DeviceContext\";\n\nexport function SearchScope(props: {\n    className?: string;\n    selectBoxProps: Omit<ISelectBoxProps, \"describedBy\">;\n    separator?: React.ReactNode; // add a separator between drop down and right side\n    compact?: boolean; // render compact version\n    overwriteSearchBar?: ISearchBarOverwrites;\n}) {\n    const { className, selectBoxProps, separator, overwriteSearchBar } = props;\n    const device = useDevice();\n    const compact = props.compact ?? [Devices.XS, Devices.MOBILE].includes(device);\n    const classes = searchBarClasses(overwriteSearchBar);\n    const labelID = useUniqueID(\"searchIn\");\n\n    return (\n        <div\n            className={classNames(classes.scope, className, {\n                isCompact: compact,\n            })}\n        >\n            <ScreenReaderContent>\n                <span id={labelID}>{t(\"Search In\")}</span>\n            </ScreenReaderContent>\n            <SelectBox\n                {...selectBoxProps}\n                className={classes.scopeSelect}\n                verticalPadding={false}\n                buttonBaseClass={ButtonTypes.CUSTOM}\n                buttonClassName={classes.scopeToggle}\n                describedBy={labelID}\n                renderLeft={false}\n                labelWrap={classes.scopeLabelWrap}\n                horizontalOffset={false}\n                afterButton={separator}\n                // The intention here is by default, we'll get the compact value from the layout context if undefined, or a value from props.\n                overwriteButtonContents={compact ? <SearchIcon className={classes.compactIcon} /> : undefined}\n            />\n        </div>\n    );\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { t } from \"@library/utility/appUtils\";\nimport Button from \"@library/forms/Button\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport classNames from \"classnames\";\nimport { ClearIcon } from \"@library/icons/common\";\n\ninterface IProps {\n    onClick: (event: React.SyntheticEvent) => void;\n    className?: string;\n}\n\n/**\n * Overwrite for the ClearIndicator component in React Select\n */\nexport function ClearButton(props: IProps) {\n    return (\n        <Button\n            baseClass={ButtonTypes.ICON}\n            className={classNames(\"suggestedTextInput-clear\", \"searchBar-clear\", props.className)}\n            onClick={props.onClick}\n            title={t(\"Clear\")}\n            aria-label={t(\"Clear\")}\n        >\n            <ClearIcon />\n        </Button>\n    );\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport Translate from \"@library/content/Translate\";\nimport { IComboBoxOption, ISearchBarProps } from \"@library/features/search/ISearchBarProps\";\nimport { ISearchBarOverwrites, searchBarClasses } from \"@library/features/search/searchBarStyles\";\nimport { searchBarVariables } from \"@library/features/search/SearchBar.variables\";\nimport { SearchScope } from \"@library/features/search/SearchScope\";\nimport Button from \"@library/forms/Button\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { ClearButton } from \"@library/forms/select/ClearButton\";\nimport * as selectOverrides from \"@library/forms/select/overwrites\";\nimport { SearchIcon } from \"@library/icons/titleBar\";\nimport ConditionalWrap from \"@library/layout/ConditionalWrap\";\nimport Heading from \"@library/layout/Heading\";\nimport ButtonLoader from \"@library/loaders/ButtonLoader\";\nimport { useLinkContext } from \"@library/routing/links/LinkContextProvider\";\nimport { visibility } from \"@library/styles/styleHelpersVisibility\";\nimport { t } from \"@library/utility/appUtils\";\nimport { useUniqueID, uniqueIDFromPrefix } from \"@library/utility/idUtils\";\nimport classNames from \"classnames\";\nimport React, { useEffect, useRef, useState, useCallback, useMemo } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { AsyncCreatable, components } from \"react-select\";\nimport { MenuProps } from \"react-select/lib/components/Menu\";\nimport { ActionMeta, InputActionMeta } from \"react-select/lib/types\";\nimport { useSearchScope } from \"@library/features/search/SearchScopeContext\";\nimport { PLACES_CATEGORY_TYPE, PLACES_KNOWLEDGE_BASE_TYPE, PLACES_GROUP_TYPE } from \"@library/search/searchConstants\";\n\n// Re-exported after being moved.\nexport { IComboBoxOption };\n\nexport default React.forwardRef(function SearchBar(\n    props: ISearchBarProps,\n    incomingRef: React.MutableRefObject<AsyncCreatable<any>>,\n) {\n    const { pushSmartLocation } = useLinkContext();\n    props = {\n        disabled: false,\n        noHeading: false,\n        isLoading: false,\n        optionComponent: selectOverrides.SelectOption,\n        triggerSearchOnClear: false,\n        disableAutocomplete: false,\n        placeholder: \"\",\n        ...props,\n    };\n\n    const [isFocused, setFocused] = useState(false);\n    const prefix = \"searchBar\";\n    const ownID = useUniqueID(prefix);\n    const id = props.id ?? ownID;\n    const searchButtonID = id + \"-searchButton\";\n    const searchInputID = id + \"-searchInput\";\n    const ownRef = useRef<AsyncCreatable<any> | null>(null);\n    const inputRef = incomingRef ?? ownRef;\n\n    const [forceMenuClosed, setForceMenuClosed] = useState(false);\n    const { onSearch, onChange, disableAutocomplete, optionComponent, resultsRef } = props;\n\n    /**\n     * Handle changes in the select's text input.\n     *\n     * Ignores change caused by blurring or closing the menu. These normally clear the input.\n     */\n    const handleInputChange = useCallback(\n        (value: string, reason: InputActionMeta) => {\n            if (![\"input-blur\", \"menu-close\"].includes(reason.action)) {\n                onChange(value);\n                setForceMenuClosed(false);\n            }\n        },\n        [onChange, setForceMenuClosed],\n    );\n\n    /**\n     * Handle changes in option.\n     *\n     * - Update the input value.\n     * - Force the menu closed.\n     * - Trigger a search.\n     */\n    const handleOptionChange = useCallback(\n        (option: IComboBoxOption, actionMeta: ActionMeta) => {\n            if (option) {\n                if (disableAutocomplete) {\n                    onChange(option.label);\n                    onSearch();\n                } else {\n                    const data = option.data || {};\n                    const { url } = data;\n\n                    if (actionMeta.action === \"select-option\" && url) {\n                        pushSmartLocation(url);\n                    } else if (actionMeta.action === \"create-option\") {\n                        onSearch();\n                    } else {\n                        onChange(option.label);\n                        if (disableAutocomplete) {\n                            onSearch();\n                        } else {\n                            setForceMenuClosed(true);\n                        }\n                    }\n                }\n            }\n        },\n        [disableAutocomplete, onChange, onSearch, setForceMenuClosed, pushSmartLocation],\n    );\n\n    /**\n     * Determine if we should show the menu or not.\n     *\n     * - Menu can be forced closed through state.\n     * - Having no value in the input keeps the search closed.\n     * - Otherwise falls back to what is determined by react-select.\n     */\n    const isMenuVisible: boolean | undefined =\n        forceMenuClosed || props.value.length === 0 || props.disableAutocomplete ? false : undefined;\n\n    const classes = searchBarClasses(props.overwriteSearchBar);\n\n    // Stash the props in a a ref so the inner components can use the latest value, but still have a stable identity.\n    const controlProps = {\n        ...props,\n        isFocused,\n        focusInput: () => {\n            inputRef.current?.focus();\n        },\n        searchButtonID,\n        searchInputID,\n    };\n    const controlPropsRef = useRef<IControlProps>(controlProps);\n    useEffect(() => {\n        controlPropsRef.current = controlProps;\n        inputRef.current?.forceUpdate();\n    });\n\n    // Make sure these are have a stable identity.\n    const components = useMemo(() => {\n        return {\n            // Use our custom searchbar UI.\n            Control: function ControlWrapper(innerProps: any) {\n                return <SearchBarControl {...innerProps} {...controlPropsRef.current} />;\n            },\n            IndicatorSeparator: selectOverrides.NullComponent,\n\n            // If we are provided with a custom spot to mount the menu, mount it there instead.\n            Menu: resultsRef\n                ? function MenuWrapper(menuProps: any) {\n                      return <SearchBarMenuPortal {...menuProps} mountRef={resultsRef!} />;\n                  }\n                : selectOverrides.Menu,\n            MenuList: selectOverrides.MenuList,\n            Option: optionComponent!,\n            NoOptionsMessage: selectOverrides.NoOptionsMessage,\n            ClearIndicator: selectOverrides.NullComponent,\n            DropdownIndicator: selectOverrides.NullComponent,\n            LoadingMessage: selectOverrides.OptionLoader,\n        };\n    }, [optionComponent, resultsRef]);\n\n    const [options, setOptions] = useState<any[]>([]);\n\n    const menuIsOpen = (props.resultsRef?.current && props.forceMenuOpen) || isMenuVisible;\n\n    return (\n        <AsyncCreatable\n            id={id}\n            value={undefined}\n            onChange={handleOptionChange}\n            closeMenuOnSelect={false}\n            inputId={searchInputID}\n            inputValue={props.value}\n            onInputChange={handleInputChange}\n            components={components}\n            isClearable={false}\n            blurInputOnSelect={false}\n            allowCreateWhileLoading={true}\n            controlShouldRenderValue={false}\n            isDisabled={props.disabled}\n            isValidNewOption={() => true}\n            cached={true}\n            loadOptions={() => {\n                return props.loadOptions?.(props.value).then((results) => {\n                    // We want items belonging to group, category, and kb types to be on top\n                    // of the list (inline elements), but we cannot simply copy over, since\n                    // react-select use label to identify the items, and so there will be\n                    // double hover, double listing etc. behavior.\n                    const placesListingResults = results\n                        .filter((result) =>\n                            [PLACES_GROUP_TYPE, PLACES_CATEGORY_TYPE, PLACES_KNOWLEDGE_BASE_TYPE].includes(result.type),\n                        )\n                        .map((result) => ({ ...result, label: `places___${result.label}___` }));\n\n                    if (placesListingResults[0]) {\n                        placesListingResults[0].data.isFirst = true;\n                    }\n\n                    const result = [...placesListingResults, ...results];\n\n                    setOptions(result);\n                    return result;\n                });\n            }}\n            defaultOptions={props.forcedOptions}\n            menuIsOpen={menuIsOpen}\n            classNamePrefix={prefix}\n            className={classNames(classes.wrap, props.className)}\n            placeholder={props.placeholder ?? t(\"Search\")}\n            aria-label={t(\"Search\")}\n            escapeClearsValue={true}\n            pageSize={20}\n            theme={getReactSelectTheme}\n            styles={reactSelectCustomStyles}\n            backspaceRemovesValue={true}\n            createOptionPosition=\"first\"\n            formatCreateLabel={formatReactSelectLabel}\n            ref={inputRef}\n            onKeyDown={\n                props.handleOnKeyDown ??\n                ((event: React.KeyboardEvent<HTMLInputElement>) => {\n                    if (!isFocused) {\n                        return;\n                    }\n\n                    const { target } = event;\n                    if (!(target instanceof HTMLInputElement)) {\n                        return;\n                    }\n\n                    if (event.key === \"Enter\") {\n                        return true; // submits form\n                    } else if (event.key === \"Home\") {\n                        if (options.length === 0) {\n                            event.preventDefault();\n                            target.setSelectionRange(0, 0);\n                            setForceMenuClosed(true);\n                            return;\n                        }\n                    } else if (event.key === \"End\") {\n                        if (options.length === 0) {\n                            event.preventDefault();\n                            const length = target.value.length;\n                            target.setSelectionRange(length, length);\n                            return;\n                        }\n                    }\n                    setForceMenuClosed(false);\n                    return;\n                })\n            }\n            onMenuOpen={props.onOpenSuggestions}\n            onMenuClose={props.onCloseSuggestions}\n            onFocus={() => setFocused(true)}\n            onBlur={() => setFocused(false)}\n            iconContainerClasses={props.iconContainerClasses}\n            resultsAsModalClasses={props.resultsAsModalClasses}\n        />\n    );\n});\n\nfunction getReactSelectTheme(theme: any) {\n    return {\n        ...theme,\n        borderRadius: {},\n        colors: {},\n        spacing: {},\n    };\n}\n\nconst reactSelectCustomStyles = {\n    option: (provided: React.CSSProperties) => ({\n        ...provided,\n    }),\n    menu: (provided: React.CSSProperties) => {\n        return { ...provided, backgroundColor: undefined, boxShadow: undefined };\n    },\n    menuList: (provided: React.CSSProperties) => {\n        return { ...provided, maxHeight: undefined };\n    },\n    control: (provided: React.CSSProperties) => ({\n        ...provided,\n        borderWidth: 0,\n    }),\n};\n\n/**\n * Create a label for React Select's \"Add option\" option.\n */\nconst formatReactSelectLabel = (inputValue: string) => {\n    return (\n        <span className=\"suggestedTextInput-searchingFor\">\n            <Translate source=\"Search for <0/>\" c0={<strong>{inputValue}</strong>} />\n        </span>\n    );\n};\n\n/**\n * Portal wrapper around the search bar menu.\n */\nfunction SearchBarMenuPortal(\n    props: MenuProps<any> & { mountRef: React.RefObject<HTMLDivElement> },\n    overwriteSearchBar: ISearchBarOverwrites,\n) {\n    const classes = searchBarClasses(overwriteSearchBar);\n    const { mountRef } = props;\n    if (mountRef.current == null) {\n        return null;\n    }\n\n    return ReactDOM.createPortal(\n        <components.Menu\n            {...props}\n            className={classNames(\n                \"suggestedTextInput-menu\",\n                \"dropDown-contents\",\n                \"isParentWidth\",\n                classes.menu,\n                classes.results,\n            )}\n        />,\n        mountRef.current,\n    );\n}\n\ninterface IControlProps extends ISearchBarProps {\n    isFocused: boolean;\n    focusInput: () => void;\n    searchButtonID: string;\n    searchInputID: string;\n}\n\n/**\n * Control component for inside of react select (primary visual searchbox).\n */\nfunction SearchBarControl(props: IControlProps) {\n    const contextScope = useSearchScope();\n    const searchBarVars = searchBarVariables();\n    const scope = {\n        ...contextScope,\n        ...props.scope,\n    };\n    const { hideSearchButton, overwriteSearchBar, isFocused, focusInput, searchButtonID, searchInputID } = props;\n    const { optionsItems = [], value, onChange } = scope;\n    const hasScope = scope.optionsItems.length > 1;\n    const searchButtonIsVisible = !hasScope ? !hideSearchButton : false;\n    const { compact = false, borderRadius = searchBarVars.border.radius, preset = searchBarVars.options.preset } =\n        overwriteSearchBar || {};\n\n    // In case we'll need to use ID\n    const ID = useMemo(() => uniqueIDFromPrefix(\"search\"), []);\n    const buttonID = ID + \"-button\";\n\n    const classes = searchBarClasses({\n        borderRadius,\n        compact,\n        preset,\n    });\n    const [isHovered, setHovered] = useState(false);\n\n    const clearInput = (event: React.SyntheticEvent) => {\n        event.preventDefault();\n        props.onChange(\"\");\n        if (props.triggerSearchOnClear) {\n            props.onSearch();\n        }\n        focusInput();\n    };\n\n    /**\n     * Handle the form submission.\n     */\n    const onFormSubmit = (event: React.FormEvent) => {\n        event.preventDefault();\n        props.onSearch();\n    };\n\n    return (\n        <form className={classNames(classes.form, classes.root)} onSubmit={onFormSubmit}>\n            {props.needsPageTitle && (\n                <Heading\n                    depth={1}\n                    className={classNames(\"searchBar-heading\", classes.heading, {\n                        [visibility().visuallyHidden]: props.noHeading,\n                    })}\n                    title={props.title || t(\"Search\")}\n                >\n                    <label className={classNames(\"searchBar-label\", classes.label)} htmlFor={searchInputID}>\n                        {props.titleAsComponent ? props.titleAsComponent : props.title}\n                    </label>\n                </Heading>\n            )}\n            <div\n                onClick={focusInput}\n                className={classNames(classes.content, props.contentClass, {\n                    hasFocus: isFocused,\n                    withoutScope: !hasScope,\n                    withScope: hasScope,\n                    withButton: searchButtonIsVisible,\n                    withoutButton: !searchButtonIsVisible,\n                })}\n                role=\"search\"\n            >\n                {!(compact && hasScope) && (\n                    <Button\n                        baseClass={ButtonTypes.CUSTOM}\n                        onClick={() => {\n                            focusInput();\n                            props.onSearch();\n                        }}\n                        className={classes.iconContainer(hasScope)}\n                        ariaLabel={t(\"Search\")}\n                        tabIndex={-1}\n                        title={t(\"Search\")}\n                    >\n                        <SearchIcon aria-hidden={true} className={classNames(\"searchBar-icon\", classes.icon)} />\n                    </Button>\n                )}\n                {hasScope && (\n                    <SearchScope\n                        selectBoxProps={{ options: optionsItems, value: value, onChange: onChange }}\n                        compact={compact}\n                        overwriteSearchBar={overwriteSearchBar}\n                        separator={!isHovered ? <div className={classes.scopeSeparator} role=\"decoration\" /> : null}\n                    />\n                )}\n                <div\n                    onMouseEnter={() => setHovered(true)}\n                    onMouseLeave={() => setHovered(false)}\n                    className={classNames(classes.main, {\n                        [\"focus-visible\"]: isFocused, // Note that the plugin we use for keyboard focus can't tell the difference between a mouse and a keyboard focus for text inputs\n                        isFocused,\n                        isHovered,\n                        withoutScope: !hasScope,\n                        withScope: hasScope,\n                        withButton: searchButtonIsVisible,\n                        withoutButton: !searchButtonIsVisible,\n                    })}\n                >\n                    <div\n                        aria-labelledby={buttonID}\n                        className={classNames(\n                            \"suggestedTextInput-inputText\",\n                            \"inputText\",\n                            \"isClearable\",\n                            \"searchBar-valueContainer\", // intentionally hard coded class name\n                            classes.valueContainer,\n                            props.valueContainerClasses,\n                            {\n                                [\"focus-visible\"]: isFocused, // Note that the plugin we use for keyboard focus can't tell the difference between a mouse and a keyboard focus for text inputs\n                                isFocused,\n                                isHovered,\n                                [classes.compoundValueContainer]: searchButtonIsVisible,\n                                withoutScope: !hasScope,\n                                withScope: hasScope,\n                                withButton: searchButtonIsVisible,\n                                withoutButton: !searchButtonIsVisible,\n                                compactScope: hasScope && compact,\n                            },\n                        )}\n                    >\n                        <components.Control {...(props as any)} />\n                        {props.value && (\n                            <ClearButton\n                                onClick={clearInput}\n                                className={classNames(classes.clear, props.clearButtonClass)}\n                            />\n                        )}\n                    </div>\n                </div>\n            </div>\n            <ConditionalWrap condition={!searchButtonIsVisible} className={visibility().visuallyHidden}>\n                <Button\n                    submit={true}\n                    id={searchButtonID}\n                    baseClass={props.buttonBaseClass}\n                    className={classNames(\"searchBar-submitButton\", props.buttonClassName ?? classes.actionButton)}\n                    tabIndex={!searchButtonIsVisible ? 0 : -1}\n                >\n                    {props.isLoading ? (\n                        <ButtonLoader className={props.buttonLoaderClassName} buttonType={props.buttonBaseClass} />\n                    ) : (\n                        props.buttonText || t(\"Search\")\n                    )}\n                </Button>\n            </ConditionalWrap>\n        </form>\n    );\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { makeProfileUrl } from \"../utility/appUtils\";\nimport classNames from \"classnames\";\nimport { UserCardModuleLazyLoad } from \"@library/features/users/modules/UserCardModuleLazyLoad\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { hasPermission } from \"@library/features/users/Permission\";\n\ninterface IProps {\n    username: string;\n    userID: number;\n    className?: string;\n    children?: React.ReactNode;\n    isUserCard?: boolean;\n    cardAsModal?: boolean;\n    buttonType?: ButtonTypes;\n}\n\n/**\n * Class representing a link to a users profile. This will do a full page refresh.\n */\nexport default function ProfileLink(props: IProps) {\n    const { username, isUserCard = true, cardAsModal } = props;\n    const children = props.children || username;\n    const profileURL = makeProfileUrl(username);\n    if (isUserCard && hasPermission(\"profiles.view\")) {\n        return (\n            <UserCardModuleLazyLoad\n                buttonType={props.buttonType}\n                buttonContent={children}\n                openAsModal={cardAsModal}\n                userID={props.userID}\n                buttonClass={props.className}\n                userURL={profileURL}\n            />\n        );\n    } else {\n        return (\n            <a href={profileURL} className={classNames(props.className)}>\n                {children}\n            </a>\n        );\n    }\n}\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license Proprietary\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { IUserFragment } from \"@library/@types/api/users\";\nimport { capitalizeFirstLetter } from \"@vanilla/utils\";\nimport { t } from \"@library/utility/appUtils\";\nimport { PublishStatus } from \"@library/@types/api/core\";\nimport BreadCrumbString, { ICrumbString } from \"@library/navigation/BreadCrumbString\";\nimport { metasClasses } from \"@library/styles/metasStyles\";\nimport Translate from \"@library/content/Translate\";\nimport DateTime from \"@library/content/DateTime\";\nimport ProfileLink from \"@library/navigation/ProfileLink\";\nimport { ExternalIcon } from \"@library/icons/common\";\nimport { ICountResult } from \"@library/search/searchTypes\";\nimport NumberFormatted from \"@library/content/NumberFormatted\";\n\ninterface IProps {\n    updateUser?: IUserFragment;\n    dateUpdated?: string;\n    crumbs?: ICrumbString[];\n    labels?: string[];\n    status?: PublishStatus;\n    type?: string;\n    isForeign?: boolean;\n    counts?: ICountResult[];\n    extra?: React.ReactNode;\n}\n\nexport function ResultMeta(props: IProps) {\n    const { dateUpdated, updateUser, labels, crumbs, status, type, isForeign, counts, extra } = props;\n    const isDeleted = status === PublishStatus.DELETED;\n    const classesMetas = metasClasses();\n\n    const typeMeta =\n        type && updateUser?.userID != null ? (\n            <Translate\n                source=\"<0/> by <1/>\"\n                c0={type ? t(capitalizeFirstLetter(type)) : undefined}\n                c1={<ProfileLink className={classesMetas.meta} username={updateUser.name} userID={updateUser.userID} />}\n            />\n        ) : type ? (\n            t(capitalizeFirstLetter(type))\n        ) : null;\n\n    const countMeta =\n        counts &&\n        counts.length > 0 &&\n        counts.map((item, i) => {\n            let { count, labelCode } = item;\n            // labelCode returned from backend is always in plural, e.g. groups, sub-categories\n            if (count < 2 && count !== 0) {\n                const p = /ies|s$/;\n                const m = labelCode.match(p);\n                labelCode = labelCode.replace(p, m && m[0] === \"ies\" ? \"y\" : \"\");\n            }\n            return (\n                <span className={classesMetas.meta} key={i}>\n                    <Translate source={`<0/> ${labelCode}`} c0={<NumberFormatted value={count} />} />\n                </span>\n            );\n        });\n\n    return (\n        <React.Fragment>\n            {labels &&\n                labels.map((label) => (\n                    <span className={classesMetas.metaLabel} key={label}>\n                        {t(label)}\n                    </span>\n                ))}\n\n            {typeMeta && (\n                <span className={classNames(classesMetas.meta)}>\n                    {isDeleted ? (\n                        <span className={classNames(\"meta-inline\", \"isDeleted\")}>\n                            <Translate source=\"Deleted <0/>\" c0={type} />\n                        </span>\n                    ) : (\n                        typeMeta\n                    )}\n                </span>\n            )}\n\n            {isForeign && (\n                <span className={classesMetas.metaIcon}>\n                    <ExternalIcon />\n                </span>\n            )}\n\n            {dateUpdated && (\n                <span className={classesMetas.meta}>\n                    <Translate source=\"Last Updated: <0/>\" c0={<DateTime timestamp={dateUpdated} />} />\n                </span>\n            )}\n            {countMeta}\n            {crumbs && crumbs.length > 0 && <BreadCrumbString className={classesMetas.meta} crumbs={crumbs} />}\n            {extra}\n        </React.Fragment>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { t } from \"@library/utility/appUtils\";\n\ninterface IHumanFileSize {\n    amount: number;\n    unit: string;\n    unitAbbr: string;\n}\n\nenum FileSizeUnit {\n    B = \"B\",\n    KB = \"KB\",\n    MB = \"MB\",\n    GB = \"GB\",\n    TB = \"TB\",\n}\n\n/**\n * Parse a number of bytes into pieces of a human readable file size.\n *\n * @param size File size in bytes\n */\nexport function humanFileSize(size: number): IHumanFileSize {\n    const i: number = Math.floor(Math.log(size) / Math.log(1024));\n    const unitAbbr = Object.values(FileSizeUnit)[i];\n\n    const fullValue: number = size / Math.pow(1024, i);\n    // 2 digits\n    const value = Number.parseFloat(fullValue.toFixed(2));\n    const unit = getUnabbreviatedFileSizeUnit(unitAbbr);\n    return {\n        amount: value,\n        unit,\n        unitAbbr,\n    };\n}\n\n/**\n * Component for rendering the results of `humanFileSize`.\n */\nexport function HumanFileSize(props: { numBytes: number }) {\n    const humanSize = humanFileSize(props.numBytes);\n    return (\n        <>\n            {humanSize.amount}\n            <abbr title={humanSize.unit}>{` ${humanSize.unitAbbr}`}</abbr>\n        </>\n    );\n}\n\n/**\n * Convert from FileSizeUnit to the unabbreviated version.\n *\n * @param unit The unit to translate.\n */\nfunction getUnabbreviatedFileSizeUnit(unit: FileSizeUnit): string {\n    switch (unit) {\n        case FileSizeUnit.B:\n            return t(\"Byte\");\n        case FileSizeUnit.KB:\n            return t(\"Kilobyte\");\n        case FileSizeUnit.MB:\n            return t(\"Megabyte\");\n        case FileSizeUnit.GB:\n            return t(\"Gigabyte\");\n        case FileSizeUnit.TB:\n            return t(\"Terabyte\");\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport NotificationsActions from \"@library/features/notifications/NotificationsActions\";\nimport ReduxReducer from \"@library/redux/ReduxReducer\";\nimport produce from \"immer\";\nimport { ILoadable, LoadStatus } from \"@library/@types/api/core\";\nimport { INotification } from \"@library/@types/api/notifications\";\n\ninterface INotificationsState {\n    notificationsByID: ILoadable<{ [key: number]: INotification }>;\n}\n\nexport interface INotificationsStoreState {\n    notifications: INotificationsState;\n}\n\nexport interface IWithNotifications extends INotificationsState {}\n\n/**\n * Manage notification state in Redux.\n */\nexport default class NotificationsModel implements ReduxReducer<INotificationsState> {\n    public readonly initialState: INotificationsState = {\n        notificationsByID: {\n            data: {},\n            status: LoadStatus.PENDING,\n        },\n    };\n\n    /**\n     * Update the notifications state, based on the dispatched action.\n     *\n     * @param state Previous state of the store.\n     * @param action Name for the type of action that was dispatched.\n     */\n    public reducer = (\n        state: INotificationsState = this.initialState,\n        action: typeof NotificationsActions.ACTION_TYPES,\n    ): INotificationsState => {\n        return produce(state, (nextState) => {\n            switch (action.type) {\n                case NotificationsActions.GET_NOTIFICATIONS_REQUEST:\n                    nextState.notificationsByID.status = LoadStatus.LOADING;\n                    break;\n                case NotificationsActions.GET_NOTIFICATIONS_RESPONSE: {\n                    nextState.notificationsByID.status = LoadStatus.SUCCESS;\n                    nextState.notificationsByID.data = {};\n                    const notifications = action.payload.data as INotification[];\n                    notifications.forEach((notification) => {\n                        nextState.notificationsByID.data![notification.notificationID] = notification;\n                    });\n                    break;\n                }\n                case NotificationsActions.GET_NOTIFICATIONS_ERROR:\n                    nextState.notificationsByID.status = LoadStatus.ERROR;\n                    nextState.notificationsByID.error = action.payload;\n                    break;\n                case NotificationsActions.MARK_ALL_READ_RESPONSE: {\n                    const { data } = nextState.notificationsByID;\n                    if (data) {\n                        for (const id of Object.keys(data)) {\n                            (data[id] as INotification).read = true;\n                        }\n                    }\n                    break;\n                }\n            }\n        });\n    };\n}\n","import { CSSObject } from \"@emotion/css\";\nimport {\n    IThreeColumnLayoutMediaQueries,\n    IThreeColumnLayoutMediaQueryStyles,\n} from \"@library/layout/types/interface.threeColumns\";\nimport {\n    ITwoColumnLayoutMediaQueries,\n    ITwoColumnLayoutMediaQueryStyles,\n    twoColumnLayoutDevices,\n} from \"@library/layout/types/interface.twoColumns\";\nimport { LayoutTypes } from \"@library/layout/types/interface.layoutTypes\";\n\nexport enum fallbackLayoutVariables {\n    XS = \"xs\",\n    MOBILE = \"mobile\",\n    TABLET = \"tablet\",\n    DESKTOP = \"desktop\",\n    NO_BLEED = \"no_bleed\", // Not enough space for back link which goes outside the margin.\n}\n\nexport interface IPanelLayoutMediaQueryStyles {\n    noBleed?: CSSObject;\n    noBleedDown?: CSSObject;\n    oneColumn?: CSSObject;\n    oneColumnDown?: CSSObject;\n    aboveOneColumn?: CSSObject;\n    twoColumns?: CSSObject;\n    twoColumnsDown?: CSSObject;\n    xs?: CSSObject;\n}\n\nexport interface IPanelLayoutMediaQueries {\n    noBleed: (styles: CSSObject) => CSSObject;\n    oneColumn: (styles: CSSObject) => CSSObject;\n    oneColumnDown: (styles: CSSObject) => CSSObject;\n    aboveOneColumn: (styles: CSSObject) => CSSObject;\n    twoColumns: (styles: CSSObject) => CSSObject;\n    twoColumnsDown: (styles: CSSObject) => CSSObject;\n    noBleedDown: (styles: CSSObject) => CSSObject;\n    xs: (styles: CSSObject) => CSSObject;\n}\n\nexport type IAllMediaQueries = IThreeColumnLayoutMediaQueries | ITwoColumnLayoutMediaQueries | IPanelLayoutMediaQueries;\n\nexport interface IPanelLayoutVariables {\n    type: string;\n    Devices: any;\n    colors?: any;\n    foundationalWidths: any;\n    gutter: any;\n    panel: any;\n    middleColumn: any;\n    contentWidth: number;\n    mediaQueries: () => IAllMediaQueries;\n    isFullWidth: (currentDevice) => boolean;\n    isCompact: (currentDevice) => boolean;\n    panelLayoutSpacing: any;\n    breakPoints: any;\n    calculateDevice: () => string;\n    rightPanelCondition?: (currentDevice, shouldRenderLeftPanel) => boolean;\n}\n\nexport interface IAllLayoutMediaQueries {\n    [LayoutTypes.TWO_COLUMNS]?: ITwoColumnLayoutMediaQueryStyles;\n    [LayoutTypes.THREE_COLUMNS]?: IThreeColumnLayoutMediaQueryStyles;\n}\n\nexport type ILayoutMediaQueryFunction = (styles: IAllLayoutMediaQueries) => CSSObject;\n\nexport type IAllLayoutDevices = twoColumnLayoutDevices | fallbackLayoutVariables;\n\nexport type IAllMediaQueriesForLayouts = ITwoColumnLayoutMediaQueries | IThreeColumnLayoutMediaQueries | {};\n\nexport type IMediaQueryFunction = (mediaQueriesForAllLayouts: IAllLayoutMediaQueries) => CSSObject;\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { ReactNode } from \"react\";\nimport ErrorMessages from \"@library/forms/ErrorMessages\";\nimport { getRequiredID, IOptionalComponentID } from \"@library/utility/idUtils\";\nimport classNames from \"classnames\";\nimport Paragraph from \"@library/layout/Paragraph\";\nimport { inputBlockClasses } from \"@library/forms/InputBlockStyles\";\nimport { IError } from \"@library/errorPages/CoreErrorMessages\";\n\nexport enum InputTextBlockBaseClass {\n    STANDARD = \"inputBlock\",\n    CUSTOM = \"\",\n}\n\ninterface ICallbackProps {\n    labelID: string;\n    hasErrors: boolean;\n    errorID: string;\n}\ntype CallbackChildren = (props: ICallbackProps) => React.ReactNode;\n\nexport interface IInputBlockProps extends IOptionalComponentID {\n    label?: ReactNode;\n    legend?: boolean;\n    children: React.ReactNode | CallbackChildren;\n    className?: string;\n    wrapClassName?: string;\n    labelClassName?: string;\n    noteAfterInput?: string;\n    labelNote?: string;\n    labelID?: string;\n    descriptionID?: string;\n    errors?: IError[];\n    baseClass?: InputTextBlockBaseClass;\n    legacyMode?: boolean;\n    noMargin?: boolean;\n    grid?: boolean;\n    tight?: boolean;\n}\n\ninterface IState {\n    id: string;\n}\n\nexport default class InputBlock extends React.Component<IInputBlockProps, IState> {\n    public static defaultProps = {\n        errors: [],\n        baseClass: InputTextBlockBaseClass.STANDARD,\n    };\n\n    public constructor(props: IInputBlockProps) {\n        super(props);\n        this.state = {\n            id: getRequiredID(props, \"inputText\") as string,\n        };\n    }\n\n    public render() {\n        const { label, legend } = this.props;\n        const classesInputBlock = inputBlockClasses();\n        const componentClasses = classNames(\n            this.props.baseClass === InputTextBlockBaseClass.STANDARD ? classesInputBlock.root : \"\",\n            this.props.className,\n        );\n        const hasErrors = !!this.props.errors && this.props.errors.length > 0;\n\n        let children;\n        if (typeof this.props.children === \"function\") {\n            // Type is checked, but typechecker not accepting it.\n            // eslint-disable-next-line @typescript-eslint/ban-types\n            children = (this.props.children as Function)({ hasErrors, errorID: this.errorID, labelID: this.labelID });\n        } else {\n            children = this.props.children;\n        }\n\n        const OuterTag = label ? (legend ? \"fieldset\" : \"label\") : \"div\";\n        const LabelTag = label && legend ? \"legend\" : \"span\";\n\n        return (\n            <OuterTag className={componentClasses}>\n                {this.props.label && (\n                    <span id={this.labelID} className={classesInputBlock.labelAndDescription}>\n                        <LabelTag className={classNames(classesInputBlock.labelText, this.props.labelClassName)}>\n                            {this.props.label}\n                        </LabelTag>\n                        <Paragraph className={classesInputBlock.labelNote}>{this.props.labelNote}</Paragraph>\n                    </span>\n                )}\n\n                <span\n                    className={classNames(\n                        classesInputBlock.inputWrap,\n                        this.props.wrapClassName,\n                        [classesInputBlock.fieldsetGroup],\n                        { [classesInputBlock.grid]: this.props.grid },\n                        { [classesInputBlock.tight]: this.props.tight },\n                        { noMargin: this.props.noMargin },\n                    )}\n                >\n                    {children}\n                </span>\n                <Paragraph className={classesInputBlock.labelNote}>{this.props.noteAfterInput}</Paragraph>\n                <ErrorMessages id={this.errorID} errors={this.props.errors} padded />\n            </OuterTag>\n        );\n    }\n\n    private get labelID(): string {\n        return this.state.id + \"-label\";\n    }\n\n    private get errorID(): string {\n        return this.state.id + \"-errors\";\n    }\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { placesSearchListingClasses } from \"@library/search/placesSearchListing.styles\";\nimport { SearchService } from \"@library/search/SearchService\";\nimport { TypeQuestionIcon } from \"@library/icons/searchIcons\";\nimport { buttonUtilityClasses } from \"@library/forms/buttonStyles\";\nimport classNames from \"classnames\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\n\nexport interface IPlacesSearchListingItem {\n    name: string;\n    type?: string;\n    url: string;\n    className?: string;\n    embedLinkClassName?: string;\n}\n\ninterface IPlacesSearchListingContainer {\n    items: IPlacesSearchListingItem[];\n}\n\nexport function PlacesSearchListingItem(props: IPlacesSearchListingItem) {\n    const { name, type, url, className, embedLinkClassName } = props;\n\n    const icon = SearchService.getSubType(type || \"\")?.icon || <TypeQuestionIcon />;\n\n    const classes = placesSearchListingClasses();\n    return (\n        <li key={name} className={className}>\n            <SmartLink\n                style={{ fontSize: \"small\" }}\n                to={url}\n                tabIndex={0}\n                className={classNames(embedLinkClassName, { [`${classes.link}`]: true })}\n            >\n                <span className={classNames(classes.buttonIconContainer, buttonUtilityClasses().buttonIconRightMargin)}>\n                    {icon}\n                </span>\n                {name}\n            </SmartLink>\n        </li>\n    );\n}\n\nexport function PlacesSearchListingContainer(props: IPlacesSearchListingContainer) {\n    const { items } = props;\n\n    const classes = placesSearchListingClasses();\n    return (\n        <ul className={classes.container}>\n            {items.map((item) => {\n                return <PlacesSearchListingItem key={item.name} {...item} />;\n            })}\n        </ul>\n    );\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport Button from \"@library/forms/Button\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { dropDownClasses } from \"@library/flyouts/dropDownStyles\";\nimport classNames from \"classnames\";\nimport DropDownItem from \"@library/flyouts/items/DropDownItem\";\n\ninterface IProps {\n    name?: string;\n    className?: string;\n    buttonClassName?: string;\n    children?: React.ReactNode;\n    disabled?: boolean;\n    onClick: any;\n    current?: boolean;\n    lang?: string;\n    isActive?: boolean;\n    buttonRef?: React.RefObject<HTMLButtonElement>;\n    role?: string;\n}\n\n/**\n * Implements button type of item for DropDownMenu\n */\nexport default function DropDownItemButton(props: IProps) {\n    const { children, name, disabled = false } = props;\n    const buttonContent = children ? children : name;\n    const classes = dropDownClasses();\n    const defaultButtonClass = dropDownClasses().action;\n    const buttonClassName = classNames(\"dropDownItem-button\", props.buttonClassName ?? defaultButtonClass);\n    return (\n        <DropDownItem className={classNames(props.className)}>\n            <Button\n                buttonRef={props.buttonRef}\n                title={props.name}\n                onClick={props.onClick}\n                className={classNames(buttonClassName, classes.action, props.isActive && classes.actionActive)}\n                baseClass={ButtonTypes.CUSTOM}\n                disabled={disabled}\n                aria-current={props.current ? \"true\" : \"false\"}\n                lang={props.lang}\n                role={props.role}\n            >\n                {buttonContent}\n            </Button>\n        </DropDownItem>\n    );\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport * as React from \"react\";\nimport classNames from \"classnames\";\nimport { dropDownClasses } from \"@library/flyouts/dropDownStyles\";\n\nexport interface IProps {\n    children: React.ReactNode;\n    className?: string;\n}\n\n/**\n * Generic wrap for items in DropDownMenu\n */\nexport default class DropDownItem extends React.Component<IProps> {\n    public render() {\n        const classes = dropDownClasses();\n        return <li className={classNames(this.props.className, classes.item)}>{this.props.children}</li>;\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\n\nexport interface ICrumbString {\n    name: string;\n}\n\nexport interface IProps {\n    crumbs: ICrumbString[];\n    className?: string;\n}\n\n/**\n * A smart loading component. Takes up the full page and only displays in certain scenarios.\n */\nexport default class BreadCrumbString extends React.Component<IProps> {\n    public render() {\n        const crumbSeparator = ` › `;\n        const crumbCount = this.props.crumbs.length - 1;\n\n        const contents = this.props.crumbs.map((crumb, index) => {\n            const lastElement = index === crumbCount;\n            return crumb.name + (lastElement ? \"\" : crumbSeparator);\n        });\n\n        return <span className={classNames(\"breadCrumbAsString\", this.props.className)}>{contents}</span>;\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { color, important, percent, rgba } from \"csx\";\nimport { titleBarVariables } from \"@library/headers/TitleBar.variables\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { IButtonType } from \"@library/forms/styleHelperButtonInterface\";\nimport { bannerVariables } from \"@library/banner/bannerStyles\";\nimport { SearchBarPresets } from \"@library/banner/SearchBarPresets\";\nimport { ButtonPreset } from \"@library/forms/ButtonPreset\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\nimport { inputClasses } from \"@library/forms/inputStyles\";\n\nexport const compactSearchVariables = useThemeCache((forcedVars?: IThemeVariables) => {\n    const globalVars = globalVariables(forcedVars);\n    const makeThemeVars = variableFactory(\"compactSearch\", forcedVars);\n    const titleBarVars = titleBarVariables(forcedVars);\n    const formElVars = formElementsVariables(forcedVars);\n\n    const searchButtonOptions = makeThemeVars(\"searchButtonOptions\", { preset: ButtonPreset.TRANSPARENT });\n    const searchInputOptions = makeThemeVars(\"searchInputOptions\", { preset: SearchBarPresets.NO_BORDER });\n\n    const isUnifiedBorder = searchInputOptions.preset === SearchBarPresets.UNIFIED_BORDER;\n    const isTransparentButton = searchButtonOptions.preset === ButtonPreset.TRANSPARENT;\n    const isSolidButton = searchButtonOptions.preset === ButtonPreset.SOLID || isUnifiedBorder; // force solid button when using unified border\n\n    let baseColor = ColorsUtils.modifyColorBasedOnLightness({ color: titleBarVars.colors.bg, weight: 0.2 });\n    if (titleBarVars.colors.bgImage !== null) {\n        // If we have a BG image, make sure we have some opacity so it shines through.\n        baseColor = baseColor.fade(0.3);\n    }\n\n    // Main colors\n    const colors = makeThemeVars(\"colors\", {\n        primary: globalVars.mainColors.primary,\n        secondary: globalVars.mainColors.secondary,\n        contrast: globalVars.elementaryColors.white,\n        bg: globalVars.mainColors.bg,\n        fg: globalVars.mainColors.fg,\n        borderColor: globalVars.mainColors.fg.fade(0.4),\n        placeholder: globalVars.mainColors.fg.fade(0.8),\n        active: {\n            bg: baseColor,\n        },\n    });\n\n    const isContrastLight = colors.contrast.lightness() >= 0.5;\n    const backgrounds = makeThemeVars(\"backgrounds\", {\n        useOverlay: false,\n        overlayColor: isContrastLight\n            ? globalVars.elementaryColors.black.fade(0.3)\n            : globalVars.elementaryColors.white.fade(0.3),\n    });\n\n    const bgColor = isTransparentButton ? rgba(0, 0, 0, 0) : colors.primary;\n    const bgColorActive = isTransparentButton ? backgrounds.overlayColor.fade(0.15) : colors.secondary;\n    const fgColor = isTransparentButton ? colors.contrast : colors.fg;\n    const activeBorderColor = isTransparentButton ? colors.contrast : colors.bg;\n\n    const searchBar = makeThemeVars(\"searchBar\", {\n        sizing: {\n            height: formElVars.giantInput.height,\n            width: 705,\n        },\n        font: {\n            color: colors.fg,\n            size: formElVars.giantInput.fontSize,\n        },\n        border: {\n            leftColor: isTransparentButton ? colors.contrast : colors.borderColor,\n            width: globalVars.border.width,\n        },\n    });\n\n    const searchButton: IButtonType = makeThemeVars(\"searchButton\", {\n        name: \"heroSearchButton\",\n        spinnerColor: colors.contrast,\n        colors: {\n            fg: fgColor,\n            bg: bgColor,\n        },\n        borders: {\n            ...(isTransparentButton\n                ? {\n                      color: colors.contrast,\n                      width: 1,\n                  }\n                : { color: colors.bg, width: 0 }),\n            left: {\n                color: searchBar.border.leftColor,\n                width: searchBar.border.width,\n            },\n            radius: {\n                // left: important(0),\n                // right: important(unit(borders.borderRadius) as string),\n            },\n        },\n        fonts: {\n            color: fgColor,\n            size: globalVars.fonts.size.large,\n            weight: globalVars.fonts.weights.semiBold,\n        },\n        hover: {\n            colors: {\n                fg: colors.contrast,\n                bg: bgColorActive,\n            },\n            borders: {\n                color: activeBorderColor,\n            },\n            fonts: {\n                color: colors.contrast,\n            },\n        },\n        active: {\n            colors: {\n                fg: colors.contrast,\n                bg: bgColorActive,\n            },\n            borders: {\n                color: activeBorderColor,\n            },\n            fonts: {\n                color: colors.contrast,\n            },\n        },\n        focus: {\n            colors: {\n                fg: colors.contrast,\n                bg: bgColorActive,\n            },\n            borders: {\n                color: activeBorderColor,\n            },\n            fonts: {\n                color: colors.contrast,\n            },\n        },\n        focusAccessible: {\n            colors: {\n                fg: colors.contrast,\n                bg: bgColorActive,\n            },\n            borders: {\n                color: activeBorderColor,\n            },\n            fonts: {\n                color: colors.contrast,\n            },\n        },\n    });\n\n    return { colors, searchBar, searchButton, backgrounds };\n});\n\nexport const compactSearchClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const formElementsVars = formElementsVariables();\n    const titleBarVars = titleBarVariables();\n    const vars = compactSearchVariables();\n    const style = styleFactory(\"compactSearch\");\n    const mediaQueries = layoutVariables().mediaQueries();\n    inputClasses().applyInputCSSRules();\n\n    const root = style({\n        ...{\n            \".searchBar\": {\n                flexGrow: 1,\n            },\n            \".searchBar__input\": {\n                color: ColorsUtils.colorOut(vars.searchBar.font.color),\n                width: percent(100),\n            },\n            \".searchBar__input input\": {\n                color: ColorsUtils.colorOut(vars.searchBar.font.color),\n                borderRadius: important(0),\n            },\n            \".searchBar-valueContainer\": {\n                height: styleUnit(formElementsVars.sizing.height),\n            },\n            \".searchBar__placeholder\": {\n                color: ColorsUtils.colorOut(vars.colors.placeholder),\n            },\n            \".searchBar-icon\": {\n                color: ColorsUtils.colorOut(vars.colors.placeholder),\n            },\n            \"&.isOpen\": {\n                maxWidth: percent(100),\n            },\n            \"&.isCentered\": {\n                margin: \"auto\",\n            },\n            \".suggestedTextInput-inputTextutText\": {\n                borderTopRightRadius: styleUnit(globalVars.border.radius),\n                borderBottomRightRadius: styleUnit(globalVars.border.radius),\n            },\n        },\n    });\n\n    const contents = style(\"contents\", {\n        display: \"flex\",\n        alignItems: \"center\",\n        flexWrap: \"nowrap\",\n        minHeight: styleUnit(formElementsVars.sizing.height),\n        justifyContent: \"center\",\n        width: percent(100),\n        position: \"relative\",\n    });\n\n    const close = style(\"close\", {\n        color: \"inherit\",\n        whiteSpace: \"nowrap\",\n        fontWeight: globalVars.fonts.weights.semiBold,\n        margin: 0,\n        outline: 0,\n        ...Mixins.border({\n            radius: 0,\n            color: globalVars.elementaryColors.transparent,\n        }),\n        ...Mixins.padding({\n            horizontal: 10,\n        }),\n    });\n\n    const cancelContents = style(\"cancelContents\", {});\n\n    const searchAndResults = style(\"searchAndResults\", {\n        flex: 1,\n        position: \"relative\",\n        width: percent(100),\n        height: styleUnit(formElementsVars.sizing.height),\n        display: \"flex\",\n        flexWrap: \"nowrap\",\n        ...Mixins.margin({\n            horizontal: 1,\n        }),\n    });\n\n    const valueContainer = style(\"valueContainer\", {});\n\n    return {\n        root,\n        contents,\n        close,\n        cancelContents,\n        searchAndResults,\n        valueContainer,\n    };\n});\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { hasPermission } from \"@library/features/users/Permission\";\n\n/**\n * Check if the current user can view other users.\n */\nexport function hasUserViewPermission() {\n    return hasPermission([\n        // Any of these permissions will suffice.\n        \"profiles.view\",\n\n        // These ones give access to extra personal information.\n        \"users.add\",\n        \"users.edit\",\n        \"users.delete\",\n    ]);\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport qs from \"qs\";\nimport { ensureString } from \"@vanilla/utils\";\n\n/**\n * Represent pages potentially returned from a Link header.\n */\nexport interface ILinkPages {\n    next?: number;\n    prev?: number;\n    limit?: number;\n    total?: number;\n    currentPage?: number;\n}\n\nexport interface IWithPagination<T> {\n    pagination: ILinkPages;\n    body: T;\n}\n\nexport default class SimplePagerModel {\n    public static parseHeaders(headers: Record<string, string>): ILinkPages {\n        const result = this.parseLinkHeader(headers[\"link\"], \"page\");\n\n        if (\"x-app-page-result-count\" in headers) {\n            result.total = parseInt(headers[\"x-app-page-result-count\"]);\n        }\n\n        if (\"x-app-page-current\" in headers) {\n            result.currentPage = parseInt(headers[\"x-app-page-current\"]);\n        }\n\n        if (\"x-app-page-limit\" in headers) {\n            result.limit = parseInt(headers[\"x-app-page-limit\"]);\n        }\n\n        return result;\n    }\n\n    public static parseLinkHeader(header: string, param: string, limitParam?: string): ILinkPages {\n        const result = {} as ILinkPages;\n\n        header.split(\",\").map((link) => {\n            link = link.trim();\n\n            // Needs to fit our expected format.\n            const parts = link.match(/<([0-9a-zA-Z$\\-_.+!*'(),:/?=&%#]+)>;\\s+rel=\"(next|prev)\"/);\n            if (!parts) {\n                return;\n            }\n\n            // Extract the relevant bits.\n            const [fullMatch, url, rel] = parts;\n\n            // Confirm we have a query string.\n            const search = url.match(/\\?([^#]+)/);\n            if (!search || !search[1]) {\n                return;\n            }\n\n            // Break out the query string into individual parameters.\n            const searchParameters = qs.parse(search[1]);\n\n            // Grab the next or prev page number.\n            if (searchParameters[param]) {\n                result[rel] = parseInt(ensureString(searchParameters[param]), 10);\n            }\n\n            // Grab the limit from the current link.\n            if (limitParam && searchParameters[limitParam]) {\n                result.limit = parseInt(ensureString(searchParameters[param]), 10);\n            }\n        });\n\n        return result;\n    }\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { IComboBoxOption } from \"@library/features/search/SearchBar\";\nimport MultiUserInput from \"@library/features/users/MultiUserInput\";\nimport DateRange from \"@library/forms/DateRange\";\nimport { dateRangeClasses } from \"@library/forms/dateRangeStyles\";\nimport { inputBlockClasses } from \"@library/forms/InputBlockStyles\";\nimport InputTextBlock from \"@library/forms/InputTextBlock\";\nimport { FilterFrame } from \"@library/search/panels/FilterFrame\";\nimport { useSearchForm } from \"@library/search/SearchContext\";\nimport { t } from \"@vanilla/i18n\";\nimport React from \"react\";\n\ninterface IProps {}\n\n/**\n * Implement search filter panel for all types\n */\nexport function FilterPanelAll(props: IProps) {\n    const { form, updateForm, search } = useSearchForm();\n    const classesInputBlock = inputBlockClasses();\n    const classesDateRange = dateRangeClasses();\n    return (\n        <FilterFrame title={t(\"Filter Results\")} handleSubmit={search}>\n            <InputTextBlock\n                label={t(\"Title\")}\n                inputProps={{\n                    onChange: (event: React.ChangeEvent<HTMLInputElement>) => {\n                        const { value } = event.target;\n                        updateForm({ name: value });\n                    },\n                    value: form.name || undefined,\n                }}\n            />\n            <MultiUserInput\n                className={classesInputBlock.root}\n                onChange={(options: IComboBoxOption[]) => {\n                    updateForm({ authors: options });\n                }}\n                value={form.authors ?? []}\n            />\n            <DateRange\n                onStartChange={(date: string) => {\n                    updateForm({ startDate: date });\n                }}\n                onEndChange={(date: string) => {\n                    updateForm({ endDate: date });\n                }}\n                start={form.startDate}\n                end={form.endDate}\n                className={classesDateRange.root}\n            />\n        </FilterFrame>\n    );\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { placesSearchListingClasses } from \"@library/search/placesSearchListing.styles\";\nimport { LoadingRectangle } from \"@library/loaders/LoadingRectangle\";\n\ninterface IProps {\n    count?: number;\n}\n\nexport function PlacesListingPlaceHolder(props: IProps) {\n    const { count = 8 } = props;\n\n    const classes = placesSearchListingClasses();\n    return (\n        <ul style={{ paddingTop: \"10px\" }} className={classes.container}>\n            {Array.from(new Array(count)).map((_, i) => {\n                return (\n                    <li style={{ display: \"flex\", alignItems: \"center\", paddingBottom: \"10px\" }} key={i}>\n                        <LoadingRectangle height={16} width={16} style={{ marginRight: 10, borderRadius: \"50%\" }} />\n                        <LoadingRectangle height={12} width={100} style={{ marginRight: 10 }} />\n                    </li>\n                );\n            })}\n        </ul>\n    );\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { LoadStatus } from \"@vanilla/library/src/scripts/@types/api/core\";\nimport { PlacesListingPlaceHolder } from \"@library/search/PlacesListingPlaceHolder\";\nimport { PLACES_DOMAIN_NAME } from \"@library/search/searchConstants\";\nimport { CoreErrorMessages } from \"@library/errorPages/CoreErrorMessages\";\nimport { PlacesSearchListingContainer } from \"@library/search/PlacesSearchListingContainer\";\nimport { useSearchForm } from \"@library/search/SearchContext\";\n\ninterface IProps {}\n\nexport default function PlacesSearchListing(props: IProps) {\n    const { domainSearchResults } = useSearchForm<{}>();\n\n    const results = domainSearchResults[PLACES_DOMAIN_NAME];\n    // To prevent situation when component is mounted but results not yet\n    // available\n    const status = (results && results.status) || LoadStatus.PENDING;\n\n    switch (status) {\n        case LoadStatus.PENDING:\n        case LoadStatus.LOADING:\n            return <PlacesListingPlaceHolder count={8} />;\n        case LoadStatus.ERROR:\n            return <CoreErrorMessages error={results.error} />;\n        case LoadStatus.SUCCESS:\n            const itemList = results.data?.results || [];\n            const items = itemList?.map((element) => {\n                const { type, name, url } = element;\n                return { type, name, url };\n            });\n            return <PlacesSearchListingContainer items={items} />;\n    }\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport apiv2 from \"@library/apiv2\";\nimport { TypeAllIcon } from \"@library/icons/searchIcons\";\nimport SimplePagerModel from \"@library/navigation/SimplePagerModel\";\nimport { FilterPanelAll } from \"@library/search/panels/FilterPanelAll\";\nimport { SearchActions } from \"@library/search/SearchActions\";\nimport { DEFAULT_CORE_SEARCH_FORM, INITIAL_SEARCH_STATE, searchReducer } from \"@library/search/searchReducer\";\nimport { ISearchForm, ISearchRequestQuery, ISearchFormBase } from \"@library/search/searchTypes\";\nimport {\n    ALLOWED_GLOBAL_SEARCH_FIELDS,\n    ALL_CONTENT_DOMAIN_NAME,\n    MEMBERS_RECORD_TYPE,\n    MEMBERS_DOMAIN_NAME,\n    PLACES_DOMAIN_NAME,\n} from \"@library/search/searchConstants\";\nimport { t } from \"@vanilla/i18n\";\nimport React, { useCallback, useReducer } from \"react\";\nimport merge from \"lodash/merge\";\nimport Result from \"@library/result/Result\";\nimport { ISelectBoxItem } from \"@library/forms/select/SelectBox\";\nimport { useSearchScope } from \"@library/features/search/SearchScopeContext\";\nimport { getCurrentLocale } from \"@vanilla/i18n\";\nimport { SearchContext } from \"./SearchContext\";\nimport { SearchService, ISearchDomain } from \"./SearchService\";\nimport PlacesSearchListing from \"@library/search/PlacesSearchListing\";\n\ninterface IProps {\n    children?: React.ReactNode;\n}\n\nexport const SEARCH_LIMIT_DEFAULT = 10;\nexport const DOMAIN_SEARCH_LIMIT_DEFAULT = 10;\n\nexport function getGlobalSearchSorts(): ISelectBoxItem[] {\n    return [\n        {\n            content: t(\"Best Match\"),\n            value: \"relevance\",\n        },\n        {\n            content: t(\"Newest\"),\n            value: \"-dateInserted\",\n        },\n        {\n            content: t(\"Oldest\"),\n            value: \"dateInserted\",\n        },\n    ];\n}\n\nexport function SearchFormContextProvider(props: IProps) {\n    const [state, dispatch] = useReducer(searchReducer, INITIAL_SEARCH_STATE);\n\n    const getFilterComponentsForDomain = (domain: string) => {\n        return SearchService.extraFilters.map((extraFilter, i) => {\n            if (extraFilter.searchDomain === domain) {\n                return <React.Fragment key={i}>{extraFilter.filterNode}</React.Fragment>;\n            } else {\n                return null;\n            }\n        });\n    };\n\n    const hasPlacesDomain = SearchService.pluggableDomains.map((domain) => domain.key).includes(PLACES_DOMAIN_NAME);\n\n    const ALL_CONTENT_DOMAIN: ISearchDomain = {\n        key: ALL_CONTENT_DOMAIN_NAME,\n        name: t(\"All\"),\n        sort: 0,\n        icon: <TypeAllIcon />,\n        heading: hasPlacesDomain ? <PlacesSearchListing /> : null,\n        // To be called when performing a search in the current domain. We need to be aware of PLACES_DOMAIN_NAME\n        // here because the component <PlacesSearchListing /> is specific to Places Search and yet we want it in\n        // all domains and we want to make the query to the places domain\n        extraSearchAction: () => {\n            if (hasPlacesDomain) {\n                searchInDomain(PLACES_DOMAIN_NAME);\n            }\n        },\n        PanelComponent: FilterPanelAll,\n        getAllowedFields: () => {\n            return ALLOWED_GLOBAL_SEARCH_FIELDS;\n        },\n        getRecordTypes: () => {\n            // Gather all other domains, and return their types.\n            const allTypes: string[] = [];\n            for (const pluggableDomain of SearchService.pluggableDomains) {\n                allTypes.push(...pluggableDomain.getRecordTypes());\n            }\n\n            return allTypes.filter((t) => t !== MEMBERS_RECORD_TYPE);\n        },\n        getSortValues: getGlobalSearchSorts,\n        transformFormToQuery: (form: ISearchForm) => {\n            const query: ISearchRequestQuery = { ...form };\n            if (query.sort === \"relevance\") {\n                delete query.sort;\n            }\n            return query;\n        },\n        getDefaultFormValues: () => {\n            return {\n                sort: \"relevance\",\n            };\n        },\n        isIsolatedType: () => false,\n        ResultComponent: Result,\n    };\n\n    const getDomains = () => {\n        return [ALL_CONTENT_DOMAIN, ...SearchService.pluggableDomains];\n    };\n\n    const getCurrentDomain = (): ISearchDomain => {\n        return (\n            getDomains().find((pluggableDomain) => {\n                return pluggableDomain.key === state.form.domain;\n            }) ?? ALL_CONTENT_DOMAIN\n        );\n    };\n\n    const getDate = (form: ISearchFormBase): string | undefined => {\n        let dateInserted: string | undefined;\n        if (form.startDate && form.endDate) {\n            if (form.startDate === form.endDate) {\n                // Simple equality.\n                dateInserted = form.startDate;\n            } else {\n                // Date range\n                dateInserted = `[${form.startDate},${form.endDate}]`;\n            }\n        } else if (form.startDate) {\n            // Only start date\n            dateInserted = `>=${form.startDate}`;\n        } else if (form.endDate) {\n            // Only end date.\n            dateInserted = `<=${form.endDate}`;\n        }\n        return dateInserted;\n    };\n\n    const makeFilterForm = (form: ISearchFormBase): Partial<ISearchForm> => {\n        const currentDomain = getCurrentDomain();\n        const filterForm: Partial<ISearchForm> = {};\n        const allowedFields = [...ALL_CONTENT_DOMAIN.getAllowedFields(), ...currentDomain.getAllowedFields()];\n        for (const [key, value] of Object.entries(form)) {\n            if (allowedFields.includes(key)) {\n                filterForm[key] = value;\n            }\n        }\n        return filterForm;\n    };\n\n    const searchScope = useSearchScope();\n    const buildQuery = (form: ISearchForm): ISearchRequestQuery => {\n        const filterForm = makeFilterForm(form);\n        const currentDomain = getCurrentDomain();\n\n        const allowedSorts = currentDomain.getSortValues().map((val) => val.value);\n        const sort = allowedSorts.includes(form.sort) ? form.sort : undefined;\n\n        const commonQueryEntries: ISearchRequestQuery = {\n            page: form.page,\n            limit: SEARCH_LIMIT_DEFAULT,\n            dateInserted: getDate(form),\n            locale: getCurrentLocale(),\n            collapse: true,\n            ...currentDomain.transformFormToQuery(filterForm),\n            sort,\n        };\n        if (searchScope.value?.value) {\n            commonQueryEntries.scope = searchScope.value.value;\n        }\n\n        let finalQuery: ISearchRequestQuery;\n\n        if (currentDomain.key === MEMBERS_DOMAIN_NAME) {\n            finalQuery = {\n                ...commonQueryEntries,\n                scope: \"site\", // Force site domain for members.\n                recordTypes: [MEMBERS_RECORD_TYPE],\n                expand: [],\n            };\n        } else if (currentDomain.key === PLACES_DOMAIN_NAME) {\n            // No recordTypes, only types (from form)\n            finalQuery = {\n                ...commonQueryEntries,\n                expand: [\"breadcrumbs\", \"image\", \"excerpt\", \"-body\"],\n            };\n        } else if (currentDomain.hasSpecificRecord?.(form)) {\n            finalQuery = {\n                ...commonQueryEntries,\n                expand: [\"insertUser\", \"breadcrumbs\", \"image\", \"excerpt\", \"-body\"],\n            };\n        } else {\n            finalQuery = {\n                domain: form.domain,\n                ...commonQueryEntries,\n                insertUserIDs:\n                    form.authors && form.authors.length\n                        ? form.authors.map((author) => author.value as number)\n                        : undefined,\n                recordTypes: currentDomain.getRecordTypes(),\n                expand: [\"insertUser\", \"breadcrumbs\", \"image\", \"excerpt\", \"-body\"],\n            };\n        }\n\n        // Filter out empty fields.\n        Object.entries(finalQuery).forEach(([field, value]) => {\n            if (value === \"\") {\n                delete finalQuery[field];\n            }\n        });\n\n        return finalQuery;\n    };\n\n    const search = async () => {\n        const { form } = state;\n\n        dispatch(SearchActions.performSearchACs.started(form));\n\n        try {\n            const query = buildQuery(form);\n            const response = await apiv2.get(\"/search\", {\n                params: query,\n            });\n\n            dispatch(\n                SearchActions.performSearchACs.done({\n                    params: form,\n                    result: {\n                        results: response.data.map((item) => {\n                            item.body = item.excerpt ?? item.body;\n                            return item;\n                        }),\n                        pagination: SimplePagerModel.parseHeaders(response.headers),\n                    },\n                }),\n            );\n        } catch (error) {\n            dispatch(SearchActions.performSearchACs.failed({ params: form, error }));\n        }\n    };\n\n    const searchInDomain = async (domain: string) => {\n        const { form } = state;\n        const formWithDomain = { ...form, domain };\n\n        dispatch(SearchActions.performDomainSearchACs.started(formWithDomain));\n\n        const subTypes = SearchService.getSubTypes()\n            .filter((subType) => subType.domain === domain)\n            .map((subType) => subType.type);\n\n        try {\n            const query = buildQuery(formWithDomain);\n            const response = await apiv2.get(\"/search\", {\n                params: { ...query, limit: DOMAIN_SEARCH_LIMIT_DEFAULT, types: subTypes, recordTypes: [] },\n            });\n            dispatch(\n                SearchActions.performDomainSearchACs.done({\n                    params: formWithDomain,\n                    result: {\n                        results: response.data.map((item) => {\n                            item.body = item.excerpt ?? item.body;\n                            return item;\n                        }),\n                        pagination: SimplePagerModel.parseHeaders(response.headers),\n                    },\n                }),\n            );\n        } catch (error) {\n            dispatch(SearchActions.performDomainSearchACs.failed({ params: formWithDomain, error }));\n        }\n    };\n\n    const updateForm = useCallback((update: Partial<ISearchForm>) => {\n        dispatch(SearchActions.updateSearchFormAC(update));\n    }, []);\n\n    const resetForm = useCallback(() => {\n        dispatch(SearchActions.resetFormAC());\n    }, []);\n\n    const getDefaultFormValues = () => {\n        const domainDefaults = getDomains().map((domain) => domain.getDefaultFormValues());\n        const merged = merge({}, DEFAULT_CORE_SEARCH_FORM, ...domainDefaults);\n        return merged;\n    };\n\n    return (\n        <SearchContext.Provider\n            value={{\n                getFilterComponentsForDomain,\n                updateForm,\n                results: state.results,\n                domainSearchResults: state.domainSearchResults,\n                form: state.form,\n                search,\n                searchInDomain,\n                getDomains,\n                getCurrentDomain,\n                getDefaultFormValues,\n                resetForm,\n            }}\n        >\n            {props.children}\n        </SearchContext.Provider>\n    );\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { ReactNode, useCallback, useEffect, useState } from \"react\";\nimport Button from \"@library/forms/Button\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport DropDown, {\n    DropDownOpenDirection,\n    DropDownPreferredOpenDirections,\n    FlyoutType,\n} from \"@library/flyouts/DropDown\";\nimport { IUserFragment } from \"@vanilla/library/src/scripts/@types/api/users\";\nimport { UserPhoto, UserPhotoSize } from \"@library/headers/mebox/pieces/UserPhoto\";\nimport { CloseCompactIcon } from \"@library/icons/common\";\nimport Permission, { PermissionMode } from \"@library/features/users/Permission\";\nimport { userCardClasses } from \"@library/features/users/ui/popupUserCardStyles\";\nimport NumberFormatted from \"@library/content/NumberFormatted\";\nimport { t } from \"@vanilla/i18n\";\nimport { getMeta, makeProfileUrl } from \"@library/utility/appUtils\";\nimport ScreenReaderContent from \"@library/layout/ScreenReaderContent\";\nimport { Devices, useDevice } from \"@library/layout/DeviceContext\";\nimport DateTime from \"@library/content/DateTime\";\nimport classNames from \"classnames\";\nimport LinkAsButton from \"@library/routing/LinkAsButton\";\n\nexport interface IUserCardInfo {\n    email: string;\n    userID: number;\n    name: string;\n    title?: string;\n    photoUrl: string;\n    dateLastActive?: string;\n    dateJoined?: string;\n    label?: string;\n    countDiscussions: number;\n    countComments: number;\n}\n\ninterface IProps {\n    contentID?: string;\n    handleID?: string;\n    user: IUserCardInfo;\n    visible?: boolean;\n    buttonContent?: ReactNode | string;\n    openAsModal?: boolean;\n    buttonType?: ButtonTypes;\n    buttonClass?: string;\n}\n\ninterface IContainerProps {\n    children: ReactNode;\n    borderTop?: boolean;\n}\n\ninterface INameProps {\n    name: string;\n}\n\ninterface ILabelProps {\n    label?: string | null;\n}\n\ninterface IStatProps {\n    count?: number;\n    text: string;\n    position: \"left\" | \"right\";\n}\n\ninterface IDateProps {\n    text: string;\n    date: string | undefined;\n}\n\ninterface IHeaderProps {\n    onClick: () => void;\n}\n\nfunction Name(props: INameProps) {\n    const classes = userCardClasses();\n    const { name } = props;\n    return <div className={classes.name}> {name} </div>;\n}\n\nfunction Label(props: ILabelProps) {\n    const classes = userCardClasses();\n    const { label } = props;\n    // HTML here is sanitized server side.\n    return label ? <div className={classes.label} dangerouslySetInnerHTML={{ __html: label }} /> : null;\n}\n\nfunction Container(props: IContainerProps) {\n    const { borderTop } = props;\n    const classes = userCardClasses();\n    return (\n        <div className={classNames(classes.container, { [classes.containerWithBorder]: borderTop })}>\n            {props.children}\n        </div>\n    );\n}\n\nfunction ButtonContainer(props) {\n    const classes = userCardClasses();\n\n    return <div className={classes.buttonContainer}>{props.children}</div>;\n}\n\nfunction Stat(props: IStatProps) {\n    const classes = userCardClasses();\n\n    const { count, text, position } = props;\n    return (\n        <div\n            className={classNames(classes.stat, {\n                [classes.statLeft]: position === \"left\",\n                [classes.statRight]: position === \"right\",\n            })}\n        >\n            <div className={classes.count}>\n                <NumberFormatted fallbackTag={\"div\"} value={count || 0} />\n            </div>\n            <div className={classes.statLabel}>{text}</div>\n        </div>\n    );\n}\n\nfunction Date(props: IDateProps) {\n    const classes = userCardClasses();\n    const { text, date } = props;\n    return (\n        <div className={classes.date}>\n            {`${text}: `} <DateTime timestamp={date} />\n        </div>\n    );\n}\n\nfunction Header(props: IHeaderProps) {\n    const classes = userCardClasses();\n    const { onClick } = props;\n    const device = useDevice();\n    const isCompact = device === Devices.MOBILE || device === Devices.XS;\n\n    return (\n        <div className={classes.header}>\n            {isCompact && (\n                <Button className={classes.close} onClick={onClick} baseClass={ButtonTypes.ICON}>\n                    <>\n                        <CloseCompactIcon />\n                        <ScreenReaderContent>{t(\"Close\")}</ScreenReaderContent>\n                    </>\n                </Button>\n            )}\n        </div>\n    );\n}\n\nexport default function PopupUserCard(props: IProps) {\n    const classes = userCardClasses();\n    const { user, visible = false, buttonContent, openAsModal, contentID, handleID } = props;\n    const [open, setOpen] = useState(visible);\n    const device = useDevice();\n    const toggleRef: React.RefObject<HTMLButtonElement> = React.createRef();\n    const contentRef: React.RefObject<HTMLDivElement> = React.createRef();\n\n    const isCompact = device === Devices.MOBILE || device === Devices.XS;\n    const photoSize: UserPhotoSize = isCompact ? UserPhotoSize.XLARGE : UserPhotoSize.LARGE;\n    const conversations = getMeta(\"context.conversationsEnabled\", false);\n\n    const label = user.title ?? user.label;\n\n    const userInfo: IUserFragment = {\n        userID: user.userID,\n        name: user.name,\n        photoUrl: user.photoUrl,\n        dateLastActive: user.dateLastActive || null,\n        label: label,\n    };\n\n    useEffect(() => {\n        if (open) {\n            toggleRef.current?.focus();\n        }\n    }, []); // on initial load\n\n    const handleVisibilityChange = useCallback(\n        (isVisible) => {\n            setOpen(isVisible);\n        },\n        [open],\n    );\n\n    return (\n        <DropDown\n            tag={\"span\"}\n            buttonContents={buttonContent || user.name}\n            buttonBaseClass={props.buttonType ?? ButtonTypes.TEXT}\n            buttonClassName={classNames(classes.link, props.buttonClass)}\n            selfPadded={true}\n            flyoutType={FlyoutType.FRAME}\n            isVisible={open}\n            onVisibilityChange={handleVisibilityChange}\n            openAsModal={openAsModal}\n            buttonRef={toggleRef}\n            contentRef={contentRef}\n            contentID={contentID}\n            handleID={handleID}\n            openDirection={DropDownOpenDirection.AUTO}\n            preferredDirection={DropDownPreferredOpenDirections.ABOVE_CENTER}\n        >\n            <Header onClick={() => handleVisibilityChange(!open)} />\n\n            <UserPhoto userInfo={userInfo} size={photoSize} className={classes.userPhoto} />\n\n            <div className={classes.metaContainer}>\n                <div className={classes.row}>\n                    <Name name={user.name} />\n                </div>\n                {/* We don't  want this section to show at all if there's no label */}\n                {label && (\n                    <div className={classes.row}>\n                        <Label label={label} />\n                    </div>\n                )}\n\n                <Permission permission={\"personalInfo.view\"} mode={PermissionMode.GLOBAL}>\n                    <div className={classes.row}>\n                        <a className={classes.email} href={`mailto:${user.email}`}>\n                            {user.email}\n                        </a>\n                    </div>\n                </Permission>\n            </div>\n\n            <div className={classNames(classes.container, classes.actionContainer)}>\n                <ButtonContainer>\n                    <LinkAsButton\n                        to={makeProfileUrl(user.name)}\n                        baseClass={ButtonTypes.STANDARD}\n                        className={classes.button}\n                    >\n                        {t(\"View Profile\")}\n                    </LinkAsButton>\n                </ButtonContainer>\n\n                {conversations && (\n                    <ButtonContainer>\n                        <LinkAsButton\n                            to={`/messages/add/${user.name}`}\n                            baseClass={ButtonTypes.STANDARD}\n                            className={classes.button}\n                        >\n                            {t(\"Message\")}\n                        </LinkAsButton>\n                    </ButtonContainer>\n                )}\n            </div>\n\n            <Container borderTop={true}>\n                <Stat count={user.countDiscussions} text={t(\"Discussions\")} position={\"left\"} />\n                <Stat count={user.countComments} text={t(\"Comments\")} position={\"right\"} />\n            </Container>\n\n            <Container borderTop={true}>\n                <Date text={t(\"Joined\")} date={user.dateJoined} />\n                <Date text={t(\"Last Active\")} date={user.dateLastActive} />\n            </Container>\n        </DropDown>\n    );\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { useUser } from \"@library/features/users/userHooks\";\nimport { LoadStatus } from \"@vanilla/library/src/scripts/@types/api/core\";\nimport { logError } from \"@vanilla/utils\";\nimport PopupUserCard, { IUserCardInfo } from \"@library/features/users/ui/PopupUserCard\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { Redirect } from \"react-router\";\n\nexport interface IUserCardModule {\n    userID: number;\n    buttonContent?: React.ReactNode;\n    openAsModal?: boolean;\n    fallbackButton: React.ReactNode;\n    visible?: boolean;\n    buttonType?: ButtonTypes;\n    buttonClass?: string;\n    handleID: string;\n    contentID: string;\n    userURL: string;\n}\n\n// Does not lazy load, will load user data right away\nexport function UserCardModule(props: IUserCardModule) {\n    const { userID, buttonContent, openAsModal, userURL, fallbackButton, visible, handleID, contentID } = props;\n    const user = useUser({ userID });\n\n    // Fallback to the original link, unchanged\n    if ([LoadStatus.PENDING, LoadStatus.LOADING].includes(user.status)) {\n        return <>{fallbackButton}</>;\n    }\n\n    if (!user.data || user.error) {\n        if (user.error) {\n            logError(\"failed to fetch data for UserCardModule\", user);\n        }\n        return <Redirect to={userURL} />; // if there's an error, redirect to the user's profile page.\n    }\n\n    const {\n        email,\n        name,\n        photoUrl,\n        dateLastActive,\n        dateInserted,\n        label,\n        title,\n        countDiscussions = 0,\n        countComments = 0,\n    } = user.data!;\n\n    const userCardInfo: IUserCardInfo = {\n        email,\n        userID,\n        name,\n        photoUrl,\n        dateLastActive: dateLastActive || undefined,\n        dateJoined: dateInserted,\n        label,\n        title,\n        countDiscussions,\n        countComments,\n    };\n\n    return (\n        <PopupUserCard\n            contentID={contentID}\n            handleID={handleID}\n            buttonClass={props.buttonClass}\n            buttonType={props.buttonType}\n            user={userCardInfo}\n            buttonContent={buttonContent}\n            openAsModal={openAsModal}\n            visible={visible}\n        />\n    );\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useSelector } from \"react-redux\";\nimport { IGetUserByIDQuery, IInviteUsersByGroupIDQuery, useUserActions } from \"@library/features/users/UserActions\";\nimport { IUsersStoreState } from \"@library/features/users/userTypes\";\nimport { useEffect } from \"react\";\nimport { LoadStatus } from \"@vanilla/library/src/scripts/@types/api/core\";\nimport { IComboBoxOption } from \"@library/features/search/SearchBar\";\n\nexport function useUser(query: IGetUserByIDQuery) {\n    const actions = useUserActions();\n    const { userID } = query;\n\n    const existingResult = useSelector((state: IUsersStoreState) => {\n        return (\n            state.users.usersByID[userID] ?? {\n                status: LoadStatus.PENDING,\n            }\n        );\n    });\n\n    const { status } = existingResult;\n\n    useEffect(() => {\n        if (LoadStatus.PENDING.includes(status)) {\n            actions.getUserByID(query);\n        }\n    }, [status, actions, query]);\n\n    return existingResult;\n}\n\nfunction getEmails(emails: string): string[] {\n    if (!emails.trim()) return [];\n\n    // Making it a little more robust by allowing space-separated emails as well\n    return emails\n        .split(\",\")\n        .join(\" \")\n        .split(\" \")\n        .filter((email) => email);\n}\n\nfunction getInviteeIDs(invitees: IComboBoxOption[]): number[] {\n    return invitees.map((invitee) => invitee.value as number);\n}\n\nexport function useInviteUsers(params: { userID: number; groupID: number; onSuccess: () => void }) {\n    const { userID, groupID, onSuccess } = params;\n    const { inviteUsersByGroupID, updateInvitees, updateEmailsString, clearInviteUsers } = useUserActions();\n\n    const emailsString = useSelector((state: IUsersStoreState) => {\n        return state.users.usersInvitationsByID[userID]?.emailsString ?? \"\";\n    });\n    const updateStoreEmails = (emailsString) => {\n        updateEmailsString({ userID, emailsString });\n    };\n\n    const invitees = useSelector((state: IUsersStoreState) => {\n        return state.users.usersInvitationsByID[userID]?.invitees ?? [];\n    });\n    const updateStoreInvitees = (invitees: IComboBoxOption[]) => {\n        updateInvitees({ userID, invitees });\n    };\n\n    const sentInvitations = () => {\n        const userIDs: number[] = getInviteeIDs(invitees);\n        const emails: string[] = getEmails(emailsString);\n\n        if (userIDs.length === 0 && emails.length === 0) return;\n\n        const query: IInviteUsersByGroupIDQuery = {\n            userID,\n            groupID,\n            userIDs,\n            emails,\n        };\n        return inviteUsersByGroupID(query);\n    };\n\n    const errors = useSelector((state: IUsersStoreState) => {\n        return state.users.usersInvitationsByID[userID]?.results?.error?.response?.data?.errors;\n    });\n\n    const status = useSelector((state: IUsersStoreState) => {\n        return state.users.usersInvitationsByID[userID]?.results?.status ?? LoadStatus.PENDING;\n    });\n\n    useEffect(() => {\n        if (status === LoadStatus.SUCCESS) {\n            onSuccess();\n            clearInviteUsers({ userID });\n        }\n    });\n\n    return { emailsString, updateStoreEmails, invitees, updateStoreInvitees, sentInvitations, errors };\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useEffect, useState } from \"react\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport Button from \"@library/forms/Button\";\nimport { userCardClasses } from \"@library/features/users/ui/popupUserCardStyles\";\nimport classNames from \"classnames\";\nimport { IUserCardModule, UserCardModule } from \"@library/features/users/modules/UserCardModule\";\nimport { t } from \"@vanilla/i18n\";\nimport { useUniqueID } from \"@library/utility/idUtils\";\nimport { useLastValue } from \"@vanilla/react-utils\";\nimport { hasUserViewPermission } from \"@library/features/users/modules/hasUserViewPermission\";\n\nexport interface IProps extends Omit<IUserCardModule, \"fallbackButton\" | \"ready\" | \"contentID\" | \"handleID\"> {\n    hasImage?: boolean;\n    userURL: string; // redirect here if there's an error loading the user data\n}\n\nexport function UserCardModuleLazyLoad(props: IProps) {\n    const { buttonContent, hasImage = false } = props;\n    const [ready, setReady] = useState(false);\n    const lastReady = useLastValue(ready);\n\n    const ID = useUniqueID(\"userCard\");\n    const handleID = ID + \"-handle\";\n    const contentID = ID + \"-contents\";\n    const toggleRef: React.RefObject<HTMLButtonElement> = React.createRef();\n\n    useEffect(() => {\n        if (!lastReady && ready) {\n            toggleRef.current?.focus();\n        }\n    }, [ready, toggleRef, lastReady]);\n\n    const fallbackButton = (\n        <Button\n            buttonRef={toggleRef}\n            id={handleID}\n            onClick={() => {\n                setReady(true);\n            }}\n            baseClass={props.buttonType ?? (hasImage ? ButtonTypes.CUSTOM : ButtonTypes.TEXT)}\n            className={classNames(userCardClasses().link, props.buttonClass, {\n                isLoading: ready,\n                [userCardClasses().avatar]: hasImage,\n            })}\n            ariaLabel={t(`Load user information.`)}\n            aria-controls={contentID}\n            aria-haspopup={true}\n            aria-expanded={false} // always false, because when it loads, it's replaced\n        >\n            {buttonContent}\n        </Button>\n    );\n\n    if (!hasUserViewPermission()) {\n        return fallbackButton;\n    }\n\n    if (!ready) {\n        return <>{fallbackButton}</>; // rendered while we wait for the user data\n    } else {\n        return (\n            <UserCardModule\n                {...props}\n                fallbackButton={fallbackButton}\n                visible={true}\n                handleID={handleID}\n                contentID={contentID}\n                userURL={props.userURL}\n            />\n        );\n    }\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { AttachmentType } from \"@library/content/attachments/AttatchmentType\";\nimport { t } from \"@library/utility/appUtils\";\nimport Translate from \"@library/content/Translate\";\nimport { attachmentIconClasses } from \"@library/content/attachments/attachmentIconsStyles\";\nimport Paragraph from \"@library/layout/Paragraph\";\nimport classNames from \"classnames\";\nimport { GetAttachmentIcon } from \"@library/content/attachments/attachmentUtils\";\n\n// Common to both attachment types\nexport interface IAttachmentIcon {\n    name: string;\n    type: AttachmentType;\n}\n\n// Attachment of type icon\ninterface IProps extends IAttachmentIcon {\n    classes: {\n        item?: string;\n    };\n}\n\n/**\n * Component representing 1 icon attachment.\n */\nexport default class AttachmentIcon extends React.Component<IProps> {\n    public render() {\n        const classes = attachmentIconClasses();\n        return (\n            <li className={classNames(\"attachmentsIcons-item\", this.props.classes.item, classes.root)}>\n                <div\n                    className={classNames(\"attachmentsIcons-file\", `attachmentsIcons-${this.props.type}`)}\n                    title={t(this.props.type)}\n                >\n                    <span className=\"sr-only\">\n                        <Paragraph>\n                            <Translate source=\"<0/> (Type: <1/>)\" c0={this.props.name} c1={this.props.type} />\n                        </Paragraph>\n                    </span>\n                    <GetAttachmentIcon type={this.props.type} className={classes.root} />\n                </div>\n            </li>\n        );\n    }\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { attachmentIconsClasses } from \"@library/content/attachments/attachmentIconsStyles\";\nimport { t } from \"@library/utility/appUtils\";\nimport AttachmentIcon, { IAttachmentIcon } from \"@library/content/attachments/AttachmentIcon\";\nimport { uniqueIDFromPrefix } from \"@library/utility/idUtils\";\nimport { metasClasses } from \"@library/styles/metasStyles\";\nimport Translate from \"@library/content/Translate\";\nimport classNames from \"classnames\";\n\n// Array of icon attachments\ninterface IProps {\n    attachments: IAttachmentIcon[];\n    maxCount?: number;\n}\n\n/**\n * Generates a list of attachment icons\n */\nexport default class AttachmentIcons extends React.Component<IProps> {\n    private maxCount = 3;\n    private id = uniqueIDFromPrefix(\"attachmentIcons-\");\n\n    constructor(props: IProps) {\n        super(props);\n        if (props.maxCount && props.maxCount > 0 && props.maxCount <= props.attachments.length) {\n            this.maxCount = props.maxCount;\n        }\n    }\n\n    public get titleID() {\n        return this.id + \"-title\";\n    }\n\n    public render() {\n        if (this.attachmentsCount < 1) {\n            return null;\n        }\n        const classes = attachmentIconsClasses();\n        const attachments = this.renderAttachments(classes);\n\n        if (attachments) {\n            return (\n                <section className={classNames(\"attachmentsIcons\", classes.root)}>\n                    <h3 id={this.titleID} className=\"sr-only\">\n                        {t(\"Attachments\") + \": \"}\n                    </h3>\n                    <ul aria-labelledby={this.titleID} className={classNames(\"attachmentsIcons-items\", classes.items)}>\n                        {attachments}\n                    </ul>\n                </section>\n            );\n        } else {\n            return null;\n        }\n    }\n\n    /**\n     * Calculate the total attachments to display.\n     */\n    private get attachmentsCount(): number {\n        return this.props.attachments.length;\n    }\n\n    /**\n     * Render out the visible attachments.\n     */\n    private renderAttachments(classes) {\n        return this.props.attachments.map((attachment, i) => {\n            const index = i + 1;\n            const extraCount = this.attachmentsCount - index;\n            if (i < this.maxCount) {\n                return (\n                    <AttachmentIcon\n                        classes={{ item: classes.item }}\n                        name={attachment.name}\n                        type={attachment.type}\n                        key={index}\n                    />\n                );\n            } else if (i === this.maxCount && extraCount > 0) {\n                return this.renderMorePlacholder(extraCount, index);\n            } else {\n                return null;\n            }\n        });\n    }\n\n    /**\n     * Render a placeholder indicating that there are more unshown attachments.\n     */\n    private renderMorePlacholder(remainingCount: number, index: number): React.ReactNode {\n        const message = <Translate source=\"+ <0/> more\" c0={remainingCount} />;\n        const classesMetas = metasClasses();\n        return (\n            <li className=\"attachmentsIcons-item\" key={index}>\n                <span className={classNames(\"attachmentsIcons-more\", classesMetas.metaStyle)}>{message}</span>\n            </li>\n        );\n    }\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license Proprietary\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport AttachmentIcons from \"@library/content/attachments/AttachmentIcons\";\nimport { t } from \"@library/utility/appUtils\";\nimport TruncatedText from \"@library/content/TruncatedText\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport { searchResultClasses, searchResultsClasses } from \"@library/features/search/searchResultsStyles\";\nimport { IAttachmentIcon } from \"@library/content/attachments/AttachmentIcon\";\nimport Paragraph from \"@library/layout/Paragraph\";\nimport { ICrumb } from \"@library/navigation/Breadcrumbs\";\nimport { useLayout } from \"@library/layout/LayoutContext\";\nimport { IUserCardInfo } from \"@library/features/users/ui/PopupUserCard\";\n\nexport interface IResult {\n    name: string;\n    className?: string;\n    meta?: React.ReactNode;\n    url: string;\n    excerpt?: string;\n    image?: string;\n    headingLevel?: 2 | 3;\n    attachments?: IAttachmentIcon[];\n    location: ICrumb[] | string[];\n    afterExcerpt?: React.ReactNode; // Likely SearchLink\n    icon?: React.ReactNode;\n    userCardInfo?: IUserCardInfo;\n    rel?: string;\n}\n\n/**\n * Generates search result list. Note that this template is used in other contexts, such as the flat category list\n */\nexport default function Result(props: IResult) {\n    const { name, className, meta, url, excerpt, image, headingLevel = 2, attachments, afterExcerpt, icon } = props;\n\n    const hasAttachments = attachments && attachments.length > 0;\n    const showImage = image && !hasAttachments;\n    const hasMedia = hasAttachments || showImage;\n    const layoutContext = useLayout();\n    const classesSearchResults = searchResultsClasses(layoutContext.mediaQueries);\n    const classes = searchResultClasses(layoutContext.mediaQueries, !!icon);\n    const imageComponent = showImage ? (\n        <img\n            src={image}\n            className={classNames(\"searchResult-image\", classes.image)}\n            alt={t(\"Thumbnail for: \" + name)}\n            aria-hidden={true}\n        />\n    ) : null;\n\n    let attachmentOutput;\n    if (hasAttachments && attachments) {\n        attachmentOutput = <AttachmentIcons attachments={attachments} />;\n    }\n    const HeadingTag = `h${headingLevel}` as \"h1\";\n\n    const { isCompact } = useLayout();\n\n    const media = hasMedia ? (\n        <div\n            className={classNames(classes.mediaElement, {\n                hasImage: showImage,\n                [classes.compactMediaElement]: isCompact,\n            })}\n        >\n            {showImage && imageComponent}\n            {attachmentOutput}\n        </div>\n    ) : null;\n\n    const excerptElement =\n        excerpt && excerpt.length > 0 ? (\n            <Paragraph className={classNames(classes.excerpt, { [classes.compactExcerpt]: isCompact })}>\n                <>\n                    <TruncatedText maxCharCount={160}>{excerpt}</TruncatedText>\n                    {afterExcerpt}\n                </>\n            </Paragraph>\n        ) : null;\n\n    return (\n        <li className={classNames(classesSearchResults.item, className)}>\n            <article className={classesSearchResults.result}>\n                <div className={classNames(classes.root)}>\n                    <div className={classes.content}>\n                        {icon && <div className={classes.iconWrap}>{icon}</div>}\n                        <div className={classNames(classes.main, { hasMedia: !!media, hasIcon: !!icon })}>\n                            <SmartLink to={url} tabIndex={0} className={classes.link} rel={props.rel}>\n                                <HeadingTag className={classes.title}>{name}</HeadingTag>\n                            </SmartLink>\n                            {meta && <div className={classes.metas}>{meta}</div>}\n                            {isCompact && media}\n                            {!isCompact && excerptElement}\n                        </div>\n                        {!isCompact && media}\n                        {isCompact && excerptElement}\n                    </div>\n                </div>\n            </article>\n        </li>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { absolutePosition, defaultTransition } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { linearGradient, percent, px, translateY } from \"csx\";\nimport { buttonResetMixin } from \"@library/forms/buttonMixins\";\n\nexport const collapsableContentClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const style = styleFactory(\"collapsableContent\");\n\n    const paddingAdjustment = style(\"paddingAdjustment\", {});\n\n    const root = style({\n        background: ColorsUtils.colorOut(globalVars.mainColors.bg),\n        position: \"relative\",\n    });\n\n    const heightContainer = style(\"heightContainer\", {\n        position: \"relative\",\n        display: \"block\",\n        overflow: \"hidden\",\n    });\n\n    const collapser = style(\"collapser\", {\n        ...{\n            \"&&\": {\n                ...buttonResetMixin(),\n                borderRadius: 0,\n                width: percent(100),\n                height: styleUnit(globalVars.icon.sizes.default),\n                padding: 0,\n                margin: 0,\n            },\n        },\n    });\n\n    const footer = style(\"footer\", {\n        position: \"relative\",\n        height: styleUnit(globalVars.icon.sizes.default),\n    });\n\n    const collapserIcon = style(\"collapserIcon\", {\n        ...defaultTransition(\"transform\"),\n        margin: \"auto\",\n        height: styleUnit(globalVars.icon.sizes.default),\n        display: \"block\",\n    });\n\n    const gradient = style(\"gradient\", {\n        ...absolutePosition.topLeft(),\n        width: percent(100),\n        height: 75,\n        background: linearGradient(\n            \"to bottom\",\n            ColorsUtils.colorOut(globalVars.mainColors.bg.fade(0))!,\n            ColorsUtils.colorOut(globalVars.mainColors.bg)!,\n        ),\n        transform: `translateY(-100%)`,\n    });\n\n    return { heightContainer, root, collapser, collapserIcon, footer, gradient, paddingAdjustment };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { collapsableContentClasses } from \"@library/content/collapsableContentStyles\";\nimport Button from \"@library/forms/Button\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { BottomChevronIcon } from \"@library/icons/common\";\nimport { t } from \"@library/utility/appUtils\";\nimport { uniqueIDFromPrefix } from \"@library/utility/idUtils\";\nimport { useDomNodeAttachment, useMeasure } from \"@vanilla/react-utils\";\nimport classNames from \"classnames\";\nimport { nextTick } from \"q\";\nimport React, { useLayoutEffect, useMemo, useRef, useState } from \"react\";\nimport { animated, useSpring } from \"react-spring\";\nimport ReactDOM from \"react-dom\";\n\ninterface IProps {\n    /** The maximum collapsed height of the collapser. */\n    maxHeight?: number;\n\n    /**\n     * A height to allow the content to reach without collapsing.\n     * It can be awkward if you size w/ the collapser is actually taller than the if you didn't have one at all.\n     *\n     * This is basically \"wiggle\" room to prevent that from occuring.\n     **/\n    overshoot?: number;\n\n    /** A CSS class to apply to the content area of the collapser. */\n    className?: string;\n\n    /** If specified simple CSS classes will be applied to allow external styling. */\n    allowsCssOverrides?: boolean;\n\n    /** Whether or not the content area is collapsed by default. */\n    isExpandedDefault?: boolean;\n\n    /** React children to apply. */\n    children?: React.ReactNode;\n\n    /** An array of DOM nodes to apply as children instead of react contents. See autoWrapCollapsableContent. */\n    domNodesToAttach?: Node[];\n}\n\n/**\n * Content collapsing react component.\n */\nexport function CollapsableContent(props: IProps) {\n    const { isExpandedDefault = false, domNodesToAttach } = props;\n    const [isExpanded, setIsExpanded] = useState(isExpandedDefault);\n\n    const containerMaxHeight = props.maxHeight ? props.maxHeight : 100;\n    const containerOvershoot = props.overshoot ? props.overshoot : 50;\n\n    const heightLimit = containerMaxHeight + containerOvershoot;\n\n    const scrollRef = useRef<HTMLDivElement>(null);\n\n    // When we mount for the first time copy domNodes over\n    // For usage with autoWrapCollapsableContent()\n\n    const ref = useDomNodeAttachment(domNodesToAttach);\n    const measurements = useMeasure(ref);\n\n    useLayoutEffect(() => {\n        nextTick(() => {\n            scrollRef.current!.scrollTo({ top: 0 });\n        });\n    });\n\n    const toggleCollapse = () => {\n        if (isExpanded) {\n            if (ref.current) {\n                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n                const boundingRect = ref.current.getBoundingClientRect();\n                const shrinkageHeight =\n                    boundingRect.height < containerMaxHeight ? 0 : boundingRect.height - containerMaxHeight;\n                const scrollAdjustedByShrinkage = Math.max(scrollTop - shrinkageHeight, 0);\n\n                window.scrollTo({ top: scrollAdjustedByShrinkage, behavior: \"smooth\" });\n            }\n            setIsExpanded(false);\n        } else {\n            setIsExpanded(true);\n        }\n    };\n\n    const hasMeasuredHeight = measurements.height > 0;\n    const hasSmallMeasuredHeight = measurements.height < heightLimit;\n    const maxCollapsedHeight = hasMeasuredHeight && hasSmallMeasuredHeight ? measurements.height : containerMaxHeight;\n    const targetHeight = isExpanded ? measurements.height : maxCollapsedHeight;\n    const maxHeight = maxCollapsedHeight > measurements.height ? measurements.height : maxCollapsedHeight;\n\n    const { height } = useSpring({\n        height: targetHeight > 0 ? targetHeight : \"auto\",\n    });\n\n    const gradientProps = useSpring({\n        opacity: isExpanded ? 0 : 1,\n    });\n\n    const classes = collapsableContentClasses();\n\n    const hasOverflow = measurements.height > heightLimit;\n\n    const title = isExpanded ? t(\"Collapse\") : t(\"Expand\");\n\n    const toggleID = useMemo(() => uniqueIDFromPrefix(\"collapsableContent_toggle\"), []);\n    const contentID = useMemo(() => uniqueIDFromPrefix(\"collapsableContent_content\"), []);\n\n    return (\n        <div className={classNames(classes.root, props.allowsCssOverrides && \"collapsableContent\")}>\n            <animated.div\n                id={contentID}\n                ref={scrollRef}\n                style={{\n                    minHeight: maxHeight,\n                    height: height,\n                }}\n                className={classNames(classes.heightContainer)}\n                aria-expanded={isExpanded}\n            >\n                <div ref={ref} className={props.className}>\n                    {props.children}\n                </div>\n            </animated.div>\n\n            {hasOverflow && (\n                <div className={classes.footer}>\n                    <animated.div\n                        style={gradientProps}\n                        className={classNames(\n                            classes.gradient,\n                            props.allowsCssOverrides && \"collapsableContent-gradient\",\n                        )}\n                    />\n                    <Button\n                        id={toggleID}\n                        title={title}\n                        className={classes.collapser}\n                        baseClass={ButtonTypes.CUSTOM}\n                        onClick={toggleCollapse}\n                        controls={contentID}\n                    >\n                        <BottomChevronIcon\n                            title={title}\n                            className={classes.collapserIcon}\n                            rotate={!isExpanded ? undefined : 180}\n                        />\n                    </Button>\n                </div>\n            )}\n        </div>\n    );\n}\n\n/**\n * Take any elements that have the class `.js-collapsable` and wrap them in this collapser.\n */\nexport async function autoWrapCollapsableContent() {\n    const jsCollapsables = document.body.querySelectorAll(\".js-collapsable\");\n\n    return await Promise.all(\n        Array.from(jsCollapsables).map((element: HTMLElement) => {\n            return new Promise((resolve) => {\n                const nodes = Array.from(element.childNodes);\n                const className = element.getAttribute(\"data-className\") || undefined;\n\n                ReactDOM.render(\n                    <CollapsableContent\n                        className={className}\n                        domNodesToAttach={nodes}\n                        allowsCssOverrides\n                    ></CollapsableContent>,\n                    element,\n                    () => resolve(),\n                );\n                element.classList.remove(\"js-collapsable\");\n            });\n        }),\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport { EmbedContainer } from \"@library/embeddedContent/components/EmbedContainer\";\nimport { EmbedContent } from \"@library/embeddedContent/components/EmbedContent\";\n\ninterface IProps extends IBaseEmbedProps {\n    height: number;\n    width: number;\n}\n\nlet _supportFrames = false;\n\nexport function supportsFrames(newValue?: boolean): boolean {\n    if (newValue != null) {\n        _supportFrames = newValue;\n    }\n    return _supportFrames;\n}\n\n/**\n * A class for rendering Giphy embeds.\n */\nexport function IFrameEmbed(props: IProps): JSX.Element {\n    const paddingBottom = ((props.height || 1) / (props.width || 1)) * 100 + \"%\";\n    const ratioStyle: React.CSSProperties = {\n        maxWidth: props.width ? props.width + \"px\" : \"100%\",\n        paddingBottom,\n    };\n\n    return (\n        <EmbedContainer className=\"embedIFrame\">\n            <EmbedContent type={props.embedType}>\n                <div className=\"embedExternal-ratio\" style={ratioStyle}>\n                    <iframe\n                        // We're excluding the following capabiltiies.\n                        // allow-popups - Don't allow popups (window.open(), showModalDialog(), target=”_blank”, etc.).\n                        // allow-pointer-lock - Don't allow the frame to lock the pointer.\n                        // allow-top-navigation - Don't allow the document to break out of the frame by navigating the top-level window.\n                        sandbox=\"allow-same-origin allow-scripts allow-forms\"\n                        src={props.url}\n                        className=\"embedIFrame-iframe\"\n                        frameBorder={0}\n                    />\n                </div>\n            </EmbedContent>\n        </EmbedContainer>\n    );\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ensureScript } from \"@vanilla/dom-utils\";\nimport { EmbedContent } from \"@library/embeddedContent/components/EmbedContent\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport React, { useLayoutEffect } from \"react\";\nimport { EmbedContainer } from \"@library/embeddedContent/components/EmbedContainer\";\n\ninterface IProps extends IBaseEmbedProps {\n    account: string;\n    videoID: string;\n    playerID: string;\n    playerEmbed: string;\n}\n\n/**\n * A class for rendering Brightcove video embeds.\n */\nexport function BrightcoveEmbed(props: IProps): JSX.Element {\n    const playerId = \"player-\" + Math.random().toString(36).substr(2, 9);\n\n    const SCRIPT_PLAYER =\n        \"https://players.brightcove.net/\" +\n        props.account +\n        \"/\" +\n        props.playerID +\n        \"_\" +\n        props.playerEmbed +\n        \"/index.min.js\";\n    //Load JS based on account and player information.\n    useLayoutEffect(() => {\n        void ensureScript(SCRIPT_PLAYER);\n    });\n    const VideoJS = \"video-js\";\n    // Aspect Ratio: Using `vjs-fluid` class - Waits for the video metadata to load then calculate the correct aspect ratio to use.\n    return (\n        <>\n            <EmbedContainer className=\"embedVideo\">\n                <EmbedContent type={props.embedType}>\n                    <VideoJS\n                        id={playerId}\n                        data-account={props.account}\n                        data-player={props.playerID}\n                        data-embed={props.playerEmbed}\n                        data-video-id={props.videoID}\n                        class=\"video-js vjs-fluid\"\n                        controls\n                    ></VideoJS>\n                </EmbedContent>\n            </EmbedContainer>\n        </>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { EmbedContainer } from \"@library/embeddedContent/components/EmbedContainer\";\nimport { EmbedContent } from \"@library/embeddedContent/components/EmbedContent\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport React from \"react\";\n\ninterface IProps extends IBaseEmbedProps {\n    author: string;\n    codePenID: string;\n    height?: number;\n    name?: string;\n}\n\nconst MIN_HEIGHT = 350;\n\n/**\n * A class for rendering CodePen embeds.\n */\nexport function CodePenEmbed(props: IProps): JSX.Element {\n    const src = `https://codepen.io/${props.author}/embed/preview/${props.codePenID}`;\n\n    return (\n        <EmbedContent type={props.embedType}>\n            <iframe src={src} height={Math.max(props.height || MIN_HEIGHT, MIN_HEIGHT)} width=\"100%\" scrolling=\"no\" />\n        </EmbedContent>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { flexHelper } from \"@library/styles/styleHelpers\";\nimport { px } from \"csx\";\n\nexport const embedErrorClasses = useThemeCache(() => {\n    const style = styleFactory(\"embedError\");\n    const renderErrorRoot = style(\"renderErrorRoot\", {\n        display: \"block\",\n        textAlign: \"left\",\n    });\n\n    const renderErrorIconLink = style(\"renderErrorIconLink\", {\n        paddingLeft: px(4),\n        verticalAlign: \"middle\",\n    });\n\n    return { renderErrorRoot, renderErrorIconLink };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { WarningIcon } from \"@library/icons/common\";\nimport { t } from \"@library/utility/appUtils\";\nimport { embedErrorClasses } from \"@library/embeddedContent/components/embedErrorStyles\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport { EMBED_FOCUS_CLASS } from \"@library/embeddedContent/embedConstants\";\nimport classNames from \"classnames\";\nimport { iconClasses } from \"@library/icons/iconStyles\";\n\ninterface IProps {\n    url: string;\n}\n\nexport function EmbedRenderError(props: IProps) {\n    const warningTitle = t(\"This embed could not be loaded in your browser.\");\n    const classes = embedErrorClasses();\n    const helpUrl =\n        \"https://success.vanillaforums.com/kb/articles/13-rich-editor#what-causes-the-warning-icon-while-inserting-a-rich-embed\";\n\n    return (\n        <div className={classNames(EMBED_FOCUS_CLASS, classes.renderErrorRoot, \"embedLinkLoader-link\")} tabIndex={-1}>\n            <SmartLink to={props.url} rel=\"nofollow\">\n                {props.url}\n            </SmartLink>\n            <SmartLink className={classes.renderErrorIconLink} to={helpUrl}>\n                <WarningIcon className={iconClasses().errorFgColor} warningMessage={warningTitle} />\n            </SmartLink>\n        </div>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { EmbedRenderError } from \"@library/embeddedContent/components/EmbedRenderError\";\n\ninterface IProps {\n    url: string;\n    children: React.ReactNode;\n}\n\ninterface IState {\n    error: Error | null;\n}\n\n/**\n * Error boundary for catching rendering errors from embeds.\n */\nexport class EmbedErrorBoundary extends React.PureComponent<IProps, IState> {\n    public state: IState = {\n        error: null,\n    };\n\n    public render() {\n        if (this.state.error) {\n            return <EmbedRenderError url={this.props.url} />;\n        } else {\n            return this.props.children;\n        }\n    }\n\n    public componentDidCatch(error: Error) {\n        this.setState({ error });\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { HumanFileSize } from \"@library/utility/fileUtils\";\nimport { GetAttachmentIcon } from \"@library/content/attachments/attachmentUtils\";\nimport { AttachmentType } from \"@library/content/attachments/AttatchmentType\";\nimport { attachmentClasses } from \"@library/content/attachments/attachmentStyles\";\nimport { metasClasses } from \"@library/styles/metasStyles\";\nimport Translate from \"@library/content/Translate\";\nimport DateTime from \"@library/content/DateTime\";\nimport { attachmentIconClasses } from \"@library/content/attachments/attachmentIconsStyles\";\nimport classNames from \"classnames\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport { EmbedContainer } from \"@library/embeddedContent/components/EmbedContainer\";\nimport { EmbedContainerSize } from \"@library/embeddedContent/components/EmbedContainerSize\";\nimport { EmbedContent } from \"@library/embeddedContent/components/EmbedContent\";\nimport { useEmbedContext } from \"@library/embeddedContent/IEmbedContext\";\n\nexport interface IFileAttachment {\n    name: string; // File name\n    title?: string; // Optional other label for file\n    dateUploaded: string;\n    mimeType?: string;\n    deleteAttachment?: () => void;\n}\n\ninterface IProps extends IFileAttachment {\n    type: AttachmentType;\n    size: number; // bytes\n    url: string;\n}\n\nexport default function Attachment(props) {\n    const { title, name, url, dateUploaded, type, mimeType, size } = props;\n    const label = title || name;\n    const classes = attachmentClasses();\n    const iconClasses = attachmentIconClasses();\n    const classesMetas = metasClasses();\n    const { inEditor } = useEmbedContext();\n\n    return (\n        <EmbedContainer size={EmbedContainerSize.SMALL}>\n            <EmbedContent type={props.type}>\n                <SmartLink\n                    to={url}\n                    className={classNames(classes.link, classes.box)}\n                    type={mimeType}\n                    download={name}\n                    tabIndex={inEditor ? -1 : 0}\n                >\n                    {type && (\n                        <div className={classNames(classes.format)}>\n                            <GetAttachmentIcon type={type} className={iconClasses.root} />\n                        </div>\n                    )}\n                    <div className={classNames(classes.main)}>\n                        <div className={classNames(classes.title)}>{label}</div>\n                        <div className={classNames(classes.metas, classesMetas.root)}>\n                            {dateUploaded && (\n                                <span className={classesMetas.meta}>\n                                    <Translate source=\"Uploaded <0/>\" c0={<DateTime timestamp={dateUploaded} />} />\n                                </span>\n                            )}\n                            <span className={classesMetas.meta}>\n                                <HumanFileSize numBytes={size} />\n                            </span>\n                        </div>\n                    </div>\n                </SmartLink>\n            </EmbedContent>\n        </EmbedContainer>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport Attachment from \"@library/content/attachments/Attachment\";\nimport { mimeTypeToAttachmentType } from \"@library/content/attachments/attachmentUtils\";\n\ninterface IProps extends IBaseEmbedProps {\n    type: string; // Mime type.\n    size: number;\n    dateInserted: string;\n    name: string;\n}\n\n/**\n * An embed class for quoted user content on the same site.\n */\nexport function FileEmbed(props: IProps) {\n    const { type, size, dateInserted, name, url } = props;\n    const attachmentType = mimeTypeToAttachmentType(type);\n    return (\n        <Attachment\n            type={attachmentType}\n            size={size}\n            name={name}\n            url={url}\n            dateUploaded={dateInserted}\n            mimeType={type}\n        />\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ensureScript } from \"@vanilla/dom-utils\";\nimport { escapeHTML } from \"@vanilla/dom-utils\";\nimport { EmbedContent } from \"@library/embeddedContent/components/EmbedContent\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport React, { useLayoutEffect } from \"react\";\nimport { useThrowError } from \"@vanilla/react-utils\";\n\ninterface IProps extends IBaseEmbedProps {\n    height: number;\n    width: number;\n    name?: string;\n    photoUrl?: string;\n    photoID: string;\n    foreignID: string;\n    embedSignature: string;\n}\n\n/**\n * A class for rendering Getty Images embeds.\n */\nexport function GettyImagesEmbed(props: IProps): JSX.Element {\n    const throwError = useThrowError();\n\n    useLayoutEffect(() => {\n        void convertGettyEmbeds().catch(throwError);\n    });\n\n    return (\n        <EmbedContent type={props.embedType}>\n            <a\n                className=\"embedExternal-content gie-single js-gettyEmbed\"\n                href={`https://www.gettyimages.com/detail/${props.photoID}`}\n                id={props.foreignID}\n                data-height={props.height}\n                data-width={props.width}\n                data-sig={props.embedSignature}\n                data-items={props.photoID}\n            >\n                {props.url}\n            </a>\n        </EmbedContent>\n    );\n}\n\nasync function convertGettyEmbeds() {\n    const gettyPosts = document.querySelectorAll(\".js-gettyEmbed\");\n    if (gettyPosts.length > 0) {\n        for (const post of gettyPosts) {\n            const url = post.getAttribute(\"href\") || \"\";\n            const foreignID = post.getAttribute(\"id\") || \"\";\n            const embedSignature = post.getAttribute(\"data-sig\") || \"\";\n            const height = Number(post.getAttribute(\"data-height\")) || 1;\n            const width = Number(post.getAttribute(\"data-width\")) || 1;\n            const items = escapeHTML(post.getAttribute(\"data-items\") || \"\");\n            const data: IProps = {\n                embedType: \"gettyimages\",\n                url,\n                height,\n                width,\n                foreignID,\n                embedSignature,\n                photoID: items,\n            };\n            await loadGettyImages(data);\n            post.classList.remove(\"js-gettyEmbed\");\n        }\n    }\n}\n\nasync function loadGettyImages(props: IProps) {\n    const fallbackCallback = (c: any) => {\n        (window.gie.q = window.gie.q || []).push(c);\n    };\n    // This is part of Getty's embed code, we need to ensure embeds are loaded and sent to their widget.js script.\n    window.gie = window.gie || fallbackCallback;\n\n    window.gie(() => {\n        window.gie.widgets.load({\n            id: props.foreignID,\n            sig: props.embedSignature,\n            w: props.width + \"px\",\n            h: props.height + \"px\",\n            items: props.photoID,\n            caption: false,\n            is360: false,\n            tld: \"com\",\n        });\n    });\n\n    /// DO NOT IGNORE\n    /// This will turn totally sideways if window.gie is not populated before the script is initially loaded.\n    await ensureScript(\"https://embed-cdn.gettyimages.com/widgets.js\");\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport { EmbedContainer } from \"@library/embeddedContent/components/EmbedContainer\";\nimport { EmbedContent } from \"@library/embeddedContent/components/EmbedContent\";\n\ninterface IProps extends IBaseEmbedProps {\n    giphyID: string;\n    height: number;\n    width: number;\n}\n\n/**\n * A class for rendering Giphy embeds.\n */\nexport function GiphyEmbed(props: IProps): JSX.Element {\n    const paddingBottom = ((props.height || 1) / (props.width || 1)) * 100 + \"%\";\n    const ratioStyle: React.CSSProperties = {\n        maxWidth: props.width ? props.width + \"px\" : \"100%\",\n        paddingBottom,\n    };\n\n    if (!props.giphyID) {\n        throw new Error(\"Giphy embed fail, the post could not be found\");\n    }\n    const src = `https://giphy.com/embed/${props.giphyID}`;\n\n    return (\n        <EmbedContainer className=\"embedGiphy\">\n            <EmbedContent type={props.embedType}>\n                <div className=\"embedExternal-ratio\" style={ratioStyle}>\n                    <iframe src={src} className=\"giphy-embed embedGiphy-iframe\" />\n                </div>\n            </EmbedContent>\n        </EmbedContainer>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ensureScript } from \"@vanilla/dom-utils\";\nimport { EmbedContent } from \"@library/embeddedContent/components/EmbedContent\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport React, { useLayoutEffect } from \"react\";\nimport { useThrowError } from \"@vanilla/react-utils\";\n\ninterface IProps extends IBaseEmbedProps {\n    height: number;\n    imgurID: string;\n    isAlbum: boolean;\n    width: number;\n}\n\n/**\n * A class for rendering Imgur embeds.\n */\nexport function ImgurEmbed(props: IProps): JSX.Element {\n    const throwError = useThrowError();\n\n    useLayoutEffect(() => {\n        void convertImgurEmbeds().catch(throwError);\n    });\n\n    return (\n        <EmbedContent type={props.embedType}>\n            <blockquote className=\"imgur-embed-pub\" data-id={props.imgurID} />\n        </EmbedContent>\n    );\n}\n\nasync function convertImgurEmbeds() {\n    const images = Array.from(document.querySelectorAll(\".imgur-embed-pub\"));\n    if (images.length > 0) {\n        await ensureScript(\"https://s.imgur.com/min/embed.js\");\n\n        if (!window.imgurEmbed) {\n            throw new Error(\"The Imgur post failed to load\");\n        }\n\n        if (window.imgurEmbed.createIframe) {\n            const imagesLength = images.length;\n            for (let i = 0; i < imagesLength; i++) {\n                window.imgurEmbed.createIframe();\n            }\n        } else {\n            window.imgurEmbed.tasks = images.length;\n        }\n    }\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport React from \"react\";\n\ninterface IProps {\n    postID: string;\n}\n\n/**\n * A static dump of the instagram placeholder.\n *\n * We don't want to trust their arbitrary HTML so we've copied it as a react component here.\n */\nexport function InstagramPlaceholder(props: IProps) {\n    const url = `https://www.instagram.com/p/${props.postID}/?utm_source=ig_embed&utm_campaign=loading`;\n    return (\n        <blockquote\n            className=\"instagram-media\"\n            data-instgrm-captioned\n            data-instgrm-permalink={url}\n            data-instgrm-version={13}\n            style={{\n                background: \"#fff\",\n                border: 0,\n                borderRadius: \"3px\",\n                boxShadow: \"0 0 1px 0 rgba(0, 0, 0, 0.5), 0 1px 10px 0 rgba(0, 0, 0, 0.15)\",\n                margin: \"1px\",\n                padding: 0,\n            }}\n        >\n            <div style={{ padding: \"16px\" }}>\n                <a\n                    href={url}\n                    style={{\n                        background: \"#ffffff\",\n                        lineHeight: 0,\n                        padding: \"0 0\",\n                        textAlign: \"center\",\n                        textDecoration: \"none\",\n                        width: \"100%\",\n                    }}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                >\n                    <div style={{ display: \"flex\", flexDirection: \"row\", alignItems: \"center\" }}>\n                        <div\n                            style={{\n                                backgroundColor: \"#f4f4f4\",\n                                borderRadius: \"50%\",\n                                flexGrow: 0,\n                                height: \"40px\",\n                                marginRight: \"14px\",\n                                width: \"40px\",\n                            }}\n                        />\n                        <div\n                            style={{ display: \"flex\", flexDirection: \"column\", flexGrow: 1, justifyContent: \"center\" }}\n                        >\n                            <div\n                                style={{\n                                    backgroundColor: \"#f4f4f4\",\n                                    borderRadius: \"4px\",\n                                    flexGrow: 0,\n                                    height: \"14px\",\n                                    marginBottom: \"6px\",\n                                    width: \"100px\",\n                                }}\n                            />\n                            <div\n                                style={{\n                                    backgroundColor: \"#f4f4f4\",\n                                    borderRadius: \"4px\",\n                                    flexGrow: 0,\n                                    height: \"14px\",\n                                    width: \"60px\",\n                                }}\n                            />\n                        </div>\n                    </div>\n                    <div style={{ padding: \"19% 0\" }} />\n                    <div style={{ display: \"block\", height: \"50px\", margin: \"0 auto 12px\", width: \"50px\" }}>\n                        <svg\n                            width=\"50px\"\n                            height=\"50px\"\n                            viewBox=\"0 0 60 60\"\n                            version=\"1.1\"\n                            xmlns=\"https://www.w3.org/2000/svg\"\n                            xmlnsXlink=\"https://www.w3.org/1999/xlink\"\n                        >\n                            <g stroke=\"none\" strokeWidth={1} fill=\"none\" fillRule=\"evenodd\">\n                                <g transform=\"translate(-511.000000, -20.000000)\" fill=\"#000000\">\n                                    <g>\n                                        <path d=\"M556.869,30.41 C554.814,30.41 553.148,32.076 553.148,34.131 C553.148,36.186 554.814,37.852 556.869,37.852 C558.924,37.852 560.59,36.186 560.59,34.131 C560.59,32.076 558.924,30.41 556.869,30.41 M541,60.657 C535.114,60.657 530.342,55.887 530.342,50 C530.342,44.114 535.114,39.342 541,39.342 C546.887,39.342 551.658,44.114 551.658,50 C551.658,55.887 546.887,60.657 541,60.657 M541,33.886 C532.1,33.886 524.886,41.1 524.886,50 C524.886,58.899 532.1,66.113 541,66.113 C549.9,66.113 557.115,58.899 557.115,50 C557.115,41.1 549.9,33.886 541,33.886 M565.378,62.101 C565.244,65.022 564.756,66.606 564.346,67.663 C563.803,69.06 563.154,70.057 562.106,71.106 C561.058,72.155 560.06,72.803 558.662,73.347 C557.607,73.757 556.021,74.244 553.102,74.378 C549.944,74.521 548.997,74.552 541,74.552 C533.003,74.552 532.056,74.521 528.898,74.378 C525.979,74.244 524.393,73.757 523.338,73.347 C521.94,72.803 520.942,72.155 519.894,71.106 C518.846,70.057 518.197,69.06 517.654,67.663 C517.244,66.606 516.755,65.022 516.623,62.101 C516.479,58.943 516.448,57.996 516.448,50 C516.448,42.003 516.479,41.056 516.623,37.899 C516.755,34.978 517.244,33.391 517.654,32.338 C518.197,30.938 518.846,29.942 519.894,28.894 C520.942,27.846 521.94,27.196 523.338,26.654 C524.393,26.244 525.979,25.756 528.898,25.623 C532.057,25.479 533.004,25.448 541,25.448 C548.997,25.448 549.943,25.479 553.102,25.623 C556.021,25.756 557.607,26.244 558.662,26.654 C560.06,27.196 561.058,27.846 562.106,28.894 C563.154,29.942 563.803,30.938 564.346,32.338 C564.756,33.391 565.244,34.978 565.378,37.899 C565.522,41.056 565.552,42.003 565.552,50 C565.552,57.996 565.522,58.943 565.378,62.101 M570.82,37.631 C570.674,34.438 570.167,32.258 569.425,30.349 C568.659,28.377 567.633,26.702 565.965,25.035 C564.297,23.368 562.623,22.342 560.652,21.575 C558.743,20.834 556.562,20.326 553.369,20.18 C550.169,20.033 549.148,20 541,20 C532.853,20 531.831,20.033 528.631,20.18 C525.438,20.326 523.257,20.834 521.349,21.575 C519.376,22.342 517.703,23.368 516.035,25.035 C514.368,26.702 513.342,28.377 512.574,30.349 C511.834,32.258 511.326,34.438 511.181,37.631 C511.035,40.831 511,41.851 511,50 C511,58.147 511.035,59.17 511.181,62.369 C511.326,65.562 511.834,67.743 512.574,69.651 C513.342,71.625 514.368,73.296 516.035,74.965 C517.703,76.634 519.376,77.658 521.349,78.425 C523.257,79.167 525.438,79.673 528.631,79.82 C531.831,79.965 532.853,80.001 541,80.001 C549.148,80.001 550.169,79.965 553.369,79.82 C556.562,79.673 558.743,79.167 560.652,78.425 C562.623,77.658 564.297,76.634 565.965,74.965 C567.633,73.296 568.659,71.625 569.425,69.651 C570.167,67.743 570.674,65.562 570.82,62.369 C570.966,59.17 571,58.147 571,50 C571,41.851 570.966,40.831 570.82,37.631\" />\n                                    </g>\n                                </g>\n                            </g>\n                        </svg>\n                    </div>\n                    <div style={{ paddingTop: \"8px\" }}>\n                        <div\n                            style={{\n                                color: \"#3897f0\",\n                                fontFamily: \"Arial, sans-serif\",\n                                fontSize: \"14px\",\n                                fontStyle: \"normal\",\n                                fontWeight: 550,\n                                lineHeight: \"18px\",\n                            }}\n                        >\n                            View this post on Instagram\n                        </div>\n                    </div>\n                    <div style={{ padding: \"12.5% 0\" }} />\n                    <div style={{ display: \"flex\", flexDirection: \"row\", marginBottom: \"14px\", alignItems: \"center\" }}>\n                        <div>\n                            <div\n                                style={{\n                                    backgroundColor: \"#f4f4f4\",\n                                    borderRadius: \"50%\",\n                                    height: \"12.5px\",\n                                    width: \"12.5px\",\n                                    transform: \"translateX(0px) translateY(7px)\",\n                                }}\n                            />\n                            <div\n                                style={{\n                                    backgroundColor: \"#f4f4f4\",\n                                    height: \"12.5px\",\n                                    transform: \"rotate(-45deg) translateX(3px) translateY(1px)\",\n                                    width: \"12.5px\",\n                                    flexGrow: 0,\n                                    marginRight: \"14px\",\n                                    marginLeft: \"2px\",\n                                }}\n                            />\n                            <div\n                                style={{\n                                    backgroundColor: \"#f4f4f4\",\n                                    borderRadius: \"50%\",\n                                    height: \"12.5px\",\n                                    width: \"12.5px\",\n                                    transform: \"translateX(9px) translateY(-18px)\",\n                                }}\n                            />\n                        </div>\n                        <div style={{ marginLeft: \"8px\" }}>\n                            <div\n                                style={{\n                                    backgroundColor: \"#f4f4f4\",\n                                    borderRadius: \"50%\",\n                                    flexGrow: 0,\n                                    height: \"20px\",\n                                    width: \"20px\",\n                                }}\n                            />\n                            <div\n                                style={{\n                                    width: 0,\n                                    height: 0,\n                                    borderTop: \"2px solid transparent\",\n                                    borderLeft: \"6px solid #f4f4f4\",\n                                    borderBottom: \"2px solid transparent\",\n                                    transform: \"translateX(16px) translateY(-4px) rotate(30deg)\",\n                                }}\n                            />\n                        </div>\n                        <div style={{ marginLeft: \"auto\" }}>\n                            <div\n                                style={{\n                                    width: \"0px\",\n                                    borderTop: \"8px solid #f4f4f4\",\n                                    borderRight: \"8px solid transparent\",\n                                    transform: \"translateY(16px)\",\n                                }}\n                            />\n                            <div\n                                style={{\n                                    backgroundColor: \"#f4f4f4\",\n                                    flexGrow: 0,\n                                    height: \"12px\",\n                                    width: \"16px\",\n                                    transform: \"translateY(-4px)\",\n                                }}\n                            />\n                            <div\n                                style={{\n                                    width: 0,\n                                    height: 0,\n                                    borderTop: \"8px solid #f4f4f4\",\n                                    borderLeft: \"8px solid transparent\",\n                                    transform: \"translateY(-4px) translateX(8px)\",\n                                }}\n                            />\n                        </div>\n                    </div>\n                    <div\n                        style={{\n                            display: \"flex\",\n                            flexDirection: \"column\",\n                            flexGrow: 1,\n                            justifyContent: \"center\",\n                            marginBottom: \"24px\",\n                        }}\n                    >\n                        <div\n                            style={{\n                                backgroundColor: \"#f4f4f4\",\n                                borderRadius: \"4px\",\n                                flexGrow: 0,\n                                height: \"14px\",\n                                marginBottom: \"6px\",\n                                width: \"224px\",\n                            }}\n                        />\n                        <div\n                            style={{\n                                backgroundColor: \"#f4f4f4\",\n                                borderRadius: \"4px\",\n                                flexGrow: 0,\n                                height: \"14px\",\n                                width: \"144px\",\n                            }}\n                        />\n                    </div>\n                </a>\n                <p\n                    style={{\n                        color: \"#c9c8cd\",\n                        fontFamily: \"Arial, sans-serif\",\n                        fontSize: \"14px\",\n                        lineHeight: \"17px\",\n                        marginBottom: 0,\n                        marginTop: \"8px\",\n                        overflow: \"hidden\",\n                        padding: \"8px 0 7px\",\n                        textAlign: \"center\",\n                        textOverflow: \"ellipsis\",\n                        whiteSpace: \"nowrap\",\n                    }}\n                >\n                    <a\n                        href={url}\n                        style={{\n                            color: \"#c9c8cd\",\n                            fontFamily: \"Arial, sans-serif\",\n                            fontSize: \"14px\",\n                            fontStyle: \"normal\",\n                            fontWeight: \"normal\",\n                            lineHeight: \"17px\",\n                            textDecoration: \"none\",\n                        }}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                    >\n                        An instagram post.\n                    </a>\n                </p>\n            </div>\n        </blockquote>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { EmbedContainer } from \"@library/embeddedContent/components/EmbedContainer\";\nimport { EmbedContent } from \"@library/embeddedContent/components/EmbedContent\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport React, { useLayoutEffect } from \"react\";\nimport { ensureScript } from \"@vanilla/dom-utils\";\nimport { useThrowError } from \"@vanilla/react-utils\";\nimport { InstagramPlaceholder } from \"@library/embeddedContent/InstagramEmbedPlaceholder\";\n\ninterface IProps extends IBaseEmbedProps {\n    version: number;\n    postID: string;\n    height?: number;\n    width?: number;\n    name?: string;\n}\n\n/**\n * A class for rendering Instagram embeds.\n */\nexport function InstagramEmbed(props: IProps): JSX.Element {\n    const throwError = useThrowError();\n    useLayoutEffect(() => {\n        convertInstagramEmbeds().catch(throwError);\n    }, [throwError]);\n\n    const permaLink = `https://www.instagram.com/p/${props.postID}`;\n\n    const link = (\n        <a href={permaLink} rel=\"nofollow noreferrer ugc\">\n            {permaLink}\n        </a>\n    );\n\n    return (\n        <EmbedContainer>\n            <EmbedContent type={props.embedType}>\n                <div className=\"embedExternal embedInstagram\">\n                    <div className=\"embedExternal-content\">\n                        <InstagramPlaceholder postID={props.postID} />\n                    </div>\n                </div>\n            </EmbedContent>\n        </EmbedContainer>\n    );\n}\n\nasync function convertInstagramEmbeds() {\n    const instagramEmbeds = document.querySelectorAll(\".instagram-media\");\n    if (instagramEmbeds.length > 0) {\n        await ensureScript(\"https://platform.instagram.com/en_US/embeds.js\");\n\n        if (!window.instgrm) {\n            throw new Error(\"The Instagram post failed to load\");\n        }\n\n        return window.instgrm.Embeds.process();\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { HTMLAttributes } from \"react\";\nimport { embedContainerClasses } from \"@library/embeddedContent/components/embedStyles\";\nimport classNames from \"classnames\";\n\nexport function EmbedTitle(props: HTMLAttributes<HTMLHeadingElement>) {\n    const classes = embedContainerClasses();\n    return <h2 {...props} className={classNames(classes.title, props.className)} />;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport classNames from \"classnames\";\nimport { metasClasses } from \"@library/styles/metasStyles\";\nimport { EmbedContainer } from \"@library/embeddedContent/components/EmbedContainer\";\nimport TruncatedText from \"@library/content/TruncatedText\";\nimport { EmbedTitle } from \"@library/embeddedContent/components/EmbedTitle\";\nimport { EmbedContent } from \"@library/embeddedContent/components/EmbedContent\";\n\ninterface IProps extends IBaseEmbedProps {\n    photoUrl?: string;\n    body?: string;\n}\n\nexport function LinkEmbed(props: IProps) {\n    const { name, url, photoUrl, body } = props;\n    const classesMetas = metasClasses();\n    const title = name ? <EmbedTitle>{name}</EmbedTitle> : null;\n\n    const source = <span className={classNames(\"embedLink-source\", classesMetas.metaStyle)}>{url}</span>;\n\n    let linkImage: JSX.Element | null = null;\n    if (photoUrl) {\n        linkImage = <img src={photoUrl} className=\"embedLink-image\" aria-hidden=\"true\" />;\n    }\n\n    return (\n        <EmbedContainer className=\"embedText embedLink\">\n            <EmbedContent type=\"link\">\n                <SmartLink\n                    className={classNames(\"embedLink-link\", classesMetas.noUnderline)}\n                    to={url}\n                    rel=\"nofollow noreferrer ugc\"\n                    tabIndex={props.inEditor ? -1 : 0}\n                    aria-label={name}\n                >\n                    <article className=\"embedText-body embedLink-body\">\n                        {linkImage}\n                        <div className=\"embedText-main embedLink-main\">\n                            <div className=\"embedText-header embedLink-header\">\n                                {title}\n                                {source}\n                            </div>\n                            <TruncatedText tag=\"div\" className=\"embedLink-excerpt\" useMaxHeight={true}>\n                                {body}\n                            </TruncatedText>\n                        </div>\n                    </article>\n                </SmartLink>\n            </EmbedContent>\n        </EmbedContainer>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ensureScript } from \"@vanilla/dom-utils\";\nimport { EmbedContent } from \"@library/embeddedContent/components/EmbedContent\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport React, { useLayoutEffect } from \"react\";\nimport { useThrowError } from \"@vanilla/react-utils\";\nimport { EmbedContainer } from \"@library/embeddedContent/components/EmbedContainer\";\n\ninterface IProps extends IBaseEmbedProps {\n    sessionId: string;\n    domain: string;\n}\n\nconst PANOPTO_SCRIPT: string = \"https://developers.panopto.com/scripts/embedapi.min.js\";\n\nconst EMBED_LOADED_CLASS: string = \"isLoaded\";\n\n/**\n * A class for rendering Twitter embeds.\n */\nexport function PanoptoEmbed(props: IProps): JSX.Element {\n    const throwError = useThrowError();\n    const playerId = \"player-\" + Math.random().toString(36).substr(2, 9);\n\n    useLayoutEffect(() => {\n        void convertPanoptoEmbeds().catch(throwError);\n    });\n\n    // Ratio is hardcoded at 16:9. Panopto is not returning the dimensions.\n    return (\n        <>\n            <EmbedContainer className=\"embedVideo\">\n                <EmbedContent type={props.embedType}>\n                    <div\n                        id={playerId}\n                        className=\"panoptoVideo embedVideo-ratio is16by9\"\n                        data-domain={props.domain}\n                        data-playerid={playerId}\n                        data-sessionid={props.sessionId}\n                        data-url={props.url}\n                    ></div>\n                </EmbedContent>\n            </EmbedContainer>\n        </>\n    );\n}\n\n/**\n * Convert all of the Panopto embeds in the page.\n */\nasync function convertPanoptoEmbeds() {\n    const panoptoEmbeds = Array.from(document.querySelectorAll(\".panoptoVideo\"));\n\n    if (panoptoEmbeds.length > 0) {\n        await ensureScript(PANOPTO_SCRIPT);\n        panoptoEmbeds.map((contentElement) => {\n            // Only render the embed if its not loaded yet.\n            if (!contentElement.classList.contains(EMBED_LOADED_CLASS)) {\n                renderPanoptoEmbed(contentElement as HTMLElement);\n            }\n        });\n    }\n}\n\n/**\n * Render a single Panopto embed.\n */\nasync function renderPanoptoEmbed(element: HTMLElement) {\n    const sessionId = element.getAttribute(\"data-sessionid\");\n    if (sessionId == null) {\n        throw new Error(\"Attempted to embed a Panopto video but the sessionId could not be found.\");\n    }\n\n    const playerId = element.getAttribute(\"data-playerid\");\n    if (playerId == null) {\n        throw new Error(\"Attempted to embed a Panopto video but the playerId is missing.\");\n    }\n\n    const domain = element.getAttribute(\"data-domain\");\n    if (domain == null) {\n        throw new Error(\"Attempted to embed a Panopto video but the domain could not be found.\");\n    }\n\n    if (window.EmbedApi === undefined) {\n        throw new Error(\"Attempted to embed a Panopto but an error has occurred.\");\n    }\n\n    new window.EmbedApi(playerId, {\n        serverName: domain,\n        sessionId: sessionId,\n    });\n\n    element.classList.add(EMBED_LOADED_CLASS);\n\n    // Add embedVideo-iframe class for proper dimensions.\n    let iframe: HTMLElement | undefined = element.getElementsByTagName(\"iframe\")[0];\n    if (iframe != undefined) {\n        iframe.classList.add(\"embedVideo-iframe\");\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { useScrollOffset } from \"@library/layout/ScrollOffsetContext\";\nimport { useEffect } from \"react\";\nimport { initAllUserContent } from \"@library/content/index\";\n\nlet previousHashOffset = 0;\n\n/**\n * Hook for handling hash scrolling and user content rendering.\n *\n * @param content The content being displayed. Pass this to refresh the content when filled.\n * @param disabled Whether or not hash scrolling is disabled.\n */\nexport function useHashScrolling(content: string, disabled?: boolean) {\n    const { temporarilyDisabledWatching, getCalcedHashOffset } = useScrollOffset();\n    const calcedOffset = getCalcedHashOffset();\n    previousHashOffset = calcedOffset;\n\n    useEffect(() => {\n        if (disabled) {\n            return;\n        }\n        void initAllUserContent().then(() => {\n            initHashScrolling(calcedOffset, () => temporarilyDisabledWatching(500));\n        });\n    }, [calcedOffset, temporarilyDisabledWatching, disabled, content]);\n}\n\n/**\n * Scroll to a particular HTML element.\n */\nexport function scrollToElement(element?: HTMLElement, offset?: number, beforeScrollHandler?: () => void) {\n    const currentOffset = offset == null ? previousHashOffset : offset;\n    if (element) {\n        beforeScrollHandler && beforeScrollHandler();\n        setTimeout(() => {\n            const top = window.pageYOffset + element.getBoundingClientRect().top - currentOffset;\n            window.scrollTo({ top, behavior: \"smooth\" });\n        }, 10);\n    }\n}\n\n/**\n * Scroll to the window's current hash value.\n */\nexport function scrollToCurrentHash(offset?: number, beforeScrollHandler?: () => void) {\n    const currentOffset = offset == null ? previousHashOffset : offset;\n    const targetID = window.location.hash.replace(\"#\", \"\");\n    const element =\n        (document.querySelector(`[data-id=\"${targetID}\"]`) as HTMLElement) || document.getElementById(targetID);\n    scrollToElement(element, currentOffset, beforeScrollHandler);\n}\n\nexport function initHashScrolling(offset: number = 0, beforeScrollHandler?: () => void) {\n    scrollToCurrentHash(offset, beforeScrollHandler);\n    const hashChangeHandler = (e: HashChangeEvent) => {\n        e.preventDefault();\n        scrollToCurrentHash(offset, beforeScrollHandler);\n    };\n\n    window.addEventListener(\"hashchange\", hashChangeHandler);\n    return () => {\n        window.removeEventListener(\"hashchange\", hashChangeHandler);\n    };\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useHashScrolling } from \"@library/content/hashScrolling\";\nimport { userContentClasses } from \"@library/content/userContentStyles\";\n// import classNames from \"classnames\";\nimport React, { useMemo } from \"react\";\n\nimport { cx } from \"@library/styles/styleShim\";\n\ninterface IProps {\n    className?: string;\n    content: string;\n    ignoreHashScrolling?: boolean;\n}\n\n/**\n * A component for placing rendered user content.\n *\n * This will ensure that all embeds/etc are initialized.\n */\nexport default function UserContent(props: IProps) {\n    let content = props.content;\n    content = useUnsafeResponsiveTableHTML(content);\n    useHashScrolling(content, props.ignoreHashScrolling);\n\n    const classes = userContentClasses();\n\n    return (\n        <div\n            className={cx(\"userContent\", classes.root, props.className)}\n            dangerouslySetInnerHTML={{ __html: content }}\n        />\n    );\n}\n\n/**\n * WARNING!!! Only ever use this with server-parsed trusted HTML content.\n * @param html\n */\nfunction useUnsafeResponsiveTableHTML(html: string) {\n    return useMemo(() => {\n        const element = document.createElement(\"div\");\n        element.innerHTML = html;\n\n        element.querySelectorAll(\"table\").forEach(responsifyTable);\n\n        return element.innerHTML;\n    }, [html]);\n}\n\nfunction responsifyTable(table: HTMLTableElement) {\n    let head: HTMLElement | null = table.querySelector(\"thead\");\n    if (!head) {\n        // Check if our first body row is all ths\n        const firstRow = table.querySelector(\"tr\");\n        let isAllTh = true;\n        if (firstRow) {\n            Array.from(firstRow?.children).forEach((child) => {\n                if (child.tagName !== \"TH\") {\n                    isAllTh = false;\n                }\n            });\n        }\n\n        if (isAllTh) {\n            head = firstRow;\n        }\n    }\n\n    let headLabels: string[] | null = null;\n\n    if (head) {\n        head.classList.add(\"tableHead\");\n        // Apply labels for each table cell.\n        headLabels = Array.from(head.querySelectorAll(\"th\")).map((th) => th.innerText);\n        head.querySelectorAll(\"th\").forEach((th) => th.setAttribute(\"scope\", \"col\"));\n    }\n\n    const rows = table.querySelectorAll(\"tbody tr\");\n    rows.forEach((tr) => {\n        // Apply a scope on existing first ths.\n        const firstTh = tr.querySelector(\"th\");\n        if (firstTh) {\n            firstTh.setAttribute(\"scope\", \"row\");\n        }\n\n        const cells = tr.querySelectorAll(\"td, th\");\n        cells.forEach((td, i) => {\n            const mobileTh = document.createElement(\"th\");\n            if (headLabels) {\n                // Apply extra labels throughout the table.\n                const label = headLabels[i] ?? \"\";\n                mobileTh.textContent = label;\n                mobileTh.classList.add(\"mobileTableHead\");\n                mobileTh.setAttribute(\"aria-hidden\", \"true\");\n                tr.insertBefore(mobileTh, td);\n            }\n\n            if (i % 2 === 1) {\n                // Apply a class for mobile stripes.\n                td.classList.add(\"mobileStripe\");\n                mobileTh.classList.add(\"mobileStripe\");\n            }\n        });\n    });\n\n    // Wrap in a responsive table class.\n    if (table.parentNode) {\n        // create wrapper container\n        const wrapper = document.createElement(\"div\");\n        wrapper.classList.add(\"tableWrapper\");\n\n        // insert wrapper before table in the DOM tree\n        table.parentNode.insertBefore(wrapper, table);\n\n        // move table into wrapper\n        wrapper.appendChild(table);\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { objectFitWithFallback } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { calc, percent } from \"csx\";\nimport { lineHeightAdjustment } from \"@library/styles/textUtils\";\nimport { CSSObject } from \"@emotion/css\";\n\nexport const userLabelVariables = useThemeCache(() => {\n    const makeThemeVars = variableFactory(\"userLabel\");\n    const globalVars = globalVariables();\n    const { mainColors } = globalVars;\n\n    const avatar = makeThemeVars(\"spacing\", {\n        size: 40,\n        borderRadius: \"50%\",\n        margin: 8,\n    });\n\n    const name = makeThemeVars(\"name\", {\n        fontSize: globalVars.fonts.size.medium,\n        fontWeight: globalVars.fonts.weights.bold,\n    });\n\n    return {\n        avatar,\n        name,\n    };\n});\n\nexport const userLabelClasses = useThemeCache(() => {\n    const style = styleFactory(\"userLabel\");\n    const globalVars = globalVariables();\n    const vars = userLabelVariables();\n\n    const root = style({\n        display: \"flex\",\n        flexWrap: \"nowrap\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        width: percent(100),\n        minHeight: styleUnit(vars.avatar.size),\n    });\n\n    const fixLineHeight = style(\"fixLineHeight\", {});\n\n    const compact = style(\"compact\", {\n        ...{\n            [`&.${fixLineHeight}`]: lineHeightAdjustment(),\n        },\n    });\n\n    const main = style(\"main\", {\n        display: \"flex\",\n        flexDirection: \"column\",\n        flexWrap: \"nowrap\",\n        alignItems: \"flex-start\",\n        justifyContent: \"space-between\",\n        width: calc(`100% - ${styleUnit(vars.avatar.size + vars.avatar.margin)}`),\n        flexBasis: calc(`100% - ${styleUnit(vars.avatar.size + vars.avatar.margin)}`),\n        minHeight: styleUnit(vars.avatar.size),\n    });\n\n    const avatar = style(\"avatar\", {\n        ...objectFitWithFallback(),\n        overflow: \"hidden\",\n        ...Mixins.border({\n            color: globalVars.mixBgAndFg(0.1),\n            width: 1,\n            radius: vars.avatar.borderRadius,\n        }),\n    });\n    const avatarLink = style(\"avatarLink\", {\n        display: \"block\",\n        position: \"relative\",\n        width: styleUnit(vars.avatar.size),\n        height: styleUnit(vars.avatar.size),\n        flexBasis: styleUnit(vars.avatar.size),\n    });\n    const topRow = style(\"topRow\", {});\n    const bottomRow = style(\"bottomRow\", {});\n    const isCompact = style(\"isCompact\", {});\n\n    const userName = style(\"userName\", {\n        ...{\n            \"&&\": {\n                fontWeight: globalVars.fonts.weights.bold,\n                fontSize: styleUnit(globalVars.fonts.size.medium),\n                lineHeight: globalVars.lineHeights.condensed,\n            },\n            [`&&.${isCompact}`]: {\n                fontSize: styleUnit(globalVars.fonts.size.small),\n            },\n        },\n    });\n\n    return { root, avatar, avatarLink, topRow, bottomRow, userName, main, compact, isCompact, fixLineHeight };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const rolesClasses = useThemeCache(() => {\n    const style = styleFactory(\"roles\");\n    const globalVars = globalVariables();\n    const metaVars = globalVars.meta;\n\n    const role = style({\n        ...Mixins.border({ color: metaVars.text.color, radius: 3 }),\n        ...Mixins.padding({\n            horizontal: 4,\n        }),\n        ...{\n            \"&&\": {\n                fontSize: metaVars.text.size,\n                lineHeight: globalVars.lineHeights.condensed,\n            },\n        },\n    });\n\n    return { role };\n});\n","import React from \"react\";\nimport { IUser, IUserRoles } from \"@library/@types/api/users\";\nimport ConditionalWrap from \"@library/layout/ConditionalWrap\";\nimport { metasClasses } from \"@library/styles/metasStyles\";\nimport { rolesClasses } from \"@library/content/rolesStyles\";\nimport classNames from \"classnames\";\n\n/**\n * Display user role(s)\n */\n\ninterface IProps extends IUserRoles {\n    maxRoleCount?: number;\n    wrapper?: boolean;\n    classNane?: string;\n    roleClass?: string;\n}\n\nexport function Roles(props: IProps) {\n    const { roles, maxRoleCount = 1, wrapper = true } = props;\n\n    const classesMeta = metasClasses();\n    const classes = rolesClasses();\n\n    const userRoles = roles.map((r, i) => {\n        if (i < maxRoleCount) {\n            return (\n                <span\n                    key={i}\n                    className={classNames(classesMeta.meta, classes.role)}\n                    dangerouslySetInnerHTML={{ __html: r.name }}\n                />\n            );\n        }\n    });\n\n    return (\n        <ConditionalWrap condition={wrapper} className={classNames(classesMeta.root, \"isFlexed\")}>\n            {userRoles}\n        </ConditionalWrap>\n    );\n}\n","import React from \"react\";\nimport { IUserFragment } from \"@library/@types/api/users\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport { makeProfileUrl } from \"@library/utility/appUtils\";\nimport { userLabelClasses } from \"@library/content/userLabelStyles\";\nimport { Roles } from \"@library/content/Roles\";\nimport classNames from \"classnames\";\nimport DateTime from \"@library/content/DateTime\";\nimport { metasClasses } from \"@library/styles/metasStyles\";\nimport { ICategoryFragment } from \"@vanilla/addon-vanilla/@types/api/categories\";\n\n/**\n * Contains, user avatar, name, and optionnal meta data\n */\n\ninterface IUserLabel {\n    user: IUserFragment;\n    date?: string;\n    dateLink?: string;\n    category?: ICategoryFragment;\n    displayOptions?: {\n        showRole?: boolean;\n        showCategory?: boolean;\n    };\n    compact?: boolean;\n    fixLineHeight?: boolean;\n}\n\nexport function UserLabel(props: IUserLabel) {\n    const { user, date, dateLink, displayOptions = {}, category, compact = false, fixLineHeight = false } = props;\n    const { showRole = true, showCategory = false } = displayOptions;\n\n    const userUrl = makeProfileUrl(user.name);\n    const classes = userLabelClasses();\n    const classesMeta = metasClasses();\n\n    const dateComponent = dateLink ? (\n        <SmartLink to={dateLink} className={classNames(classesMeta.meta)}>\n            <DateTime timestamp={date} className={classNames(classesMeta.metaStyle)} />\n        </SmartLink>\n    ) : (\n        <DateTime timestamp={date} className={classNames(classesMeta.meta)} />\n    );\n\n    const categoryComponent =\n        showCategory && category ? (\n            <SmartLink to={category.url} className={classesMeta.meta}>\n                {category.name}\n            </SmartLink>\n        ) : null;\n\n    if (compact) {\n        return (\n            <div className={classNames(classes.compact, classesMeta.root, { [classes.fixLineHeight]: fixLineHeight })}>\n                <SmartLink to={userUrl} className={classNames(classes.userName, classes.isCompact, classesMeta.meta)}>\n                    {user.name}\n                </SmartLink>\n                {dateComponent}\n                {categoryComponent}\n            </div>\n        );\n    } else {\n        return (\n            <article className={classes.root}>\n                <SmartLink to={userUrl} className={classes.avatarLink}>\n                    <img src={user.photoUrl} alt={user.name} className={classes.avatar} />\n                </SmartLink>\n                <div className={classes.main}>\n                    <div className={classNames(classesMeta.root, \"isFlexed\", classes.topRow)}>\n                        <SmartLink to={userUrl} className={classNames(classes.userName, classesMeta.meta)}>\n                            {user.name}\n                        </SmartLink>\n                        {showRole && user.label && <Roles roles={[{ roleID: 0, name: user.label }]} wrapper={false} />}\n                    </div>\n                    <div className={classNames(classesMeta.root, \"isFlexed\", classes.bottomRow)}>\n                        {dateComponent}\n                        {categoryComponent}\n                    </div>\n                </div>\n            </article>\n        );\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { allLinkStates, importantUnit } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { lineHeightAdjustment } from \"@library/styles/textUtils\";\nimport { important, percent } from \"csx\";\nimport { embedContainerVariables } from \"@library/embeddedContent/components/embedStyles\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const quoteEmbedVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"quoteEmbed\");\n\n    const title = makeThemeVars(\"title\", {\n        padding: 14,\n    });\n\n    const userContent = makeThemeVars(\"userContent\", {\n        padding: 8,\n    });\n\n    const footer = makeThemeVars(\"footer\", {\n        height: 44,\n    });\n\n    return { title, footer, userContent };\n});\n\nexport const quoteEmbedClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const embedVars = embedContainerVariables();\n    const vars = quoteEmbedVariables();\n\n    const style = styleFactory(\"quoteEmbed\");\n\n    const root = style({\n        ...{\n            \"&&\": {\n                overflow: \"visible\",\n            },\n        },\n    });\n\n    const body = style(\"body\", {\n        display: \"block\",\n        textAlign: \"left\",\n        margin: 0,\n        padding: 0,\n        ...{\n            \"&::before, &::after\": {\n                content: \"initial\",\n            },\n        },\n    });\n\n    const userName = style(\"userName\", {\n        fontWeight: globalVars.fonts.weights.bold,\n    });\n\n    const title = style(\"title\", {\n        ...lineHeightAdjustment(),\n        ...Mixins.margin({\n            horizontal: importantUnit(0),\n            top: importantUnit(0),\n            bottom: importantUnit(globalVars.meta.spacing.default),\n        }),\n        display: \"block\",\n        width: percent(100),\n        color: important(ColorsUtils.colorOut(globalVars.mainColors.fg) as string),\n        fontSize: globalVars.fonts.size.medium,\n        fontWeight: globalVars.fonts.weights.bold,\n        lineHeight: globalVars.lineHeights.condensed,\n    });\n\n    const isPadded = style(\"isPadded\", {});\n    const fixLineHeight = style(\"fixLineHeight\", {});\n\n    const titleLink = style(\"titleLink\", {\n        display: \"block\",\n        position: \"relative\",\n        ...{\n            [`&.${isPadded}`]: {\n                paddingTop: styleUnit(vars.title.padding),\n            },\n        },\n    });\n\n    const header = style(\"header\", {\n        ...Mixins.padding({\n            all: embedVars.spacing.padding,\n            bottom: 0,\n        }),\n    });\n\n    const paddingAdjustment = style(\"paddingAdjustment\", {});\n\n    const content = style(\"content\", {\n        ...Mixins.padding({\n            all: embedVars.spacing.padding,\n        }),\n        width: percent(100),\n        boxSizing: \"border-box\",\n        ...{\n            [`&.${paddingAdjustment}`]: {\n                ...Mixins.padding({\n                    all: embedVars.spacing.padding,\n                    top: vars.userContent.padding,\n                }),\n            },\n        },\n    });\n\n    const footer = style(\"footer\", {\n        position: \"relative\",\n        ...Mixins.padding({\n            horizontal: embedVars.spacing.padding,\n        }),\n    });\n\n    const footerMain = style(\"footerMain\", {\n        display: \"flex\",\n        position: \"relative\",\n        flexWrap: \"wrap\",\n        width: percent(100),\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        minHeight: styleUnit(vars.footer.height),\n    });\n\n    const footerSeparator = style(\"footerSeparator\", {\n        // Reset\n        border: 0,\n        borderStyle: \"solid\",\n        margin: 0,\n        display: \"block\",\n\n        // Styling\n        width: percent(100),\n        height: styleUnit(1),\n        backgroundColor: ColorsUtils.colorOut(globalVars.mixBgAndFg(0.2)),\n    });\n\n    const postLink = style(\"postLink\", {\n        display: \"flex\",\n        alignItems: \"center\",\n        marginLeft: \"auto\",\n        ...allLinkStates({\n            allStates: {\n                textDecoration: \"none\",\n            },\n            noState: {\n                color: ColorsUtils.colorOut(globalVars.links.colors.default),\n            },\n            hover: {\n                color: ColorsUtils.colorOut(globalVars.links.colors.hover),\n            },\n            focus: {\n                color: ColorsUtils.colorOut(globalVars.links.colors.focus),\n            },\n            active: {\n                color: ColorsUtils.colorOut(globalVars.links.colors.active),\n            },\n        }),\n    });\n    const postLinkIcon = style(\"postLinkIcon\", {\n        color: \"inherit\",\n    });\n\n    const discussionLink = style(\"discussionLink\", {\n        height: styleUnit(globalVars.icon.sizes.default),\n        width: styleUnit(globalVars.icon.sizes.default),\n        ...allLinkStates({\n            allStates: {\n                textDecoration: \"none\",\n            },\n            noState: {\n                color: ColorsUtils.colorOut(globalVars.links.colors.default),\n            },\n            hover: {\n                color: ColorsUtils.colorOut(globalVars.links.colors.hover),\n            },\n            focus: {\n                color: ColorsUtils.colorOut(globalVars.links.colors.focus),\n            },\n            active: {\n                color: ColorsUtils.colorOut(globalVars.links.colors.active),\n            },\n        }),\n    });\n\n    const discussionIcon = style(\"discussionIcon\", {\n        color: \"inherit\",\n    });\n\n    const blockquote = style(\"blockquote\", {\n        margin: 0,\n        padding: 0,\n        ...{\n            \".userContent\": {\n                ...lineHeightAdjustment(),\n                fontSize: styleUnit(globalVars.fonts.size.medium),\n            },\n        },\n    });\n\n    return {\n        root,\n        body,\n        userName,\n        title,\n        titleLink,\n        isPadded,\n        header,\n        content,\n        fixLineHeight,\n        footer,\n        footerMain,\n        footerSeparator,\n        postLink,\n        postLinkIcon,\n        discussionLink,\n        discussionIcon,\n        blockquote,\n        paddingAdjustment,\n    };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { IUserFragment, IUserFragmentAndRoles } from \"@library/@types/api/users\";\nimport { CollapsableContent } from \"@library/content/CollapsableContent\";\nimport UserContent from \"@library/content/UserContent\";\nimport { UserLabel } from \"@library/content/UserLabel\";\nimport { EmbedContainer } from \"@library/embeddedContent/components/EmbedContainer\";\nimport { EmbedContent } from \"@library/embeddedContent/components/EmbedContent\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport { quoteEmbedClasses } from \"@library/embeddedContent/quoteEmbedStyles\";\nimport { DiscussionIcon, RightChevronIcon } from \"@library/icons/common\";\nimport ScreenReaderContent from \"@library/layout/ScreenReaderContent\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport { t } from \"@library/utility/appUtils\";\nimport { ICategoryFragment } from \"@vanilla/addon-vanilla/@types/api/categories\";\nimport classNames from \"classnames\";\nimport React from \"react\";\n\ninterface IProps extends IBaseEmbedProps {\n    body: string;\n    dateInserted: string;\n    insertUser: IUserFragment;\n    discussionLink?: string;\n    category?: ICategoryFragment;\n    // For compatibility, new options are hidden by default\n    displayOptions?: {\n        showUserLabel?: boolean;\n        showCompactUserInfo?: boolean;\n        showDiscussionLink?: boolean;\n        showPostLink?: boolean;\n        showCategoryLink?: boolean;\n        expandByDefault?: boolean;\n    };\n}\n\n/**\n * An embed class for quoted user content on the same site.\n *\n * This is not an editable quote. Instead it an expandable/collapsable snapshot of the quoted/embedded comment/discussion.\n */\nexport function QuoteEmbed(props: IProps) {\n    const { body, insertUser, name, url, dateInserted, discussionLink, category, displayOptions = {} } = props;\n\n    const classes = quoteEmbedClasses();\n    const {\n        showUserLabel = false,\n        showCompactUserInfo = true,\n        showDiscussionLink = true,\n        showPostLink = false,\n        showCategoryLink = false,\n        expandByDefault = false,\n    } = displayOptions;\n\n    const discussionTitle = t(\"View Original Discussion\");\n\n    const linkToDiscussion = showDiscussionLink && discussionLink && (\n        <SmartLink title={discussionTitle} to={discussionLink} className={classes.discussionLink}>\n            <DiscussionIcon title={discussionTitle} className={classes.discussionIcon} />\n            <ScreenReaderContent>{discussionTitle}</ScreenReaderContent>\n        </SmartLink>\n    );\n\n    const postTitle = t(\"View Post\");\n    const linkToPost = showPostLink && url && (\n        <SmartLink to={url} className={classes.postLink}>\n            {postTitle}\n            <RightChevronIcon title={postTitle} className={classes.postLinkIcon} />\n        </SmartLink>\n    );\n\n    const showHeader = showUserLabel || name || showCompactUserInfo;\n\n    return (\n        <EmbedContainer withPadding={false} className={classes.root}>\n            <EmbedContent type=\"Quote\">\n                <article className={classes.body}>\n                    <div\n                        onClick={(e) => {\n                            e.preventDefault();\n                        }}\n                    >\n                        {showHeader && (\n                            <header className={classes.header}>\n                                {showUserLabel && (\n                                    <UserLabel\n                                        user={insertUser}\n                                        date={dateInserted}\n                                        dateLink={url}\n                                        category={category}\n                                        displayOptions={{\n                                            showCategory: showCategoryLink,\n                                            showRole: true,\n                                        }}\n                                    />\n                                )}\n\n                                {name && (\n                                    <SmartLink\n                                        to={url}\n                                        className={classNames(classes.titleLink, { [classes.isPadded]: showUserLabel })}\n                                    >\n                                        <h2 className={classes.title}>{name}</h2>\n                                    </SmartLink>\n                                )}\n\n                                {!showUserLabel && showCompactUserInfo && (\n                                    <UserLabel\n                                        user={insertUser}\n                                        date={dateInserted}\n                                        dateLink={url}\n                                        compact={true}\n                                        category={category}\n                                        displayOptions={{ showCategory: showCategoryLink }}\n                                        fixLineHeight={!showUserLabel && !name}\n                                    />\n                                )}\n                            </header>\n                        )}\n                        <CollapsableContent\n                            className={classNames(classes.content, { [classes.paddingAdjustment]: showHeader })}\n                            isExpandedDefault={!!expandByDefault}\n                        >\n                            <blockquote className={classes.blockquote} cite={url}>\n                                <UserContent content={body} />\n                            </blockquote>\n                        </CollapsableContent>\n                    </div>\n\n                    {(linkToDiscussion || linkToPost) && (\n                        <footer className={classes.footer}>\n                            <hr className={classes.footerSeparator} aria-hidden={true} />\n                            <div className={classes.footerMain}>\n                                {linkToDiscussion}\n                                {linkToPost}\n                            </div>\n                        </footer>\n                    )}\n                </article>\n            </EmbedContent>\n        </EmbedContainer>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport { EmbedContainer } from \"@library/embeddedContent/components/EmbedContainer\";\nimport { EmbedContent } from \"@library/embeddedContent/components/EmbedContent\";\n\ninterface IProps extends IBaseEmbedProps {\n    playlistID?: number;\n    showArtwork: boolean;\n    trackID?: number;\n    userID?: number;\n    useVisualPlayer: boolean;\n}\n\n/**\n * A class for rendering SoundCloud embeds.\n */\nexport function SoundCloudEmbed(props: IProps): JSX.Element {\n    const frameSource = soundCloudPlayerUrl(props);\n\n    return (\n        <EmbedContainer>\n            <EmbedContent type={props.embedType}>\n                <div className=\"embedExternal embedSoundCloud\">\n                    <div className=\"embedExternal-content\">\n                        <iframe width=\"100%\" scrolling=\"no\" src={frameSource} />\n                    </div>\n                </div>\n            </EmbedContent>\n        </EmbedContainer>\n    );\n}\n\nfunction soundCloudPlayerUrl(props: IProps): string {\n    let resourceType: string;\n    let resourceID: number;\n\n    if (props.playlistID) {\n        resourceType = \"playlists\";\n        resourceID = props.playlistID;\n    } else if (props.trackID) {\n        resourceType = \"tracks\";\n        resourceID = props.trackID;\n    } else if (props.userID) {\n        resourceType = \"users\";\n        resourceID = props.userID;\n    } else {\n        throw new Error(\"Unable to determine SoundCloud resource type.\");\n    }\n\n    const parameters = {\n        show_artwork: props.showArtwork,\n        visual: props.useVisualPlayer,\n        url: `https://api.soundcloud.com/${resourceType}/${resourceID}`,\n    };\n    const query = Object.keys(parameters)\n        .map((key) => encodeURIComponent(key) + \"=\" + encodeURIComponent(parameters[key]))\n        .join(\"&\");\n\n    return `https://w.soundcloud.com/player/?${query}`;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { percent } from \"csx\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\n\nexport const twitterEmbedClasses = useThemeCache(() => {\n    const style = styleFactory(\"twitter\");\n    const mediaQueries = layoutVariables().mediaQueries();\n\n    const card = style(\n        \"card\",\n        {\n            display: \"inline-flex\",\n            minWidth: styleUnit(554),\n            maxWidth: percent(100),\n        },\n        mediaQueries.oneColumnDown({\n            minWidth: \"auto\",\n        }),\n    );\n\n    return { card };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ensureScript } from \"@vanilla/dom-utils\";\nimport { EmbedContent } from \"@library/embeddedContent/components/EmbedContent\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport { twitterEmbedClasses } from \"@library/embeddedContent/twitterEmbedStyles\";\nimport { visibility } from \"@library/styles/styleHelpers\";\nimport classNames from \"classnames\";\nimport React, { useEffect, useState, useLayoutEffect } from \"react\";\nimport { useThrowError } from \"@vanilla/react-utils\";\n\ninterface IProps extends IBaseEmbedProps {\n    statusID: string;\n}\n\nconst TWITTER_SCRIPT = \"https://platform.twitter.com/widgets.js\";\n\n/**\n * A class for rendering Twitter embeds.\n */\nexport function TwitterEmbed(props: IProps): JSX.Element {\n    const [twitterLoaded, setTwitterLoaded] = useState(false);\n    const throwError = useThrowError();\n    const classes = twitterEmbedClasses();\n    const { onRenderComplete } = props;\n\n    useLayoutEffect(() => {\n        // Don't count our tweet as rendered until the tweet is fully loaded.\n        onRenderComplete && onRenderComplete();\n    }, [twitterLoaded, onRenderComplete]);\n\n    useEffect(() => {\n        void convertTwitterEmbeds()\n            .then(() => {\n                // We need to track the load status for the internal representation.\n                // Otherwise we end up with a flash of the URL next to the rendered tweet.\n                setTwitterLoaded(true);\n            })\n            .catch(throwError);\n    }, [setTwitterLoaded, throwError]);\n\n    return (\n        <>\n            {!twitterLoaded && (\n                <div className={classNames(\"embedLinkLoader\")}>\n                    <a href={props.url} className=\"embedLinkLoader-link\" rel=\"nofollow\">\n                        {props.url} <span aria-hidden=\"true\" className=\"embedLinkLoader-loader\" />\n                    </a>\n                </div>\n            )}\n            <EmbedContent\n                type={props.embedType}\n                isSmall\n                className={twitterLoaded ? undefined : visibility().visuallyHidden}\n            >\n                <div\n                    className={classNames(\"js-twitterCard\", classes.card)}\n                    data-tweeturl={props.url}\n                    data-tweetid={props.statusID}\n                >\n                    <a href={props.url} className=\"tweet-url\" rel=\"nofollow noreferrer ugc\">\n                        {props.url}\n                    </a>\n                </div>\n            </EmbedContent>\n        </>\n    );\n}\n\nTwitterEmbed.async = true;\n\n/**\n * Render a single twitter embed.\n */\nasync function renderTweet(contentElement: HTMLElement) {\n    if (!window.twttr) {\n        throw new Error(\"The Twitter widget failed to load.\");\n    }\n\n    // Ensure we have a status id to look up.\n    const statusID = contentElement.getAttribute(\"data-tweetid\");\n    if (statusID == null) {\n        throw new Error(\"Attempted to embed a tweet but the statusID could not be found\");\n    }\n\n    // Check that we haven't already started to load this embed (In the case multiple onContents are fired off).\n    if (\n        !contentElement.classList.contains(\"js-twitterCardLoaded\") &&\n        !contentElement.classList.contains(\"js-twitterCardPreload\")\n    ) {\n        contentElement.classList.add(\"js-twitterCardPreload\");\n\n        // Remove a url if there is one around.\n        const url = contentElement.querySelector(\".tweet-url\");\n        if (url) {\n            url.remove();\n        }\n\n        // Render the embed.\n        const options = { conversation: \"none\" };\n        await window.twttr.widgets.createTweet(statusID, contentElement, options);\n\n        // Fade it in.\n        contentElement.classList.add(\"js-twitterCardLoaded\");\n    }\n}\n\n/**\n * Convert all of the twitter embeds in the page. This is for transforming twitter embeds that were\n * server rendered.\n *\n * @see library/Vanilla/Embeds/EmbedManager.php\n */\nexport async function convertTwitterEmbeds() {\n    const tweets = Array.from(document.querySelectorAll(\".js-twitterCard\"));\n    if (tweets.length > 0) {\n        await ensureScript(TWITTER_SCRIPT);\n        const promises = tweets.map((contentElement) => {\n            return renderTweet(contentElement as HTMLElement);\n        });\n\n        // Render all the pages twitter embeds at the same time.\n        await Promise.all(promises);\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { EmbedContainer } from \"@library/embeddedContent/components/EmbedContainer\";\nimport { EmbedContent } from \"@library/embeddedContent/components/EmbedContent\";\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport { t } from \"@library/utility/appUtils\";\nimport { simplifyFraction } from \"@vanilla/utils\";\nimport classNames from \"classnames\";\nimport React, { useCallback, useState } from \"react\";\nimport { style } from \"@library/styles/styleShim\";\nimport { percent } from \"csx\";\n\ninterface IProps extends IBaseEmbedProps {\n    height: number;\n    width: number;\n    photoUrl: string;\n    frameSrc: string;\n    time?: string;\n}\n\nexport function VideoEmbed(props: IProps) {\n    const { name, height, width, frameSrc, photoUrl, embedType } = props;\n\n    const [isPlaying, setIsPlaying] = useState(false);\n\n    const togglePlaying = useCallback(() => {\n        setIsPlaying(!isPlaying);\n    }, [setIsPlaying, isPlaying]);\n\n    let ratioClass: string | undefined;\n    const ratio = simplifyFraction(height || 3, width || 4);\n    switch (ratio.shorthand) {\n        case \"21:9\":\n            ratioClass = \"is21by9\";\n            break;\n        case \"4:3\":\n            ratioClass = \"is4by3\";\n            break;\n        case \"1:1\":\n            ratioClass = \"is1by1\";\n            break;\n        case \"16:9\":\n            ratioClass = \"is16by9\";\n            break;\n        default:\n            ratioClass = style({\n                label: \"isCustomRatio\",\n                paddingTop: percent(((height || 3) / (width || 4)) * 100),\n            });\n    }\n\n    return (\n        <EmbedContainer className=\"embedVideo\">\n            <EmbedContent type={embedType}>\n                <div className={classNames(\"embedVideo-ratio\", ratioClass)}>\n                    {isPlaying ? (\n                        <VideoIframe url={frameSrc} />\n                    ) : (\n                        <VideoThumbnail name={name} onClick={togglePlaying} photoUrl={photoUrl} />\n                    )}\n                </div>\n            </EmbedContent>\n        </EmbedContainer>\n    );\n}\n\nfunction VideoThumbnail(props: { name?: string; onClick: React.MouseEventHandler; photoUrl: string }) {\n    return (\n        <button type=\"button\" aria-label={props.name} className=\"embedVideo-playButton\" onClick={props.onClick}>\n            <img src={props.photoUrl} role=\"presentation\" className=\"embedVideo-thumbnail\" />\n            <span className=\"embedVideo-playIconWrap\">\n                <PlayIcon />\n            </span>\n        </button>\n    );\n}\n\nfunction VideoIframe(props: { url: string }) {\n    return (\n        <iframe\n            frameBorder=\"0\"\n            allow=\"autoplay; encrypted-media\"\n            className=\"embedVideo-iframe\"\n            src={props.url}\n            allowFullScreen={true}\n        />\n    );\n}\n\nfunction PlayIcon() {\n    const cssStyle: React.CSSProperties = { fill: \"currentColor\", strokeWidth: 0.3 };\n\n    return (\n        <svg className=\"embedVideo-playIcon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-1 -1 24 24\">\n            <title>{t(\"Play Video\")}</title>\n            <polygon\n                className=\"embedVideo-playIconPath embedVideo-playIconPath-triangle\"\n                style={cssStyle}\n                points=\"8.609 6.696 8.609 15.304 16.261 11 8.609 6.696\"\n            />\n        </svg>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { BrightcoveEmbed } from \"@library/embeddedContent/BrightcoveEmbed\";\nimport { CodePenEmbed } from \"@library/embeddedContent/CodePenEmbed\";\nimport { EmbedErrorBoundary } from \"@library/embeddedContent/components/EmbedErrorBoundary\";\nimport { FileEmbed } from \"@library/embeddedContent/FileEmbed\";\nimport { GettyImagesEmbed } from \"@library/embeddedContent/GettyImagesEmbed\";\nimport { GiphyEmbed } from \"@library/embeddedContent/GiphyEmbed\";\nimport { IFrameEmbed, supportsFrames } from \"@library/embeddedContent/IFrameEmbed\";\nimport { ImageEmbed } from \"@library/embeddedContent/ImageEmbed\";\nimport { ImgurEmbed } from \"@library/embeddedContent/ImgurEmbed\";\nimport { InstagramEmbed } from \"@library/embeddedContent/InstagramEmbed\";\nimport { LinkEmbed } from \"@library/embeddedContent/LinkEmbed\";\nimport { PanoptoEmbed } from \"@library/embeddedContent/PanoptoEmbed\";\nimport { QuoteEmbed } from \"@library/embeddedContent/QuoteEmbed\";\nimport { SoundCloudEmbed } from \"@library/embeddedContent/SoundCloudEmbed\";\nimport { convertTwitterEmbeds, TwitterEmbed } from \"@library/embeddedContent/TwitterEmbed\";\nimport { VideoEmbed } from \"@library/embeddedContent/VideoEmbed\";\nimport ScreenReaderContent from \"@library/layout/ScreenReaderContent\";\nimport { onContent, t } from \"@library/utility/appUtils\";\nimport { uniqueIDFromPrefix } from \"@library/utility/idUtils\";\nimport { mountReact } from \"@vanilla/react-utils\";\nimport { logError, logWarning } from \"@vanilla/utils\";\nimport React from \"react\";\nimport { EmbedContext, IEmbedContext } from \"./IEmbedContext\";\n\nconst EMBED_DESCRIPTION_ID = uniqueIDFromPrefix(\"embed-description\");\n\nexport interface IBaseEmbedData {\n    embedType: string;\n    url: string;\n    name?: string;\n}\n\nexport interface IBaseEmbedProps extends IEmbedContext, IBaseEmbedData {\n    [key: string]: any;\n}\n\ntype EmbedComponentType = React.ComponentType<IBaseEmbedProps> & {\n    async?: boolean;\n};\n\nconst registeredEmbeds = new Map<string, EmbedComponentType>();\n\nexport function registerEmbed(embedType: string, EmbedComponent: EmbedComponentType) {\n    registeredEmbeds.set(embedType, EmbedComponent);\n}\n\nexport function getEmbedForType(embedType: string): EmbedComponentType | null {\n    return registeredEmbeds.get(embedType) || null;\n}\n\nexport async function mountEmbed(mountPoint: HTMLElement, data: IBaseEmbedProps, inEditor: boolean) {\n    ensureBuiltinEmbeds();\n    return new Promise((resolve, reject) => {\n        const type = data.embedType || null;\n        if (type === null) {\n            logWarning(`Found embed with data`, data, `and no type on element`, mountPoint);\n            return;\n        }\n        const exception: string | null = \"exception\" in data ? data[\"exception\"] : null;\n        if (exception !== null) {\n            logWarning(`Found embed with data`, data, `and and exception`, exception, ` on element`, mountPoint);\n            return;\n        }\n        const EmbedClass = getEmbedForType(type);\n        if (EmbedClass === null) {\n            logWarning(\n                `Attempted to mount embed type ${type} on element`,\n                mountPoint,\n                `but could not find registered embed.`,\n            );\n            return;\n        }\n        mountPoint.removeAttribute(\"data-embedJson\");\n\n        const isAsync = EmbedClass.async;\n        const onMountComplete = () => resolve();\n        ensureEmbedDescription();\n\n        data = {\n            ...data,\n            descriptionID: EMBED_DESCRIPTION_ID,\n        };\n\n        // If the component is flagged as async, then it will confirm when the render is complete.\n        mountReact(\n            <EmbedErrorBoundary url={data.url}>\n                <EmbedContext.Provider value={data}>\n                    <EmbedClass\n                        {...data}\n                        inEditor={inEditor}\n                        onRenderComplete={isAsync ? onMountComplete : undefined}\n                    />\n                </EmbedContext.Provider>\n            </EmbedErrorBoundary>,\n            mountPoint,\n            !isAsync ? onMountComplete : undefined,\n            { bypassPortalManager: true },\n        );\n    });\n}\n\nfunction EmbedDescription() {\n    return (\n        <ScreenReaderContent id={EMBED_DESCRIPTION_ID} aria-hidden={true}>\n            {t(\"richEditor.externalEmbed.description\")}\n        </ScreenReaderContent>\n    );\n}\n\nfunction ensureEmbedDescription() {\n    // Ensure we have our modal container.\n    let description = document.getElementById(EMBED_DESCRIPTION_ID);\n\n    if (!description) {\n        description = document.createElement(\"div\");\n        document.body.append(description);\n        mountReact(<EmbedDescription />, description);\n    }\n}\n\nexport async function mountAllEmbeds(root: HTMLElement = document.body) {\n    const mountPoints = root.querySelectorAll(\".js-embed[data-embedjson]\");\n    const promises = Array.from(mountPoints).map((mountPoint) => {\n        try {\n            const parsedData = JSON.parse(mountPoint.getAttribute(\"data-embedjson\") || \"{}\");\n            return mountEmbed(mountPoint as HTMLElement, parsedData, false);\n        } catch (e) {\n            logError(\"failed to mountEmbed\", { error: e, mountPoint });\n            return Promise.resolve();\n        }\n    });\n    await Promise.all(promises);\n}\n\nlet builtinsRegistered = false;\n\n/**\n * Mount the built-in embeds if they aren't already.\n */\nfunction ensureBuiltinEmbeds() {\n    if (builtinsRegistered) {\n        return;\n    }\n    builtinsRegistered = true;\n    // Default embed registration\n    registerEmbed(\"codepen\", CodePenEmbed);\n    registerEmbed(\"file\", FileEmbed);\n    registerEmbed(\"gettyimages\", GettyImagesEmbed);\n    registerEmbed(\"getty\", GettyImagesEmbed);\n    registerEmbed(\"giphy\", GiphyEmbed);\n    registerEmbed(\"imgur\", ImgurEmbed);\n    registerEmbed(\"instagram\", InstagramEmbed);\n    registerEmbed(\"link\", LinkEmbed);\n    registerEmbed(\"quote\", QuoteEmbed);\n    registerEmbed(\"soundcloud\", SoundCloudEmbed);\n    registerEmbed(\"twitch\", VideoEmbed);\n    registerEmbed(\"twitter\", TwitterEmbed);\n    registerEmbed(\"vimeo\", VideoEmbed);\n    registerEmbed(\"wistia\", VideoEmbed);\n    registerEmbed(\"youtube\", VideoEmbed);\n    registerEmbed(\"panopto\", PanoptoEmbed);\n    registerEmbed(\"image\", ImageEmbed);\n    registerEmbed(\"brightcove\", BrightcoveEmbed);\n\n    if (supportsFrames()) {\n        registerEmbed(\"iframe\", IFrameEmbed);\n    }\n}\n\n// This is specifically required because of some legacy formats that don't render\n// The embed json format. Twitter was converted out of global JS and merged here.\nonContent(convertTwitterEmbeds);\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useState, useRef, useCallback, useEffect } from \"react\";\nimport SearchOption from \"@library/features/search/SearchOption\";\nimport { t } from \"@library/utility/appUtils\";\nimport { IWithSearchProps, withSearch } from \"@library/contexts/SearchContext\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport SearchBar from \"@library/features/search/SearchBar\";\nimport { useUniqueID } from \"@library/utility/idUtils\";\nimport { ISearchBarOverwrites, searchBarClasses } from \"@library/features/search/searchBarStyles\";\nimport { RouteComponentProps, withRouter } from \"react-router\";\nimport classNames from \"classnames\";\nimport { useLinkContext } from \"@library/routing/links/LinkContextProvider\";\nimport {\n    useSearchScope,\n    SEARCH_SCOPE_EVERYWHERE,\n    SEARCH_SCOPE_LOCAL,\n} from \"@library/features/search/SearchScopeContext\";\nimport { ISearchScopeNoCompact } from \"@library/features/search/SearchScopeContext\";\nimport merge from \"lodash/merge\";\nimport clone from \"lodash/clone\";\n\nexport interface IIndependentSearchProps extends IWithSearchProps, RouteComponentProps<{}> {\n    className?: string;\n    placeholder?: string;\n    buttonClass?: string;\n    buttonDropDownClass?: string;\n    inputClass?: string;\n    iconClass?: string;\n    buttonContentClassName?: string;\n    buttonLoaderClassName?: string;\n    cancelContentClassName?: string;\n    contentClass?: string;\n    valueContainerClasses?: string;\n    hideSearchButton?: boolean;\n    isLarge?: boolean;\n    buttonBaseClass?: ButtonTypes;\n    iconContainerClasses?: string;\n    resultsAsModalClasses?: string;\n    forceMenuOpen?: boolean;\n    scope?: ISearchScopeNoCompact;\n    initialQuery?: string;\n    overwriteSearchBar?: ISearchBarOverwrites;\n}\n\n/**\n * Implements independent search component. All wired up, just drop it where you need it.\n */\nexport function IndependentSearch(props: IIndependentSearchProps) {\n    const id = useUniqueID(\"search\");\n    const resultsRef = useRef<HTMLDivElement>(null);\n    const [query, setQuery] = useState(props.initialQuery || \"\");\n    const [forcedOptions, setForcedOptions] = useState<any[]>([]);\n    const contextScope = useSearchScope();\n    const scope = {\n        ...contextScope,\n        ...props.scope,\n    };\n    const hasScope = scope.optionsItems.length > 0;\n\n    const { pushSmartLocation } = useLinkContext();\n\n    const scopeValue = scope.value?.value || \"\";\n    const handleSubmit = useCallback(() => {\n        const searchQuery = [SEARCH_SCOPE_LOCAL, SEARCH_SCOPE_EVERYWHERE].includes(scopeValue)\n            ? `${query}&scope=${scopeValue}`\n            : query;\n        pushSmartLocation(props.searchOptionProvider.makeSearchUrl(searchQuery));\n    }, [props.searchOptionProvider, pushSmartLocation, query, scopeValue]);\n\n    const handleSearchChange = useCallback(\n        (newQuery: string) => {\n            setQuery(newQuery);\n        },\n        [setQuery],\n    );\n\n    const { forceMenuOpen, searchOptionProvider } = props;\n    useEffect(() => {\n        if (forceMenuOpen) {\n            searchOptionProvider.autocomplete(\"\").then((results) => {\n                setQuery(\"a\");\n                setForcedOptions(results);\n            });\n        }\n    }, [forceMenuOpen, searchOptionProvider]);\n\n    const classesSearchBar = searchBarClasses(\n        merge(clone(props.overwriteSearchBar), { scope: hasScope ? scope : undefined }),\n    );\n\n    return (\n        <div className={classNames(classesSearchBar.independentRoot, props.className)}>\n            <SearchBar\n                id={id}\n                forceMenuOpen={props.forceMenuOpen}\n                forcedOptions={forcedOptions}\n                placeholder={props.placeholder}\n                optionComponent={SearchOption}\n                noHeading={true}\n                title={t(\"Search\")}\n                value={query}\n                onChange={handleSearchChange}\n                onSearch={handleSubmit}\n                loadOptions={(query, options) =>\n                    props.searchOptionProvider.autocomplete(query, { ...options, scope: scope.value?.value })\n                }\n                triggerSearchOnClear={false}\n                resultsRef={resultsRef}\n                buttonClassName={props.buttonClass}\n                buttonDropDownClassName={props.buttonDropDownClass}\n                buttonBaseClass={props.buttonBaseClass}\n                buttonLoaderClassName={props.buttonLoaderClassName}\n                hideSearchButton={props.hideSearchButton || hasScope}\n                contentClass={props.contentClass}\n                valueContainerClasses={props.valueContainerClasses}\n                iconContainerClasses={props.iconContainerClasses}\n                scope={props.scope}\n                overwriteSearchBar={props.overwriteSearchBar}\n            />\n            <div\n                ref={resultsRef}\n                className={classNames(\"search-results\", {\n                    [classesSearchBar.results]: !!query,\n                    [classesSearchBar.resultsAsModal]: !!query,\n                    [props.resultsAsModalClasses ?? \"\"]: !!query,\n                })}\n            />\n        </div>\n    );\n}\n\nexport default withSearch(withRouter(IndependentSearch));\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\n\nexport const widgetVariables = useThemeCache((forcedVars?: IThemeVariables) => {\n    const globalVars = globalVariables(forcedVars);\n    const makeThemeVars = variableFactory(\"widget\", forcedVars);\n\n    const spacing = makeThemeVars(\"spacing\", {\n        inner: {\n            verticalPadding: globalVars.gutter.half,\n            horizontalPadding: globalVars.gutter.quarter,\n        },\n    });\n\n    const section = makeThemeVars(\"section\", {\n        gap: globalVars.gutter.half,\n    });\n\n    const color = makeThemeVars(\"color\", {\n        bg: globalVars.elementaryColors.transparent,\n        fg: globalVars.mainColors.fg,\n    });\n\n    const border = makeThemeVars(\"border\", {\n        color: globalVars.border.color,\n        width: globalVars.border.width,\n        radius: globalVars.border.radius,\n    });\n\n    const title = makeThemeVars(\"title\", {\n        size: globalVars.fonts.size.subTitle,\n    });\n\n    const subTitle = makeThemeVars(\"subTitle\", {\n        size: globalVars.fonts.size.large,\n    });\n\n    const text = makeThemeVars(\"text\", {\n        size: globalVars.fonts.size.medium,\n    });\n\n    const contents = makeThemeVars(\"contents\", {\n        bg: color.bg,\n    });\n\n    return {\n        spacing,\n        section,\n        color,\n        border,\n        title,\n        subTitle,\n        text,\n        contents,\n    };\n});\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { searchBarVariables } from \"@library/features/search/SearchBar.variables\";\nimport { buttonGlobalVariables, buttonVariables } from \"@library/forms/Button.variables\";\nimport { ButtonPreset } from \"@library/forms/ButtonPreset\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { generateButtonStyleProperties } from \"@library/forms/styleHelperButtonGenerator\";\nimport { IButtonType } from \"@library/forms/styleHelperButtonInterface\";\nimport { compactSearchVariables } from \"@library/headers/mebox/pieces/compactSearchStyles\";\nimport { containerVariables } from \"@library/layout/components/containerStyles\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport {\n    absolutePosition,\n    EMPTY_BORDER_RADIUS,\n    ensureColorHelper,\n    importantUnit,\n    standardizeBorderRadius,\n    unitIfDefined,\n} from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { widgetVariables } from \"@library/styles/widgetStyleVars\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\nimport { BackgroundColorProperty, PaddingProperty } from \"csstype\";\nimport { calc, important, percent, px, quote, rgba, translateX, translateY, ColorHelper, color, viewWidth } from \"csx\";\nimport { media, TLength } from \"@library/styles/styleShim\";\nimport { CSSObject } from \"@emotion/css\";\nimport { titleBarVariables } from \"@library/headers/TitleBar.variables\";\nimport { breakpointVariables } from \"@library/styles/styleHelpersBreakpoints\";\nimport { t } from \"@vanilla/i18n\";\nimport { getMeta } from \"@library/utility/appUtils\";\nimport { LayoutTypes } from \"@library/layout/types/interface.layoutTypes\";\nimport { IMediaQueryFunction } from \"@library/layout/types/interface.panelLayout\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { Variables } from \"@library/styles/Variables\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { SearchBarPresets } from \"./SearchBarPresets\";\nimport { IBorderRadiusOutput } from \"@library/styles/cssUtilsTypes\";\n\nexport enum BannerAlignment {\n    LEFT = \"left\",\n    CENTER = \"center\",\n}\n\nexport type SearchPlacement = \"middle\" | \"bottom\";\n\n/**\n * @varGroup banner\n * @commonTitle Banner\n * @description The banner is a common component made up a background image and various pieces of configurable content.\n * Defaults include a title, description, and a searchbar.\n */\nexport const bannerVariables = useThemeCache((forcedVars?: IThemeVariables, altName?: string) => {\n    const makeThemeVars = variableFactory(altName ?? [\"banner\", \"splash\"], forcedVars, !!altName);\n    const globalVars = globalVariables(forcedVars);\n    const widgetVars = widgetVariables(forcedVars);\n    const compactSearchVars = compactSearchVariables(forcedVars);\n    const searchBarVars = searchBarVariables(forcedVars);\n\n    // Main colors\n    const colors = makeThemeVars(\"colors\", {\n        primary: globalVars.mainColors.primary,\n        primaryContrast: globalVars.mainColors.primaryContrast,\n        secondary: globalVars.mainColors.secondary,\n        secondaryContrast: globalVars.mainColors.secondaryContrast,\n        bg: globalVars.mainColors.bg,\n        fg: globalVars.mainColors.fg,\n        borderColor: globalVars.border.color,\n    });\n\n    const presets = makeThemeVars(\"presets\", {\n        button: {\n            /**\n             * @var banner.presets.button.preset\n             * @title Button Preset\n             * @description Choose the type of button to apply to the banner.\n             * @type string\n             * @enum transparent | solid | none\n             */\n            preset: ColorsUtils.isLightColor(colors.primaryContrast) ? ButtonPreset.TRANSPARENT : ButtonPreset.SOLID,\n        },\n        input: {\n            /**\n             * @var banner.presets.input.preset\n             * @title Input Preset\n             * @description Choose the type of input to use in the banner.\n             * @type string\n             * @enum transparent | solid | none\n             */\n            preset: SearchBarPresets.NO_BORDER,\n        },\n    });\n\n    if (presets.input.preset === SearchBarPresets.UNIFIED_BORDER) {\n        presets.button.preset = ButtonPreset.SOLID; // Unified border currently only supports solid buttons.\n    }\n\n    const isSolidButton = presets.button.preset === ButtonPreset.SOLID;\n    const isBordered = presets.input.preset === SearchBarPresets.BORDER;\n    const isTransparentButton = presets.button.preset === ButtonPreset.TRANSPARENT;\n    const isSolidBordered = isBordered && isSolidButton;\n\n    /**\n     * @varGroup banner.options\n     * @commonTitle Banner - Options\n     * @description Control different variants for the banner. These options can affect multiple parts of the banner at once.\n     */\n    const options = makeThemeVars(\"options\", {\n        /**\n         * @var banner.options.enabled\n         * @title Enabled\n         * @description When disabled the banner will not appear at all.\n         * @type boolean\n         */\n        enabled: true,\n\n        /**\n         * @var banner.options.alignment\n         * @title Alignment\n         * @description Align the banner\n         * @type string\n         * @enum center | left | right\n         */\n        alignment: BannerAlignment.CENTER,\n\n        /**\n         * @var banner.options.mobileAlignment\n         * @title Alignment (Mobile)\n         * @description Align the banner on mobile. Defaults to match desktop alignment.\n         * @type string\n         * @enum center | left | right\n         */\n        mobileAlignment: BannerAlignment.CENTER,\n\n        /**\n         * @var banner.options.hideDescription\n         * @type boolean\n         */\n        hideDescription: false,\n\n        /**\n         * @var banner.options.hideTitle\n         * @type boolean\n         */\n        hideTitle: false,\n\n        /**\n         * @var banner.options.hideSearch\n         * @title Hide SearchBar\n         * @type boolean\n         */\n        hideSearch: false,\n\n        /**\n         * @var banner.options.searchPlacement\n         * @title SearchBar Placement\n         * @description Place the search bar in different parts of the banner.\n         * @type string\n         * @enum middle | bottom\n         */\n        searchPlacement: \"middle\" as SearchPlacement,\n        overlayTitleBar: true,\n\n        /**\n         * @var banner.options.url\n         * @title Title Url\n         * @description When set turn the title into a link to this url.\n         * @type string\n         */\n        url: \"\" as string,\n    });\n\n    const topPadding = 69;\n    const horizontalPadding = styleUnit(\n        widgetVars.spacing.inner.horizontalPadding + globalVars.gutter.quarter,\n    ) as PaddingProperty<TLength>;\n\n    const spacing = makeThemeVars(\"spacing\", {\n        /**\n         * @varGroup banner.padding\n         * @commonTitle Banner Spacing\n         * @expand spacing\n         */\n        padding: Variables.spacing({\n            top: topPadding,\n            bottom: 40,\n            horizontal: horizontalPadding,\n        }),\n        mobile: {\n            /**\n             * @varGroup banner.mobile.padding\n             * @commonTitle Banner Spacing (Mobile)\n             * @expand spacing\n             */\n            padding: Variables.spacing({\n                top: 0,\n                bottom: globalVars.gutter.size,\n                horizontal: horizontalPadding,\n            }),\n        },\n    });\n\n    const dimensions = makeThemeVars(\"dimensions\", {\n        /**\n         * @var banner.dimensions.minHeight\n         * @title Minimum Height\n         * @description Apply a minimum height. If the contents of the banner are less than this height,\n         * they will be centered within it.\n         */\n        minHeight: 50,\n        maxHeight: undefined,\n        mobile: {\n            /**\n             * @var banner.dimensions.minHeight\n             * @title Minimum Height (Mobile)\n             * @description Apply a minimum height on smaller device sizes. If the contents of the banner are less than\n             * this height, they will be centered within it.\n             */\n            minHeight: undefined as undefined | number | string,\n            maxHeight: undefined,\n        },\n    });\n\n    // INPUT STATE\n    const state = makeThemeVars(\"state\", {\n        colors: {\n            fg: !isBordered ? colors.secondaryContrast : colors.primary,\n            bg: !isBordered ? colors.secondary : colors.bg,\n        },\n        borders: {\n            color: colors.bg,\n        },\n        fonts: {\n            color: colors.secondaryContrast,\n        },\n    });\n\n    const border = makeThemeVars(\"border\", {\n        /**\n         * @var banner.border.width\n         * @title Banner Input - Border Width\n         * @description Choose the width of the banner border.\n         * @type number|string\n         */\n        width: searchBarVars.border.width,\n\n        /**\n         * @var banner.border.width\n         * @title Banner Input - Border Radius\n         * @description Choose the radius of the banner border.\n         * @type number|string\n         */\n        radius: searchBarVars.border.radius,\n    });\n\n    // Unified border loops around whole search component including search button\n    const unifiedBorder = makeThemeVars(\"unifiedBorder\", {\n        width: searchBarVars.border.width * 2,\n        color: globalVars.mainColors.primary,\n    });\n\n    const backgrounds = makeThemeVars(\"backgrounds\", {\n        /**\n         * @var banner.backgrounds.useOverlay\n         * @title Banner - Background Overlay\n         * @description Apply an overlay color of the background for improved contrast.\n         * This color is detected automatically, but can be overridden with the\n         * banner.backgrounds.overlayColor variable.\n         * @type boolean\n         */\n\n        /**\n         * @var banner.backgrounds.overlayColor\n         * @title Banner - Background Overlay Color\n         * @description Choose a specific overlay color to go with banner.backgrounds.useOverlay.\n         * @type string\n         * @format hex-color\n         */\n        ...compactSearchVars.backgrounds,\n    });\n\n    const contentContainer = makeThemeVars(\"contentContainer\", {\n        minWidth: 550,\n        padding: Variables.spacing({\n            top: spacing.padding.top,\n            bottom: spacing.padding.bottom,\n            horizontal: 0,\n        }),\n        mobile: {\n            padding: Variables.spacing({\n                top: 12,\n                bottom: 12,\n            }),\n        },\n    });\n\n    const rightImage = makeThemeVars(\"rightImage\", {\n        image: undefined as string | undefined,\n        minWidth: 500,\n        disappearingWidth: 500,\n        padding: Variables.spacing({\n            vertical: globalVars.gutter.size,\n            horizontal: containerVariables().spacing.padding * 2,\n        }),\n    });\n\n    const logo = makeThemeVars(\"logo\", {\n        height: \"auto\" as number | string,\n        width: 300 as number | string,\n        padding: Variables.spacing({\n            all: 12,\n        }),\n        image: undefined as string | undefined,\n        mobile: {\n            height: undefined as number | string | undefined,\n            width: undefined as number | string | undefined,\n        },\n    });\n\n    const outerBackgroundInit = makeThemeVars(\n        \"outerBackground\",\n        /**\n         * @varGroup banner.outerBackground\n         * @commonTitle Banner - Background\n         * @expand background\n         */\n        Variables.background({\n            color: ColorsUtils.modifyColorBasedOnLightness({\n                color: colors.primary,\n                weight: 0.05,\n                inverse: true,\n            }),\n            repeat: \"no-repeat\",\n            position: \"50% 50%\",\n            size: \"cover\",\n        }),\n    );\n\n    const outerBackground = makeThemeVars(\"outerBackground\", {\n        ...outerBackgroundInit,\n        ...breakpointVariables({\n            /**\n             * @varGroup banner.outerBackground.breakpoints.tablet\n             * @title Banner - Background (Tablet)\n             * @expand background\n             */\n            tablet: {\n                ...Variables.background({}),\n                breakpointUILabel: t(\"Tablet\"),\n            },\n            /**\n             * @varGroup banner.outerBackground.breakpoints.mobile\n             * @title Banner - Background (Mobile)\n             * @expand background\n             */\n            mobile: {\n                ...Variables.background({}),\n                breakpointUILabel: t(\"Mobile\"),\n            },\n        }),\n    });\n\n    const innerBackground = makeThemeVars(\n        \"innerBackground\",\n        Variables.background({\n            unsetBackground: true,\n            size: \"unset\",\n        }),\n    );\n\n    const text = makeThemeVars(\"text\", {\n        shadowMix: 1, // We want to get the most extreme lightness contrast with text color (i.e. black or white)\n        innerShadowOpacity: 0.25,\n        outerShadowOpacity: 0.75,\n    });\n\n    const font = makeThemeVars(\n        \"font\",\n        /**\n         * @varGroup banner.font\n         * @title Banner Font\n         * @expand font\n         */\n        Variables.font({\n            color: colors.primaryContrast,\n            align: options.alignment,\n            shadow: `0 1px 1px ${ColorsUtils.colorOut(\n                ensureColorHelper(\n                    ColorsUtils.modifyColorBasedOnLightness({ color: colors.primaryContrast, weight: text.shadowMix }),\n                ).fade(text.innerShadowOpacity),\n            )}, 0 1px 25px ${ColorsUtils.colorOut(\n                ensureColorHelper(\n                    ColorsUtils.modifyColorBasedOnLightness({ color: colors.primaryContrast, weight: text.shadowMix }),\n                ).fade(text.outerShadowOpacity),\n            )}`,\n        }),\n    );\n\n    /**\n     * @varGroup banner.title\n     * @title Banner Title\n     */\n    const title = makeThemeVars(\"title\", {\n        /**\n         * @var banner.title.maxWidth\n         * @type number\n         */\n        maxWidth: 700,\n        /**\n         * @varGroup banner.title.font\n         * @expand font\n         * @title Banner Title - Font\n         */\n        font: Variables.font({\n            ...font,\n            size: globalVars.fonts.size.largeTitle,\n            weight: globalVars.fonts.weights.semiBold,\n        }),\n        /**\n         * @varGroup banner.title.fontMobile\n         * @expand font\n         * @title Banner Title - Font (Mobile)\n         */\n        fontMobile: Variables.font({\n            ...font,\n            size: globalVars.fonts.size.title,\n        }),\n        /**\n         * @varGroup banner.title.margins\n         * @title Banner Title - Spacing\n         * @expand spacing\n         */\n        margins: Variables.spacing({\n            top: 18,\n            bottom: 8,\n        }),\n        text: getMeta(\"ui.siteName\", t(\"How can we help you?\")),\n    });\n\n    /**\n     * @varGroup banner.description\n     * @title Banner Description\n     */\n    const description = makeThemeVars(\"description\", {\n        text: undefined as string | undefined,\n        /**\n         * @varGroup banner.description.font\n         * @title Banner Title - Font\n         * @expand font\n         */\n        font: Variables.font({\n            ...font,\n            size: globalVars.fonts.size.large,\n        }),\n        maxWidth: 400,\n        /**\n         * @varGroup banner.description.margins\n         * @title Banner Description - Spacing\n         * @expand spacing\n         */\n        margins: Variables.spacing({\n            bottom: 12,\n        }),\n    });\n\n    const paragraph = makeThemeVars(\"paragraph\", {\n        margin: \".4em\",\n        text: {\n            size: 24,\n            weight: 300,\n        },\n    });\n\n    /**\n     * @varGroup banner.searchBar\n     * @title Banner - SearchBar\n     */\n    const searchBarInit = makeThemeVars(\"searchBar\", {\n        preset: presets.button.preset,\n        input: searchBarVars.input,\n        sizing: {\n            /**\n             * @var banner.searchBar.sizing.maxWidth\n             * @title Max Width\n             * @description Maximum width for the banner searchbar.\n             */\n            maxWidth: 705,\n\n            /**\n             * @var banner.searchBar.sizing.height\n             * @title Height\n             * @description Height of the banner searchbar.\n             */\n            height: 40,\n        },\n        border: {\n            color: !isBordered ? colors.bg : colors.primary,\n            leftColor: isTransparentButton ? colors.primaryContrast : colors.borderColor,\n            radius: border.radius,\n            width: searchBarVars.border.radius,\n        },\n    });\n\n    const searchBar = makeThemeVars(\"searchBar\", {\n        preset: presets.button.preset,\n        border: searchBarInit.border,\n        sizing: {\n            ...searchBarInit.sizing,\n            heightMinusBorder: searchBarInit.sizing.height - searchBarInit.border.width * 2,\n        },\n        font: {\n            color: searchBarInit.input.fg,\n            size: globalVars.fonts.size.large,\n        },\n        margin: Variables.spacing({\n            top: 24,\n        }),\n        marginMobile: Variables.spacing({\n            top: 16,\n        }),\n        shadow: {\n            show: false,\n            style: `0 1px 1px ${ColorsUtils.colorOut(\n                ensureColorHelper(\n                    ColorsUtils.modifyColorBasedOnLightness({\n                        color: colors.fg,\n                        weight: text.shadowMix,\n                        inverse: true,\n                    }),\n                ).fade(text.innerShadowOpacity),\n            )}, 0 1px 25px ${ColorsUtils.colorOut(\n                ensureColorHelper(\n                    ColorsUtils.modifyColorBasedOnLightness({\n                        color: colors.fg,\n                        weight: text.shadowMix,\n                        inverse: true,\n                    }),\n                ).fade(text.outerShadowOpacity),\n            )}`,\n        },\n\n        state: {\n            border: {\n                color: isSolidButton ? colors.fg : colors.primaryContrast,\n            },\n        },\n    });\n\n    let buttonStateStyles = {\n        colors: {\n            fg: isSolidBordered ? colors.primary : colors.primaryContrast,\n            bg: isSolidBordered\n                ? colors.bg\n                : !ColorsUtils.isLightColor(colors.bg)\n                ? globalVars.elementaryColors.black.fade(0.3)\n                : globalVars.elementaryColors.white.fade(0.3),\n        },\n        borders: {\n            color: isSolidBordered ? colors.primary : isTransparentButton ? colors.primaryContrast : colors.bg,\n        },\n        fonts: {\n            color: isSolidBordered ? colors.primary : colors.primaryContrast,\n        },\n    };\n\n    const searchButtonBg = isTransparentButton ? rgba(0, 0, 0, 0) : colors.primary;\n\n    let buttonBorderStyles = {\n        color: isTransparentButton || isSolidBordered ? globalVars.border.color : searchBarVars.input.bg,\n        width: searchBarVars.border.width,\n        borderRadius: {\n            ...EMPTY_BORDER_RADIUS,\n            left: 0,\n            right: border.radius,\n        } as IBorderRadiusOutput,\n        state: {\n            borders: buttonStateStyles.borders,\n        },\n    };\n\n    buttonBorderStyles.borderRadius = standardizeBorderRadius(buttonBorderStyles.borderRadius);\n\n    const searchButtonDropDown = makeThemeVars(\"searchButton\", {\n        name: \"searchButton\",\n        preset: { style: presets.button.preset },\n        spinnerColor: colors.primaryContrast,\n        sizing: {\n            minHeight: searchBar.sizing.height,\n        },\n        colors: {\n            bg: isSolidBordered ? colors.bg : searchButtonBg,\n            fg: isSolidBordered ? colors.fg : colors.bg,\n        },\n        borders: {\n            left: {\n                radius: border.radius,\n                color: colors.bg,\n            },\n            right: {\n                color: searchBar.border.color,\n                width: searchBar.border.width,\n                radius: 0,\n            },\n        },\n        fonts: {\n            size: globalVars.fonts.size.large,\n            weight: globalVars.fonts.weights.bold,\n        },\n        state: buttonStateStyles,\n    } as IButtonType);\n\n    const searchButtonType = {\n        name: \"searchButton\",\n        preset: { style: presets.button.preset },\n        sizing: {\n            minHeight: searchBar.sizing.height,\n        },\n        colors: {\n            bg: isSolidBordered ? colors.bg : searchButtonBg,\n            fg: isSolidButton && isBordered ? font.color : colors.bg,\n        },\n        borders: buttonBorderStyles,\n        fonts: {\n            size: globalVars.fonts.size.large,\n            weight: globalVars.fonts.weights.bold,\n        },\n        state: buttonStateStyles,\n    };\n\n    const searchButton = makeThemeVars(\"searchButton\", searchButtonType);\n\n    if (isSolidButton && !isBordered) {\n        const buttonVars = buttonVariables();\n        searchButton.state = {\n            ...searchButton.state,\n            ...buttonVars.primary.state,\n        };\n        searchButton.colors = buttonVars.primary.colors;\n        searchButton.borders!.color = buttonVars.primary.borders.color;\n\n        searchButtonDropDown.state = buttonVars.primary.state;\n        searchButtonDropDown.colors = buttonVars.primary.colors;\n        searchButtonDropDown.borders!.color = buttonVars.primary.borders.color;\n    }\n\n    const buttonShadow = makeThemeVars(\"shadow\", {\n        color: ensureColorHelper(\n            ColorsUtils.modifyColorBasedOnLightness({ color: colors.primaryContrast, weight: text.shadowMix }),\n        ).fade(0.05),\n        full: `0 1px 15px ${ColorsUtils.colorOut(\n            ensureColorHelper(\n                ColorsUtils.modifyColorBasedOnLightness({ color: colors.primaryContrast, weight: text.shadowMix }),\n            ).fade(0.3),\n        )}`,\n        background: ensureColorHelper(\n            ColorsUtils.modifyColorBasedOnLightness({\n                color: colors.primaryContrast,\n                weight: text.shadowMix,\n            }),\n        )\n            .fade(0.1)\n            .toString() as BackgroundColorProperty,\n    });\n\n    /**\n     * @varGroup banner.searchStrip\n     * @title Banner - Search Strip\n     */\n    const searchStrip = makeThemeVars(\"searchStrip\", {\n        /**\n         * @var banner.searchStrip.bg\n         * @title Background\n         * @description Background for the search strip that appears with banner.options.searchPlacement = \"bottom\".\n         * @type string\n         * @format hex-color\n         */\n        bg: globalVars.mainColors.primary as ColorHelper | undefined | string,\n\n        /**\n         * @var banner.searchStrip.minHeight\n         * @title Minimum Height\n         * @description Minimum height for the search strip that appears with banner.options.searchPlacement = \"bottom\".\n         */\n        minHeight: 60 as number | string,\n        offset: undefined as number | string | undefined,\n        padding: Variables.spacing({\n            top: 12,\n            bottom: 12,\n        }),\n        mobile: {\n            bg: undefined as BackgroundColorProperty | undefined,\n            minHeight: undefined as \"string\" | number | undefined,\n            offset: undefined as \"string\" | number | undefined,\n            padding: Variables.spacing({\n                bottom: undefined, // FIXME: this is just here so that overrides from storybook work\n            }),\n        },\n    });\n\n    return {\n        font,\n        presets,\n        options,\n        outerBackground,\n        backgrounds,\n        spacing,\n        innerBackground,\n        contentContainer,\n        dimensions,\n        unifiedBorder,\n        text,\n        title,\n        description,\n        paragraph,\n        state,\n        searchBar,\n        buttonShadow,\n        searchButton,\n        colors,\n        rightImage,\n        border,\n        isTransparentButton,\n        searchStrip,\n        logo,\n        searchButtonDropDown,\n        searchButtonBg,\n    };\n});\n\nexport const bannerClasses = useThemeCache(\n    (\n        mediaQueries: IMediaQueryFunction,\n        alternativeVariables?: ReturnType<typeof bannerVariables>,\n        altName?: string,\n        options?: { debug?: boolean | string },\n    ) => {\n        const bannerVars = bannerVariables();\n        const vars = alternativeVariables ?? bannerVars;\n        const formElementVars = formElementsVariables();\n        const globalVars = globalVariables();\n        const buttonGlobalVars = buttonGlobalVariables();\n        const { searchBar } = vars;\n        const style = styleFactory(altName ?? \"banner\");\n        const isCentered = vars.options.alignment === \"center\";\n        const borderRadius =\n            vars.searchBar.border.radius !== undefined ? vars.searchBar.border.radius : vars.border.radius;\n        const isUnifiedBorder = vars.presets.input.preset === SearchBarPresets.UNIFIED_BORDER;\n        const isBordered = vars.presets.input.preset === SearchBarPresets.BORDER;\n        const isSolidBordered = isBordered && vars.presets.button.preset === ButtonPreset.SOLID;\n\n        const searchButton = style(\"searchButton\", {\n            height: styleUnit(vars.searchBar.sizing.height),\n            ...{\n                \"&.searchBar-submitButton\": {\n                    ...generateButtonStyleProperties({\n                        buttonTypeVars: vars.searchButton,\n                        globalVars,\n                        formElementVars,\n                        buttonGlobalVars,\n                        debug: true,\n                    }),\n                    ...{\n                        \"&&&&\": {\n                            borderTopLeftRadius: importantUnit(0),\n                            borderBottomLeftRadius: importantUnit(0),\n                        },\n                        \"&&&:hover,&&&:focus, &&&.focus-visible, &&&:active\": {\n                            backgroundColor: isSolidBordered\n                                ? ColorsUtils.colorOut(vars.colors.bg)\n                                : ColorsUtils.colorOut(\n                                      !ColorsUtils.isLightColor(vars.searchButtonBg)\n                                          ? globalVars.elementaryColors.black.fade(0.3)\n                                          : globalVars.elementaryColors.white.fade(0.3),\n                                  ),\n                            borderColor: isSolidBordered ? ColorsUtils.colorOut(vars.colors.primary) : undefined,\n                            color: isSolidBordered\n                                ? ColorsUtils.colorOut(vars.colors.primary)\n                                : vars.searchButton!.colors!.fg,\n                        },\n                    },\n                },\n            },\n        } as CSSObject); //FIXME: avoid type assertion (once the '&&&&'-style overrides are cleaned up)\n\n        const searchDropDownButton = style(\"searchDropDown\", {\n            ...generateButtonStyleProperties({\n                buttonTypeVars: vars.searchButtonDropDown,\n                globalVars,\n                formElementVars,\n                buttonGlobalVars,\n            }),\n        });\n\n        const valueContainer = style(\"valueContainer\", {});\n\n        const outerBackground = useThemeCache((url?: string) => {\n            const finalUrl = url ?? vars.outerBackground.image ?? undefined;\n            const finalTabletUrl = url ?? vars.outerBackground.breakpoints.tablet.image;\n            const finalMobileUrl = url ?? vars.outerBackground.breakpoints.mobile.image;\n            const finalVars = {\n                ...vars.outerBackground,\n                image: finalUrl,\n            };\n\n            return style(\"outerBackground\", {\n                position: \"absolute\",\n                top: 0,\n                left: 0,\n                width: percent(100),\n                height: calc(`100% + 2px`),\n                transform: translateY(`-1px`), // Depending on how the browser rounds the pixels, there is sometimes a 1px gap above the banner\n                display: \"block\",\n                ...Mixins.background(finalVars),\n                ...(finalTabletUrl\n                    ? mediaQueries({\n                          [LayoutTypes.THREE_COLUMNS]: {\n                              twoColumnsDown: Mixins.background({ ...vars.outerBackground, image: finalTabletUrl }),\n                          },\n                      })\n                    : {}),\n                ...(finalMobileUrl\n                    ? mediaQueries({\n                          [LayoutTypes.THREE_COLUMNS]: {\n                              twoColumnsDown: Mixins.background({ ...vars.outerBackground, image: finalMobileUrl }),\n                          },\n                      })\n                    : {}),\n            });\n        });\n\n        const defaultBannerSVG = style(\"defaultBannerSVG\", {\n            ...absolutePosition.fullSizeOfParent(),\n        });\n\n        const backgroundOverlay = style(\"backgroundOverlay\", {\n            display: \"block\",\n            position: \"absolute\",\n            top: px(0),\n            left: px(0),\n            width: percent(100),\n            height: calc(`100% + 2px`),\n            background: ColorsUtils.colorOut(vars.backgrounds.overlayColor),\n        });\n\n        const contentContainer = (hasFullWidth = false) => {\n            return style(\n                \"contentContainer\",\n                {\n                    display: \"flex\",\n                    flexDirection: \"column\",\n                    justifyContent: \"center\",\n                    alignItems: vars.options.alignment === BannerAlignment.LEFT ? \"flex-start\" : \"center\",\n                    ...Mixins.padding(vars.contentContainer.padding),\n                    ...Mixins.background(vars.innerBackground),\n                    minWidth: styleUnit(vars.contentContainer.minWidth),\n                    maxWidth: vars.rightImage.image ? styleUnit(vars.contentContainer.minWidth) : undefined,\n                    minHeight: styleUnit(vars.dimensions.minHeight),\n                    maxHeight: unitIfDefined(vars.dimensions.maxHeight),\n                    flexGrow: 0,\n                    width: hasFullWidth || vars.options.alignment === BannerAlignment.LEFT ? percent(100) : undefined,\n                },\n                media(\n                    {\n                        maxWidth: vars.contentContainer.minWidth + containerVariables().spacing.padding * 2 * 2,\n                    },\n                    {\n                        right: \"initial\",\n                        left: 0,\n                        minWidth: percent(100),\n                        maxWidth: percent(100),\n                        minHeight: unitIfDefined(vars.dimensions.mobile.minHeight),\n                        maxHeight: unitIfDefined(vars.dimensions.mobile.maxHeight ?? vars.dimensions.maxHeight),\n                        ...(vars.options.mobileAlignment\n                            ? {\n                                  alignItems:\n                                      vars.options.mobileAlignment === BannerAlignment.LEFT ? \"flex-start\" : \"center\",\n                              }\n                            : {}),\n                        ...Mixins.padding(vars.contentContainer.mobile.padding),\n                    },\n                ),\n            );\n        };\n\n        const text = style(\"text\", {\n            color: ColorsUtils.colorOut(vars.colors.primaryContrast),\n        });\n\n        const noTopMargin = style(\"noTopMargin\", {});\n\n        const conditionalUnifiedBorder = isUnifiedBorder\n            ? {\n                  borderRadius,\n                  boxShadow: `0 0 0 ${styleUnit(bannerVars.unifiedBorder.width)} ${ColorsUtils.colorOut(\n                      bannerVars.unifiedBorder.color,\n                  )}`,\n              }\n            : {};\n\n        const searchContainer = style(\"searchContainer\", {\n            position: \"relative\",\n            width: percent(100),\n            maxWidth: styleUnit(searchBar.sizing.maxWidth),\n            height: styleUnit(vars.searchBar.sizing.height),\n            margin: isCentered ? \"auto\" : undefined,\n            ...Mixins.margin(vars.searchBar.margin),\n            ...conditionalUnifiedBorder,\n            ...{\n                \".search-results\": {\n                    width: percent(100),\n                    maxWidth: styleUnit(vars.searchBar.sizing.maxWidth),\n                    margin: \"auto\",\n                    zIndex: 2,\n                },\n                [`&.${noTopMargin}`]: {\n                    marginTop: 0,\n                },\n                ...mediaQueries({\n                    [LayoutTypes.THREE_COLUMNS]: {\n                        oneColumnDown: {\n                            ...Mixins.margin(vars.searchBar.marginMobile),\n                            [noTopMargin]: {\n                                marginTop: 0,\n                            },\n                        },\n                    },\n                }),\n            },\n        });\n\n        const icon = style(\"icon\", {});\n        const input = style(\"input\", {});\n\n        const buttonLoader = style(\"buttonLoader\", {});\n\n        const title = style(\"title\", {\n            \"&&&\": {\n                display: \"block\",\n                ...Mixins.font(vars.title.font),\n                flexGrow: 1,\n                ...mediaQueries({\n                    [LayoutTypes.THREE_COLUMNS]: {\n                        oneColumnDown: {\n                            ...Mixins.font(vars.title.fontMobile),\n                        },\n                    },\n                }),\n            },\n        });\n\n        const textWrapMixin: CSSObject = {\n            display: \"flex\",\n            flexWrap: \"nowrap\",\n            alignItems: \"center\",\n            maxWidth: styleUnit(vars.searchBar.sizing.maxWidth),\n            width: percent(100),\n            marginLeft: isCentered ? \"auto\" : undefined,\n            marginRight: isCentered ? \"auto\" : undefined,\n            ...mediaQueries({\n                [LayoutTypes.THREE_COLUMNS]: {\n                    oneColumnDown: {\n                        maxWidth: percent(100),\n                    },\n                },\n            }),\n        };\n\n        const titleAction = style(\"titleAction\", {});\n        const titleWrap = style(\"titleWrap\", { ...Mixins.margin(vars.title.margins), ...textWrapMixin });\n        const titleUrlWrap = style(\"titleUrlWrap\", {\n            marginLeft: isCentered ? \"auto\" : undefined,\n            marginRight: isCentered ? \"auto\" : undefined,\n        });\n\n        const titleFlexSpacer = style(\"titleFlexSpacer\", {\n            display: isCentered ? \"block\" : \"none\",\n            position: \"relative\",\n            height: styleUnit(formElementVars.sizing.height),\n            width: styleUnit(formElementVars.sizing.height),\n            flexBasis: styleUnit(formElementVars.sizing.height),\n            transform: translateX(px((formElementVars.sizing.height - globalVars.icon.sizes.default) / 2 - 1)), // The \"3\" is to offset the pencil that visually doesn't look aligned without a cheat.\n            ...{\n                \".searchBar-actionButton:after\": {\n                    content: quote(\"\"),\n                    ...absolutePosition.middleOfParent(),\n                    width: px(20),\n                    height: px(20),\n                    backgroundColor: ColorsUtils.colorOut(vars.buttonShadow.background),\n                    boxShadow: vars.buttonShadow.full,\n                },\n                \".searchBar-actionButton\": {\n                    color: important(\"inherit\"),\n                    \"&:not(.focus-visible)\": {\n                        outline: 0,\n                    },\n                },\n                \".icon-compose\": {\n                    zIndex: 1,\n                },\n            },\n        });\n\n        const descriptionWrap = style(\"descriptionWrap\", {\n            ...Mixins.margin(vars.description.margins),\n            ...textWrapMixin,\n        });\n\n        const description = style(\"description\", {\n            display: \"block\",\n            ...Mixins.font(vars.description.font),\n            flexGrow: 1,\n        });\n\n        const content = style(\"content\", {\n            boxSizing: \"border-box\",\n            flexGrow: 1,\n            zIndex: 1,\n            boxShadow: vars.searchBar.shadow.show ? vars.searchBar.shadow.style : undefined,\n            minHeight: styleUnit(vars.searchBar.sizing.height),\n        });\n\n        const imagePositioner = style(\"imagePositioner\", {\n            display: \"flex\",\n            flexDirection: \"row\",\n            flexWrap: \"nowrap\",\n            alignItems: \"center\",\n            maxWidth: percent(100),\n            height: percent(100),\n        });\n\n        const makeImageMinWidth = (rootUnit, padding) => {\n            const negative =\n                vars.contentContainer.minWidth + (vars.contentContainer.padding.horizontal as number) + padding;\n\n            return calc(`${styleUnit(rootUnit)} - ${styleUnit(negative)}`);\n        };\n\n        // const innerBreak = vars.contentContainer.minWidth + vars.contentContainer.padding.horizontal + ;\n        const imageElementContainer = style(\n            \"imageElementContainer\",\n            {\n                alignSelf: \"stretch\",\n                maxWidth: makeImageMinWidth(\n                    layoutVariables().contentWidth,\n                    containerVariables().spacing.padding * 2 * 2,\n                ),\n                flexGrow: 1,\n                position: \"relative\",\n                overflow: \"hidden\",\n            },\n            media(\n                { maxWidth: layoutVariables().contentWidth },\n                {\n                    minWidth: makeImageMinWidth(\"100vw\", containerVariables().spacing.padding * 2),\n                },\n            ),\n            layoutVariables()\n                .mediaQueries()\n                .oneColumnDown({\n                    minWidth: makeImageMinWidth(\"100vw\", containerVariables().spacing.mobile.padding * 2),\n                }),\n            media(\n                { maxWidth: 500 },\n                {\n                    display: \"none\",\n                },\n            ),\n        );\n\n        const logoContainer = style(\"logoContainer\", {\n            display: \"flex\",\n            width: percent(100),\n            height: styleUnit(vars.logo.height),\n            maxWidth: percent(100),\n            minHeight: styleUnit(vars.logo.height),\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            position: \"relative\",\n            overflow: \"hidden\",\n            ...mediaQueries({\n                [LayoutTypes.THREE_COLUMNS]: {\n                    oneColumnDown: {\n                        height: unitIfDefined(vars.logo.mobile.height),\n                        minHeight: unitIfDefined(vars.logo.mobile.height),\n                    },\n                },\n            }),\n        });\n\n        const logoSpacer = style(\"logoSpacer\", {\n            ...Mixins.padding(vars.logo.padding),\n        });\n\n        const logo = style(\"logo\", {\n            height: styleUnit(vars.logo.height),\n            width: styleUnit(vars.logo.width),\n            maxHeight: percent(100),\n            maxWidth: percent(100),\n            ...mediaQueries({\n                [LayoutTypes.THREE_COLUMNS]: {\n                    oneColumnDown: {\n                        height: unitIfDefined(vars.logo.mobile.height),\n                        width: unitIfDefined(vars.logo.mobile.width),\n                    },\n                },\n            }),\n        });\n\n        const rightImage = style(\n            \"rightImage\",\n            {\n                ...absolutePosition.fullSizeOfParent(),\n                minWidth: styleUnit(vars.rightImage.minWidth),\n                objectPosition: \"100% 50%\",\n                objectFit: \"contain\",\n                marginLeft: \"auto\",\n                ...Mixins.padding(vars.rightImage.padding),\n            },\n            media(\n                { maxWidth: vars.contentContainer.minWidth + vars.rightImage.minWidth },\n                {\n                    paddingRight: 0,\n                },\n            ),\n        );\n\n        const titleBarVars = titleBarVariables();\n\n        // NOTE FOR FUTURE\n        // Do no apply overflow hidden here.\n        // It will cut off the search box in the banner.\n        const root = style(\n            {\n                position: \"relative\",\n                zIndex: 1, // To make sure it sites on top of panel layout overflow indicators.\n                maxWidth: percent(100),\n                backgroundColor: ColorsUtils.colorOut(vars.outerBackground.color),\n                \".searchBar\": {\n                    height: styleUnit(vars.searchBar.sizing.height),\n                },\n            },\n            titleBarVars.swoop.amount > 0\n                ? {\n                      marginTop: -titleBarVars.swoop.swoopOffset,\n                      paddingTop: titleBarVars.swoop.swoopOffset,\n                  }\n                : {},\n        );\n\n        const bannerContainer = style(\"bannerContainer\", {\n            position: \"relative\",\n        });\n\n        // Use this for cutting of the right image with overflow hidden.\n        const overflowRightImageContainer = style(\"overflowRightImageContainer\", {\n            ...absolutePosition.fullSizeOfParent(),\n            overflow: \"hidden\",\n        });\n\n        const fullHeight = style(\"fullHeight\", {\n            height: percent(100),\n        });\n\n        const iconContainer = style(\"iconContainer\", {});\n\n        const resultsAsModal = style(\"resultsAsModal\", {\n            \"&&\": {\n                top: styleUnit(vars.searchBar.sizing.height + 2),\n                ...layoutVariables()\n                    .mediaQueries()\n                    .xs({\n                        width: viewWidth(100),\n                        left: `50%`,\n                        transform: translateX(\"-50%\"),\n                        borderTopRightRadius: 0,\n                        borderTopLeftRadius: 0,\n                        \".suggestedTextInput-option\": {\n                            ...Mixins.padding({\n                                horizontal: 21,\n                            }),\n                        },\n                    }),\n            },\n        });\n\n        const middleContainer = style(\"middleContainer\", {\n            height: percent(100),\n            position: \"relative\",\n            minHeight: styleUnit(vars.dimensions.minHeight),\n            ...mediaQueries({\n                [LayoutTypes.THREE_COLUMNS]: {\n                    oneColumnDown: {\n                        minHeight: unitIfDefined(vars.dimensions.mobile.minHeight),\n                    },\n                },\n            }),\n        });\n\n        const searchStrip = style(\"searchStrip\", {\n            position: \"relative\",\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            zIndex: 1,\n            background: ColorsUtils.colorOut(vars.searchStrip.bg),\n            ...Mixins.padding(vars.searchStrip.padding),\n            minHeight: unitIfDefined(vars.searchStrip.minHeight),\n            marginTop: unitIfDefined(vars.searchStrip.offset),\n            ...mediaQueries({\n                [LayoutTypes.THREE_COLUMNS]: {\n                    oneColumnDown: {\n                        background: vars.searchStrip.mobile.bg\n                            ? ColorsUtils.colorOut(vars.searchStrip.mobile.bg)\n                            : undefined,\n                        ...Mixins.padding(vars.searchStrip.mobile.padding),\n                        minHeight: unitIfDefined(vars.searchStrip.mobile.minHeight),\n                        marginTop: unitIfDefined(vars.searchStrip.mobile.offset),\n                    },\n                },\n            }),\n        });\n\n        return {\n            root,\n            bannerContainer,\n            overflowRightImageContainer,\n            fullHeight,\n            outerBackground,\n            contentContainer,\n            valueContainer,\n            text,\n            icon,\n            defaultBannerSVG,\n            searchContainer,\n            searchButton,\n            input,\n            buttonLoader,\n            title,\n            titleAction,\n            titleFlexSpacer,\n            titleWrap,\n            titleUrlWrap,\n            description,\n            descriptionWrap,\n            content,\n            iconContainer,\n            resultsAsModal,\n            backgroundOverlay,\n            imageElementContainer,\n            rightImage,\n            middleContainer,\n            imagePositioner,\n            searchStrip,\n            noTopMargin,\n            logoContainer,\n            logoSpacer,\n            logo,\n            searchDropDownButton,\n        };\n    },\n);\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\ntype IBreakpointVar = {\n    breakpointUILabel: string;\n} & Record<string, any>;\n\nexport function breakpointVariables(breakpoints: Record<string, IBreakpointVar>) {\n    return { breakpoints, breakpointUIEnabled: false };\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { bannerVariables, bannerClasses, BannerAlignment } from \"@library/banner/bannerStyles\";\nimport clamp from \"lodash/clamp\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\nimport merge from \"lodash/merge\";\nimport clone from \"lodash/clone\";\nimport { IMediaQueryFunction } from \"@library/layout/types/interface.panelLayout\";\nimport { Variables } from \"@library/styles/Variables\";\n\nexport const CONTENT_BANNER_MAX_HEIGHT = 180;\nexport const CONTENT_BANNER_MIN_HEIGHT = 80;\n\nexport const contentBannerVariables = useThemeCache((forcedVars?: IThemeVariables) => {\n    const makeVars = variableFactory(\"contentBanner\", forcedVars);\n\n    const dimensions = makeVars(\"dimensions\", {\n        minHeight: 120,\n        mobile: {\n            minHeight: 120,\n        },\n    });\n\n    const minHeight = clamp(dimensions.minHeight, CONTENT_BANNER_MIN_HEIGHT, CONTENT_BANNER_MAX_HEIGHT);\n    const minHeightMobile = clamp(dimensions.mobile.minHeight, CONTENT_BANNER_MIN_HEIGHT, CONTENT_BANNER_MAX_HEIGHT);\n\n    const options = makeVars(\"options\", {\n        enabled: false,\n        alignment: BannerAlignment.CENTER,\n        mobileAlignment: BannerAlignment.LEFT,\n        overlayTitleBar: false,\n    });\n\n    const contentContainer = makeVars(\"contentContainer\", {\n        padding: Variables.spacing({}),\n        mobile: {\n            padding: Variables.spacing({\n                top: 0,\n                bottom: 0,\n            }),\n        },\n    });\n\n    const normalBannerVars = bannerVariables(forcedVars, \"contentBanner\");\n\n    const forced = merge(clone(forcedVars), {\n        contentBanner: {\n            options: {\n                ...options,\n                hideDescription: true,\n                hideTitle: true,\n                hideSearch: true,\n            },\n            dimensions: {\n                minHeight: minHeight,\n                mobile: {\n                    minHeight: minHeightMobile,\n                },\n            },\n            logo: {\n                height: minHeight - (normalBannerVars.logo.padding.all as number) * 2,\n                width: \"auto\",\n                mobile: {\n                    height: minHeightMobile - (normalBannerVars.logo.padding.all as number) * 2,\n                },\n            },\n            spacing: {\n                padding: {\n                    top: 0,\n                    bottom: 0,\n                },\n            },\n            contentContainer,\n        },\n    });\n    return bannerVariables(forced, \"contentBanner\");\n});\n\nexport const contentBannerClasses = useThemeCache(\n    (mediaQueries: IMediaQueryFunction, options?: { debug?: boolean | string }) => {\n        return bannerClasses(mediaQueries, contentBannerVariables(), \"contentBanner\", options);\n    },\n);\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport React from \"react\";\nimport { bannerClasses, bannerVariables } from \"@library/banner/bannerStyles\";\nimport { ensureColorHelper } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { contentBannerClasses, contentBannerVariables } from \"@library/banner/contentBannerStyles\";\nimport { useLayout } from \"@library/layout/LayoutContext\";\n\ninterface IProps {\n    isContentBanner?: boolean;\n}\n\nexport function DefaultBannerBg(props: IProps) {\n    const { isContentBanner } = props;\n    const { mediaQueries } = useLayout();\n    const classes = isContentBanner ? contentBannerClasses(mediaQueries) : bannerClasses(mediaQueries);\n    const vars = isContentBanner ? contentBannerVariables() : bannerVariables();\n\n    return (\n        <svg\n            className={classes.defaultBannerSVG}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n            viewBox=\"0 0 1600 250\"\n            preserveAspectRatio=\"xMidYMid slice\"\n            aria-hidden=\"true\"\n        >\n            <defs>\n                <linearGradient\n                    id=\"a\"\n                    x1=\"399.6\"\n                    x2=\"1238.185\"\n                    y1=\"-398.455\"\n                    y2=\"440.13\"\n                    gradientTransform=\"matrix(1 0 0 -1 0 252)\"\n                    gradientUnits=\"userSpaceOnUse\"\n                >\n                    <stop offset=\"0\" stopColor=\"#9fa2a4\" />\n                    <stop offset=\"1\" stopColor=\"#dcddde\" />\n                </linearGradient>\n                <linearGradient\n                    id=\"b\"\n                    x1=\"-8455.753\"\n                    x2=\"-5370.533\"\n                    y1=\"-1501.49\"\n                    y2=\"1583.73\"\n                    gradientTransform=\"matrix(-.264 0 0 -1 -1028.524 252)\"\n                    xlinkHref=\"#a\"\n                />\n                <linearGradient id=\"c\" x1=\"390.247\" x2=\"1197.197\" y1=\"-389.102\" y2=\"417.848\" xlinkHref=\"#a\" />\n                <linearGradient id=\"d\" x1=\"399.6\" x2=\"1246.556\" y1=\"-398.455\" y2=\"448.501\" xlinkHref=\"#a\" />\n                <linearGradient\n                    id=\"e\"\n                    x1=\"-10482.125\"\n                    x2=\"-7325.674\"\n                    y1=\"-1392.28\"\n                    y2=\"1764.172\"\n                    gradientTransform=\"matrix(-.264 0 0 -1 -1550.139 311.401)\"\n                    xlinkHref=\"#a\"\n                />\n                <linearGradient\n                    id=\"f\"\n                    x1=\"2590.443\"\n                    x2=\"5029.843\"\n                    y1=\"-1082.229\"\n                    y2=\"1357.171\"\n                    gradientTransform=\"matrix(.339 0 0 -1 -489.358 311.401)\"\n                    xlinkHref=\"#a\"\n                />\n                <clipPath id=\"g\">\n                    <path fill=\"none\" d=\"M-1.2 0H1598.8V250H-1.2z\" />\n                </clipPath>\n            </defs>\n            <g style={{ isolation: \"isolate\" }}>\n                <path fill={ColorsUtils.colorOut(vars.outerBackground.color)} d=\"M-0 0H1600V250H-0z\" />\n                <path\n                    fill=\"url(#a)\"\n                    fillRule=\"evenodd\"\n                    style={{ mixBlendMode: \"multiply\" }}\n                    d=\"M-.4 250s157.2-125.2 321.9-125 217.6 87.3 488.1 87.3 408-149.6 565.9-149.6 224.1 118.4 224.1 118.4v68.9z\"\n                />\n                <path\n                    fill=\"url(#b)\"\n                    fillRule=\"evenodd\"\n                    style={{ mixBlendMode: \"multiply\", isolation: \"isolate\" }}\n                    d=\"M1601.2 205.755s-157.2-125.2-321.9-125-217.6 87.3-488.1 87.3-408-149.5-565.9-149.5-224.1 118.3-224.1 118.3l-1.6 113.6h1600z\"\n                    opacity=\"0.43\"\n                />\n                <path\n                    fill=\"url(#c)\"\n                    fillRule=\"evenodd\"\n                    style={{ mixBlendMode: \"multiply\", isolation: \"isolate\" }}\n                    d=\"M-.2 212.755s162.4-169.7 496-149.6c282.8 17 373.6 129.5 566.1 140.7 192.4 11.2 531.8 26.8 531.8 26.8l6 19.8H-.4z\"\n                    opacity=\"0.4\"\n                />\n                <path\n                    fill=\"url(#d)\"\n                    fillRule=\"evenodd\"\n                    style={{ mixBlendMode: \"multiply\", isolation: \"isolate\" }}\n                    d=\"M-.4 250s176.8-94.5 537.2-94.5 363.8 74.6 525 74.6 218-203.1 356.4-203.1 181.4 223 181.4 223H-.4z\"\n                    opacity=\"0.4\"\n                />\n                <path\n                    fill=\"url(#e)\"\n                    fillRule=\"evenodd\"\n                    style={{ mixBlendMode: \"multiply\", isolation: \"isolate\" }}\n                    d=\"M1600.4 116.955l-.8-116.5c-17.382 0-372.332-3.194-388.112 1.777C1153.205 20.59 1016.513 118 770.388 116.5 572.8 115.3 458.1 27.455 380.173-.555L-.4.455l.8 77.1-.8 172.9h1600z\"\n                    opacity=\"0.43\"\n                />\n                <path\n                    fill=\"url(#f)\"\n                    fillRule=\"evenodd\"\n                    style={{ mixBlendMode: \"multiply\", isolation: \"isolate\" }}\n                    d=\"M.5 116.955s156.8-71.6 321.1-71.5 168.6 70.758 438.5 70.758S1215.5 9.955 1373 9.955s223.6 67.7 223.6 67.7l.8 172.9H1.3z\"\n                    opacity=\"0.43\"\n                />\n                <g\n                    fill=\"none\"\n                    stroke={ColorsUtils.colorOut(ensureColorHelper(vars.outerBackground.color!).darken(\"50%\"))}\n                    strokeDasharray=\"1,11\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    clipPath=\"url(#g)\"\n                    opacity=\"0.5\"\n                >\n                    <path strokeWidth=\"3\" d=\"M1609.4 230.155c-567.3 297.5-677.1-176.9-1531 344.9\" />\n                    <path strokeWidth=\"2.935\" d=\"M1609.2 213.955c-582.9 317.6-702.3-174.1-1536.9 332.1\" />\n                    <path strokeWidth=\"2.871\" d=\"M1608.9 197.755c-598.4 337.7-727.4-171.2-1542.7 319.4\" />\n                    <path strokeWidth=\"2.806\" d=\"M1608.6 181.555c-613.9 357.8-752.5-168.3-1548.5 306.7\" />\n                    <path strokeWidth=\"2.742\" d=\"M1608.4 165.355C979 543.255 830.7-.145 54 459.355\" />\n                    <path strokeWidth=\"2.677\" d=\"M1608.1 149.155c-644.9 398-802.8-162.6-1560.2 281.3\" />\n                    <path strokeWidth=\"2.613\" d=\"M1607.9 132.955c-660.5 418.1-828-159.8-1566 268.5\" />\n                    <path strokeWidth=\"2.548\" d=\"M1607.6 116.755c-676 438.2-853.1-156.9-1571.8 255.8\" />\n                    <path strokeWidth=\"2.484\" d=\"M1607.3 100.555c-691.5 458.3-878.2-154-1577.6 243.1\" />\n                    <path strokeWidth=\"2.419\" d=\"M1607.1 84.355c-707 478.4-903.4-151.2-1583.5 230.4\" />\n                    <path strokeWidth=\"2.355\" d=\"M1606.8 68.155c-722.5 498.5-928.5-148.3-1589.3 217.6\" />\n                    <path strokeWidth=\"2.29\" d=\"M1606.6 51.955c-738.1 518.6-953.7-145.5-1595.2 204.9\" />\n                    <path strokeWidth=\"2.226\" d=\"M1606.3 35.755c-753.6 538.7-978.8-142.6-1601 192.2\" />\n                    <path strokeWidth=\"2.161\" d=\"M1606 19.555c-769.1 558.8-1003.8-139.7-1606.7 179.5\" />\n                    <path strokeWidth=\"2.097\" d=\"M1605.8 3.355c-784.6 578.9-1029-136.9-1612.6 166.8\" />\n                    <path strokeWidth=\"2.032\" d=\"M1605.5-12.845c-800.1 598.9-1054.2-134-1618.4 154\" />\n                    <path strokeWidth=\"1.968\" d=\"M1605.3-29.045C789.6 590.055 526-160.145-19 112.255\" />\n                    <path strokeWidth=\"1.903\" d=\"M1605-45.245c-831.2 639.2-1104.4-128.3-1630.1 128.6\" />\n                    <path strokeWidth=\"1.839\" d=\"M1604.7-61.445C758 597.855 475.2-186.845-31.2 54.455\" />\n                    <path strokeWidth=\"1.774\" d=\"M1604.5-77.645c-862.3 679.4-1154.7-122.6-1641.8 103.1\" />\n                    <path strokeWidth=\"1.71\" d=\"M1604.2-93.845c-877.7 699.5-1179.8-119.7-1647.5 90.4\" />\n                    <path strokeWidth=\"1.645\" d=\"M1604-110.045c-893.3 719.6-1205-116.8-1653.4 77.7\" />\n                    <path strokeWidth=\"1.581\" d=\"M1603.7-126.245c-908.8 739.7-1230.1-114-1659.2 65\" />\n                    <path strokeWidth=\"1.516\" d=\"M1603.4-142.345c-924.3 759.7-1255.2-111.2-1665 52.2\" />\n                    <path strokeWidth=\"1.452\" d=\"M1603.2-158.545c-939.9 779.8-1280.4-108.3-1670.9 39.4\" />\n                    <path strokeWidth=\"1.387\" d=\"M1602.9-174.745c-955.3 799.9-1305.5-105.5-1676.7 26.7\" />\n                    <path strokeWidth=\"1.323\" d=\"M1602.7-190.945c-970.9 820-1330.7-102.6-1682.6 14\" />\n                    <path strokeWidth=\"1.258\" d=\"M1602.4-207.145c-986.4 840.1-1355.8-99.8-1688.3 1.3\" />\n                    <path strokeWidth=\"1.194\" d=\"M1602.1-223.345c-1001.9 860.2-1380.9-96.9-1694.1-11.5\" />\n                    <path strokeWidth=\"1.129\" d=\"M1601.9-239.545c-1017.5 880.3-1406.1-94-1700-24.2\" />\n                    <path strokeWidth=\"1.064\" d=\"M1601.6-255.745c-1032.9 900.4-1431.2-91.2-1705.8-36.9\" />\n                    <path d=\"M1601.4-271.945c-1048.5 920.5-1456.4-88.3-1711.7-49.6\" />\n                </g>\n            </g>\n        </svg>\n    );\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useEffect } from \"react\";\nimport IndependentSearch from \"@library/features/search/IndependentSearch\";\nimport { ButtonPreset } from \"@library/forms/ButtonPreset\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport Container from \"@library/layout/components/Container\";\nimport FlexSpacer from \"@library/layout/FlexSpacer\";\nimport Heading from \"@library/layout/Heading\";\nimport { useBannerContainerDivRef, useBannerContext } from \"@library/banner/BannerContext\";\nimport { bannerClasses, bannerVariables } from \"@library/banner/bannerStyles\";\nimport { SearchBarPresets } from \"@library/banner/SearchBarPresets\";\nimport { assetUrl, t } from \"@library/utility/appUtils\";\nimport classNames from \"classnames\";\nimport { titleBarClasses } from \"@library/headers/titleBarStyles\";\nimport { titleBarVariables } from \"@library/headers/TitleBar.variables\";\nimport { DefaultBannerBg } from \"@library/banner/DefaultBannerBg\";\nimport ConditionalWrap from \"@library/layout/ConditionalWrap\";\nimport { visibility } from \"@library/styles/styleHelpersVisibility\";\nimport { contentBannerClasses, contentBannerVariables } from \"@library/banner/contentBannerStyles\";\nimport { useComponentDebug } from \"@vanilla/react-utils\";\nimport { useLayout } from \"@library/layout/LayoutContext\";\nimport { Devices, useDevice } from \"@library/layout/DeviceContext\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { ISearchScopeNoCompact } from \"@library/features/search/SearchScopeContext\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\n\nexport interface IBannerProps {\n    action?: React.ReactNode;\n    title?: string; // Often the message to display isn't the real H1\n    description?: string;\n    className?: string;\n    backgroundImage?: string;\n    contentImage?: string;\n    logoImage?: string;\n    searchBarNoTopMargin?: boolean;\n    forceSearchOpen?: boolean;\n    isContentBanner?: boolean;\n    scope?: ISearchScopeNoCompact;\n    initialQuery?: string; // prepopulate text input\n    hideSearch?: boolean;\n}\n\n/**\n * A component representing a single crumb in a breadcrumb component.\n */\nexport default function Banner(props: IBannerProps) {\n    const { isCompact, mediaQueries } = useLayout();\n    const bannerContextRef = useBannerContainerDivRef();\n    const { setOverlayTitleBar, setRenderedH1 } = useBannerContext();\n    const { action, className, isContentBanner } = props;\n    const varsTitleBar = titleBarVariables();\n    const classesTitleBar = titleBarClasses();\n    const classes = isContentBanner ? contentBannerClasses(mediaQueries) : bannerClasses(mediaQueries);\n    const vars = isContentBanner ? contentBannerVariables() : bannerVariables();\n    const { options } = vars;\n    const device = useDevice();\n\n    const { title = vars.title.text } = props;\n\n    useComponentDebug({ vars });\n\n    useEffect(() => {\n        setOverlayTitleBar(options.overlayTitleBar);\n    }, [options.overlayTitleBar]);\n\n    if (!options.enabled) {\n        return null;\n    }\n\n    const description = props.description ?? vars.description.text;\n\n    // Image element (right)\n    let rightImageSrc = props.contentImage || vars.rightImage.image || null;\n    rightImageSrc = rightImageSrc ? assetUrl(rightImageSrc) : null;\n\n    // Logo (Image in middle)\n    let logoImageSrc = props.logoImage || vars.logo.image || null;\n    logoImageSrc = logoImageSrc ? assetUrl(logoImageSrc) : null;\n\n    // Search placement\n    const showBottomSearch = options.searchPlacement === \"bottom\" && !options.hideSearch && !props.hideSearch;\n    const showMiddleSearch = options.searchPlacement === \"middle\" && !options.hideSearch && !props.hideSearch;\n    const searchAloneInContainer =\n        showBottomSearch || (showMiddleSearch && options.hideDescription && options.hideTitle);\n\n    const hideButton = isCompact || vars.presets.button.preset === ButtonPreset.HIDE || !!props.scope;\n\n    const searchComponent = (\n        <div\n            className={classNames(classes.searchContainer, {\n                [classes.noTopMargin]: searchAloneInContainer,\n            })}\n        >\n            <IndependentSearch\n                forceMenuOpen={props.forceSearchOpen}\n                buttonClass={classes.searchButton}\n                buttonDropDownClass={classes.searchDropDownButton}\n                buttonBaseClass={ButtonTypes.CUSTOM}\n                isLarge={true}\n                placeholder={t(\"SearchBoxPlaceHolder\", \"Search\")}\n                inputClass={classes.input}\n                iconClass={classes.icon}\n                buttonLoaderClassName={classNames(classes.buttonLoader)}\n                hideSearchButton={hideButton}\n                contentClass={classes.content}\n                valueContainerClasses={classNames(classes.valueContainer)}\n                iconContainerClasses={classes.iconContainer}\n                resultsAsModalClasses={classes.resultsAsModal}\n                scope={props.scope}\n                initialQuery={props.initialQuery}\n                overwriteSearchBar={{\n                    borderRadius: styleUnit(vars.searchBar.border.radius),\n                    preset: vars.presets.input.preset,\n                    compact: !!rightImageSrc || device === Devices.MOBILE || device === Devices.XS,\n                }}\n            />\n        </div>\n    );\n\n    const headingTitleLarge = (\n        <Heading className={classes.title} depth={1} isLarge>\n            {title}\n        </Heading>\n    );\n\n    return (\n        <div\n            ref={bannerContextRef}\n            className={classNames(className, classes.root, {\n                [classesTitleBar.negativeSpacer]: varsTitleBar.fullBleed.enabled && options.overlayTitleBar,\n            })}\n        >\n            {/* First container holds:\n                - Background.\n                - Right image if there is one.\n                - This container has overflow: \"hidden\".\n                - Spacer elements for all the main content, but no actual content.\n                - Overflow hidden can't be applied to the main content, because it has a search box that can't be cut off.\n            */}\n            <div className={classes.bannerContainer}>\n                <div className={classes.overflowRightImageContainer}>\n                    <div\n                        className={classNames(classes.middleContainer, {\n                            [classesTitleBar.bannerPadding]: varsTitleBar.fullBleed.enabled,\n                        })}\n                    >\n                        <div className={classNames(classes.outerBackground(props.backgroundImage || undefined))}>\n                            {!props.backgroundImage &&\n                                !vars.outerBackground.image &&\n                                !vars.outerBackground.unsetBackground && (\n                                    <DefaultBannerBg isContentBanner={isContentBanner} />\n                                )}\n                        </div>\n                        {vars.backgrounds.useOverlay && <div className={classes.backgroundOverlay} />}\n                        <Container className={classes.fullHeight}>\n                            <div className={classes.imagePositioner}>\n                                {/*For SEO & accessibility*/}\n                                {options.hideTitle && (\n                                    <>\n                                        <Heading className={visibility().visuallyHidden} depth={1}>\n                                            {title}\n                                        </Heading>\n                                        {setRenderedH1(true)}\n                                    </>\n                                )}\n                                <ConditionalWrap\n                                    className={classes.contentContainer(!rightImageSrc)}\n                                    condition={\n                                        showMiddleSearch ||\n                                        !options.hideTitle ||\n                                        !options.hideDescription ||\n                                        !!logoImageSrc\n                                    }\n                                />\n                                {rightImageSrc && (\n                                    <div className={classes.imageElementContainer}>\n                                        {/*We rely on the title for screen readers as we don't yet have alt text hooked up to image*/}\n                                        <img className={classes.rightImage} src={rightImageSrc} aria-hidden={true} />\n                                    </div>\n                                )}\n                            </div>\n                        </Container>\n                        {showBottomSearch && <div className={classes.searchStrip} style={{ background: \"none\" }} />}\n                    </div>\n                </div>\n                {/* Main Content Area\n                - Note that background is up in the previous grouping.\n                - Overflow hidden CAN NEVER BE APPLIED HERE.\n            */}\n                <div\n                    className={classNames(classes.middleContainer, {\n                        [classesTitleBar.bannerPadding]: varsTitleBar.fullBleed.enabled,\n                    })}\n                >\n                    <Container fullGutter>\n                        <div className={classes.imagePositioner}>\n                            {/*For SEO & accessibility*/}\n                            {options.hideTitle && (\n                                <>\n                                    <Heading className={visibility().visuallyHidden} depth={1}>\n                                        {title}\n                                    </Heading>\n                                    {setRenderedH1(true)}\n                                </>\n                            )}\n                            <ConditionalWrap\n                                className={classes.contentContainer(!rightImageSrc)}\n                                condition={\n                                    showMiddleSearch || !options.hideTitle || !options.hideDescription || !!logoImageSrc\n                                }\n                            >\n                                {!!logoImageSrc && (\n                                    <div className={classes.logoSpacer}>\n                                        <div className={classes.logoContainer}>\n                                            {/*We rely on the title for screen readers as we don't yet have alt text hooked up to image*/}\n                                            <img className={classes.logo} src={logoImageSrc} aria-hidden={true} />\n                                        </div>\n                                    </div>\n                                )}\n                                {!options.hideTitle && (\n                                    <div className={classes.titleWrap}>\n                                        <FlexSpacer className={classes.titleFlexSpacer} />\n                                        {title && (\n                                            <>\n                                                {options.url ? (\n                                                    <SmartLink to={options.url} className={classes.titleUrlWrap}>\n                                                        {headingTitleLarge}\n                                                    </SmartLink>\n                                                ) : (\n                                                    <>{headingTitleLarge}</>\n                                                )}\n                                                {setRenderedH1(true)}\n                                            </>\n                                        )}\n                                        <div className={classNames(classes.text, classes.titleFlexSpacer)}>\n                                            {action}\n                                        </div>\n                                    </div>\n                                )}\n                                {!options.hideDescription && description && (\n                                    <div className={classes.descriptionWrap}>\n                                        <p\n                                            className={classNames(classes.description, classes.text)}\n                                            dangerouslySetInnerHTML={{ __html: description }}\n                                        />\n                                    </div>\n                                )}\n                                {showMiddleSearch && searchComponent}\n                                {Banner.extraAfterSearchBarComponents.map((ComponentName, index) => {\n                                    return <ComponentName key={index} />;\n                                })}\n                            </ConditionalWrap>\n                            {rightImageSrc && <div className={classes.imageElementContainer} />}\n                        </div>\n                    </Container>\n                </div>\n            </div>\n            {showBottomSearch && (\n                <div className={classes.searchStrip}>\n                    <Container fullGutter>{searchComponent}</Container>\n                </div>\n            )}\n        </div>\n    );\n}\n\n/** Hold the extra after search bar text components before rendering. */\nBanner.extraAfterSearchBarComponents = [] as React.ComponentType[];\n\n/**\n * Register an extra component to be rendered after the search bar.\n *\n * @param component The component class to be render.\n */\nBanner.registerAfterSearchBar = (component: React.ComponentType) => {\n    Banner.extraAfterSearchBarComponents.pop();\n    Banner.extraAfterSearchBarComponents.push(component);\n};\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { absolutePosition, allLinkStates, negative } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { percent, px } from \"csx\";\n\nexport const attachmentVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"attachment\");\n\n    const padding = makeThemeVars(\"padding\", {\n        default: 12,\n    });\n\n    const text = makeThemeVars(\"text\", {\n        fontSize: globalVars.fonts.size.medium,\n    });\n\n    const title = makeThemeVars(\"title\", {\n        color: globalVars.mixBgAndFg(0.9),\n    });\n\n    const loading = makeThemeVars(\"loading\", {\n        opacity: 0.5,\n    });\n\n    return { padding, text, title, loading };\n});\n\nexport const attachmentClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const formElementVars = formElementsVariables();\n    const vars = attachmentVariables();\n    const style = styleFactory(\"attachment\");\n\n    const link = style(\"link\", {\n        display: \"block\",\n        width: \"100%\",\n        ...allLinkStates({\n            allStates: {\n                textDecoration: \"none\",\n            },\n        }),\n    });\n\n    const box = style(\"box\", {\n        position: \"relative\",\n        display: \"flex\",\n        flexWrap: \"nowrap\",\n        alignItems: \"flex-start\",\n        justifyContent: \"space-between\",\n        padding: vars.padding.default,\n        width: percent(100),\n        ...Mixins.border({\n            color: globalVars.elementaryColors.transparent,\n            width: 2,\n            radius: 0,\n        }),\n    });\n\n    const format = style(\"format\", {\n        flexBasis: px(globalVars.icon.sizes.small + vars.padding.default),\n        height: styleUnit(globalVars.icon.sizes.small),\n        paddingRight: styleUnit(vars.padding.default),\n        flexShrink: 1,\n    });\n\n    const main = style(\"main\", {\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"flex-start\",\n        justifyContent: \"flex-start\",\n        flexGrow: 1,\n    });\n\n    const title = style(\"title\", {\n        fontSize: px(vars.text.fontSize),\n        color: vars.title.color.toString(),\n        fontWeight: globalVars.fonts.weights.semiBold,\n        lineHeight: px(globalVars.icon.sizes.small),\n    });\n\n    const metas = style(\"metas\", {\n        ...Mixins.margin({\n            left: styleUnit(negative(vars.padding.default / 2)),\n            right: styleUnit(negative(vars.padding.default / 2)),\n            bottom: 0,\n        }),\n        lineHeight: globalVars.lineHeights.condensed,\n    });\n\n    const close = style(\"close\", {\n        ...Mixins.margin({\n            top: px(-((formElementVars.sizing.height - globalVars.icon.sizes.default) / 2)),\n            right: px(-((formElementVars.sizing.height - globalVars.icon.sizes.default) / 2)),\n        }),\n        pointerEvents: \"all\",\n    });\n\n    const loadingProgress = style(\"loadingProgress\", {\n        ...absolutePosition.bottomLeft(),\n        transition: `width ease-out .2s`,\n        height: px(3),\n        marginBottom: px(0),\n        width: 0,\n        maxWidth: percent(100),\n        backgroundColor: globalVars.mainColors.primary.toString(),\n    });\n\n    const loadingContent = style(\"loadingContent\", {\n        ...{\n            [`.${format}`]: {\n                opacity: vars.loading.opacity,\n            },\n            [`.${main}`]: {\n                opacity: vars.loading.opacity,\n            },\n        },\n    });\n\n    return { link, box, format, main, title, metas, close, loadingProgress, loadingContent };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport classNames from \"classnames\";\nimport React from \"react\";\nimport { useLayout, withLayout } from \"@library/layout/LayoutContext\";\nimport { ILayoutContainer } from \"@library/layout/components/interface.layoutContainer\";\nimport { panelWidgetClasses } from \"@library/layout/panelWidgetStyles\";\n\nexport function PanelWidget(props: ILayoutContainer) {\n    const classes = panelWidgetClasses(useLayout().mediaQueries);\n    return <div className={classNames(classes.root, props.className)}>{props.children}</div>;\n}\n\nexport default withLayout(PanelWidget);\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ILinkStates } from \"@library/styles/styleHelpersLinks\";\nimport { logDebug } from \"@vanilla/utils/src/debugUtils\";\nimport { CSSObject } from \"@emotion/css\";\n\n// Similar to ILinkStates, but can be button or link, so we don't have link specific states here and not specific to colors\nexport interface IActionStates {\n    noState?: object;\n    allStates?: object; // Applies to all\n    hover?: object;\n    focus?: object;\n    clickFocus?: object; // Focused, not through keyboard?: object;\n    keyboardFocus?: object; // Optionally different state for keyboard accessed element. Will default to \"focus\" state if not set.\n    active?: object;\n}\n\nexport interface IStateSelectors {\n    noState?: string;\n    allStates?: string; // Applies to all\n    hover?: string;\n    focus?: string;\n    clickFocus?: string; // Focused, not through keyboard?: object;\n    keyboardFocus?: string; // Optionally different state for keyboard accessed element. Will default to \"focus\" state if not set.\n    active?: string;\n}\n\nexport interface IButtonStates {\n    allStates?: object; // Applies to all\n    noState?: object; // Applies to stateless link\n    hover?: object;\n    focus?: object;\n    clickFocus?: object; // Focused, not through keyboard\n    keyboardFocus?: object; // Optionally different state for keyboard accessed element. Will default to \"focus\" state if not set.\n    active?: object;\n}\n\nexport const allLinkStates = (styles: ILinkStates, nested?: object): CSSObject => {\n    const output: CSSObject = allButtonStates(styles, nested, true);\n    const visited = styles.visited !== undefined ? styles.visited : styles.noState || {};\n    output[\":visited\"] = { ...visited };\n    return output;\n};\n\nexport const allButtonStates = (\n    styles: IButtonStates,\n    nested?: object,\n    isLink?: boolean,\n    debugMode?: boolean,\n): CSSObject => {\n    const allStates = styles.allStates !== undefined ? styles.allStates : {};\n    const noState = styles.noState !== undefined ? styles.noState : {};\n\n    const disabledStyles = isLink\n        ? {}\n        : {\n              \"&:disabled\": {\n                  opacity: 0.5,\n              },\n          };\n\n    const output = {\n        ...allStates,\n        ...noState,\n        ...noState,\n        \"&:hover:not(:disabled)\": { ...allStates, ...styles.hover },\n        \"&:focus\": { ...allStates, ...styles.focus },\n        \"&:focus:not(.focus-visible)\": { ...allStates, ...styles.clickFocus },\n        \"&&.focus-visible\": { ...allStates, ...styles.keyboardFocus },\n        \"&:active:not(:disabled)\": { ...allStates, ...styles.active },\n        ...disabledStyles,\n        ...nested,\n    };\n\n    if (debugMode) {\n        logDebug(\"allButtonStates: \");\n        logDebug(\"style: \", styles);\n        logDebug(\"nested: \", nested);\n        logDebug(\"output: \", output);\n    }\n\n    return output;\n};\n\n/*\n * Helper to write CSS state styles. Note this one is for buttons or links\n * *** You must use this inside of a \"$nest\" ***\n */\nexport const buttonStates = (styles: IActionStates, nest?: object, classBasedStates?: IStateSelectors) => {\n    const allStates = styles.allStates !== undefined ? styles.allStates : {};\n    const hover = styles.hover !== undefined ? styles.hover : {};\n    const focus = styles.focus !== undefined ? styles.focus : {};\n    const clickFocus = styles.clickFocus !== undefined ? styles.clickFocus : {};\n    const keyboardFocus = styles.keyboardFocus !== undefined ? styles.keyboardFocus : {};\n    const active = styles.active !== undefined ? styles.active : {};\n    const noState = styles.noState !== undefined ? styles.noState : {};\n\n    if (!classBasedStates) {\n        classBasedStates = {};\n    }\n\n    return {\n        [appendExtraSelector(\"&\", classBasedStates.allStates)]: { ...allStates, ...noState },\n        [appendExtraSelector(\"&:hover\", classBasedStates.hover)]: { ...allStates, ...hover },\n        [appendExtraSelector(\"&:focus\", classBasedStates.focus)]: { ...allStates, ...focus },\n        [appendExtraSelector(\"&:focus:not(.focus-visible)\", classBasedStates.clickFocus)]: {\n            ...allStates,\n            ...clickFocus,\n        },\n        [appendExtraSelector(\"&.focus-visible\", classBasedStates.keyboardFocus)]: {\n            ...allStates,\n            ...keyboardFocus,\n        },\n        [appendExtraSelector(\"&&:active\", classBasedStates.active)]: { ...allStates, ...active },\n        ...nest,\n    };\n};\n\nconst appendExtraSelector = (currentSelector: string, additionnalSelector) => {\n    if (additionnalSelector) {\n        return `${currentSelector}, ${additionnalSelector}`;\n    } else {\n        return currentSelector;\n    }\n};\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { color, ColorHelper } from \"csx\";\nimport { ColorsUtils } from \"./ColorsUtils\";\n\nexport const ensureColorHelper = (colorValue: string | ColorHelper) => {\n    return typeof colorValue === \"string\" ? color(colorValue) : colorValue;\n};\n\nexport const colorOut = ColorsUtils.colorOut;\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { AppearanceProperty, PointerEventsProperty, UserSelectProperty } from \"csstype\";\nimport { important } from \"csx\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { CSSObject } from \"@emotion/css\";\n\nexport const userSelect = (value: UserSelectProperty = \"none\", isImportant: boolean = false): CSSObject => {\n    const val = (isImportant ? important(value) : value) as any;\n    return {\n        WebkitUserSelect: val,\n        MozUserSelect: val,\n        msUserSelect: val,\n        userSelect: val,\n    };\n};\n\nexport const pointerEvents = (value: PointerEventsProperty = \"none\") => {\n    return {\n        pointerEvents: important(value),\n    };\n};\n\nexport const pointerEventsClass = (value: PointerEventsProperty = \"none\") => {\n    const style = styleFactory(\"pointerEvents\");\n    return style(pointerEvents(value));\n};\n\nexport const disabledInput = () => {\n    const formElementVars = formElementsVariables();\n    return {\n        pointerEvents: important(\"none\"),\n        ...userSelect(\"none\", true),\n        cursor: important(\"default\"),\n        opacity: important((formElementVars.disabled.opacity as any).toString()),\n    };\n};\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { CSSObject } from \"@emotion/css\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { calc } from \"csx\";\n\n/**\n * Extend an item container outward to compensate for item paddings.\n * Usually used in a grid.\n *\n * If you use this function, make sure the parent is set to 100% width with over flow hidden.\n *\n * @param itemPaddingX A single unit of padding of a horizontal side of the item.\n */\nexport function extendItemContainer(itemPaddingX: number): CSSObject {\n    return {\n        width: calc(`100% + ${styleUnit(itemPaddingX * 2)}`),\n        marginLeft: styleUnit(-itemPaddingX),\n    };\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { CSSObject } from \"@emotion/css\";\nimport { AppearanceProperty } from \"csstype\";\nimport { important } from \"csx\";\n\nexport const appearance = (value: AppearanceProperty = \"none\", isImportant: boolean = false): CSSObject => {\n    const val = (isImportant ? important(value) : value) as any;\n    return {\n        WebkitAppearance: val,\n        MozAppearance: val,\n        appearance: val,\n    };\n};\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { keyframes } from \"@library/styles/styleShim\";\nimport { ColorHelper, deg, percent, quote } from \"csx\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { ContentProperty, DisplayProperty, PositionProperty } from \"csstype\";\nimport { defaultTransition } from \"@library/styles/styleHelpersAnimation\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { CSSObject } from \"@emotion/css\";\n\nconst spinnerOffset = 73;\nconst spinnerLoaderAnimation = keyframes({\n    \"0%\": { transform: `rotate(${deg(spinnerOffset)})` },\n    \"100%\": { transform: `rotate(${deg(360 + spinnerOffset)})` },\n});\n\nexport interface ISpinnerProps {\n    color?: ColorHelper;\n    dimensions?: string | number;\n    thickness?: string | number;\n    size?: string | number;\n    speed?: string;\n}\n\nconst DEFAULT_SPEED = \"0.7s\";\n\nexport function spinnerLoaderAnimationProperties(): CSSObject {\n    return {\n        ...defaultTransition(\"opacity\"),\n        animationName: spinnerLoaderAnimation,\n        animationDuration: DEFAULT_SPEED,\n        animationIterationCount: \"infinite\",\n        animationTimingFunction: \"ease-in-out\",\n    };\n}\n\nexport const spinnerLoader = (props: ISpinnerProps) => {\n    const globalVars = globalVariables();\n    const spinnerVars = {\n        color: props.color || globalVars.mainColors.primary,\n        size: props.size || 18,\n        thickness: props.thickness || 3,\n        ...props,\n    };\n    return {\n        position: \"relative\" as PositionProperty,\n        content: quote(\"\") as ContentProperty,\n        display: \"block\" as DisplayProperty,\n        width: styleUnit(spinnerVars.size),\n        height: styleUnit(spinnerVars.size),\n        borderRadius: percent(50),\n        borderTop: `${styleUnit(spinnerVars.thickness)} solid ${spinnerVars.color.toString()}`,\n        borderRight: `${styleUnit(spinnerVars.thickness)} solid ${spinnerVars.color.fade(0.3).toString()}`,\n        borderBottom: `${styleUnit(spinnerVars.thickness)} solid ${spinnerVars.color.fade(0.3).toString()}`,\n        borderLeft: `${styleUnit(spinnerVars.thickness)} solid ${spinnerVars.color.fade(0.3).toString()}`,\n        transform: \"translateZ(0)\",\n        ...spinnerLoaderAnimationProperties(),\n    };\n};\n","import { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { color } from \"csx\";\n\nexport const panelBackgroundVariables = useThemeCache(() => {\n    const makeThemeVars = variableFactory(\"panelBackground\");\n\n    const config = makeThemeVars(\"config\", {\n        render: false,\n    });\n\n    const colors = makeThemeVars(\"colors\", {\n        backgroundColor: color(\"#f4f6f9\"),\n    });\n\n    return { config, colors };\n});\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { onContent } from \"@library/utility/appUtils\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\n\ntype HLJS = typeof import(\"@library/content/highlightJs\").default;\n\nexport function initCodeHighlighting() {\n    void highlightCodeBlocks();\n    onContent(() => void highlightCodeBlocks());\n}\n\nexport async function highlightCodeBlocks(domNode: HTMLElement = document.body) {\n    // Make sure we actually have some codeblocks before initializing.\n    const blocks = domNode.querySelectorAll(\".code.codeBlock\");\n    if (blocks.length === 0) {\n        return;\n    }\n\n    const hljs = await importHLJS();\n    blocks.forEach((node) => {\n        hljs.highlightBlock(node);\n    });\n}\n\nlet hljsCache: HLJS | null = null;\n\n/**\n * Highlight some text and return HTML for it.\n *\n * @param text Some text to highlight.\n */\nexport async function highlightText(text: string): Promise<string> {\n    const hljs = await importHLJS();\n    return hljs.highlightAuto(text).value;\n}\n\n/**\n * Like hihglightText, but returns synchronously.\n *\n * If null is returned, ignore the result, because the highlighter isn't initialized yet.\n */\nexport function highlightTextSync(text: string): string | null {\n    if (hljsCache) {\n        return hljsCache.highlightAuto(text).value;\n    } else {\n        void importHLJS(); // Don't care when it finishes.\n        return null;\n    }\n}\n\nlet requestPromise: Promise<HLJS> | null = null;\n\n/**\n * Ensure we only import this once.\n */\nfunction importHLJS(): Promise<HLJS> {\n    if (requestPromise !== null) {\n        return requestPromise;\n    }\n\n    const innerImport = async () => {\n        // Lazily initialize this because it can be rather heavy.\n        const hljs = await import(\"@library/content/highlightJs\" /* webpackChunkName: \"highlightJs\" */);\n\n        // Start fetching the styles.\n        const vars = globalVariables();\n        const useLight = vars.mainColors.bg.lightness() >= 0.5;\n        if (useLight) {\n            await import(\"./_codeLight.scss\" /* webpackChunkName: \"highlightJs-light\" */ as any); // Sorry typescript.\n        } else {\n            await import(\"./_codeDark.scss\" /* webpackChunkName: \"highlightJs-dark\" */ as any); // Sorry typescript.\n        }\n\n        hljsCache = hljs.default;\n\n        return hljs.default;\n    };\n\n    requestPromise = innerImport();\n    return requestPromise;\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { color, em, percent } from \"csx\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { containerVariables } from \"@library/layout/components/containerStyles\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { lineHeightAdjustment } from \"@library/styles/textUtils\";\n\nexport const typographyClasses = useThemeCache(() => {\n    const style = styleFactory(\"typography\");\n    const globalVars = globalVariables();\n    const mediaQueries = layoutVariables().mediaQueries();\n\n    const pageTitle = style(\n        \"pageTitle\",\n        {\n            fontSize: styleUnit(globalVars.fonts.size.title),\n            fontWeight: globalVars.fonts.sizeWeight.title ?? undefined,\n            lineHeight: globalVars.lineHeights.condensed,\n            transform: `translateX(${em(globalVars.fonts.alignment.headings.horizontalOffset)})`,\n            margin: 0,\n            ...lineHeightAdjustment(),\n        },\n        mediaQueries.oneColumnDown({\n            fontSize: styleUnit(globalVars.fonts.mobile.size.title),\n        }),\n    );\n\n    const largeTitle = style(\n        \"largeTitle\",\n        {\n            width: percent(100),\n            fontSize: styleUnit(globalVars.fonts.size.largeTitle),\n        },\n        mediaQueries.oneColumnDown({\n            fontSize: styleUnit(globalVars.fonts.mobile.size.title),\n        }),\n    );\n\n    const subTitle = style(\"subTitle\", {\n        fontSize: styleUnit(globalVars.fonts.size.subTitle),\n    });\n\n    const componentSubTitle = style(\"componentSubTitle\", {\n        fontSize: styleUnit(globalVars.fonts.size.large),\n    });\n\n    return {\n        largeTitle,\n        pageTitle,\n        subTitle,\n        componentSubTitle,\n    };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { keyframes } from \"@library/styles/styleShim\";\n\nexport const standardAnimations = () => {\n    return {\n        fadeIn: keyframes({\n            label: \"animation-fadeIn\",\n            \"0%\": { opacity: 0 },\n            \"100%\": { opacity: 1 },\n        }),\n    };\n};\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { createRef, useContext, useEffect, useState } from \"react\";\nimport { logWarning } from \"@vanilla/utils\";\n\ntype FontSizeSetter = (fontSize: number | null) => void;\n\ninterface IContextParams {\n    setFontSize: FontSizeSetter;\n    fontSize: number | null;\n}\n\nexport const FontSizeCalculatorContext = React.createContext<IContextParams>({\n    setFontSize: () => {\n        logWarning(\"'setFontSize' called, but a proper provider was not configured.\");\n    },\n    fontSize: null,\n});\n\nexport interface IWithFontSize {\n    setFontSize: FontSizeSetter;\n}\n\ninterface IProps {\n    children: React.ReactNode;\n}\n\n/**\n * Provider for getting a calculated font size from an element.\n * This context is to center elements based on the font size of text,\n * so it stays centered on the first line.\n *\n * Returns the line height in pixels\n *\n * @see fontSize\n */\nexport function FontSizeCalculatorProvider(props: IProps) {\n    const { children } = props;\n    const [fontSize, setFontSize] = useState<number | null>(null);\n\n    return (\n        <FontSizeCalculatorContext.Provider\n            value={{\n                setFontSize,\n                fontSize,\n            }}\n        >\n            {children}\n        </FontSizeCalculatorContext.Provider>\n    );\n}\n\nexport function useFontSizeCalculator() {\n    return useContext(FontSizeCalculatorContext);\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { dropDownClasses } from \"@library/flyouts/dropDownStyles\";\nimport Button from \"@library/forms/Button\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport Modal from \"@library/modal/Modal\";\nimport ModalSizes from \"@library/modal/ModalSizes\";\nimport { t } from \"@library/utility/appUtils\";\nimport classNames from \"classnames\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { useFocusWatcher, useEscapeListener } from \"@vanilla/react-utils\";\nimport ScreenReaderContent from \"@library/layout/ScreenReaderContent\";\n\nexport interface IFlyoutToggleChildParameters {\n    id: string;\n    handleID: string;\n    isVisible: boolean;\n    closeMenuHandler(event?: React.SyntheticEvent<any>);\n    renderAbove?: boolean;\n    renderLeft?: boolean;\n}\n\ninterface IProps {\n    id: string;\n    name?: string;\n    contentID: string;\n    className?: string;\n    buttonContents: React.ReactNode;\n    disabled?: boolean;\n    children: (props: IFlyoutToggleChildParameters) => JSX.Element;\n    onClose?: () => void;\n    buttonBaseClass: ButtonTypes;\n    buttonClassName?: string;\n    isVisible?: boolean;\n    onVisibilityChange?: (isVisible: boolean) => void;\n    renderAbove?: boolean;\n    renderLeft?: boolean;\n    toggleButtonClassName?: string;\n    buttonRef?: React.RefObject<HTMLButtonElement>;\n    openAsModal: boolean;\n    initialFocusElement?: HTMLElement | null;\n    tag?: string;\n}\n\nexport default function FlyoutToggle(props: IProps) {\n    const { initialFocusElement, onVisibilityChange, onClose, id, contentID } = props;\n\n    // Focus management & visibility\n    const ownButtonRef = useRef<HTMLButtonElement>(null);\n    const buttonRef = props.buttonRef || ownButtonRef;\n\n    const controllerRef = useRef<HTMLDivElement>(null);\n    const [ownIsVisible, ownSetVisibility] = useState(false);\n    const isVisible = props.isVisible !== undefined ? props.isVisible : ownIsVisible;\n    const setVisibility = useCallback(\n        (visibility: boolean) => {\n            ownSetVisibility(visibility);\n            onVisibilityChange && onVisibilityChange(visibility);\n\n            // Kludge for interaction with old flyout system.\n            if (visibility && window.closeAllFlyouts) {\n                window.closeAllFlyouts();\n            }\n        },\n        [ownSetVisibility, onVisibilityChange],\n    );\n\n    useEffect(() => {\n        if (isVisible && initialFocusElement) {\n            // Focus the inital focusable element when we gain visibility.\n            if (initialFocusElement) {\n                initialFocusElement.focus();\n            }\n        }\n    }, [isVisible, initialFocusElement]);\n\n    /**\n     * Toggle Menu menu\n     */\n    const buttonClickHandler = useCallback(\n        (e) => {\n            e.stopPropagation();\n            setVisibility(!isVisible);\n            e.toElement.focus();\n        },\n        [isVisible, setVisibility],\n    );\n\n    useEffect(() => {\n        const buttonElement = buttonRef.current;\n        if (!buttonElement) {\n            return;\n        }\n        buttonElement.addEventListener(\"click\", buttonClickHandler);\n        return () => {\n            buttonElement.removeEventListener(\"click\", buttonClickHandler);\n        };\n    }, [buttonRef, buttonClickHandler]);\n\n    const closeMenuHandler = useCallback(\n        (event) => {\n            event.stopPropagation();\n            event.preventDefault();\n\n            onClose && onClose();\n\n            const { activeElement } = document;\n            const parentElement = controllerRef.current;\n\n            setVisibility(false);\n\n            if (parentElement && parentElement.contains(activeElement)) {\n                if (buttonRef.current) {\n                    buttonRef.current.focus();\n                    buttonRef.current.classList.add(\"focus-visible\");\n                }\n            }\n        },\n        [onClose, controllerRef, buttonRef, setVisibility],\n    );\n\n    const onKeyPress = (event: React.KeyboardEvent<any>) => {\n        switch (event.key) {\n            case \"Escape\":\n                closeMenuHandler(event);\n        }\n    };\n\n    /**\n     * Stop click propagation outside the flyout\n     */\n    const handleBlockEventPropagation = useCallback((e: React.SyntheticEvent) => {\n        e.stopPropagation();\n    }, []);\n\n    const handleFocusChange = (hasFocus: boolean) => {\n        if (!hasFocus) {\n            setVisibility(false);\n        }\n    };\n\n    // Focus handling\n    useFocusWatcher(controllerRef, handleFocusChange, props.openAsModal);\n    useEscapeListener({\n        root: controllerRef.current,\n        returnElement: buttonRef.current,\n        callback: closeMenuHandler,\n    });\n\n    const classes = dropDownClasses();\n    const buttonClasses = classNames(props.buttonClassName, props.toggleButtonClassName, {\n        isOpen: isVisible,\n    });\n\n    const childrenData: IFlyoutToggleChildParameters = {\n        id: contentID,\n        handleID: id,\n        isVisible: !!isVisible,\n        closeMenuHandler,\n        renderAbove: props.renderAbove,\n        renderLeft: props.renderLeft,\n    };\n\n    const classesDropDown = !props.openAsModal ? classNames(\"flyouts\", classes.root) : null;\n    const Tag = (props.tag ?? `div`) as \"div\";\n\n    const isContentVisible = !props.disabled && isVisible;\n    return (\n        <Tag\n            className={classNames(classesDropDown, props.className, {\n                asModal: props.openAsModal,\n            })}\n            ref={controllerRef}\n            onClick={handleBlockEventPropagation}\n        >\n            <Button\n                id={id}\n                className={buttonClasses}\n                title={props.name}\n                aria-label={\"name\" in props ? props.name : undefined}\n                aria-controls={contentID}\n                aria-expanded={isVisible}\n                aria-haspopup=\"true\"\n                disabled={props.disabled}\n                baseClass={props.buttonBaseClass}\n                buttonRef={buttonRef}\n            >\n                {props.name && <ScreenReaderContent>{props.name}</ScreenReaderContent>}\n                {props.buttonContents}\n            </Button>\n\n            <React.Fragment>\n                {props.openAsModal ? (\n                    <Modal\n                        id={contentID}\n                        label={t(\"title\")}\n                        size={ModalSizes.SMALL}\n                        exitHandler={closeMenuHandler}\n                        elementToFocusOnExit={buttonRef.current!}\n                        isVisible={isContentVisible}\n                        onKeyPress={onKeyPress}\n                    >\n                        {props.children(childrenData)}\n                    </Modal>\n                ) : (\n                    isContentVisible && props.children(childrenData)\n                )}\n            </React.Fragment>\n        </Tag>\n    );\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport DropDown, { FlyoutType } from \"@library/flyouts/DropDown\";\nimport { dropDownClasses } from \"@library/flyouts/dropDownStyles\";\nimport DropDownItemButton from \"@library/flyouts/items/DropDownItemButton\";\nimport DropDownItemLink from \"@library/flyouts/items/DropDownItemLink\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { selectBoxClasses } from \"@library/forms/select/selectBoxStyles\";\nimport { useUniqueID } from \"@library/utility/idUtils\";\nimport classNames from \"classnames\";\nimport React, { useState, useRef } from \"react\";\nimport ConditionalWrap from \"@library/layout/ConditionalWrap\";\nimport { NBSP, DownTriangleIcon, CheckCompactIcon } from \"@library/icons/common\";\n\nexport interface ISelectBoxItem {\n    value: string;\n    name?: string;\n    content?: React.ReactNode;\n    className?: string;\n    icon?: React.ReactNode;\n    url?: string;\n}\n\nexport interface ISelectBoxProps {\n    className?: string;\n    options: ISelectBoxItem[];\n    value?: ISelectBoxItem;\n    onChange?: (value: ISelectBoxItem) => void;\n    buttonClassName?: string;\n    buttonBaseClass?: ButtonTypes;\n    widthOfParent?: boolean;\n    openAsModal?: boolean;\n    renderLeft?: boolean;\n    offsetPadding?: boolean;\n    verticalPadding?: boolean;\n    describedBy: string;\n    labelWrap?: string; // conditional wrap around text to separate it from the icon.\n    horizontalOffset?: boolean;\n    afterButton?: React.ReactNode;\n    overwriteButtonContents?: React.ReactNode;\n}\n\n/**\n * Generates Select Box component (similar to a select)\n */\nexport default function SelectBox(props: ISelectBoxProps) {\n    const id = useUniqueID(\"selectBox\");\n    const firstValue = props.options.length > 0 ? props.options[0] : null;\n    const buttonRef = useRef<HTMLButtonElement | null>(null);\n    const [ownValue, setOwnValue] = useState(firstValue);\n    const {\n        renderLeft = true,\n        verticalPadding = true,\n        horizontalOffset = true,\n        afterButton,\n        overwriteButtonContents,\n    } = props;\n    const selectedOption = props.value || ownValue;\n    const [isVisible, setIsVisible] = useState(false);\n    const ignoreRef = useRef<boolean>(false);\n    const onChange = (value: ISelectBoxItem) => {\n        const funct = props.onChange || setOwnValue;\n        ignoreRef.current = true;\n        setIsVisible(false);\n        funct(value);\n        setTimeout(() => {\n            ignoreRef.current = false;\n        }, 2);\n    };\n\n    const classes = selectBoxClasses();\n    const classesDropDown = dropDownClasses();\n    return (\n        <div aria-describedby={props.describedBy} className={classNames(\"selectBox\", props.className)}>\n            <DropDown\n                isVisible={isVisible}\n                onVisibilityChange={(val) => {\n                    if (ignoreRef.current !== true) {\n                        if (!ignoreRef.current) {\n                            setIsVisible(val);\n                        }\n                    }\n                }}\n                key={selectedOption ? selectedOption.value : undefined}\n                buttonRef={buttonRef}\n                contentID={id + \"-content\"}\n                handleID={id + \"-handle\"}\n                className={classNames(\n                    \"selectBox-dropDown\",\n                    {\n                        \"dropDownItem-verticalPadding\": verticalPadding,\n                        [classesDropDown.verticalPadding]: verticalPadding,\n                    },\n                    { [classes.offsetPadding]: props.offsetPadding },\n                )}\n                buttonContents={\n                    <>\n                        <SelectBoxButton\n                            activeItem={selectedOption}\n                            labelWrap={props.labelWrap}\n                            overwriteButtonContents={overwriteButtonContents}\n                        />\n                        {afterButton}\n                    </>\n                }\n                buttonClassName={classNames(props.buttonClassName, classes.toggle)}\n                contentsClassName={classNames({ isParentWidth: props.widthOfParent })}\n                buttonBaseClass={props.buttonBaseClass}\n                openAsModal={props.openAsModal}\n                flyoutType={FlyoutType.LIST}\n                renderLeft={renderLeft}\n                horizontalOffset={horizontalOffset}\n            >\n                {props.options.map((option, i) => {\n                    const isSelected = selectedOption && option.value === selectedOption.value;\n                    return <SelectBoxItem key={i} item={option} isSelected={!!isSelected} onClick={onChange} />;\n                })}\n            </DropDown>\n        </div>\n    );\n}\n\nSelectBox.defaultProps = {\n    selectedIndex: 0,\n    buttonBaseClass: ButtonTypes.TEXT,\n};\n\nfunction SelectBoxButton(props: {\n    activeItem: ISelectBoxItem | null;\n    labelWrap?: string;\n    overwriteButtonContents?: React.ReactNode;\n}) {\n    const { activeItem, overwriteButtonContents } = props;\n    const classes = selectBoxClasses();\n\n    return activeItem && (activeItem.name || activeItem.content) ? (\n        <React.Fragment>\n            <ConditionalWrap tag={\"span\"} condition={!!props.labelWrap} className={props.labelWrap}>\n                {overwriteButtonContents ?? (activeItem.content || activeItem.name)}\n            </ConditionalWrap>\n            {NBSP}\n            <DownTriangleIcon className={classNames(\"selectBox-buttonIcon\", classes.buttonIcon)} />\n        </React.Fragment>\n    ) : null;\n}\n\nfunction SelectBoxItem(props: { item: ISelectBoxItem; isSelected: boolean; onClick: (item: ISelectBoxItem) => void }) {\n    const { item, isSelected, onClick } = props;\n    if (\"url\" in item) {\n        return (\n            <DropDownItemLink className={classNames({ isSelected: isSelected })} name={item.name} to={item.url || \"\"}>\n                <SelectBoxContents item={item} isSelected={isSelected} />\n            </DropDownItemLink>\n        );\n    } else {\n        const classes = selectBoxClasses();\n        const classesDropDown = dropDownClasses();\n        return (\n            <DropDownItemButton\n                className={classNames({ isSelected: isSelected })}\n                onClick={() => onClick(item)}\n                aria-current={isSelected}\n                buttonClassName={classNames(classesDropDown.action, classes.buttonItem)}\n            >\n                <SelectBoxContents item={item} isSelected={isSelected} />\n            </DropDownItemButton>\n        );\n    }\n}\n\nfunction SelectBoxContents(props: { item: ISelectBoxItem; isSelected: boolean }) {\n    const { item, isSelected } = props;\n    const classes = selectBoxClasses();\n\n    return (\n        <>\n            <span className={classNames(\"selectBox-itemLabel\", classes.itemLabel)}>{item.content || item.name}</span>\n            <span className={classNames(\"sc-only\", classes.checkContainer)}>\n                {isSelected && <CheckCompactIcon className={\"selectBox-isSelectedIcon\"} />}\n                {!isSelected && (\n                    <span className={classNames(\"selectBox-spacer\", classes.spacer)} aria-hidden={true}>\n                        {` `}\n                    </span>\n                )}\n                {item.icon}\n            </span>\n        </>\n    );\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport Button from \"@library/forms/Button\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { LeftChevronCompactIcon } from \"@library/icons/common\";\nimport { useBackRouting } from \"@library/routing/links/BackRoutingProvider\";\nimport backLinkClasses from \"@library/routing/links/backLinkStyles\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport { t } from \"@library/utility/appUtils\";\nimport classNames from \"classnames\";\nimport React from \"react\";\nimport { useHistory } from \"react-router\";\n\ninterface IProps {\n    ///\n    /// Routing options.\n    ///\n\n    /** The URL to navigate to if we can't do a dynamic browser back navigation. */\n    fallbackUrl?: string;\n\n    /** An action to if the component is clicked */\n    onClick?: (e: React.MouseEvent) => void;\n\n    ///\n    /// Display options\n    ///\n    /** Title contents for the backlink */\n    title?: React.ReactNode;\n\n    /** CSS class to apply to the container */\n    className?: string;\n\n    /** CSS class to apply to the contents. */\n    linkClassName?: string;\n\n    /** Whether or not to display the label visibly. */\n    visibleLabel?: boolean;\n\n    /** Optional extra class for chevron **/\n    chevronClass?: string;\n\n    /** Check history and hide if there's no where to go **/\n    hideIfNoHistory?: boolean;\n}\n\n/**\n * A link button for navigating backwards. Uses a back arrow icon.\n *\n * Render priority:\n * - Render a button w/ the provided click handler.\n * - Render a button that navigates back using (dynamic routing, uses real browser history back & preserves scroll).\n * - Render the a link to one of the following if we can't navigate back.\n *   - The `fallbackUrl` prop.\n *   - The site homepage.\n */\nexport default function BackLink(props: IProps) {\n    const history = useHistory();\n    const { canGoBack, backFallbackUrl, navigateBack } = useBackRouting();\n\n    const classes = backLinkClasses();\n    const className = classNames(classes.link, { hasVisibleLabel: !!props.visibleLabel }, props.linkClassName);\n    const title = props.title || t(\"Back\");\n\n    if (!canGoBack && props.hideIfNoHistory && !props.fallbackUrl) {\n        return null;\n    }\n\n    let content = (\n        <>\n            <LeftChevronCompactIcon className={classNames(classes.icon, props.chevronClass)} />\n            {props.visibleLabel && <span className={classes.label}>{title}</span>}\n        </>\n    );\n\n    if (props.onClick) {\n        content = (\n            <Button\n                baseClass={ButtonTypes.RESET}\n                className={className}\n                aria-label={title as string}\n                title={title as string}\n                onClick={props.onClick}\n            >\n                {content}\n            </Button>\n        );\n    } else if (canGoBack) {\n        // We can go back.\n        content = (\n            <Button\n                baseClass={ButtonTypes.RESET}\n                className={className}\n                aria-label={title as string}\n                title={title as string}\n                onClick={(event: React.MouseEvent) => {\n                    event.preventDefault();\n                    event.stopPropagation();\n                    history.goBack();\n                }}\n            >\n                {content}\n            </Button>\n        );\n    } else {\n        content = (\n            <SmartLink\n                to={props.fallbackUrl ?? backFallbackUrl} // Only here for showing the URL on hover.\n                className={className}\n                aria-label={title as string}\n                title={title as string}\n                onClick={(event: React.MouseEvent) => {\n                    // We don't use a real link navigation.\n                    event.preventDefault();\n                    event.stopPropagation();\n                    navigateBack(props.fallbackUrl);\n                }}\n            >\n                {content}\n            </SmartLink>\n        );\n    }\n\n    return <div className={classNames(\"backLink\", classes.root, props.className)}>{content}</div>;\n}\n\nBackLink.defaultProps = {\n    visibleLabel: false,\n};\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { negative } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\n\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { calc, important, percent } from \"csx\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\n\nexport const hamburgerVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"hamburger\");\n\n    const sizing = makeThemeVars(\"sizing\", {});\n\n    return {\n        sizing,\n    };\n});\n\nexport const hamburgerClasses = useThemeCache(() => {\n    const vars = hamburgerVariables();\n    const globalVars = globalVariables();\n    const style = styleFactory(\"hamburger\");\n\n    const root = style({});\n    const formElVars = formElementsVariables();\n    const content = style({\n        ...{\n            \".Navigation-row\": {\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n            },\n            \".NewDiscussion\": {\n                width: percent(100),\n            },\n            \".BoxButtons\": {\n                width: percent(100),\n            },\n            \".ButtonGroup.Multi\": {\n                maxWidth: percent(100),\n            },\n            \".Dropdown.MenuItems\": {\n                ...{\n                    \"&&\": {\n                        top: percent(100),\n                    },\n                },\n            },\n\n            \".ButtonGroup.NewDiscussion.Multi\": {\n                display: \"flex\",\n                flexWrap: \"wrap\",\n                ...{\n                    \".Button.Primary\": {\n                        position: \"relative\",\n                    },\n                    \".Button.Handle\": {\n                        position: \"relative\",\n                        width: styleUnit(formElVars.sizing.height),\n                        height: styleUnit(formElVars.sizing.height),\n                        marginLeft: styleUnit(negative(formElVars.sizing.height)),\n                        borderTopLeftRadius: important(0),\n                        borderBottomLeftRadius: important(0),\n                    },\n                    \".Dropdown.MenuItems\": {\n                        position: \"relative\",\n                        maxWidth: percent(100),\n                        marginTop: styleUnit(negative(formElVars.border.width)),\n                    },\n                    \".mobileFlyoutOverlay\": {\n                        position: \"relative\",\n                        height: \"auto\",\n                        background: \"none\",\n                    },\n                },\n            },\n        },\n    });\n\n    const closeButton = style(\"closeButton\", {\n        position: \"absolute\",\n        top: styleUnit(globalVars.gutter.half),\n        right: styleUnit(globalVars.gutter.half),\n        zIndex: 10,\n    });\n\n    const spacer = (count: number) => {\n        const formElVars = formElementsVariables();\n        return style(\"spacer\", {\n            height: styleUnit(1),\n            width: count ? styleUnit(count * formElVars.sizing.height) : styleUnit(formElVars.sizing.height * 2),\n        });\n    };\n\n    const container = style(\"container\", {\n        paddingBottom: globalVars.gutter.half,\n    });\n\n    return {\n        root,\n        content,\n        spacer,\n        container,\n        closeButton,\n    };\n});\n","/*\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { getMeta, t, assetUrl, formatUrl } from \"@library/utility/appUtils\";\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { getCurrentLocale } from \"@vanilla/i18n\";\nimport { ITitleBarNav } from \"./mebox/pieces/TitleBarNavItem\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\nimport { getThemeVariables } from \"@library/theming/getThemeVariables\";\nimport { uuidv4 } from \"@vanilla/utils\";\n\nexport interface INavigationVariableItem {\n    id: string;\n    name: string;\n    url: string;\n    children?: INavigationVariableItem[];\n    permission?: string;\n    isCustom?: boolean;\n    isHidden?: boolean;\n}\n\ntype INavItemGenerator = () => INavigationVariableItem;\n\nconst navItemGenerators: INavItemGenerator[] = [];\n\nexport function registerDefaultNavItem(navItemGetter: INavItemGenerator) {\n    navItemGenerators.push(navItemGetter);\n}\n\nexport const navigationVariables = useThemeCache((forcedVars?: IThemeVariables) => {\n    const makeVars = variableFactory(\"navigation\", forcedVars);\n\n    const navigationItems: INavigationVariableItem[] = makeVars(\"navigationItems\", getDefaultNavItems());\n\n    const mobileOnlyNavigationItems: INavigationVariableItem[] = makeVars(\"mobileOnlyNavigationItems\", []);\n\n    const logo = makeVars(\"logo\", {\n        url: \"/\",\n    });\n\n    return { navigationItems, mobileOnlyNavigationItems, logo };\n});\n\nfunction getDefaultNavItems() {\n    // Existing custom nav links.\n    const navVars = getThemeVariables()?.navigation;\n    const legacyCustomNavItems: ITitleBarNav[] | null =\n        navVars?.navItems?.[getCurrentLocale()] ?? navVars?.navItems?.default ?? null;\n\n    return legacyCustomNavItems ? legacyCustomNavItems.map(mapLegacyNavItem) : getBuiltinNavItems();\n}\n\nfunction mapLegacyNavItem(item: ITitleBarNav): INavigationVariableItem {\n    return {\n        name: item.children as string,\n        url: item.to,\n        permission: item.permission,\n        id: uuidv4(),\n        children: [],\n    };\n}\n\nfunction getBuiltinNavItems() {\n    const forumEnabled = getMeta(\"siteSection.apps.forum\", true);\n\n    let builtins: INavigationVariableItem[] = [];\n    if (forumEnabled) {\n        builtins.push({\n            id: \"builtin-discussions\",\n            url: \"/discussions\",\n            name: t(\"Discussions\"),\n            children: [],\n        });\n        builtins.push({\n            id: \"builtin-categories\",\n            url: \"/categories\",\n            name: t(\"Categories\"),\n            children: [],\n        });\n    }\n\n    navItemGenerators.forEach((generator) => {\n        builtins.push(generator());\n    });\n    return builtins;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useRef, useEffect } from \"react\";\nimport { INavigationTreeItem } from \"@vanilla/library/src/scripts/@types/api/core\";\nimport { dropDownClasses } from \"@library/flyouts/dropDownStyles\";\nimport Button from \"@library/forms/Button\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { LeftChevronIcon, RightChevronIcon, CloseTinyIcon } from \"@library/icons/common\";\nimport classNames from \"classnames\";\nimport DropDownItemButton from \"@library/flyouts/items/DropDownItemButton\";\nimport DropDownItemLink from \"@library/flyouts/items/DropDownItemLink\";\nimport Heading from \"@library/layout/Heading\";\nimport { IActiveRecord } from \"@library/navigation/SiteNavNode\";\nimport ScreenReaderContent from \"@library/layout/ScreenReaderContent\";\nimport { t } from \"@vanilla/i18n\";\n\nexport interface IPanelNavItemsProps {\n    navItems: INavigationTreeItem[];\n    activeRecord: IActiveRecord;\n    pushParentItem: (item: INavigationTreeItem) => void;\n    popParentItem: () => void;\n    isNestable: boolean;\n    nestedTitle?: string;\n    canGoBack?: boolean;\n    extraSections?: React.ReactNode;\n    isActive?: boolean;\n    onClose?: () => void;\n}\n\nexport function PanelNavItems(props: IPanelNavItemsProps) {\n    const { isActive } = props;\n    const buttonRef = useRef<HTMLButtonElement | null>(null);\n    const prevFocusedRef = useRef<HTMLElement | null>(null);\n\n    useEffect(() => {\n        if (isActive) {\n            prevFocusedRef.current = document.activeElement as HTMLElement;\n            setTimeout(() => {\n                buttonRef.current?.focus();\n            }, 200);\n\n            return () => {\n                prevFocusedRef.current?.focus();\n            };\n        }\n    }, [isActive]);\n\n    const classes = dropDownClasses();\n    return (\n        <>\n            {props.nestedTitle && (\n                <>\n                    <Heading\n                        title={props.nestedTitle}\n                        className={classNames(\"dropDown-sectionHeading\", classes.sectionHeading)}\n                    >\n                        <div className={classes.headingContentContainer}>\n                            {props.canGoBack && (\n                                <Button\n                                    buttonRef={buttonRef}\n                                    baseClass={ButtonTypes.ICON_COMPACT}\n                                    onClick={props.popParentItem}\n                                    className={classes.backButton}\n                                >\n                                    <LeftChevronIcon className={classes.arrow} />\n                                </Button>\n                            )}\n                            <div className={classes.headingTitleContainer}> {props.nestedTitle} </div>\n                            <Button\n                                className={classes.closeButton}\n                                onClick={props.onClose}\n                                baseClass={ButtonTypes.ICON_COMPACT}\n                            >\n                                <ScreenReaderContent>{t(\"Close\")}</ScreenReaderContent>\n                                <CloseTinyIcon />\n                            </Button>\n                        </div>\n                    </Heading>\n                </>\n            )}\n            <div className={classes.panelNavItems}>\n                <div className={classNames(classes.panelContent, { isNested: props.canGoBack })}>\n                    <ul className={classes.sectionContents}>\n                        {props.navItems.map((navItem, i) => {\n                            const showChildren = props.isNestable && navItem.children.length > 0;\n                            const isActive =\n                                navItem.recordType === props.activeRecord.recordType &&\n                                navItem.recordID === props.activeRecord.recordID;\n\n                            if (showChildren) {\n                                return (\n                                    <DropDownItemButton\n                                        isActive={isActive}\n                                        key={i}\n                                        onClick={() => {\n                                            props.pushParentItem(navItem);\n                                        }}\n                                        className={classes.itemButton}\n                                    >\n                                        <span className={classes.text}>{navItem.name}</span>\n                                        <RightChevronIcon className={classes.arrow} />\n                                    </DropDownItemButton>\n                                );\n                            } else {\n                                return navItem.isLink ? (\n                                    <DropDownItemLink\n                                        className={classes.itemButton}\n                                        isActive={isActive}\n                                        key={i}\n                                        to={navItem.url}\n                                    >\n                                        <span className={classes.text}>{navItem.name}</span>\n                                        <RightChevronIcon className={classes.arrow} />\n                                    </DropDownItemLink>\n                                ) : (\n                                    <DropDownItemLink\n                                        className={classes.itemButton}\n                                        isActive={isActive}\n                                        key={i}\n                                        to={navItem.url}\n                                    >\n                                        {navItem.name}\n                                    </DropDownItemLink>\n                                );\n                            }\n                        })}\n                    </ul>\n                    {props.extraSections}\n                </div>\n            </div>\n        </>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { EntranceAnimation, FromDirection } from \"@library/animation/EntranceAnimation\";\nimport { dropDownClasses } from \"@library/flyouts/dropDownStyles\";\nimport DropDownItemSeparator from \"@library/flyouts/items/DropDownItemSeparator\";\nimport { PanelNavItems } from \"@library/flyouts/panelNav/PanelNavItems\";\nimport Heading from \"@library/layout/Heading\";\nimport { INavigationTreeItem } from \"@vanilla/library/src/scripts/@types/api/core\";\nimport classNames from \"classnames\";\nimport React, { useRef, useState } from \"react\";\nimport { IActiveRecord } from \"@library/navigation/SiteNavNode\";\nimport Button from \"@library/forms/Button\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport ScreenReaderContent from \"@library/layout/ScreenReaderContent\";\nimport { CloseTinyIcon } from \"@library/icons/common\";\nimport { t } from \"@vanilla/i18n\";\n\ninterface IProps {\n    title: string;\n    navItems: INavigationTreeItem[];\n    activeRecord: IActiveRecord;\n    afterNavSections?: React.ReactNode;\n    isNestable: boolean;\n    onClose?: () => void;\n}\n\nexport function DropDownPanelNav(props: IProps) {\n    const [parentNavItems, setParentNavItems] = useState<Array<INavigationTreeItem | null>>([]);\n\n    const classes = dropDownClasses();\n\n    const popParentItem = () => {\n        parentNavItems.pop();\n        setParentNavItems(Array.from(parentNavItems));\n    };\n\n    const pushParentItem = (item: INavigationTreeItem) => {\n        parentNavItems.push(item);\n        setParentNavItems(Array.from(parentNavItems));\n    };\n\n    return (\n        <>\n            <Heading\n                title={props.title}\n                className={classNames(\"dropDown-sectionHeading\", classes.sectionHeading)}\n                aria-hidden={parentNavItems.length > 0}\n            >\n                <div className={classes.headingContentContainer}>\n                    <div className={classes.headingTitleContainer}> {props.title} </div>\n                    <Button\n                        className={classes.closeButton}\n                        onClick={props.onClose}\n                        baseClass={ButtonTypes.ICON_COMPACT}\n                    >\n                        <ScreenReaderContent>{t(\"Close\")}</ScreenReaderContent>\n                        <CloseTinyIcon />\n                    </Button>\n                </div>\n            </Heading>\n            <div className={classNames(classes.panel, classes.panelFirst)} aria-hidden={parentNavItems.length > 0}>\n                <PanelNavItems\n                    activeRecord={props.activeRecord}\n                    isActive={false}\n                    navItems={props.navItems}\n                    isNestable={props.isNestable}\n                    popParentItem={popParentItem}\n                    pushParentItem={pushParentItem}\n                    canGoBack={false}\n                    onClose={props.onClose}\n                    // The first page gets the extra sections.\n                    extraSections={props.afterNavSections}\n                />\n            </div>\n            <EntranceAnimation\n                isEntered={true}\n                fromDirection={FromDirection.RIGHT}\n                className={classes.panel}\n                aria-hidden={true}\n                lastItemProps={{ className: classes.panelLast, \"aria-hidden\": \"false\" }}\n            >\n                {parentNavItems.map((parent, i) => {\n                    const currentItems = parent ? parent.children : props.navItems;\n                    let key = \"root\";\n                    if (parent) {\n                        key = parent.recordType + parent.recordID;\n                    }\n\n                    return (\n                        <PanelNavItems\n                            activeRecord={props.activeRecord}\n                            isActive={i === parentNavItems.length - 1}\n                            key={key}\n                            navItems={currentItems}\n                            isNestable={props.isNestable}\n                            popParentItem={popParentItem}\n                            pushParentItem={pushParentItem}\n                            canGoBack={parent !== null}\n                            onClose={props.onClose}\n                            nestedTitle={parent?.name}\n                        />\n                    );\n                })}\n            </EntranceAnimation>\n        </>\n    );\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport * as React from \"react\";\nimport classNames from \"classnames\";\nimport { dropDownClasses } from \"@library/flyouts/dropDownStyles\";\n\ninterface IProps {\n    className?: string;\n}\n\n/**\n * Implements line separator type of item for DropDownMenu\n */\nexport default class DropDownItemSeparator extends React.Component<IProps> {\n    public render() {\n        const classes = dropDownClasses();\n        return <li role=\"separator\" className={classNames(this.props.className, classes.separator)} />;\n    }\n}\n","/*\n * @author Mihran Abrahamian <mihran.abrahamian@vanillaforums.com>\n * @copyright 2009-2021 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useMemo } from \"react\";\nimport { varItemToNavTreeItem, getActiveRecord } from \"@library/flyouts/Hamburger\";\nimport { navigationVariables } from \"@library/headers/navigationVariables\";\nimport DropDownItemSeparator from \"@library/flyouts/items/DropDownItemSeparator\";\nimport { PanelNavItems } from \"@library/flyouts/panelNav/PanelNavItems\";\nimport { INavigationTreeItem } from \"@library/@types/api/core\";\nimport { notEmpty } from \"@vanilla/utils\";\nimport { dropDownClasses } from \"@library/flyouts/dropDownStyles\";\nimport { cx } from \"@library/styles/styleShim\";\n\nexport default function MobileOnlyNavigation(props: {}) {\n    const classes = dropDownClasses();\n\n    const { mobileOnlyNavigationItems } = navigationVariables();\n\n    const [treeItems, activeRecord] = useMemo(() => {\n        const treeItems = mobileOnlyNavigationItems.map((item) => varItemToNavTreeItem(item)).filter(notEmpty);\n        const activeRecord = getActiveRecord(treeItems);\n        return [treeItems, activeRecord];\n    }, [mobileOnlyNavigationItems]);\n\n    return (\n        <>\n            {treeItems.length > 0 && (\n                <>\n                    <DropDownItemSeparator />\n                    <div className={cx(classes.panelMobileOnly)}>\n                        <PanelNavItems\n                            navItems={treeItems}\n                            activeRecord={activeRecord}\n                            popParentItem={() => {}}\n                            pushParentItem={(item: INavigationTreeItem) => {}}\n                            isNestable={false}\n                        />\n                    </div>\n                </>\n            )}\n        </>\n    );\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { hasPermission } from \"@library/features/users/Permission\";\nimport { hamburgerClasses } from \"@library/flyouts/hamburgerStyles\";\nimport Button from \"@library/forms/Button\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { INavigationVariableItem, navigationVariables } from \"@library/headers/navigationVariables\";\nimport { CloseTinyIcon, HamburgerIcon } from \"@library/icons/common\";\nimport Modal from \"@library/modal/Modal\";\nimport ModalSizes from \"@library/modal/ModalSizes\";\nimport { t } from \"@library/utility/appUtils\";\nimport classNames from \"classnames\";\nimport React, { useMemo, useState } from \"react\";\nimport ScreenReaderContent from \"@library/layout/ScreenReaderContent\";\nimport { INavigationTreeItem } from \"@vanilla/library/src/scripts/@types/api/core\";\nimport { notEmpty } from \"@vanilla/utils\";\nimport { DropDownPanelNav } from \"@library/flyouts/panelNav/DropDownPanelNav\";\nimport { IPanelNavItemsProps } from \"@library/flyouts/panelNav/PanelNavItems\";\nimport MobileOnlyNavigation from \"@library/headers/MobileOnlyNavigation\";\n\ninterface IProps {\n    className?: string;\n    extraNavTop?: React.ReactNode;\n    extraNavBottom?: React.ReactNode;\n    showCloseIcon?: boolean;\n}\n\nconst extraNavGroups: React.ComponentType[] = [];\n\nexport function addHamburgerNavGroup(node: React.ComponentType) {\n    extraNavGroups.push(node);\n}\n\n/**\n * Creates a hamburger menu.\n */\nexport default function Hamburger(props: IProps) {\n    const [isOpen, setIsOpen] = useState(false);\n    const classes = hamburgerClasses();\n\n    const closeDrawer = () => {\n        setIsOpen(false);\n    };\n\n    const toggleDrawer = () => {\n        setIsOpen(!isOpen);\n    };\n\n    const { showCloseIcon = true } = props;\n\n    return (\n        <>\n            <Button\n                baseClass={ButtonTypes.ICON}\n                className={classNames(classes.root, props.className)}\n                onClick={toggleDrawer}\n            >\n                <>\n                    <HamburgerIcon />\n                    <ScreenReaderContent>{t(\"Menu\")}</ScreenReaderContent>\n                </>\n            </Button>\n            <Modal scrollable isVisible={isOpen} size={ModalSizes.MODAL_AS_SIDE_PANEL_LEFT} exitHandler={closeDrawer}>\n                {showCloseIcon && (\n                    <Button\n                        className={classes.closeButton}\n                        baseClass={ButtonTypes.ICON_COMPACT}\n                        onClick={() => {\n                            setIsOpen(false);\n                        }}\n                    >\n                        <ScreenReaderContent>{t(\"Close\")}</ScreenReaderContent>\n                        <CloseTinyIcon />\n                    </Button>\n                )}\n                <div className={classes.container}>\n                    <SiteNavigation onClose={() => setIsOpen(false)} />\n                    <MobileOnlyNavigation />\n                    {props.extraNavTop}\n                    {props.extraNavBottom}\n                    {extraNavGroups.map((GroupComponent, i) => (\n                        <GroupComponent key={i} />\n                    ))}\n                </div>\n            </Modal>\n        </>\n    );\n}\n\ninterface ISiteNavigationProps {\n    onClose: () => void;\n}\n\nexport function varItemToNavTreeItem(\n    variableItem: INavigationVariableItem,\n    parentID: string = \"root\",\n): INavigationTreeItem | null {\n    const { permission, name, url, id, children, isHidden } = variableItem;\n\n    if (permission && !hasPermission(permission)) {\n        return null;\n    }\n\n    if (isHidden) {\n        return null;\n    }\n\n    return {\n        name,\n        url,\n        recordID: id,\n        recordType: \"customLink\",\n        parentID: parentID,\n        children: children?.map((child) => varItemToNavTreeItem(child, id)).filter(notEmpty) ?? [],\n        sort: 0,\n    };\n}\n\nexport function getActiveRecord(navTreeItems: INavigationTreeItem[]): IPanelNavItemsProps[\"activeRecord\"] {\n    let currentItemID: string | null = null;\n\n    for (const item of navTreeItems) {\n        if (window.location.href.includes(item.url.replace(\"~\", \"\"))) {\n            currentItemID = `${item.recordID}`;\n        }\n    }\n    return {\n        recordID: currentItemID ?? \"notspecified\",\n        recordType: \"customLink\",\n    };\n}\n\nfunction SiteNavigation(props: ISiteNavigationProps) {\n    const { navigationItems } = navigationVariables();\n\n    const [treeItems, activeRecord] = useMemo(() => {\n        const treeItems = navigationItems.map((item) => varItemToNavTreeItem(item)).filter(notEmpty);\n        const activeRecord = getActiveRecord(treeItems);\n        return [treeItems, activeRecord];\n    }, [navigationItems]);\n\n    return (\n        <DropDownPanelNav\n            onClose={props.onClose}\n            navItems={treeItems}\n            title={t(\"Site Navigation\")}\n            isNestable\n            activeRecord={activeRecord}\n        />\n    );\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { debugHelper, flexHelper } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { titleBarVariables } from \"@library/headers/TitleBar.variables\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\n\nexport const meBoxClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const formVars = formElementsVariables();\n    const titleBarVars = titleBarVariables();\n    const debug = debugHelper(\"meBox\");\n    const mediaQueries = layoutVariables().mediaQueries();\n    const flex = flexHelper();\n    const style = styleFactory(\"meBox\");\n\n    const root = style(\n        {\n            ...debug.name(),\n            display: \"flex\",\n            alignItems: \"center\",\n            height: styleUnit(titleBarVars.sizing.height),\n        },\n        mediaQueries.oneColumnDown({\n            height: styleUnit(titleBarVars.sizing.mobile.height),\n        }),\n    );\n\n    const buttonContent = style(\"buttonContent\", {\n        ...flex.middle(),\n        width: styleUnit(formVars.sizing.height),\n        maxWidth: styleUnit(formVars.sizing.height),\n        flexBasis: styleUnit(formVars.sizing.height),\n        height: styleUnit(titleBarVars.meBox.sizing.buttonContents),\n        borderRadius: styleUnit(globalVars.border.radius),\n    });\n\n    return {\n        root,\n        buttonContent,\n    };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { dropDownClasses } from \"@library/flyouts/dropDownStyles\";\nimport DropDownItemLink, { IDropDownItemLink } from \"@library/flyouts/items/DropDownItemLink\";\nimport NumberFormatted from \"@library/content/NumberFormatted\";\nimport classNames from \"classnames\";\n\ninterface IProps extends IDropDownItemLink {\n    count?: number;\n    hideCountWhenZero?: boolean;\n    className?: string;\n    countsClass?: string;\n}\n\n/**\n * Implements link type of item with count for DropDown menu\n */\nexport default class DropDownItemLinkWithCount extends React.Component<IProps> {\n    public static defaultProps = {\n        hideCountWhenZero: true,\n    };\n    public render() {\n        const { name, children, count } = this.props;\n        const linkContents = children ? children : name;\n        const showCount = !!count && !(this.props.hideCountWhenZero && this.props.count === 0);\n        const classesDropDown = dropDownClasses();\n        return (\n            <DropDownItemLink {...this.props}>\n                <span className={classNames(\"dropDownItem-text\", classesDropDown.text)}>{linkContents}</span>\n                {showCount && (\n                    <NumberFormatted\n                        className={classNames(\"dropDownItem-count\", classesDropDown.count, this.props.countsClass)}\n                        value={count!}\n                    />\n                )}\n            </DropDownItemLink>\n        );\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport Heading from \"@library/layout/Heading\";\nimport DropDownItemSeparator from \"@library/flyouts/items/DropDownItemSeparator\";\nimport { dropDownClasses } from \"@library/flyouts/dropDownStyles\";\nimport classNames from \"classnames\";\nimport { uniqueIDFromPrefix, useUniqueID } from \"@library/utility/idUtils\";\n\ninterface IProps {\n    title: string;\n    className?: string;\n    level?: 2 | 3;\n    children: React.ReactNode;\n    noSeparator?: boolean;\n}\n\n/**\n * Implements DropDownSection component. It add a heading to a group of elements in a DropDown menu\n */\nexport default class DropDownSection extends React.Component<IProps> {\n    public render() {\n        const classes = dropDownClasses();\n        const sectionNavTitle = uniqueIDFromPrefix(\"sectionNavTitle\");\n        return (\n            <>\n                {!this.props.noSeparator && <DropDownItemSeparator />}\n                <li className={classNames(\"dropDown-section\", classes.section, this.props.className)}>\n                    <nav aria-describedby={sectionNavTitle}>\n                        <Heading\n                            id={sectionNavTitle}\n                            title={this.props.title}\n                            className={classNames(\"dropDown-sectionHeading\", classes.sectionHeading)}\n                        />\n                        <ul className={classNames(\"dropDown-sectionContents\", classes.sectionContents)}>\n                            {this.props.children}\n                        </ul>\n                    </nav>\n                </li>\n            </>\n        );\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { debugHelper } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { componentThemeVariables, styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\n\nexport const userDropDownVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const themeVars = componentThemeVariables(\"userDropDown\");\n\n    const item = {\n        topPadding: 6,\n        rightPadding: 18,\n        bottomPadding: 6,\n        leftPadding: 18,\n        ...themeVars.subComponentStyles(\"item\"),\n    };\n\n    const userCard = {\n        topMargin: 24,\n        bottomMargin: 24,\n        ...themeVars.subComponentStyles(\"userCard\"),\n    };\n\n    const userName = {\n        topMargin: 9,\n        bottomMargin: 24,\n        paddingRight: item.rightPadding,\n        paddingLeft: item.leftPadding,\n        fontWeight: globalVars.fonts.weights.semiBold,\n        fontSize: globalVars.fonts.size.large,\n        lineHeight: globalVars.lineHeights.condensed,\n        ...themeVars.subComponentStyles(\"userName\"),\n    };\n\n    const contents = {\n        width: 300,\n        ...themeVars.subComponentStyles(\"contents\"),\n    };\n\n    return { userCard, userName, contents, item };\n});\n\nexport const userDropDownClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = userDropDownVariables();\n    const style = styleFactory(\"userDropDown\");\n\n    const userCard = style(\"userCard\", {\n        listStyle: \"none\",\n    });\n\n    const userCardPhotoLink = style(\"userCardPhotoLink\", {\n        display: \"block\",\n    });\n\n    const userCardPhoto = style(\"userCardPhoto\", {\n        border: `solid 1px ${globalVars.mixBgAndFg(0.3)}`,\n        marginTop: styleUnit(vars.userCard.topMargin),\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n    });\n\n    const userCardName = style(\"userCardName\", {\n        display: \"block\",\n        color: \"inherit\",\n        fontWeight: vars.userName.fontWeight,\n        fontSize: styleUnit(vars.userName.fontSize),\n        lineHeight: vars.userName.lineHeight,\n        textAlign: \"center\",\n        marginTop: styleUnit(vars.userName.topMargin),\n        marginRight: \"auto\",\n        marginBottom: styleUnit(vars.userName.bottomMargin),\n        marginLeft: \"auto\",\n        paddingRight: styleUnit(vars.userName.paddingRight),\n        paddingLeft: styleUnit(vars.userName.paddingLeft),\n    });\n\n    const contents = style(\"contents\", {\n        width: styleUnit(vars.contents.width),\n    });\n\n    return {\n        userCardPhotoLink,\n        userCardPhoto,\n        userCardName,\n        contents,\n        userCard,\n    };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { UserPhoto, UserPhotoSize } from \"@library/headers/mebox/pieces/UserPhoto\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport { mapUsersStoreState } from \"@library/features/users/userModel\";\nimport { IInjectableUserState } from \"@library/features/users/userTypes\";\nimport { userDropDownClasses } from \"@library/headers/mebox/pieces/userDropDownStyles\";\nimport { connect } from \"react-redux\";\nimport classNames from \"classnames\";\nimport { makeProfileUrl } from \"@library/utility/appUtils\";\n\nexport interface IProps extends IInjectableUserState {\n    className?: string;\n    photoSize?: UserPhotoSize;\n}\n\n/**\n * Implements DropDownUserCard component for DropDown menus.\n */\nexport class DropDownUserCard extends React.Component<IProps> {\n    public render() {\n        const currentUser = this.props.currentUser.data!;\n        const profileLink = makeProfileUrl(currentUser.name);\n        const classesUserDropDown = userDropDownClasses();\n        return (\n            <li className={classNames(classesUserDropDown.userCard, \"dropDown-userCard\", this.props.className)}>\n                <SmartLink\n                    to={profileLink}\n                    className={classNames(\"userDropDown-userCardPhotoLink\", classesUserDropDown.userCardPhotoLink)}\n                >\n                    <UserPhoto\n                        className={classNames(\"userDropDown-userCardPhoto\", classesUserDropDown.userCardPhoto)}\n                        userInfo={currentUser}\n                        size={this.props.photoSize || UserPhotoSize.LARGE}\n                    />\n                </SmartLink>\n                <SmartLink\n                    to={profileLink}\n                    className={classNames(\"userDropDown-userCardName\", classesUserDropDown.userCardName)}\n                >\n                    {currentUser.name}\n                </SmartLink>\n            </li>\n        );\n    }\n}\nconst withRedux = connect(mapUsersStoreState);\nexport default withRedux(DropDownUserCard);\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { t } from \"@library/utility/appUtils\";\nimport DropDownItemLink from \"@library/flyouts/items/DropDownItemLink\";\nimport Permission from \"@library/features/users/Permission\";\nimport DropDownItemSeparator from \"@library/flyouts/items/DropDownItemSeparator\";\n\n/**\n * Add link to edit profile, with extra permission checks to render correct link\n */\nexport function DropDownEditProfileLink() {\n    return (\n        <Permission\n            permission={\"profiles.edit\"}\n            fallback={\n                <>\n                    <DropDownItemSeparator />\n                    <DropDownItemLink to=\"/profile/preferences\" name={t(\"Edit Preferences\")} />\n                </>\n            }\n        >\n            <DropDownItemSeparator />\n            <DropDownItemLink to=\"/profile/edit\" name={t(\"Edit Profile\")} />\n        </Permission>\n    );\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport apiv2 from \"@library/apiv2\";\nimport gdn from \"@library/gdn\";\nimport Permission from \"@library/features/users/Permission\";\nimport UserActions from \"@library/features/users/UserActions\";\nimport { dropDownClasses } from \"@library/flyouts/dropDownStyles\";\nimport DropDownItemLink from \"@library/flyouts/items/DropDownItemLink\";\nimport DropDownItemLinkWithCount from \"@library/flyouts/items/DropDownItemLinkWithCount\";\nimport DropDownItemSeparator from \"@library/flyouts/items/DropDownItemSeparator\";\nimport DropDownSection from \"@library/flyouts/items/DropDownSection\";\nimport DropDownUserCard from \"@library/flyouts/items/DropDownUserCard\";\nimport { ICoreStoreState } from \"@library/redux/reducerRegistry\";\nimport { getSiteSection, t } from \"@library/utility/appUtils\";\nimport classNames from \"classnames\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { DropDownEditProfileLink } from \"@library/flyouts/items/DropDownEditProfileLink\";\n\n/**\n * Implements User Drop down for header\n */\nfunction UserDropDownContents(props: IProps) {\n    const { userInfo } = props;\n    const signOutUrl = gdn.meta.signOutUrl ?? `/entry/signout?target=${window.location.href}`;\n    const siteSection = getSiteSection();\n    if (!userInfo) {\n        return null;\n    }\n\n    const getCountByName = (countName: string): number => {\n        const found = props.counts.find((count) => count.name === countName);\n        return found ? found.count : 0;\n    };\n\n    const classesDropDown = dropDownClasses();\n\n    return (\n        <ul className={classNames(classesDropDown.verticalPadding, props.className)}>\n            <DropDownUserCard className=\"userDropDown-userCard\" />\n            <DropDownEditProfileLink />\n            {UserDropDownContents.extraUserDropDownComponents.map((ComponentName, index) => {\n                return <ComponentName key={index} getCountByName={getCountByName} />;\n            })}\n            {siteSection.apps.forum ? (\n                <DropDownSection title={t(\"Discussions\")}>\n                    <DropDownItemLinkWithCount\n                        to={\"/discussions/bookmarked\"}\n                        name={t(\"Bookmarks\")}\n                        count={getCountByName(\"Bookmarks\")}\n                    />\n                    <Permission permission=\"discussions.add\">\n                        <DropDownItemLinkWithCount to=\"/drafts\" name={t(\"Drafts\")} count={getCountByName(\"Drafts\")} />\n                    </Permission>\n                    <DropDownItemLinkWithCount\n                        to=\"/discussions/mine\"\n                        name={t(\"My Discussions\")}\n                        count={getCountByName(\"Discussions\")}\n                    />\n                </DropDownSection>\n            ) : null}\n            <Permission permission={[\"community.moderate\"]}>\n                <DropDownSection title={t(\"Moderation\")}>\n                    <DropDownItemLinkWithCount\n                        to={\"/dashboard/user/applicants\"}\n                        name={t(\"Applicants\")}\n                        count={getCountByName(\"Applicants\")}\n                    />\n                    <DropDownItemLinkWithCount\n                        to={\"/dashboard/log/spam\"}\n                        name={t(\"Spam Queue\")}\n                        count={getCountByName(\"SpamQueue\")}\n                    />\n                    <DropDownItemLinkWithCount\n                        to={\"/dashboard/log/moderation\"}\n                        name={t(\"Moderation Queue\")}\n                        count={getCountByName(\"ModerationQueue\")}\n                    />\n                </DropDownSection>\n            </Permission>\n            <DropDownItemSeparator />\n            <Permission permission={[\"site.manage\", \"settings.view\"]}>\n                <DropDownItemLink to={\"/dashboard/settings\"} name={t(\"Dashboard\")} />\n            </Permission>\n            <DropDownItemLink to={signOutUrl} name={t(\"Sign Out\")} />\n        </ul>\n    );\n}\n\n/** Hold the extra user dropdown menu components before rendering. */\nUserDropDownContents.extraUserDropDownComponents = [];\n\ninterface IExtraDropDownProps {\n    getCountByName: (name: string) => number;\n}\n\n/**\n * Register an extra component to be rendered before the user dropdown menu.\n * This will only affect larger screen sizes.\n *\n * @param component The component class to be render.\n */\nUserDropDownContents.registerBeforeUserDropDown = (component: React.ComponentType<IExtraDropDownProps>) => {\n    UserDropDownContents.extraUserDropDownComponents.push(component);\n};\n\ninterface IOwnProps {\n    className?: string;\n}\n\ntype IProps = IOwnProps & ReturnType<typeof mapStateToProps> & ReturnType<typeof mapDispatchToProps>;\n\nfunction mapStateToProps(state: ICoreStoreState, ownProps: IOwnProps) {\n    return {\n        userInfo: state.users.current.data ? state.users.current.data : null,\n        counts: state.users.countInformation.counts,\n    };\n}\n\nfunction mapDispatchToProps(dispatch: any) {\n    const userActions = new UserActions(dispatch, apiv2);\n    const { checkCountData } = userActions;\n    return {\n        checkCountData,\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserDropDownContents);\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { absolutePosition } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\n\nexport const countVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const themeVars = variableFactory(\"count\");\n\n    const font = themeVars(\"font\", {\n        size: 10,\n    });\n\n    const sizing = themeVars(\"sizing\", {\n        height: globalVars.fonts.size.large,\n    });\n\n    const notifications = themeVars(\"notifications\", {\n        bg: globalVars.messageColors.deleted.bg,\n    });\n\n    return {\n        font,\n        sizing,\n        notifications,\n    };\n});\n\nexport const countClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = countVariables();\n    const style = styleFactory(\"count\");\n    const fg = ColorsUtils.isLightColor(vars.notifications.bg)\n        ? globalVars.elementaryColors.almostBlack\n        : globalVars.elementaryColors.white;\n\n    const root = style({\n        ...absolutePosition.topRight(4),\n        display: \"block\",\n        backgroundColor: ColorsUtils.colorOut(vars.notifications.bg),\n        height: styleUnit(vars.sizing.height),\n        lineHeight: styleUnit(vars.sizing.height),\n        minWidth: styleUnit(vars.sizing.height),\n        fontSize: styleUnit(vars.font.size),\n        fontWeight: globalVars.fonts.weights.semiBold,\n        borderRadius: styleUnit(vars.sizing.height / 2),\n        whiteSpace: \"nowrap\",\n        padding: `0 3px`,\n    });\n    const text = style(\"text\", {\n        display: \"block\",\n        textAlign: \"center\",\n        color: ColorsUtils.colorOut(fg),\n    });\n\n    return { root, text };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport * as React from \"react\";\nimport classNames from \"classnames\";\nimport { countClasses } from \"@library/content/countStyles\";\n\nexport interface IProps {\n    className?: string;\n    count?: number;\n    label: string; // For accessibility, should be in the style of: \"Notifications: \"\n    max?: number;\n}\n\n/**\n * Implements Count to display over icon\n */\nexport default class Count extends React.Component<IProps> {\n    public render() {\n        const hasCount = !!this.props.count;\n        const max = this.props.max || 99;\n        const visibleCount = hasCount && this.props.count! < max ? this.props.count : `${max}+`;\n        const classes = countClasses();\n\n        return (\n            <div className={classNames(this.props.className, classes.root)}>\n                <span className=\"sr-only\" aria-live=\"polite\">\n                    {hasCount ? this.props.label + ` ${this.props.count}` : \"\"}\n                </span>\n                {hasCount && (\n                    <div className={classes.text} aria-hidden={true}>\n                        {visibleCount}\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { absolutePosition, flexHelper, sticky, negativeUnit } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { calc, percent, viewHeight } from \"csx\";\nimport { buttonResetMixin } from \"@library/forms/buttonMixins\";\nimport { userPhotoVariables } from \"@library/headers/mebox/pieces/userPhotoStyles\";\nimport { titleBarVariables } from \"@library/headers/TitleBar.variables\";\n\nexport const compactMeBoxVariables = useThemeCache(() => {\n    const themeVars = variableFactory(\"compactMeBox\");\n    const globalVars = globalVariables();\n\n    const tab = themeVars(\"tab\", {\n        height: 44,\n        width: 44,\n    });\n\n    const colors = themeVars(\"colors\", {\n        bg: globalVars.mainColors.bg,\n    });\n\n    return { tab, colors };\n});\n\nexport const compactMeBoxClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = compactMeBoxVariables();\n    const style = styleFactory(\"compactMeBox\");\n\n    const root = style({\n        display: \"block\",\n        marginRight: negativeUnit((titleBarVariables().sizing.mobile.width - userPhotoVariables().sizing.small) / 2),\n    });\n\n    const openButton = style(\"openButton\", {\n        color: globalVars.elementaryColors.white.toString(),\n    });\n\n    const contents = style(\"contents\", {\n        position: \"relative\",\n        height: percent(100),\n    });\n\n    const closeModal = style(\"closeModal\", {\n        ...{\n            \"&&\": {\n                ...absolutePosition.topRight(),\n                width: styleUnit(vars.tab.width),\n                height: styleUnit(vars.tab.height),\n            },\n        },\n    });\n\n    const tabList = style(\"tabList\", sticky(), {\n        top: 0,\n        background: ColorsUtils.colorOut(vars.colors.bg),\n        zIndex: 2,\n        paddingRight: styleUnit(vars.tab.width),\n        height: styleUnit(vars.tab.height),\n        flexBasis: styleUnit(vars.tab.width),\n        color: globalVars.mainColors.fg.toString(),\n    });\n\n    const tabButtonContent = style(\"tabButtonContent\", {\n        ...flexHelper().middle(),\n        position: \"relative\",\n        width: styleUnit(vars.tab.width),\n        height: styleUnit(vars.tab.height),\n    });\n\n    const tabPanels = style(\"tabPanels\", {\n        height: calc(`100% - ${vars.tab.height}px`),\n        position: \"relative\",\n    });\n\n    const tabButton = style(\"tabButton\", {\n        ...buttonResetMixin(),\n        ...flexHelper().middle(),\n    });\n\n    const panel = style(\"panel\", {\n        maxHeight: percent(100),\n        borderTop: 0,\n        borderRadius: 0,\n    });\n\n    const body = style(\"body\", {\n        flexGrow: 1,\n    });\n\n    const scrollContainer = style(\"scrollContainer\", {\n        overflow: \"auto\",\n    });\n\n    return {\n        root,\n        openButton,\n        contents,\n        closeModal,\n        tabList,\n        tabPanels,\n        tabButton,\n        tabButtonContent,\n        panel,\n        body,\n        scrollContainer,\n    };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport Count from \"@library/content/Count\";\nimport { compactMeBoxClasses } from \"@library/headers/mebox/pieces/compactMeBoxStyles\";\nimport { meBoxClasses } from \"@library/headers/mebox/pieces/meBoxStyles\";\nimport React from \"react\";\nimport classNames from \"classnames\";\n\n/**\n * UI for a MeBox button.\n */\nexport function MeBoxIcon(props: IProps) {\n    const { count, countLabel, compact, children } = props;\n    const compactClasses = compactMeBoxClasses();\n    const classes = meBoxClasses();\n    return (\n        <div\n            className={classNames(\n                \"meBox-buttonContent\",\n                compact ? compactClasses.tabButtonContent : classes.buttonContent,\n            )}\n        >\n            {children}\n            {count != null && countLabel && count > 0 && <Count label={countLabel} count={count} />}\n        </div>\n    );\n}\n\ninterface IProps {\n    compact: boolean;\n    children: React.ReactNode;\n    count?: number;\n    countLabel?: string;\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport apiv2 from \"@library/apiv2\";\nimport UserActions from \"@library/features/users/UserActions\";\nimport DropDown, { FlyoutType } from \"@library/flyouts/DropDown\";\nimport UserDropDownContents from \"@library/headers/mebox/pieces/UserDropDownContents\";\nimport { userDropDownClasses } from \"@library/headers/mebox/pieces/userDropDownStyles\";\nimport { UserPhoto, UserPhotoSize } from \"@library/headers/mebox/pieces/UserPhoto\";\nimport { titleBarClasses } from \"@library/headers/titleBarStyles\";\nimport { ICoreStoreState } from \"@library/redux/reducerRegistry\";\nimport { t } from \"@library/utility/appUtils\";\nimport { uniqueIDFromPrefix } from \"@library/utility/idUtils\";\nimport classNames from \"classnames\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { MeBoxIcon } from \"@library/headers/mebox/pieces/MeBoxIcon\";\nimport { UserIconTypes } from \"@library/icons/titleBar\";\n\n/**\n * Implements User Drop down for header\n */\nexport function UserDropDown(props: IProps) {\n    const ID = useMemo(() => uniqueIDFromPrefix(\"userDropDown\"), []);\n    const [isOpen, setOpen] = useState(false);\n    const { checkCountData } = props;\n\n    useEffect(() => {\n        if (isOpen) {\n            checkCountData();\n        }\n    }, [isOpen, checkCountData]);\n\n    const { userInfo } = props;\n    if (!userInfo) {\n        return null;\n    }\n\n    const classes = userDropDownClasses();\n    const classesHeader = titleBarClasses();\n\n    return (\n        <DropDown\n            handleID={ID + \"-handle\"}\n            contentID={ID + \"-content\"}\n            name={t(\"My Account\")}\n            buttonClassName={classNames(classesHeader.button)}\n            contentsClassName={classNames(classes.contents, classesHeader.dropDownContents)}\n            renderLeft={true}\n            buttonContents={\n                <MeBoxIcon compact={false}>\n                    <UserPhoto\n                        userInfo={userInfo}\n                        styleType={UserIconTypes.SELECTED_ACTIVE}\n                        className=\"headerDropDown-user meBox-user\"\n                        size={UserPhotoSize.SMALL}\n                    />\n                </MeBoxIcon>\n            }\n            flyoutType={FlyoutType.FRAME}\n            onVisibilityChange={setOpen}\n        >\n            <UserDropDownContents />\n        </DropDown>\n    );\n}\n\ninterface IOwnProps {}\n\ntype IProps = IOwnProps & ReturnType<typeof mapStateToProps> & ReturnType<typeof mapDispatchToProps>;\n\nfunction mapStateToProps(state: ICoreStoreState) {\n    return {\n        userInfo: state.users.current.data ? state.users.current.data : null,\n        counts: state.users.countInformation.counts,\n    };\n}\n\nfunction mapDispatchToProps(dispatch: any) {\n    const userActions = new UserActions(dispatch, apiv2);\n    const { checkCountData } = userActions;\n    return {\n        checkCountData,\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserDropDown);\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { MeBoxIcon } from \"@library/headers/mebox/pieces/MeBoxIcon\";\nimport { MessagesIcon } from \"@library/icons/titleBar\";\nimport { t } from \"@library/utility/appUtils\";\nimport React from \"react\";\nimport { useUsersState } from \"@library/features/users/userModel\";\n\ninterface IProps {\n    open?: boolean;\n    compact: boolean;\n}\n\n/**\n * Implements Messages Drop down for header\n */\nexport default function MessagesCount(props: IProps) {\n    const { open, compact } = props;\n    const currentUser = useUsersState().currentUser;\n    const count = currentUser.data?.countUnreadConversations ? currentUser.data.countUnreadConversations : 0;\n\n    return (\n        <MeBoxIcon count={count} countLabel={t(\"Messages\") + \": \"} compact={compact}>\n            <MessagesIcon filled={!!open} />\n        </MeBoxIcon>\n    );\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport FrameHeader, { IFrameHeaderProps } from \"@library/layout/frame/FrameHeader\";\nimport { ICommonHeadingProps } from \"@library/layout/Heading\";\nimport { frameHeaderClasses } from \"@library/layout/frame/frameHeaderStyles\";\nimport classNames from \"classnames\";\n\ninterface IProps extends ICommonHeadingProps {\n    children: React.ReactNode;\n}\n\n/**\n * Generic header for frame with action\n */\nexport default class FrameHeaderWithAction extends React.PureComponent<IFrameHeaderProps> {\n    public render() {\n        const classes = frameHeaderClasses();\n        return (\n            <FrameHeader\n                {...this.props}\n                className={classNames(this.props.className, \"frameHeaderWithAction\", classes.root)}\n            >\n                <span className={classNames(\"frameHeaderWithAction-action\", classes.action)}>\n                    {this.props.children}\n                </span>\n            </FrameHeader>\n        );\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { absolutePosition, objectFitWithFallback, buttonStates, userSelect } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { calc, percent, quote } from \"csx\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const meBoxMessageVariables = useThemeCache(() => {\n    const makeThemeVars = variableFactory(\"meBoxMessage\");\n\n    const spacing = makeThemeVars(\"spacing\", {\n        padding: {\n            top: 8,\n            right: 12,\n            bottom: 8,\n            left: 12,\n        },\n    });\n\n    const imageContainer = makeThemeVars(\"imageContainer\", {\n        width: 40,\n    });\n\n    const unreadDot = makeThemeVars(\"unreadDot\", {\n        width: 8,\n    });\n\n    return { spacing, imageContainer, unreadDot };\n});\n\nexport const meBoxMessageClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = meBoxMessageVariables();\n    const style = styleFactory(\"meBoxMessage\");\n\n    const root = style({\n        display: \"block\",\n        ...{\n            \"& + &\": {\n                borderTop: `solid 1px ${ColorsUtils.colorOut(globalVars.border.color)}`,\n            },\n        },\n    });\n\n    const link = style(\"link\", {\n        ...userSelect(),\n        display: \"flex\",\n        flexWrap: \"nowrap\",\n        color: \"inherit\",\n        ...Mixins.padding(vars.spacing.padding),\n        ...buttonStates({\n            allStates: {\n                textShadow: \"none\",\n            },\n            hover: {\n                backgroundColor: ColorsUtils.colorOut(globalVars.states.hover.highlight),\n            },\n            focus: {\n                backgroundColor: ColorsUtils.colorOut(globalVars.states.hover.highlight),\n            },\n            active: {\n                backgroundColor: ColorsUtils.colorOut(globalVars.states.active.highlight),\n            },\n        }),\n    });\n\n    const imageContainer = style(\"imageContainer\", {\n        position: \"relative\",\n        width: styleUnit(vars.imageContainer.width),\n        height: styleUnit(vars.imageContainer.width),\n        flexBasis: styleUnit(vars.imageContainer.width),\n        borderRadius: percent(50),\n        overflow: \"hidden\",\n        border: `solid 1px ${globalVars.border.color.toString()}`,\n    });\n\n    const image = style(\"image\", {\n        width: styleUnit(vars.imageContainer.width),\n        height: styleUnit(vars.imageContainer.width),\n        ...objectFitWithFallback(),\n    });\n\n    const status = style(\"status\", {\n        position: \"relative\",\n        width: styleUnit(vars.unreadDot.width),\n        flexBasis: styleUnit(vars.unreadDot.width),\n        ...{\n            \"&.isUnread\": {\n                ...{\n                    \"&:after\": {\n                        ...absolutePosition.middleRightOfParent(),\n                        content: quote(\"\"),\n                        height: styleUnit(vars.unreadDot.width),\n                        width: styleUnit(vars.unreadDot.width),\n                        backgroundColor: globalVars.mainColors.primary.toString(),\n                        borderRadius: percent(50),\n                    },\n                },\n            },\n        },\n    });\n\n    const contents = style(\"contents\", {\n        flexGrow: 1,\n        ...Mixins.padding({\n            left: vars.spacing.padding.left,\n            right: vars.spacing.padding.right,\n        }),\n        maxWidth: calc(`100% - ${styleUnit(vars.unreadDot.width + vars.imageContainer.width)}`),\n    });\n\n    const message = style(\"message\", {\n        lineHeight: globalVars.lineHeights.excerpt,\n        color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n    });\n\n    return { root, link, imageContainer, image, status, contents, message };\n});\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { IUserFragment } from \"@library/@types/api/users\";\nimport { t } from \"@library/utility/appUtils\";\nimport FlexSpacer from \"@library/layout/FlexSpacer\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport { meBoxMessageClasses } from \"@library/headers/mebox/pieces/meBoxMessageStyles\";\nimport { metasClasses } from \"@library/styles/metasStyles\";\nimport Translate from \"@library/content/Translate\";\nimport DateTime from \"@library/content/DateTime\";\nimport classNames from \"classnames\";\nimport { NoUserPhotoIcon } from \"@library/icons/titleBar\";\nimport { userPhotoClasses } from \"@library/headers/mebox/pieces/userPhotoStyles\";\n\nexport enum MeBoxItemType {\n    NOTIFICATION = \"notification\",\n    MESSAGE = \"message\",\n}\n\n// Common to both notifications and messages dropdowns\nexport interface IMeBoxItem {\n    className?: string;\n    message: string;\n    photo: string | null;\n    photoAlt: string;\n    activityName?: string;\n    recordID: number;\n    timestamp: string;\n    to: string;\n    unread?: boolean;\n}\n\nexport interface IMeBoxMessageItem extends IMeBoxItem {\n    authors: IUserFragment[];\n    countMessages: number;\n    type: MeBoxItemType.MESSAGE;\n}\n\nexport interface IMeBoxNotificationItem extends IMeBoxItem {\n    type: MeBoxItemType.NOTIFICATION;\n}\n\ntype IProps = IMeBoxMessageItem | IMeBoxNotificationItem;\n\n/**\n * Implements Drop down message (for notifications or messages)\n */\nexport default class MeBoxDropDownItem extends React.Component<IProps> {\n    public render() {\n        const { unread, message, timestamp, to, photoAlt, photo } = this.props;\n        const classesMeBoxMessage = meBoxMessageClasses();\n        const classesMetas = metasClasses();\n\n        let authorList: JSX.Element[];\n\n        if (this.props.type === MeBoxItemType.MESSAGE) {\n            // Message\n            const { authors } = this.props;\n            const authorCount = this.props.authors.length;\n            if (authors && authorCount > 0) {\n                authorList = authors.map((user, index) => {\n                    if (user) {\n                        return (\n                            <React.Fragment key={`meBoxAuthor-${index}`}>\n                                <strong>{user.name}</strong>\n                                {`${index < authorCount - 1 ? `, ` : \"\"}`}\n                            </React.Fragment>\n                        );\n                    } else {\n                        return <React.Fragment key={`meBoxAuthor-${index}`} />;\n                    }\n                });\n            }\n        }\n\n        return (\n            <li className={classNames(\"meBoxMessage\", this.props.className, classesMeBoxMessage.root)}>\n                <SmartLink to={to} className={classNames(\"meBoxMessage-link\", classesMeBoxMessage.link)} tabIndex={0}>\n                    <div className={classNames(classesMeBoxMessage.imageContainer, userPhotoClasses().root)}>\n                        {photo ? (\n                            <img className={classesMeBoxMessage.image} src={photo} alt={photoAlt} />\n                        ) : (\n                            <NoUserPhotoIcon className={classesMeBoxMessage.image} photoAlt={photoAlt} />\n                        )}\n                    </div>\n                    <div className={classNames(\"meBoxMessage-contents\", classesMeBoxMessage.contents)}>\n                        {!!authorList! && (\n                            <div className={classNames(\"meBoxMessage-message\", classesMeBoxMessage.message)}>\n                                {authorList!}\n                            </div>\n                        )}\n                        {/* Current notifications API returns HTML-formatted messages. Should be updated to return something aside from raw HTML. */}\n                        <div\n                            className={classNames(\"meBoxMessage-message\", classesMeBoxMessage.message)}\n                            dangerouslySetInnerHTML={{ __html: message }}\n                        />\n                        <div className={classNames(\"meBoxMessage-metas\", classesMetas.root, \"isFlexed\")}>\n                            {timestamp && <DateTime timestamp={timestamp} className={classesMetas.meta} />}\n                            {this.props.type === MeBoxItemType.MESSAGE && (\n                                <span className={classesMetas.meta}>\n                                    {this.props.countMessages === 1 && <Translate source=\"<0/> message\" c0={1} />}\n                                    {this.props.countMessages > 1 && (\n                                        <Translate source=\"<0/> messages\" c0={this.props.countMessages} />\n                                    )}\n                                </span>\n                            )}\n                        </div>\n                    </div>\n                    {!unread && (\n                        <FlexSpacer\n                            className={classNames(\"meBoxMessage-status\", \"isRead\", classesMeBoxMessage.status)}\n                        />\n                    )}\n                    {unread && (\n                        <div\n                            title={t(\"Unread\")}\n                            className={classNames(\n                                \"u-flexSpacer\",\n                                \"meBoxMessage-status\",\n                                \"isUnread\",\n                                classesMeBoxMessage.status,\n                            )}\n                        >\n                            <span className=\"sr-only\">{t(\"Unread\")}</span>\n                        </div>\n                    )}\n                </SmartLink>\n            </li>\n        );\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { IUserFragment } from \"@library/@types/api/users\";\n\n// Valid conversation participation statuses.\nexport enum ConversationParticipantStatus {\n    PARTICIPATING = \"participating\",\n    DELETED = \"deleted\",\n}\n\n// Available expand parameter values when requesting the conversations index.\nexport enum GetConversationsExpand {\n    ALL = \"all\",\n    INSERT_USER = \"insertUser\",\n    LAST_INSERT_USER = \"lastInsertUser\",\n}\n\n// Fields for conversation participant rows.\ninterface IConversationParticipant {\n    userID: number;\n    user: IUserFragment;\n    status: ConversationParticipantStatus;\n}\n\n// Message details as a child of a conversation row.\ninterface IConversationMessage {\n    insertUserID: number;\n    dateInserted: string;\n    insertUser: IUserFragment;\n}\n\n// Availble parameters for requesting the conversations index.\nexport interface IGetConversationsRequest {\n    insertUserID?: number;\n    participantUserID?: number;\n    page?: number;\n    limit?: number;\n    expand?: string;\n}\n\n// All conversation row fields.\nexport interface IConversation {\n    conversationID: number;\n    name: string;\n    body: string;\n    url: string;\n    dateInserted: string;\n    insertUserID: number;\n    insertUser?: IUserFragment;\n    countParticipants: number;\n    participants: IConversationParticipant[];\n    countMessages: number;\n    unread: boolean;\n    countUnread: number;\n    lastMessage?: IConversationMessage;\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport MeBoxDropDownItem, {\n    IMeBoxMessageItem,\n    IMeBoxNotificationItem,\n    MeBoxItemType,\n} from \"@library/headers/mebox/pieces/MeBoxDropDownItem\";\nimport { frameBodyClasses } from \"@library/layout/frame/frameBodyStyles\";\nimport classNames from \"classnames\";\n\nexport interface ITitleBarNavProps {\n    className?: string;\n    data: Array<IMeBoxMessageItem | IMeBoxNotificationItem>;\n    emptyMessage?: string;\n    type: MeBoxItemType;\n}\n\n/**\n * Implements Navigation component for header\n */\nexport default class MeBoxDropDownItemList extends React.Component<ITitleBarNavProps> {\n    public render() {\n        const count = this.props.data.length;\n        const classesFrameBody = frameBodyClasses();\n        return (\n            <div className={classNames(\"meBoxMessageList\", this.props.className)}>\n                {count > 0 && (\n                    <ul className=\"meBoxMessageList-items\">\n                        {this.props.data.map((item, key) => {\n                            return (\n                                <MeBoxDropDownItem {...item} key={`MeBoxDropDownItemList-${this.props.type}-${key}`} />\n                            );\n                        })}\n                    </ul>\n                )}\n                {count === 0 && (\n                    <div className={classNames(\"frameBody-noContentMessage\", classesFrameBody.noContentMessage)}>\n                        {this.props.emptyMessage}\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport ConversationsActions from \"@library/features/conversations/ConversationsActions\";\nimport FrameHeaderWithAction from \"@library/layout/frame/FrameHeaderWithAction\";\nimport { IConversationsStoreState } from \"@library/features/conversations/ConversationsModel\";\nimport Loader from \"@library/loaders/Loader\";\nimport { buttonUtilityClasses } from \"@library/forms/buttonStyles\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport apiv2 from \"@library/apiv2\";\nimport { IMeBoxMessageItem, MeBoxItemType } from \"@library/headers/mebox/pieces/MeBoxDropDownItem\";\nimport LinkAsButton from \"@library/routing/LinkAsButton\";\nimport MeBoxDropDownItemList from \"@library/headers/mebox/pieces/MeBoxDropDownItemList\";\nimport { accessibleLabel, t } from \"@library/utility/appUtils\";\nimport Frame from \"@library/layout/frame/Frame\";\nimport classNames from \"classnames\";\nimport FrameBody from \"@library/layout/frame/FrameBody\";\nimport FrameFooter from \"@library/layout/frame/FrameFooter\";\nimport { LoadStatus } from \"@library/@types/api/core\";\nimport { IConversation, GetConversationsExpand } from \"@library/@types/api/conversations\";\nimport { IUserFragment } from \"@library/@types/api/users\";\nimport { connect } from \"react-redux\";\nimport { ComposeIcon } from \"@library/icons/titleBar\";\nimport { IDeviceProps, withDevice } from \"@library/layout/DeviceContext\";\n\n/**\n * Implements Messages Contents to be included in drop down or tabs\n */\nexport class MessagesContents extends React.Component<IProps> {\n    public render() {\n        const buttonUtils = buttonUtilityClasses();\n        const title = t(\"Messages\");\n\n        return (\n            <Frame\n                className={this.props.className}\n                canGrow={true}\n                header={\n                    <FrameHeaderWithAction title={title}>\n                        <LinkAsButton\n                            title={t(\"New Message\")}\n                            to={\"/messages/add\"}\n                            baseClass={ButtonTypes.ICON}\n                            className={classNames(buttonUtils.pushRight)}\n                        >\n                            <ComposeIcon />\n                        </LinkAsButton>\n                    </FrameHeaderWithAction>\n                }\n                body={<FrameBody className={classNames(\"isSelfPadded\")}>{this.renderContents()}</FrameBody>}\n                footer={\n                    <FrameFooter>\n                        <LinkAsButton\n                            className={classNames(buttonUtils.pushLeft)}\n                            to={\"/messages/inbox\"}\n                            baseClass={ButtonTypes.TEXT_PRIMARY}\n                        >\n                            {t(\"All Messages\")}\n                        </LinkAsButton>\n                    </FrameFooter>\n                }\n            />\n        );\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public componentDidMount() {\n        if (this.props.status === LoadStatus.PENDING) {\n            void this.props.requestData();\n        }\n    }\n\n    private renderContents(): React.ReactNode {\n        const { status, data } = this.props;\n        if (status !== LoadStatus.SUCCESS || !data) {\n            return <Loader small minimumTime={0} padding={10} />;\n        }\n\n        return (\n            <MeBoxDropDownItemList\n                emptyMessage={t(\"You do not have any messages yet.\")}\n                className=\"headerDropDown-messages\"\n                type={MeBoxItemType.MESSAGE}\n                data={this.props.data || []}\n            />\n        );\n    }\n}\n\n// For clarity, I'm adding className separately because both the container and the content have className, but it's not applied to the same element.\ninterface IOwnProps extends IDeviceProps {\n    className?: string;\n    countClass?: string;\n    panelBodyClass?: string;\n}\n\ntype IProps = IOwnProps & ReturnType<typeof mapStateToProps> & ReturnType<typeof mapDispatchToProps>;\n\n/**\n * Update the component state, based on changes to the Redux store.\n *\n * @param state Current Redux store state.\n */\nfunction mapStateToProps(state: IConversationsStoreState) {\n    let countUnread = 0;\n    const data: IMeBoxMessageItem[] = [];\n    const { conversationsByID } = state.conversations;\n\n    if (conversationsByID.data) {\n        // Tally the total unread messages. Massage rows into something that will fit into IMeBoxMessageItem.\n        for (const conversation of Object.values(conversationsByID.data) as IConversation[]) {\n            const authors: IUserFragment[] = [];\n            const messageDoc = new DOMParser().parseFromString(conversation.body, \"text/html\");\n            if (conversation.unread === true) {\n                countUnread++;\n            }\n            conversation.participants.forEach((participant) => {\n                authors.push(participant.user);\n            });\n\n            data.push({\n                authors,\n                countMessages: conversation.countMessages,\n                message: messageDoc.body.textContent || \"\",\n                photo: conversation.lastMessage!.insertUser.photoUrl || null,\n                photoAlt: accessibleLabel(`User: \"%s\"`, [conversation.lastMessage!.insertUser.name])!,\n                to: conversation.url,\n                recordID: conversation.conversationID,\n                timestamp: conversation.lastMessage!.dateInserted,\n                type: MeBoxItemType.MESSAGE,\n                unread: conversation.unread,\n            });\n        }\n\n        // Conversations are indexed by ID, which means they'll be sorted by when they were inserted, ascending. Adjust for that.\n        data.sort((itemA: IMeBoxMessageItem, itemB: IMeBoxMessageItem) => {\n            const timeA = new Date(itemA.timestamp).getTime();\n            const timeB = new Date(itemB.timestamp).getTime();\n\n            if (timeA < timeB) {\n                return 1;\n            } else if (timeA > timeB) {\n                return -1;\n            } else {\n                return 0;\n            }\n        });\n    }\n\n    return {\n        countUnread,\n        data,\n        status: conversationsByID.status,\n    };\n}\n\n/**\n * Create action creators on the component, bound to a Redux dispatch function.\n *\n * @param dispatch Redux dispatch function.\n */\nfunction mapDispatchToProps(dispatch) {\n    const convActions = new ConversationsActions(dispatch, apiv2);\n    return {\n        requestData: () => convActions.getConversations({ expand: GetConversationsExpand.ALL }),\n    };\n}\n\n// Connect Redux to the React component.\nexport default connect(mapStateToProps, mapDispatchToProps)(withDevice(MessagesContents));\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { titleBarClasses } from \"@library/headers/titleBarStyles\";\nimport { getMeta, t } from \"@library/utility/appUtils\";\nimport MessagesCount from \"@library/headers/mebox/pieces/MessagesCount\";\nimport MessagesContents from \"@library/headers/mebox/pieces/MessagesContents\";\nimport { uniqueIDFromPrefix } from \"@library/utility/idUtils\";\nimport DropDown, { FlyoutType } from \"@library/flyouts/DropDown\";\n\ninterface IProps {\n    buttonClassName?: string;\n    className?: string;\n    contentsClassName?: string;\n    toggleContentClassName?: string;\n    countClass?: string;\n}\n\ninterface IState {\n    open: boolean;\n}\n\n/**\n * Implements Messages Drop down for header\n */\nexport default class MessagesDropDown extends React.Component<IProps, IState> {\n    private id = uniqueIDFromPrefix(\"messagesDropDown\");\n\n    public state: IState = {\n        open: false,\n    };\n\n    /**\n     * Get the React component to added to the page.\n     *\n     * @returns A DropDown component, configured to display notifications.\n     */\n    public render() {\n        const conversations = getMeta(\"context.conversationsEnabled\", false);\n        const classesHeader = titleBarClasses();\n\n        if (!conversations) return null;\n\n        return (\n            <DropDown\n                contentID={this.id + \"-content\"}\n                handleID={this.id + \"-handle\"}\n                name={t(\"Messages\")}\n                renderLeft={true}\n                buttonClassName={classesHeader.button}\n                contentsClassName={classesHeader.dropDownContents}\n                buttonContents={<MessagesCount open={this.state.open} compact={false} />}\n                onVisibilityChange={this.setOpen}\n                flyoutType={FlyoutType.FRAME}\n            >\n                <MessagesContents countClass={this.props.countClass} />\n            </DropDown>\n        );\n    }\n\n    /**\n     * Assign the open (visible) state of this component.\n     *\n     * @param open Is this menu open and visible?\n     */\n    private setOpen = (open) => {\n        this.setState({\n            open,\n        });\n    };\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ILoadable, LoadStatus } from \"@library/@types/api/core\";\nimport apiv2 from \"@library/apiv2\";\nimport NotificationsActions from \"@library/features/notifications/NotificationsActions\";\nimport { INotificationsStoreState } from \"@library/features/notifications/NotificationsModel\";\nimport Button from \"@library/forms/Button\";\nimport { buttonUtilityClasses } from \"@library/forms/buttonStyles\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { IMeBoxNotificationItem, MeBoxItemType } from \"@library/headers/mebox/pieces/MeBoxDropDownItem\";\nimport MeBoxDropDownItemList from \"@library/headers/mebox/pieces/MeBoxDropDownItemList\";\nimport { IDeviceProps, withDevice } from \"@library/layout/DeviceContext\";\nimport Frame from \"@library/layout/frame/Frame\";\nimport FrameBody from \"@library/layout/frame/FrameBody\";\nimport FrameFooter from \"@library/layout/frame/FrameFooter\";\nimport FrameHeaderWithAction from \"@library/layout/frame/FrameHeaderWithAction\";\nimport { frameFooterClasses } from \"@library/layout/frame/frameFooterStyles\";\nimport Loader from \"@library/loaders/Loader\";\nimport LinkAsButton from \"@library/routing/LinkAsButton\";\nimport { accessibleLabel, t } from \"@library/utility/appUtils\";\nimport classNames from \"classnames\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { SettingsIcon } from \"@library/icons/titleBar\";\n\nexport interface INotificationsProps {\n    countClass?: string;\n    panelBodyClass?: string;\n}\n\n/**\n * Implements Notifications Contents to be included in drop down or tabs\n */\nexport class NotificationsContents extends React.Component<IProps> {\n    public render() {\n        const { userSlug } = this.props;\n        const title = t(\"Notifications\");\n        const classesFrameFooter = frameFooterClasses();\n        const buttonUtils = buttonUtilityClasses();\n\n        return (\n            <Frame\n                className={classNames(this.props.className)}\n                canGrow={true}\n                header={\n                    <FrameHeaderWithAction className=\"hasAction\" title={title}>\n                        <LinkAsButton\n                            title={t(\"Notification Preferences\")}\n                            baseClass={ButtonTypes.ICON}\n                            to={`/profile/preferences/${userSlug}`}\n                        >\n                            <SettingsIcon />\n                        </LinkAsButton>\n                    </FrameHeaderWithAction>\n                }\n                body={\n                    <FrameBody className={classNames(\"isSelfPadded\", this.props.panelBodyClass)}>\n                        {this.bodyContent()}\n                    </FrameBody>\n                }\n                footer={\n                    <FrameFooter>\n                        <LinkAsButton\n                            className={classNames(buttonUtils.pushLeft)}\n                            to={\"/profile/notifications\"}\n                            baseClass={ButtonTypes.TEXT}\n                        >\n                            {t(\"All Notifications\")}\n                        </LinkAsButton>\n                        <Button\n                            onClick={this.markAllRead}\n                            baseClass={ButtonTypes.TEXT_PRIMARY}\n                            className={classNames(\"frameFooter-markRead\", classesFrameFooter.markRead)}\n                        >\n                            {t(\"Mark All Read\")}\n                        </Button>\n                    </FrameFooter>\n                }\n            />\n        );\n    }\n\n    /**\n     * Get content for the main body panel.\n     */\n    private bodyContent(): JSX.Element {\n        const { notifications } = this.props;\n\n        if (notifications.status !== LoadStatus.SUCCESS || !notifications.data) {\n            return <Loader small minimumTime={0} padding={10} />;\n        }\n\n        return (\n            <MeBoxDropDownItemList\n                emptyMessage={t(\"You do not have any notifications yet.\")}\n                className=\"headerDropDown-notifications\"\n                type={MeBoxItemType.NOTIFICATION}\n                data={Object.values(notifications.data)}\n            />\n        );\n    }\n\n    public componentDidMount() {\n        const { requestData, notifications } = this.props;\n\n        if (notifications.status === LoadStatus.PENDING) {\n            void requestData();\n        }\n    }\n\n    /**\n     * Mark all of the current user's notifications as read, then refresh the store of notifications.\n     */\n    private markAllRead = () => {\n        void this.props.markAllRead();\n    };\n}\n\n// For clarity, I'm adding className separately because both the container and the content have className, but it's not applied to the same element.\ninterface IOwnProps extends INotificationsProps, IDeviceProps {\n    className?: string;\n    userSlug: string;\n}\n\ntype IProps = IOwnProps & ReturnType<typeof mapStateToProps> & ReturnType<typeof mapDispatchToProps>;\n\n/**\n * Create action creators on the component, bound to a Redux dispatch function.\n *\n * @param dispatch Redux dispatch function.\n */\nfunction mapDispatchToProps(dispatch) {\n    const notificationActions = new NotificationsActions(dispatch, apiv2);\n    return {\n        markAllRead: notificationActions.markAllRead,\n        requestData: notificationActions.getNotifications,\n    };\n}\n\n/**\n * Update the component state, based on changes to the Redux store.\n *\n * @param state Current Redux store state.\n */\nfunction mapStateToProps(state: INotificationsStoreState) {\n    const { notificationsByID } = state.notifications;\n    const notifications: ILoadable<IMeBoxNotificationItem[]> = {\n        ...notificationsByID,\n        data:\n            notificationsByID.status === LoadStatus.SUCCESS && notificationsByID.data\n                ? Object.values(notificationsByID.data).map((notification) => {\n                      return {\n                          message: notification.body,\n                          photo: notification.photoUrl || null,\n                          photoAlt: notification.activityName\n                              ? accessibleLabel(t(`User: \"%s\"`), [notification.activityName])\n                              : undefined,\n                          to: notification.url,\n                          recordID: notification.notificationID,\n                          timestamp: notification.dateUpdated,\n                          unread: !notification.read,\n                          type: MeBoxItemType.NOTIFICATION,\n                      } as IMeBoxNotificationItem;\n                  })\n                : undefined,\n    };\n\n    if (notifications.data) {\n        // Notifications are likely sorted by ID. Make sure they're sorted by the date they were created, in descending order.\n        notifications.data.sort((a: IMeBoxNotificationItem, b: IMeBoxNotificationItem) => {\n            const dateA = new Date(a.timestamp).getTime();\n            const dateB = new Date(b.timestamp).getTime();\n            return dateB - dateA;\n        });\n    }\n\n    return {\n        notifications,\n    };\n}\n\n// Connect Redux to the React component.\nexport default connect(mapStateToProps, mapDispatchToProps)(withDevice(NotificationsContents));\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { IUsersStoreState } from \"@library/features/users/userTypes\";\nimport { MeBoxIcon } from \"@library/headers/mebox/pieces/MeBoxIcon\";\nimport { t } from \"@library/utility/appUtils\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { NotificationsIcon } from \"@library/icons/titleBar\";\n\nfunction NotificationsCount(props: IProps) {\n    const { count, open, compact } = props;\n\n    return (\n        <MeBoxIcon count={count} countLabel={t(\"Notifications\") + \": \"} compact={compact}>\n            <NotificationsIcon filled={!!open} />\n        </MeBoxIcon>\n    );\n}\n\ninterface IOwnProps {\n    open?: boolean;\n    compact: boolean;\n}\n\ntype IProps = IOwnProps & ReturnType<typeof mapStateToProps>;\n\nfunction mapStateToProps(state: IUsersStoreState) {\n    const { current } = state.users;\n    return {\n        count: current.data ? current.data.countUnreadNotifications : 0,\n    };\n}\n\nexport default connect(mapStateToProps)(NotificationsCount);\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport DropDown, { FlyoutType } from \"@library/flyouts/DropDown\";\nimport NotificationsContents, { INotificationsProps } from \"@library/headers/mebox/pieces/NotificationsContents\";\nimport NotificationsCount from \"@library/headers/mebox/pieces/NotificationsCount\";\nimport { titleBarClasses } from \"@library/headers/titleBarStyles\";\nimport { t } from \"@library/utility/appUtils\";\nimport { uniqueIDFromPrefix } from \"@library/utility/idUtils\";\nimport React from \"react\";\nimport { Devices, useDevice } from \"@library/layout/DeviceContext\";\n\ninterface IProps extends INotificationsProps {\n    countUnread: number;\n    userSlug: string;\n}\n\ninterface IState {\n    open: boolean;\n}\n\n/**\n * Implements Notifications menu for header\n */\nexport default class NotificationsDropDown extends React.Component<IProps, IState> {\n    private id = uniqueIDFromPrefix(\"notificationsDropDown\");\n\n    public state: IState = {\n        open: false,\n    };\n\n    /**\n     * Get the React component to added to the page.\n     *\n     * @returns A DropDown component, configured to display notifications.\n     */\n    public render() {\n        const { userSlug } = this.props;\n        const classesHeader = titleBarClasses();\n        return (\n            <DropDown\n                contentID={this.id + \"-content\"}\n                handleID={this.id + \"-handle\"}\n                name={t(\"Notifications\")}\n                renderLeft={true}\n                buttonClassName={classesHeader.button}\n                contentsClassName={classesHeader.dropDownContents}\n                buttonContents={<NotificationsCount open={this.state.open} compact={false} />}\n                onVisibilityChange={this.setOpen}\n                flyoutType={FlyoutType.FRAME}\n            >\n                <NotificationsContents userSlug={userSlug} />\n            </DropDown>\n        );\n    }\n\n    /**\n     * Assign the open (visibile) state of this component.\n     *\n     * @param open Is this menu open and visible?\n     */\n    private setOpen = (open) => {\n        this.setState({\n            open,\n        });\n    };\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { meBoxClasses } from \"@library/headers/mebox/pieces/meBoxStyles\";\nimport UserDropdown from \"@library/headers/mebox/pieces/UserDropdown\";\nimport MessagesDropDown from \"@library/headers/mebox/pieces/MessagesDropDown\";\nimport { IInjectableUserState } from \"@library/features/users/userTypes\";\nimport NotificationsDropDown from \"@library/headers/mebox/pieces/NotificationsDropDown\";\n\nexport interface IMeBoxProps extends IInjectableUserState {\n    countClass?: string;\n    className?: string;\n    countsClass?: string;\n    buttonClassName?: string;\n    contentClassName?: string;\n}\n\n/**\n * Implements MeBox component. Note that on mobile we use the CompactMeBox component but they share children components\n */\nexport default class MeBox extends React.Component<IMeBoxProps> {\n    public render() {\n        const userInfo = this.props.currentUser.data;\n        if (!userInfo) {\n            return null;\n        }\n        const classes = meBoxClasses();\n        return (\n            <div className={classNames(\"meBox\", this.props.className, classes.root)}>\n                <NotificationsDropDown userSlug={userInfo.name} countUnread={userInfo.countUnreadNotifications} />\n                <MessagesDropDown />\n                <UserDropdown />\n            </div>\n        );\n    }\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport * as React from \"react\";\nimport classNames from \"classnames\";\n\nexport interface ITabPanel {\n    panelContent: React.ReactNode;\n}\n\ninterface IProps {\n    parentID: string;\n    tabs: ITabPanel[];\n    className?: string;\n    tabPanelClass?: string;\n    selectedTab: number;\n    getTabButtonID: (index: number) => string;\n    getTabPanelID: (index: number) => string;\n}\n\n/**\n * Clean up conditional renders with this component\n */\nexport default class TabPanel extends React.Component<IProps> {\n    public render() {\n        const { className, tabs, selectedTab, getTabButtonID, getTabPanelID, tabPanelClass } = this.props;\n        const content = tabs.map((tab: ITabPanel, index) => {\n            const key = `tabPanel-${index}`;\n            return selectedTab === index ? (\n                <div\n                    id={getTabPanelID(index)}\n                    aria-labelledby={getTabButtonID(index)}\n                    role=\"tabpanel\"\n                    className={classNames(\"tabPanel\", tabPanelClass)}\n                    tabIndex={0}\n                    key={key}\n                >\n                    {tab.panelContent}\n                </div>\n            ) : (\n                <React.Fragment key={key} />\n            );\n        });\n        return <div className={classNames(\"tabPanels\", className)}>{content}</div>;\n    }\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport * as React from \"react\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport Button from \"@library/forms/Button\";\n\ninterface IProps {\n    id: string;\n    ariaControls: string;\n    ariaSelected: boolean;\n    baseClass: ButtonTypes;\n    className: string;\n    tabIndex: number;\n    children: React.ReactNode;\n    setTab: (selectedTab: number) => void;\n    index: number;\n    onKeyDown?: (event: React.KeyboardEvent) => void;\n}\n\n/**\n * Implements TabButton component\n */\nexport default class TabButton extends React.Component<IProps> {\n    public render() {\n        const { id, ariaControls, ariaSelected, baseClass, className, tabIndex, children } = this.props;\n        return (\n            <Button\n                id={id}\n                aria-controls={ariaControls}\n                aria-selected={ariaSelected}\n                baseClass={baseClass}\n                className={className}\n                role=\"tab\"\n                tabIndex={tabIndex}\n                onClick={this.handleClick}\n                onKeyDown={this.props.onKeyDown}\n            >\n                {children}\n            </Button>\n        );\n    }\n\n    private handleClick = () => {\n        this.props.setTab(this.props.index);\n    };\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { defaultTransition } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { countClasses } from \"@library/content/countStyles\";\nimport { compactMeBoxVariables } from \"@library/headers/mebox/pieces/compactMeBoxStyles\";\n\nexport const tabButtonListClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const style = styleFactory(\"tabButtonList\");\n    const classesCount = countClasses();\n    const compactMeBoxVars = compactMeBoxVariables();\n\n    const root = style({\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"stretch\",\n    });\n\n    const button = style(\"button\", {\n        flexGrow: 1,\n        color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n        ...{\n            \".icon\": {\n                ...defaultTransition(\"opacity\"),\n                opacity: 0.8,\n            },\n            \"&:hover\": {\n                color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n                ...{\n                    \".icon\": {\n                        opacity: 1,\n                    },\n                },\n            },\n            \"&:focus, &:active, &.focus-visible\": {\n                color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n            },\n            [`.${classesCount.text}`]: {\n                color: ColorsUtils.colorOut(compactMeBoxVars.colors.bg),\n            },\n        },\n    });\n\n    return { root, button };\n});\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport TabButton from \"@library/navigation/tabs/TabButton\";\nimport { TabHandler } from \"@vanilla/dom-utils\";\nimport { tabButtonListClasses } from \"@library/navigation/tabs/tabButtonListStyles\";\n\nexport interface ITabButton {\n    buttonContent: React.ReactNode;\n    openButtonContent?: React.ReactNode; // Optional overwrite when open\n}\n\ninterface IProps {\n    parentID: string;\n    tabs: ITabButton[];\n    className?: string;\n    selectedTab: number;\n    setTab: (selectedTab: number) => void;\n    label: string;\n    getTabButtonID: (index: number) => string;\n    getTabPanelID: (index: number) => string;\n    buttonClass?: string;\n    extraContent?: React.ReactNode;\n}\n\ninterface IState {\n    setAllTabIndexes: boolean;\n}\n\n/**\n * Clean up conditional renders with this component\n */\nexport default class TabButtonList extends React.Component<IProps, IState> {\n    private tabButtons: React.RefObject<HTMLDivElement> = React.createRef();\n    public state = {\n        setAllTabIndexes: false,\n    };\n    public render() {\n        const { className, label, tabs, selectedTab, getTabButtonID, getTabPanelID, buttonClass } = this.props;\n        const classes = tabButtonListClasses();\n        const content = tabs.map((tab: ITabButton, index) => {\n            const isSelected = selectedTab === index;\n            const hasAlternateContents = !!tab.openButtonContent;\n            return (\n                <TabButton\n                    id={getTabButtonID(index)}\n                    ariaControls={getTabPanelID(index)}\n                    ariaSelected={isSelected}\n                    key={`tabButton-${index}`}\n                    baseClass={ButtonTypes.CUSTOM}\n                    className={classNames(isSelected, buttonClass, classes.button)}\n                    tabIndex={isSelected || this.state.setAllTabIndexes ? 0 : -1}\n                    index={index}\n                    setTab={this.props.setTab}\n                    onKeyDown={this.handleKeyDown}\n                >\n                    {!hasAlternateContents || (!isSelected && tab.buttonContent)}\n                    {hasAlternateContents && isSelected && tab.openButtonContent}\n                </TabButton>\n            );\n        });\n        return (\n            <div\n                role=\"tablist\"\n                aria-label={label}\n                className={classNames(\"tabButtonList\", className, classes.root)}\n                ref={this.tabButtons}\n            >\n                {content}\n                {this.props.extraContent}\n            </div>\n        );\n    }\n\n    /**\n     * Keyboard handler for accessibility\n     * For full accessibility docs, see https://www.w3.org/TR/wai-aria-practices-1.1/examples/tabs/tabs-2/tabs.html\n     * @param event\n     */\n    private handleKeyDown = (event: React.KeyboardEvent) => {\n        event.persist();\n        const currentEl = event.currentTarget;\n        this.setState(\n            {\n                setAllTabIndexes: true,\n            },\n            () => {\n                const tabHandler = new TabHandler(this.tabButtons.current!);\n                switch (event.key) {\n                    case \"ArrowRight\": {\n                        event.stopPropagation();\n                        const nextElement = tabHandler.getNext(currentEl, false, true);\n                        if (nextElement) {\n                            nextElement.focus();\n                        }\n                        break;\n                    }\n                    case \"ArrowLeft\": {\n                        event.stopPropagation();\n                        const prevElement = tabHandler.getNext(currentEl, true, true);\n                        if (prevElement) {\n                            prevElement.focus();\n                        }\n                        break;\n                    }\n                    case \"Home\": {\n                        event.stopPropagation();\n                        const firstElement = tabHandler.getInitial();\n                        if (firstElement) {\n                            firstElement.focus();\n                        }\n                        break;\n                    }\n                    case \"End\": {\n                        event.stopPropagation();\n                        const lastElement = tabHandler.getLast();\n                        if (lastElement) {\n                            lastElement.focus();\n                        }\n                        break;\n                    }\n                }\n                this.setState({\n                    setAllTabIndexes: false,\n                });\n            },\n        );\n    };\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport TabPanel, { ITabPanel } from \"@library/navigation/tabs/TabPanel\";\nimport TabButtonList, { ITabButton } from \"@library/navigation/tabs/TabButtonList\";\nimport { uniqueIDFromPrefix } from \"@library/utility/idUtils\";\n\nexport interface ITab extends ITabPanel, ITabButton {}\n\ninterface IProps {\n    className?: string;\n    label: string;\n    buttonClass?: string;\n    tabListClass?: string;\n    tabPanelsClass?: string;\n    tabPanelClass?: string;\n    tabs: ITab[];\n    extraTabContent?: React.ReactNode;\n}\n\ninterface IState {\n    selectedTab: number;\n}\n\n/**\n * Clean up conditional renders with this component\n */\nexport default class Tabs extends React.PureComponent<IProps, IState> {\n    private id = uniqueIDFromPrefix(\"tabs\");\n    public constructor(props) {\n        super(props);\n        this.state = {\n            selectedTab: 0,\n        };\n    }\n\n    public render() {\n        const { tabs, className } = this.props;\n        return (\n            <>\n                <TabButtonList\n                    tabs={this.props.tabs}\n                    selectedTab={this.state.selectedTab}\n                    setTab={this.setSelectedTab}\n                    getTabButtonID={this.tabButtonID}\n                    getTabPanelID={this.tabPanelId}\n                    label={this.props.label}\n                    parentID={this.id}\n                    buttonClass={this.props.buttonClass}\n                    className={this.props.tabListClass}\n                    extraContent={this.props.extraTabContent}\n                />\n                <TabPanel\n                    tabs={this.props.tabs}\n                    selectedTab={this.state.selectedTab}\n                    getTabButtonID={this.tabButtonID}\n                    getTabPanelID={this.tabPanelId}\n                    parentID={this.id}\n                    tabPanelClass={this.props.tabPanelClass}\n                    className={this.props.tabPanelsClass}\n                />\n            </>\n        );\n    }\n\n    private setSelectedTab = (selectedTab: number) => {\n        this.setState({\n            selectedTab,\n        });\n    };\n\n    private tabButtonID = (index: number) => {\n        return `${this.id}-tabButton-${index}`;\n    };\n\n    private tabPanelId = (index: number) => {\n        return `${this.id}-tabPanel-${index}`;\n    };\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport MessagesContents from \"@library/headers/mebox/pieces/MessagesContents\";\nimport { compactMeBoxClasses } from \"@library/headers/mebox/pieces/compactMeBoxStyles\";\nimport { UserPhoto, UserPhotoSize } from \"@library/headers/mebox/pieces/UserPhoto\";\nimport CloseButton from \"@library/navigation/CloseButton\";\nimport { inheritHeightClass } from \"@library/styles/styleHelpers\";\nimport NotificationsContents from \"@library/headers/mebox/pieces/NotificationsContents\";\nimport { accessibleLabel, t } from \"@library/utility/appUtils\";\nimport NotificationsCount from \"@library/headers/mebox/pieces/NotificationsCount\";\nimport MessagesCount from \"@library/headers/mebox/pieces/MessagesCount\";\nimport Button from \"@library/forms/Button\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { IMeBoxProps } from \"@library/headers/mebox/MeBox\";\nimport Tabs from \"@library/navigation/tabs/Tabs\";\nimport { IInjectableUserState } from \"@library/features/users/userTypes\";\nimport UserDropDownContents from \"@library/headers/mebox/pieces/UserDropDownContents\";\nimport classNames from \"classnames\";\nimport Modal from \"@library/modal/Modal\";\nimport ModalSizes from \"@library/modal/ModalSizes\";\nimport { titleBarClasses } from \"@library/headers/titleBarStyles\";\nimport { MeBoxIcon } from \"@library/headers/mebox/pieces/MeBoxIcon\";\nimport { TouchScrollable } from \"react-scrolllock\";\nimport { UserIcon, UserIconTypes } from \"@library/icons/titleBar\";\n\ninterface IProps extends IInjectableUserState, IMeBoxProps {}\n\ninterface IState {\n    open: boolean;\n}\n\n/**\n * Implements User Drop down for header\n */\nexport default class CompactMeBox extends React.Component<IProps, IState> {\n    private buttonRef: React.RefObject<HTMLButtonElement> = React.createRef();\n\n    public state = {\n        open: false,\n    };\n\n    public render() {\n        const userInfo = this.props.currentUser.data;\n        if (!userInfo) {\n            return null;\n        }\n\n        const classes = compactMeBoxClasses();\n        const titleBarVars = titleBarClasses();\n        const panelBodyClass = classNames(\"compactMeBox-body\", classes.body);\n\n        const titleText = t(\"Me\");\n        const altText = accessibleLabel(t(`User: \"%s\"`), [t(`Me`)]);\n\n        return (\n            <div className={classNames(\"compactMeBox\", this.props.className, classes.root)}>\n                <Button\n                    title={t(\"My Account\")}\n                    className={classNames(classes.openButton, titleBarVars.centeredButton, titleBarVars.button)}\n                    onClick={this.open}\n                    buttonRef={this.buttonRef}\n                    baseClass={ButtonTypes.CUSTOM}\n                >\n                    <UserPhoto userInfo={userInfo} className=\"meBox-user\" size={UserPhotoSize.SMALL} />\n                </Button>\n                <Modal\n                    isVisible={this.state.open}\n                    size={ModalSizes.MODAL_AS_SIDE_PANEL_RIGHT}\n                    elementToFocusOnExit={this.buttonRef.current!}\n                    exitHandler={this.close}\n                >\n                    <Tabs\n                        label={t(\"My Account Tab\")}\n                        tabListClass={classNames(classes.tabList)}\n                        tabPanelsClass={classNames(classes.tabPanels, inheritHeightClass())}\n                        tabPanelClass={classNames(inheritHeightClass(), classes.panel)}\n                        buttonClass={classNames(classes.tabButton)}\n                        extraTabContent={\n                            <CloseButton onClick={this.close} className={classNames(classes.closeModal)} />\n                        }\n                        tabs={[\n                            {\n                                buttonContent: (\n                                    <MeBoxIcon compact={true}>\n                                        <UserIcon\n                                            styleType={UserIconTypes.SELECTED_INACTIVE}\n                                            title={titleText}\n                                            alt={altText}\n                                        />\n                                    </MeBoxIcon>\n                                ),\n                                openButtonContent: (\n                                    <MeBoxIcon compact={true}>\n                                        <UserIcon\n                                            styleType={UserIconTypes.SELECTED_ACTIVE}\n                                            title={titleText}\n                                            alt={altText}\n                                        />\n                                    </MeBoxIcon>\n                                ),\n                                panelContent: (\n                                    <TouchScrollable>\n                                        <UserDropDownContents className={classes.scrollContainer} />\n                                    </TouchScrollable>\n                                ),\n                            },\n                            {\n                                buttonContent: <NotificationsCount open={false} compact={true} />,\n                                openButtonContent: <NotificationsCount open={true} compact={true} />,\n                                panelContent: (\n                                    <NotificationsContents panelBodyClass={panelBodyClass} userSlug={userInfo.name} />\n                                ),\n                            },\n                            {\n                                buttonContent: <MessagesCount open={false} compact={true} />,\n                                openButtonContent: <MessagesCount open={true} compact={true} />,\n                                panelContent: <MessagesContents className={panelBodyClass} />,\n                            },\n                        ]}\n                    />\n                </Modal>\n            </div>\n        );\n    }\n\n    private open = () => {\n        this.setState({\n            open: true,\n        });\n    };\n    private close = () => {\n        this.setState({\n            open: false,\n        });\n    };\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useSearch } from \"@library/contexts/SearchContext\";\nimport SearchBar from \"@library/features/search/SearchBar\";\nimport { ISearchBarOverwrites, searchBarClasses } from \"@library/features/search/searchBarStyles\";\nimport SearchOption from \"@library/features/search/SearchOption\";\nimport { dropDownClasses } from \"@library/flyouts/dropDownStyles\";\nimport Button from \"@library/forms/Button\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { compactSearchClasses } from \"@library/headers/mebox/pieces/compactSearchStyles\";\nimport { titleBarClasses } from \"@library/headers/titleBarStyles\";\nimport { SearchIcon } from \"@library/icons/titleBar\";\nimport { useLinkContext } from \"@library/routing/links/LinkContextProvider\";\nimport { t } from \"@library/utility/appUtils\";\nimport { useUniqueID } from \"@library/utility/idUtils\";\nimport { useEscapeListener, useLastValue, useFocusWatcher } from \"@vanilla/react-utils\";\nimport classNames from \"classnames\";\nimport React, { useLayoutEffect, useRef, useState, useCallback } from \"react\";\nimport { IStateColors } from \"@library/styles/styleHelpers\";\nimport {\n    ISearchScopeNoCompact,\n    useSearchScope,\n    SEARCH_SCOPE_LOCAL,\n    SEARCH_SCOPE_EVERYWHERE,\n} from \"@library/features/search/SearchScopeContext\";\nimport { AsyncCreatable } from \"react-select\";\nimport { cx } from \"@library/styles/styleShim\";\n\nexport interface ICompactSearchProps {\n    className?: string;\n    placeholder?: string;\n    open: boolean;\n    onSearchButtonClick: () => void;\n    onCloseSearch: () => void;\n    cancelButtonClassName?: string;\n    buttonClass?: string;\n    showingSuggestions?: boolean;\n    onOpenSuggestions?: () => void;\n    onCloseSuggestions?: () => void;\n    focusOnMount?: boolean;\n    buttonContentClassName?: string;\n    cancelContentClassName?: string;\n    clearButtonClass?: string;\n    valueContainerClass?: string;\n    scope?: ISearchScopeNoCompact;\n    searchCloseOverwrites?: IStateColors;\n    overwriteSearchBar?: ISearchBarOverwrites;\n}\n\n/**\n * Implements Compact Search component for header\n */\nexport function CompactSearch(props: ICompactSearchProps) {\n    const [query, setQuery] = useState(\"\");\n    const id = useUniqueID(\"compactSearch\");\n    const selfRef = useRef<HTMLDivElement | null>(null);\n    const searchInputRef = useRef<AsyncCreatable<any> | null>(null);\n    const resultsRef = useRef<HTMLDivElement | null>(null);\n    const openSearchButtonRef = useRef<HTMLButtonElement | null>(null);\n\n    const { focusOnMount, open = false } = props;\n    const prevOpen = useLastValue(open);\n\n    const contextScope = useSearchScope();\n    const scope = {\n        ...contextScope,\n        ...props.scope,\n    };\n\n    // Focus button on mount.\n    useLayoutEffect(() => {\n        if (focusOnMount) {\n            searchInputRef.current?.focus();\n        }\n    }, [focusOnMount]);\n\n    // Focus when opening/closing\n    useLayoutEffect(() => {\n        if (prevOpen === false && open) {\n            searchInputRef.current?.focus();\n        } else if (prevOpen === true && !open) {\n            openSearchButtonRef.current?.focus();\n        }\n    });\n\n    const { searchOptionProvider } = useSearch();\n    const { pushSmartLocation } = useLinkContext();\n\n    const scopeValue = scope.value?.value || \"\";\n    const handleSubmit = useCallback(() => {\n        const searchQuery = [SEARCH_SCOPE_LOCAL, SEARCH_SCOPE_EVERYWHERE].includes(scopeValue)\n            ? `${query}&scope=${scopeValue}`\n            : query;\n        pushSmartLocation(searchOptionProvider.makeSearchUrl(searchQuery));\n    }, [searchOptionProvider, pushSmartLocation, query, scopeValue]);\n\n    // Close with the escape key.\n    useEscapeListener({\n        root: selfRef.current,\n        callback: () => {\n            if (!props.showingSuggestions) {\n                props.onCloseSearch();\n            }\n        },\n    });\n\n    useFocusWatcher(selfRef, (isFocused) => {\n        if (!isFocused) {\n            props.onCloseSearch();\n        }\n    });\n\n    const classesTitleBar = titleBarClasses();\n    const classes = compactSearchClasses();\n    const classesSearchBar = searchBarClasses(props.overwriteSearchBar);\n    const classesDropDown = dropDownClasses();\n\n    return (\n        <div ref={selfRef} className={classNames(props.className, classes.root, { isOpen: props.open })}>\n            {!props.open && (\n                <Button\n                    onClick={props.onSearchButtonClick}\n                    className={classNames(classesTitleBar.centeredButton, props.buttonClass)}\n                    title={t(\"Search\")}\n                    aria-expanded={false}\n                    aria-haspopup=\"true\"\n                    baseClass={ButtonTypes.CUSTOM}\n                    aria-controls={id}\n                    buttonRef={openSearchButtonRef}\n                >\n                    <div className={classNames(props.buttonContentClassName)}>\n                        <SearchIcon />\n                    </div>\n                </Button>\n            )}\n            {props.open && (\n                <div className={classes.contents}>\n                    <div className={classes.searchAndResults}>\n                        <SearchBar\n                            id={id}\n                            placeholder={props.placeholder}\n                            optionComponent={SearchOption}\n                            noHeading={true}\n                            title={t(\"Search\")}\n                            value={query}\n                            disabled={!props.open}\n                            hideSearchButton={true}\n                            onChange={setQuery}\n                            onSearch={handleSubmit}\n                            loadOptions={(query, options) =>\n                                searchOptionProvider.autocomplete(query, { ...options, scope: scope.value?.value })\n                            }\n                            ref={searchInputRef}\n                            triggerSearchOnClear={false}\n                            resultsRef={resultsRef}\n                            onOpenSuggestions={props.onOpenSuggestions}\n                            onCloseSuggestions={props.onCloseSuggestions}\n                            className={\"compactSearch-searchBar\"}\n                            clearButtonClass={props.clearButtonClass}\n                            valueContainerClasses={classNames(classes.valueContainer, props.valueContainerClass)}\n                            scope={props.scope}\n                            overwriteSearchBar={props.overwriteSearchBar}\n                        />\n\n                        <div\n                            ref={resultsRef}\n                            className={classNames({\n                                [classesTitleBar.compactSearchResults]: props.showingSuggestions,\n                                [classesSearchBar.results]: props.showingSuggestions,\n                                [classesDropDown.contents]: props.showingSuggestions,\n                            })}\n                        />\n                    </div>\n\n                    <Button\n                        onClick={props.onCloseSearch}\n                        className={cx(props.cancelButtonClassName, classes.close, classesSearchBar.closeButton)}\n                        title={t(\"Cancel\")}\n                        aria-expanded={true}\n                        aria-haspopup=\"true\"\n                        aria-controls={id}\n                        baseClass={ButtonTypes.CUSTOM}\n                    >\n                        <div className={classNames(props.cancelContentClassName, classes.cancelContents)}>\n                            {t(\"Cancel\")}\n                        </div>\n                    </Button>\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default CompactSearch;\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { VanillaLogo } from \"@library/icons/titleBar\";\nimport { ICoreStoreState } from \"@library/redux/reducerRegistry\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { titleBarVariables } from \"@library/headers/TitleBar.variables\";\n\nexport enum LogoType {\n    DESKTOP = \"logo\",\n    MOBILE = \"mobileLogo\",\n}\n\nclass ThemeLogo extends React.Component<IProps> {\n    public render() {\n        let content;\n\n        const themeDesktopUrl = titleBarVariables().logo.desktop.url;\n        const themeMobileUrl = titleBarVariables().logo.mobile.url;\n\n        const isDesktop = this.props.type === LogoType.DESKTOP;\n        const themeUrl = isDesktop ? themeDesktopUrl : themeMobileUrl;\n        const finalUrl = this.props.overwriteLogo ?? themeUrl ?? this.props.logoUrl;\n\n        if (finalUrl) {\n            content = <img className={this.props.className} src={finalUrl} />;\n        } else {\n            content = <VanillaLogo className={this.props.className} isMobile={!isDesktop} />;\n        }\n\n        return content;\n    }\n}\n\nfunction logoUrlFromState(state: ICoreStoreState, logoType: LogoType): string | null {\n    const assets = state.theme.assets.data || {};\n    let logo;\n\n    if (logoType === LogoType.DESKTOP) {\n        logo = assets.logo || null;\n    } else if (logoType === LogoType.MOBILE) {\n        logo = assets.mobileLogo || null;\n    }\n\n    if (!logo) {\n        return null;\n    } else {\n        return logo.url;\n    }\n}\n\ninterface IOwnProps {\n    alt: string;\n    className?: string;\n    type: LogoType;\n    overwriteLogo?: string; // for storybook only\n}\n\ntype IProps = IOwnProps & ReturnType<typeof mapStateToProps>;\n\nfunction mapStateToProps(state: ICoreStoreState, ownProps: IOwnProps) {\n    return {\n        logoUrl: logoUrlFromState(state, ownProps.type),\n    };\n}\n\nexport default connect(mapStateToProps)(ThemeLogo);\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport ThemeLogo, { LogoType } from \"@library/theming/ThemeLogo\";\nimport { formatUrl, t } from \"@library/utility/appUtils\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport { titleBarLogoClasses } from \"@library/headers/titleBarStyles\";\nimport { titleBarVariables } from \"@library/headers/TitleBar.variables\";\nimport classNames from \"classnames\";\nimport { navigationVariables } from \"@library/headers/navigationVariables\";\n\nexport interface IHeaderLogo {\n    className?: string;\n    logoClassName?: string;\n    logoType: LogoType;\n    color?: string;\n    overwriteLogo?: string; // for storybook\n}\n\n/**\n * Implements Logo component\n */\nexport default class HeaderLogo extends React.Component<IHeaderLogo> {\n    public render() {\n        const { doubleLogoStrategy } = titleBarVariables().logo;\n        const classes = titleBarLogoClasses();\n        const desktopOrMobileClass = this.props.logoType === LogoType.MOBILE ? classes.mobileLogo : classes.logo;\n        const logoClassName = classNames(\"headerLogo-logo\", this.props.logoClassName, desktopOrMobileClass);\n        const url = navigationVariables().logo.url;\n\n        if (doubleLogoStrategy === \"hidden\") {\n            return null;\n        }\n\n        return (\n            <SmartLink to={url} className={classNames(\"headerLogo\", this.props.className)}>\n                <span className={classNames(\"headerLogo-logoFrame\", classes.logoFrame)}>\n                    <ThemeLogo\n                        overwriteLogo={this.props.overwriteLogo}\n                        alt={t(\"Vanilla\")}\n                        className={logoClassName}\n                        type={this.props.logoType}\n                    />\n                </span>\n            </SmartLink>\n        );\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { percent, px, calc, quote, rgba } from \"csx\";\nimport { titleBarVariables } from \"@library/headers/TitleBar.variables\";\nimport { absolutePosition, flexHelper, negative, userSelect } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { LogoAlignment } from \"@library/headers/LogoAlignment\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const titleBarNavigationVariables = useThemeCache(() => {\n    const makeThemeVars = variableFactory(\"titleBarNavigation\");\n    const globalVars = globalVariables();\n    const varsFormElements = formElementsVariables();\n    const titleBarVars = titleBarVariables();\n\n    const border = makeThemeVars(\"border\", {\n        verticalWidth: 3,\n    });\n\n    const item = makeThemeVars(\"item\", {\n        size: varsFormElements.sizing.height,\n    });\n\n    const padding = makeThemeVars(\"padding\", {\n        horizontal: globalVars.gutter.half,\n    });\n\n    const linkActive = makeThemeVars(\"linkActive\", {\n        offset: 0,\n        height: 3,\n        bg: titleBarVars.colors.fg,\n        bottomSpace: 1,\n        maxWidth: 40,\n    });\n\n    const navLinks = makeThemeVars(\"navLinks\", {\n        fontSize: 14,\n        padding: {\n            left: 8,\n            right: 8,\n        },\n    });\n\n    const navPadding = makeThemeVars(\"navPadding\", {\n        padding: {\n            bottom: 4,\n        },\n    });\n\n    return {\n        border,\n        item,\n        linkActive,\n        padding,\n        navLinks,\n        navPadding,\n    };\n});\n\nconst titleBarNavClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const titleBarVars = titleBarVariables();\n    const vars = titleBarNavigationVariables();\n\n    const mediaQueries = titleBarVars.mediaQueries();\n    const flex = flexHelper();\n    const style = styleFactory(\"titleBarNav\");\n\n    const root = style(\n        {\n            ...flex.middleLeft(),\n            position: \"relative\",\n            height: styleUnit(titleBarVars.sizing.height),\n        },\n        mediaQueries.compact({\n            height: styleUnit(titleBarVars.sizing.mobile.height),\n        }),\n    );\n\n    const navigation = style(\n        \"navigation\",\n        titleBarVars.logo.doubleLogoStrategy === \"hidden\" || titleBarVars.logo.justifyContent === LogoAlignment.CENTER\n            ? {\n                  marginLeft: styleUnit(-(vars.padding.horizontal + vars.navLinks.padding.left)),\n              }\n            : {},\n    );\n\n    const navigationCentered = style(\"navigationCentered\", {\n        ...absolutePosition.middleOfParent(true),\n        display: \"inline-flex\",\n    });\n\n    const items = style(\n        \"items\",\n        {\n            ...flex.middleLeft(),\n            height: styleUnit(titleBarVars.sizing.height),\n            ...Mixins.padding(vars.padding),\n        },\n        mediaQueries.compact({\n            height: px(titleBarVars.sizing.mobile.height),\n            justifyContent: \"center\",\n            width: percent(100),\n        }),\n    );\n\n    const link = style(\"link\", {\n        ...userSelect(),\n        color: ColorsUtils.colorOut(titleBarVars.colors.fg),\n        whiteSpace: \"nowrap\",\n        lineHeight: globalVars.lineHeights.condensed,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        minHeight: styleUnit(vars.item.size),\n        textDecoration: \"none\",\n        alignSelf: \"center\",\n        paddingLeft: styleUnit(vars.navLinks.padding.left),\n        paddingRight: styleUnit(vars.navLinks.padding.right),\n        fontSize: styleUnit(vars.navLinks.fontSize),\n        ...{\n            \"&.focus-visible\": {\n                color: ColorsUtils.colorOut(titleBarVars.colors.state.fg),\n                backgroundColor: ColorsUtils.colorOut(titleBarVars.colors.state.bg),\n            },\n            \"&:focus\": {\n                color: ColorsUtils.colorOut(titleBarVars.colors.state.fg),\n                backgroundColor: ColorsUtils.colorOut(titleBarVars.colors.state.bg),\n            },\n            \"&:hover\": {\n                color: ColorsUtils.colorOut(titleBarVars.colors.state.fg),\n                backgroundColor: ColorsUtils.colorOut(titleBarVars.colors.state.bg),\n            },\n        },\n    });\n\n    const offsetWidth = vars.linkActive.offset * 2;\n\n    const linkActive = style(\"linkActive\", {\n        ...{\n            \"&:after\": {\n                ...absolutePosition.topLeft(\n                    `calc(50% - ${styleUnit(vars.linkActive.height + vars.linkActive.bottomSpace)})`,\n                ),\n                maxWidth: styleUnit(vars.linkActive.maxWidth),\n                content: quote(\"\"),\n                height: styleUnit(vars.linkActive.height),\n                left: percent(50),\n                marginLeft: styleUnit(negative(vars.linkActive.offset)),\n                width: offsetWidth === 0 ? percent(100) : calc(`100% + ${styleUnit(offsetWidth)}`),\n                transform: `translate(-50%, ${styleUnit(titleBarVars.sizing.height / 2)})`,\n                backgroundColor: ColorsUtils.colorOut(vars.linkActive.bg),\n            },\n        },\n    });\n\n    const firstItem = style(\"lastItem\", {\n        zIndex: 2,\n    });\n\n    const lastItem = style(\"lastItem\", {\n        zIndex: 2,\n    });\n    const navContiner = style(\"navContiner\", {\n        paddingBottom: styleUnit(vars.navPadding.padding.bottom),\n    });\n\n    const navLinks = style(\"navLinks\", {});\n\n    return {\n        root,\n        navigation,\n        navigationCentered,\n        items,\n        link,\n        linkActive,\n        lastItem,\n        firstItem,\n        navLinks,\n        navContiner,\n    };\n});\n\nexport default titleBarNavClasses;\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport * as React from \"react\";\nimport classNames from \"classnames\";\n\nexport interface IProps {\n    children: React.ReactNode;\n    className?: string;\n}\n\n/**\n * Implements Navigation list item\n */\nexport default class TitleBarListItem extends React.Component<IProps> {\n    public render() {\n        return <li className={classNames(this.props.className)}>{this.props.children}</li>;\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport titleBarNavClasses from \"@library/headers/titleBarNavStyles\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport { getButtonStyleFromBaseClass } from \"@library/forms/Button\";\nimport classNames from \"classnames\";\nimport TitleBarListItem from \"@library/headers/mebox/pieces/TitleBarListItem\";\n\nexport interface ITitleBarNav extends React.AnchorHTMLAttributes<HTMLAnchorElement> {\n    className?: string;\n    to: string;\n    isActive?: boolean;\n    children: React.ReactNode;\n    linkClassName?: string;\n    linkContentClassName?: string;\n    buttonType?: ButtonTypes;\n    permission?: string;\n}\n\ninterface IProps extends ITitleBarNav {}\n\n/**\n * Implements Navigation item component for header\n */\nexport const TitleBarNavItem = React.forwardRef(function TitleBarNavItem(\n    props: IProps,\n    ref: React.Ref<HTMLAnchorElement>,\n) {\n    const {\n        isActive,\n        to,\n        className,\n        buttonType,\n        linkClassName,\n        linkContentClassName,\n        children,\n        permission,\n        ...passthru\n    } = props;\n\n    const classes = titleBarNavClasses();\n\n    return (\n        <TitleBarListItem className={classNames(className, classes.root, { isActive })}>\n            <SmartLink\n                {...passthru}\n                ref={ref}\n                to={to}\n                className={classNames(\n                    linkClassName,\n                    classes.link,\n                    buttonType ? getButtonStyleFromBaseClass(buttonType) : \"\",\n                )}\n            >\n                <div\n                    className={classNames({\n                        linkContentClassName: true,\n                        [classes.linkActive]: isActive,\n                    })}\n                >\n                    {children}\n                </div>\n            </SmartLink>\n        </TitleBarListItem>\n    );\n});\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\n\nexport const titleBarMegaMenuVariables = useThemeCache((forcedVars?: IThemeVariables) => {\n    const makeThemeVars = variableFactory(\"titleBarMegaMenu\", forcedVars);\n\n    const options = makeThemeVars(\"options\", {});\n\n    const colors = makeThemeVars(\"colors\", {\n        fg: \"#555a62\",\n        bg: \"#fff\",\n    });\n\n    const wrapper = makeThemeVars(\"wrapper\", {\n        shadow: \"0 5px 5px 0 rgba(0, 0, 0, 0.3)\",\n        backgroundColor: colors.bg,\n    });\n\n    const spacing = makeThemeVars(\"spacing\", {\n        menuItemSpacer: styleUnit(10),\n    });\n\n    return {\n        options,\n        wrapper,\n        colors,\n        spacing,\n    };\n});\n\nexport default useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = titleBarMegaMenuVariables();\n    const style = styleFactory(\"titleBarMegaMenu\");\n\n    const wrapper = style(\"wrapper\", {\n        position: \"fixed\",\n        left: 0,\n        right: 0,\n        backgroundColor: vars.wrapper.backgroundColor,\n        boxShadow: vars.wrapper.shadow,\n        overflow: \"hidden\",\n        transition: \"height 200ms\",\n    });\n\n    const container = style(\"container\", {\n        overflowY: \"auto\",\n        maxHeight: `60vh`,\n        display: \"flex\",\n        flexDirection: \"row\",\n        flexWrap: \"wrap\",\n        paddingBottom: 20,\n        ...Mixins.margin({\n            //horizontal: -vars.spacing.menuItemSpacer,\n        }),\n    });\n\n    const menuItem = style(\"menuItem\", {\n        ...Mixins.padding({\n            horizontal: vars.spacing.menuItemSpacer,\n            top: 20,\n        }),\n        flex: 1,\n        flexBasis: 160,\n    });\n\n    const fillerItem = style(\"fillerItem\", {\n        flex: 1,\n        flexBasis: 160,\n    });\n\n    const menuItemTitle = style(\"menuItemTitle\", {\n        display: \"block\",\n        fontWeight: globalVars.fonts.weights.bold,\n        fontSize: styleUnit(globalVars.fonts.size.medium),\n        lineHeight: styleUnit(`${globalVars.fonts.size.medium * 1.25}`),\n        marginBottom: styleUnit(12),\n        color: ColorsUtils.colorOut(vars.colors.fg),\n    });\n\n    const menuItemChild = style(\"menuItemChild\", {\n        fontSize: styleUnit(14),\n        lineHeight: styleUnit(`${globalVars.fonts.size.medium * 1.25}`),\n        marginBottom: styleUnit(12),\n        listStyle: \"none\",\n        ...{\n            a: {\n                color: ColorsUtils.colorOut(vars.colors.fg),\n            },\n\n            \"a:hover\": {\n                color: ColorsUtils.colorOut(globalVars.links.colors.hover),\n            },\n        },\n    });\n\n    return {\n        wrapper,\n        menuItem,\n        fillerItem,\n        container,\n        menuItemTitle,\n        menuItemChild,\n    };\n});\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useCallback, useEffect, useImperativeHandle, useLayoutEffect, useRef, useState } from \"react\";\nimport { INavigationVariableItem } from \"@library/headers/navigationVariables\";\nimport useClasses from \"./TitleBarMegaMenu.styles\";\nimport { useScrollOffset } from \"@library/layout/ScrollOffsetContext\";\nimport Container from \"@library/layout/components/Container\";\nimport { titleBarNavigationVariables } from \"@library/headers/titleBarNavStyles\";\nimport { titleBarVariables } from \"@library/headers/TitleBar.variables\";\nimport { useLastValue, useMeasure } from \"@vanilla/react-utils/src\";\nimport { TabHandler } from \"@vanilla/dom-utils/src\";\nimport { containerVariables } from \"@library/layout/components/containerStyles\";\nimport { Func } from \"mocha\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\n\n/** How much time is elapsed before the menu is hidden, either from loss of focus or mouseout. */\nconst HIDE_TIMEOUT_MS = 250;\n\nexport interface IMegaMenuHandle {\n    focusFirstItem();\n}\n\nexport interface IMegaMenuChildHandle {}\n\ninterface IChildProps {\n    text: string;\n    url: string;\n    className: string;\n    onKeyDown: any;\n}\n\nfunction TitleBarMegaMenuChildImpl(props: IChildProps, ref: React.Ref<IMegaMenuChildHandle>) {\n    const { className, url, text, onKeyDown } = props;\n\n    return (\n        <li className={className}>\n            <SmartLink tabIndex={0} onKeyDown={onKeyDown} to={url}>\n                {text}\n            </SmartLink>\n        </li>\n    );\n}\n\ninterface IProps {\n    expanded?: INavigationVariableItem;\n    leftOffset?: number;\n    menuItem?: HTMLElement;\n    onClose?(): void;\n}\n\nfunction TitleBarMegaMenuImpl(props: IProps, ref: React.Ref<IMegaMenuHandle>) {\n    const { expanded, leftOffset = 0, onClose, menuItem } = props;\n\n    const classes = useClasses();\n\n    const { getCalcedHashOffset } = useScrollOffset();\n    const [isFocusWithin, setIsFocusWithin] = useState(false);\n    const [isMouseWithin, setIsMouseWithin] = useState(false);\n    const [shouldFocusFirstItem, setShouldFocusFirstItem] = useState(false);\n    const [isHidden, setIsHidden] = useState(true);\n\n    const onCloseRef = useRef<(() => void) | undefined>(onClose);\n\n    const isExpanded = expanded && expanded.children?.length;\n    const isActive = isFocusWithin || isMouseWithin;\n\n    const containerRef = useRef<HTMLElement>(null);\n\n    const containerDimensions = useMeasure(containerRef, false, true);\n\n    const menuHeight = containerDimensions.height;\n    const yBounds = getCalcedHashOffset() + menuHeight;\n\n    useEffect(() => {\n        onCloseRef.current = onClose;\n    }, [onClose]);\n\n    useEffect(() => {\n        if (isExpanded) {\n            setIsHidden(false);\n        } else {\n            const timeout = setTimeout(() => {\n                setIsHidden(true);\n            }, 200);\n            return () => clearTimeout(timeout);\n        }\n    }, [isExpanded]);\n\n    useImperativeHandle(ref, () => ({\n        focusFirstItem: () => {\n            setShouldFocusFirstItem(true);\n        },\n    }));\n\n    const focusFirstItem = useCallback(() => {\n        if (shouldFocusFirstItem) {\n            const firstItem = containerRef.current?.querySelector<HTMLElement>(`.${classes.menuItemChild} a`);\n            if (firstItem) {\n                firstItem?.focus();\n                setShouldFocusFirstItem(false);\n            }\n        }\n    }, [shouldFocusFirstItem, classes.menuItemChild]);\n\n    useLayoutEffect(() => {\n        focusFirstItem();\n    }, [focusFirstItem]);\n\n    useEffect(() => {\n        if (!isActive) {\n            const onCloseCallback = onCloseRef.current;\n            const timeout = setTimeout(() => {\n                if (onCloseCallback) onCloseCallback();\n            }, HIDE_TIMEOUT_MS);\n            return () => clearTimeout(timeout);\n        }\n    }, [isActive]);\n\n    useEffect(() => {\n        function onMouseMove(event: MouseEvent) {\n            setIsMouseWithin(event.clientY <= yBounds);\n        }\n        window.addEventListener(\"mousemove\", onMouseMove);\n        return () => {\n            window.removeEventListener(\"mousemove\", onMouseMove);\n        };\n    }, [yBounds]);\n\n    useEffect(() => {\n        // Reset mouse state whenever focus changes so we\n        // don't rely on the pointer when using the keyboard.\n        setIsMouseWithin(false);\n    }, [expanded]);\n\n    function handleKeyPress(event: React.KeyboardEvent) {\n        if (containerRef.current === null || document.activeElement === null) {\n            return;\n        }\n\n        const tabHandler = new TabHandler(containerRef.current);\n        const target = event.target as HTMLElement;\n        const nextElement = tabHandler.getNext(target, false, false);\n        const prevElement = tabHandler.getNext(target, true, false);\n        const parent = target.closest('div[class^=\"titleBarMegaMenu-menuItem\"]');\n        const nextParentSibling = parent?.nextSibling as HTMLElement;\n        const previousParentSibling = parent?.previousSibling as HTMLElement;\n\n        switch (event.key) {\n            case \"Escape\": {\n                event.preventDefault();\n                menuItem?.focus();\n                setIsMouseWithin(false);\n                break;\n            }\n\n            case \"ArrowDown\": {\n                event.preventDefault();\n                nextElement?.focus();\n                setIsMouseWithin(false);\n                break;\n            }\n\n            case \"ArrowUp\": {\n                event.preventDefault();\n\n                if (!prevElement) {\n                    menuItem?.focus();\n                } else {\n                    prevElement?.focus();\n                }\n\n                break;\n            }\n\n            case \"ArrowRight\": {\n                if (!nextParentSibling) {\n                    return;\n                }\n                let parentSiblingFirstChild = nextParentSibling.querySelector(\"li a\") as HTMLElement;\n                parentSiblingFirstChild?.focus();\n                break;\n            }\n\n            case \"ArrowLeft\": {\n                if (!previousParentSibling) {\n                    return;\n                }\n                let parentSiblingFirstChild = previousParentSibling.querySelector(\"li a\") as HTMLElement;\n                parentSiblingFirstChild?.focus();\n                break;\n            }\n\n            case \" \": {\n                event.preventDefault();\n                (event.target as HTMLElement).click();\n            }\n        }\n    }\n\n    return (\n        <div\n            className={classes.wrapper}\n            style={{\n                top: getCalcedHashOffset(),\n                height: isExpanded ? menuHeight : 0,\n                display: isHidden ? \"none\" : undefined,\n            }}\n            onFocus={() => setIsFocusWithin(true)}\n            onBlur={() => setIsFocusWithin(false)}\n        >\n            <Container\n                ref={(ref) => {\n                    (containerRef as any).current = ref;\n                    focusFirstItem();\n                }}\n                style={{ paddingLeft: leftOffset - containerDimensions.left }}\n                className={classes.container}\n                fullGutter\n            >\n                {expanded?.children?.map((item, key) => (\n                    <div key={key} className={classes.menuItem}>\n                        {!item.children?.length ? (\n                            <TitleBarMegaMenuChild\n                                className={classes.menuItemChild}\n                                url={item.url}\n                                text={item.name}\n                                key={key}\n                                onKeyDown={(e) => handleKeyPress(e)}\n                            />\n                        ) : (\n                            <span className={classes.menuItemTitle}>{item.name}</span>\n                        )}\n\n                        {item.children && (\n                            <ul>\n                                {item.children.map((child, key) => (\n                                    <TitleBarMegaMenuChild\n                                        className={classes.menuItemChild}\n                                        url={child.url}\n                                        text={child.name}\n                                        key={key}\n                                        onKeyDown={(e) => handleKeyPress(e)}\n                                    />\n                                ))}\n                            </ul>\n                        )}\n                    </div>\n                ))}\n                {/* These items ensure that empty space in the row is filled */}\n                {[...Array(6).keys()].map((key) => (\n                    <span key={key} className={classes.fillerItem} />\n                ))}\n            </Container>\n        </div>\n    );\n}\nexport const TitleBarMegaMenuChild = React.forwardRef(TitleBarMegaMenuChildImpl);\nexport const TitleBarMegaMenu = React.forwardRef(TitleBarMegaMenuImpl);\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useRef, useState } from \"react\";\nimport titleBarNavClasses from \"@library/headers/titleBarNavStyles\";\nimport classNames from \"classnames\";\nimport { TitleBarNavItem } from \"@library/headers/mebox/pieces/TitleBarNavItem\";\nimport Permission from \"@library/features/users/Permission\";\nimport { INavigationVariableItem, navigationVariables } from \"@library/headers/navigationVariables\";\nimport FlexSpacer from \"@library/layout/FlexSpacer\";\nimport { IMegaMenuHandle, TitleBarMegaMenu } from \"@library/headers/TitleBarMegaMenu\";\nimport { formatUrl, siteUrl } from \"@library/utility/appUtils\";\nimport { useLocation } from \"react-router\";\nimport { useMeasure } from \"@vanilla/react-utils\";\nimport { useScrollOffset } from \"@library/layout/ScrollOffsetContext\";\n\nexport interface ITitleBarNavProps {\n    className?: string;\n    linkClassName?: string;\n    listClassName?: string;\n    children?: React.ReactNode;\n    wrapper?: JSX.Element;\n    excludeExtraNavItems?: boolean;\n    containerRef?: React.RefObject<HTMLElement | null>;\n    isCentered?: boolean;\n    afterNode?: React.ReactNode;\n    forceMenuOpen?: INavigationVariableItem; // For storybook, will force nested menu open\n}\n\n/**\n * Implements Navigation component for header\n */\nexport default function TitleBarNav(props: ITitleBarNavProps) {\n    const { navigationItems } = navigationVariables();\n\n    const location = useLocation();\n\n    const [menuItem, setMenuItem] = useState<HTMLElement>();\n    const [expanded, setExpanded] = useState<INavigationVariableItem>();\n\n    const megaMenuRef = useRef<IMegaMenuHandle>(null);\n    const firstItemRef = useRef<HTMLAnchorElement>();\n\n    const active = expanded && expanded.children?.length && expanded;\n\n    const firstItemDimensions = useMeasure(firstItemRef as any);\n\n    const classes = titleBarNavClasses();\n    const dataLength = Object.keys(navigationItems).length;\n    const content = navigationItems.map((item, key) => {\n        if (item.isHidden) {\n            return <React.Fragment key={key}></React.Fragment>;\n        }\n\n        function onActive(element) {\n            setExpanded(item);\n            setMenuItem(element);\n        }\n\n        function onFocus(element) {\n            if (expanded !== item) setExpanded(undefined);\n        }\n\n        function onKeyDown(event: React.KeyboardEvent<HTMLElement>) {\n            const target = event.target as HTMLElement;\n            const listItem = target.closest(\"li\");\n            const nextSibling = listItem?.nextSibling as HTMLElement;\n            const previousSibling = listItem?.previousSibling as HTMLElement;\n            switch (event.key) {\n                case \"Enter\":\n                case \" \":\n                case \"ArrowDown\":\n                    event.preventDefault();\n                    onActive(event.target);\n                    megaMenuRef.current?.focusFirstItem();\n                    break;\n                case \"ArrowUp\":\n                    event.preventDefault();\n                    setExpanded(undefined);\n                    break;\n                case \"ArrowRight\":\n                    event.preventDefault();\n                    nextSibling?.querySelector<HTMLAnchorElement>(\"a\")?.focus();\n                    break;\n                case \"ArrowLeft\":\n                    event.preventDefault();\n                    previousSibling?.querySelector<HTMLAnchorElement>(\"a\")?.focus();\n                    break;\n            }\n        }\n\n        /**\n         * Checks if we're on the current page\n         * Note that won't work with non-canonical URLHeaderLogo.tsx\n         */\n        const isCurrentPage = (): boolean => {\n            if (location && location.pathname) {\n                return siteUrl(window.location.pathname) === formatUrl(item.url, true);\n            } else {\n                return false;\n            }\n        };\n\n        const component = (\n            <TitleBarNavItem\n                to={item.url}\n                ref={(ref) => {\n                    if (key === 0) firstItemRef.current = ref!;\n                }}\n                isActive={active ? active === item : isCurrentPage()}\n                className={classNames({\n                    [classes.lastItem]: dataLength === key,\n                    [classes.firstItem]: key === 0,\n                })}\n                onMouseEnter={(event) => onActive(event.target)}\n                onFocus={(event) => onFocus(event.target)}\n                onKeyDown={onKeyDown}\n                linkClassName={props.linkClassName}\n                key={key}\n            >\n                {item.name}\n            </TitleBarNavItem>\n        );\n\n        if (item.permission) {\n            return (\n                <Permission key={key} permission={item.permission}>\n                    {component}\n                </Permission>\n            );\n        } else {\n            return component;\n        }\n    });\n\n    return (\n        <>\n            {props.isCentered && <FlexSpacer actualSpacer />}\n            <div\n                ref={props.containerRef as any}\n                className={classNames(\n                    \"headerNavigation\",\n                    props.className,\n                    classes.navigation,\n                    props.isCentered && classes.navigationCentered,\n                )}\n            >\n                <ul className={classNames(props.listClassName, classes.items)}>\n                    {props.children ? props.children : content}\n                    {props.excludeExtraNavItems ??\n                        TitleBarNav.extraNavItems.map((ComponentClass, i) => {\n                            return <ComponentClass key={i} />;\n                        })}\n                </ul>\n                {props.afterNode}\n            </div>\n            <TitleBarMegaMenu\n                ref={megaMenuRef}\n                leftOffset={firstItemDimensions.left}\n                menuItem={menuItem}\n                expanded={expanded}\n                onClose={() => setExpanded(undefined)}\n            />\n        </>\n    );\n}\n\n/**\n * Additional items to render in the navigation.\n */\nTitleBarNav.extraNavItems = [] as React.ComponentType[];\n\n/**\n * Add some extra class.\n *\n * @param componentClass A react component class/function\n */\nTitleBarNav.addNavItem = (componentClass: React.ComponentType) => {\n    TitleBarNav.extraNavItems.push(componentClass);\n};\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useBannerContext } from \"@library/banner/BannerContext\";\nimport { isUserGuest, useUsersState } from \"@library/features/users/userModel\";\nimport Hamburger from \"@library/flyouts/Hamburger\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport MeBox from \"@library/headers/mebox/MeBox\";\nimport CompactMeBox from \"@library/headers/mebox/pieces/CompactMeBox\";\nimport CompactSearch from \"@library/headers/mebox/pieces/CompactSearch\";\nimport HeaderLogo from \"@library/headers/mebox/pieces/HeaderLogo\";\nimport { meBoxClasses } from \"@library/headers/mebox/pieces/meBoxStyles\";\nimport TitleBarNav from \"@library/headers/mebox/pieces/TitleBarNav\";\nimport { TitleBarNavItem } from \"@library/headers/mebox/pieces/TitleBarNavItem\";\nimport { titleBarClasses, titleBarLogoClasses } from \"@library/headers/titleBarStyles\";\nimport { titleBarVariables } from \"@library/headers/TitleBar.variables\";\nimport { SignInIcon } from \"@library/icons/common\";\nimport Container from \"@library/layout/components/Container\";\nimport ConditionalWrap from \"@library/layout/ConditionalWrap\";\nimport FlexSpacer from \"@library/layout/FlexSpacer\";\nimport { HashOffsetReporter, useScrollOffset } from \"@library/layout/ScrollOffsetContext\";\nimport { TitleBarDevices, useTitleBarDevice } from \"@library/layout/TitleBarContext\";\nimport BackLink from \"@library/routing/links/BackLink\";\nimport SmartLink from \"@library/routing/links/SmartLink\";\nimport { LogoType } from \"@library/theming/ThemeLogo\";\nimport { t } from \"@library/utility/appUtils\";\nimport classNames from \"classnames\";\nimport React, { useDebugValue, useEffect, useRef, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { animated, useSpring } from \"react-spring\";\nimport { useCollisionDetector } from \"@vanilla/react-utils\";\nimport { useSelector } from \"react-redux\";\nimport { ICoreStoreState } from \"@library/redux/reducerRegistry\";\nimport { SearchPageRoute } from \"@library/search/SearchPageRoute\";\nimport { useRegisterLink, useSignInLink } from \"@library/contexts/EntryLinkContext\";\nimport titleBarNavClasses from \"@library/headers/titleBarNavStyles\";\nimport { ISearchScopeNoCompact } from \"@library/features/search/SearchScopeContext\";\nimport { useMeasure } from \"@vanilla/react-utils/src\";\nimport { SkipNavLink, SkipNavContent } from \"@reach/skip-nav\";\nimport { INavigationVariableItem } from \"@library/headers/navigationVariables\";\nimport { LogoAlignment } from \"@library/headers/LogoAlignment\";\n\ninterface IProps {\n    container?: HTMLElement | null; // Element containing header. Should be the default most if not all of the time.\n    wrapperComponent?: React.ComponentType<{ children: React.ReactNode }>;\n    className?: string;\n    title?: string; // Needed for mobile flyouts\n    mobileDropDownContent?: React.ReactNode; // Needed for mobile flyouts, does NOT work with hamburger\n    isFixed?: boolean;\n    useMobileBackButton?: boolean;\n    overwriteLogo?: string; // overwrite logo, used for storybook\n    hasSubNav?: boolean;\n    backgroundColorForMobileDropdown?: boolean; // If the left panel has a background color, we also need it here when the mobile menu's open.\n    extraBurgerNavigation?: React.ReactNode;\n    forceVisibility?: boolean; // For storybook, as it will disable closing the search\n    scope?: ISearchScopeNoCompact;\n    forceMenuOpen?: INavigationVariableItem; // For storybook, will force nested menu open\n}\n\n/**\n * Implements Vanilla Header component. Note that this component uses a react portal.\n * That means the exact location in the page is not that important, since it will\n * render in a specific div in the default-master.\n */\nexport default function TitleBar(_props: IProps) {\n    const props = {\n        mobileDropDownContent: null,\n        isFixed: true,\n        useMobileBackButton: true,\n        forceVisibility: false,\n        ..._props,\n    };\n\n    const containerOptions = titleBarVariables().titleBarContainer;\n\n    const { bgProps, bg2Props, logoProps } = useScrollTransition();\n    const { collisionSourceRef, hBoundary1Ref, hBoundary2Ref, hasCollision } = useCollisionDetector();\n\n    const device = useTitleBarDevice();\n    const [isSearchOpen, setIsSearchOpen] = useState(props.forceVisibility);\n    const [isShowingSuggestions, setIsShowingSuggestions] = useState(false);\n    const isCompact = hasCollision || device === TitleBarDevices.COMPACT;\n    const showMobileDropDown = isCompact && !isSearchOpen && !!props.title;\n    const classesMeBox = meBoxClasses();\n    const { currentUser } = useUsersState();\n    const isGuest = isUserGuest(currentUser.data);\n    const vars = titleBarVariables();\n    const classes = titleBarClasses();\n    const logoClasses = titleBarLogoClasses();\n    const showSubNav = device === TitleBarDevices.COMPACT && props.hasSubNav;\n    const meBox = isCompact ? !isSearchOpen && <MobileMeBox /> : <DesktopMeBox />;\n    const isMobileLogoCentered = vars.mobileLogo.justifyContent === LogoAlignment.CENTER;\n    const isDesktopLogoCentered = vars.logo.justifyContent === LogoAlignment.CENTER;\n    // When previewing and updating the colors live, there can be flickering of some components.\n    // As a result we want to hide them on first render for these cases.\n\n    const isPreviewing = useSelector((state: ICoreStoreState) => state.theme.forcedVariables);\n    const [isPreviewFirstRender, setIsPreviewFirstRender] = useState(!!isPreviewing);\n    useEffect(() => {\n        if (isPreviewFirstRender) {\n            setIsPreviewFirstRender(false);\n        }\n    }, [isPreviewFirstRender]);\n\n    let headerContent = (\n        <>\n            <HashOffsetReporter className={classes.container}>\n                <div className={classes.bgContainer}>\n                    <animated.div\n                        {...bgProps}\n                        className={classNames(classes.bg1, { [classes.swoop]: vars.swoop.amount > 0 })}\n                    />\n                    {!isPreviewFirstRender && (\n                        <animated.div\n                            {...bg2Props}\n                            className={classNames(classes.bg2, { [classes.swoop]: vars.swoop.amount > 0 })}\n                        >\n                            {/* Cannot be a background image there will be flickering. */}\n                            {vars.colors.bgImage && (\n                                <img\n                                    src={vars.colors.bgImage}\n                                    className={classes.bgImage}\n                                    alt={\"titleBarImage\"}\n                                    aria-hidden={true}\n                                />\n                            )}\n                            {vars.overlay && <div className={classes.overlay} />}\n                        </animated.div>\n                    )}\n                </div>\n                <Container\n                    fullGutter\n                    gutterSpacing={containerOptions.gutterSpacing}\n                    maxWidth={containerOptions.maxWidth}\n                >\n                    <div className={classes.titleBarContainer}>\n                        <div className={classNames(classes.bar, { isHome: showSubNav })}>\n                            {isCompact &&\n                                (props.useMobileBackButton ? (\n                                    <BackLink\n                                        hideIfNoHistory={true}\n                                        className={classes.leftFlexBasis}\n                                        linkClassName={classes.button}\n                                    />\n                                ) : (\n                                    <FlexSpacer className=\"pageHeading-leftSpacer\" />\n                                ))}\n                            {!isCompact && (isDesktopLogoCentered ? !isSearchOpen : true) && (\n                                <animated.div className={classNames(classes.logoAnimationWrap)} {...logoProps}>\n                                    <span\n                                        className={classNames(\"logoAlignment\", {\n                                            [classes.logoCenterer]: isDesktopLogoCentered,\n                                            [classes.logoLeftAligned]: !isDesktopLogoCentered,\n                                        })}\n                                    >\n                                        <>\n                                            <SkipNavLink className={classes.skipNav}>\n                                                {t(\"Skip to content\")}\n                                            </SkipNavLink>\n\n                                            <HeaderLogo\n                                                className={classNames(\"titleBar-logoContainer\", classes.logoContainer)}\n                                                logoClassName=\"titleBar-logo\"\n                                                logoType={LogoType.DESKTOP}\n                                                overwriteLogo={props.overwriteLogo}\n                                            />\n                                        </>\n                                    </span>\n                                </animated.div>\n                            )}\n                            {!isCompact && !isDesktopLogoCentered && (\n                                <div ref={hBoundary1Ref} style={{ width: 1, height: 1 }} />\n                            )}\n                            {!isSearchOpen && !isCompact && (\n                                <TitleBarNav\n                                    forceMenuOpen={props.forceMenuOpen}\n                                    isCentered={vars.navAlignment.alignment === \"center\"}\n                                    containerRef={\n                                        vars.navAlignment.alignment === \"center\" && !isDesktopLogoCentered\n                                            ? collisionSourceRef\n                                            : undefined\n                                    }\n                                    className={classes.nav}\n                                    linkClassName={classes.topElement}\n                                    afterNode={\n                                        !isCompact &&\n                                        isDesktopLogoCentered && (\n                                            <div ref={hBoundary2Ref} style={{ width: 1, height: 20 }} />\n                                        )\n                                    }\n                                />\n                            )}\n                            {isCompact && (\n                                <>\n                                    {!isSearchOpen && (\n                                        <>\n                                            <Hamburger\n                                                className={classes.hamburger}\n                                                extraNavTop={props.extraBurgerNavigation}\n                                                showCloseIcon={false}\n                                            />\n                                            {isMobileLogoCentered && <FlexSpacer actualSpacer />}\n                                            <div\n                                                className={classNames(\n                                                    isMobileLogoCentered && classes.logoCenterer,\n                                                    logoClasses.mobileLogo,\n                                                )}\n                                            >\n                                                <animated.span className={classes.logoAnimationWrap} {...logoProps}>\n                                                    <HeaderLogo\n                                                        className={classes.logoContainer}\n                                                        logoClassName=\"titleBar-logo\"\n                                                        logoType={LogoType.MOBILE}\n                                                        overwriteLogo={props.overwriteLogo}\n                                                    />\n                                                </animated.span>\n                                            </div>\n                                        </>\n                                    )}\n                                </>\n                            )}\n                            {!isCompact && !isDesktopLogoCentered && (\n                                <div ref={hBoundary2Ref} style={{ width: 1, height: 1 }} />\n                            )}\n                            <ConditionalWrap className={classes.rightFlexBasis} condition={!!showMobileDropDown}>\n                                {!isSearchOpen && (\n                                    <div className={classes.extraMeBoxIcons}>\n                                        {TitleBar.extraMeBoxComponents.map((ComponentName, index) => {\n                                            return <ComponentName key={index} />;\n                                        })}\n                                    </div>\n                                )}\n                                <CompactSearch\n                                    className={classNames(classes.compactSearch, {\n                                        isCentered: isSearchOpen,\n                                    })}\n                                    focusOnMount\n                                    placeholder={t(\"Search\")}\n                                    open={isSearchOpen}\n                                    onSearchButtonClick={() => {\n                                        SearchPageRoute.preload();\n                                        setIsSearchOpen(true);\n                                    }}\n                                    onCloseSearch={() => {\n                                        setIsSearchOpen(props.forceVisibility); // will be false if not used\n                                    }}\n                                    cancelButtonClassName={classNames(\n                                        classes.topElement,\n                                        classes.searchCancel,\n                                        titleBarNavClasses().link,\n                                    )}\n                                    cancelContentClassName=\"meBox-buttonContent\"\n                                    buttonClass={classNames(classes.button, {\n                                        [classes.buttonOffset]: !isCompact && isGuest,\n                                    })}\n                                    showingSuggestions={isShowingSuggestions}\n                                    onOpenSuggestions={() => setIsShowingSuggestions(true)}\n                                    onCloseSuggestions={() => setIsShowingSuggestions(false)}\n                                    buttonContentClassName={classNames(\n                                        classesMeBox.buttonContent,\n                                        \"meBox-buttonContent\",\n                                    )}\n                                    clearButtonClass={classes.clearButtonClass}\n                                    scope={\n                                        props.scope\n                                            ? {\n                                                  ...props.scope,\n                                              }\n                                            : undefined\n                                    }\n                                    searchCloseOverwrites={{\n                                        source: \"fromTitleBar\",\n                                        ...vars.stateColors,\n                                    }}\n                                    overwriteSearchBar={{\n                                        compact: isCompact,\n                                    }}\n                                />\n                                {meBox}\n                            </ConditionalWrap>\n                        </div>\n                    </div>\n                </Container>\n            </HashOffsetReporter>\n            <SkipNavContent />\n        </>\n    );\n\n    const { resetScrollOffset, setScrollOffset, offsetClass } = useScrollOffset();\n    const containerElement = props.container !== null ? props.container || document.getElementById(\"titleBar\") : null;\n    if (props.wrapperComponent) {\n        headerContent = <props.wrapperComponent>{headerContent}</props.wrapperComponent>;\n    }\n\n    const containerClasses = classNames(\n        \"titleBar\",\n        classes.root,\n        props.className,\n        { [classes.isSticky]: props.isFixed },\n        offsetClass,\n    );\n    useEffect(() => {\n        setScrollOffset(titleBarVariables().sizing.height);\n        containerElement?.setAttribute(\"class\", containerClasses);\n\n        return () => {\n            resetScrollOffset();\n        };\n    }, [setScrollOffset, resetScrollOffset, containerElement, containerClasses]);\n\n    if (containerElement) {\n        return ReactDOM.createPortal(headerContent, containerElement);\n    } else {\n        return <header className={containerClasses}>{headerContent}</header>;\n    }\n}\n\n/**\n * Hook for the scroll transition of the titleBar.\n *\n * The following should happen on scroll if\n * - There is a splash.\n * - We are configured to overlay the splash.\n *\n * - Starts at transparent.\n * - Transitions the background color in over the height of the splash.\n * - Once we pass the splash, transition in the bg image of the splash.\n */\nfunction useScrollTransition() {\n    const bgRef = useRef<HTMLDivElement | null>(null);\n    const bg2Ref = useRef<HTMLDivElement | null>(null);\n    const logoRef = useRef<HTMLDivElement | null>(null);\n    const { bannerExists, bannerRect } = useBannerContext();\n    const [scrollPos, setScrollPos] = useState(0);\n    const fullBleedOptions = titleBarVariables().fullBleed;\n\n    const { doubleLogoStrategy } = titleBarVariables().logo;\n    const shouldOverlay = fullBleedOptions.enabled && bannerExists;\n    const { topOffset } = useScrollOffset();\n\n    // Scroll handler to pass to the form element.\n    useEffect(() => {\n        const handler = () => {\n            requestAnimationFrame(() => {\n                setScrollPos(Math.max(0, window.scrollY));\n            });\n        };\n        if (shouldOverlay || doubleLogoStrategy === \"fade-in\") {\n            window.addEventListener(\"scroll\", handler);\n            return () => {\n                window.removeEventListener(\"scroll\", handler);\n            };\n        }\n    }, [doubleLogoStrategy, setScrollPos, shouldOverlay]);\n\n    // Calculate some dimensions.\n    let bgStart = 0;\n    let bgEnd = 0;\n    let bg2Start = 0;\n    let bg2End = 0;\n    if (bannerExists && bannerRect && bg2Ref.current) {\n        const bannerEnd = bannerRect.bottom;\n        const titleBarHeight = bg2Ref.current.getBoundingClientRect().height;\n        bgStart = bannerRect.top;\n        bgEnd = bgStart + titleBarHeight;\n        bg2Start = bannerEnd - titleBarHeight * 2;\n        bg2End = bannerEnd - titleBarHeight;\n    }\n\n    const clientHeaderStart = topOffset === 0 ? -1 : 0; // Fix to ensure an empty topOffset starts us at 100% opacity.\n    const clientHeaderEnd = topOffset;\n\n    const { bgSpring, bg2Spring, clientHeaderSpring } = useSpring({\n        bgSpring: Math.max(bgStart, Math.min(bgEnd, scrollPos)),\n        bg2Spring: Math.max(bg2Start, Math.min(bg2End, scrollPos)),\n        clientHeaderSpring: Math.max(clientHeaderStart, Math.min(clientHeaderEnd, scrollPos)),\n        tension: 100,\n    });\n\n    // Fades in first.\n    const bgOpacity = bgSpring.interpolate({\n        range: [bgStart, bgEnd],\n        output: [fullBleedOptions.startingOpacity, fullBleedOptions.endingOpacity],\n    });\n\n    // Fades in second.\n    const bg2Opacity = bg2Spring.interpolate({\n        range: [bg2Start, bg2End],\n        output: [0, 1],\n    });\n\n    const logoOpacity = clientHeaderSpring.interpolate({\n        range: [clientHeaderStart, clientHeaderEnd],\n        output: [0, 1],\n    });\n\n    const bgProps = shouldOverlay\n        ? {\n              style: { opacity: bgOpacity },\n              ref: bgRef,\n          }\n        : {};\n\n    const bg2Props = shouldOverlay\n        ? {\n              style: { opacity: bg2Opacity },\n              ref: bg2Ref,\n          }\n        : {};\n\n    const actualOpacity = logoOpacity.payload?.[0]?.value ?? 0;\n    const logoProps =\n        doubleLogoStrategy === \"fade-in\"\n            ? {\n                  style: {\n                      opacity: logoOpacity,\n                      pointerEvents: actualOpacity <= 0.15 ? \"none\" : \"initial\",\n                  },\n                  ref: logoRef,\n              }\n            : {};\n\n    useDebugValue({\n        bgProps,\n        bg2Props,\n        logoProps,\n    });\n    return {\n        bgProps,\n        bg2Props,\n        logoProps,\n    };\n}\n\nfunction DesktopMeBox() {\n    const classes = titleBarClasses();\n    const { currentUser } = useUsersState();\n    const isGuest = isUserGuest(currentUser.data);\n    const registerLink = useRegisterLink();\n    const signinLink = useSignInLink();\n\n    if (isGuest) {\n        return (\n            <TitleBarNav className={classNames(\"titleBar-nav titleBar-guestNav\", classes.nav)}>\n                <TitleBarNavItem\n                    buttonType={ButtonTypes.TRANSPARENT}\n                    linkClassName={classNames(classes.signIn, classes.guestButton)}\n                    to={signinLink}\n                >\n                    {t(\"Sign In\")}\n                </TitleBarNavItem>\n                <TitleBarNavItem\n                    buttonType={ButtonTypes.TRANSLUCID}\n                    linkClassName={classNames(classes.register, classes.guestButton)}\n                    to={registerLink}\n                >\n                    {t(\"Register\")}\n                </TitleBarNavItem>\n            </TitleBarNav>\n        );\n    } else {\n        return (\n            <MeBox\n                currentUser={currentUser}\n                className={classNames(\"titleBar-meBox\", classes.meBox)}\n                buttonClassName={classes.button}\n                contentClassName={classNames(\"titleBar-dropDownContents\", classes.dropDownContents)}\n            />\n        );\n    }\n}\n\n// For backwards compatibility\nexport { TitleBar };\n\nfunction MobileMeBox() {\n    const { currentUser } = useUsersState();\n    const isGuest = isUserGuest(currentUser.data);\n    const classes = titleBarClasses();\n    const signinLink = useSignInLink();\n    if (isGuest) {\n        return (\n            <SmartLink\n                className={classNames(classes.centeredButton, classes.button, classes.signInIconOffset)}\n                to={signinLink}\n            >\n                <SignInIcon className={\"titleBar-signInIcon\"} />\n            </SmartLink>\n        );\n    } else {\n        return <CompactMeBox className={classNames(\"titleBar-button\", classes.button)} currentUser={currentUser} />;\n    }\n}\n\n/** Hold the extra mebox components before rendering. */\nTitleBar.extraMeBoxComponents = [] as React.ComponentType[];\n\n/**\n * Register an extra component to be rendered before the mebox.\n * This will only affect larger screen sizes.\n *\n * @param component The component class to be render.\n */\nTitleBar.registerBeforeMeBox = (component: React.ComponentType) => {\n    TitleBar.extraMeBoxComponents.pop();\n    TitleBar.extraMeBoxComponents.push(component);\n};\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { IBaseEmbedProps } from \"@library/embeddedContent/embedService\";\nimport { EMBED_FOCUS_CLASS } from \"@library/embeddedContent/embedConstants\";\nimport { useEmbedContext } from \"@library/embeddedContent/IEmbedContext\";\nimport classNames from \"classnames\";\nimport React, { useRef, useState } from \"react\";\nimport { ImageEmbedModal } from \"@rich-editor/editor/pieces/ImageEmbedModal\";\nimport { EmbedContainer } from \"@library/embeddedContent/components/EmbedContainer\";\nimport { EmbedContainerSize } from \"@library/embeddedContent/components/EmbedContainerSize\";\nimport { EmbedContent } from \"@library/embeddedContent/components/EmbedContent\";\nimport { AccessibleImageMenuIcon } from \"@library/icons/common\";\nimport { t } from \"@vanilla/i18n/src\";\nimport ScreenReaderContent from \"@library/layout/ScreenReaderContent\";\nimport { accessibleLabel } from \"@library/utility/appUtils\";\nimport { EmbedDropdown } from \"@library/embeddedContent/components/EmbedDropdown\";\nimport {\n    AlignCenterIcon,\n    FloatLeftIcon,\n    FloatRightIcon,\n    ResizeLargeIcon,\n    ResizeMediumIcon,\n    ResizeSmallIcon,\n} from \"@library/icons/editorIcons\";\nimport { EmbedButton } from \"@library/embeddedContent/components/EmbedButton\";\nimport { useUniqueID } from \"@library/utility/idUtils\";\ninterface IProps extends IBaseEmbedProps {\n    type: string; // Mime type.\n    size: number;\n    dateInserted: string;\n    name: string;\n    width?: number;\n    height?: number;\n    displaySize?: \"small\" | \"medium\" | \"large\";\n    float?: \"left\" | \"right\" | \"none\";\n}\n\n/**\n * An embed class for quoted user content on the same site.\n */\nexport function ImageEmbed(props: IProps) {\n    const { displaySize = \"large\", float = \"none\", embedType } = props;\n    const contentRef = useRef<HTMLDivElement>(null);\n    const [isOpen, setIsOpen] = useState(false);\n    const { descriptionID } = useEmbedContext();\n\n    function setValue(value) {\n        if (props.syncBackEmbedValue) props.syncBackEmbedValue(value);\n    }\n\n    const floatOptions = {\n        left: { icon: <FloatLeftIcon />, label: t(\"Float Left\") },\n        none: { icon: <AlignCenterIcon />, label: t(\"Centered\") },\n        right: { icon: <FloatRightIcon />, label: t(\"Float Right\") },\n    };\n\n    const displayOptions = {\n        small: { icon: <ResizeSmallIcon />, label: t(\"Small\") },\n        medium: { icon: <ResizeMediumIcon />, label: t(\"Medium\") },\n        large: { icon: <ResizeLargeIcon />, label: t(\"Large\") },\n    };\n\n    return (\n        <EmbedContainer\n            ref={contentRef}\n            size={EmbedContainerSize.FULL_WIDTH}\n            className={classNames(\"embedImage\", `display-${displaySize}`, `float-${float}`)}\n        >\n            <EmbedContent\n                type={embedType}\n                embedActions={\n                    <>\n                        <EmbedDropdown\n                            name=\"placement\"\n                            value={float}\n                            label={floatOptions[float].label}\n                            Icon={() => floatOptions[float].icon}\n                        >\n                            {Object.entries(floatOptions).map(([value, option]) => (\n                                <EmbedDropdown.Option\n                                    key={value}\n                                    Icon={() => option.icon}\n                                    value={value}\n                                    label={option.label}\n                                    onClick={() =>\n                                        setValue({\n                                            float: value,\n                                            displaySize:\n                                                displaySize === \"large\" && value !== \"none\" ? \"medium\" : displaySize,\n                                        })\n                                    }\n                                />\n                            ))}\n                        </EmbedDropdown>\n                        <EmbedDropdown\n                            name=\"displaySize\"\n                            value={displaySize}\n                            label={displayOptions[displaySize].label}\n                            Icon={() => displayOptions[displaySize].icon}\n                        >\n                            {Object.entries(displayOptions).map(([value, option]) => (\n                                <EmbedDropdown.Option\n                                    key={value}\n                                    Icon={() => option.icon}\n                                    value={value}\n                                    label={option.label}\n                                    onClick={() =>\n                                        setValue({\n                                            displaySize: value,\n                                            float: float !== \"none\" && value === \"large\" ? \"none\" : float,\n                                        })\n                                    }\n                                />\n                            ))}\n                        </EmbedDropdown>\n                        <EmbedButton onClick={() => setIsOpen(true)}>\n                            <ScreenReaderContent>{t(\"Accessibility\")}</ScreenReaderContent>\n                            <AccessibleImageMenuIcon />\n                        </EmbedButton>\n                    </>\n                }\n            >\n                <div className=\"embedImage-link\">\n                    <img\n                        aria-describedby={descriptionID}\n                        className={classNames(\"embedImage-img\", EMBED_FOCUS_CLASS)}\n                        src={props.url}\n                        alt={accessibleLabel(t(`User: \"%s\"`), [props.name])}\n                        tabIndex={props.inEditor ? -1 : undefined}\n                    />\n                </div>\n            </EmbedContent>\n            <ImageEmbedModal\n                isVisible={isOpen}\n                onSave={(newValue) => {\n                    setValue({\n                        name: newValue.alt,\n                    });\n                    props.selectSelf && props.selectSelf();\n                }}\n                initialAlt={props.name}\n                onClose={() => {\n                    setIsOpen(false);\n                    setImmediate(() => {\n                        props.selectSelf?.();\n                    });\n                }}\n            />\n        </EmbedContainer>\n    );\n}\n"],"sourceRoot":""}