{"version":3,"sources":["webpack://vanilla-forum/./packages/vanilla-utils/src/fileUtils.ts","webpack://vanilla-forum/./packages/vanilla-utils/src/mathUtils.ts","webpack://vanilla-forum/./packages/vanilla-utils/src/stringUtils.ts","webpack://vanilla-forum/./packages/vanilla-utils/src/systemUtils.ts","webpack://vanilla-forum/./packages/vanilla-utils/src/typeUtils.ts","webpack://vanilla-forum/./node_modules/moment/locale sync en","webpack://vanilla-forum/./plugins/rich-editor/src/scripts/quill/components/blockQuoteStyles.ts","webpack://vanilla-forum/./node_modules/webfontloader/webfontloader.js","webpack://vanilla-forum/./plugins/rich-editor/src/scripts/editor/pieces/EditorEventWall.tsx","webpack://vanilla-forum/./plugins/rich-editor/src/scripts/editor/pieces/embedMenuStyles.ts","webpack://vanilla-forum/./plugins/rich-editor/src/scripts/editor/pieces/EmbedMenu.tsx","webpack://vanilla-forum/./packages/vanilla-i18n/src/localeStore.ts","webpack://vanilla-forum/./packages/vanilla-i18n/src/LocaleProvider.tsx","webpack://vanilla-forum/./packages/vanilla-i18n/src/translationStore.ts","webpack://vanilla-forum/./packages/vanilla-i18n/src/ContentTranslator.tsx","webpack://vanilla-forum/./packages/vanilla-i18n/src/ContentTranslationProvider.tsx","webpack://vanilla-forum/./packages/vanilla-dom-utils/src/domData.ts","webpack://vanilla-forum/./packages/vanilla-dom-utils/src/emoji.ts","webpack://vanilla-forum/./packages/vanilla-dom-utils/src/EscapeListener.ts","webpack://vanilla-forum/./packages/vanilla-dom-utils/src/events.ts","webpack://vanilla-forum/./packages/vanilla-dom-utils/src/FocusWatcher.ts","webpack://vanilla-forum/./packages/vanilla-dom-utils/src/sanitization.ts","webpack://vanilla-forum/./packages/vanilla-dom-utils/src/scripts.ts","webpack://vanilla-forum/./packages/vanilla-dom-utils/src/shadowDom.tsx","webpack://vanilla-forum/./packages/vanilla-dom-utils/src/TabHandler.ts","webpack://vanilla-forum/./packages/vanilla-dom-utils/src/index.ts","webpack://vanilla-forum/./plugins/rich-editor/src/scripts/flyouts/pieces/flyoutPosition.ts","webpack://vanilla-forum/./packages/vanilla-react-utils/src/Hoverable.tsx","webpack://vanilla-forum/./packages/vanilla-react-utils/src/useMeasure.ts","webpack://vanilla-forum/./packages/vanilla-react-utils/src/useCollisionDetector.tsx","webpack://vanilla-forum/./packages/vanilla-react-utils/src/useComponentDebug.tsx","webpack://vanilla-forum/./packages/vanilla-react-utils/src/useDomNodeAttachment.tsx","webpack://vanilla-forum/./packages/vanilla-react-utils/src/useEscapeListener.ts","webpack://vanilla-forum/./packages/vanilla-react-utils/src/useFocusWatcher.ts","webpack://vanilla-forum/./packages/vanilla-react-utils/src/useLastValue.tsx","webpack://vanilla-forum/./packages/vanilla-react-utils/src/useThrowError.ts","webpack://vanilla-forum/./packages/vanilla-react-utils/src/deconstructAttributesFromElement.ts","webpack://vanilla-forum/./plugins/rich-editor/src/scripts/editor/richEditorVariables.ts","webpack://vanilla-forum/./packages/vanilla-utils/src/debugUtils.ts","webpack://vanilla-forum/./plugins/rich-editor/src/scripts/editor/pieces/ImageEmbedModal.tsx","webpack://vanilla-forum/./plugins/rich-editor/src/scripts/editor/richEditorStyles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/legacy/atwho.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/legacy/index.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/auth/AuthActions.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/auth/authReducer.ts","webpack://vanilla-forum/./library/src/scripts/forms/ButtonSubmit.tsx","webpack://vanilla-forum/./applications/dashboard/src/scripts/auth/PasswordForm.tsx","webpack://vanilla-forum/./applications/dashboard/src/scripts/auth/SSOMethods.tsx","webpack://vanilla-forum/./applications/dashboard/src/scripts/forms/Or.tsx","webpack://vanilla-forum/./library/src/scripts/messages/messageStyles.ts","webpack://vanilla-forum/./library/src/scripts/messages/Message.tsx","webpack://vanilla-forum/./applications/dashboard/src/scripts/pages/PasswordPage.tsx","webpack://vanilla-forum/./applications/dashboard/src/scripts/auth/RememberPasswordLink.tsx","webpack://vanilla-forum/./library/src/scripts/routing/NotFoundPage.tsx","webpack://vanilla-forum/./library/src/scripts/Router.tsx","webpack://vanilla-forum/./library/src/scripts/theming/loadThemeFonts.ts","webpack://vanilla-forum/./library/src/scripts/theming/ThemeProvider.tsx","webpack://vanilla-forum/./library/src/scripts/layout/components/PanelWidgetVerticalPadding.tsx","webpack://vanilla-forum/./library/src/scripts/errorPages/ErrorComponent.tsx","webpack://vanilla-forum/./library/src/scripts/AppContext.tsx","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/trimTrailingCommas.ts","webpack://vanilla-forum/./library/src/scripts/navigation/siteNavStyles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/reactionsStyles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/buttonStylesCompat.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/clickableItemHelpers.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/textLinkStyles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/inputStyles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/flyoutStyles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/forumMetaStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/panelListStyles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/fontStyles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/forumLayoutStyles.ts","webpack://vanilla-forum/./library/src/scripts/forms/forumStyleVars.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/categoriesStyles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/tableStyles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/groupsStyles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/photoGridStyles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/signaturesSyles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/forumTagStyles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/signInMethodStyles.ts","webpack://vanilla-forum/./library/src/scripts/forums/forumStyleVars.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/Leaderboard.variables.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/Leaderboard.styles.ts","webpack://vanilla-forum/./library/src/scripts/styles/MixinsFoundation.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/PageBox.compat.styles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/pages/Profile.variables.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/pages/Profile.compat.styles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/pages/Discussion.variables.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/userCards.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/pages/Discussion.compat.styles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/pages/DiscussionList.variables.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/pages/DiscussionList.compat.styles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/index.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/pages/CategoryList.variables.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/pages/ConversationList.variables.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/pages/Conversation.variables.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/blockColumnStyles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/socialConnectStyles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/paginationStyles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/bestOfStyles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/ideaStyles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/searchPageStyles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/pages/CategoryList.compat.styles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/pages/ConversationList.compat.styles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/pages/Conversation.compat.styles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/messagesStyles.ts","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/compatibilityIcons.tsx","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/compatibilityUserCards.tsx","webpack://vanilla-forum/./applications/dashboard/src/scripts/forms/DashboardFormGroupContext.tsx","webpack://vanilla-forum/./applications/dashboard/src/scripts/forms/DashboardFormLabel.tsx","webpack://vanilla-forum/./applications/dashboard/src/scripts/forms/DashboardFormGroup.tsx","webpack://vanilla-forum/./applications/dashboard/src/scripts/forms/DashboardImageUpload.tsx","webpack://vanilla-forum/./library/src/scripts/layout/smartAlignStyles.ts","webpack://vanilla-forum/./library/src/scripts/layout/SmartAlign.tsx","webpack://vanilla-forum/./library/src/scripts/modal/ModalConfirm.tsx","webpack://vanilla-forum/./applications/dashboard/src/scripts/entries/forum.tsx","webpack://vanilla-forum/./applications/dashboard/src/scripts/forms/DashboardImageUploadGroup.tsx","webpack://vanilla-forum/./applications/dashboard/src/scripts/pages/SignInPage.tsx","webpack://vanilla-forum/./applications/dashboard/src/scripts/pages/RecoverPasswordPage.tsx","webpack://vanilla-forum/./library/src/scripts/headers/TitleBarHamburger.tsx","webpack://vanilla-forum/./library/src/scripts/banner/CommunityBanner.tsx","webpack://vanilla-forum/./applications/dashboard/src/scripts/compatibilityStyles/cssOut.ts","webpack://vanilla-forum/./build/entries/public-path.ts","webpack://vanilla-forum/./packages/vanilla-react-utils/src/mounting.tsx"],"names":["IMAGE_REGEX","isFileImage","file","test","type","logDebug","name","simplifyFraction","numerator","denominator","gcd","findGCD","a","b","shorthand","hashString","str","split","reduce","prevHash","currVal","charCodeAt","uuidv4","replace","c","r","Math","random","toString","slugify","options","whiteSpaceNormalizeRegexp","allowMultipleDashes","normalize","trim","toLocaleLowerCase","normalizeString","splitStringLoosely","toSplit","splitWith","normalizedName","normalizedSplitTerm","normalizedPieces","RegExp","charactersUsed","map","piece","start","length","substring","matchAtMention","subtext","shouldStartWithSpace","requireQuotesForWhitespace","lines","lastLine","nonExcludedCharacters","excludeWhiteSpace","excluded","regexStr","match","exec","rawMatch","OS","SAFE_PROTOCOL_REGEX","sanitizeUrl","url","capitalizeFirstLetter","charAt","toUpperCase","slice","guessOperatingSystem","userAgent","navigator","vendor","window","opera","ANDROID","MSStream","IOS","UNKNOWN","indexArrayByKey","array","key","object","item","push","notEmpty","value","ensureString","maybeString","TypeError","forceInt","fallback","result","Number","parseInt","isNaN","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","blockQuoteVariables","useThemeCache","globalVars","globalVariables","colors","variableFactory","makeThemeVars","fg","mainColors","border","color","mixBgAndFg","blockQuoteCSS","vars","cssRule","display","margin","styleUnit","Mixins","padding","all","left","borderLeft","singleBorder","width","boxSizing","verticalAlign","marginTop","marginBottom","cssOut","ColorsUtils","colorOut","aa","call","apply","bind","arguments","ba","d","Array","prototype","unshift","p","Function","indexOf","q","Date","now","ca","this","document","da","FontFace","t","createElement","hasOwnProperty","style","cssText","setAttribute","appendChild","createTextNode","u","getElementsByTagName","documentElement","insertBefore","lastChild","v","parentNode","removeChild","w","className","f","g","join","y","z","m","rel","href","media","onload","onerror","setTimeout","A","src","onreadystatechange","readyState","tagName","B","C","D","E","F","G","I","J","H","ga","substr","toLowerCase","ha","h","j","events","classes","L","K","ja","M","N","O","P","Q","s","Promise","fonts","load","fa","then","race","clearTimeout","R","S","T","la","U","offsetWidth","serif","V","ma","W","X","na","oa","qa","l","k","n","x","xa","ra","sa","ta","ua","context","timeout","ia","ka","pa","projectId","version","api","fontfamily","fontStyle","fontWeight","urls","families","testStrings","ya","za","latin","cyrillic","greek","khmer","Hanuman","Aa","thin","extralight","ultralight","light","regular","book","medium","semibold","demibold","bold","extrabold","ultrabold","black","heavy","Ba","i","italic","normal","Ca","Ea","Fa","Arimo","Cousine","Tinos","Ga","Ha","text","pop","va","Da","encodeURIComponent","wa","Typekit","config","fn","async","__webfontfontdeckmodule__","weight","location","hostname","ea","Y","custom","fontdeck","monotype","typekit","google","Z","EDITOR_WALLED_EVENT","EDITOR_EVENT_WALL_CLASS","EditorEventWall","props","ref","useRef","useEffect","current","addEventListener","eventFlagger","removeEventListener","onClick","preventDefault","event","isEditorWalledEvent","embedMenuClasses","styleFactory","root","alignItems","justifyContent","position","top","percent","horizontal","transform","background","bg","shadowOrBorderBasedOnLightness","zIndex","vertical","borderBottomLeftRadius","borderBottomRightRadius","form","imageContainer","paragraph","importantUnit","gutter","quarter","font","weights","lineHeight","lineHeights","base","meta","size","align","verticalPadding","half","EmbedMenuContext","createContext","selected","undefined","setSelected","EmbedMenu","children","useState","menuRef","Provider","role","classNames","currentLocale","localeStore","callbacks","getLocales","setCurrentLocale","localeKey","forEach","callback","getCurrentLocale","getJSLocaleKey","loadLocales","locales","LocaleContext","React","LocaleProvider","setLocales","logWarning","useLocaleInfo","useContext","translationStore","internalTranslationDebugValue","translationDebug","newValue","loadTranslations","translations","translate","defaultTranslation","message","TranslationPropertyType","NullContentTranslator","logError","shouldDisplay","Translator","_TranslationComponent","ContentTranslationProvider","setTranslator","dataMap","WeakMap","setData","element","initialValue","has","get","set","getData","defaultValue","attributeString","hasAttribute","getAttribute","emojiSupportedCache","isEmojiSupported","canvas","getContext","ctx","fillText","getImageData","data","emojiOptions","convertToSafeEmojiCharacters","stringOrNode","twemoji","parse","EscapeListener","returnElement","keydownListener","contains","activeElement","focus","delegatedEventListeners","delegateEvent","eventName","filterSelector","scopeSelector","scope","functionKey","querySelector","HTMLElement","eventHash","includes","wrappedCallback","target","closest","removeDelegatedEvent","getDraggedFile","dataTransfer","files","getPastedFile","clipboardData","items","from","getAsFile","filter","Boolean","FocusWatcher","watchedNode","changeHandler","handleFocusOut","handleFocusIn","handleClick","checkDomTreeHasFocus","triggeringElement","checkDomTreeWasClicked","clickedElement","relatedTarget","explicitOriginalTarget","body","isWatchedInBody","isFocusedInBody","isModal","getElementById","hasFocus","escapeHTML","div","innerHTML","ensureHtmlElement","selectorOrElement","loadEventCallbacks","rejectionCache","Map","ensureScript","scriptUrl","reject","existingScript","head","script","error","delete","prepareShadowRoot","cloneElement","newElementTag","html","ns","append","startsWith","remove","browserEscapesNoScript","escapedString","child","childNodes","nodeValue","unescapeHTML","newElement","classList","attachShadow","mode","TabHandler","excludedElements","excludedRoots","exemption","elementToFilter","excludedRoot","tabbableElements","tabbable","reverse","allowLooping","tabbables","createExcludeFilterWithExemption","currentTabIndex","targetIndex","filterAllExcluded","smoothscroll","polyfill","flyoutPosition","renderAbove","renderLeft","ignore","centered","right","bottom","Hoverable","hasExecuted","once","onHover","hoverTimeout","handleHover","duration","dismissTimeout","onMouseEnter","mouseEnterHandler","onMouseLeave","mouseLeaveHandler","Component","EMPTY_RECT","height","toJSON","useMeasure","adjustForScrollOffset","watchRef","bounds","setContentRect","refWatch","useLayoutEffect","animationFrameId","measure","requestAnimationFrame","rect","getBoundingClientRect","scrollY","JSON","stringify","resizeListener","debounce","ro","ResizeObserver","observe","cancelAnimationFrame","disconnect","cancel","doRectsOverlap","rect1","rect2","isEmptyRect","hasHorizontalOverlap","hasVerticalOverlap","useCollisionDetector","collisionSourceRef","sourceMeasure","vBoundary1Ref","vBoundary1Measure","vBoundary2Ref","vBoundary2Measure","hBoundary1Ref","hBoundary1Measure","hBoundary2Ref","hBoundary2Measure","hasCollision","useDebugValue","useComponentDebug","debugValue","useDomNodeAttachment","domNodes","node","useEscapeListener","actualRoot","escapeListener","stop","useFocusWatcher","bypass","focusWatcher","useLastValue","useThrowError","setError","deconstructAttributesFromElement","classAsClassName","hrefAsTo","attrs","values","attributes","attr","richEditorVariables","varsFormElements","formElementsVariables","animations","standardAnimations","outline","primary","fade","spacing","paddingLeft","paddingRight","paddingTop","paddingBottom","embedMenu","sizing","minHeight","emojiSize","menuButton","paragraphMenuHandle","offset","insertLink","flyout","maxHeight","viewHeight","nub","menu","borderWidth","pilcrow","fontSize","animation","fadeIn","timing","iterationCount","emojiGroup","mobile","transition","embedButton","placeholder","title","scrollContainer","overshoot","emojiBody","emojiHeader","emojiFooter","buttonContents","state","iconWrap","richEditorWidth","modernFrame","internalDebugValue","debug","console","log","logDebugConditionnal","outputLog","warn","ImageEmbedModal","initialAlt","alt","setAlt","inputRef","handleTextChange","useCallback","stopPropagation","saveAndClose","onSave","onClose","titleID","useUniqueID","isVisible","ModalSizes","SMALL","exitHandler","header","closeFrame","label","labelClassName","inputProps","required","onChange","onKeyPress","footer","justifyRight","baseClass","ButtonTypes","TEXT_PRIMARY","richEditorClasses","legacyMode","formVars","mediaQueries","layoutVariables","cursor","important","flexDirection","flexGrow","absolute","srOnly","singleLineEllipsis","appearance","textAlign","pointerEvents","content","quote","absolutePosition","middleOfParent","radius","elementaryColors","transparent","paragraphMenu","marginLeft","animationName","animationDuration","animationTimingFunction","animationIterationCount","translateY","paragraphMenuMobile","menuBar","overflow","menuBarToggles","flexWrap","userSelect","maxWidth","minWidth","backgroundColor","paragraphMenuHandleMobile","whiteSpace","oneColumnDown","menuItems","msOverflowStyle","listStyle","button","buttonResetMixin","secondary","topLevelButtonActive","menuItem","upload","embedBar","icon","sizes","small","embedBarSeparator","borderRadius","default","legacyFrame","close","middleRightOfParent","flyoutDescription","separator","borderTop","calc","paragraphMenuPanel","flyoutOffset","atCache","atEmpty","minCharacters","getMeta","maxSuggestions","serverLimit","emojiData","emojis","emoji","emojiFormat","format","emojiAssetPath","assetPath","emojiList","entries","index","emojiImageUrl","parts","filename","basename","ext","emojiTemplate","flag","_matchAtMention","matchFakeEmoji","initializeAtComplete","editorElement","iframe","iframeWindow","contentWindow","$","atwho","at","tpl","limit","remote_filter","query","shouldContinueFiltering","filterString","isQueryEmpty","getJSON","formatUrl","isArray","before_insert","$li","username","requiresQuotation","hasQuotation","insert","highlighter","li","regexp","$1","$2","$3","$4","matcher","cWindow","insert_tpl","tplEval","on","suggestionElement","view","$el","$inputor","css","iframeOffset","leftCoordinate","topCoordinate","selectHeight","fontMirror","fontWidth","each","outerHeight","windowHeight","scrollPosition","scrollTop","newOffset","onReady","onContent","gdn","atCompleteInit","createAction","actionCreatorFactory","AuthActions","thunk","bindThunkAction","resetPasswordACs","apiv2","post","response","dispatch","params","passwordLoginACs","urlParms","URLSearchParams","getAuthenticatorsACs","ReduxActions","useAuthActions","useDispatch","useMemo","useAuthStoreState","useSelector","auth","AUTH_INITIAL_STATE","authenticators","status","LoadStatus","PENDING","signin","passwordReset","authReducer","produce","reducerWithInitialState","case","started","nextState","payload","LOADING","done","SUCCESS","failed","ERROR","ButtonSubmit","Button","disabled","submit","prefix","tabIndex","initialForm","rememberMe","password","PasswordForm","formDescribedBy","useReducer","action","formState","updateForm","loginWithPassword","signinState","usernameRef","passwordRef","formDescriptionID","globalErrorMessage","getGlobalErrorMessage","inputBlockClasses","allowEdit","allowSubmit","usernameErrors","getFieldErrors","passwordErrors","select","aria-describedby","method","onSubmit","persist","noValidate","Paragraph","isError","InputTextBlock","errors","Checkbox","checked","to","SSOMethods","ssoMethods","methodStyles","ui","foregroundColor","photoUrl","aria-hidden","buttonName","Or","visible","labelText","PureComponent","messagesVariables","formElVars","themeVars","withIcon","withoutIcon","messageColors","warning","states","Variables","condensed","actionButton","semiBold","messagesClasses","titleBarVars","titleBarVariables","shadows","shadowHelper","hasIcon","wrap","flex","fixed","messageWrapper","backgroundImage","embed","spacer","setWidth","actionButtonPrimary","allButtonStates","noState","allStates","clickFocus","iconPosition","em","negativeUnit","errorIcon","allLinkStates","textDecoration","inlineBlock","confirm","main","titleContent","lineHeightAdjustment","Message","InnerWrapper","isContained","Container","Fragment","OuterWrapper","isFixed","contents","stringContents","hasTitle","icon_content","icon_title_content","noIcon","iconMarkup","onCancel","TEXT","isActionLoading","ButtonLoader","cancelText","onConfirm","confirmText","clearOnUnmount","aria-live","PasswordPage","uniqueIDFromPrefix","DocumentTitle","RememberPasswordLink","NotFoundPage","sprintf","Router","onRouteChange","history","createBrowserHistory","initPageViewTracking","pageChangeHandler","scrollTo","usePageChangeListener","routes","_routes","component","BackRoutingProvider","BannerContext","disableDynamicRouting","LinkContextProvider","linkContexts","sectionRoots","addRoutes","defaultFontConfig","loaded","THEME_CACHE_EVENT","getGoogleFontUrl","defaultFontFamily","weightNormal","weightSemiBold","weightBold","encodeURI","validCustomFont","customFont","makeFontConfigFromFontVar","isMonoSpace","filteredFonts","assetUrl","hasMounted","ThemeProvider","themeKey","variablesOnly","revisionID","getAssets","useReduxActions","ThemeActions","assets","theme","setTopOffset","useScrollOffset","cacheID","useThemeCacheID","setThemeKey","themeHeader","themeFooter","getStore","getState","globalFontVars","forceGoogleFont","defaultFallback","googleFontFamily","customFontUrl","firstFamily","restFamilies","WebFont","fallbacks","fontLoaderProps","fontFamily","customConfig","webFontConfig","loadThemeFonts","Backgrounds","Loader","errorComponent","inputClasses","applyInputCSSRules","withLayout","panelWidgetClasses","useLayout","ErrorPage","getErrorCode","messageFromErrorCode","inheritHeight","inheritHeightClass","tag","PanelWidget","CoreErrorMessages","ExtraContextProviders","AppContext","providers","store","rootStyle","SearchContextProvider","LiveAnnouncer","ScrollOffsetProvider","scrollWatchingEnabled","noTheme","FontSizeCalculatorProvider","SearchFormContextProvider","TitleBarDeviceProvider","BannerContextProviderNoHistory","EntryLinkContextProvider","DeviceProvider","acc","cur","noWrap","trimTrailingCommas","selector","siteNavVariables","active","links","large","nodeToggle","iconWidth","siteNavNodeClasses","negative","noBleedDown","linkMixin","useTextColor","nestedStyles","hover","keyboardFocus","selectors","baseStyles","px","link","toggle","buttonOffset","activeLink","reactionsCSS","mixinButton","buttonType","STANDARD","buttonVariables","PRIMARY","generateButtonStyleProperties","buttonTypeVars","standard","ICON_COMPACT","buttonUtilityClasses","iconMixin","buttonGlobalVariables","compactHeight","mixinClickInput","overwriteColors","overwriteSpecial","linkColors","clickable","itemState","mixinTextLinkNoDefaultLinkAppearance","inputCSS","querySelectorAll","selectElement","wrapper","add","parentElement","inputVars","inputVariables","borderColor","borderType","formElements","dropDowns","textInputSizingFromFixedHeight","mixinInputStyles","inputMixin","getVerticalPaddingForTextInput","horizontalPadding","getHorizontalPaddingForTextInput","spaceWithoutPaddingInInput","marginRight","formSpacer","topRight","backgroundPosition","backgroundPositionX","focusSelector","isImportant","extraFocus","borderStyle","mixinFlyoutItem","classBasedStates","styles","actionMixin","linkSelectors","forumMetaCSS","mixinMetaLinkContainer","opacity","linkStates","extendItemContainer","userCardClasses","overwrites","metaContainerStyles","mixinMetaContainer","horizontalMargin","metaFg","panelListVariables","globalVals","forumFontsVariables","navVars","panelLink","panelTitle","margins","forumTitleMixin","forumLayoutVariables","foundationalWidths","fullGutter","constants","panelWidth","breakPoints","oneColumn","tablet","xs","full","halfSize","quarterSize","mainGutterOffset","panel","paddedWidth","topSpacing","cell","paddings","noBleed","useMinWidth","tabletDown","aboveMobile","mobileDown","aboveXs","forumVariables","forcedVars","modern","table","lists","backgroundColorRead","discussions","discussion","categories","mixed","userPhoto","userPhotoVariables","countBox","forumCategoriesVariables","image","groupVariables","banner","logo","photoGridVariables","mixinTag","overwrite","tagVariables","textOverflow","defaultTransition","nested","signInMethodsCSS","buttonVars","buttonGlobals","float","buttons","standardSignInMethod","makeImportant","white","primaryContrast","lineOffset","TitleAlignment","read","leaderboardVariables","box","enabled","alignment","list","listItem","profilePhoto","count","MixinsFoundation","pageBoxes","section","contentSelector","prefixedSelector","cssRaw","depth1","depth2","depth3","ProfilePhotoAlignment","pageBoxCompatStyles","contentBoxes","allHeadings","headingBox","mobileSpacing","largeTitle","descriptionSpacing","profileVariables","makeVars","BorderType","NONE","SEPARATOR","badges","LEFT","photo","discussionVariables","userCardDiscussionPlacement","discussionItemPadding","itemList","discussionListVariables","fontRead","fontState","compatibilityStyles","categoryListVariables","conversationListVariables","conversationVariables","layoutVars","userPhotoVars","fullBackgroundCompat","family","panelSelectors","borderRight","borderTopRightRadius","modals","resultVars","searchResultsVariables","borderBottom","WebkitFilter","borderTopColor","suggestedTextStyleHelper","option","order","dropDownVariables","forumVars","userPhotoSizing","blockColumnCSS","formElementVars","buttonBorderRadius","borderOffset","handleSize","rgba","fullSizeOfParent","borderTopLeftRadius","buttonCSS","dropdownVars","highlight","borderBottomColor","dropDown","flyoutCSS","tagItemWidth","tagItem","TagType","LIST","tagItemListStyle","spaceBetween","backgroundState","forumTagCSS","socialConnectCSS","isLightColor","modifyColorBasedOnLightness","paginationCSS","containerMainStyles","containerMainMediaQueries","forumLayoutCSS","fontCSS","textIndent","categoriesCSS","bestOfCSS","mixPrimaryAndBg","ideaCSS","mixins","userPhotoMixins","topLeft","tableCSS","visited","textTransform","metaItemStyle","searchResultsStyles","searchBarClasses","preset","SearchBarPresets","BORDER","searchResultsVars","excerpt","buttonWidth","searchPageCSS","flexBasis","translateX","subTitle","groupsCSS","unit","objectFit","profileCompatCSS","stateColorEmphasis","discussionCompatCSS","discussionListCompatCSS","categoryListCompatCSS","conversationListCompatCSS","conversationCompatCSS","photoGridCSS","messagesCSS","signaturesCSS","rootStyles","titleStyles","listStyles","listItemStyles","linkStyles","asideStyles","countStyles","usernameStyles","profilePhotoStyles","leaderboardCSS","applyCompatibilityIcons","wheel","ReactDOM","render","doc","bookmarks","bookmarkLinkClass","iconClasses","bookmark","applyCompatibilityUserCards","hasUserViewPermission","userCards","mountables","userLink","userid","dataset","isNumeric","HTMLAnchorElement","deconstructedImageData","placeholderElement","UserCardModuleLazyLoad","userID","buttonContent","innerText","buttonClass","hasImage","userURL","mountReactMultiple","classesUserCard","buttonStyles","buttonsFromUserCardSelectors","numberFormattedClasses","DashboardLabelType","FormGroupContext","useFormGroup","throwError","DashboardFormLabel","inputID","labelID","rootClass","labelType","WIDE","htmlFor","description","afterDescription","DashboardFormGroup","Tag","isIndependant","DashboardImageUpload","imageUploader","uploadFile","isLoading","setIsLoading","setName","uploadError","setUploadError","valueRef","fallbackName","lastIndexOf","tempUrl","URL","createObjectURL","onImagePreview","uploaded","DASHBOARD_PRIMARY","ErrorMessages","field","smartAlignClasses","inner","SmartAlign","Outer","outerTag","Inner","ModalConfirm","createRef","srOnlyTitle","isConfirmLoading","handleCancel","classesFrameBody","frameBodyClasses","classFrameFooter","frameFooterClasses","Modal","elementToFocus","cancelRef","elementToFocusOnExit","Frame","FrameHeader","FrameBody","FrameFooter","buttonRef","confirmTitle","forceUpdate","initAllUserContent","convertAllUserContent","addComponent","previewUrl","setPreviewUrl","ownValue","ownOnChange","wantsDelete","setWantsDelete","originalValue","imagePreviewSrc","isStillOriginalValue","undoTitle","fieldName","registerReducer","NotificationsModel","reducer","exact","path","pageTitleID","authenticatorState","getAuthenticators","showPassword","email","setEmail","emailRef","pageTitle","resetPassword","aria-labelledby","NEW_SEARCH_PAGE_ENABLED","SearchPageRoute","route","applySharedPortalContext","LayoutTypes","THREE_COLUMNS","addPageComponent","enableLegacyAnalyticsTick","TitleBar","useMobileBackButton","Banner","isContentBanner","applyReactElementsInForum","metaPermissionKey","onInitialLoad","onNewHTML","objects","flattenNests","__webpack_public_path__","hasRendered","portals","PORTAL_MANAGER_ID","PortalContext","renderPortals","PortalManager","portal","createPortal","container","mountReact","bypassPortalManager","unmountBeforeRender","unmountComponentAtNode","setImmediate","cleanupContainer","mountPoint","clearContents","firstElementChild","components","toCleanup","cleanup","mountPortal","containerID","asRealPortal"],"mappings":"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","file":"addons/dashboard.min.js?fb5920a9aed62ffe500f","sourcesContent":["/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { logDebug } from \"./debugUtils\";\n\n/** This should mirror extensions allowed in Vanilla\\ImageResizer.php */\nconst IMAGE_REGEX = /^image\\/(gif|jpe?g|png)/i;\n\n/**\n * A filter for use with [].filter\n *\n * Matches only image image type files.\n * @private\n *\n * @param file - A File object.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/File\n *\n * @returns Whether or not the file is an acceptable image\n */\nexport function isFileImage(file: File): boolean {\n    if (IMAGE_REGEX.test(file.type)) {\n        return true;\n    }\n\n    logDebug(\"Filtered out non-image file: \", file.name);\n    return false;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n/**\n * Get various information about a fraction.\n *\n * @param numerator The fraction numerator.\n * @param denominator The fraction denominator.\n */\nexport function simplifyFraction(numerator: number, denominator: number) {\n    const findGCD = (a, b) => {\n        return b ? findGCD(b, a % b) : a;\n    };\n    const gcd = findGCD(numerator, denominator);\n\n    numerator = numerator / gcd;\n    denominator = denominator / gcd;\n\n    return {\n        numerator,\n        denominator,\n        shorthand: denominator + \":\" + numerator,\n    };\n}\n","/**\n * Utilities related to strings.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport mergeWith from \"lodash/mergeWith\";\n\n/**\n * A simple, fast method of hashing a string. Similar to Java's hash function.\n * https://stackoverflow.com/a/7616484/1486603\n *\n * @param str - The string to hash.\n *\n * @returns The hash code returned.\n */\nexport function hashString(str: string): number {\n    function hashReduce(prevHash, currVal) {\n        // tslint:disable-next-line:no-bitwise\n        return (prevHash << 5) - prevHash + currVal.charCodeAt(0);\n    }\n    return str.split(\"\").reduce(hashReduce, 0);\n}\n\n/**\n * Generate a RFC4122 compliant uuid. NOTE!!! Not cryptographically secure.\n *\n * This does not use a true random source (Eg. using Math.random()).\n * To use a better source would require dropping IE in order to use the crypto module.\n */\nexport function uuidv4() {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n        const r = (Math.random() * 16) | 0,\n            v = c == \"x\" ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\n\n/**\n * Convert a camel case variable to a title case label.\n *\n * @param str - The string to labelize.\n * @returns Returns a new string suitable for a label.\n */\nexport function labelize(str: string): string {\n    /**\n     * $labelCode = preg_replace('`(?<![A-Z0-9])([A-Z0-9])`', ' $1', $labelCode);\n     * $labelCode = preg_replace('`([A-Z0-9])(?=[a-z])`', ' $1', $labelCode);\n     * $labelCode = preg_replace('`\\s+`', ' ', $labelCode);\n     * $labelCode = ucfirst(trim($labelCode));\n     */\n    let label = str.replace(/([^A-Z0-9])([A-Z0-9])/, \"$1 $2\");\n    label = label.replace(/([A-Z0-9])(?=[a-z])/, \" $1\");\n    label = label.replace(/[_-]/, \" \");\n    label = label.replace(/\\s+/, \" \");\n    let parts = label.split(\" \");\n    label = parts.map((s) => s.charAt(0).toLocaleUpperCase() + s.slice(1)).join(\" \");\n    return label;\n}\n\n/**\n * Hash an object into a short key, that is stable no matter what order the parameters are.\n */\nexport function stableObjectHash<T extends object>(obj: T): number {\n    // Sort the object first.\n    const ordered: any = {};\n    Object.keys(obj)\n        .sort()\n        .forEach(function (key) {\n            ordered[key] = obj[key];\n        });\n    return hashString(JSON.stringify(ordered));\n}\n\ntype CompareReturn = -1 | 0 | 1;\n\n/**\n * Utility for sorting values. Similar to the <=> operator in PHP.\n *\n * @param val1 The first value to compare.\n * @param val2 The second value to compare.\n *\n * @returns -1, 0, or 1\n */\nexport function compare<T extends string | number>(val1: T, val2: T): CompareReturn {\n    if (typeof val1 === \"string\" && typeof val2 === \"string\") {\n        return val1.localeCompare(val2) as CompareReturn;\n    } else {\n        if (val1 > val2) {\n            return 1;\n        } else if (val1 < val2) {\n            return -1;\n        }\n        return 0;\n    }\n}\n\n/**\n * Parse a string into a URL friendly format.\n *\n * Eg. Why Uber isn’t spelled Über -> why-uber-isnt-spelled-uber\n *\n * @param str The string to parse.\n */\nexport function slugify(\n    str: string,\n    options?: {\n        allowMultipleDashes?: boolean;\n    },\n): string {\n    const whiteSpaceNormalizeRegexp = options && options.allowMultipleDashes ? /[\\s]+/g : /[-\\s]+/g;\n    return str\n        .normalize(\"NFD\") // Normalize accented characters into ASCII equivalents\n        .replace(/[^\\w\\s$*_+~.()'\"\\-!:@]/g, \"\") // REmove characters that don't URL encode well\n        .trim() // Trim whitespace\n        .replace(whiteSpaceNormalizeRegexp, \"-\") // Normalize whitespace\n        .toLocaleLowerCase(); // Convert to locale aware lowercase.\n}\n\nexport function normalizeString(str: string): string {\n    return str.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\n}\n\n/**\n * Split a string in multiple pieces similar to String.prototype.split but ignore most acccent characters.\n *\n * This will still return pieces with accents.\n *\n * @param toSplit The string to split.\n * @param splitWith The string to split with.\n */\nexport function splitStringLoosely(toSplit: string, splitWith: string): string[] {\n    const normalizedName = normalizeString(toSplit);\n    const normalizedSplitTerm = normalizeString(splitWith);\n    const normalizedPieces = normalizedName.split(new RegExp(`(${normalizedSplitTerm})`, \"i\"));\n\n    let charactersUsed = 0;\n    return normalizedPieces.map((piece) => {\n        const start = charactersUsed;\n        charactersUsed += piece.length;\n        return toSplit.substring(start, charactersUsed);\n    });\n}\n\ninterface IMentionMatch {\n    match: string;\n    rawMatch: string;\n}\n\n/**\n * Custom matching to allow quotation marks in the matching string as well as spaces.\n * Spaces make things more complicated.\n *\n * @param subtext - The string to be tested.\n * @param shouldStartWithSpace - Should the pattern include a test for a whitespace prefix?\n * @returns Matching string if successful.  Null on failure to match.\n */\nexport function matchAtMention(\n    subtext: string,\n    shouldStartWithSpace: boolean = false,\n    requireQuotesForWhitespace: boolean = true,\n): IMentionMatch | null {\n    // Split the string at the lines to allow for a simpler regex.\n    const lines = subtext.split(\"\\n\");\n    const lastLine = lines[lines.length - 1];\n\n    // If you change this you MUST change the regex in src/scripts/__tests__/legacy.test.js !!!\n    /**\n     * Put together the non-excluded characters.\n     *\n     * @param {boolean} excludeWhiteSpace - Whether or not to exclude whitespace characters.\n     *\n     * @returns {string} A Regex string.\n     */\n    function nonExcludedCharacters(excludeWhiteSpace) {\n        let excluded =\n            \"[^\" +\n            '\"' + // Quote character\n            \"\\\\u0000-\\\\u001f\\\\u007f-\\\\u009f\" + // Control characters\n            \"\\\\u2028\"; // Line terminator\n\n        if (excludeWhiteSpace) {\n            excluded += \"\\\\s\";\n        }\n\n        excluded += \"]\";\n        return excluded;\n    }\n\n    let regexStr =\n        \"@\" + // @ Symbol triggers the match\n        \"(\" +\n        // One or more non-greedy characters that aren't excluded. Whitespace is allowed, but a starting quote is required.\n        '\"(' +\n        nonExcludedCharacters(false) +\n        '+?)\"?' +\n        \"|\" + // Or\n        // One or more non-greedy characters that aren't exluded. Whitespace may be excluded.\n        \"(\" +\n        nonExcludedCharacters(requireQuotesForWhitespace) +\n        '+?)\"?' +\n        \")\" +\n        \"(?:\\\\n|$)\"; // Newline terminates.\n\n    // Determined by at.who library\n    if (shouldStartWithSpace) {\n        regexStr = \"(?:^|\\\\s)\" + regexStr;\n    }\n    const regex = new RegExp(regexStr, \"gi\");\n    const match = regex.exec(lastLine);\n    if (match) {\n        return {\n            rawMatch: match[0],\n            match: match[2] || match[1], // Return either of the matching groups (quoted or unquoted).\n        };\n    }\n\n    // No match\n    return null;\n}\n\nconst SAFE_PROTOCOL_REGEX = /^(http:\\/\\/|https:\\/\\/|tel:|mailto:\\/\\/|\\/|#)/;\n\n/**\n * Sanitize a URL to ensure that it matches a whitelist of approved url schemes. If the url does not match one of these schemes, prepend `unsafe:` before it.\n *\n * Allowed protocols\n * - \"http://\",\n * - \"https://\",\n * - \"tel:\",\n * - \"mailto://\",\n * - \"#\"\n *\n * @param url The url to sanitize.\n */\nexport function sanitizeUrl(url: string) {\n    if (url.match(SAFE_PROTOCOL_REGEX)) {\n        return url;\n    } else {\n        return \"unsafe:\" + url;\n    }\n}\n\n/**\n * Capitalize the first character of a string.\n *\n * @param str The string to modify.\n */\nexport function capitalizeFirstLetter(str: string): string {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n/**\n * Simple utility function for waiting some duration in promise.\n *\n * @param duration The amount of time to wait.\n */\nexport function promiseTimeout(duration: number): Promise<void> {\n    return new Promise((resolve) => {\n        setTimeout(resolve, duration);\n    });\n}\n\nfunction mergeCustomizer(into: any, source: any) {\n    if (Array.isArray(into) || Array.isArray(source)) {\n        return source;\n    }\n}\n\n/**\n * Merge 2 objects, but replace arrays instead of merging them.\n */\nexport function mergeAndReplaceArrays(item1: Record<any, any>, item2: Record<any, any>) {\n    return mergeWith({}, item1, item2, mergeCustomizer);\n}\n","/**\n * Utilities related to the user's system.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nexport enum OS {\n    IOS = \"ios\",\n    ANDROID = \"android\",\n    UNKNOWN = \"unkwown\",\n}\n\n/**\n * Provide relatively rough detection of mobile OS.\n *\n * This is not even close to perfect but can be used to try and offer,\n * OS specific input elements for things like datetimes.\n */\nexport function guessOperatingSystem(): OS {\n    const userAgent = navigator.userAgent || navigator.vendor || (window as any).opera;\n\n    if (/android/i.test(userAgent)) {\n        return OS.ANDROID;\n    }\n\n    // iOS detection from: http://stackoverflow.com/a/9039885/177710\n    if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {\n        return OS.IOS;\n    }\n\n    return OS.UNKNOWN;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\ninterface IClass {\n    new (): any;\n}\n\n/**\n * Determine if an instance is an instance of any of the listed classes.\n *\n * @param needle The instance.\n * @param haystack The classes to check.\n */\nexport function isInstanceOfOneOf(needle: any, haystack: IClass[]) {\n    for (const classItem of haystack) {\n        if (needle instanceof classItem) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\n/**\n * Transform an array of objects and an map of objets with a given key.\n *\n * Objects that do not contain the given key are dropped.\n *\n * @param array The array to go through.\n * @param key The key to lookup.\n */\nexport function indexArrayByKey<T extends object>(\n    array: T[],\n    key: string,\n): {\n    [key: string]: T;\n} {\n    const object = {};\n    for (const item of array) {\n        if (key in item) {\n            if (!(item[key] in object)) {\n                object[item[key]] = [];\n            }\n            object[item[key]].push(item);\n        }\n    }\n    return object;\n}\n\nexport function notEmpty<TValue>(value: TValue | null | undefined): value is TValue {\n    return value !== null && value !== undefined;\n}\n\nexport function ensureString(maybeString: any) {\n    if (typeof maybeString !== \"string\") throw new TypeError(\"Expected maybeString to have type string\");\n    return maybeString;\n}\n\nexport function forceInt(value: string | null, fallback: number): number {\n    let result = Number.parseInt(value ?? \"\", 10);\n    return Number.isNaN(result) ? fallback : result;\n}\n\nexport type RecordID = string | number;\n","var map = {\n\t\"./en-SG\": 126,\n\t\"./en-SG.js\": 126,\n\t\"./en-au\": 127,\n\t\"./en-au.js\": 127,\n\t\"./en-ca\": 128,\n\t\"./en-ca.js\": 128,\n\t\"./en-gb\": 129,\n\t\"./en-gb.js\": 129,\n\t\"./en-ie\": 130,\n\t\"./en-ie.js\": 130,\n\t\"./en-il\": 131,\n\t\"./en-il.js\": 131,\n\t\"./en-nz\": 132,\n\t\"./en-nz.js\": 132\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 190;","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license Proprietary\n */\n\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { cssRule } from \"@library/styles/styleShim\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { singleBorder } from \"@library/styles/styleHelpersBorders\";\nimport { userSelect } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { percent } from \"csx\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const blockQuoteVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"blockQuote\");\n    const colors = makeThemeVars(\"colors\", {\n        fg: globalVars.mainColors.fg,\n        border: {\n            color: globalVars.mixBgAndFg(0.23),\n        },\n    });\n\n    return {\n        colors,\n    };\n});\n\nexport const blockQuoteCSS = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = blockQuoteVariables();\n    cssRule(\".blockquote\", {\n        display: \"block\",\n        margin: styleUnit(0),\n        ...Mixins.padding({\n            all: 3,\n            left: 18,\n        }),\n        borderLeft: singleBorder({\n            color: vars.colors.border.color,\n            width: 6,\n        }),\n        boxSizing: \"border-box\",\n        verticalAlign: \"middle\",\n    });\n    cssRule(\".blockquote-content\", {\n        ...{\n            \"& > *:first-child\": {\n                marginTop: styleUnit(0),\n            },\n            \"& > *:last-child\": {\n                marginBottom: styleUnit(0),\n            },\n        },\n    });\n    cssOut(`.embedLink-excerpt`, {\n        color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n    });\n});\n","/* Web Font Loader v1.6.28 - (c) Adobe Systems, Google. License: Apache 2.0 */(function(){function aa(a,b,c){return a.call.apply(a.bind,arguments)}function ba(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function p(a,b,c){p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf(\"native code\")?aa:ba;return p.apply(null,arguments)}var q=Date.now||function(){return+new Date};function ca(a,b){this.a=a;this.o=b||a;this.c=this.o.document}var da=!!window.FontFace;function t(a,b,c,d){b=a.c.createElement(b);if(c)for(var e in c)c.hasOwnProperty(e)&&(\"style\"==e?b.style.cssText=c[e]:b.setAttribute(e,c[e]));d&&b.appendChild(a.c.createTextNode(d));return b}function u(a,b,c){a=a.c.getElementsByTagName(b)[0];a||(a=document.documentElement);a.insertBefore(c,a.lastChild)}function v(a){a.parentNode&&a.parentNode.removeChild(a)}\nfunction w(a,b,c){b=b||[];c=c||[];for(var d=a.className.split(/\\s+/),e=0;e<b.length;e+=1){for(var f=!1,g=0;g<d.length;g+=1)if(b[e]===d[g]){f=!0;break}f||d.push(b[e])}b=[];for(e=0;e<d.length;e+=1){f=!1;for(g=0;g<c.length;g+=1)if(d[e]===c[g]){f=!0;break}f||b.push(d[e])}a.className=b.join(\" \").replace(/\\s+/g,\" \").replace(/^\\s+|\\s+$/,\"\")}function y(a,b){for(var c=a.className.split(/\\s+/),d=0,e=c.length;d<e;d++)if(c[d]==b)return!0;return!1}\nfunction ea(a){return a.o.location.hostname||a.a.location.hostname}function z(a,b,c){function d(){m&&e&&f&&(m(g),m=null)}b=t(a,\"link\",{rel:\"stylesheet\",href:b,media:\"all\"});var e=!1,f=!0,g=null,m=c||null;da?(b.onload=function(){e=!0;d()},b.onerror=function(){e=!0;g=Error(\"Stylesheet failed to load\");d()}):setTimeout(function(){e=!0;d()},0);u(a,\"head\",b)}\nfunction A(a,b,c,d){var e=a.c.getElementsByTagName(\"head\")[0];if(e){var f=t(a,\"script\",{src:b}),g=!1;f.onload=f.onreadystatechange=function(){g||this.readyState&&\"loaded\"!=this.readyState&&\"complete\"!=this.readyState||(g=!0,c&&c(null),f.onload=f.onreadystatechange=null,\"HEAD\"==f.parentNode.tagName&&e.removeChild(f))};e.appendChild(f);setTimeout(function(){g||(g=!0,c&&c(Error(\"Script load timeout\")))},d||5E3);return f}return null};function B(){this.a=0;this.c=null}function C(a){a.a++;return function(){a.a--;D(a)}}function E(a,b){a.c=b;D(a)}function D(a){0==a.a&&a.c&&(a.c(),a.c=null)};function F(a){this.a=a||\"-\"}F.prototype.c=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c].replace(/[\\W_]+/g,\"\").toLowerCase());return b.join(this.a)};function G(a,b){this.c=a;this.f=4;this.a=\"n\";var c=(b||\"n4\").match(/^([nio])([1-9])$/i);c&&(this.a=c[1],this.f=parseInt(c[2],10))}function fa(a){return H(a)+\" \"+(a.f+\"00\")+\" 300px \"+I(a.c)}function I(a){var b=[];a=a.split(/,\\s*/);for(var c=0;c<a.length;c++){var d=a[c].replace(/['\"]/g,\"\");-1!=d.indexOf(\" \")||/^\\d/.test(d)?b.push(\"'\"+d+\"'\"):b.push(d)}return b.join(\",\")}function J(a){return a.a+a.f}function H(a){var b=\"normal\";\"o\"===a.a?b=\"oblique\":\"i\"===a.a&&(b=\"italic\");return b}\nfunction ga(a){var b=4,c=\"n\",d=null;a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10))));return c+b};function ha(a,b){this.c=a;this.f=a.o.document.documentElement;this.h=b;this.a=new F(\"-\");this.j=!1!==b.events;this.g=!1!==b.classes}function ia(a){a.g&&w(a.f,[a.a.c(\"wf\",\"loading\")]);K(a,\"loading\")}function L(a){if(a.g){var b=y(a.f,a.a.c(\"wf\",\"active\")),c=[],d=[a.a.c(\"wf\",\"loading\")];b||c.push(a.a.c(\"wf\",\"inactive\"));w(a.f,c,d)}K(a,\"inactive\")}function K(a,b,c){if(a.j&&a.h[b])if(c)a.h[b](c.c,J(c));else a.h[b]()};function ja(){this.c={}}function ka(a,b,c){var d=[],e;for(e in b)if(b.hasOwnProperty(e)){var f=a.c[e];f&&d.push(f(b[e],c))}return d};function M(a,b){this.c=a;this.f=b;this.a=t(this.c,\"span\",{\"aria-hidden\":\"true\"},this.f)}function N(a){u(a.c,\"body\",a.a)}function O(a){return\"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:\"+I(a.c)+\";\"+(\"font-style:\"+H(a)+\";font-weight:\"+(a.f+\"00\")+\";\")};function P(a,b,c,d,e,f){this.g=a;this.j=b;this.a=d;this.c=c;this.f=e||3E3;this.h=f||void 0}P.prototype.start=function(){var a=this.c.o.document,b=this,c=q(),d=new Promise(function(d,e){function f(){q()-c>=b.f?e():a.fonts.load(fa(b.a),b.h).then(function(a){1<=a.length?d():setTimeout(f,25)},function(){e()})}f()}),e=null,f=new Promise(function(a,d){e=setTimeout(d,b.f)});Promise.race([f,d]).then(function(){e&&(clearTimeout(e),e=null);b.g(b.a)},function(){b.j(b.a)})};function Q(a,b,c,d,e,f,g){this.v=a;this.B=b;this.c=c;this.a=d;this.s=g||\"BESbswy\";this.f={};this.w=e||3E3;this.u=f||null;this.m=this.j=this.h=this.g=null;this.g=new M(this.c,this.s);this.h=new M(this.c,this.s);this.j=new M(this.c,this.s);this.m=new M(this.c,this.s);a=new G(this.a.c+\",serif\",J(this.a));a=O(a);this.g.a.style.cssText=a;a=new G(this.a.c+\",sans-serif\",J(this.a));a=O(a);this.h.a.style.cssText=a;a=new G(\"serif\",J(this.a));a=O(a);this.j.a.style.cssText=a;a=new G(\"sans-serif\",J(this.a));a=\nO(a);this.m.a.style.cssText=a;N(this.g);N(this.h);N(this.j);N(this.m)}var R={D:\"serif\",C:\"sans-serif\"},S=null;function T(){if(null===S){var a=/AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);S=!!a&&(536>parseInt(a[1],10)||536===parseInt(a[1],10)&&11>=parseInt(a[2],10))}return S}Q.prototype.start=function(){this.f.serif=this.j.a.offsetWidth;this.f[\"sans-serif\"]=this.m.a.offsetWidth;this.A=q();U(this)};\nfunction la(a,b,c){for(var d in R)if(R.hasOwnProperty(d)&&b===a.f[R[d]]&&c===a.f[R[d]])return!0;return!1}function U(a){var b=a.g.a.offsetWidth,c=a.h.a.offsetWidth,d;(d=b===a.f.serif&&c===a.f[\"sans-serif\"])||(d=T()&&la(a,b,c));d?q()-a.A>=a.w?T()&&la(a,b,c)&&(null===a.u||a.u.hasOwnProperty(a.a.c))?V(a,a.v):V(a,a.B):ma(a):V(a,a.v)}function ma(a){setTimeout(p(function(){U(this)},a),50)}function V(a,b){setTimeout(p(function(){v(this.g.a);v(this.h.a);v(this.j.a);v(this.m.a);b(this.a)},a),0)};function W(a,b,c){this.c=a;this.a=b;this.f=0;this.m=this.j=!1;this.s=c}var X=null;W.prototype.g=function(a){var b=this.a;b.g&&w(b.f,[b.a.c(\"wf\",a.c,J(a).toString(),\"active\")],[b.a.c(\"wf\",a.c,J(a).toString(),\"loading\"),b.a.c(\"wf\",a.c,J(a).toString(),\"inactive\")]);K(b,\"fontactive\",a);this.m=!0;na(this)};\nW.prototype.h=function(a){var b=this.a;if(b.g){var c=y(b.f,b.a.c(\"wf\",a.c,J(a).toString(),\"active\")),d=[],e=[b.a.c(\"wf\",a.c,J(a).toString(),\"loading\")];c||d.push(b.a.c(\"wf\",a.c,J(a).toString(),\"inactive\"));w(b.f,d,e)}K(b,\"fontinactive\",a);na(this)};function na(a){0==--a.f&&a.j&&(a.m?(a=a.a,a.g&&w(a.f,[a.a.c(\"wf\",\"active\")],[a.a.c(\"wf\",\"loading\"),a.a.c(\"wf\",\"inactive\")]),K(a,\"active\")):L(a.a))};function oa(a){this.j=a;this.a=new ja;this.h=0;this.f=this.g=!0}oa.prototype.load=function(a){this.c=new ca(this.j,a.context||this.j);this.g=!1!==a.events;this.f=!1!==a.classes;pa(this,new ha(this.c,a),a)};\nfunction qa(a,b,c,d,e){var f=0==--a.h;(a.f||a.g)&&setTimeout(function(){var a=e||null,m=d||null||{};if(0===c.length&&f)L(b.a);else{b.f+=c.length;f&&(b.j=f);var h,l=[];for(h=0;h<c.length;h++){var k=c[h],n=m[k.c],r=b.a,x=k;r.g&&w(r.f,[r.a.c(\"wf\",x.c,J(x).toString(),\"loading\")]);K(r,\"fontloading\",x);r=null;if(null===X)if(window.FontFace){var x=/Gecko.*Firefox\\/(\\d+)/.exec(window.navigator.userAgent),xa=/OS X.*Version\\/10\\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);\nX=x?42<parseInt(x[1],10):xa?!1:!0}else X=!1;X?r=new P(p(b.g,b),p(b.h,b),b.c,k,b.s,n):r=new Q(p(b.g,b),p(b.h,b),b.c,k,b.s,a,n);l.push(r)}for(h=0;h<l.length;h++)l[h].start()}},0)}function pa(a,b,c){var d=[],e=c.timeout;ia(b);var d=ka(a.a,c,a.c),f=new W(a.c,b,e);a.h=d.length;b=0;for(c=d.length;b<c;b++)d[b].load(function(b,d,c){qa(a,f,b,d,c)})};function ra(a,b){this.c=a;this.a=b}\nra.prototype.load=function(a){function b(){if(f[\"__mti_fntLst\"+d]){var c=f[\"__mti_fntLst\"+d](),e=[],h;if(c)for(var l=0;l<c.length;l++){var k=c[l].fontfamily;void 0!=c[l].fontStyle&&void 0!=c[l].fontWeight?(h=c[l].fontStyle+c[l].fontWeight,e.push(new G(k,h))):e.push(new G(k))}a(e)}else setTimeout(function(){b()},50)}var c=this,d=c.a.projectId,e=c.a.version;if(d){var f=c.c.o;A(this.c,(c.a.api||\"https://fast.fonts.net/jsapi\")+\"/\"+d+\".js\"+(e?\"?v=\"+e:\"\"),function(e){e?a([]):(f[\"__MonotypeConfiguration__\"+\nd]=function(){return c.a},b())}).id=\"__MonotypeAPIScript__\"+d}else a([])};function sa(a,b){this.c=a;this.a=b}sa.prototype.load=function(a){var b,c,d=this.a.urls||[],e=this.a.families||[],f=this.a.testStrings||{},g=new B;b=0;for(c=d.length;b<c;b++)z(this.c,d[b],C(g));var m=[];b=0;for(c=e.length;b<c;b++)if(d=e[b].split(\":\"),d[1])for(var h=d[1].split(\",\"),l=0;l<h.length;l+=1)m.push(new G(d[0],h[l]));else m.push(new G(d[0]));E(g,function(){a(m,f)})};function ta(a,b){a?this.c=a:this.c=ua;this.a=[];this.f=[];this.g=b||\"\"}var ua=\"https://fonts.googleapis.com/css\";function va(a,b){for(var c=b.length,d=0;d<c;d++){var e=b[d].split(\":\");3==e.length&&a.f.push(e.pop());var f=\"\";2==e.length&&\"\"!=e[1]&&(f=\":\");a.a.push(e.join(f))}}\nfunction wa(a){if(0==a.a.length)throw Error(\"No fonts to load!\");if(-1!=a.c.indexOf(\"kit=\"))return a.c;for(var b=a.a.length,c=[],d=0;d<b;d++)c.push(a.a[d].replace(/ /g,\"+\"));b=a.c+\"?family=\"+c.join(\"%7C\");0<a.f.length&&(b+=\"&subset=\"+a.f.join(\",\"));0<a.g.length&&(b+=\"&text=\"+encodeURIComponent(a.g));return b};function ya(a){this.f=a;this.a=[];this.c={}}\nvar za={latin:\"BESbswy\",\"latin-ext\":\"\\u00e7\\u00f6\\u00fc\\u011f\\u015f\",cyrillic:\"\\u0439\\u044f\\u0416\",greek:\"\\u03b1\\u03b2\\u03a3\",khmer:\"\\u1780\\u1781\\u1782\",Hanuman:\"\\u1780\\u1781\\u1782\"},Aa={thin:\"1\",extralight:\"2\",\"extra-light\":\"2\",ultralight:\"2\",\"ultra-light\":\"2\",light:\"3\",regular:\"4\",book:\"4\",medium:\"5\",\"semi-bold\":\"6\",semibold:\"6\",\"demi-bold\":\"6\",demibold:\"6\",bold:\"7\",\"extra-bold\":\"8\",extrabold:\"8\",\"ultra-bold\":\"8\",ultrabold:\"8\",black:\"9\",heavy:\"9\",l:\"3\",r:\"4\",b:\"7\"},Ba={i:\"i\",italic:\"i\",n:\"n\",normal:\"n\"},\nCa=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;\nfunction Da(a){for(var b=a.f.length,c=0;c<b;c++){var d=a.f[c].split(\":\"),e=d[0].replace(/\\+/g,\" \"),f=[\"n4\"];if(2<=d.length){var g;var m=d[1];g=[];if(m)for(var m=m.split(\",\"),h=m.length,l=0;l<h;l++){var k;k=m[l];if(k.match(/^[\\w-]+$/)){var n=Ca.exec(k.toLowerCase());if(null==n)k=\"\";else{k=n[2];k=null==k||\"\"==k?\"n\":Ba[k];n=n[1];if(null==n||\"\"==n)n=\"4\";else var r=Aa[n],n=r?r:isNaN(n)?\"4\":n.substr(0,1);k=[k,n].join(\"\")}}else k=\"\";k&&g.push(k)}0<g.length&&(f=g);3==d.length&&(d=d[2],g=[],d=d?d.split(\",\"):\ng,0<d.length&&(d=za[d[0]])&&(a.c[e]=d))}a.c[e]||(d=za[e])&&(a.c[e]=d);for(d=0;d<f.length;d+=1)a.a.push(new G(e,f[d]))}};function Ea(a,b){this.c=a;this.a=b}var Fa={Arimo:!0,Cousine:!0,Tinos:!0};Ea.prototype.load=function(a){var b=new B,c=this.c,d=new ta(this.a.api,this.a.text),e=this.a.families;va(d,e);var f=new ya(e);Da(f);z(c,wa(d),C(b));E(b,function(){a(f.a,f.c,Fa)})};function Ga(a,b){this.c=a;this.a=b}Ga.prototype.load=function(a){var b=this.a.id,c=this.c.o;b?A(this.c,(this.a.api||\"https://use.typekit.net\")+\"/\"+b+\".js\",function(b){if(b)a([]);else if(c.Typekit&&c.Typekit.config&&c.Typekit.config.fn){b=c.Typekit.config.fn;for(var e=[],f=0;f<b.length;f+=2)for(var g=b[f],m=b[f+1],h=0;h<m.length;h++)e.push(new G(g,m[h]));try{c.Typekit.load({events:!1,classes:!1,async:!0})}catch(l){}a(e)}},2E3):a([])};function Ha(a,b){this.c=a;this.f=b;this.a=[]}Ha.prototype.load=function(a){var b=this.f.id,c=this.c.o,d=this;b?(c.__webfontfontdeckmodule__||(c.__webfontfontdeckmodule__={}),c.__webfontfontdeckmodule__[b]=function(b,c){for(var g=0,m=c.fonts.length;g<m;++g){var h=c.fonts[g];d.a.push(new G(h.name,ga(\"font-weight:\"+h.weight+\";font-style:\"+h.style)))}a(d.a)},A(this.c,(this.f.api||\"https://f.fontdeck.com/s/css/js/\")+ea(this.c)+\"/\"+b+\".js\",function(b){b&&a([])})):a([])};var Y=new oa(window);Y.a.c.custom=function(a,b){return new sa(b,a)};Y.a.c.fontdeck=function(a,b){return new Ha(b,a)};Y.a.c.monotype=function(a,b){return new ra(b,a)};Y.a.c.typekit=function(a,b){return new Ga(b,a)};Y.a.c.google=function(a,b){return new Ea(b,a)};var Z={load:p(Y.load,Y)};\"function\"===typeof define&&define.amd?define(function(){return Z}):\"undefined\"!==typeof module&&module.exports?module.exports=Z:(window.WebFont=Z,window.WebFontConfig&&Y.load(window.WebFontConfig));}());\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useRef, useEffect } from \"react\";\n\ninterface IProps extends React.PropsWithoutRef<JSX.IntrinsicElements[\"div\"]> {}\n\nconst EDITOR_WALLED_EVENT = \"isEditorWalledEvent\";\nconst EDITOR_EVENT_WALL_CLASS = \"editorEventWall\";\n\n/**\n * A react component that prevents events from propagating up to quill.\n *\n * This marks events so they can be ignored by our own event handlers in quill.\n * Currently this is only implemented for the EmbedSelectionModule. See usages of isEditorWalledEvent\n */\nexport function EditorEventWall(props: IProps) {\n    const ref = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n        const { current } = ref;\n        if (!current) {\n            return;\n        }\n\n        current.addEventListener(\"click\", eventFlagger);\n        current.addEventListener(\"mouseup\", eventFlagger);\n        // current.addEventListener(\"mousedown\", eventFlagger);\n        current.addEventListener(\"keydown\", eventFlagger);\n        return () => {\n            current.removeEventListener(\"click\", eventFlagger);\n            current.removeEventListener(\"mouseup\", eventFlagger);\n            // current.removeEventListener(\"mousedown\", eventFlagger);\n            current.removeEventListener(\"keydown\", eventFlagger);\n        };\n    }, [ref]);\n\n    return (\n        <div\n            ref={ref}\n            {...props}\n            onClick={(e) => {\n                e.preventDefault();\n            }}\n            className={EDITOR_EVENT_WALL_CLASS}\n        />\n    );\n}\n\n/**\n * Event listener that flags items originating from inside of HTMLElement inside an event wall.\n * @param event\n */\nconst eventFlagger = (event: Event) => {\n    event[EDITOR_WALLED_EVENT] = true;\n};\n\n/**\n * Determine if an event has been marked to be walled.\n */\nexport function isEditorWalledEvent(event: Event): boolean {\n    return !!(event as any)[EDITOR_WALLED_EVENT];\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { importantUnit } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { shadowHelper, shadowOrBorderBasedOnLightness } from \"@vanilla/library/src/scripts/styles/shadowHelpers\";\nimport { percent } from \"csx\";\n\nexport const embedMenuClasses = useThemeCache(() => {\n    const style = styleFactory(\"embedMenu\");\n    const globalVars = globalVariables();\n\n    const root = style({\n        display: \"inline-flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        position: \"absolute\",\n        top: 0,\n        left: percent(50),\n        ...Mixins.margin({ horizontal: \"auto\" }),\n        transform: \"translate(-50%, -50%)\",\n        background: ColorsUtils.colorOut(globalVars.mainColors.bg),\n        ...Mixins.border(),\n        ...shadowOrBorderBasedOnLightness(),\n        zIndex: 100,\n        ...Mixins.padding({\n            vertical: 4,\n            horizontal: 2,\n        }),\n        ...{\n            \"&.isOpened\": {\n                borderBottomLeftRadius: 0,\n                borderBottomRightRadius: 0,\n            },\n            \"& > *\": {\n                ...Mixins.margin({ horizontal: 4 }),\n            },\n        },\n    });\n\n    const form = style(\"form\", {\n        display: \"block\",\n        width: percent(100),\n    });\n\n    const imageContainer = style(\"imageContainer\", {\n        position: \"relative\",\n    });\n\n    // Extra specific and defensive here because it's within userContent styles.\n    const paragraph = style(\"paragraph\", {\n        ...{\n            \"&&\": {\n                // Specificity required to override default label styles\n                ...Mixins.padding({\n                    all: 0,\n                    top: importantUnit(globalVars.gutter.quarter),\n                }),\n                ...Mixins.font({\n                    weight: globalVars.fonts.weights.normal,\n                    lineHeight: globalVars.lineHeights.base,\n                    color: globalVars.meta.colors.fg,\n                    size: globalVars.fonts.size.medium,\n                    align: \"left\",\n                }),\n            },\n        },\n    });\n    const verticalPadding = style(\"verticalPadding\", {\n        ...Mixins.padding({\n            vertical: styleUnit(globalVars.gutter.half),\n        }),\n    });\n\n    return {\n        root,\n        form,\n        imageContainer,\n        paragraph,\n        verticalPadding,\n    };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { createContext, PropsWithChildren, ReactNode, useRef, useState } from \"react\";\nimport { embedMenuClasses } from \"@rich-editor/editor/pieces/embedMenuStyles\";\nimport { EditorEventWall } from \"@rich-editor/editor/pieces/EditorEventWall\";\nimport classNames from \"classnames\";\n\ninterface IEmbedMenuContext {\n    selected: string | undefined;\n    setSelected(name: string | undefined);\n}\n\nexport const EmbedMenuContext = createContext<IEmbedMenuContext>({\n    selected: undefined,\n    setSelected: () => {},\n});\n\ninterface IProps {}\n\n/**\n * Renders an embed menu and manages it's context.\n */\nexport function EmbedMenu(props: PropsWithChildren<IProps>) {\n    const { children } = props;\n    const classes = embedMenuClasses();\n    const [selected, setSelected] = useState<string | undefined>();\n    const menuRef = useRef<HTMLDivElement | null>(null);\n    return (\n        <EmbedMenuContext.Provider value={{ selected, setSelected }}>\n            <EditorEventWall>\n                <div\n                    role=\"toolbar\"\n                    ref={menuRef}\n                    className={classNames({ [classes.root]: true, isOpened: selected != null })}\n                >\n                    {children}\n                </div>\n            </EditorEventWall>\n        </EmbedMenuContext.Provider>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nexport interface ILocale {\n    localeID: string;\n    localeKey: string;\n    regionalKey: string;\n    displayNames: {\n        [localeKey: string]: string;\n    };\n}\n\nlet currentLocale = \"en\";\nlet localeStore: ILocale[] = [];\nlet callbacks: Array<() => void> = [];\n\n/**\n * Get the available locales.\n */\nexport function getLocales(): ILocale[] {\n    return localeStore;\n}\n\n/**\n * Register a handler for if the locales change.\n * @param callback\n */\nexport function onLocaleChange(callback: () => void) {\n    callbacks.push(callback);\n}\n\n/**\n * Set the current locale.\n */\nexport function setCurrentLocale(localeKey: string) {\n    currentLocale = localeKey;\n    callbacks.forEach(callback => callback());\n}\n\n/**\n * Get the current locale.\n */\nexport function getCurrentLocale() {\n    return currentLocale;\n}\n\n/**\n * Get the current locale in format accepted by Javascript localization functions.\n *\n * PHP canonicalized locales use `_` for the regional separator.\n * Javascript uses `-`.\n */\nexport function getJSLocaleKey() {\n    return currentLocale.replace(\"_\", \"-\");\n}\n\n/**\n * Load a group of locales.\n */\nexport function loadLocales(locales: ILocale[]) {\n    localeStore = [...localeStore, ...locales];\n    callbacks.forEach(callback => callback());\n}\n\n/**\n * Clear the loaded locales.\n */\nexport function clearLocales() {\n    localeStore = [];\n    callbacks.forEach(callback => callback());\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useState, useContext, useEffect } from \"react\";\nimport { ILocale, getLocales, onLocaleChange, getCurrentLocale } from \"./localeStore\";\nimport { logWarning } from \"@vanilla/utils\";\n\nconst LocaleContext = React.createContext<{\n    locales: ILocale[];\n    currentLocale: string | null;\n}>({\n    locales: [],\n    currentLocale: null,\n});\n\nexport function LocaleProvider(props: { children?: React.ReactNode }) {\n    const [locales, setLocales] = useState(getLocales());\n    const [currentLocale, setCurrentLocale] = useState(getCurrentLocale());\n\n    if (!currentLocale) {\n        logWarning(\"No locale loaded for <LocaleProvider />\");\n    }\n\n    useEffect(() => {\n        setLocales(getLocales());\n        setCurrentLocale(getCurrentLocale());\n\n        onLocaleChange(() => {\n            setLocales(getLocales());\n            setCurrentLocale(getCurrentLocale());\n        });\n    }, [setLocales, setCurrentLocale]);\n\n    return (\n        <LocaleContext.Provider\n            value={{\n                locales,\n                currentLocale,\n            }}\n        >\n            {props.children}\n        </LocaleContext.Provider>\n    );\n}\n\nexport function useLocaleInfo() {\n    return useContext(LocaleContext);\n}\n","import { logError, logWarning } from \"@vanilla/utils\";\n\n/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\ninterface ITranslations {\n    [key: string]: string;\n}\n\nlet translationStore: ITranslations | null = null;\n\nlet internalTranslationDebugValue = false;\n\n/**\n * Get or set the debug flag.\n *\n * @param newValue - The new value of debug.\n * @returns the current debug setting.\n */\nexport function translationDebug(newValue?: boolean): boolean {\n    if (newValue !== undefined) {\n        internalTranslationDebugValue = newValue;\n    }\n\n    return internalTranslationDebugValue;\n}\n\n/**\n * Load a set of key value pairs as translation resources.\n */\nexport function loadTranslations(translations: ITranslations) {\n    translationStore = { ...translations };\n}\n\n/**\n * Clear all translation resources.\n */\nexport function clearTranslations() {\n    translationStore = null;\n}\n\n/**\n * Translate a string into the current locale.\n *\n * @param str - The string to translate.\n * @param defaultTranslation - The default translation to use.\n *\n * @returns Returns the translation or the default.\n */\nexport function translate(str: string, defaultTranslation?: string): string {\n    // Codes that begin with @ are considered literals.\n    if (str.substr(0, 1) === \"@\") {\n        return str.substr(1);\n    }\n\n    const fallback = defaultTranslation !== undefined ? defaultTranslation : str;\n\n    if (!translationStore) {\n        // Test environment allows top level static initialization.\n        const message = `Attempted to translate a value '${str}' before the translation store was initialized.`;\n        switch (process.env.NODE_ENV) {\n            case \"production\":\n                logWarning(message);\n                break;\n            case \"development\":\n                throw new Error(message + \" Don't use t() in the top level of a file or a static property.\");\n            case \"test\":\n                // Tests (like storybook and unit testing) don't need to actually bootstrap a full translation store all the time.\n                break;\n        }\n        return fallback;\n    }\n\n    if (translationStore[str] !== undefined) {\n        return translationStore[str];\n    }\n\n    if (translationDebug()) {\n        return \"☢️☢️☢️\" + fallback + \"☢️☢️☢️\";\n    } else {\n        return fallback;\n    }\n}\n\n/**\n * The t function is an alias for translate.\n */\nexport const t = translate;\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { logError, RecordID } from \"@vanilla/utils\";\n\nexport interface IContentTranslatorProps {\n    isLoading?: boolean;\n    isFullScreen?: boolean;\n    properties: ITranslationProperty[];\n    resource: string;\n    title: string;\n    sourceLocale?: string | null;\n    activeLocale?: string | null; // for organizecategories\n    afterSave?: () => void;\n}\n\n// Subtypes\nexport enum TranslationPropertyType {\n    TEXT = \"text\",\n    TEXT_MULTILINE = \"\",\n}\n\nexport interface ITranslationProperty {\n    recordType: string; // Ex. knowledgeCategory\n    recordID?: RecordID; // Ex. 425\n    recordKey?: string; // Ex. Garden.Description\n    sourceText: string; // Ex. \"Howdy Stranger\"\n    propertyName: string; // Ex. name\n    propertyValidation: ITranslationPropertyValidation;\n    propertyType: TranslationPropertyType;\n}\n\nexport interface ITranslationPropertyValidation {\n    minLength?: number;\n    maxLength?: number;\n}\n\nexport const NullContentTranslator: React.FC<IContentTranslatorProps> = (props) => {\n    logError(\"Rendering a Null Content translator. Be sure to check `shouldDisplay` before rendering.\");\n    return null;\n};\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useContext } from \"react\";\nimport { IContentTranslatorProps, NullContentTranslator } from \"./ContentTranslator\";\nimport { useLocaleInfo } from \"./LocaleProvider\";\n\ninterface IContentTranslator {\n    shouldDisplay: boolean;\n    Translator: React.ComponentType<IContentTranslatorProps>;\n}\n\nconst context = React.createContext<IContentTranslator>({\n    shouldDisplay: false,\n    Translator: NullContentTranslator,\n});\n\nlet _TranslationComponent: React.ComponentType<IContentTranslatorProps> | null = null;\n\n/**\n * Provider of the translation component.\n */\nexport const ContentTranslationProvider = (props: { children: React.ReactNode }) => {\n    const { locales } = useLocaleInfo();\n\n    return (\n        <context.Provider\n            value={{\n                shouldDisplay: _TranslationComponent !== null && locales.length > 1,\n                Translator: _TranslationComponent !== null ? _TranslationComponent : NullContentTranslator,\n            }}\n        >\n            {props.children}\n        </context.Provider>\n    );\n};\n\nContentTranslationProvider.setTranslator = (Translator: React.ComponentType<IContentTranslatorProps>) => {\n    _TranslationComponent = Translator;\n};\n\nexport function useContentTranslator(): IContentTranslator {\n    return useContext(context);\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n/**\n * Get the form data out of a form element.\n *\n * @param formElement - The element to get the data out of.\n *\n * @returns {Object}\n */\nexport function getFormData(formElement: Node | null) {\n    if (!(formElement instanceof HTMLFormElement)) {\n        return {};\n    }\n\n    const data = new FormData(formElement) as any;\n    const result = {};\n\n    data.forEach((key, value) => {\n        result[key] = value;\n    });\n\n    return result;\n}\n\n/**\n * Toggle any attribute on an element.\n *\n * @param element - The element to toggle on.\n * @param attribute - The attribute to toggle.\n */\nexport function toggleAttribute(element: Element, attribute: string) {\n    const newValue = element.getAttribute(attribute) === \"false\";\n    element.setAttribute(attribute, newValue ? \"true\" : \"false\");\n}\n\nconst dataMap = new WeakMap();\n\n/**\n * Set a piece of data specific to a DOM Element. Similar to `$.data`.\n *\n * @param element - The DOM Element to assosciate the data with.\n * @param key - The key to assosciate the data with.\n * @param value - The value to store.\n */\nexport function setData(element: Element, key: string, value: any) {\n    const initialValue = dataMap.has(element) ? dataMap.get(element) : {};\n    initialValue[key] = value;\n\n    dataMap.set(element, initialValue);\n}\n\n/**\n * Get a piece of data specific to a DOM Element. Similar to `$.data`.\n *\n * @param element - The DOM Element to lookup.\n * @param key - The key to lookup.\n * @param defaultValue - A value to use if the element or key aren't found.\n */\nexport function getData(element: Element, key: string, defaultValue?: any) {\n    if (dataMap.has(element) && dataMap.get(element)[key]) {\n        return dataMap.get(element)[key];\n    }\n\n    const attributeString = `data-${key}`;\n\n    if (element.hasAttribute(attributeString)) {\n        return element.getAttribute(attributeString);\n    }\n\n    return defaultValue;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport twemoji from \"twemoji\";\n\nlet emojiSupportedCache: boolean | null = null;\n\n/**\n * Determine if the browser/OS combo has support for real unicode emojis.\n */\nexport function isEmojiSupported() {\n    if (emojiSupportedCache !== null) {\n        return emojiSupportedCache;\n    }\n\n    if (process.env.NODE_ENV !== \"test\") {\n        // Test environment\n        const canvas = document.createElement(\"canvas\");\n        if (canvas.getContext && canvas.getContext(\"2d\")) {\n            const ctx = document.createElement(\"canvas\").getContext(\"2d\");\n            if (ctx) {\n                ctx.fillText(\"😗\", -2, 4);\n                emojiSupportedCache = ctx.getImageData(0, 0, 1, 1).data[3] > 0;\n            } else {\n                emojiSupportedCache = false;\n            }\n        } else {\n            emojiSupportedCache = false;\n        }\n    } else {\n        emojiSupportedCache = true;\n    }\n\n    return emojiSupportedCache;\n}\n\nconst emojiOptions = {\n    className: \"fallBackEmoji\",\n    size: \"72x72\",\n};\n\n/**\n * Returns either native emoji or fallback image\n *\n * @param stringOrNode - A DOM Node or string to convert.\n */\nexport function convertToSafeEmojiCharacters(stringOrNode: string | Node) {\n    if (isEmojiSupported()) {\n        return stringOrNode;\n    }\n    return twemoji.parse(stringOrNode, emojiOptions);\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n/**\n * Register an keyboard listener for the escape key.\n */\nexport class EscapeListener {\n    /**\n     * @param root - The element to watch for the escape listener in.\n     * @param returnElement - The element to return to when escape is pressed.\n     * @param callback\n     */\n    public constructor(\n        private root: HTMLElement,\n        private returnElement?: HTMLElement,\n        private callback?: (event: KeyboardEvent) => void,\n    ) {}\n\n    /**\n     * Start the listeners.\n     */\n    public start = () => {\n        this.root.addEventListener(\"keydown\", this.keydownListener);\n    };\n\n    /**\n     * Stop the listeners.\n     */\n    public stop = () => {\n        this.root.removeEventListener(\"keydown\", this.keydownListener);\n    };\n\n    /**\n     * Handler that checks for the key of an keyboard event and:\n     *\n     * - Returns focous to the element from the constructor.\n     * - Calls the optional callback.\n     */\n    private keydownListener = (event: KeyboardEvent) => {\n        if (event.key === \"Escape\") {\n            if (this.root.contains(document.activeElement)) {\n                event.preventDefault();\n                this.returnElement && this.returnElement.focus();\n                this.callback && this.callback(event);\n            }\n        }\n    };\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { hashString } from \"@vanilla/utils\";\n\nconst delegatedEventListeners = {};\n\n/**\n * Create an event listener using event delegation.\n *\n * @param eventName - The Event to listen for.\n * @param filterSelector - A CSS selector to match against.\n * @param callback - The callback function. This gets passed the fired event.\n * @param scopeSelector - And element to scope the event listener to.\n *\n * @returns The hash of the event. Save this to use removeDelegatedEvent().\n */\nexport function delegateEvent(\n    eventName: string,\n    filterSelector: string,\n    callback: (event: Event, triggeringElement: HTMLElement) => boolean | void,\n    scopeSelector?: string | HTMLElement,\n): string {\n    let functionKey = eventName + filterSelector + callback.toString();\n\n    let scope;\n\n    if (typeof scopeSelector === \"string\") {\n        scope = document.querySelector(scopeSelector);\n\n        if (!scope) {\n            throw new Error(`Unable to find element in the document for scopeSelector: ${scopeSelector}`);\n        } else {\n            functionKey += scopeSelector;\n        }\n    } else if (scopeSelector instanceof HTMLElement) {\n        scope = scopeSelector;\n    } else {\n        scope = document;\n    }\n\n    const eventHash = hashString(functionKey).toString();\n\n    if (!Object.keys(delegatedEventListeners).includes(eventHash)) {\n        const wrappedCallback = event => {\n            // Get the nearest DOMNode that matches the given selector.\n            const match = filterSelector ? event.target.closest(filterSelector) : event.target;\n\n            if (match) {\n                // Call the callback with the matching element as the context.\n                return callback.call(match, event, match);\n            }\n        };\n\n        scope.addEventListener(eventName, wrappedCallback);\n        delegatedEventListeners[eventHash] = {\n            scope,\n            eventName,\n            wrappedCallback,\n        };\n    }\n\n    return eventHash;\n}\n\n/**\n * Remove a delegated event listener.\n *\n * @param eventHash - The event hash passed from delegateEvent().\n */\nexport function removeDelegatedEvent(eventHash: string) {\n    if (delegatedEventListeners[eventHash]) {\n        const { scope, eventName, wrappedCallback } = delegatedEventListeners[eventHash];\n        scope.removeEventListener(eventName, wrappedCallback);\n        delete delegatedEventListeners[eventHash];\n    }\n}\n\n/**\n * Remove all delegated event listeners that have been registered.\n */\nexport function removeAllDelegatedEvents() {\n    Object.keys(delegatedEventListeners).forEach(key => {\n        removeDelegatedEvent(key);\n    });\n}\n\n/**\n * Handler for files being dragged and dropped.\n *\n * @param event - https://developer.mozilla.org/en-US/docs/Web/API/DragEvent\n */\nexport function getDraggedFile(event: DragEvent): FileList | undefined {\n    if (event.dataTransfer && event.dataTransfer.files && event.dataTransfer.files.length) {\n        event.preventDefault();\n\n        return event.dataTransfer.files;\n    }\n}\n\n/**\n * Handler for files being pasted.\n *\n * @param event - https://developer.mozilla.org/en-US/docs/Web/API/DragEvent\n */\nexport function getPastedFile(event: ClipboardEvent): File | undefined | null {\n    if (event.clipboardData && event.clipboardData.items && event.clipboardData.items.length) {\n        const files = Array.from(event.clipboardData.items)\n            .map((item: any) => (item.getAsFile ? item.getAsFile() : null))\n            .filter(Boolean);\n\n        if (files.length > 0) {\n            event.preventDefault();\n            // Currently only 1 file is supported.\n            const mainFile = files[0];\n            return mainFile;\n        }\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n/**\n * Register a callback for focusin and focusin out events. The main improvement here over registering\n * the listeners yourself is that the events fire for the whole tree as 1 item instead of as\n * individual notes.\n *\n * This is particularly useful when you want to track focus leaving or enterring a component\n * without caring about the individual contents inside.\n */\nexport class FocusWatcher {\n    /**\n     * @param watchedNode - The watched dom node.\n     * @param callback - A callback for when the tree focuses and blurs.\n     */\n    public constructor(private watchedNode: Element, private changeHandler: (hasFocus: boolean) => void) {}\n\n    /**\n     * Register the event listeners from this class.\n     */\n    public start = () => {\n        this.watchedNode.addEventListener(\"focusout\", this.handleFocusOut, true);\n        this.watchedNode.addEventListener(\"focusin\", this.handleFocusIn, true);\n        document.addEventListener(\"click\", this.handleClick);\n    };\n\n    /**\n     * Remove the event listeners from this class.\n     */\n    public stop = () => {\n        this.watchedNode.removeEventListener(\"focusout\", this.handleFocusOut, true);\n        this.watchedNode.removeEventListener(\"focusin\", this.handleFocusIn, true);\n        document.removeEventListener(\"click\", this.handleClick);\n    };\n\n    /**\n     * Handle when an element loses focus.\n     */\n    private handleFocusOut = (event: FocusEvent) => {\n        this.checkDomTreeHasFocus(event, this.changeHandler);\n    };\n\n    /**\n     * Handle an element gaining focus.\n     */\n    private handleFocusIn = (event: FocusEvent) => {\n        this.checkDomTreeHasFocus(event, this.changeHandler);\n    };\n\n    /**\n     * Handle an element being clicked.\n     */\n    private handleClick = (event: MouseEvent) => {\n        const triggeringElement = event.target as Element;\n        const wasClicked = this.checkDomTreeWasClicked(triggeringElement);\n        if (!wasClicked) {\n            this.changeHandler(false);\n        }\n    };\n\n    /**\n     * Determine whether or not our DOM tree was clicked.\n     */\n    private checkDomTreeWasClicked(clickedElement: Element) {\n        return (\n            this.watchedNode &&\n            clickedElement &&\n            (this.watchedNode.contains(clickedElement as Element) || this.watchedNode === clickedElement)\n        );\n    }\n\n    /**\n     * Determine if the currently focused element is somewhere inside of (or the same as)\n     * a given Element.\n     *\n     * @param watchedNode - The watched node to look in.\n     */\n    private checkDomTreeHasFocus(event: FocusEvent, callback: (hasFocus: boolean) => void) {\n        setTimeout(() => {\n            const possibleTargets = [\n                // NEEDS TO COME FIRST, because safari will populate relatedTarget on focusin, and its not what we're looking for.\n                document.activeElement, // IE11, Safari.\n                event.relatedTarget as Element, // Chrome (The actual standard)\n                (event as any).explicitOriginalTarget, // Firefox\n            ];\n\n            let activeElement = null;\n            for (const target of possibleTargets) {\n                if (target && target !== document.body) {\n                    activeElement = target;\n                    break;\n                }\n            }\n\n            if (activeElement !== null) {\n                const isWatchedInBody = document.body.contains(this.watchedNode);\n                const isFocusedInBody = document.body.contains(activeElement);\n                const isModal = Boolean(document.getElementById(\"modals\")?.contains(activeElement));\n                const hasFocus = Boolean(\n                    this.watchedNode &&\n                        activeElement &&\n                        (activeElement === this.watchedNode || this.watchedNode.contains(activeElement)),\n                );\n\n                // We will only invalidate based on something actually getting focus.\n                // Make sure we are still mounted before calling this.\n                // It could happen that our flyout is unmounted in between the setTimeout call.\n                // We might have focused on a modal which can't be in the watched tree.\n                if (isWatchedInBody && isFocusedInBody) {\n                    callback(hasFocus || isModal);\n                }\n            }\n        }, 0);\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n/**\n * Use the browser's built-in functionality to quickly and safely escape a string.\n *\n * @param str - The string to escape.\n *\n * @returns Escaped HTML.\n */\nexport function escapeHTML(str: string): string {\n    const div = document.createElement(\"div\");\n    div.appendChild(document.createTextNode(str));\n    return div.innerHTML;\n}\n\n/**\n * Use the browser's built-in functionality to quickly unescape a string.\n * UNSAFE with unsafe strings; only use on previously-escaped ones!\n *\n * @param escapedString - A previously escaped string.\n *\n * @returns The unescaped string.\n */\nexport function unescapeHTML(escapedString: string): string {\n    const div = document.createElement(\"div\");\n    div.innerHTML = escapedString;\n    const child = div.childNodes[0];\n    return child && child.nodeValue ? child.nodeValue : \"\";\n}\n\n/**\n * Determine if the browser is escaping the inner contents of our <noscript /> browser.\n */\nexport function browserEscapesNoScript(): boolean {\n    const ns = document.createElement(\"noscript\");\n    ns.innerHTML = \"<test></test>\";\n    document.body.append(ns);\n    const result = ns.innerHTML.startsWith(\"&lt;\");\n    ns.remove();\n    return result;\n}\n\n/**\n * Get an HTML element from a CSS selector or DOM Node.\n *\n * @param selectorOrElement - A CSS selector or an HTML element.\n *\n * @throws If no element was found.\n * @returns An HTMLElement no matter what.\n */\nexport function ensureHtmlElement(selectorOrElement: string | Node | null): HTMLElement {\n    if (typeof selectorOrElement === \"string\") {\n        selectorOrElement = document.querySelector(selectorOrElement);\n    }\n\n    if (!(selectorOrElement instanceof HTMLElement)) {\n        throw new Error(`HTMLElement could not be found for ${selectorOrElement}.`);\n    }\n\n    return selectorOrElement;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n// A weakmap so we can store multiple load callbacks per script.\nconst loadEventCallbacks: WeakMap<Node, Array<(event) => void>> = new WeakMap();\nconst rejectionCache: Map<string, Error> = new Map();\n\n/**\n * Dynamically load a javascript file.\n */\nexport function ensureScript(scriptUrl: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n        const existingScript: HTMLScriptElement | null = document.querySelector(`script[src='${scriptUrl}']`);\n        if (rejectionCache.has(scriptUrl)) {\n            reject(rejectionCache.get(scriptUrl));\n        }\n        if (existingScript && loadEventCallbacks.has(existingScript)) {\n            // Add another resolveCallback into the weakmap.\n            const callbacks = loadEventCallbacks.get(existingScript);\n            callbacks && callbacks.push(resolve);\n        } else {\n            // The script doesn't exist. Lets create it.\n            const head = document.getElementsByTagName(\"head\")[0];\n            const script = document.createElement(\"script\");\n            script.type = \"text/javascript\";\n            script.src = scriptUrl;\n            script.onerror = (event: ErrorEvent) => {\n                const error = new Error(\"Failed to load a required embed script\");\n                rejectionCache.set(scriptUrl, error);\n                reject(error);\n            };\n\n            const timeout = setTimeout(() => {\n                const error = new Error(`Loading of the script ${scriptUrl} has timed out.`);\n                rejectionCache.set(scriptUrl, error);\n                reject(error);\n            }, 10000);\n\n            loadEventCallbacks.set(script, [resolve]);\n\n            script.onload = event => {\n                clearTimeout(timeout);\n                const callbacks = loadEventCallbacks.get(script);\n                callbacks && callbacks.forEach(callback => callback(event));\n                loadEventCallbacks.delete(script);\n            };\n\n            head.appendChild(script);\n        }\n    });\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { browserEscapesNoScript, unescapeHTML } from \"./sanitization\";\n\n/**\n * Prepare an element and it's contents for use in a shadow root.\n *\n * @param element\n * @param cloneElement - If true, clone the element into a `newElementTag`. Preserves CSS classes and IDs.\n *      Particularly useful for when the initial content is inside of a <noscript /> tag.\n * @param newElementTag\n */\nexport function prepareShadowRoot(\n    element: HTMLElement,\n    cloneElement: boolean = false,\n    newElementTag = \"div\",\n): HTMLElement {\n    let html = element.innerHTML;\n    // This is likely a noscript tag.\n    if (browserEscapesNoScript() || html.trim().startsWith(\"&lt;\")) {\n        html = unescapeHTML(html);\n    }\n    // Safari escapes the contents of the noscript.\n    if (cloneElement) {\n        const newElement = document.createElement(newElementTag);\n\n        // Clone various attributes.\n        newElement.classList.value = element.classList.value;\n        newElement.id = element.id;\n\n        // Insert the element & remove the old old.\n        element.parentNode!.insertBefore(newElement, element);\n        element.remove();\n        element = newElement;\n    } else {\n        // If we aren't making a new real root, we need to empty it out.\n        // Otherwise we'll have duplicate contents.\n        element.innerHTML = \"\";\n    }\n\n    const shadowHeader = element.attachShadow({ mode: \"open\" });\n    shadowHeader.innerHTML = html;\n    return element;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport tabbable from \"tabbable\";\nimport { logError } from \"@vanilla/utils\";\n\n/**\n * A class for handling tabbing inside of a container with various exclusions.\n *\n * The goal is here is to be able to programatically implement various tabbing behaviours\n * required for accessibility.\n */\nexport class TabHandler {\n    private tabbableElements: HTMLElement[];\n\n    /**\n     * Determine if an element is tabbable.\n     */\n    public static isTabbable(element: Node) {\n        const children = tabbable(element.parentNode);\n        return children.includes(element);\n    }\n\n    /**\n     * Construct the handler. Don't be afraid to construct multiple of these.\n     *\n     * The elements in a particular TabHandler are very moment specific.\n     * If the DOM changes underneath it it will likely no longer be valid.\n     *\n     * @param root - The root element to look in.\n     * @param excludedElements - Elements to ignore.\n     * @param excludedRoots - These element's children will be ignored.\n     */\n    public constructor(\n        root: Element = document.documentElement!,\n        private excludedElements: Element[] = [],\n        private excludedRoots: Element[] = [],\n    ) {\n        this.tabbableElements = tabbable(root);\n    }\n\n    /**\n     * Get the next tabbable item within a given tabindex.\n     *\n     * WARNING: Performance can be poor if you pass many excluded roots and do not\n     * sufficiently narrow the tree your are looking in.\n     *\n     * @param from - The currently focused element.\n     * @param reverse - True to get the previous element instead.\n     * @param allowLooping - Whether or not the focus should loop around from beginning <-> end.\n     */\n    public getNext(\n        from: Element | null = document.activeElement,\n        reverse: boolean = false,\n        allowLooping: boolean = true,\n    ): HTMLElement | null {\n        if (!(from instanceof HTMLElement)) {\n            logError(\"Unable to tab to next element, `fromElement` given is not valid: \", from);\n            return null;\n        }\n        const tabbables = this.tabbableElements.filter(this.createExcludeFilterWithExemption(from));\n        const currentTabIndex = tabbables.indexOf(from);\n\n        if (currentTabIndex < 0) {\n            return null;\n        }\n\n        let targetIndex = reverse ? currentTabIndex - 1 : currentTabIndex + 1;\n\n        if (allowLooping) {\n            // Loop over the beginning and ends\n            if (targetIndex < 0) {\n                targetIndex = tabbables.length - 1;\n            } else if (targetIndex >= tabbables.length) {\n                targetIndex = 0;\n            }\n        }\n\n        return tabbables[targetIndex] || null;\n    }\n\n    /**\n     * Get all.\n     */\n    public getAll(from: Element | null = document.activeElement) {\n        if (!(from instanceof HTMLElement)) {\n            logError(\"Unable to tab to next element, `fromElement` given is not valid: \", from);\n            return null;\n        }\n        return this.tabbableElements.filter(this.createExcludeFilterWithExemption(from));\n    }\n\n    /**\n     * Get the first focusable element.\n     */\n    public getInitial(): HTMLElement | null {\n        const tabbables = this.tabbableElements.filter(this.filterAllExcluded);\n        if (tabbables.length > 0) {\n            return tabbables[0];\n        } else {\n            return null;\n        }\n    }\n    /**\n     * Get the last focusable element.\n     */\n    public getLast(): HTMLElement | null {\n        const tabbables = this.tabbableElements.filter(this.filterAllExcluded);\n        if (tabbables.length > 0) {\n            return tabbables[tabbables.length - 1];\n        } else {\n            return null;\n        }\n    }\n\n    /**\n     * Filter out all excluded elements. Allows 1 element and its parents to be exempted.\n     *\n     * The exemption is necessary so we can find our place\n     * if the focus is already in an item that we are trying to exclude.\n     *\n     * @returns A filter for use with [].filter()\n     */\n    private createExcludeFilterWithExemption = (exemption: Element) => {\n        return (elementToFilter: Element): boolean => {\n            const elementIsActiveOrChildOfActive = exemption === elementToFilter || elementToFilter.contains(exemption);\n\n            if (!elementIsActiveOrChildOfActive) {\n                if (this.excludedElements.includes(elementToFilter)) {\n                    return false;\n                }\n                for (const excludedRoot of this.excludedRoots) {\n                    if (excludedRoot !== elementToFilter && excludedRoot.contains(elementToFilter)) {\n                        return false;\n                    }\n                }\n            }\n\n            return true;\n        };\n    };\n\n    /**\n     * A filter for use with [].filter().\n     *\n     * Filters out all excluded elements and roots.\n     */\n    private filterAllExcluded = (elementToFilter: Element): boolean => {\n        if (this.excludedElements.includes(elementToFilter)) {\n            return false;\n        }\n        for (const excludedRoot of this.excludedRoots) {\n            if (excludedRoot !== elementToFilter && excludedRoot.contains(elementToFilter)) {\n                return false;\n            }\n        }\n\n        return true;\n    };\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n// Some polyfills\nimport \"focus-visible\";\nimport smoothscroll from \"smoothscroll-polyfill\";\n\nsmoothscroll.polyfill();\n\nexport * from \"./domData\";\nexport * from \"./emoji\";\nexport * from \"./EscapeListener\";\nexport * from \"./events\";\nexport * from \"./FocusWatcher\";\nexport * from \"./sanitization\";\nexport * from \"./scripts\";\nexport * from \"./shadowDom\";\nexport * from \"./TabHandler\";\nexport * from \"./visibility\";\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n/*\n * Utility function to get positioning of flyout based on props.\n * @param renderAbove - Render flyout above button\n * @param renderLeft - Render flyout towards left\n * @ignore ignore - Do nothing - for legacy\n */\nexport function flyoutPosition(\n    renderAbove: boolean,\n    renderLeft: boolean,\n    ignore: boolean = false,\n    centered = false,\n): any {\n    if (!ignore) {\n        const top = !renderAbove ? \"100%\" : undefined;\n        const bottom = renderAbove ? \"100%\" : undefined;\n        const left = !renderLeft && !centered ? \"0\" : centered ? \"50%\" : undefined;\n        const right = renderLeft && !centered ? \"0\" : undefined;\n        return { top, right, bottom, left };\n    } else {\n        return undefined;\n    }\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\n\ninterface IProps {\n    duration: number;\n    onHover: React.MouseEventHandler | undefined;\n    once?: boolean;\n    children: (providedProps: IProvidedProps) => React.ReactNode;\n}\n\ninterface IProvidedProps {\n    onMouseEnter: React.MouseEventHandler;\n    onMouseLeave: React.MouseEventHandler;\n}\n\n/**\n * Component with render props for handling a hover after a certain duration.\n *\n * Simply spread the provided props over the element you want to track the hover of.\n *\n * @example\n * <Hoverable duration={250} onHover={myCallback}>\n *     {providedProps => {\n *          <div {...providedProps} className=\"someClass\">\n *              // Some deeply neested child.\n *          </div>\n *     }}\n * </Hoverable>\n */\nexport class Hoverable extends React.Component<IProps> {\n    public static defaultProps = {\n        once: true,\n    };\n\n    /**\n     * @inheritdoc\n     */\n    public render(): React.ReactNode {\n        return this.props.children({\n            onMouseEnter: this.mouseEnterHandler,\n            onMouseLeave: this.mouseLeaveHandler,\n        });\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public componentWillUnmount() {\n        this.dismissTimeout();\n    }\n\n    private hoverTimeout: NodeJS.Timeout;\n    private hasExecuted = false;\n\n    /**\n     * Handle the hover event by checking if we've already called ourselves then calling the passed callback.\n     */\n    private handleHover = (event: React.MouseEvent) => {\n        if (this.hasExecuted && this.props.once) {\n            return;\n        }\n\n        this.hasExecuted = true;\n        if (this.props.onHover) {\n            this.props.onHover(event);\n        }\n    };\n\n    /**\n     * Set a timeout when the mouse enters. If the timeout is not removed we have a hover.\n     */\n    private mouseEnterHandler = (event: React.MouseEvent) => {\n        this.hoverTimeout = setTimeout(() => {\n            this.handleHover(event);\n        }, this.props.duration);\n    };\n\n    /**\n     * Remove the timeout for the hover so it doesn't execute again (or at all).\n     */\n    private mouseLeaveHandler = (event: React.MouseEvent) => {\n        this.dismissTimeout();\n    };\n\n    /**\n     * Cleanup timeouts and properties to reset.\n     */\n    private dismissTimeout() {\n        this.hasExecuted = false;\n        if (this.hoverTimeout) {\n            clearTimeout(this.hoverTimeout);\n        }\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { RefObject, useState, useLayoutEffect } from \"react\";\nimport ResizeObserver from \"resize-observer-polyfill\";\nimport debounce from \"lodash/debounce\";\nimport { stableObjectHash } from \"@vanilla/utils\";\n\n// DOMRectReadOnly.fromRect()\nconst EMPTY_RECT: DOMRect = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    toJSON: () => \"\",\n};\n\n/**\n * Utility hook for measuring a dom element.\n * Will return back measurements as a bounding rectangle for the element contained in a ref.\n *\n * @param ref The ref to measure.\n * @param adjustForScrollOffset If set, y values will be adjusted for the current scroll offset.\n * @param watchRef Used to trigger a remeasure if the ref changes.\n */\nexport function useMeasure(\n    ref: RefObject<HTMLElement | null>,\n    adjustForScrollOffset: boolean = false,\n    watchRef: boolean = false,\n) {\n    const [bounds, setContentRect] = useState<DOMRect>(EMPTY_RECT);\n    const refWatch = watchRef ? ref.current : ref;\n    useLayoutEffect(() => {\n        let animationFrameId: number | null = null;\n\n        const measure = () => {\n            animationFrameId = window.requestAnimationFrame(() => {\n                if (!ref.current) {\n                    setContentRect(EMPTY_RECT);\n                    return;\n                }\n                let rect = ref.current.getBoundingClientRect();\n\n                if (adjustForScrollOffset) {\n                    rect = {\n                        ...rect,\n                        y: rect.y + window.scrollY,\n                        top: rect.top + window.scrollY,\n                        bottom: rect.bottom + window.scrollY,\n                        width: rect.width,\n                        height: rect.height,\n                        right: rect.right,\n                        left: rect.left,\n                    };\n                }\n\n                rect.toJSON = () => {\n                    return JSON.stringify({\n                        y: rect.y,\n                        top: rect.top,\n                        bottom: rect.bottom,\n                        width: rect.width,\n                        height: rect.height,\n                        right: rect.right,\n                        left: rect.left,\n                    });\n                };\n\n                setContentRect(rect);\n            });\n        };\n\n        const resizeListener = debounce(() => {\n            measure();\n        }, 100);\n        window.addEventListener(\"resize\", resizeListener);\n\n        const ro = new ResizeObserver(measure);\n        if (ref.current) {\n            ro.observe(ref.current);\n        } else {\n            setContentRect(EMPTY_RECT);\n        }\n\n        return () => {\n            window.cancelAnimationFrame(animationFrameId!);\n            ro.disconnect();\n            resizeListener.cancel();\n            window.removeEventListener(\"resize\", resizeListener);\n            setContentRect(EMPTY_RECT);\n        };\n    }, [adjustForScrollOffset, refWatch, ref]);\n\n    return bounds;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useRef, useEffect, useState, useDebugValue } from \"react\";\nimport { useMeasure } from \"./useMeasure\";\n\n/**\n * Detect if the edges of 2 measures are overlapping.\n *\n * If the edges are touching, but not overlapping, that doesn't count.\n */\nfunction doRectsOverlap(rect1: DOMRectReadOnly, rect2: DOMRectReadOnly) {\n    // For all docblocks here, [] represents rect1 and {} represents rect 2.\n    if (isEmptyRect(rect1) || isEmptyRect(rect2)) {\n        return false;\n    }\n\n    let hasHorizontalOverlap = false;\n\n    //  [      { ]       }\n    if (rect1.left <= rect2.left && rect1.right >= rect2.left) {\n        hasHorizontalOverlap = true;\n    }\n\n    //  {    [  }   ]\n    if (rect2.left <= rect1.left && rect2.right >= rect1.left) {\n        hasHorizontalOverlap = true;\n    }\n\n    //  [   {} ]\n    if (rect1.left <= rect2.left && rect1.right >= rect2.right) {\n        hasHorizontalOverlap = true;\n    }\n\n    //  {  []   }\n    if (rect2.left <= rect1.left && rect2.right >= rect1.right) {\n        hasHorizontalOverlap = true;\n    }\n\n    let hasVerticalOverlap = false;\n\n    // Verical version of  [      { ]       }\n    if (rect1.top <= rect2.top && rect1.bottom >= rect2.top) {\n        hasVerticalOverlap = true;\n    }\n\n    // Verical version of  {    [  }   ]\n    if (rect2.top <= rect1.top && rect2.bottom >= rect1.top) {\n        hasVerticalOverlap = true;\n    }\n\n    // Verical version of  [   {} ]\n    if (rect1.top <= rect2.top && rect1.bottom >= rect2.bottom) {\n        hasVerticalOverlap = true;\n    }\n\n    // Verical version of  {  []   }\n    if (rect2.top <= rect1.top && rect2.bottom >= rect1.bottom) {\n        hasVerticalOverlap = true;\n    }\n\n    // Both overlaps are required to make a collision.\n    return hasVerticalOverlap && hasHorizontalOverlap;\n}\n\nfunction isEmptyRect(rect: DOMRectReadOnly): boolean {\n    return rect.height === 0 || rect.width === 0;\n}\n\nexport function useCollisionDetector() {\n    const collisionSourceRef = useRef<HTMLDivElement | null>(null);\n    let sourceMeasure = useMeasure(collisionSourceRef);\n\n    const vBoundary1Ref = useRef<HTMLDivElement | null>(null);\n    const vBoundary1Measure = useMeasure(vBoundary1Ref);\n\n    const vBoundary2Ref = useRef<HTMLDivElement | null>(null);\n    const vBoundary2Measure = useMeasure(vBoundary2Ref);\n\n    const hBoundary1Ref = useRef<HTMLDivElement | null>(null);\n    const hBoundary1Measure = useMeasure(hBoundary1Ref);\n\n    const hBoundary2Ref = useRef<HTMLDivElement | null>(null);\n    const hBoundary2Measure = useMeasure(hBoundary2Ref);\n\n    const hasCollision =\n        doRectsOverlap(sourceMeasure, vBoundary1Measure) ||\n        doRectsOverlap(sourceMeasure, vBoundary2Measure) ||\n        doRectsOverlap(sourceMeasure, hBoundary1Measure) ||\n        doRectsOverlap(sourceMeasure, hBoundary2Measure);\n\n    useDebugValue({ hasCollision });\n\n    return { collisionSourceRef, hasCollision, vBoundary1Ref, vBoundary2Ref, hBoundary1Ref, hBoundary2Ref };\n}\n","/**\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useDebugValue } from \"react\";\n\n/**\n * Wrapper around useDebugValue.\n *\n * useDebugValue only works in other hooks, not directly in components.\n * As a result we need to wrap it in a custom hook.\n */\nexport function useComponentDebug(debugValue: any) {\n    return useDebugValue(debugValue);\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport React, { useLayoutEffect, useRef } from \"react\";\n\nexport function useDomNodeAttachment(domNodes?: Node[]): React.RefObject<any> {\n    const ref = useRef<HTMLElement | null>();\n\n    useLayoutEffect(() => {\n        if (domNodes && ref.current) {\n            domNodes.forEach((node) => {\n                ref.current?.appendChild(node);\n            });\n        }\n    }, [domNodes]);\n\n    return ref;\n}\n\ninterface IProps extends React.HTMLAttributes<HTMLDivElement> {\n    nodes: Node[];\n}\n\nexport function DomNodeAttacher(_props: IProps) {\n    const { nodes, ...props } = _props;\n    const ref = useDomNodeAttachment(nodes);\n    return <div {...props} ref={ref} />;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useEffect } from \"react\";\n\nimport { EscapeListener } from \"@vanilla/dom-utils\";\n\n/**\n * React hook for listening for an escape press on the keyboard inside root element.\n *\n * When escape is pressed, the return element will be focused if provided or the callback will will be called.\n */\nexport function useEscapeListener({\n    root,\n    returnElement,\n    callback,\n}: {\n    root?: HTMLElement | null;\n    returnElement?: HTMLElement | null;\n    callback?: (event: KeyboardEvent) => void;\n}) {\n    useEffect(() => {\n        if (root === null || returnElement === null) {\n            // Bail out if these are null. That means we have unfilled refs. Undefined means they were not passed and we should use the defaults.\n            return;\n        }\n        const actualRoot = root || document.documentElement;\n        const escapeListener = new EscapeListener(actualRoot, returnElement, callback);\n        escapeListener.start();\n        return escapeListener.stop;\n    }, [root, returnElement, callback]);\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useEffect, useLayoutEffect } from \"react\";\nimport { FocusWatcher } from \"@vanilla/dom-utils\";\n\n/**\n * React hook for creating and destroying a FocusWatcher. See FocusWatcher documentation.\n */\nexport function useFocusWatcher(\n    ref: React.RefObject<Element | null>,\n    changeHandler: (hasFocus: boolean) => void,\n    bypass?: boolean,\n) {\n    useLayoutEffect(() => {\n        if (bypass) {\n            return;\n        }\n        if (ref.current !== null) {\n            const focusWatcher = new FocusWatcher(ref.current, changeHandler);\n            focusWatcher.start();\n            return focusWatcher.stop;\n        }\n    }, [ref, changeHandler, bypass]);\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { useRef, useEffect } from \"react\";\n\n/**\n * Keep a reference to the previous value of something. (during the previous render).\n *\n * @param value\n */\nexport function useLastValue<T>(value: T): T | undefined {\n    const ref = useRef<T>();\n    useEffect(() => void (ref.current = value), [value]);\n    return ref.current;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useState } from \"react\";\n\n/**\n * Return a throw function for use inside of custom hooks & useEffect.\n *\n * This needed because throwing inside of `useEffect` does not propagate up to error boundaries.\n * @see https://github.com/facebook/react/issues/11334\n */\nexport function useThrowError(): (err: Error) => void {\n    const [error, setError] = useState<Error | null>(null);\n    if (error) {\n        throw error;\n    }\n\n    return setError;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { HTMLAttributes } from \"react\";\n\n/**\n * Deconstructs all attributes from HTML element to recreate it in React\n * This helps to avoid using dangerouslySetInnerHTML\n *\n * @param element - The element to deconstruct\n * @param options - Additionnal options. By default, \"class\" is replaced with \"className\".\n * @returns object - the attributes of that element\n */\nexport function deconstructAttributesFromElement(\n    element: Element,\n    options?: {\n        classAsClassName?: boolean;\n        hrefAsTo?: boolean; // for SmartLinks/Link components\n    },\n): HTMLAttributes<any> {\n    const { classAsClassName = true, hrefAsTo = false } = options || {};\n    const attrs = {};\n    Object.values(element.attributes).forEach(attr => {\n        attrs[attr.name] = attr.value;\n    });\n\n    // If this is to be used in React, we want to replace \"class\" with \"className\"\n    if (classAsClassName && attrs.hasOwnProperty(\"class\")) {\n        attrs[\"className\"] = attrs[\"class\"];\n        delete attrs[\"class\"];\n    }\n\n    // If this is to be used with <SmartLink/> OR <Link>. Do not use for regular <a/> tags.\n    if (hrefAsTo && attrs.hasOwnProperty(\"href\")) {\n        attrs[\"to\"] = attrs[\"href\"];\n        delete attrs[\"href\"];\n    }\n\n    return attrs;\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { standardAnimations } from \"@library/styles/animationHelpers\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { viewHeight } from \"csx\";\n\nexport const richEditorVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const varsFormElements = formElementsVariables();\n    const makeThemeVars = variableFactory(\"richEditor\");\n    const animations = standardAnimations();\n\n    const colors = makeThemeVars(\"colors\", {\n        bg: globalVars.mainColors.bg,\n        outline: globalVars.mainColors.primary.fade(0.6),\n    });\n\n    const spacing = makeThemeVars(\"spacing\", {\n        paddingLeft: 36,\n        paddingRight: 36,\n        paddingTop: 12,\n        paddingBottom: 12,\n        embedMenu: 0,\n    });\n\n    const sizing = makeThemeVars(\"sizing\", {\n        minHeight: 200,\n        emojiSize: 40,\n    });\n\n    const menuButton = makeThemeVars(\"menuButton\", {\n        size: 42,\n    });\n\n    const paragraphMenuHandle = makeThemeVars(\"paragraphMenuHandle\", {\n        size: 28,\n        offset: -varsFormElements.border.width + 1,\n    });\n\n    const insertLink = makeThemeVars(\"insertLink\", {\n        width: 287,\n    });\n\n    const flyout = makeThemeVars(\"flyout\", {\n        padding: {\n            vertical: 12,\n            horizontal: 12,\n        },\n        maxHeight: viewHeight(100),\n        height: menuButton.size,\n    });\n\n    const nub = makeThemeVars(\"nub\", {\n        width: 12,\n    });\n\n    const menu = makeThemeVars(\"menu\", {\n        borderWidth: 1,\n        offset: nub.width * 2,\n    });\n\n    const pilcrow = makeThemeVars(\"pilcrow\", {\n        offset: 0,\n        fontSize: 14,\n        animation: {\n            duration: \".3s\",\n            name: animations.fadeIn,\n            timing: \"ease-out\",\n            iterationCount: 1,\n        },\n    });\n\n    const emojiGroup = makeThemeVars(\"emojiGroup\", {\n        paddingLeft: 3,\n        offset: -(varsFormElements.border.width + menu.borderWidth * 2),\n    });\n\n    const embedMenu = makeThemeVars(\"embedMenu\", {\n        padding: 0,\n        mobile: {\n            border: {\n                color: globalVars.mainColors.primary,\n            },\n            transition: {\n                duration: \".15s\",\n                timing: \"ease-out\",\n            },\n        },\n    });\n\n    const embedButton = makeThemeVars(\"embedButton\", {\n        display: \"block\",\n        offset: -varsFormElements.border.width,\n    });\n\n    const text = makeThemeVars(\"text\", {\n        offset: 0,\n        placeholder: {\n            color: globalVars.mixBgAndFg(0.5),\n        },\n    });\n\n    const title = makeThemeVars(\"titleInput\", {\n        height: globalVars.fonts.size.title + globalVars.gutter.half,\n        fontSize: globalVars.fonts.size.title,\n        placeholder: {\n            color: globalVars.mixBgAndFg(0.5),\n        },\n    });\n\n    const scrollContainer = makeThemeVars(\"scrollContainer\", {\n        overshoot: 48,\n    });\n\n    const emojiBody = makeThemeVars(\"emojiBody\", {\n        height: 252,\n        padding: {\n            horizontal: 3,\n            top: 3,\n            bottom: 0,\n        },\n    });\n\n    const emojiHeader = makeThemeVars(\"emojiHeader\", {\n        padding: {\n            horizontal: 12,\n            vertical: 4,\n        },\n    });\n\n    const emojiFooter = makeThemeVars(\"emojiFooter\", {\n        height: menuButton.size,\n    });\n\n    const buttonContents = makeThemeVars(\"buttonContents\", {\n        state: {\n            bg: globalVars.mainColors.primary.fade(0.1),\n        },\n    });\n\n    const iconWrap = makeThemeVars(\"iconWrap\", {\n        width: 32,\n        height: 32,\n    });\n\n    const richEditorWidth = 8 * sizing.emojiSize;\n\n    const modernFrame = makeThemeVars(\"modernFrame\", {\n        padding: 16,\n        margin: 16,\n    });\n\n    return {\n        colors,\n        spacing,\n        sizing,\n        menuButton,\n        paragraphMenuHandle,\n        insertLink,\n        flyout,\n        nub,\n        menu,\n        pilcrow,\n        emojiGroup,\n        embedButton,\n        text,\n        title,\n        embedMenu,\n        scrollContainer,\n        emojiBody,\n        buttonContents,\n        emojiHeader,\n        emojiFooter,\n        iconWrap,\n        richEditorWidth,\n        modernFrame,\n    };\n});\n","/**\n * Utility function related to logging/debugging.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nlet internalDebugValue = false;\n\n/**\n * Get or set the debug flag.\n *\n * @param newValue - The new value of debug.\n * @returns the current debug setting.\n */\nexport function debug(newValue?: boolean): boolean {\n    if (newValue !== undefined) {\n        internalDebugValue = newValue;\n    }\n\n    return internalDebugValue;\n}\n\n/**\n * Log something to console.\n * This only prints in debug mode.\n *\n * @param value - The value to log.\n */\nexport function logDebug(...value: any[]) {\n    if (internalDebugValue) {\n        // eslint-disable-next-line no-console\n        console.log(...value);\n    }\n}\n\n/**\n * Log something to console.\n * This only prints in debug mode, and if outputLog is true.\n *\n * @param outputLog - Condition to render log\n * @param value - The value to log.\n */\nexport function logDebugConditionnal(outputLog = false, ...value: any[]) {\n    if (internalDebugValue && outputLog) {\n        // eslint-disable-next-line no-console\n        console.log(...value);\n    }\n}\n\n/**\n * Log an error to console.\n * This will not run in test mode _unless_ debug is set to true.\n *\n * @param value - The value to log.\n */\nexport function logError(...value: any[]) {\n    if (!internalDebugValue && process.env.NODE_ENV === \"test\") {\n        return;\n    }\n    // eslint-disable-next-line no-console\n    console.error(...value);\n}\n\n/**\n * Log a warning to console.\n * This will not run in test mode _unless_ debug is set to true.\n *\n * @param value - The value to log.\n */\nexport function logWarning(...value: any[]) {\n    if (!internalDebugValue || process.env.NODE_ENV === \"test\") {\n        return;\n    }\n    // eslint-disable-next-line no-console\n    console.warn(...value);\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport Button from \"@library/forms/Button\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport InputTextBlock from \"@library/forms/InputTextBlock\";\nimport FrameBody from \"@library/layout/frame/FrameBody\";\nimport FrameFooter from \"@library/layout/frame/FrameFooter\";\nimport { t } from \"@library/utility/appUtils\";\nimport { EditorEventWall } from \"@rich-editor/editor/pieces/EditorEventWall\";\nimport { embedMenuClasses } from \"@rich-editor/editor/pieces/embedMenuStyles\";\nimport Frame from \"@vanilla/library/src/scripts/layout/frame/Frame\";\nimport FrameHeader from \"@vanilla/library/src/scripts/layout/frame/FrameHeader\";\nimport Modal from \"@vanilla/library/src/scripts/modal/Modal\";\nimport ModalSizes from \"@vanilla/library/src/scripts/modal/ModalSizes\";\nimport { useUniqueID } from \"@vanilla/library/src/scripts/utility/idUtils\";\nimport { useLastValue } from \"@vanilla/react-utils\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\n\ninterface IProps {\n    onSave: (meta: IImageMeta) => void;\n    className?: string;\n    initialAlt: string;\n    onClose: () => void;\n    isVisible: boolean;\n}\n\nexport interface IImageMeta {\n    alt: string;\n}\n\n/**\n * A class for rendering Giphy embeds.\n */\nexport function ImageEmbedModal(props: IProps) {\n    const classes = embedMenuClasses();\n    const [alt, setAlt] = useState(props.initialAlt);\n    const inputRef = useRef<HTMLInputElement>(null);\n\n    const handleTextChange = useCallback((event) => {\n        if (event) {\n            event.stopPropagation();\n            event.preventDefault();\n            setAlt(event.target.value || \"\");\n        }\n    }, []);\n\n    // Focus the input when opened.\n    useEffect(() => {\n        inputRef.current?.focus();\n    }, []);\n\n    const saveAndClose = () => {\n        setAlt(alt);\n        props.onSave({\n            alt,\n        });\n        props.onClose();\n    };\n\n    const titleID = useUniqueID(\"modalTitle\");\n\n    return (\n        <Modal isVisible={props.isVisible} size={ModalSizes.SMALL} titleID={titleID} exitHandler={props.onClose}>\n            <EditorEventWall>\n                <form className={classes.form}>\n                    <Frame\n                        header={<FrameHeader title={t(\"Alt Text\")} titleID={titleID} closeFrame={saveAndClose} />}\n                        body={\n                            <FrameBody className={classes.verticalPadding}>\n                                <InputTextBlock\n                                    label={t(\n                                        \"Alternative text helps users with accessibility concerns and improves SEO.\",\n                                    )}\n                                    labelClassName={classes.paragraph}\n                                    inputProps={{\n                                        required: true,\n                                        value: alt,\n                                        onChange: handleTextChange,\n                                        inputRef,\n                                        placeholder: t(\"Example: Image of a Coffee\"),\n                                        onKeyPress: (event: React.KeyboardEvent) => {\n                                            if (event.key === \"Enter\") {\n                                                event.preventDefault();\n                                                event.stopPropagation();\n                                                saveAndClose();\n                                            }\n                                        },\n                                    }}\n                                />\n                            </FrameBody>\n                        }\n                        footer={\n                            <FrameFooter justifyRight={true}>\n                                <Button\n                                    baseClass={ButtonTypes.TEXT_PRIMARY}\n                                    onClick={(e) => {\n                                        e.preventDefault();\n                                        e.stopPropagation();\n                                        saveAndClose();\n                                    }}\n                                >\n                                    {t(\"Save\")}\n                                </Button>\n                            </FrameFooter>\n                        }\n                    />\n                </form>\n            </EditorEventWall>\n        </Modal>\n    );\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport {\n    absolutePosition,\n    appearance,\n    singleBorder,\n    singleLineEllipsis,\n    userSelect,\n    pointerEvents,\n    importantUnit,\n} from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { calc, important, percent, quote, translateY } from \"csx\";\nimport { richEditorVariables } from \"@rich-editor/editor/richEditorVariables\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { CSSObject } from \"@emotion/css\";\nimport { buttonResetMixin } from \"@vanilla/library/src/scripts/forms/buttonMixins\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\n\nexport const richEditorClasses = useThemeCache((legacyMode: boolean) => {\n    const globalVars = globalVariables();\n    const style = styleFactory(\"richEditor\");\n    const vars = richEditorVariables();\n    const formVars = formElementsVariables();\n    const mediaQueries = layoutVariables().mediaQueries();\n\n    const root = style({\n        position: \"relative\",\n        display: \"block\",\n        ...{\n            \"&.isDisabled\": {\n                ...{\n                    \"&, &.richEditor-button\": {\n                        cursor: important(\"progress\"),\n                    },\n                },\n            },\n            \".richEditor-textWrap, .richEditor-frame\": {\n                display: \"flex\",\n                flexDirection: \"column\",\n                flexGrow: 1,\n                position: \"relative\",\n            },\n            \"& .ql-clipboard\": {\n                ...Mixins.absolute.srOnly(),\n                position: \"fixed\", // Fixed https://github.com/quilljs/quill/issues/1374#issuecomment-415333651\n            },\n            \".richEditor-nextInput, .iconButton, .richEditor-button\": {\n                ...singleLineEllipsis(),\n                ...appearance(),\n                position: \"relative\",\n                border: 0,\n                padding: 0,\n                background: \"none\",\n                textAlign: \"left\",\n            },\n            \".Close-x\": {\n                display: \"block\",\n                cursor: \"pointer\",\n            },\n            \".content-wrapper\": {\n                height: percent(100),\n            },\n            \".embedDialogue\": {\n                position: \"relative\",\n            },\n        },\n    });\n\n    const iconWrap = style(\"iconWrap\", {\n        ...pointerEvents(),\n        content: quote(``),\n        ...absolutePosition.middleOfParent(),\n        width: styleUnit(vars.iconWrap.width),\n        height: styleUnit(vars.iconWrap.width),\n        ...Mixins.border({\n            radius: 3,\n            color: globalVars.elementaryColors.transparent,\n        }),\n    });\n\n    const paragraphMenu = style(\"paragraphMenu\", {\n        position: \"absolute\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        top: styleUnit(vars.pilcrow.offset),\n        left: 0,\n        marginLeft: styleUnit(-globalVars.gutter.quarter - (!legacyMode ? globalVars.gutter.size * 2 : 0)),\n        transform: `translateX(-100%) translateY(-50%)`,\n        height: styleUnit(vars.paragraphMenuHandle.size),\n        width: styleUnit(vars.paragraphMenuHandle.size),\n        animationName: vars.pilcrow.animation.name,\n        animationDuration: vars.pilcrow.animation.duration,\n        animationTimingFunction: vars.pilcrow.animation.timing,\n        animationIterationCount: vars.pilcrow.animation.iterationCount,\n        zIndex: 10,\n        ...{\n            \".richEditor-button&.isActive:hover\": {\n                cursor: \"default\",\n            },\n            \"&.isMenuInset\": {\n                transform: translateY(\"-50%\"),\n            },\n        },\n    });\n\n    const paragraphMenuMobile = style(\"paragraphMenu-mobile\", {\n        position: \"relative\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        top: important(0),\n    });\n\n    const menuBar = style(\"menuBar\", {\n        position: \"relative\",\n        width: styleUnit(vars.menuButton.size * 4),\n        fontSize: styleUnit(globalVars.fonts.size.medium),\n        overflow: \"hidden\",\n        zIndex: 1,\n    });\n\n    const menuBarToggles = style(\"menuBarToggles\", {\n        position: \"relative\",\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        flexWrap: \"nowrap\",\n        width: styleUnit(vars.menuButton.size * 4),\n    });\n\n    const paragraphMenuHandle = style(\"paragraphMenuHandle\", {\n        ...appearance(),\n        ...userSelect(),\n        background: \"transparent\",\n        border: 0,\n        display: \"block\",\n        cursor: \"pointer\",\n        width: styleUnit(formVars.sizing.height),\n        height: styleUnit(formVars.sizing.height),\n        padding: 0,\n        maxWidth: styleUnit(formVars.sizing.height),\n        minWidth: styleUnit(formVars.sizing.height),\n        outline: 0,\n        ...{\n            \"&:focus, &:hover\": {\n                color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n            },\n            [`&.isOpen .${iconWrap}`]: {\n                backgroundColor: ColorsUtils.colorOut(vars.buttonContents.state.bg),\n            },\n        },\n    });\n\n    const paragraphMenuHandleMobile = style(\"paragraphMenuHandleMobile\", {\n        width: styleUnit(vars.menuButton.size),\n        height: styleUnit(vars.menuButton.size),\n        maxWidth: styleUnit(vars.menuButton.size),\n        minWidth: styleUnit(vars.menuButton.size),\n    });\n\n    const text = style(\n        \"text\",\n        {\n            position: \"relative\",\n            whiteSpace: important(\"pre-wrap\"),\n            outline: 0,\n            paddingBottom: 24, // So the user has room to click.\n\n            ...{\n                // When the editor is empty we should be displaying a placeholder.\n                \"&.ql-blank::before\": {\n                    content: `attr(placeholder)`,\n                    display: \"block\",\n                    color: ColorsUtils.colorOut(vars.text.placeholder.color),\n                    position: \"absolute\",\n                    top: vars.text.offset,\n                    left: 0,\n                    cursor: \"text\",\n                },\n            },\n        },\n        mediaQueries.oneColumnDown({\n            fontSize: importantUnit(16), // for iOS\n        }),\n    );\n\n    const menuItems = style(\"menuItems\", {\n        msOverflowStyle: \"-ms-autohiding-scrollbar\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n        flexWrap: \"nowrap\",\n        listStyle: \"none\",\n        padding: 0,\n        margin: 0,\n        zIndex: 1,\n        overflow: \"visible\",\n        ...{\n            \".richEditor-menuItem\": {\n                display: \"block\",\n                padding: 0,\n                margin: 0,\n                ...{\n                    \".richEditor-button\": {\n                        display: \"block\",\n                        width: styleUnit(vars.menuButton.size),\n                        fontSize: styleUnit((vars.menuButton.size * 24) / 39),\n                        lineHeight: styleUnit(vars.menuButton.size),\n                        ...{\n                            \"&.emojiChar-🇺🇳\": {\n                                fontSize: styleUnit(10),\n                            },\n                        },\n                    },\n                    \"&:first-child .richEditor-embedButton\": {\n                        borderBottomLeftRadius: styleUnit(globalVars.border.radius),\n                    },\n                    \"&.isRightAligned\": {\n                        marginLeft: \"auto\",\n                    },\n                },\n            },\n        },\n    });\n\n    const button = style(\"button\", {\n        ...buttonResetMixin(),\n        display: \"block\",\n        ...userSelect(),\n        ...appearance(),\n        cursor: \"pointer\",\n        width: styleUnit(vars.menuButton.size),\n        height: styleUnit(vars.menuButton.size),\n        border: 0,\n        padding: 0,\n        overflow: \"hidden\",\n        position: \"relative\",\n        color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n        outline: 0,\n        ...{\n            \"&:hover\": {\n                color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n            },\n            \"&:focus\": {\n                color: ColorsUtils.colorOut(globalVars.mainColors.secondary),\n            },\n            \"&:active\": {\n                color: ColorsUtils.colorOut(globalVars.mainColors.secondary),\n            },\n            [`&:hover .${iconWrap}`]: {\n                color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n                backgroundColor: ColorsUtils.colorOut(vars.buttonContents.state.bg),\n            },\n            [`&.isOpen .${iconWrap}`]: {\n                backgroundColor: ColorsUtils.colorOut(vars.buttonContents.state.bg),\n            },\n            [`&.focus-visible .${iconWrap}`]: {\n                backgroundColor: ColorsUtils.colorOut(vars.buttonContents.state.bg),\n            },\n            \"&.richEditor-formatButton, &.richEditor-embedButton\": {\n                height: styleUnit(vars.menuButton.size),\n            },\n            \"&.emojiGroup\": {\n                display: \"block\",\n                width: styleUnit(vars.menuButton.size),\n                height: styleUnit(vars.menuButton.size),\n                textAlign: \"center\",\n            },\n            \"&:not(:disabled)\": {\n                cursor: \"pointer\",\n            },\n            [`&.isActive .${iconWrap}`]: {\n                backgroundColor: ColorsUtils.colorOut(vars.buttonContents.state.bg),\n            },\n        },\n    });\n\n    const topLevelButtonActive = style(\"topLevelButtonActive\", {\n        color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n        ...{\n            [`.${iconWrap}`]: {\n                backgroundColor: ColorsUtils.colorOut(vars.buttonContents.state.bg),\n            },\n        },\n    });\n\n    const menuItem = style(\"menuItem\", {\n        display: \"block\",\n        padding: 0,\n        margin: 0,\n        overflow: \"visible\",\n        ...{\n            \".richEditor-button, &.richEditor-button\": {\n                width: styleUnit(vars.menuButton.size),\n                height: styleUnit(vars.menuButton.size),\n                maxWidth: styleUnit(vars.menuButton.size),\n                fontSize: styleUnit((vars.menuButton.size * 24) / 39),\n                lineHeight: styleUnit(vars.menuButton.size),\n                ...{\n                    \"&.emojiChar-🇺🇳\": {\n                        fontSize: styleUnit(14),\n                    },\n                },\n            },\n            \"&.isRightAligned\": {\n                marginLeft: \"auto\",\n            },\n        },\n    });\n\n    const upload = style(\"upload\", {\n        display: important(\"none\"),\n    });\n\n    const embedBar = style(\"embedBar\", {\n        display: \"block\",\n        width: percent(100),\n        ...Mixins.padding({\n            horizontal: legacyMode ? 0 : (vars.menuButton.size - globalVars.icon.sizes.small) / 2,\n            vertical: vars.embedMenu.padding,\n        }),\n        background: legacyMode ? undefined : ColorsUtils.colorOut(vars.colors.bg),\n    });\n\n    const embedBarSeparator = style(\"embedBarSeparator\", {\n        height: styleUnit(globalVars.gutter.quarter),\n        width: styleUnit(globalVars.gutter.quarter),\n        borderRadius: styleUnit(globalVars.gutter.quarter),\n        background: ColorsUtils.colorOut(globalVars.mainColors.fg),\n        ...Mixins.margin({ horizontal: globalVars.gutter.half }),\n    });\n\n    const icon = style(\"icon\", {\n        display: \"block\",\n        margin: \"auto\",\n        height: styleUnit(globalVars.icon.sizes.default),\n        width: styleUnit(globalVars.icon.sizes.default),\n    });\n\n    const legacyFrame = style(\"legacyFrame\", {\n        margin: \"auto\",\n        height: \"initial\",\n        minHeight: styleUnit(vars.sizing.minHeight + vars.menuButton.size),\n        position: \"relative\",\n        backgroundColor: ColorsUtils.colorOut(vars.colors.bg),\n        padding: 0,\n        ...{\n            \"&.isMenuInset\": {\n                overflow: \"initial\",\n                position: \"relative\",\n            },\n        },\n    });\n\n    const close = style(\"close\", {\n        ...absolutePosition.middleRightOfParent(),\n        ...userSelect(),\n        ...appearance(),\n        width: styleUnit(vars.menuButton.size),\n        height: styleUnit(vars.menuButton.size),\n        lineHeight: styleUnit(vars.menuButton.size),\n        verticalAlign: \"bottom\",\n        textAlign: \"center\",\n        background: \"transparent\",\n        cursor: \"pointer\",\n        border: 0,\n        outline: 0,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n    });\n\n    const flyoutDescription = style(\"flyoutDescription\", {\n        marginBottom: \".5em\",\n    });\n\n    const separator = style(\"separator\", {\n        borderTop: singleBorder(),\n        marginBottom: styleUnit(8),\n    });\n\n    const position = style(\"position\", {\n        ...{\n            \"&&\": {\n                position: \"absolute\",\n                left: calc(`50% - ${styleUnit(vars.spacing.paddingLeft / 2)}`),\n            },\n            \"&.isUp\": {\n                bottom: calc(`50% + ${styleUnit(vars.spacing.paddingRight / 2 - formVars.border.width)}`),\n            },\n            \"&.isDown\": {\n                top: calc(`50% + ${styleUnit(vars.spacing.paddingRight / 2 - formVars.border.width)}`),\n            },\n        },\n    });\n\n    const paragraphMenuPanel = style(\"paragraphMenuPanel\", {});\n\n    const emojiGroup = style(\"emojiGroup\", {\n        ...{\n            [`&.isSelected .${iconWrap}`]: {\n                backgroundColor: ColorsUtils.colorOut(vars.buttonContents.state.bg),\n            },\n        },\n    });\n\n    const flyoutOffset = style(\"flyoutOffset\", {\n        marginTop: styleUnit((vars.menuButton.size - vars.iconWrap.width) / -2 + 1),\n    });\n\n    const placeholder = style(\"placeholder\", {\n        ...{\n            \"&&&:before\": {\n                margin: 0,\n            },\n        },\n    });\n\n    return {\n        root,\n        menuBar,\n        menuBarToggles,\n        paragraphMenuHandle,\n        paragraphMenuHandleMobile,\n        text,\n        menuItems,\n        upload,\n        embedBar,\n        embedBarSeparator,\n        menuItem,\n        button,\n        topLevelButtonActive,\n        icon,\n        close,\n        flyoutDescription,\n        paragraphMenu,\n        paragraphMenuMobile,\n        separator,\n        position,\n        legacyFrame,\n        paragraphMenuPanel,\n        iconWrap,\n        flyoutOffset,\n        emojiGroup,\n        placeholder,\n    };\n});\n","/**\n * At-who setup for legacy @mentions.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { formatUrl, getMeta } from \"@library/utility/appUtils\";\nimport { logDebug, matchAtMention as _matchAtMention } from \"@vanilla/utils\";\n\n// Store cache results in an outer scoped variable., so all instances share the same data\n// and can build the cache together.\nconst atCache = {};\nconst atEmpty = {};\n\n// The current raw match. This is needed to properly match quoted strings.\nlet rawMatch: string | undefined;\n\n// Set minimum characters to type for @mentions to fire\nconst minCharacters = getMeta(\"mentionMinChars\", 2);\n\n// Max suggestions to show in flyouts.\nconst maxSuggestions = getMeta(\"mentionSuggestionCount\", 5);\n\n// Server response limit. This should match the limit set in\n// *UserController->TagSearch* and UserModel->TagSearch\nconst serverLimit = 30;\n\n// Emoji, set in definition list in foot, by Emoji class. Make sure\n// that class is getting instantiated, otherwise emoji will be empty.\n\ninterface IEmojiData {\n    assetPath?: string;\n    emoji?: {\n        [key: string]: string;\n    };\n    format?: string;\n}\n\nconst emojiData: IEmojiData = getMeta(\"emoji\", {});\nconst emojis = emojiData.emoji || {};\nconst emojiFormat = emojiData.format || \"\";\nconst emojiAssetPath = emojiData.assetPath || \"\";\n\nconst emojiList = Object.entries(emojis).map(([index, emojiImageUrl]) => {\n    const parts = emojiImageUrl.split(\".\");\n\n    return { name: index, filename: emojiImageUrl, basename: parts[0], ext: \".\" + parts[1] };\n});\n\nconst emojiContentTemplate = emojiFormat\n    .replace(/{(.+?)}/g, \"$${$1}\")\n    .replace(\"%1$s\", \"${src}\")\n    .replace(\"%2$s\", \"${name}\")\n    .replace(\"${src}\", emojiAssetPath + \"/${filename}\")\n    .replace(\"${dir}\", emojiAssetPath);\nconst emojiTemplate =\n    '<li data-value=\":${name}:\" class=\"at-suggest-emoji\"><span class=\"emoji-wrap\">' +\n    emojiContentTemplate +\n    '</span> <span class=\"emoji-name\">${name}</span></li>';\n\n/**\n * Match an @mention\n *\n * @param flag - The character sequence used to trigger this match (e.g. :).\n * @param subtext - The string to be tested.\n * @param shouldStartWithSpace - Should the pattern include a test for a whitespace prefix?\n * @returns Matching string if successful. Null on failure to match.\n */\nexport function matchAtMention(flag: string, subtext: string, shouldStartWithSpace: boolean): string | null {\n    const match = _matchAtMention(subtext, shouldStartWithSpace);\n    if (match) {\n        rawMatch = match.rawMatch;\n        return match.match;\n    }\n\n    return null;\n}\n\n/**\n * Custom matching for our emoji images. Eg. :) :/ >:(\n *\n * @param flag - The character sequence used to trigger this match (e.g. :).\n * @param subtext - The string to be tested.\n * @param shouldStartWithSpace - Should the pattern include a test for a whitespace prefix?\n * @returns Matching string if successful.  Null on failure to match.\n */\nexport function matchFakeEmoji(flag, subtext, shouldStartWithSpace) {\n    flag = flag.replace(/[-[]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n    if (shouldStartWithSpace) {\n        flag = \"(?:^|\\\\s)\" + flag;\n    }\n\n    // Some browsers append a linefeed to the end of subtext.  We need to allow for it.\n    const regexp = new RegExp(flag + \"([A-Za-z0-9_+-]*|[^\\\\x00-\\\\xff]*)(?:\\\\n)?$\", \"gi\");\n    const match = regexp.exec(subtext);\n\n    if (match) {\n        return match[2] || match[1];\n    } else {\n        return null;\n    }\n}\n\nexport function initializeAtComplete(editorElement, iframe?: any) {\n    // Handle iframe situation\n    const iframeWindow = iframe ? iframe.contentWindow : \"\";\n\n    const remoteDataHandler = (query, callback) => {\n        // Do this because of undefined when adding spaces to\n        // matcher callback, as it will be monitoring changes.\n        query = query || \"\";\n\n        // Only all query strings greater than min_characters\n        if (query.length >= minCharacters) {\n            // If the cache array contains less than LIMIT 30\n            // (according to server logic), then there's no\n            // point sending another request to server, as there\n            // won't be any more results, as this is the maximum.\n            let shouldContinueFiltering = true;\n\n            // Remove last character so that the string can be\n            // found in the cache, if exists, then check if its\n            // matching array has less than the server limit of\n            // matches, which means there are no more, so save the\n            // additional server request from being sent.\n            let filterString = \"\";\n\n            // Loop through string and find first closest match in\n            // the cache, and if a match, check if more filtering\n            // is required.\n            for (let i = 0, l = query.length; i < l; i++) {\n                filterString = query.slice(0, -i);\n\n                if (atCache[filterString] && atCache[filterString].length < serverLimit) {\n                    // Add this other query to empty array, so that it\n                    // will not fire off another request.\n                    atEmpty[query] = query;\n\n                    // Do not filter more, meaning, do not send\n                    // another server request, as all the necessary\n                    // data is already in memory.\n                    shouldContinueFiltering = false;\n                    break;\n                }\n            }\n\n            // Check if query would be empty, based on previously\n            // cached empty results. Compare against the start of\n            // the latest query string.\n            let isQueryEmpty = false;\n\n            // Loop through cache of empty query strings.\n            for (const key in atEmpty) {\n                if (atEmpty.hasOwnProperty(key)) {\n                    // See if cached empty results match the start\n                    // of the latest query. If so, then no point\n                    // sending new request, as it will return empty.\n                    if (query.match(new RegExp(\"^\" + key + \"+\")) !== null) {\n                        isQueryEmpty = true;\n                        break;\n                    }\n                }\n            }\n\n            const filterSuccessHandler = (data) => {\n                if (Array.isArray(data)) {\n                    data.forEach((result) => {\n                        if (typeof result === \"object\" && typeof result.name === \"string\") {\n                            // Convert special characters to safely insert into template.\n                            result.name = result.name\n                                .replace(/&/g, \"&amp;\")\n                                .replace(/</g, \"&lt;\")\n                                .replace(/>/g, \"&gt;\")\n                                .replace(/\"/g, \"&quot;\")\n                                .replace(/'/g, \"&apos;\");\n                        }\n                    });\n                }\n\n                callback(data);\n\n                // If data is empty, cache the results to prevent\n                // other requests against similarly-started\n                // query strings.\n                if (data.length) {\n                    atCache[query] = data;\n                } else {\n                    atEmpty[query] = query;\n                }\n            };\n\n            // Produce the suggestions based on data either\n            // cached or retrieved.\n            if (shouldContinueFiltering && !isQueryEmpty && !atCache[query]) {\n                $.getJSON(\n                    formatUrl(\"/user/tagsearch\"),\n                    {\n                        q: query,\n                        limit: serverLimit,\n                    },\n                    filterSuccessHandler,\n                );\n            } else {\n                // If no point filtering more as the parent filter\n                // has not been maxed out with responses, use the\n                // closest parent filter instead of the latest\n                // query string.\n                if (!shouldContinueFiltering) {\n                    callback(atCache[filterString]);\n                } else {\n                    callback(atCache[query]);\n                }\n            }\n        }\n    };\n\n    /**\n     * Pre-insert handler for atwho.\n     *\n     * Note, in content editable mode (iframe for us), the value is surrounded by span tags.\n     */\n    function beforeInsertHandler(value: string, $li: JQuery<any>): string {\n        // It's better to use the value provided, as it may have\n        // html tags around it, depending on mode. Using the\n        // regular expression avoids the need to check what mode\n        // the suggestion is made in, and then constructing\n        // it based on that. Optional assignment for undefined\n        // matcher callback results.\n        let username = $li.data(\"value\") || \"\";\n        // Pop off the flag--usually @ or :\n        username = username.slice(1, username.length);\n\n        // Check if there are any whitespaces, and if so, add\n        // quotation marks around the whole name.\n        const requiresQuotation = /[^\\w-]/.test(username);\n\n        // Check if there are already quotation marks around\n        // the string--double or single.\n        const hasQuotation = /([\"'])(.+)([\"'])/g.test(username);\n\n        let insert = username;\n        if (requiresQuotation && !hasQuotation) {\n            // Do not even need to have value wrapped in\n            // any tags at all. It will be done automatically.\n            // insert = value.replace(/(.*\\>?)@([\\w\\d\\s\\-\\+\\_]+)(\\<?.*)/, '$1@\"$2\"$3');\n            insert = '\"' + username + '\"';\n        }\n\n        // This is needed for checking quotation mark directly\n        // after at character, and preventing another at character\n        // from being inserted into the page.\n        const rawAtMatch = rawMatch || \"\";\n\n        const atQuote = /.?@([\"'])/.test(rawAtMatch);\n\n        // If atQuote is false, then insert the at character,\n        // otherwise it means the user typed a quotation mark\n        // directly after the at character, which, would get\n        // inserted again if not checked. atQuote would\n        // be false most of the time; the exception is when\n        // it's true.\n        if (!atQuote) {\n            // Supressing this error because this is legacy that is complicated to refactor.\n            // In the case here `this` is the atwho library which we don't have types.\n            // @ts-ignore\n            insert = this.at + insert;\n        }\n\n        // The last character prevents the matcher from trigger on nearly everything.\n        return insert;\n    }\n\n    /**\n     * Custom highlighting to accept spaces in names.\n     * This is almost a copy of the default in the library, with tweaks in the regex.\n     */\n    function highlightHandler(li: string, query: string): string {\n        if (!query) {\n            return li;\n        }\n        const regexp = new RegExp(\">\\\\s*(\\\\w*)(\" + query.replace(\"+\", \"\\\\+\") + \")(\\\\w*)\\\\s*(\\\\s+.+)?<\", \"ig\");\n        // Capture group 4 for possible spaces\n        return li.replace(regexp, (str, $1, $2, $3, $4) => {\n            // Weird Chrome behaviour, so check for undefined, then\n            // set to empty string if so.\n            if (typeof $3 === \"undefined\") {\n                $3 = \"\";\n            }\n            if (typeof $4 === \"undefined\") {\n                $4 = \"\";\n            }\n\n            return \"> \" + $1 + \"<strong>\" + $2 + \"</strong>\" + $3 + $4 + \" <\";\n        });\n    }\n\n    $(editorElement)\n        .atwho({\n            at: \"@\",\n            tpl: '<li data-value=\"@${name}\" data-id=\"${id}\">${name}</li>',\n            limit: maxSuggestions,\n            callbacks: {\n                remote_filter: remoteDataHandler,\n                before_insert: beforeInsertHandler,\n                highlighter: highlightHandler,\n                matcher: matchAtMention,\n            },\n            cWindow: iframeWindow,\n        })\n        .atwho({\n            at: \":\",\n            tpl: emojiTemplate,\n            insert_tpl: \"${atwho-data-value}\",\n            callbacks: {\n                matcher: matchFakeEmoji,\n                tplEval: (tpl, map) => logDebug(map),\n            },\n            limit: maxSuggestions,\n            data: emojiList,\n            cWindow: iframeWindow,\n        });\n\n    /**\n     * This hook is triggered when atWho places a selection list in the window.\n     * The context is passed implicitly when triggered by at.js.\n     *\n     * @param event - A custom event triggered by the advanced editor iframe/wysiwyg.\n     * @param offset - The pixel offsets inside of the iframe.\n     * @param context - Context from the contenteditable inside of the iframe.\n     */\n    function iframeAtWhoRepositionHandler(event: any, offset: any, context: any) {\n        // Actual suggestion box that will appear.\n        const suggestionElement = context.view.$el;\n\n        // The area where text will be typed (contenteditable body).\n        const $inputor = context.$inputor;\n\n        // Display it below the text.\n        const lineHeight = parseInt($inputor.css(\"line-height\"), 10);\n\n        // offset contains the top left values of the offset to the iframe\n        // we need to convert that to main window coordinates\n        const iframeOffset = $(iframe).offset();\n        let leftCoordinate = (iframeOffset ? iframeOffset.left : 0) + offset.left;\n        let topCoordinate = iframeOffset ? iframeOffset.top : 0;\n        let selectHeight = 0;\n\n        // In wysiwyg mode, the suggestbox follows the typing, which\n        // does not happen in regular mode, so adjust it.\n        // Either @ or : for now.\n        const at = context.at;\n        const { text } = context.query;\n        const fontMirror = $(\".BodyBox,.js-bodybox\");\n        const font = fontMirror.css(\"font-size\") + \" \" + fontMirror.css(\"font-family\");\n\n        // Get font width\n        const fontWidth = (at + text).width(font) - 2;\n\n        if (at === \"@\") {\n            leftCoordinate -= fontWidth;\n        }\n\n        if (at === \":\") {\n            leftCoordinate -= 2;\n        }\n\n        // atWho adds 3 select areas, presumably for differnet positing on screen (above below etc)\n        // This finds the active one and gets the container height\n        $(suggestionElement).each((index, element) => {\n            const outerHeight = $(element).outerHeight();\n            const height = $(element).height();\n\n            if (outerHeight && height && outerHeight > 0) {\n                selectHeight += height + lineHeight;\n            }\n        });\n\n        // Now should we show the selection box above or below?\n        const windowHeight = $(window).height() || 0;\n        const scrollPosition = $(window).scrollTop() || 0;\n        const selectionPosition = topCoordinate + offset.top - ($(window).scrollTop() || 0);\n        const iAvailableSpace = windowHeight - (selectionPosition - scrollPosition);\n\n        if (iAvailableSpace >= selectHeight) {\n            // Enough space below\n            topCoordinate = topCoordinate + offset.top + selectHeight - scrollPosition;\n        } else {\n            // Place it above instead\n            // @todo should check if this is more space than below\n            topCoordinate = topCoordinate + offset.top - scrollPosition;\n        }\n\n        // Move the select box\n        const newOffset = {\n            left: leftCoordinate,\n            top: topCoordinate,\n        };\n        $(suggestionElement).offset(newOffset);\n    }\n\n    // Only necessary for iframe.\n    // Based on work here: https://github.com/ichord/At.js/issues/124\n    if (iframeWindow) {\n        $(iframeWindow).on(\"reposition.atwho\", iframeAtWhoRepositionHandler);\n    }\n}\n","/**\n * Entrypoint for gradually replacing global.js\n *\n * At some point everything in this folder should be able to be removed (new base theme).\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { onContent, onReady } from \"@library/utility/appUtils\";\nimport { initializeAtComplete } from \"@dashboard/legacy/atwho\";\nimport { escapeHTML } from \"@vanilla/dom-utils\";\n\n// Expose some new module functions to our old javascript system.\nwindow.escapeHTML = escapeHTML;\n// Initialize legacy @mentions for all BodyBox elements.\nif (window.$ && window.$.fn.atwho) {\n    onReady(() => initializeAtComplete(\".BodyBox,.js-bodybox\"));\n    onContent(() => initializeAtComplete(\".BodyBox,.js-bodybox\"));\n\n    // Also assign this function to the global `gdn` object.\n    // The advanced editor calls this function directly when in wysiwyg format, as it needs to\n    // handle an iframe, and the editor instance needs to be referenced. The advanced editor does not yet use\n    // this build process so it can only communicate through here with a global.\n    window.gdn.atCompleteInit = initializeAtComplete;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { IUserAuthenticator } from \"@dashboard/@types/api/authenticate\";\nimport ReduxActions, { bindThunkAction } from \"@library/redux/ReduxActions\";\nimport actionCreatorFactory from \"typescript-fsa\";\nimport { IApiError } from \"@library/@types/api/core\";\nimport apiv2 from \"@library/apiv2\";\nimport { IUserFragment } from \"@library/@types/api/users\";\nimport { formatUrl } from \"@library/utility/appUtils\";\nimport { useDispatch } from \"react-redux\";\nimport { useMemo } from \"react\";\n\nconst createAction = actionCreatorFactory(\"@@auth\");\n\nexport interface IAuthenticatePasswordRequest {\n    username: string;\n    password: string;\n    persist?: boolean;\n}\n\nexport interface IAuthenticatePasswordResponse extends IUserFragment {}\n\nexport interface IResetPasswordRequest {\n    email: string;\n}\n\nexport interface IResetPasswordResponse {}\n\n/**\n * Actions for authentication in Vanilla.\n */\nexport class AuthActions extends ReduxActions {\n    ///\n    /// Password reset\n    ///\n\n    /**\n     * Static action creators.\n     */\n    public static resetPasswordACs = createAction.async<IResetPasswordRequest, IResetPasswordResponse, IApiError>(\n        \"RESET_PASSWORD\",\n    );\n\n    /**\n     * Thunk for requesting a password reset.\n     */\n    public resetPassword = (options: IResetPasswordRequest) => {\n        const thunk = bindThunkAction(AuthActions.resetPasswordACs, async () => {\n            const response = await apiv2.post(\"/users/request-password\", options);\n            return response.data;\n        })(options);\n\n        return this.dispatch(thunk);\n    };\n\n    ///\n    /// Password Signin\n    ///\n\n    /**\n     * Static action creators.\n     */\n    public static passwordLoginACs = createAction.async<\n        IAuthenticatePasswordRequest,\n        IAuthenticatePasswordResponse,\n        IApiError\n    >(\"PASSWORD_LOGIN\");\n\n    /**\n     * Thunk for doing a password login.\n     */\n    public loginWithPassword = async (params: IAuthenticatePasswordRequest) => {\n        const thunk = bindThunkAction(AuthActions.passwordLoginACs, async () => {\n            const response = await apiv2.post(\"/authenticate/password\", params);\n            return response.data;\n        })(params);\n\n        const result: IAuthenticatePasswordResponse | null = await this.dispatch(thunk);\n        if (!result) {\n            return;\n        }\n\n        const urlParms = new URLSearchParams();\n        window.location.href = formatUrl(urlParms.get(\"target\") || \"/\", true);\n    };\n\n    ///\n    /// Authenticators List.\n    ///\n\n    /**\n     * Static actions.\n     */\n    public static getAuthenticatorsACs = createAction.async<{}, IUserAuthenticator[], IApiError>(\n        \"GET_ALL_AUTHENTICATORS\",\n    );\n\n    /**\n     * Thunk for requesting authenticators.\n     */\n    public getAuthenticators = () => {\n        const thunk = bindThunkAction(AuthActions.getAuthenticatorsACs, async () => {\n            const response = await apiv2.get(\"/authenticate/authenticators\");\n            return response.data;\n        })({});\n\n        return this.dispatch(thunk);\n    };\n}\n\nexport function useAuthActions() {\n    const dispatch = useDispatch();\n    const actions = useMemo(() => {\n        return new AuthActions(dispatch, apiv2);\n    }, [dispatch]);\n    return actions;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { AuthActions } from \"@dashboard/auth/AuthActions\";\nimport { LoadStatus, ILoadable } from \"@library/@types/api/core\";\nimport produce from \"immer\";\nimport { reducerWithInitialState } from \"typescript-fsa-reducers\";\nimport { IUserAuthenticator } from \"@dashboard/@types/api/authenticate\";\nimport { IUserFragment } from \"@library/@types/api/users\";\nimport { useSelector } from \"react-redux\";\n\nexport interface IAuthState {\n    authenticators: ILoadable<IUserAuthenticator[]>;\n    signin: ILoadable<IUserFragment>;\n    passwordReset: ILoadable<{}>;\n}\n\nexport type IRequestPasswordState = ILoadable<{}>;\n\nexport interface IAuthStoreState {\n    auth: IAuthState;\n}\n\nexport function useAuthStoreState() {\n    return useSelector((state: IAuthStoreState) => state.auth);\n}\n\nconst AUTH_INITIAL_STATE: IAuthState = {\n    authenticators: { status: LoadStatus.PENDING },\n    signin: { status: LoadStatus.PENDING },\n    passwordReset: { status: LoadStatus.PENDING },\n};\n\nexport const authReducer = produce(\n    reducerWithInitialState(AUTH_INITIAL_STATE)\n        .case(AuthActions.getAuthenticatorsACs.started, (nextState, payload) => {\n            nextState.authenticators.status = LoadStatus.LOADING;\n            return nextState;\n        })\n        .case(AuthActions.getAuthenticatorsACs.done, (nextState, payload) => {\n            nextState.authenticators = {\n                status: LoadStatus.SUCCESS,\n                data: payload.result,\n            };\n            return nextState;\n        })\n        .case(AuthActions.getAuthenticatorsACs.failed, (nextState, payload) => {\n            nextState.authenticators = {\n                status: LoadStatus.ERROR,\n                error: payload.error,\n            };\n            return nextState;\n        })\n        .case(AuthActions.resetPasswordACs.started, (nextState, payload) => {\n            nextState.passwordReset.status = LoadStatus.LOADING;\n            return nextState;\n        })\n        .case(AuthActions.resetPasswordACs.done, (nextState, payload) => {\n            nextState.passwordReset = {\n                status: LoadStatus.SUCCESS,\n                data: payload.result,\n            };\n            return nextState;\n        })\n        .case(AuthActions.resetPasswordACs.failed, (nextState, payload) => {\n            nextState.passwordReset = {\n                status: LoadStatus.ERROR,\n                error: payload.error,\n            };\n            return nextState;\n        })\n        .case(AuthActions.passwordLoginACs.started, (nextState, payload) => {\n            nextState.signin.status = LoadStatus.LOADING;\n            return nextState;\n        })\n        .case(AuthActions.passwordLoginACs.done, (nextState, payload) => {\n            nextState.signin = {\n                status: LoadStatus.SUCCESS,\n                data: payload.result,\n            };\n            return nextState;\n        })\n        .case(AuthActions.passwordLoginACs.failed, (nextState, payload) => {\n            nextState.signin = {\n                status: LoadStatus.ERROR,\n                error: payload.error,\n            };\n            return nextState;\n        }),\n);\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport Button from \"@library/forms/Button\";\nimport { IOptionalComponentID } from \"@library/utility/idUtils\";\nimport classNames from \"classnames\";\n\ninterface IProps extends IOptionalComponentID {\n    children: React.ReactNode;\n    className?: string;\n    disabled?: boolean;\n    legacyMode?: boolean;\n    baseClass?: ButtonTypes;\n    tabIndex?: number;\n}\n\nexport default class ButtonSubmit extends React.Component<IProps, IOptionalComponentID> {\n    public static defaultProps = {\n        disabled: false,\n        legacyMode: false,\n    };\n\n    constructor(props) {\n        super(props);\n    }\n\n    public render() {\n        return (\n            <Button\n                id={this.props.id}\n                disabled={this.props.disabled}\n                submit={true}\n                className={this.props.className}\n                prefix=\"submitButton\"\n                legacyMode={this.props.legacyMode}\n                baseClass={this.props.baseClass}\n                tabIndex={this.props.tabIndex}\n            >\n                {this.props.children}\n            </Button>\n        );\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { getFieldErrors, getGlobalErrorMessage } from \"@library/apiv2\";\nimport { t } from \"@library/utility/appUtils\";\nimport React, { useReducer, useRef, useEffect } from \"react\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport InputTextBlock from \"@library/forms/InputTextBlock\";\nimport Checkbox from \"@library/forms/Checkbox\";\nimport ButtonSubmit from \"@library/forms/ButtonSubmit\";\nimport Paragraph from \"@library/layout/Paragraph\";\nimport { IRequiredComponentID, getRequiredID, useUniqueID } from \"@library/utility/idUtils\";\nimport { IStoreState, IPasswordState } from \"@dashboard/@types/state\";\nimport { connect } from \"react-redux\";\nimport { LoadStatus } from \"@library/@types/api/core\";\nimport { inputBlockClasses } from \"@library/forms/InputBlockStyles\";\nimport classNames from \"classnames\";\nimport { useAuthActions } from \"@dashboard/auth/AuthActions\";\nimport { useAuthStoreState } from \"@dashboard/auth/authReducer\";\n\ninterface IProps {\n    defaultUsername?: string;\n}\n\ninterface IForm {\n    rememberMe: boolean;\n    username: string;\n    password: string;\n}\n\nconst initialForm: IForm = {\n    rememberMe: true,\n    username: \"\",\n    password: \"\",\n};\n\n/**\n * Username + password from for signins.\n */\nexport function PasswordForm(props: IProps) {\n    const [formState, updateForm] = usePasswordForm();\n    const { loginWithPassword } = useAuthActions();\n    const { signin: signinState } = useAuthStoreState();\n\n    const usernameRef = useRef<InputTextBlock | null>(null);\n    const passwordRef = useRef<InputTextBlock | null>(null);\n\n    const formDescriptionID = useUniqueID(\"passwordFormDescription\");\n\n    let formDescribedBy;\n    const globalErrorMessage = getGlobalErrorMessage(signinState.error, [\"username\", \"password\"]);\n    const classes = inputBlockClasses();\n    if (globalErrorMessage) {\n        formDescribedBy = formDescriptionID;\n    }\n\n    const allowEdit = signinState.status !== LoadStatus.LOADING;\n    const allowSubmit = formState.username.length > 0 && formState.password.length > 0;\n\n    // Focus input elements when they recieve a validation error.\n    const usernameErrors = getFieldErrors(signinState.error, \"username\");\n    const passwordErrors = getFieldErrors(signinState.error, \"password\");\n    useEffect(() => {\n        if (usernameErrors) {\n            usernameRef.current!.select();\n        } else if (passwordErrors) {\n            passwordRef.current!.select();\n        } else {\n            usernameRef.current!.select();\n        }\n    }, [usernameErrors, passwordErrors]);\n\n    return (\n        <form\n            aria-describedby={formDescribedBy}\n            className=\"passwordForm\"\n            method=\"post\"\n            onSubmit={(event) => {\n                event.preventDefault();\n                event.stopPropagation();\n                loginWithPassword({\n                    username: formState.username,\n                    password: formState.password,\n                    persist: formState.rememberMe,\n                });\n            }}\n            noValidate\n        >\n            <Paragraph id={formDescriptionID} className=\"authenticateUser-paragraph\" isError={true}>\n                {globalErrorMessage}\n            </Paragraph>\n            <InputTextBlock\n                label={t(\"Email/Username\")}\n                errors={usernameErrors}\n                ref={usernameRef}\n                inputProps={{\n                    required: true,\n                    disabled: !allowEdit,\n                    onChange: (event) => {\n                        updateForm({ username: event.target.value });\n                    },\n                    value: formState.username,\n                }}\n            />\n            <InputTextBlock\n                label={t(\"Password\")}\n                ref={passwordRef}\n                errors={passwordErrors}\n                inputProps={{\n                    required: true,\n                    disabled: !allowEdit,\n                    type: \"password\",\n                    onChange: (event) => {\n                        updateForm({ password: event.target.value });\n                    },\n                    value: formState.password,\n                }}\n            />\n            <div className={classNames(classes.root)}>\n                <div className=\"rememberMeAndForgot\">\n                    <span className=\"rememberMeAndForgot-rememberMe\">\n                        <Checkbox\n                            label={t(\"Keep me signed in\")}\n                            onChange={(event) => {\n                                updateForm({ rememberMe: event.target.checked || false });\n                            }}\n                            checked={formState.rememberMe}\n                        />\n                    </span>\n                    <span className=\"rememberMeAndForgot-forgot\">\n                        <Link to=\"/authenticate/recoverpassword\">{t(\"Forgot your password?\")}</Link>\n                    </span>\n                </div>\n            </div>\n            <ButtonSubmit disabled={!allowSubmit} legacyMode={true}>\n                {t(\"Sign In\")}\n            </ButtonSubmit>\n        </form>\n    );\n}\n\nfunction usePasswordForm() {\n    return useReducer((nextState: IForm, action: Partial<IForm>) => {\n        return {\n            ...nextState,\n            ...action,\n        };\n    }, initialForm);\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { t } from \"@library/utility/appUtils\";\nimport React from \"react\";\nimport Paragraph from \"@library/layout/Paragraph\";\nimport { IUserAuthenticator } from \"@dashboard/@types/api/authenticate\";\n\ninterface IProps {\n    ssoMethods?: IUserAuthenticator[];\n}\n\nexport default class SSOMethods extends React.Component<IProps> {\n    public render() {\n        if (!this.props.ssoMethods || this.props.ssoMethods.length === 0) {\n            return null;\n        }\n\n        const ssoMethods = this.props.ssoMethods.map((method, index) => {\n            const methodStyles = {\n                backgroundColor: method.ui.backgroundColor || undefined,\n                color: method.ui.foregroundColor || undefined,\n            };\n            return (\n                <a\n                    href={method.ui.url}\n                    key={index}\n                    className=\"BigButton button Button button-sso button-fullWidth\"\n                    style={methodStyles}\n                >\n                    <span className=\"button-ssoContents\">\n                        <img src={method.ui.photoUrl || undefined} className=\"ssoMethod-icon\" aria-hidden={true} />\n                        <span className=\"button-ssoLabel\">{t(method.ui.buttonName)}</span>\n                        <span className=\"ssoMethod-icon ssoMethod-iconSpacer\" aria-hidden=\"true\" />\n                    </span>\n                </a>\n            );\n        });\n\n        return (\n            <div className=\"ssoMethods\">\n                <Paragraph>{t(\"Sign in with one of the following:\")}</Paragraph>\n                {ssoMethods}\n            </div>\n        );\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { t } from \"@library/utility/appUtils\";\nimport { inputBlockClasses } from \"@library/forms/InputBlockStyles\";\nimport classNames from \"classnames\";\n\ninterface IProps {\n    visible: boolean;\n}\n\nexport default class Or extends React.PureComponent<IProps, {}> {\n    public static defaultProps: IProps = {\n        visible: true,\n    };\n\n    public render() {\n        const classes = inputBlockClasses();\n        return this.props.visible ? (\n            <div className={classNames(classes.labelText, \"authenticateUser-divider\")}>{t(\"or\")}</div>\n        ) : null;\n    }\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { userSelect, allButtonStates, allLinkStates, negativeUnit } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { Variables } from \"@library/styles/Variables\";\nimport { percent, translate, em } from \"csx\";\nimport { shadowHelper, shadowOrBorderBasedOnLightness } from \"@library/styles/shadowHelpers\";\nimport { titleBarVariables } from \"@library/headers/TitleBar.variables\";\nimport { relative } from \"path\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { lineHeightAdjustment } from \"@library/styles/textUtils\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\n\nexport const messagesVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const formElVars = formElementsVariables();\n    const themeVars = variableFactory(\"messages\");\n\n    const sizing = themeVars(\"sizing\", {\n        minHeight: 49,\n        width: 900, // only applies to \"fixed\" style\n    });\n\n    const spacing = themeVars(\"spacing\", {\n        padding: {\n            vertical: 8,\n            withIcon: 44,\n            withoutIcon: 18,\n        },\n    });\n\n    const colors = themeVars(\"colors\", {\n        fg: globalVars.messageColors.warning.fg,\n        bg: globalVars.messageColors.warning.bg,\n        states: {\n            fg: globalVars.messageColors.warning.state,\n        },\n    });\n    const title = themeVars(\"title\", {\n        margin: {\n            top: 6,\n        },\n    });\n\n    const text = themeVars(\"text\", {\n        font: Variables.font({\n            color: colors.fg,\n            size: globalVars.fonts.size.medium,\n            weight: globalVars.fonts.weights.normal,\n            lineHeight: globalVars.lineHeights.condensed,\n        }),\n    });\n\n    const actionButton = themeVars(\"actionButton\", {\n        position: \"relative\",\n        padding: {\n            vertical: 0,\n            left: spacing.padding.withoutIcon / 2,\n            right: spacing.padding.withoutIcon / 2,\n        },\n        margin: {\n            left: spacing.padding.withoutIcon / 2,\n        },\n        font: Variables.font({\n            size: globalVars.fonts.size.medium,\n            weight: globalVars.fonts.weights.semiBold,\n            color: globalVars.mainColors.fg,\n        }),\n        minHeight: formElVars.sizing.height,\n    });\n\n    return {\n        sizing,\n        spacing,\n        colors,\n        text,\n        title,\n        actionButton,\n    };\n});\n\nexport const messagesClasses = useThemeCache(() => {\n    const vars = messagesVariables();\n    const globalVars = globalVariables();\n    const style = styleFactory(\"messages\");\n    const titleBarVars = titleBarVariables();\n    const mediaQueries = layoutVariables().mediaQueries();\n    const shadows = shadowHelper();\n\n    const hasIcon = style(\"hasIcon\", {});\n\n    const wrap = style(\"wrap\", {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n        flexWrap: \"nowrap\",\n        minHeight: styleUnit(vars.sizing.minHeight),\n        width: percent(100),\n        margin: \"auto\",\n        color: ColorsUtils.colorOut(vars.colors.fg),\n        ...Mixins.padding({\n            vertical: vars.spacing.padding.vertical,\n            left: vars.spacing.padding.withoutIcon * 1.5,\n            right: vars.spacing.padding.withoutIcon,\n        }),\n        ...{\n            [`&.${hasIcon}`]: {\n                paddingLeft: vars.spacing.padding.withIcon,\n            },\n        },\n    });\n\n    const message = style(\"message\", {\n        ...userSelect(),\n        ...Mixins.font(vars.text.font),\n        width: percent(100),\n        flex: 1,\n        position: \"relative\",\n        ...Mixins.padding({\n            vertical: 6,\n        }),\n    });\n\n    // Fixed wrapper\n    const fixed = style(\n        \"fixed\",\n        {\n            position: \"fixed\",\n            left: 0,\n            top: styleUnit(titleBarVars.sizing.height + 1),\n            minHeight: styleUnit(vars.sizing.minHeight),\n            maxWidth: percent(100),\n            zIndex: 20,\n            ...{\n                [`.${wrap}`]: {\n                    maxWidth: percent(100),\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    justifyContent: \"center\",\n                    width: \"auto\",\n                },\n                [`.${message}`]: {\n                    width: \"auto\",\n                },\n            },\n        },\n        mediaQueries.oneColumnDown({\n            top: styleUnit(titleBarVars.sizing.mobile.height + 1),\n        }),\n    );\n    const messageWrapper = style(\"messageWrapper\", {\n        position: \"relative\",\n        display: \"flex\",\n        paddingLeft: 30,\n        alignItems: \"center\",\n        flexDirection: \"row\",\n        margin: \"0 auto\",\n        paddingTop: styleUnit(vars.spacing.padding.vertical),\n        paddingBottom: styleUnit(vars.spacing.padding.vertical),\n    });\n\n    const root = style({\n        width: percent(100),\n        backgroundColor: ColorsUtils.colorOut(vars.colors.bg),\n        ...shadowOrBorderBasedOnLightness(\n            globalVars.body.backgroundImage.color,\n            Mixins.border({\n                color: globalVars.mainColors.fg,\n            }),\n            shadows.embed(),\n        ),\n        ...Mixins.margin({ horizontal: \"auto\" }),\n        ...{\n            \"& + &\": {\n                marginTop: styleUnit(globalVars.spacer.size / 2),\n            },\n        },\n    });\n\n    const setWidth = style(\"setWidth\", {\n        width: styleUnit(vars.sizing.width),\n        maxWidth: percent(100),\n    });\n\n    const actionButtonPrimary = style(\"actionButtonPrimary\", {});\n\n    const actionButton = style(\"actionButton\", {\n        ...{\n            \"&&\": {\n                position: \"relative\",\n                ...Mixins.padding(vars.actionButton.padding),\n                marginLeft: vars.actionButton.padding.left,\n                minHeight: styleUnit(vars.actionButton.minHeight),\n                whiteSpace: \"nowrap\",\n                ...Mixins.font(vars.actionButton.font),\n                ...allButtonStates({\n                    noState: {\n                        color: ColorsUtils.colorOut(vars.colors.fg),\n                    },\n                    allStates: {\n                        color: ColorsUtils.colorOut(vars.colors.states.fg),\n                    },\n                    clickFocus: {\n                        outline: 0,\n                    },\n                }),\n                [`&.${actionButtonPrimary}`]: {\n                    fontWeight: globalVars.fonts.weights.bold,\n                },\n            },\n        },\n    });\n\n    const iconPosition = style(\"iconPosition\", {\n        position: \"absolute\",\n        left: 0,\n        top: 0,\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        height: percent(100),\n        maxHeight: em(2),\n        transform: translate(negativeUnit(vars.spacing.padding.withIcon)),\n        width: styleUnit(vars.spacing.padding.withIcon),\n    });\n\n    const icon = style(\"icon\", {\n        // top: unit(vars.spacing.padding.vertical),\n    });\n\n    const errorIcon = style(\"errorIcon\", {\n        ...{\n            \"&&\": {\n                color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n            },\n        },\n    });\n    const content = style(\"content\", {\n        width: percent(100),\n        position: \"relative\",\n        ...{\n            a: allLinkStates({\n                noState: {\n                    color: ColorsUtils.colorOut(vars.colors.fg),\n                    textDecoration: \"underline\",\n                },\n                allStates: {\n                    color: ColorsUtils.colorOut(vars.colors.states.fg),\n                    textDecoration: \"underline\",\n                },\n            }),\n        },\n    });\n\n    const inlineBlock = style(\"inlineBlock\", {\n        display: \"inline-block\",\n    });\n\n    const confirm = style(\"confirm\", {});\n\n    const main = style(\"main\", {});\n\n    const text = style(\"text\", {\n        ...Mixins.font(vars.text.font),\n    });\n    const titleContent = style(\"titleContent\", {\n        display: \"flex\",\n        justifyContent: \"start\",\n        position: \"relative\",\n        ...{\n            [`& + .${text}`]: {\n                marginTop: styleUnit(vars.title.margin.top),\n            },\n        },\n    });\n    const title = style(\"title\", {\n        ...Mixins.font(vars.text.font),\n        fontWeight: globalVars.fonts.weights.bold,\n        ...lineHeightAdjustment({\n            [`& + .${text}`]: {\n                marginTop: styleUnit(vars.title.margin.top),\n            },\n        }),\n    });\n\n    return {\n        root,\n        wrap,\n        actionButton,\n        actionButtonPrimary,\n        message,\n        fixed,\n        setWidth,\n        iconPosition,\n        titleContent,\n        content,\n        inlineBlock,\n        confirm,\n        errorIcon,\n        messageWrapper,\n        main,\n        text,\n        hasIcon,\n        icon,\n        title,\n    };\n});\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { t } from \"@library/utility/appUtils\";\nimport { LiveMessage } from \"react-aria-live\";\nimport { messagesClasses } from \"@library/messages/messageStyles\";\nimport Button from \"@library/forms/Button\";\nimport Container from \"@library/layout/components/Container\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport ButtonLoader from \"@library/loaders/ButtonLoader\";\nimport ConditionalWrap from \"@library/layout/ConditionalWrap\";\n\nexport interface IMessageProps {\n    className?: string;\n    contents?: React.ReactNode;\n    stringContents: string;\n    clearOnUnmount?: boolean; // reannounces the message if the page gets rerendered. This is an important message, so we want this by default.\n    onConfirm?: () => void;\n    confirmText?: React.ReactNode;\n    onCancel?: () => void;\n    cancelText?: React.ReactNode;\n    isFixed?: boolean;\n    isContained?: boolean;\n    title?: string;\n    isActionLoading?: boolean;\n    icon?: React.ReactNode | false;\n}\n\nexport default function Message(props: IMessageProps) {\n    const classes = messagesClasses();\n\n    // When fixed we need to apply an extra layer for padding.\n    const InnerWrapper = props.isContained ? Container : React.Fragment;\n    const OuterWrapper = props.isFixed ? Container : React.Fragment;\n    const contents = <p className={classes.content}>{props.contents || props.stringContents}</p>;\n\n    const hasTitle = !!props.title;\n    const hasIcon = !!props.icon;\n\n    const content = <div className={classes.text}>{contents}</div>;\n    const title = props.title && <h2 className={classes.title}>{props.title}</h2>;\n\n    const icon_content = !hasTitle && hasIcon; //case - if message has icon and content.\n    const icon_title_content = hasTitle && hasIcon; //case - if message has icon, title and content.\n    const noIcon = !hasIcon; // //case - if message has title, content and no icon\n\n    const iconMarkup = <div className={classes.iconPosition}>{props.icon}</div>;\n\n    return (\n        <>\n            <div\n                className={classNames(classes.root, props.className, {\n                    [classes.fixed]: props.isFixed,\n                })}\n            >\n                <OuterWrapper>\n                    <div\n                        className={classNames(classes.wrap, props.className, {\n                            [classes.fixed]: props.isContained,\n                            [classes.hasIcon]: !!props.icon,\n                        })}\n                    >\n                        <InnerWrapper>\n                            <div className={classes.message}>\n                                {icon_content && (\n                                    <div className={classes.titleContent}>\n                                        {iconMarkup} {content}\n                                    </div>\n                                )}\n                                {icon_title_content && (\n                                    <>\n                                        <div className={classes.titleContent}>\n                                            {iconMarkup} {title}\n                                        </div>\n                                        {content}\n                                    </>\n                                )}\n                                {noIcon && (\n                                    <>\n                                        {title}\n                                        {content}\n                                    </>\n                                )}\n                            </div>\n                            {props.onCancel && (\n                                <Button\n                                    baseClass={ButtonTypes.TEXT}\n                                    onClick={props.onCancel}\n                                    className={classes.actionButton}\n                                    disabled={!!props.isActionLoading}\n                                >\n                                    {props.isActionLoading ? <ButtonLoader /> : props.cancelText || t(\"Cancel\")}\n                                </Button>\n                            )}\n                            {props.onConfirm && (\n                                <Button\n                                    baseClass={ButtonTypes.TEXT}\n                                    onClick={props.onConfirm}\n                                    className={classNames(classes.actionButton, classes.actionButtonPrimary)}\n                                    disabled={!!props.isActionLoading}\n                                >\n                                    {props.isActionLoading ? <ButtonLoader /> : props.confirmText || t(\"OK\")}\n                                </Button>\n                            )}\n                        </InnerWrapper>\n                    </div>\n                </OuterWrapper>\n            </div>\n            {/* Does not visually render, but sends message to screen reader users*/}\n            <LiveMessage clearOnUnmount={!!props.clearOnUnmount} message={props.stringContents} aria-live=\"assertive\" />\n        </>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { PasswordForm } from \"@dashboard/auth/PasswordForm\";\nimport DocumentTitle from \"@library/routing/DocumentTitle\";\nimport { t } from \"@library/utility/appUtils\";\nimport { uniqueIDFromPrefix } from \"@library/utility/idUtils\";\nimport * as React from \"react\";\n\nexport default class PasswordPage extends React.Component {\n    private id = uniqueIDFromPrefix(\"PasswordPage\");\n\n    get titleID(): string {\n        return this.id + \"-pageTitle\";\n    }\n\n    public render() {\n        return (\n            <div className=\"authenticateUserCol\">\n                <DocumentTitle title={t(\"Sign In\")}>\n                    <h1 id={this.titleID} className=\"isCentered\">\n                        {t(\"Sign In\")}\n                    </h1>\n                </DocumentTitle>\n                <PasswordForm />\n            </div>\n        );\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { t } from \"@library/utility/appUtils\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\n\ninterface IProps {\n    onClick?: () => void;\n}\n\nexport default class RememberPasswordLink extends React.Component<IProps> {\n    public render() {\n        return (\n            <p className=\"authenticateUser-paragraph isCentered\">\n                {t(\"Remember your password?\")}{\" \"}\n                <Link onClick={this.props.onClick} to=\"/authenticate/signin\">\n                    {t(\"Sign In\")}\n                </Link>\n            </p>\n        );\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { t } from \"@library/utility/appUtils\";\nimport DocumentTitle from \"@library/routing/DocumentTitle\";\nimport { sprintf } from \"sprintf-js\";\n\nexport default class NotFoundPage extends React.PureComponent<IProps> {\n    public static defaultProps = {\n        type: \"Page\",\n    };\n\n    public render() {\n        return (\n            <div className=\"Center SplashInfo\">\n                <DocumentTitle title={this.title} />\n                <div>{this.message}</div>\n            </div>\n        );\n    }\n\n    private get title() {\n        return this.props.title || sprintf(t(\"%s Not Found\"), t(this.props.type));\n    }\n\n    private get message() {\n        return (\n            this.props.message ||\n            sprintf(t(\"The %s you were looking for could not be found.\"), t(this.props.type.toLowerCase()))\n        );\n    }\n}\n\ninterface IProps {\n    type: string;\n    title?: string;\n    message?: string;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useMemo, useEffect, useState, useCallback } from \"react\";\nimport { LinkContextProvider } from \"@library/routing/links/LinkContextProvider\";\nimport { Router as ReactRouter, Switch, Route } from \"react-router-dom\";\nimport { formatUrl } from \"@library/utility/appUtils\";\nimport { createBrowserHistory, History } from \"history\";\nimport NotFoundPage from \"@library/routing/NotFoundPage\";\nimport { BackRoutingProvider } from \"@library/routing/links/BackRoutingProvider\";\nimport { initPageViewTracking, usePageChangeListener } from \"@library/pageViews/pageViewTracking\";\nimport { BannerContextProvider } from \"./banner/BannerContext\";\n\ninterface IProps {\n    disableDynamicRouting?: boolean;\n    sectionRoots?: string[];\n    onRouteChange?: (history: History) => void;\n}\n\nexport function Router(props: IProps) {\n    const { onRouteChange } = props;\n    const history = useMemo(() => createBrowserHistory({ basename: formatUrl(\"\") }), []);\n\n    useEffect(() => {\n        initPageViewTracking(history);\n    }, [history]);\n\n    const pageChangeHandler = useCallback(() => {\n        window.scrollTo(0, 0);\n        onRouteChange?.(history);\n    }, [history, onRouteChange]);\n\n    usePageChangeListener(pageChangeHandler);\n\n    let routes = (\n        <Switch>\n            {Router._routes}\n            <Route key=\"@not-found\" component={NotFoundPage} />\n        </Switch>\n    );\n\n    routes = (\n        <BackRoutingProvider>\n            <BannerContextProvider>{routes}</BannerContextProvider>\n        </BackRoutingProvider>\n    );\n    if (!props.disableDynamicRouting) {\n        routes = (\n            <LinkContextProvider linkContexts={(props.sectionRoots ?? [\"/\"])?.map((root) => formatUrl(root, true))}>\n                {routes}\n            </LinkContextProvider>\n        );\n    }\n\n    return <ReactRouter history={history}>{routes}</ReactRouter>;\n}\n\n/**\n * The currently registered routes.\n * @private\n */\nRouter._routes = [];\n\n/**\n * Register one or more routes to the app component.\n *\n * @param routes An array of routes to add.\n */\nRouter.addRoutes = (routes: React.ReactNode[]) => {\n    if (!Array.isArray(routes)) {\n        Router._routes.push(routes);\n    } else {\n        Router._routes.push(...routes);\n    }\n};\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport getStore from \"@library/redux/getStore\";\nimport WebFont from \"webfontloader\";\nimport { getMeta, assetUrl, siteUrl, isAllowedUrl } from \"@library/utility/appUtils\";\nimport { defaultFontFamily, globalVariables } from \"@library/styles/globalStyleVars\";\nimport { THEME_CACHE_EVENT } from \"@library/styles/themeCache\";\nimport { IThemeFont } from \"@library/theming/themeReducer\";\n\nconst defaultFontConfig: WebFont.Config = {\n    google: {\n        families: [\"Open Sans:400,400italic,600,700\"],\n    },\n};\n\nlet loaded = false;\n\ndocument.addEventListener(THEME_CACHE_EVENT, () => {\n    loaded = false;\n});\n\nconst getGoogleFontUrl = (\n    props: {\n        name: string;\n        weightNormal?: string | number;\n        weightSemiBold?: string | number;\n        weightBold?: string | number;\n    },\n    prefix?: boolean,\n) => {\n    const globalVars = globalVariables();\n    const {\n        name = defaultFontFamily,\n        weightNormal = globalVars.fonts.weights.normal,\n        weightSemiBold = globalVars.fonts.weights.semiBold,\n        weightBold = globalVars.fonts.weights.bold,\n    } = props;\n    return `${prefix ? \"https://fonts.googleapis.com/css?family=\" : \"\"}${encodeURI(\n        name,\n    )}:${weightNormal},${weightNormal}italic,${weightSemiBold},${weightBold}`;\n};\n\nconst validCustomFont = (customFont?: IThemeFont) => {\n    return customFont && customFont.url && customFont.url !== \"\" && customFont.name && customFont.name !== \"\";\n};\n\nconst makeFontConfigFromFontVar = (fonts: IThemeFont[], isMonoSpace?: boolean) => {\n    const filteredFonts = fonts.filter((font) => {\n        return validCustomFont(font);\n    });\n    const webFontConfig: WebFont.Config = {\n        custom: {\n            families: filteredFonts.map((font) => font.name),\n            urls: filteredFonts.map((font) => {\n                return assetUrl(`${font.url}?v=${getMeta(\"context.cacheBuster\")}`);\n            }),\n        },\n    };\n    return webFontConfig;\n};\n\nexport function loadThemeFonts() {\n    if (loaded) {\n        return;\n    }\n    loaded = true;\n    const state = getStore().getState();\n    const assets = state.theme.assets.data || {};\n    const { fonts = { data: [] } } = assets;\n\n    const globalVars = globalVariables();\n    const globalFontVars = globalVars.fonts;\n    const forceGoogleFont = globalFontVars.forceGoogleFont;\n    const customFont = globalFontVars.customFont;\n    const defaultFallback = globalVars.fonts.families[0];\n    const googleFontFamily = globalFontVars.googleFontFamily || defaultFallback;\n\n    if (globalVars.fonts.customFontUrl) {\n        // Legacy case, do not use globalVars.fonts.customFontUrl in the future\n        const [firstFamily, ...restFamilies] = globalVars.fonts.families.body;\n        WebFont.load(\n            makeFontConfigFromFontVar([\n                { name: firstFamily, url: globalVars.fonts.customFontUrl, fallbacks: restFamilies },\n            ]),\n        );\n    } else if (!forceGoogleFont && validCustomFont(customFont as IThemeFont)) {\n        const fontLoaderProps = [\n            customFont as IThemeFont,\n            ...[...customFont.fallbacks, defaultFontFamily].map((fontFamily) => {\n                return {\n                    name: fontFamily,\n                    url: fontFamily === defaultFontFamily ? getGoogleFontUrl({ name: defaultFallback }, true) : \"\",\n                };\n            }),\n        ].filter((font) => {\n            return font && customFont.name && customFont.name !== \"\";\n        });\n\n        const customConfig = {\n            families: fontLoaderProps.map((font) => font.name),\n            urls: fontLoaderProps.map((font) => {\n                return assetUrl(`${font.url}?v=${getMeta(\"context.cacheBuster\")}`);\n            }),\n        };\n\n        WebFont.load({\n            custom: customConfig,\n        });\n    } else if (forceGoogleFont) {\n        const webFontConfig: WebFont.Config = {\n            google: {\n                families: [getGoogleFontUrl({ name: googleFontFamily })],\n            },\n        };\n        WebFont.load(webFontConfig);\n    } else if (fonts && fonts.data && fonts.data.length > 0) {\n        const webFontConfig = makeFontConfigFromFontVar(fonts.data);\n        if (webFontConfig.custom && webFontConfig.custom.urls && webFontConfig.custom.urls.length > 0) {\n            WebFont.load(webFontConfig);\n        }\n    } else {\n        // If the theme has no font config of its own, load the default.\n        WebFont.load(defaultFontConfig);\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { LoadStatus } from \"@library/@types/api/core\";\nimport { inputClasses } from \"@library/forms/inputStyles\";\nimport { useScrollOffset } from \"@library/layout/ScrollOffsetContext\";\nimport Loader from \"@library/loaders/Loader\";\nimport { ICoreStoreState } from \"@library/redux/reducerRegistry\";\nimport { useReduxActions } from \"@library/redux/ReduxActions\";\nimport ThemeActions from \"@library/theming/ThemeActions\";\nimport { prepareShadowRoot } from \"@vanilla/dom-utils\";\nimport React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { loadThemeFonts } from \"./loadThemeFonts\";\nimport { Backgrounds, BackgroundsProvider } from \"@library/layout/Backgrounds\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { useThemeCacheID } from \"@library/styles/themeCache\";\n\ninterface IProps {\n    children: React.ReactNode;\n    themeKey: string;\n    errorComponent: React.ReactNode;\n    variablesOnly?: boolean;\n    disabled?: boolean;\n    revisionID?: number;\n}\n\nlet hasMounted = false;\n\nexport const ThemeProvider: React.FC<IProps> = (props: IProps) => {\n    const { themeKey, disabled, variablesOnly, revisionID } = props;\n    const { getAssets } = useReduxActions(ThemeActions);\n    const { assets } = useSelector((state: ICoreStoreState) => state.theme);\n    const { setTopOffset } = useScrollOffset();\n    const { cacheID } = useThemeCacheID();\n\n    const [ownThemeKey, setThemeKey] = useState({});\n    // Trigger a state re-render when the theme key changes\n    useEffect(() => {\n        setThemeKey(themeKey);\n    }, [themeKey, setThemeKey]);\n\n    useEffect(() => {\n        if (disabled) {\n            return;\n        }\n\n        if (assets.status === LoadStatus.PENDING) {\n            void getAssets(themeKey, revisionID);\n            return;\n        }\n\n        if (assets.data && !hasMounted) {\n            hasMounted = true;\n            let themeHeader = document.getElementById(\"themeHeader\");\n            const themeFooter = document.getElementById(\"themeFooter\");\n\n            if (themeHeader) {\n                themeHeader = prepareShadowRoot(themeHeader, true);\n\n                // Apply the theme's header height to offset our panel layouts.\n                setTopOffset(themeHeader.getBoundingClientRect().height);\n            }\n\n            if (themeFooter) {\n                prepareShadowRoot(themeFooter, true);\n            }\n\n            loadThemeFonts();\n\n            if (variablesOnly) {\n                return;\n            }\n        }\n    }, [assets, disabled, setTopOffset, variablesOnly, getAssets, themeKey, cacheID]);\n\n    if (props.disabled || props.variablesOnly) {\n        return <>{props.children}</>;\n    }\n\n    if ([LoadStatus.PENDING, LoadStatus.LOADING].includes(assets.status)) {\n        return (\n            <>\n                <Backgrounds />\n                {!variablesOnly && <Loader />}\n            </>\n        );\n    }\n\n    if (assets.status === LoadStatus.ERROR) {\n        return (\n            <>\n                <Backgrounds />\n                {props.errorComponent}\n            </>\n        );\n    }\n\n    if (!assets.data) {\n        return null;\n    }\n\n    // Apply kludged input text styling everywhere.\n    inputClasses().applyInputCSSRules();\n\n    return (\n        <>\n            <BrowserRouter>\n                <BackgroundsProvider>\n                    <Backgrounds />\n                    {props.children}\n                </BackgroundsProvider>\n            </BrowserRouter>\n        </>\n    );\n};\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport classNames from \"classnames\";\nimport React from \"react\";\nimport { useLayout, withLayout } from \"@library/layout/LayoutContext\";\nimport { ILayoutContainer } from \"@library/layout/components/interface.layoutContainer\";\nimport { panelWidgetClasses } from \"@library/layout/panelWidgetStyles\";\n\nexport function PanelWidgetVerticalPadding(props: ILayoutContainer) {\n    const classes = panelWidgetClasses(useLayout().mediaQueries);\n    return <div className={classNames(classes.root, \"hasNoHorizontalPadding\", props.className)}>{props.children}</div>;\n}\n\nexport default withLayout(PanelWidgetVerticalPadding);\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license Proprietary\n */\n\nimport Container from \"@library/layout/components/Container\";\nimport DocumentTitle from \"@library/routing/DocumentTitle\";\nimport { inheritHeightClass } from \"@library/styles/styleHelpers\";\nimport React from \"react\";\nimport {\n    CoreErrorMessages,\n    getErrorCode,\n    messageFromErrorCode,\n    IErrorMessageProps,\n} from \"@library/errorPages/CoreErrorMessages\";\nimport PanelWidgetVerticalPadding from \"@library/layout/components/PanelWidgetVerticalPadding\";\nimport PanelWidget from \"@library/layout/components/PanelWidget\";\n\ninterface IProps extends IErrorMessageProps {}\n\nexport function ErrorPage(props: IProps) {\n    const code = getErrorCode(props);\n    const message = messageFromErrorCode(code);\n    const classes = {\n        inheritHeight: inheritHeightClass(),\n    };\n\n    return (\n        <DocumentTitle title={message}>\n            <Container className={classes.inheritHeight} tag={\"main\"}>\n                <PanelWidgetVerticalPadding className={classes.inheritHeight}>\n                    <PanelWidget className={classes.inheritHeight}>\n                        <CoreErrorMessages {...props} className={classes.inheritHeight} />\n                    </PanelWidget>\n                </PanelWidgetVerticalPadding>\n            </Container>\n        </DocumentTitle>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { DeviceProvider } from \"@library/layout/DeviceContext\";\nimport { FontSizeCalculatorProvider } from \"@library/layout/pageHeadingContext\";\nimport { ScrollOffsetProvider } from \"@library/layout/ScrollOffsetContext\";\nimport getStore from \"@library/redux/getStore\";\nimport { ICoreStoreState } from \"@library/redux/reducerRegistry\";\nimport { ThemeProvider } from \"@library/theming/ThemeProvider\";\nimport { getMeta } from \"@library/utility/appUtils\";\nimport React, { ComponentType, useMemo } from \"react\";\nimport { LiveAnnouncer } from \"react-aria-live\";\nimport { Provider } from \"react-redux\";\nimport { inheritHeightClass } from \"@library/styles/styleHelpers\";\nimport classNames from \"classnames\";\nimport { style } from \"@library/styles/styleShim\";\nimport { percent } from \"csx\";\nimport { LocaleProvider, ContentTranslationProvider } from \"@vanilla/i18n\";\nimport { SearchContextProvider } from \"@library/contexts/SearchContext\";\nimport { TitleBarDeviceProvider } from \"@library/layout/TitleBarContext\";\nimport { ErrorPage } from \"@library/errorPages/ErrorComponent\";\nimport { BannerContextProviderNoHistory } from \"@library/banner/BannerContext\";\nimport { SearchFormContextProvider } from \"@library/search/SearchFormContextProvider\";\nimport { EntryLinkContextProvider } from \"@library/contexts/EntryLinkContext\";\n\ninterface IProps {\n    children: React.ReactNode;\n    variablesOnly?: boolean;\n    noTheme?: boolean;\n    noWrap?: boolean;\n    errorComponent?: React.ReactNode;\n}\n\ntype Composable = ComponentType | [ComponentType, { [key: string]: any }];\n\nlet ExtraContextProviders: Composable[] = [];\n\nexport function registerContextProvider(provider: Composable) {\n    ExtraContextProviders.unshift(provider);\n}\n\nfunction composeProviders(providers: Composable[], children) {\n    return providers.reverse().reduce((acc, cur) => {\n        const [Provider, props] = Array.isArray(cur) ? [cur[0], cur[1]] : [cur, {}];\n        return <Provider {...props}>{acc}</Provider>;\n    }, children);\n}\n\n/**\n * Core provider set for running most Vanilla components.\n */\nexport function AppContext(props: IProps) {\n    const store = useMemo(() => getStore<ICoreStoreState>(), []);\n\n    const rootStyle = style({\n        label: \"appContext\",\n        width: percent(100),\n    });\n\n    const content = composeProviders(\n        [\n            [Provider, { store }],\n            LocaleProvider,\n            SearchContextProvider,\n            ContentTranslationProvider,\n            LiveAnnouncer,\n            [ScrollOffsetProvider, { scrollWatchingEnabled: false }],\n            [\n                ThemeProvider,\n                {\n                    disabled: props.noTheme,\n                    errorComponent: <ErrorPage />,\n                    themeKey: getMeta(\"ui.themeKey\", \"keystone\"),\n                    variablesOnly: props.variablesOnly,\n                },\n            ],\n            FontSizeCalculatorProvider,\n            ...ExtraContextProviders,\n            SearchFormContextProvider,\n            TitleBarDeviceProvider,\n            BannerContextProviderNoHistory,\n            EntryLinkContextProvider,\n            DeviceProvider,\n        ],\n        props.children,\n    );\n\n    if (props.noWrap) {\n        return content;\n    } else {\n        return <div className={classNames(\"js-appContext\", rootStyle, inheritHeightClass())}>{content}</div>;\n    }\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nexport function trimTrailingCommas(selector) {\n    return selector.trim().replace(new RegExp(\"[,]+$\"), \"\");\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { variableFactory, styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { negative, allLinkStates } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { percent, px, calc } from \"csx\";\nimport { CSSObject } from \"@emotion/css\";\nimport { trimTrailingCommas } from \"@dashboard/compatibilityStyles/trimTrailingCommas\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\n\nexport const siteNavVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"siteNav\");\n\n    const node = makeThemeVars(\"node\", {\n        fontSize: globalVars.fonts.size.medium,\n        fg: globalVars.mainColors.fg,\n        lineHeight: globalVars.lineHeights.condensed,\n        borderWidth: 1,\n        padding: 4,\n        active: {\n            fg: globalVars.links.colors.default,\n            fontWeight: globalVars.fonts.weights.bold,\n        },\n    });\n\n    const title = makeThemeVars(\"title\", {\n        fontSize: globalVars.fonts.size.large,\n        fontWeight: globalVars.fonts.weights.bold,\n    });\n\n    const nodeToggle = makeThemeVars(\"nodeToggle\", {\n        height: node.fontSize * node.lineHeight,\n        width: globalVars.gutter.size,\n        iconWidth: 7,\n    });\n\n    const spacer = makeThemeVars(\"spacer\", {\n        default: 7,\n    });\n\n    return { node, title, nodeToggle, spacer };\n});\n\nexport const siteNavClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = siteNavVariables();\n    const mediaQueries = layoutVariables().mediaQueries();\n\n    const style = styleFactory(\"siteNav\");\n\n    const root = style(\n        {\n            position: \"relative\",\n            display: \"block\",\n            zIndex: 1,\n            marginTop: styleUnit(negative(vars.nodeToggle.height / 2 - vars.node.fontSize / 2)),\n        },\n        mediaQueries.noBleedDown({\n            marginLeft: styleUnit(vars.nodeToggle.width - vars.nodeToggle.iconWidth / 2 - vars.spacer.default),\n        }),\n    );\n\n    const title = style(\"title\", {\n        fontSize: styleUnit(globalVars.fonts.size.large),\n        fontWeight: globalVars.fonts.weights.bold,\n    });\n\n    const children = style(\"children\", {\n        position: \"relative\",\n        display: \"block\",\n    });\n\n    return { root, title, children };\n});\n\nexport const siteNavNodeClasses = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const vars = siteNavVariables();\n    const mediaQueries = layoutVariables().mediaQueries();\n\n    const style = styleFactory(\"siteNavNode\");\n\n    const label = style(\n        \"label\",\n        {\n            position: \"relative\",\n            display: \"block\",\n            width: calc(`100% + ${styleUnit(vars.nodeToggle.width)}`),\n            marginLeft: styleUnit(-vars.nodeToggle.width),\n            textAlign: \"left\",\n            border: `solid transparent ${styleUnit(vars.node.borderWidth)}`,\n            paddingTop: styleUnit(vars.node.padding + vars.node.borderWidth),\n            paddingRight: styleUnit(vars.node.padding),\n            paddingBottom: styleUnit(vars.node.padding + vars.node.borderWidth),\n            paddingLeft: styleUnit(vars.nodeToggle.width - vars.node.borderWidth),\n        },\n        mediaQueries.oneColumnDown({\n            fontSize: styleUnit(globalVars.fonts.size.large),\n        }),\n    );\n\n    const root = style({\n        position: \"relative\",\n        display: \"flex\",\n        alignItems: \"flex-start\",\n        justifyContent: \"flex-start\",\n        flexWrap: \"nowrap\",\n        fontSize: styleUnit(vars.node.fontSize),\n        color: vars.node.fg.toString(),\n        ...{\n            [`&.isCurrent .${label}`]: {\n                color: vars.node.active.fg.toString(),\n            },\n        },\n    });\n\n    const children = style(\"children\", {\n        marginLeft: styleUnit(vars.spacer.default),\n    });\n\n    const contents = style(\"contents\", {\n        display: \"block\",\n        width: percent(100),\n        ...{\n            \".siteNavNode-buttonOffset\": {\n                top: styleUnit(15.5),\n            },\n        },\n    });\n\n    const linkMixin = (useTextColor?: boolean, selector?: string): CSSObject => {\n        const nestedStyles = {\n            ...allLinkStates({\n                noState: {\n                    color: ColorsUtils.colorOut(\n                        useTextColor ? globalVars.mainColors.fg : globalVars.links.colors.default,\n                    ),\n                },\n                hover: {\n                    color: ColorsUtils.colorOut(globalVars.links.colors.hover),\n                },\n                focus: {\n                    color: ColorsUtils.colorOut(globalVars.links.colors.focus),\n                },\n                keyboardFocus: {\n                    color: ColorsUtils.colorOut(globalVars.links.colors.keyboardFocus),\n                },\n                active: {\n                    color: ColorsUtils.colorOut(globalVars.links.colors.active),\n                },\n            }),\n            \"&:not(.focus-visible):active\": {\n                outline: 0,\n            },\n            \"&:focus\": {\n                outline: 0,\n            },\n            \"&.hasChildren\": {\n                ...{\n                    [`.${label}`]: {\n                        fontWeight: globalVars.fonts.weights.bold,\n                    },\n                    \"&.isFirstLevel\": {\n                        fontSize: styleUnit(globalVars.fonts.size.large),\n                        fontWeight: globalVars.fonts.weights.normal,\n                    },\n                },\n            },\n        } as any;\n\n        if (selector) {\n            const selectors = selector.split(\",\");\n            if (selectors.length && selectors.length > 0) {\n                selectors.map((s) => {\n                    cssOut(trimTrailingCommas(s), nestedStyles);\n                });\n            } else {\n                cssOut(trimTrailingCommas(selector), nestedStyles);\n            }\n        }\n\n        const baseStyles = {\n            display: \"block\",\n            flexGrow: 1,\n            lineHeight: vars.node.lineHeight,\n            minHeight: px(30),\n            outline: 0,\n            padding: 0,\n            width: percent(100),\n        };\n\n        if (selector) {\n            if (useTextColor) {\n                baseStyles[\"color\"] = ColorsUtils.colorOut(globalVars.mainColors.fg);\n            }\n            return baseStyles;\n        } else {\n            return {\n                ...baseStyles,\n                ...nestedStyles,\n            };\n        }\n    };\n\n    const link = style(\"link\", linkMixin(true));\n\n    const spacer = style(\"spacer\", {\n        display: \"block\",\n        height: styleUnit(vars.nodeToggle.height),\n        width: styleUnit(vars.spacer.default),\n        margin: `6px 0`,\n    });\n\n    const toggle = style(\"toggle\", {\n        margin: `6px 0`,\n        padding: 0,\n        zIndex: 1,\n        display: \"block\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        outline: 0,\n        height: styleUnit(vars.nodeToggle.height),\n        width: styleUnit(vars.nodeToggle.width),\n    });\n\n    const buttonOffset = style(\"buttonOffset\", {\n        position: \"relative\",\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n        width: styleUnit(vars.nodeToggle.width),\n        marginLeft: styleUnit(-vars.nodeToggle.width),\n        top: px(16),\n        transform: `translateY(-50%)`,\n    });\n\n    const activeLink = style(\"active\", {\n        fontWeight: globalVars.fonts.weights.semiBold,\n        color: ColorsUtils.colorOut(globalVars.links.colors.active),\n    });\n\n    return {\n        root,\n        children,\n        contents,\n        link,\n        linkMixin,\n        label,\n        spacer,\n        toggle,\n        buttonOffset,\n        activeLink,\n    };\n});\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { allLinkStates, negative } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { calc, important } from \"csx\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\n\nexport const reactionsCSS = () => {\n    const vars = globalVariables();\n\n    cssOut(`.Reactions`, {\n        display: \"flex\",\n        flexDirection: \"row\",\n        flexWrap: \"wrap\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n        marginLeft: important(styleUnit(negative(vars.meta.spacing.default)) as string),\n        width: calc(`100% + ${styleUnit(vars.meta.spacing.default * 2)}`),\n        padding: styleUnit(vars.meta.spacing.default),\n    });\n\n    cssOut(\n        `\n        .DataList .Reactions > .ReactButton,\n        .MessageList .Reactions > .ReactButton,\n        .Reactions  > .FlagMenu,\n        .DataList .Reactions .ReactButton,\n        .MessageList .Reactions .ReactButton\n    `,\n        {\n            fontSize: styleUnit(vars.meta.text.size),\n            margin: styleUnit(vars.meta.spacing.default),\n            textDecoration: \"none\",\n        },\n    );\n\n    cssOut(\".Item.Item .Reactions a, .Item:hover .Reactions a\", {\n        width: \"initial\",\n    });\n\n    cssOut(\".FlagMenu > .ReactButton\", {\n        margin: important(0),\n    });\n\n    cssOut(`.Reactions .ReactButton`, {\n        color: ColorsUtils.colorOut(vars.meta.colors.fg),\n        ...allLinkStates({\n            // noState: {\n            //     color: ColorsUtils.colorOut(vars.links.colors.default),\n            // },\n            hover: {\n                color: ColorsUtils.colorOut(vars.links.colors.hover),\n            },\n            focus: {\n                color: ColorsUtils.colorOut(vars.links.colors.focus),\n            },\n            active: {\n                color: ColorsUtils.colorOut(vars.links.colors.active),\n            },\n        }),\n    });\n};\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { trimTrailingCommas } from \"@dashboard/compatibilityStyles/trimTrailingCommas\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { buttonUtilityClasses } from \"@library/forms/buttonStyles\";\nimport { buttonGlobalVariables, buttonVariables } from \"@vanilla/library/src/scripts/forms/Button.variables\";\nimport { generateButtonStyleProperties } from \"@library/forms/styleHelperButtonGenerator\";\nimport { absolutePosition, importantUnit } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { important, percent, rgba } from \"csx\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\n\nexport const buttonCSS = () => {\n    const globalVars = globalVariables();\n    const formElementVars = formElementsVariables();\n    const buttonVars = buttonGlobalVariables();\n\n    // @mixin Button\n    mixinButton(\".Button-Options\", ButtonTypes.ICON_COMPACT);\n    mixinButton(\".DataList a.Delete.Delete.Delete\", ButtonTypes.ICON_COMPACT);\n    mixinButton(\".MessageList a.Delete.Delete.Delete\", ButtonTypes.ICON_COMPACT);\n\n    mixinButton(\".Button.Primary\", ButtonTypes.PRIMARY);\n    mixinButton(\".FormTitleWrapper .Buttons .Button\", ButtonTypes.PRIMARY);\n    mixinButton(\".FormWrapper .Buttons .Button\", ButtonTypes.PRIMARY);\n    mixinButton(\".FormWrapper .file-upload-browse\", ButtonTypes.PRIMARY);\n    mixinButton(\".FormTitleWrapper .Buttons .Button.Primary\", ButtonTypes.PRIMARY);\n    mixinButton(\".FormTitleWrapper .file-upload-browse\", ButtonTypes.PRIMARY);\n    mixinButton(\".FormWrapper .Buttons .Button.Primary\", ButtonTypes.PRIMARY);\n    mixinButton(\".Button-Controls .Button.Primary\", ButtonTypes.PRIMARY);\n    mixinButton(\".BigButton:not(.Danger)\", ButtonTypes.PRIMARY);\n    mixinButton(\".NewConversation.NewConversation\", ButtonTypes.PRIMARY);\n    mixinButton(\".groupToolbar .Button.Primary\", ButtonTypes.PRIMARY);\n    mixinButton(\".BoxButtons .ButtonGroup.Multi .Button.Primary\", ButtonTypes.PRIMARY);\n    mixinButton(\".Section-Members .Group-RemoveMember.Group-RemoveMember\", ButtonTypes.PRIMARY);\n    mixinButton(\".Section-Members .Buttons .Group-RemoveMember.Group-RemoveMember\", ButtonTypes.PRIMARY);\n    mixinButton(\".Section-Members .Buttons .Group-Leader.Group-Leader\", ButtonTypes.STANDARD);\n    mixinButton(\".group-members-filter-box .Button.search\", ButtonTypes.PRIMARY);\n    mixinButton(\"#Form_Ban\", ButtonTypes.PRIMARY);\n    mixinButton(\".Popup #UserBadgeForm button\", ButtonTypes.PRIMARY);\n    mixinButton(\".Button.Handle\", ButtonTypes.PRIMARY);\n    mixinButton(\"div.Popup .Body .Button.Primary\", ButtonTypes.PRIMARY);\n    mixinButton(\".ButtonGroup.Multi .Button.Handle\", ButtonTypes.PRIMARY);\n    mixinButton(\".ButtonGroup.Multi .Button.Handle .Sprite.SpDropdownHandle\", ButtonTypes.PRIMARY);\n    mixinButton(\".AdvancedSearch .InputAndButton .bwrap .Button\", ButtonTypes.PRIMARY);\n\n    const buttonBorderRadius = parseInt(globalVars.borderType.formElements.buttons.toString(), 10);\n    const borderOffset = buttonVars.border.width * 2;\n    const handleSize = buttonVars.sizing.minHeight - borderOffset;\n\n    if (buttonBorderRadius && buttonBorderRadius > 0) {\n        cssOut(`.Frame .ButtonGroup.Multi.NewDiscussion .Button.Handle .SpDropdownHandle::before`, {\n            marginTop: styleUnit((formElementVars.sizing.height * 2) / 36), // center vertically\n            marginRight: styleUnit(buttonBorderRadius * 0.035), // offset based on border radius. No radius will give no offset.\n            maxHeight: styleUnit(handleSize),\n            height: styleUnit(handleSize),\n            lineHeight: styleUnit(handleSize),\n            maxWidth: styleUnit(handleSize),\n            minWidth: styleUnit(handleSize),\n        });\n    }\n\n    cssOut(`.FormWrapper .file-upload-browse, .FormTitleWrapper .file-upload-browse`, {\n        marginRight: styleUnit(0),\n    });\n\n    cssOut(`.Group-Box .BlockColumn .Buttons a:first-child`, {\n        marginRight: styleUnit(globalVars.gutter.quarter),\n    });\n\n    cssOut(`.Frame .ButtonGroup.Multi .Button.Handle .Sprite.SpDropdownHandle`, {\n        height: styleUnit(handleSize),\n        maxHeight: styleUnit(handleSize),\n        width: styleUnit(handleSize),\n        background: important(\"transparent\"),\n        backgroundColor: important(\"none\"),\n        ...Mixins.border({\n            color: rgba(0, 0, 0, 0),\n        }),\n        maxWidth: styleUnit(handleSize),\n        minWidth: styleUnit(handleSize),\n    });\n\n    cssOut(`.Frame .ButtonGroup.Multi.NewDiscussion .Button.Handle.Handle`, {\n        position: \"absolute\",\n        top: styleUnit(0),\n        right: styleUnit(formElementVars.border.width),\n        bottom: styleUnit(0),\n        minWidth: importantUnit(handleSize),\n        maxWidth: importantUnit(handleSize),\n        maxHeight: importantUnit(handleSize),\n        minHeight: importantUnit(handleSize),\n        height: importantUnit(handleSize),\n        width: importantUnit(handleSize),\n        borderTopRightRadius: styleUnit(buttonBorderRadius),\n        borderBottomRightRadius: styleUnit(buttonBorderRadius),\n        display: \"block\",\n    });\n\n    cssOut(`.Frame .ButtonGroup.Multi.Open .Button.Handle`, {\n        width: styleUnit(formElementVars.sizing.height),\n    });\n\n    cssOut(`.Frame .ButtonGroup.Multi.NewDiscussion .Sprite.SpDropdownHandle`, {\n        ...absolutePosition.fullSizeOfParent(),\n        padding: important(0),\n        border: important(0),\n        borderRadius: important(0),\n        minWidth: styleUnit(handleSize),\n    });\n\n    cssOut(`.ButtonGroup.Multi.NewDiscussion`, {\n        position: \"relative\",\n        maxWidth: percent(100),\n        boxSizing: \"border-box\",\n        ...{\n            \".Button.Primary\": {\n                maxWidth: percent(100),\n                width: percent(100),\n                ...Mixins.padding({\n                    horizontal: formElementVars.sizing.height,\n                }),\n            },\n            \".Button.Handle\": {\n                ...absolutePosition.middleRightOfParent(),\n                width: styleUnit(formElementVars.sizing.height),\n                maxWidth: styleUnit(formElementVars.sizing.height),\n                minWidth: styleUnit(formElementVars.sizing.height),\n                height: styleUnit(formElementVars.sizing.height),\n                padding: 0,\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                border: important(0),\n                borderTopLeftRadius: important(0),\n                borderBottomLeftRadius: important(0),\n            },\n            \".Button.Handle .SpDropdownHandle::before\": {\n                padding: important(0),\n            },\n        },\n    });\n\n    cssOut(`.ButtonGroup.Multi > .Button:first-child`, {\n        borderTopLeftRadius: styleUnit(buttonBorderRadius),\n    });\n\n    // Standard\n    mixinButton(\".Button\", ButtonTypes.STANDARD);\n    mixinButton(\".DataList .Item-Col .Options .OptionsLink\", ButtonTypes.STANDARD);\n    mixinButton(\".MessageList .Item-Col .Options .OptionsLink\", ButtonTypes.STANDARD);\n    mixinButton(\".PrevNextPager .Previous\", ButtonTypes.STANDARD);\n    mixinButton(\".PrevNextPager .Next\", ButtonTypes.STANDARD);\n    mixinButton(\"div.Popup .Button.change-picture-new\", ButtonTypes.STANDARD);\n    mixinButton(\"body.Section-BestOf .FilterMenu a\", ButtonTypes.STANDARD);\n    mixinButton(\".group-members-filter-box .Button\", ButtonTypes.STANDARD);\n    mixinButton(\"body.Section-Profile .ProfileOptions .Button-EditProfile\", ButtonTypes.STANDARD);\n    mixinButton(\"body.Section-Profile .ProfileOptions .MemberButtons\", ButtonTypes.STANDARD);\n    mixinButton(\"body.Section-Profile .ProfileOptions .ProfileButtons-BackToProfile\", ButtonTypes.STANDARD);\n    mixinButton(\".Button.Close\", ButtonTypes.STANDARD);\n    mixinButton(\".viewPollResults\", ButtonTypes.STANDARD);\n\n    cssOut(\".Panel-main .ApplyButton\", {\n        width: \"auto\",\n    });\n\n    cssOut(`.AdvancedSearch .InputAndButton .bwrap.bwrap`, {\n        ...absolutePosition.topRight(),\n    });\n\n    cssOut(`.AdvancedSearch .InputAndButton .bwrap .Button`, {\n        minWidth: \"auto\",\n        borderTopLeftRadius: important(0),\n        borderBottomLeftRadius: important(0),\n    });\n\n    cssOut(`.AdvancedSearch .InputAndButton .bwrap .Button .Sprite.SpSearch`, {\n        width: \"auto\",\n        height: \"auto\",\n    });\n};\n\nexport const mixinButton = (selector: string, buttonType: ButtonTypes = ButtonTypes.STANDARD) => {\n    const vars = buttonVariables();\n    selector = trimTrailingCommas(selector);\n\n    if (buttonType === ButtonTypes.PRIMARY) {\n        cssOut(selector, generateButtonStyleProperties({ buttonTypeVars: vars.primary }));\n    } else if (buttonType === ButtonTypes.STANDARD) {\n        cssOut(selector, generateButtonStyleProperties({ buttonTypeVars: vars.standard }));\n    } else if (buttonType === ButtonTypes.ICON_COMPACT) {\n        cssOut(selector, buttonUtilityClasses().iconMixin(buttonGlobalVariables().sizing.compactHeight));\n    } else {\n        new Error(`No support yet for button type: ${buttonType}`);\n    }\n};\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { trimTrailingCommas } from \"@dashboard/compatibilityStyles/trimTrailingCommas\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const mixinClickInput = (selector: string, overwriteColors?: {}, overwriteSpecial?: {}) => {\n    selector = trimTrailingCommas(selector);\n    const selectors = selector.split(\",\");\n    const linkColors = Mixins.clickable.itemState(overwriteColors, overwriteSpecial);\n    selectors.map((s) => {\n        if (linkColors.color !== undefined) {\n            cssOut(selector, {\n                color: linkColors.color,\n            });\n        }\n        cssOut(trimTrailingCommas(s), linkColors);\n    });\n};\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { mixinClickInput } from \"@dashboard/compatibilityStyles/clickableItemHelpers\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\n\nexport const textLinkCSS = () => {\n    const globalVars = globalVariables();\n\n    // Various links\n    mixinClickInput(\".Navigation-linkContainer a\");\n\n    mixinClickInput(\".Panel .Leaderboard a\");\n    mixinClickInput(\".FieldInfo a\");\n\n    mixinClickInput(\"div.Popup .Body a\");\n    mixinClickInput(\".selectBox-toggle\");\n    mixinClickInput(\".followButton\");\n    mixinClickInput(\".SelectWrapper::after\");\n    mixinClickInput(\".Back a\");\n    mixinClickInput(\".OptionsLink-Clipboard\");\n    mixinClickInput(\"a.OptionsLink\");\n    mixinClickInput(\"a.MoreWrap, .MoreWrap a, .MorePager a, .more.More, .MoreWrap a.more.More\");\n    mixinClickInput(`body.Section-BestOf .Tile .Message a`);\n    mixinClickInput(\n        `\n        .DataList .IdeationTag,\n        .DataList .MItem.RoleTracker,\n        .MessageList .IdeationTag,\n        .MessageList .tag-tracker,\n        .DataTableWrap .IdeationTag,\n        .DataTableWrap .tag-tracker,\n        .DataTableWrap .MItem.RoleTracker\n        `,\n    );\n    mixinClickInput(`\n        .Container .userContent a,\n        .Container .UserContent a\n    `);\n    mixinClickInput(\".BreadcrumbsBox .Breadcrumbs a\", {\n        default: globalVars.links.colors.default,\n    });\n    mixinClickInput(\".DataList .Item .Title a\", { default: globalVars.mainColors.fg, textDecoration: \"underline\" });\n    mixinClickInput(\"body.Section-Entry label.RadioLabel a, body.Section-Entry label.CheckBoxLabel a\");\n\n    // Links that have FG color by default but regular state colors.\n    mixinTextLinkNoDefaultLinkAppearance(\".ItemContent a\");\n    mixinTextLinkNoDefaultLinkAppearance(`\n        .Content .DataList .DiscussionMeta a,\n        .Content .DataList .Item-BodyWrap a,\n        .Content .DataList .CommentMeta a,\n        .Content .DataList-Search a,\n        .Content .Breadcrumbs a,\n        .Content .MessageList .DiscussionMeta a,\n        .Content .MessageList .Item-BodyWrap a,\n        .Content .MessageList .CommentMeta a,\n        .Content .DataTableWrap a,\n        .Content .Container .Frame-contentWrap .ChildCategories a,\n        .Content .Item.Application .Meta a,\n        .Content .Meta.Group-Meta.Group-Info a\n    `);\n    mixinTextLinkNoDefaultLinkAppearance(\".DataList .Item h3 a\");\n    mixinTextLinkNoDefaultLinkAppearance(\".DataList .Item a.Title\");\n\n    mixinTextLinkNoDefaultLinkAppearance(\".MenuItems a\");\n    mixinTextLinkNoDefaultLinkAppearance(\".DataTable h2 a\");\n    mixinTextLinkNoDefaultLinkAppearance(\".DataTable h3 a\");\n    mixinTextLinkNoDefaultLinkAppearance(\".DataTable .Title.Title a\");\n    mixinTextLinkNoDefaultLinkAppearance(\".Timebased.EndTime a\");\n    mixinTextLinkNoDefaultLinkAppearance(\".FilterMenu a\");\n    mixinTextLinkNoDefaultLinkAppearance(`.DataList#search-results .Breadcrumbs a`);\n    mixinTextLinkNoDefaultLinkAppearance(`.Container a.UserLink`);\n    mixinTextLinkNoDefaultLinkAppearance(`.DataTable a.CommentDate`);\n    mixinTextLinkNoDefaultLinkAppearance(`.DataTable.DiscussionsTable a.Title`);\n    mixinTextLinkNoDefaultLinkAppearance(`.DataTable .Meta .MItem`);\n    mixinTextLinkNoDefaultLinkAppearance(`.Panel .InThisConversation a`);\n    mixinTextLinkNoDefaultLinkAppearance(`.Panel .PanelInThisDiscussion a`);\n\n    cssOut(`.Panel.Panel-main .PanelInfo.PanelInThisDiscussion .Aside`, {\n        paddingLeft: 0,\n        paddingRight: \"1ex\",\n        display: \"inline\",\n    });\n\n    cssOut(`.Panel.Panel-main .PanelInfo.PanelInThisDiscussion .Username`, {\n        fontWeight: globalVars.fonts.weights.semiBold,\n    });\n\n    cssOut(`.BreadcrumbsBox .Breadcrumbs a`, {\n        marginRight: \"0.5ex\",\n    });\n};\n\nexport const mixinTextLinkNoDefaultLinkAppearance = (selector) => {\n    const globalVars = globalVariables();\n    mixinClickInput(selector, { default: globalVars.mainColors.fg, textDecoration: \"none\" });\n};\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport {\n    absolutePosition,\n    getHorizontalPaddingForTextInput,\n    getVerticalPaddingForTextInput,\n    importantUnit,\n    negative,\n    negativeUnit,\n    textInputSizingFromFixedHeight,\n} from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { calc, important, percent, translateY } from \"csx\";\nimport { trimTrailingCommas } from \"@dashboard/compatibilityStyles/trimTrailingCommas\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { inputVariables, inputMixin } from \"@library/forms/inputStyles\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { mixinTextLinkNoDefaultLinkAppearance } from \"@dashboard/compatibilityStyles/textLinkStyles\";\nimport { forumLayoutVariables } from \"@dashboard/compatibilityStyles/forumLayoutStyles\";\n\nexport const inputCSS = () => {\n    wrapSelects();\n\n    const globalVars = globalVariables();\n    const inputVars = inputVariables();\n    const formVars = formElementsVariables();\n    const mainColors = globalVars.mainColors;\n    const fg = ColorsUtils.colorOut(mainColors.fg);\n    const bg = ColorsUtils.colorOut(mainColors.bg);\n    const primary = ColorsUtils.colorOut(mainColors.primary);\n\n    cssOut(\n        `\n        .Container ul.token-input-list.token-input-focused,\n        .AdvancedSearch .InputBox:focus`,\n        {\n            borderColor: primary,\n        },\n    );\n\n    cssOut(\n        `\n        input[type= \"text\"],\n        textarea,\n        input.InputBox,\n        .file-upload-choose,\n        .AdvancedSearch .InputBox,\n        .AdvancedSearch select,\n        select,\n        div.token-input-dropdown.token-input-dropdown,\n    `,\n        {\n            color: fg,\n            backgroundColor: bg,\n            ...Mixins.border(globalVars.borderType.formElements.default),\n        },\n    );\n\n    cssOut(\n        `\n        #token-input-Form_tags,\n\n        input.SmallInput:focus,\n        input.InputBox:focus,\n        .file-upload-choose:focus,\n        textarea:focus\n        `,\n        {\n            background: bg,\n            color: fg,\n        },\n    );\n\n    cssOut(`div.token-input-dropdown`, {\n        ...Mixins.border(globalVars.borderType.dropDowns),\n        transform: translateY(styleUnit(globalVars.border.width) as string),\n    });\n\n    cssOut(\".token-input-input-token input\", {\n        ...textInputSizingFromFixedHeight(\n            inputVars.sizing.height,\n            inputVars.font.size as number,\n            formVars.border.width * 2,\n        ),\n        border: important(0),\n        paddingTop: important(0),\n        paddingBottom: important(0),\n    });\n\n    mixinInputStyles(`input[type= \"text\"]`);\n    mixinInputStyles(\"textarea\");\n    mixinInputStyles(\"input.InputBox\");\n    mixinInputStyles(\".file-upload-choose\");\n    mixinInputStyles(\".InputBox\");\n    mixinInputStyles(\".InputBox.BigInput\");\n    mixinInputStyles(\"ul.token-input-list, div.Popup .Body ul.token-input-list\");\n    mixinInputStyles(`\n        .Container input[type= \"text\"],\n        .Container textarea,\n        .Container input.InputBox,\n        .Container .AdvancedSearch .InputBox,\n        .Container .AdvancedSearch select,\n        .Container select\n        `);\n    mixinInputStyles(\".Container ul.token-input-list\", \".Container ul.token-input-list.token-input-focused\");\n    mixinInputStyles(\".input:-internal-autofill-selected\", false, true);\n    mixinInputStyles(\".AdvancedSearch .InputBox\", false, false);\n    cssOut(\".InputBox.InputBox.InputBox\", inputMixin());\n    cssOut(`.richEditor-frame.InputBox.InputBox.InputBox `, { padding: 0 });\n    cssOut(\"select\", {\n        ...{\n            \"&:hover, &:focus, &.focus-visible, &:active\": {\n                borderColor: important(ColorsUtils.colorOut(globalVars.mainColors.primary) as string),\n            },\n        },\n    });\n\n    cssOut(\"form .SelectWrapper::after\", {\n        color: \"inherit\",\n    });\n\n    cssOut(\"form .SelectWrapper, .AdvancedSearch .Handle.Handle \", {\n        color: ColorsUtils.colorOut(inputVars.colors.fg),\n    });\n\n    cssOut(\"form .SelectWrapper\", {\n        ...{\n            \"& select\": {\n                cursor: \"pointer\",\n            },\n            \"&:hover, &:focus, &.focus-visible, &:active\": {\n                color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n            },\n        },\n    });\n\n    cssOut(\".AdvancedSearch .Handle.Handle .Arrow::after\", {\n        color: \"inherit\",\n    });\n\n    // Token inputs\n    const verticalPadding = getVerticalPaddingForTextInput(\n        formVars.sizing.height,\n        globalVars.fonts.size.small,\n        formVars.border.width * 2,\n    );\n    const horizontalPadding = getHorizontalPaddingForTextInput(\n        formVars.sizing.height,\n        globalVars.fonts.size.small,\n        formVars.border.width * 2,\n    );\n\n    const spaceWithoutPaddingInInput = formVars.sizing.height - verticalPadding * 2 - formVars.border.width * 2;\n\n    // Container of tokens\n    cssOut(\".Container ul.token-input-list\", {\n        minHeight: styleUnit(formVars.sizing.height),\n        paddingRight: important(0),\n        paddingBottom: important(0),\n    });\n\n    // Real text input\n    cssOut(\"ul.token-input-list li input\", {\n        boxSizing: \"border-box\",\n        height: styleUnit(spaceWithoutPaddingInInput),\n        paddingTop: important(0),\n        paddingBottom: important(0),\n        paddingLeft: important(0),\n        minHeight: important(\"initial\"),\n        maxWidth: calc(`100% - ${styleUnit(horizontalPadding)}`),\n        lineHeight: important(1),\n        borderRadius: important(0),\n        background: important(\"transparent\"),\n        border: important(0),\n    });\n\n    // Token\n    cssOut(\"li.token-input-token.token-input-token\", {\n        margin: 0,\n        padding: styleUnit(globalVars.meta.spacing.default),\n        marginBottom: styleUnit(verticalPadding),\n        lineHeight: styleUnit(globalVars.meta.text.lineHeight),\n        minHeight: styleUnit(spaceWithoutPaddingInInput),\n        ...Mixins.border({\n            ...globalVars.borderType.formElements.default,\n            color: globalVars.meta.colors.fg,\n        }),\n        display: \"inline-flex\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        marginRight: important(styleUnit(horizontalPadding) as string),\n    });\n\n    // Text inside token\n    cssOut(\"li.token-input-token.token-input-token p\", {\n        fontSize: styleUnit(globalVars.meta.text.size),\n        lineHeight: styleUnit(globalVars.meta.text.lineHeight),\n        color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n    });\n\n    // \"x\" inside token\n    cssOut(\"li.token-input-token span.token-input-delete-token\", {\n        ...{\n            \"&:hover, &:focus, &.focus-visible, &:active\": {\n                color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n            },\n        },\n    });\n\n    // Inline Checkboxes:\n    cssOut(\".Checkboxes.Inline\", {\n        display: \"flex\",\n        flexWrap: \"wrap\",\n        width: calc(`100% + ${styleUnit(globalVars.meta.spacing.default * 2)}`),\n        marginLeft: styleUnit(negative(globalVars.meta.spacing.default)),\n        marginTop: styleUnit(globalVars.meta.spacing.default),\n        ...{\n            \".CheckBoxLabel\": {\n                cursor: \"pointer\",\n                ...Mixins.margin({\n                    all: 0,\n                    right: styleUnit(globalVars.meta.spacing.default),\n                    bottom: styleUnit(globalVars.meta.spacing.default),\n                }),\n            },\n        },\n    });\n\n    cssOut(\"#Form_date\", {\n        marginRight: styleUnit(globalVars.gutter.half),\n    });\n\n    cssOut(`.FormWrapper label`, {\n        fontSize: globalVars.fonts.size.medium,\n        color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n    });\n\n    cssOut(`.js-datetime-picker`, {\n        display: \"flex\",\n        flexWrap: \"wrap\",\n        width: calc(`100% + ${styleUnit(globalVars.meta.spacing.default * 2)}`),\n        ...Mixins.margin({\n            left: -globalVars.meta.spacing.default,\n            right: globalVars.meta.spacing.default,\n        }),\n    });\n\n    cssOut(`.EventTime`, {\n        display: \"flex\",\n        flexWrap: \"nowrap\",\n    });\n\n    cssOut(`.InputBox.DatePicker`, {\n        flexGrow: 1,\n        minWidth: styleUnit(200),\n        maxWidth: percent(100),\n        ...Mixins.margin({\n            all: globalVars.meta.spacing.default,\n        }),\n    });\n\n    const formSpacer = 8;\n\n    cssOut(`.StructuredForm .P`, {\n        ...Mixins.margin({\n            vertical: globalVars.gutter.size,\n            horizontal: 0,\n        }),\n    });\n\n    cssOut(`.EventTime`, {\n        ...Mixins.margin({\n            left: negativeUnit(formSpacer),\n        }),\n        width: calc(`100% + ${styleUnit(formSpacer * 2)}`), // 2 inputs side by side\n    });\n\n    cssOut(`.EventTime .From, .EventTime .To`, {\n        position: \"relative\",\n        boxSizing: \"border-box\",\n        width: calc(`50% - ${styleUnit(formSpacer * 2)}`),\n        ...Mixins.margin({\n            top: 0,\n            horizontal: formSpacer,\n        }),\n    });\n\n    cssOut(`.Event.add .DatePicker, .Event.edit .DatePicker`, {\n        paddingRight: styleUnit(36),\n        ...Mixins.margin({\n            horizontal: 0,\n            vertical: formSpacer,\n        }),\n    });\n\n    cssOut(`.EventTime.Times .Timebased.EndTime`, {\n        ...Mixins.margin({\n            top: formSpacer,\n            bottom: 0,\n            horizontal: 0,\n        }),\n    });\n\n    mixinTextLinkNoDefaultLinkAppearance(`.EventTime.Times .Timebased.NoEndTime a`);\n\n    cssOut(`.EventTime.Times .Timebased.NoEndTime a`, {\n        color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n        fontSize: styleUnit(20),\n        cursor: \"pointer\",\n    });\n\n    cssOut(`.js-datetime-picker`, {\n        margin: 0,\n        width: percent(100),\n    });\n\n    cssOut(`.InputBox.InputBox.InputBox.TimePicker`, {\n        flexGrow: 1,\n        width: percent(100),\n        ...Mixins.margin({\n            all: 0,\n        }),\n    });\n\n    cssOut(`.EventTime.Times.Both .Timebased.NoEndTime`, {\n        ...absolutePosition.topRight(0, 6),\n    });\n\n    cssOut(`.StructuredForm input.hasDatepicker, .StructuredForm input.hasDatepicker:focus`, {\n        backgroundPosition: \"99% 50%\", // Intentional, to have fallback in case `calc` is not supported\n        backgroundPositionX: calc(`100% - ${styleUnit(5)}`),\n    });\n};\n\nfunction wrapSelects() {\n    const selects = document.querySelectorAll(\"select\");\n    selects.forEach((selectElement: HTMLElement) => {\n        const wrapper = document.createElement(\"div\");\n        wrapper.classList.add(\"SelectWrapper\");\n        selectElement.parentElement?.insertBefore(wrapper, selectElement);\n        wrapper.appendChild(selectElement);\n    });\n}\n\nexport const mixinInputStyles = (selector: string, focusSelector?: string | false, isImportant = false) => {\n    const globalVars = globalVariables();\n    const vars = inputVariables();\n    selector = trimTrailingCommas(selector);\n    const formVars = formElementsVariables();\n    const primary = ColorsUtils.colorOut(globalVars.mainColors.primary);\n    let extraFocus = {};\n    if (focusSelector) {\n        extraFocus = {\n            [focusSelector]: {\n                borderColor: isImportant ? important(primary as string) : primary,\n            },\n        };\n    }\n\n    cssOut(selector, {\n        ...textInputSizingFromFixedHeight(vars.sizing.height, vars.font.size as number, formVars.border.width * 2),\n        borderColor: ColorsUtils.colorOut(globalVars.border.color),\n        borderStyle: isImportant ? important(globalVars.border.style) : globalVars.border.style,\n        borderWidth: isImportant\n            ? important(styleUnit(globalVars.border.width) as string)\n            : styleUnit(globalVars.border.width),\n        borderRadius: isImportant\n            ? important(styleUnit(globalVars.border.radius) as string)\n            : styleUnit(globalVars.border.radius),\n        backgroundColor: isImportant\n            ? important(ColorsUtils.colorOut(globalVars.mainColors.bg) as string)\n            : ColorsUtils.colorOut(globalVars.mainColors.bg),\n        color: isImportant\n            ? important(ColorsUtils.colorOut(globalVars.mainColors.fg) as string)\n            : ColorsUtils.colorOut(globalVars.mainColors.fg),\n    });\n\n    cssOut(selector, {\n        \"&:active\": {\n            borderColor: isImportant ? important(primary as string) : primary,\n        },\n        \"&:hover\": {\n            borderColor: isImportant ? important(primary as string) : primary,\n        },\n        \"&:focus\": {\n            borderColor: isImportant ? important(primary as string) : primary,\n        },\n        \"&.focus-visible\": {\n            borderColor: isImportant ? important(primary as string) : primary,\n        },\n        \"&.token-input-highlighted-token\": {\n            borderColor: isImportant ? important(primary as string) : primary,\n        },\n        ...extraFocus,\n    });\n\n    cssOut(`ul.token-input-list, div.Popup .Body ul.token-input-list`, {\n        paddingBottom: importantUnit(0),\n        paddingRight: importantUnit(0),\n        minHeight: styleUnit(formVars.sizing.height),\n    });\n\n    cssOut(`.TextBoxWrapper li.token-input-token.token-input-token`, {\n        marginBottom: importantUnit(formVars.spacing.verticalPadding - formVars.border.width),\n        marginRight: importantUnit(formVars.spacing.horizontalPadding - 2 * formVars.border.width),\n    });\n\n    cssOut(`li.token-input-token span`, {\n        color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n    });\n\n    cssOut(`ul.token-input-list li input`, {\n        marginBottom: importantUnit(4),\n    });\n};\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { importantUnit, IStateSelectors } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { trimTrailingCommas } from \"@dashboard/compatibilityStyles/trimTrailingCommas\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { actionMixin, dropDownVariables } from \"@library/flyouts/dropDownStyles\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { shadowHelper, shadowOrBorderBasedOnLightness } from \"@library/styles/shadowHelpers\";\n\nexport const flyoutCSS = () => {\n    const globalVars = globalVariables();\n    const dropdownVars = dropDownVariables();\n    const mainColors = globalVars.mainColors;\n    const fg = ColorsUtils.colorOut(mainColors.fg);\n    const bg = ColorsUtils.colorOut(mainColors.bg);\n\n    // Dropdown hover/focus colors:\n    mixinFlyoutItem(\".MenuItems .Item a\");\n    mixinFlyoutItem(\".MenuItems.MenuItems li a\");\n    mixinFlyoutItem(\".Flyout.Flyout li a\");\n    mixinFlyoutItem(\".editor-action.editor-action.editor-action a\");\n    mixinFlyoutItem(\"div.token-input-dropdown ul li\", { hover: \".token-input-selected-dropdown-item\" });\n\n    mixinFlyoutItem(\"div.token-input-dropdown ul li.token-input-dropdown-item\");\n    mixinFlyoutItem(\"div.token-input-dropdown ul li.token-input-dropdown-item2\");\n\n    cssOut(\n        `\n        .Flyout.Flyout,\n        .richEditorFlyout,\n        .MenuItems\n        `,\n        {\n            background: bg,\n            ...Mixins.font({\n                size: globalVars.fonts.size.medium,\n            }),\n        },\n    );\n\n    // Flip Checkbox in dropdown for consistency with KB\n\n    cssOut(`.selectBox-item .dropdown-menu-link.selectBox-link`, {\n        ...Mixins.padding({\n            left: importantUnit(26),\n            right: importantUnit(38),\n        }),\n    });\n\n    cssOut(`.selectBox-item.isActive .dropdown-menu-link.selectBox-link`, {\n        backgroundColor: ColorsUtils.colorOut(globalVars.states.active.highlight),\n        ...{\n            \".dropdown-menu-link.selectBox-link\": {\n                cursor: \"pointer\",\n            },\n        },\n    });\n\n    cssOut(\".selectBox-selectedIcon\", {\n        left: \"auto\",\n        right: styleUnit(13),\n        color: ColorsUtils.colorOut(globalVars.mainColors.primaryContrast),\n    });\n\n    cssOut(\n        `\n        .MenuItems hr,\n        .MenuItems .menu-separator,\n        .MenuItems .dd-separator,\n        .MenuItems .editor-action-separator,\n        .Flyout.Flyout hr,\n        .Flyout.Flyout .menu-separator,\n        .Flyout.Flyout .dd-separator,\n        .Flyout.Flyout .editor-action-separator\n        `,\n        {\n            borderBottomColor: ColorsUtils.colorOut(globalVars.separator.color),\n        },\n    );\n\n    cssOut(\".MenuItems, .Flyout.Flyout\", {\n        ...Mixins.border(globalVars.borderType.dropDowns),\n        ...shadowOrBorderBasedOnLightness(\n            dropdownVars.contents.bg,\n            Mixins.border(dropdownVars.contents.border),\n            shadowHelper().dropDown(),\n        ),\n        overflow: \"hidden\",\n    });\n};\n\nfunction mixinFlyoutItem(selector: string, classBasedStates?: IStateSelectors) {\n    selector = trimTrailingCommas(selector);\n    const styles = actionMixin(classBasedStates);\n    cssOut(selector, styles);\n}\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { allLinkStates, extendItemContainer, negative } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { important } from \"csx\";\nimport { trimTrailingCommas } from \"@dashboard/compatibilityStyles/trimTrailingCommas\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { metaContainerStyles } from \"@vanilla/library/src/scripts/styles/metasStyles\";\nimport trim from \"validator/lib/trim\";\nimport { logDebugConditionnal } from \"@vanilla/utils\";\nimport { CSSObject } from \"@emotion/css\";\nimport { userCardClasses } from \"@library/features/users/ui/popupUserCardStyles\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const mixinMetaContainer = (selector: string, overwrites = {}) => {\n    cssOut(selector, metaContainerStyles(overwrites));\n};\n\nexport const linkSelectors = `\n    .MessageList .ItemDiscussion .MItem.RoleTracker a:not(.Tag),\n    .MessageList .ItemComment .MItem.RoleTracker a:not(.Tag),\n    .MainContent.Content .MessageList.Discussion .Item.ItemComment .MItem.RoleTracker a:not(.Tag),\n    .MainContent.Content .MItem.RoleTracker a:not(.Tag),\n    .MessageList .ItemComment .Username,\n    .MessageList .ItemDiscussion .Username,\n    .AuthorInfo .MItem.RoleTracker a:not(.Tag),\n    .MItem > a:not(.Tag),\n`;\n\nexport const forumMetaCSS = () => {\n    const globalVars = globalVariables();\n    const mainColors = globalVars.mainColors;\n\n    mixinMetaLinkContainer(\".DataList\");\n    mixinMetaLinkContainer(\".DataList-Search\");\n    mixinMetaLinkContainer(\".Breadcrumbs\");\n    mixinMetaLinkContainer(\".DataList\");\n    mixinMetaLinkContainer(\".MessageList\");\n    mixinMetaLinkContainer(\".MessageList\");\n    mixinMetaLinkContainer(\".DataTableWrap\");\n    mixinMetaLinkContainer(`.Container .Frame-contentWrap .ChildCategories`);\n    mixinMetaLinkContainer(`.Item.Application .Meta`);\n    mixinMetaLinkContainer(`.Meta.Group-Meta.Group-Info`);\n\n    cssOut(\n        `\n        .ItemDiscussion .Meta,\n        .DataList .Meta\n    `,\n        {\n            color: ColorsUtils.colorOut(globalVars.meta.text.color),\n            fontSize: styleUnit(globalVars.meta.text.size),\n        },\n    );\n\n    cssOut(`.MessageList .ItemComment span.MItem.RoleTracker`, {\n        padding: 0,\n        margin: 0,\n    });\n\n    // Links\n    cssOut(trimTrailingCommas(linkSelectors).trim(), {\n        display: \"inline-flex\",\n        alignItems: \"center\",\n        opacity: important(1),\n        textDecoration: \"none\",\n    });\n\n    // Split because it seems there's a bug with TypeStyles and it's unable to handle the deep nesting.\n    trimTrailingCommas(linkSelectors)\n        .split(\",\")\n        .map((s) => {\n            const selector = trim(s);\n            const debug = false;\n            const linkStates: CSSObject = allLinkStates(\n                {\n                    noState: {\n                        color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n                    },\n                    hover: {\n                        color: ColorsUtils.colorOut(globalVars.links.colors.hover),\n                        textDecoration: \"underline\",\n                    },\n                    focus: {\n                        color: ColorsUtils.colorOut(globalVars.links.colors.focus),\n                        textDecoration: \"underline\",\n                    },\n                    keyboardFocus: {\n                        color: ColorsUtils.colorOut(globalVars.links.colors.keyboardFocus),\n                        textDecoration: \"underline\",\n                    },\n                    active: {\n                        color: ColorsUtils.colorOut(globalVars.links.colors.active),\n                        textDecoration: \"underline\",\n                    },\n                },\n                {},\n            );\n\n            logDebugConditionnal(debug, linkStates);\n            cssOut(selector, linkStates);\n        });\n\n    cssOut(\n        `\n        .MessageList .ItemDiscussion .MItem.RoleTracker a:not(.Tag),\n        .MessageList .ItemComment .MItem.RoleTracker a:not(.Tag),\n        .MainContent.Content .MessageList.Discussion .Item.ItemComment .MItem.RoleTracker a:not(.Tag),\n        .MainContent.Content .MItem.RoleTracker a:not(.Tag),\n    `,\n        {\n            ...Mixins.padding({\n                horizontal: 0,\n            }),\n            ...Mixins.margin({\n                all: 0,\n            }),\n        },\n    );\n\n    cssOut(\n        `\n        .Content .MessageList .RoleTracker > .Tag,\n        .Tag\n        `,\n        {\n            color: ColorsUtils.colorOut(globalVars.meta.text.color),\n        },\n    );\n\n    cssOut(\n        `\n        .ItemDiscussion.ItemIdea .Title a,\n        .Content .DataList .Tag,\n        .Content .DataList .Tag-Poll,\n        .Content .DataList .RoleTracker,\n        .Content .DataList .IdeationTag,\n        .Content .MessageList .Tag,\n        .Content .MessageList .Tag-Poll,\n        .Content .MessageList .RoleTracker,\n        .Content .MessageList .IdeationTag,\n        .Content .DataTableWrap .Tag,\n        .Content .DataTableWrap .Tag-Poll,\n        .Content .DataTableWrap .RoleTracker,\n        .Content .DataTableWrap .IdeationTag\n        `,\n        {\n            marginLeft: styleUnit(globalVars.meta.spacing.default),\n        },\n    );\n\n    cssOut(\n        `\n        .Meta-Discussion > .Tag,\n        .idea-counter-module`,\n        {\n            marginRight: styleUnit(globalVars.meta.spacing.default),\n        },\n    );\n\n    cssOut(`.Tag`, {\n        background: \"none\",\n    });\n\n    cssOut(\".AuthorWrap\", {\n        ...extendItemContainer(globalVars.meta.spacing.default),\n    });\n\n    cssOut(\n        `\n    .AuthorWrap a.Username,\n    .AuthorWrap .${userCardClasses().link},\n    .AuthorInfo .MItem,\n    .DiscussionMeta .MItem,\n    `,\n        {\n            ...Mixins.padding({\n                all: 0,\n            }),\n            ...Mixins.margin({\n                horizontal: styleUnit(globalVars.meta.spacing.default),\n            }),\n        },\n    );\n\n    mixinMetaContainer(`.Container .DataTable .DiscussionName .Meta.Meta-Discussion`, {\n        overflow: \"visible\",\n        display: \"block\",\n    });\n\n    cssOut(`.Container .AuthorInfo .MItem`, {\n        display: \"inline-flex\",\n        alignItems: \"center\",\n    });\n\n    cssOut(`.Container .AuthorInfo .MItem img`, {\n        paddingLeft: styleUnit(12),\n    });\n\n    cssOut(\n        `\n        .DataList .MItem > a:hover,\n        .DataList .MItem > a:focus,\n        .DataList .MItem > a:active,\n        .DataList .MItem > a.focus-visible\n        `,\n        {\n            textDecoration: \"none\",\n        },\n    );\n\n    cssOut(`.MItem img`, {\n        width: \"auto\",\n        height: styleUnit(12),\n        ...Mixins.padding({\n            left: 12,\n        }),\n    });\n\n    cssOut(`.DataList.Discussions .ItemContent .Meta`, {\n        marginLeft: styleUnit(negative(globalVars.meta.spacing.horizontalMargin)),\n    });\n\n    const linkColors = Mixins.clickable.itemState();\n    const inlineTagSelector = `.InlineTags.Meta a`;\n    cssOut(inlineTagSelector, {\n        ...linkColors,\n    });\n};\n\nfunction mixinMetaLinkContainer(selector: string) {\n    selector = trimTrailingCommas(selector);\n    const vars = globalVariables();\n    const metaFg = ColorsUtils.colorOut(vars.meta.colors.fg);\n\n    cssOut(selector, {\n        color: metaFg,\n        textDecoration: \"none\",\n        ...{\n            \"& a\": {\n                color: metaFg,\n                fontSize: \"inherit\",\n                textDecoration: \"underline\",\n            },\n            \"& a:hover\": {\n                textDecoration: \"underline\",\n            },\n            \"& a:focus\": {\n                textDecoration: \"underline\",\n            },\n            \"& a.focus-visible\": {\n                textDecoration: \"underline\",\n            },\n        },\n    });\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { percent } from \"csx\";\nimport { styleFactory, variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { allLinkStates } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\n\nexport const panelListVariables = useThemeCache(() => {\n    const globalVals = globalVariables();\n    const makeThemeVars = variableFactory(\"panelList\");\n\n    const title = makeThemeVars(\"title\", {\n        fontSize: globalVals.fonts.size.large,\n    });\n    const offset = makeThemeVars(\"offset\", {\n        default: 12,\n    });\n    const link = makeThemeVars(\"link\", {\n        fontSize: globalVals.fonts.size.medium,\n        hover: {\n            color: globalVals.links.colors.default,\n        },\n        focus: {\n            color: globalVals.links.colors.focus,\n        },\n    });\n    return {\n        title,\n        offset,\n        link,\n    };\n});\n\nexport const panelListClasses = useThemeCache((mediaQueries) => {\n    const globalVars = globalVariables();\n    const vars = panelListVariables();\n    const style = styleFactory(\"panelList\");\n\n    const root = style({\n        position: \"relative\",\n        display: \"block\",\n    });\n\n    const title = style(\"title\", {\n        fontSize: styleUnit(vars.title.fontSize),\n        marginBottom: styleUnit(vars.offset.default),\n    });\n\n    const item = style(\"item\", {\n        ...{\n            \"& + &\": {\n                marginTop: styleUnit(vars.offset.default),\n            },\n        },\n    });\n\n    const link = style(\"link\", {\n        display: \"block\",\n        position: \"relative\",\n        width: percent(100),\n        fontSize: styleUnit(vars.link.fontSize),\n        color: \"inherit\",\n        ...allLinkStates({\n            allStates: {\n                textDecoration: \"none\",\n            },\n            hover: {\n                color: globalVars.links.colors.hover,\n            },\n            focus: {\n                color: globalVars.links.colors.focus,\n            },\n        }),\n    });\n\n    const items = style(\"items\", {});\n\n    return {\n        root: root + \" panelList\", // This needs to be referenced in another file and was causing a circular import, so the static class is targetted instead\n        title,\n        item,\n        link,\n        items,\n    };\n});\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { inputVariables } from \"@library/forms/inputStyles\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { siteNavVariables } from \"@library/navigation/siteNavStyles\";\nimport { panelListVariables } from \"@library/layout/panelListStyles\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { Variables } from \"@library/styles/Variables\";\n\nexport const forumFontsVariables = useThemeCache(() => {\n    const makeThemeVars = variableFactory(\"forumFonts\");\n    const globalVars = globalVariables();\n    const fonts = makeThemeVars(\"fonts\", {\n        sizes: {\n            title: globalVars.fonts.size.large,\n            base: globalVars.fonts.size.medium,\n\n            // large: 16,\n            // medium: 14,\n            // small: 12,\n            // largeTitle: 32,\n            // title: 22,\n            // subTitle: 18,\n        },\n    });\n\n    const navVars = siteNavVariables();\n    const panelLink = makeThemeVars(\"panelLink\", {\n        padding: {\n            all: navVars.node.padding + navVars.node.borderWidth,\n        },\n        spacer: {\n            default: panelListVariables().offset.default,\n        },\n    });\n\n    const panelTitle = makeThemeVars(\"panelTitle\", {\n        margins: Variables.spacing({\n            bottom: navVars.spacer.default,\n        }),\n    });\n\n    return { fonts, panelLink, panelTitle };\n});\n\nexport const fontCSS = () => {\n    const globalVars = globalVariables();\n    const vars = forumFontsVariables();\n    const inputVars = inputVariables();\n\n    const mainColors = globalVars.mainColors;\n    const fg = ColorsUtils.colorOut(mainColors.fg);\n    const bg = ColorsUtils.colorOut(mainColors.bg);\n    const primary = ColorsUtils.colorOut(mainColors.primary);\n    const metaFg = ColorsUtils.colorOut(globalVars.meta.colors.fg);\n\n    cssOut(`.Meta .MItem`, {\n        ...Mixins.font(globalVars.meta.text),\n    });\n\n    cssOut(\".Meta .MItem:first-of-type\", {\n        marginLeft: 0,\n    });\n\n    cssOut(\".Meta .MItem.RSS + .MItem\", {\n        marginLeft: 0,\n    });\n\n    cssOut(\n        `\n        .Content .Title,\n        .Content .Title a\n    `,\n        {\n            ...forumTitleMixin(),\n        },\n    );\n\n    // Panel Headings\n    cssOut(`.Panel h4:not(.no-css), .Panel h3:not(.no-css), .Panel h2:not(.no-css)`, {\n        ...Mixins.padding({\n            vertical: 0,\n        }),\n        marginBottom: styleUnit(panelListVariables().offset.default),\n        ...Mixins.font({\n            size: vars.fonts.sizes.title,\n            weight: globalVars.fonts.weights.bold,\n        }),\n    });\n\n    // Categories, top level\n    cssOut(\n        `\n        body.Section-EditProfile .Box .PanelCategories li.Heading,\n        .BoxFilter:not(.BoxBestOfFilter) .PanelCategories li.Heading,\n        .BoxCategories.BoxCategories .PanelCategories li.Heading\n    `,\n        {\n            ...Mixins.font({\n                size: vars.fonts.sizes.title,\n                weight: globalVars.fonts.weights.semiBold,\n                lineHeight: globalVars.lineHeights.condensed,\n            }),\n        },\n    );\n\n    cssOut(\n        `\n        body.Section-EditProfile .Box .PanelCategories li.Depth2 a,\n        .BoxFilter:not(.BoxBestOfFilter) .PanelCategories li.Depth2 a,\n        .BoxCategories.BoxCategories .PanelCategories li.Depth2 a,\n    `,\n        {\n            ...Mixins.font({\n                size: vars.fonts.sizes.base,\n                weight: globalVars.fonts.weights.semiBold,\n                lineHeight: globalVars.lineHeights.condensed,\n            }),\n        },\n    );\n\n    cssOut(\n        `\n        .Panel .Box a:not(.Button):not(.Tag),\n        .Panel .BoxFilter a:not(.Button):not(.Tag),\n        body.Section-EditProfile .Box .PanelCategories li.Depth3 a,\n        body.Section-EditProfile .Box .PanelCategories li.Depth4 a,\n        body.Section-EditProfile .Box .PanelCategories li.Depth5 a,\n        .BoxFilter:not(.BoxBestOfFilter) .PanelCategories li.Depth3 a,\n        .BoxFilter:not(.BoxBestOfFilter) .PanelCategories li.Depth4 a,\n        .BoxFilter:not(.BoxBestOfFilter) .PanelCategories li.Depth5 a,\n        .BoxCategories.BoxCategories .PanelCategories li.Depth3 a,\n        .BoxCategories.BoxCategories .PanelCategories li.Depth4 a,\n        .BoxCategories.BoxCategories .PanelCategories li.Depth5 a\n    `,\n        {\n            ...Mixins.font({\n                size: vars.fonts.sizes.base,\n                weight: globalVars.fonts.weights.normal,\n                lineHeight: globalVars.lineHeights.condensed,\n            }),\n        },\n    );\n\n    for (let i = 1; i <= 12; i++) {\n        const offset = styleUnit((i - 1) * vars.panelLink.spacer.default);\n        // Links\n        cssOut(\n            `\n            body.Section-EditProfile .Box .PanelCategories li.Depth${i} a.ItemLink,\n            .BoxFilter:not(.BoxBestOfFilter) .PanelCategories li.Depth${i} a.ItemLink,\n            .BoxCategories.BoxCategories .PanelCategories li.Depth${i} a.ItemLink,\n            .Panel.Panel-main .Box .Heading[aria-level='${i}'],\n        `,\n            {\n                fontSize: styleUnit(i === 1 ? globalVars.fonts.size.medium : globalVars.fonts.size.small),\n                paddingLeft: offset,\n                color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n            },\n        );\n\n        // Headings\n        cssOut(\n            `\n            .Panel.Panel-main .Box .Heading.Heading[aria-level='${i}'],\n        `,\n            {\n                fontSize: i === 1 ? styleUnit(globalVars.fonts.size.large) : styleUnit(globalVars.fonts.size.small),\n                paddingLeft: offset,\n            },\n        );\n    }\n};\n\nexport const forumTitleMixin = () => {\n    const vars = forumFontsVariables();\n    return {\n        ...Mixins.font({\n            size: vars.fonts.sizes.title,\n        }),\n        textDecoration: \"none\",\n    };\n};\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { containerMainMediaQueries, containerMainStyles } from \"@library/layout/components/containerStyles\";\nimport { CSSObject } from \"@emotion/css\";\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { calc, important, percent } from \"csx\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { media } from \"@library/styles/styleShim\";\nimport { lineHeightAdjustment } from \"@library/styles/textUtils\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\n\nexport const forumLayoutVariables = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"forumLayout\");\n\n    // Important variables that will be used to calculate other variables\n    const foundationalWidths = makeThemeVars(\"foundationalWidths\", {\n        fullGutter: globalVars.constants.fullGutter,\n        panelWidth: 220, // main calculated based on panel width\n        breakPoints: {\n            // Other break points are calculated\n            oneColumn: 1200,\n            tablet: 991,\n            mobile: 768,\n            xs: 576,\n        },\n    });\n\n    const mediaQueries = () => {\n        const noBleed = (styles: CSSObject, useMinWidth: boolean = true) => {\n            return media(\n                {\n                    maxWidth: panel.paddedWidth,\n                    minWidth: useMinWidth ? foundationalWidths.breakPoints.oneColumn + 1 : undefined,\n                },\n                styles,\n            );\n        };\n\n        const noBleedDown = (styles: CSSObject) => {\n            return noBleed(styles, false);\n        };\n\n        const oneColumn = (styles: CSSObject, useMinWidth: boolean = true) => {\n            return media(\n                {\n                    maxWidth: foundationalWidths.breakPoints.oneColumn,\n                    minWidth: useMinWidth ? foundationalWidths.breakPoints.tablet + 1 : undefined,\n                },\n                styles,\n            );\n        };\n\n        const oneColumnDown = (styles: CSSObject) => {\n            return oneColumn(styles, false);\n        };\n\n        const tablet = (styles: CSSObject, useMinWidth: boolean = true) => {\n            return media(\n                {\n                    maxWidth: foundationalWidths.breakPoints.tablet,\n                    minWidth: useMinWidth ? foundationalWidths.breakPoints.mobile + 1 : undefined,\n                },\n                styles,\n            );\n        };\n\n        const tabletDown = (styles: CSSObject) => {\n            return tablet(styles, false);\n        };\n\n        const mobile = (styles: CSSObject, useMinWidth: boolean = true) => {\n            return media(\n                {\n                    maxWidth: foundationalWidths.breakPoints.mobile,\n                    minWidth: useMinWidth ? foundationalWidths.breakPoints.xs + 1 : undefined,\n                },\n                styles,\n            );\n        };\n\n        const aboveMobile = (styles: CSSObject) => {\n            return media(\n                {\n                    minWidth: foundationalWidths.breakPoints.mobile + 1,\n                },\n                styles,\n            );\n        };\n\n        const mobileDown = (styles: CSSObject) => {\n            return mobile(styles, false);\n        };\n\n        const xs = (styles: CSSObject) => {\n            return media(\n                {\n                    maxWidth: foundationalWidths.breakPoints.xs,\n                },\n                styles,\n            );\n        };\n\n        const aboveXs = (styles: CSSObject) => {\n            return media(\n                {\n                    minWidth: foundationalWidths.breakPoints.xs + 1,\n                },\n                styles,\n            );\n        };\n\n        return {\n            noBleed,\n            noBleedDown,\n            oneColumn,\n            oneColumnDown,\n            tablet,\n            tabletDown,\n            aboveMobile,\n            mobile,\n            mobileDown,\n            aboveXs,\n            xs,\n        };\n    };\n\n    const gutter = makeThemeVars(\"gutter\", {\n        full: foundationalWidths.fullGutter, // 48\n        size: foundationalWidths.fullGutter / 2, // 24\n        halfSize: foundationalWidths.fullGutter / 4, // 12\n        quarterSize: foundationalWidths.fullGutter / 8, // 6\n        mainGutterOffset: foundationalWidths.fullGutter,\n    });\n\n    const panel = makeThemeVars(\"panel\", {\n        width: foundationalWidths.panelWidth,\n        paddedWidth: foundationalWidths.panelWidth + gutter.size,\n    });\n\n    const main = makeThemeVars(\"main\", {\n        width: calc(`100% - ${styleUnit(panel.paddedWidth + gutter.mainGutterOffset)}`),\n        topSpacing: 40,\n    });\n\n    const cell = makeThemeVars(\"cell\", {\n        paddings: {\n            horizontal: 8,\n            vertical: 12,\n        },\n    });\n\n    return {\n        gutter,\n        panel,\n        main,\n        cell,\n        mediaQueries,\n    };\n});\n\nexport const forumLayoutCSS = () => {\n    const globalVars = globalVariables();\n    const vars = forumLayoutVariables();\n\n    const mainColors = globalVars.mainColors;\n    const mediaQueries = vars.mediaQueries();\n\n    cssOut(\n        `.Container, body.Section-Event.NoPanel .Frame-content > .Container`,\n        mediaQueries.tablet({\n            ...Mixins.padding({\n                horizontal: 12,\n            }),\n        }),\n    );\n\n    cssOut(`body.Section-Event.NoPanel .Frame-content > .Container`, containerMainStyles());\n\n    cssOut(`.Frame-content .HomepageTitle`, {\n        ...lineHeightAdjustment(),\n    });\n\n    cssOut(\n        `.Panel`,\n        {\n            width: styleUnit(vars.panel.paddedWidth),\n            ...Mixins.padding({\n                vertical: globalVars.gutter.half,\n            }),\n        },\n        mediaQueries.oneColumnDown({\n            width: percent(100),\n        }),\n    );\n\n    cssOut(\n        `.Content.MainContent`,\n        {\n            width: styleUnit(vars.main.width),\n            ...Mixins.padding({\n                all: globalVars.gutter.half,\n            }),\n        },\n        mediaQueries.oneColumnDown({\n            width: percent(100),\n        }),\n    );\n\n    cssOut(`.Container`, containerMainStyles(), containerMainMediaQueries());\n\n    cssOut(`.Frame-row`, {\n        display: \"flex\",\n        flexWrap: \"nowrap\",\n        justifyContent: \"space-between\",\n        ...Mixins.padding({\n            all: globalVars.gutter.half,\n        }),\n        \"& > *\": {\n            ...Mixins.padding({\n                horizontal: globalVars.gutter.half,\n            }),\n        },\n        ...mediaQueries.oneColumnDown({\n            flexWrap: important(\"wrap\"),\n            ...Mixins.padding({\n                horizontal: 0,\n            }),\n        }),\n        ...mediaQueries.tablet({\n            ...Mixins.padding({\n                horizontal: 0,\n            }),\n        }),\n    });\n};\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\n// This file is a WIP. It's currently only used for the image size, but it doesn't hurt anything to have it here.\n\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { userPhotoVariables } from \"@library/headers/mebox/pieces/userPhotoStyles\";\n\nexport const forumVariables = useThemeCache((forcedVars?: IThemeVariables) => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"forum\", forcedVars);\n\n    const modern = makeThemeVars(\"modern\", {});\n    const table = makeThemeVars(\"table\", {});\n\n    const lists = makeThemeVars(\"lists\", {\n        spacing: {\n            padding: {\n                top: 15,\n                right: globalVars.gutter.half,\n                bottom: 16,\n                left: globalVars.gutter.half,\n            },\n            margin: {\n                top: \"initial\",\n                right: \"initial\",\n                bottom: \"initial\",\n                left: \"initial\",\n            },\n        },\n        colors: {\n            backgroundColor: \"transparent\",\n            backgroundColorRead: \"transparent\",\n        },\n        text: {\n            title: {\n                colors: {\n                    noState: \"\",\n                    focus: \"\",\n                    hover: \"\",\n                    active: \"\",\n                },\n            },\n            meta: {\n                colors: {\n                    noState: ColorsUtils.colorOut(globalVars.mainColors.fg),\n                    focus: ColorsUtils.colorOut(globalVars.links.colors.focus),\n                    keyboardFocus: ColorsUtils.colorOut(globalVars.links.colors.keyboardFocus),\n                    hover: ColorsUtils.colorOut(globalVars.links.colors.hover),\n                    active: ColorsUtils.colorOut(globalVars.links.colors.active),\n                },\n            },\n        },\n    });\n\n    const discussions = makeThemeVars(\"discussions\", {\n        modern: {\n            ...modern,\n        },\n        table: {\n            ...table,\n        },\n    });\n\n    const discussion = makeThemeVars(\"discussion\", {});\n    const categories = makeThemeVars(\"categories\", {\n        modern: {\n            ...modern,\n        },\n        table: {\n            ...table,\n        },\n        mixed: {},\n    });\n\n    const userPhoto = makeThemeVars(\"userPhoto\", userPhotoVariables());\n\n    const spacer = makeThemeVars(\"spacer\", {\n        ...globalVars.spacer,\n    });\n\n    const countBox = makeThemeVars(\"countBox\", {\n        width: 40,\n        height: 40,\n    });\n\n    return {\n        modern,\n        table,\n        lists,\n        discussions,\n        discussion,\n        categories,\n        userPhoto,\n        countBox,\n        spacer,\n    };\n});\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { importantUnit } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { forumLayoutVariables } from \"@dashboard/compatibilityStyles/forumLayoutStyles\";\nimport { calc, important, percent, translateY } from \"csx\";\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { forumVariables } from \"@library/forms/forumStyleVars\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { FontSizeProperty } from \"csstype\";\nimport { TLength } from \"typestyle\";\nimport { CSSObject } from \"@emotion/css\";\nimport { lineHeightAdjustment } from \"@library/styles/textUtils\";\nimport { userContentVariables } from \"@library/content/userContentStyles\";\n\nexport const forumCategoriesVariables = useThemeCache(() => {\n    const makeThemeVars = variableFactory(\"forumCategories\");\n    const image = makeThemeVars(\"image\", {\n        width: forumVariables().userPhoto.sizing.medium,\n    });\n\n    return {\n        image: image,\n    };\n});\n\nexport const categoriesCSS = () => {\n    const globalVars = globalVariables();\n    const layoutVars = forumLayoutVariables();\n    const vars = forumCategoriesVariables();\n\n    // Category list\n\n    cssOut(`.DataList .Item .Title`, {\n        marginBottom: styleUnit(4),\n    });\n\n    cssOut(`.ItemContent.Category`, {\n        position: \"relative\",\n    });\n\n    cssOut(`.categoryList-heading`, {\n        color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n    });\n\n    cssOut(`.CategoryGroup`, {\n        marginTop: styleUnit(globalVars.gutter.size * 2.5),\n    });\n\n    cssOut(`.Groups .DataTable.CategoryTable thead .CategoryName, .DataTable.CategoryTable thead .CategoryName`, {\n        paddingLeft: styleUnit(layoutVars.cell.paddings.horizontal),\n    });\n\n    cssOut(\n        `.Groups .DataTable h2, .Groups .DataTable h3, .Groups .DataTable .Title.Title, .DataTable h2, .DataTable h3, .DataTable .Title.Title`,\n        {\n            marginBottom: 0,\n        },\n    );\n\n    cssOut(`.CategoryNameHeading.isEmptyDescription + .CategoryDescription`, {\n        display: important(\"none\"),\n    });\n\n    cssOut(`.CategoryNameHeading.isEmptyDescription`, {\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignItems: \"flex-start\",\n    });\n\n    cssOut(`a.Bookmark`, {\n        backgroundImage: important(\"none\"),\n        color: important(\"transparent\"),\n        font: `0/0 a`,\n        height: \"auto\",\n        textIndent: \"0\",\n        width: \"auto\",\n        verticalAlign: \"top\",\n        overflow: \"hidden\",\n        fontSize: importantUnit(1),\n        textDecoration: important(\"none\"),\n    });\n\n    cssOut(\n        `.Groups .DataTable.CategoryTable tbody td.CategoryName .PhotoWrap, .DataTable.CategoryTable tbody td.CategoryName .PhotoWrap`,\n        {\n            width: styleUnit(vars.image.width),\n            height: styleUnit(vars.image.width),\n        },\n    );\n\n    cssOut(`.CategoryBox`, {\n        position: \"relative\",\n    });\n\n    cssOut(`.CategoryBox .H`, {\n        ...Mixins.font({\n            size: globalVars.fonts.size.largeTitle,\n            lineHeight: globalVars.lineHeights.condensed,\n        }),\n    });\n\n    cssOut(`.CategoryBox-Head`, {\n        position: \"relative\",\n        display: \"flex\",\n        flexWrap: \"wrap\",\n        alignItems: \"flex-start\",\n        justifyContent: \"flex-start\",\n        width: percent(100),\n    });\n\n    cssOut(`.CategoryBox-Head .H`, {\n        width: calc(`100% - ${styleUnit(35)}`),\n    });\n\n    cssOut(`.CategoryBox-Head .OptionsMenu`, {\n        float: \"none\",\n        transform: translateY(`-50%`),\n        ...Mixins.margin({\n            horizontal: 0,\n            top: styleUnit((globalVars.fonts.size.largeTitle * globalVars.lineHeights.condensed) / 2),\n            left: \"auto\",\n        }),\n    });\n\n    cssOut(`.Panel .Box.BoxCategories .PanelInfo.PanelCategories .Heading`, {\n        paddingLeft: 0,\n        paddingTop: styleUnit(18),\n        fontWeight: globalVars.fonts.weights.bold,\n        fontSize: styleUnit(globalVars.fonts.size.large),\n    });\n\n    cssOut(`.Panel .Box.BoxCategories .PanelInfo.PanelCategories .Heading .Count`, {\n        display: \"none\",\n    });\n\n    cssOut(`.Panel .Box.BoxCategories .PanelInfo.PanelCategories  Li.Depth1`, {\n        paddingTop: styleUnit(18),\n    });\n\n    cssOut(`.Panel .Box.BoxCategories .PanelInfo.PanelCategories  Li.Depth1 a.ItemLink`, {\n        fontWeight: globalVars.fonts.weights.semiBold,\n        fontSize: styleUnit(globalVars.fonts.size.large),\n    });\n\n    cssOut(`.Panel .Box.BoxCategories .PanelInfo.PanelCategories li.Depth2 a.ItemLink`, {\n        fontWeight: globalVars.fonts.weights.normal,\n    });\n\n    cssOut(`.DataList .Item, .DataList .Empty`, {\n        width: percent(100),\n    });\n};\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { absolutePosition, importantUnit, singleBorder } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { calc, important, percent } from \"csx\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { forumLayoutVariables } from \"@dashboard/compatibilityStyles/forumLayoutStyles\";\nimport { forumVariables } from \"@library/forms/forumStyleVars\";\nimport { userPhotoMixins } from \"@library/headers/mebox/pieces/userPhotoStyles\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const tableCSS = () => {\n    const vars = globalVariables();\n    const layoutVars = forumLayoutVariables();\n    const forumVars = forumVariables();\n    const userPhotoSizing = forumVars.userPhoto.sizing;\n    const mixins = userPhotoMixins(forumVars.userPhoto);\n    const margin = 12;\n\n    cssOut(\n        `\n        .Groups .DataTable .LatestPostTitle,\n        .Groups .DataTable .UserLink.BlockTitle,\n        .Groups .DataTable .BigCount .Meta,\n        .Groups .DataTable .Block.Wrap .Meta,\n        .DataTable .LatestPostTitle,\n        .DataTable .UserLink.BlockTitle,\n        .DataTable .BigCount .Meta,\n        .DataTable .Block.Wrap .Meta\n        `,\n        {\n            width: calc(`100% - ${styleUnit(userPhotoSizing.medium + margin)}`),\n            marginTop: 0,\n        },\n    );\n\n    cssOut(\n        `\n        .Groups .DataTable .UserLink.BlockTitle,\n        .DataTable .UserLink.BlockTitle,\n        `,\n        {\n            fontWeight: vars.fonts.weights.normal,\n        },\n    );\n\n    cssOut(\n        `\n        .Groups .DataTable tbody td.LatestPost .PhotoWrap,\n        .Groups .DataTable tbody td.LastUser .PhotoWrap,\n        .Groups .DataTable tbody td.FirstUser .PhotoWrap,\n        .DataTable tbody td.LatestPost .PhotoWrap,\n        .DataTable tbody td.LastUser .PhotoWrap,\n        .DataTable tbody td.FirstUser .PhotoWrap\n    `,\n        {\n            ...mixins.root,\n            ...absolutePosition.topLeft(),\n            width: styleUnit(userPhotoSizing.medium),\n            height: styleUnit(userPhotoSizing.medium),\n        },\n    );\n\n    cssOut(\n        `\n        .Groups .DataTable tbody td.LatestPost .PhotoWrap img,\n        .Groups .DataTable tbody td.LastUser .PhotoWrap img,\n        .Groups .DataTable tbody td.FirstUser .PhotoWrap img,\n        .DataTable tbody td.LatestPost .PhotoWrap img,\n        .DataTable tbody td.LastUser .PhotoWrap img,\n        .DataTable tbody td.FirstUser .PhotoWrap img\n    `,\n        mixins.photo,\n    );\n\n    cssOut(\n        `\n        .DataTable thead td,\n        .DataTableWrap.GroupWrap thead td,\n    `,\n        {\n            ...Mixins.padding({\n                vertical: vars.gutter.size,\n                horizontal: importantUnit(vars.gutter.half),\n            }),\n        },\n    );\n\n    cssOut(\n        `\n        .Groups .DataTable tbody td.LatestPost a,\n        .Groups .DataTable tbody td.LastUser a,\n        .Groups .DataTable tbody td.FirstUser a,\n        .DataTable tbody td.LatestPost a,\n        .DataTable tbody td.LastUser a,\n        .DataTable tbody td.FirstUser a\n        `,\n        {\n            color: ColorsUtils.colorOut(vars.mainColors.fg),\n            fontSize: styleUnit(vars.meta.text.size),\n            textDecoration: important(\"none\"),\n        },\n    );\n\n    cssOut(`.Groups .DataTable .Item td, .DataTable .Item td`, {\n        borderBottom: singleBorder(),\n        padding: 0,\n    });\n\n    cssOut(`.Groups .DataTable .Item:first-child td, .DataTable .Item:first-child td`, {\n        borderTop: singleBorder(),\n    });\n\n    cssOut(`.Groups .DataTable td .Wrap, .DataTable td .Wrap`, {\n        ...Mixins.padding({\n            vertical: layoutVars.cell.paddings.vertical,\n            left: calc(`${styleUnit(layoutVars.cell.paddings.horizontal)} / 2`),\n            right: calc(`${styleUnit(layoutVars.cell.paddings.horizontal)} / 2`),\n        }),\n    });\n\n    cssOut(\n        `.Groups .DataTable .Excerpt, .Groups .DataTable .CategoryDescription, .DataTable .Excerpt, .DataTable .CategoryDescription`,\n        {\n            color: ColorsUtils.colorOut(vars.mainColors.fg),\n            fontSize: styleUnit(vars.fonts.size.medium),\n        },\n    );\n\n    cssOut(\".DataTable .userCardWrapper .flyouts\", {\n        width: percent(100),\n    });\n\n    cssOut(`.DataTable .DiscussionName .Title`, {\n        width: calc(`100% - ${styleUnit(vars.icon.sizes.default * 2 + vars.gutter.quarter)}`),\n    });\n};\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { absolutePosition, negativeUnit } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { calc, important, percent, translateX } from \"csx\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { forumLayoutVariables } from \"./forumLayoutStyles\";\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { metaContainerStyles, metaItemStyle } from \"@library/styles/metasStyles\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const groupVariables = useThemeCache(() => {\n    const makeThemeVars = variableFactory(\"groups\");\n\n    const banner = makeThemeVars(\"banner\", {\n        height: 200,\n    });\n\n    const logo = makeThemeVars(\"logo\", {\n        height: 140,\n    });\n\n    return {\n        banner,\n        logo,\n    };\n});\n\nexport const groupsCSS = () => {\n    const vars = groupVariables();\n    const globalVars = globalVariables();\n    const layoutVars = forumLayoutVariables();\n    const mediaQueries = layoutVars.mediaQueries();\n\n    cssOut(`.Group-Banner`, {\n        height: styleUnit(vars.banner.height),\n    });\n\n    cssOut(`.groupToolbar`, {\n        marginTop: styleUnit(32),\n    });\n\n    cssOut(\n        `\n        .ButtonGroup.Open .Button.GroupOptionsTitle::before,\n        .Button.GroupOptionsTitle::before,\n        .Button.GroupOptionsTitle:active::before,\n        .Button.GroupOptionsTitle:focus::before\n        `,\n        {\n            color: \"inherit\",\n            marginRight: styleUnit(6),\n        },\n    );\n\n    cssOut(`.Group-Header.NoBanner .Group-Header-Info`, {\n        paddingLeft: styleUnit(0),\n    });\n\n    cssOut(`.Group-Header`, {\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"center\",\n        flexWrap: \"wrap\",\n    });\n\n    cssOut(`a.ChangePicture`, {\n        ...absolutePosition.fullSizeOfParent(),\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        opacity: 0,\n    });\n\n    cssOut(`.DataTableContainer.Group-Box.ApplicantList .PageControls .H`, {\n        position: \"relative\",\n    });\n\n    cssOut(`body.Section-Event .Group-Banner`, {\n        flexGrow: 1,\n        width: percent(100),\n    });\n\n    cssOut(`.PhotoWrap.PhotoWrapLarge.Group-Icon-Big-Wrap`, {\n        width: styleUnit(vars.logo.height),\n        height: styleUnit(vars.logo.height),\n        flexBasis: styleUnit(vars.logo.height),\n        top: styleUnit(vars.banner.height - vars.logo.height / 2),\n        background: \"transparent\",\n        zIndex: 1,\n    });\n\n    cssOut(`.Group-Header.NoBanner .Group-Icon-Big-Wrap`, {\n        position: \"relative\",\n        top: \"auto\",\n        float: \"none\",\n        marginBottom: 0,\n    });\n\n    cssOut(`.Group-Header.NoBanner`, {\n        alignItems: \"center\",\n    });\n\n    cssOut(`.GroupOptions`, {\n        top: calc(`100% + ${styleUnit(globalVars.gutter.size)}`),\n        marginLeft: \"auto\",\n    });\n\n    cssOut(`.GroupWrap .DataTable .Title-Icon`, {\n        color: ColorsUtils.colorOut(globalVars.meta.colors.fg),\n    });\n\n    cssOut(`.Groups .Name.Group-Name .Options .Button`, {\n        minWidth: 0,\n        marginLeft: styleUnit(globalVars.gutter.size),\n    });\n\n    cssOut(`.DataTableContainer.Group-Box`, {\n        marginTop: styleUnit(globalVars.gutter.size * 3),\n    });\n\n    cssOut(\n        `\n        .Group-Box .PageControls\n        `,\n        {\n            position: \"relative\",\n            flexDirection: \"row\",\n        },\n    );\n\n    cssOut(`.Group-Box .PageControls .H`, {\n        margin: 0,\n    });\n\n    cssOut(`.Group-Box.Group-MembersPreview .H`, {\n        position: \"relative\",\n    });\n\n    cssOut(`.GroupWrap .DataTable .Buttons`, {\n        display: \"flex\",\n        flexWrap: \"wrap\",\n        justifyContent: \"flex-end\",\n    });\n\n    cssOut(`.groupsMemberFilter`, {\n        marginTop: styleUnit(100),\n    });\n\n    cssOut(`.Event-Title`, {\n        marginTop: styleUnit(75),\n    });\n\n    cssOut(`body.Groups .Group-Content .Meta`, metaContainerStyles());\n    cssOut(`body.Groups .Group-Content .Meta .MItem`, {\n        ...metaItemStyle(),\n    });\n\n    cssOut(\n        `\n        body.Groups .NavButton.Handle.GroupOptionsTitle .Sprite\n    `,\n        {\n            marginRight: negativeUnit(2),\n            transform: translateX(`5px`),\n        },\n    );\n\n    cssOut(`body.Groups .StructuredForm .Buttons-Confirm`, {\n        textAlign: \"left\",\n    });\n\n    // Group Box\n    cssOut(`.Group-Box .Item:not(tr)`, {\n        width: percent(100),\n    });\n\n    cssOut(`.Group-Box .ItemContent`, {\n        flexGrow: 1,\n    });\n\n    cssOut(`.Groups .DataList .Item > .PhotoWrap`, {\n        ...absolutePosition.topLeft(13, 8),\n        float: \"none\",\n    });\n\n    cssOut(`.Groups .DataList .Item.hasPhotoWrap .ItemContent`, {\n        paddingLeft: styleUnit(58),\n    });\n\n    cssOut(`.Groups .DataList .Item.noPhotoWrap .ItemContent`, {\n        paddingLeft: styleUnit(0),\n        paddingRight: styleUnit(70),\n    });\n\n    cssOut(`.Group-Box .Item .Options .Buttons`, {\n        display: \"flex\",\n        flexWrap: \"nowrap\",\n        alignItems: \"center\",\n    });\n\n    cssOut(`.Group-Box .Item .Options .Buttons a:first-child`, {\n        marginRight: styleUnit(4),\n    });\n\n    cssOut(`.DataList .Item.Event.event .DateTile`, {\n        order: 2,\n    });\n\n    cssOut(`.DataList .Item.Event.event .DateTile + .Options`, {\n        order: 1,\n        ...{\n            [`.ToggleFlyout.OptionsMenu`]: {\n                display: \"flex\",\n                alignItems: \"center\",\n            },\n        },\n    });\n\n    cssOut(\n        `.Group-Box .PageControls .Button-Controls`,\n        mediaQueries.aboveMobile({\n            maxHeight: percent(100),\n            maxWidth: percent(100),\n            margin: \"auto 0\",\n        }),\n    );\n\n    cssOut(`.Group-Box`, {\n        marginBottom: styleUnit(36),\n    });\n\n    cssOut(`.Group-Header-Actions`, {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        width: percent(100),\n        ...Mixins.margin({\n            vertical: styleUnit(globalVars.gutter.size),\n        }),\n    });\n    cssOut(\n        `\n        .Group-Header-Actions .Group-Buttons,\n        .Group-Header-Actions .ButtonGroup,\n    `,\n        {\n            position: \"relative\",\n            top: \"auto\",\n        },\n    );\n\n    cssOut(\n        `.Section-Group .Group-Box .H,\n        .Section-Group .Group-Box .EmptyMessage`,\n        {\n            textAlign: \"left\",\n        },\n        mediaQueries.tabletDown({\n            textAlign: \"left\",\n        }),\n        mediaQueries.mobileDown({\n            marginBottom: styleUnit(6),\n        }),\n    );\n\n    cssOut(`.Section-Group .Group-Title`, {\n        fontSize: globalVars.fonts.size.title,\n    });\n\n    cssOut(`.Section-Group .Group-Box .H`, {\n        fontSize: globalVars.fonts.size.subTitle,\n    });\n\n    cssOut(\n        `\n        .Button-Controls.Button-Controls\n    `,\n        mediaQueries.mobileDown({\n            display: \"block\",\n            ...{\n                [`.Button`]: {\n                    marginRight: \"auto\",\n                },\n            },\n        }),\n    );\n};\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { importantUnit } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { calc, important } from \"csx\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const photoGridVariables = useThemeCache(() => {\n    const makeThemeVars = variableFactory(\"groups\");\n\n    const spacer = makeThemeVars(\"spacer\", {\n        default: 6,\n    });\n\n    return {\n        spacer,\n    };\n});\n\nexport const photoGridCSS = () => {\n    const vars = photoGridVariables();\n\n    cssOut(`.PhotoGrid`, {\n        display: \"flex\",\n        flexWrap: \"wrap\",\n        alignItems: \"center\",\n        ...Mixins.margin({\n            vertical: importantUnit(-vars.spacer.default),\n            left: importantUnit(-vars.spacer.default),\n        }),\n        width: important(calc(`100% + ${styleUnit(vars.spacer.default * 2)}`)),\n    });\n\n    cssOut(`.PhotoGrid .PhotoWrap`, {\n        ...Mixins.margin({\n            all: importantUnit(vars.spacer.default),\n        }),\n    });\n};\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { singleBorder } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { important } from \"csx\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const signaturesCSS = () => {\n    const vars = globalVariables();\n    cssOut(`.Content .MessageList .UserSignature`, {\n        borderTop: singleBorder(),\n        ...Mixins.padding({\n            top: styleUnit(vars.gutter.size * 2),\n            bottom: 0,\n        }),\n        ...Mixins.margin({\n            vertical: 0,\n        }),\n    });\n\n    cssOut(`.Content .MessageList .Signature.UserSignature.userContent  > p`, {\n        ...Mixins.margin({\n            vertical: important(0),\n        }),\n        padding: 0,\n    });\n\n    cssOut(`.Content .UserSignature`, {});\n};\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { defaultTransition, userSelect, negative } from \"@library/styles/styleHelpers\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { trimTrailingCommas } from \"@dashboard/compatibilityStyles/trimTrailingCommas\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { tagVariables, TagType } from \"@library/styles/tagStyles\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { important, percent } from \"csx\";\n\nexport const forumTagCSS = () => {\n    const vars = tagVariables();\n    const tagItemWidth = vars.tagItem.type === TagType.LIST ? \"100%\" : \"auto\";\n    const tagItemListStyle = vars.tagItem.type === TagType.LIST ? Mixins.flex.spaceBetween() : {};\n\n    cssOut(\n        `\n        .TagCloud\n    `,\n        {\n            ...Mixins.margin({\n                vertical: negative(vars.margin.vertical),\n                horizontal: negative(vars.margin.horizontal),\n            }),\n            padding: 0,\n        },\n    );\n\n    cssOut(\".Panel.Panel li.TagCloud-Item.TagCloud-Item\", {\n        padding: 0,\n        width: tagItemWidth,\n        maxWidth: percent(100),\n        ...Mixins.margin(vars.tagItem.margin),\n        \"& a\": {\n            ...tagItemListStyle,\n            ...Mixins.font(vars.tagItem.font),\n            ...Mixins.background(vars.tagItem.background),\n        },\n        \"&  a:hover, a:active, a:focus\": {\n            ...Mixins.font(vars.tagItem.fontState),\n            ...Mixins.background(vars.tagItem.backgroundState),\n        },\n    });\n\n    cssOut(`.AuthorInfo .MItem.RoleTracker a`, {\n        textDecoration: important(\"none\"),\n    });\n\n    mixinTag(`.TagCloud a`);\n    mixinTag(`.Tag`);\n    mixinTag(`.DataTableWrap a.Tag`);\n    mixinTag(`.Container .MessageList .ItemComment .MItem.RoleTracker a.Tag`);\n    mixinTag(\n        `\n        .MessageList .ItemComment .MItem.RoleTracker a.Tag,\n        .MessageList .ItemDiscussion .MItem.RoleTracker a.Tag\n        `,\n    );\n};\n\nfunction mixinTag(selector: string, overwrite?: {}) {\n    selector = trimTrailingCommas(selector);\n    const selectors = selector.split(\",\") || [];\n\n    if (selectors.length === 0) {\n        selectors.push(selector);\n    }\n    const vars = tagVariables();\n    selectors.map((s) => {\n        cssOut(selector, {\n            maxWidth: percent(100),\n            display: \"inline-block\",\n            whiteSpace: \"normal\",\n            textDecoration: important(\"none\"),\n            textOverflow: \"ellipsis\",\n            ...userSelect(),\n            ...Mixins.padding(vars.padding),\n            ...Mixins.border(vars.border),\n            ...Mixins.font(vars.font),\n            ...defaultTransition(\"border\"),\n            ...Mixins.margin(vars.margin),\n            ...vars.nested,\n        });\n    });\n}\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { globalVariables } from \"@vanilla/library/src/scripts/styles/globalStyleVars\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { calc, percent, quote } from \"csx\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { buttonGlobalVariables, buttonVariables } from \"@vanilla/library/src/scripts/forms/Button.variables\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\n\n// To use compatibility styles, set '$staticVariables : true;' in custom.scss\n// $Configuration['Feature']['DeferredLegacyScripts']['Enabled'] = true;\nexport const signInMethodsCSS = useThemeCache(() => {\n    const vars = globalVariables();\n    const buttonVars = buttonVariables();\n    const formElements = formElementsVariables();\n    const buttonGlobals = buttonGlobalVariables();\n    const textOffset = 11;\n\n    cssOut(`.Methods .SocialIcon .Text`, {\n        border: 0,\n        paddingLeft: styleUnit(textOffset),\n        lineHeight: vars.lineHeights.condensed,\n        minWidth: 0,\n        maxWidth: calc(`100% - ${styleUnit(formElements.sizing.height - buttonGlobals.padding.horizontal)}`),\n        float: \"none\",\n        whiteSpace: \"normal\",\n        textAlign: \"left\",\n        minHeight: 0,\n    });\n\n    cssOut(`.SocialIcon.HasText`, {\n        lineHeight: 1,\n        minWidth: 0,\n    });\n\n    cssOut(`.Methods`, {\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"stretch\",\n        alignItems: \"flex-start\",\n        flexWrap: \"wrap\",\n    });\n\n    cssOut(\n        `\n        .Method,\n        .Methods-label`,\n        {\n            display: \"block\",\n            width: percent(100),\n        },\n    );\n\n    cssOut(`.Method a`, {\n        ...{\n            \"&.Button.Primary, &.SocialIcon, &.SocialIcon.HasText\": {\n                display: \"flex\",\n                justifyContent: \"flex-start\",\n                alignItems: \"center\",\n                flexWrap: \"nowrap\",\n                width: styleUnit(210),\n                maxWidth: percent(100),\n                ...Mixins.border({\n                    radius: styleUnit(vars.borderType.formElements.buttons.radius),\n                }),\n            },\n        },\n    });\n\n    // // Low specificity here to not style branded options\n    // cssOut(`.SocialIcon`, {\n    //     color: ColorsUtils.colorOut(vars.mainColors.fg),\n    // });\n\n    const standardSignInMethod = Mixins.clickable.itemState({\n        default: buttonVars.standard.colors ? buttonVars.standard.colors.fg : vars.mainColors.fg,\n    });\n\n    // allStates: {},\n    // hover: {},\n    // focus: {},\n    // keyboardFocus: {},\n    // active: {},\n    // visited: {},\n\n    cssOut(`body.Section-Entry .Methods .SocialIcon`, {\n        ...standardSignInMethod,\n        color: ColorsUtils.colorOut(standardSignInMethod.color as string, {\n            makeImportant: true,\n        }),\n    });\n\n    // SAML\n    cssOut(`body.Section-Entry .Methods .SignInLink.Button.Primary,`, {\n        paddingLeft: styleUnit(formElements.sizing.height + textOffset),\n    });\n\n    // Workaround for important style in core\n    cssOut(\n        `\n        body.Section-Entry .Methods .SignInLink.Button.Primary,\n        body.Section-Entry .Methods .SocialIcon.SocialIcon-Facebook,\n        body.Section-Entry .Methods .SocialIcon.SocialIcon-Twitter,\n        body.Section-Entry .Methods .SocialIcon.SocialIcon-Google,\n        body.Section-Entry .Methods .SocialIcon.SocialIcon-OpenID,\n        body.Section-Entry .Methods .SocialIcon.SocialIcon-LinkedIn,\n        body.Section-Entry .Methods .SocialIcon.SocialIcon-Disqus,\n        body.Section-Entry .Methods .SocialIcon.SocialIcon-GitHub\n        `,\n        {\n            color: ColorsUtils.colorOut(vars.elementaryColors.white, {\n                makeImportant: true,\n            }),\n            whiteSpace: \"normal\",\n            textAlign: \"left\",\n            lineHeight: vars.lineHeights.condensed,\n            display: \"flex\",\n            alignItems: \"center\",\n            overflow: \"hidden\",\n        },\n    );\n\n    cssOut(\n        `\n        body.Section-Entry .Methods .SignInLink.Button.Primary .Icon::after,\n        body.Section-Entry .Methods .SocialIcon.SocialIcon-Facebook .Icon::after,\n        body.Section-Entry .Methods .SocialIcon.SocialIcon-Twitter .Icon::after,\n        body.Section-Entry .Methods .SocialIcon.SocialIcon-Google .Icon::after,\n        body.Section-Entry .Methods .SocialIcon.SocialIcon-OpenID .Icon::after,\n        body.Section-Entry .Methods .SocialIcon.SocialIcon-LinkedIn .Icon::after,\n        body.Section-Entry .Methods .SocialIcon.SocialIcon-Disqus .Icon::after,\n        body.Section-Entry .Methods .SocialIcon.SocialIcon-GitHub .Icon::after`,\n        {\n            backgroundColor: ColorsUtils.colorOut(vars.mainColors.primaryContrast.fade(0.2)),\n        },\n    );\n\n    cssOut(`.Method .SocialIcon .Icon`, {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        minWidth: 0,\n        maxWidth: percent(100),\n        position: \"relative\",\n        float: \"none\",\n    });\n\n    const lineOffset = 6;\n    cssOut(`.Method .Icon::after`, {\n        content: quote(``),\n        position: \"absolute\",\n        top: styleUnit(lineOffset),\n        right: 0,\n        width: styleUnit(vars.border.width),\n        height: calc(`100% - ${styleUnit(lineOffset * 2)}`),\n    });\n\n    cssOut(\n        `\n        .Method .Button.Primary.SignInLink,\n        .Method .SocialIcon\n        `,\n        {\n            paddingTop: styleUnit(4),\n            paddingBottom: styleUnit(4),\n        },\n    );\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { ColorHelper } from \"csx\";\nimport { TLength } from \"@library/styles/styleShim\";\nimport { MarginProperty, MarginTopProperty } from \"csstype\";\n\nexport const forumVariables = useThemeCache((forcedVars?: IThemeVariables) => {\n    const globalVars = globalVariables();\n    const makeThemeVars = variableFactory(\"forum\", forcedVars);\n\n    const modern = makeThemeVars(\"modern\", {});\n    const table = makeThemeVars(\"table\", {});\n\n    const lists = makeThemeVars(\"lists\", {\n        spacing: {\n            padding: {\n                top: 15,\n                right: globalVars.gutter.half,\n                bottom: 16,\n                left: globalVars.gutter.half,\n            },\n            margin: {\n                top: \"initial\" as MarginTopProperty<TLength>,\n                right: \"initial\",\n                bottom: \"initial\",\n                left: \"initial\",\n            },\n        },\n        colors: {\n            margin: undefined as MarginProperty<TLength> | undefined,\n            bg: undefined as ColorHelper | undefined,\n            read: {\n                bg: globalVars.mainColors.bg,\n            },\n        },\n    });\n\n    const discussions = makeThemeVars(\"discussions\", {\n        modern: {\n            ...modern,\n            lists,\n        },\n        table: {\n            ...table,\n        },\n    });\n\n    const discussion = makeThemeVars(\"discussion\", {});\n    const categories = makeThemeVars(\"categories\", {\n        modern: {\n            ...modern,\n        },\n        table: {\n            ...table,\n        },\n        mixed: {},\n    });\n\n    return {\n        modern,\n        table,\n        lists,\n        discussions,\n        discussion,\n        categories,\n    };\n});\n","/**\n * @copyright 2009-2021 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { Variables } from \"@library/styles/Variables\";\nimport { IThemeVariables } from \"@library/theming/themeReducer\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\n\nenum TitleAlignment { // FIXME: The same interface probably exists elsewhere\n    LEFT = \"left\",\n    CENTER = \"center\",\n    RIGHT = \"right\",\n}\n\n/**\n * @varGroup leaderboard\n * @description Variables affecting the leaderdboard module, made available through the Badges plugin.\n * @commonTitle Leaderboard\n */\nexport const leaderboardVariables = useThemeCache((forcedVars?: IThemeVariables) => {\n    const globalVars = globalVariables();\n\n    const makeThemeVars = variableFactory(\"leaderboard\", forcedVars);\n\n    /**\n     * @varGroup leaderboard.colors\n     * @commonTitle Colors\n     */\n    const colors = makeThemeVars(\"colors\", {\n        /**\n         * @var leaderboard.colors.bg\n         * @title Background color\n         * @type string\n         * @format hex-color\n         */\n        bg: globalVars.mainColors.bg,\n    });\n\n    /**\n     * @varGroup leaderboard.box\n     * @commonTitle Box\n     */\n    const box = makeThemeVars(\"box\", {\n        /**\n         * @var leaderboard.box.enabled\n         * @title Enabled\n         * @description Enables a shadowed box around\n         * @type boolean\n         */\n        enabled: false,\n        /**\n         * @var leaderboard.box.borderRadius\n         * @title Border radius\n         * @description Border radius of the box\n         * @type number\n         */\n        borderRadius: globalVars.border.radius,\n    });\n\n    /**\n     * @varGroup leaderboard.title\n     * @commonTitle Title\n     */\n    const title = makeThemeVars(\"title\", {\n        /**\n         * @varGroup leaderboard.title.background\n         * @commonTitle Background\n         * @expand background\n         */\n        background: Variables.background({}),\n        /**\n         * @varGroup leaderboard.title.font\n         * @commonTitle Font\n         * @expand font\n         */\n        font: Variables.font({}),\n        spacing: {\n            /**\n             * @varGroup leaderboard.title.spacing.padding\n             * @commonTitle Padding\n             * @expand spacing\n             */\n            padding: Variables.spacing({}),\n        },\n        /**\n         * @var leaderboard.title.alignment\n         * @title Alignment\n         * @type string\n         * @enum center | left | right\n         */\n        alignment: \"left\" as TitleAlignment,\n    });\n\n    const list = makeThemeVars(\"list\", {\n        spacing: Variables.spacing({}),\n    });\n\n    const listItem = makeThemeVars(\"listItem\", {\n        /**\n         * @varGroup leaderboard.listItem.spacing\n         * @commonTitle List Item Spacing\n         * @expand spacing\n         */\n        spacing: Variables.spacing({\n            horizontal: 0,\n            vertical: 6,\n        }),\n    });\n\n    const profilePhoto = makeThemeVars(\"profilePhoto\", {\n        /**\n         * @var leaderboard.profilePhoto.size\n         * @title Profile photo size\n         * @type number\n         */\n        size: 38,\n    });\n\n    const username = makeThemeVars(\"username\", {\n        /**\n         * @varGroup leaderboard.username.font\n         * @commonTitle Username - Font\n         * @expand font\n         */\n        font: Variables.font({}),\n        /**\n         * @varGroup leaderboard.username.margin\n         * @commonTitle Username - Margin\n         * @expand spacing\n         */\n        margin: Variables.spacing({\n            horizontal: 10,\n        }),\n    });\n\n    const count = makeThemeVars(\"count\", {\n        /**\n         * @varGroup leaderboard.count.font\n         * @commonTitle Count - Font\n         * @expand font\n         */\n        font: Variables.font({}),\n    });\n\n    return {\n        colors,\n        box,\n        title,\n        list,\n        listItem,\n        profilePhoto,\n        username,\n        count,\n    };\n});\n","/**\n * @copyright 2009-2021 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { leaderboardVariables } from \"@dashboard/compatibilityStyles/Leaderboard.variables\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { singleLineEllipsis } from \"@library/styles/styleHelpers\";\nimport { shadowHelper } from \"@library/styles/shadowHelpers\";\nimport { px } from \"csx\";\nimport { CSSObject } from \"@emotion/css\";\n\nexport const leaderboardCSS = () => {\n    const vars = leaderboardVariables();\n\n    const rootStyles = {\n        ...Mixins.background({\n            color: vars.colors.bg,\n        }),\n        ...(vars.box.enabled\n            ? {\n                  borderTopLeftRadius: vars.box.borderRadius,\n                  borderTopRightRadius: vars.box.borderRadius,\n                  ...shadowHelper().embed(),\n                  overflow: \"hidden\",\n              }\n            : {}),\n    };\n\n    const titleStyles = {\n        display: \"flex\",\n        justifyContent: vars.title.alignment,\n        ...Mixins.background(vars.title.background),\n        ...Mixins.font(vars.title.font),\n        ...Mixins.padding(vars.title.spacing.padding),\n    };\n\n    const listStyles = {\n        ...Mixins.margin(vars.list.spacing),\n    };\n\n    const listItemStyles = {\n        ...Mixins.padding(vars.listItem.spacing),\n    };\n\n    const linkStyles = {\n        display: \"flex\",\n        alignItems: \"center\",\n        ...Mixins.font({\n            color: vars.username.font.color,\n        }),\n    };\n\n    const asideStyles = {\n        order: 2,\n        ...Mixins.margin({\n            all: 0,\n            left: \"auto\",\n        }),\n    };\n\n    const countStyles = {\n        ...Mixins.font(vars.count.font),\n    };\n\n    const userStyles: CSSObject = {\n        whiteSpace: \"nowrap\",\n    };\n\n    const usernameStyles = {\n        verticalAlign: \"middle\",\n        display: \"inline-block\",\n        ...singleLineEllipsis(),\n        maxWidth: `calc(100% - ${vars.profilePhoto.size}px - ${vars.username.margin.horizontal}px)`,\n        ...Mixins.margin(vars.username.margin),\n        ...Mixins.font({\n            ...vars.username.font,\n            lineHeight: px(vars.profilePhoto.size),\n        }),\n    };\n\n    const profilePhotoStyles = {\n        verticalAlign: \"middle\",\n        borderRadius: \"50%\",\n        overflow: \"hidden\",\n        width: vars.profilePhoto.size,\n        height: vars.profilePhoto.size,\n    };\n\n    cssOut(\".Leaderboard\", rootStyles, {\n        \"h4.Leaderboard__title\": titleStyles,\n        \".Leaderboard__user-list\": {\n            ...listStyles,\n            \".Leaderboard__user-list__item\": listItemStyles,\n            ...{\n                a: linkStyles,\n                \".Aside\": asideStyles,\n                \".Count\": countStyles,\n                \".Leaderboard-User\": userStyles,\n                \".Leaderboard-User .ProfilePhoto\": profilePhotoStyles,\n                \".Leaderboard-User .Username\": usernameStyles,\n            },\n        },\n    });\n};\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport { IContentBoxes } from \"@library/styles/cssUtilsTypes\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { cssRaw } from \"@library/styles/styleShim\";\n\n/**\n * Mixins for the foundation\n */\nexport class MixinsFoundation {\n    public static contentBoxes(pageBoxes: IContentBoxes, section?: string, contentSelector: string = \".Content\") {\n        function prefixedSelector(selector: string): string {\n            return section ? `.Section-${section} ${selector}` : selector;\n        }\n        cssRaw({\n            [prefixedSelector(`${contentSelector} .pageBox`)]: Mixins.box(pageBoxes.depth1),\n            [prefixedSelector(`${contentSelector} .pageBox .pageBox`)]: Mixins.box(pageBoxes.depth2),\n            [prefixedSelector(`${contentSelector} .pageBox .pageBox .pageBox`)]: Mixins.box(pageBoxes.depth3),\n        });\n    }\n}\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { MixinsFoundation } from \"@library/styles/MixinsFoundation\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { cssRaw } from \"@vanilla/library/src/scripts/styles/styleShim\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\nimport { percent } from \"csx/lib/units\";\nimport { lineHeightAdjustment } from \"@library/styles/textUtils\";\n\nexport const pageBoxCompatStyles = useThemeCache(() => {\n    const globalVars = globalVariables();\n    const mediaQueries = layoutVariables().mediaQueries();\n\n    MixinsFoundation.contentBoxes(globalVars.contentBoxes);\n\n    // Apply heading boxes\n\n    const allHeadings = \"& h1, & h2, & h3, & h4, & h5, & [role='heading']\";\n    cssRaw({\n        \".pageHeadingBox.pageHeadingBox.pageHeadingBox\": {\n            margin: 0,\n            padding: 0,\n            display: \"flex\",\n            alignItems: \"center\",\n            flexWrap: \"wrap\",\n            border: \"none\",\n            justifyContent: \"space-between\",\n            ...Mixins.padding(globalVars.headingBox.spacing),\n            ...mediaQueries.oneColumnDown({\n                ...Mixins.padding(globalVars.headingBox.mobileSpacing),\n            }),\n\n            \"&:first-child\": {\n                paddingTop: 0,\n            },\n\n            \".PageTitle\": {\n                width: percent(100),\n            },\n\n            [allHeadings]: {\n                margin: 0,\n                padding: 0,\n                fontSize: globalVars.fonts.size.largeTitle,\n                ...lineHeightAdjustment(),\n\n                \"& > a\": {\n                    fontSize: \"inherit\",\n                    fontWeight: \"inherit\",\n                    color: \"inherit\",\n                },\n            },\n\n            \"& > p, & > .userContent, & > .P, & > .PageDescription\": {\n                width: \"100%\",\n                ...Mixins.padding(globalVars.headingBox.descriptionSpacing),\n            },\n        },\n        \".pageBox .pageHeadingBox.pageHeadingBox.pageHeadingBox, .pageHeadingBox.isSmall.isSmall.isSmall\": {\n            [allHeadings]: {\n                fontSize: globalVars.fonts.size.title,\n            },\n        },\n        \".pageBox .Empty\": {\n            margin: 0,\n            border: \"none\",\n        },\n        \".pageBox + .PageControls\": {\n            marginTop: 16,\n        },\n    });\n});\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport { BorderType } from \"@library/styles/styleHelpers\";\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { Variables } from \"@library/styles/Variables\";\n\nexport enum ProfilePhotoAlignment {\n    LEFT = \"left\",\n    CENTER = \"center\",\n}\n\n/**\n * @varGroup profile\n * @description Variables affecting the profile and edit profile pages.\n */\nexport const profileVariables = useThemeCache(() => {\n    const makeVars = variableFactory(\"profile\");\n\n    /**\n     * @varGroup profile.contentBoxes\n     * @description Content boxes for the profile page.\n     * @expand contentBoxes\n     */\n    const contentBoxes = makeVars(\n        \"contentBoxes\",\n        Variables.contentBoxes({\n            depth2: {\n                borderType: BorderType.NONE,\n            },\n            depth3: {\n                borderType: BorderType.SEPARATOR,\n            },\n        }),\n    );\n\n    /**\n     * @varGroup profile.badges\n     * @commonTitle Profile Badges\n     */\n    const badges = makeVars(\"badges\", {\n        size: {\n            /**\n             * @var profile.badges.size.width\n             * @title Controls the width of the badge items\n             * @type string | number\n             */\n            width: 100,\n        },\n        /**\n         * @var profile.badges.alignment\n         * @title Controls the alignment of the badge and count items\n         * @type string\n         * @enum left | center\n         */\n        alignment: ProfilePhotoAlignment.LEFT,\n    });\n\n    const photo = makeVars(\"photo\", {\n        /**\n         * @var profile.photo.border.radius\n         * @title Controls the border radius of the photo\n         * @type number\n         */\n        border: {\n            radius: \"50%\",\n        },\n        /**\n         * @var profile.photo.size\n         * @title Controls the size of the photo wrapped inside a wrapper\n         * @type  number\n         */\n        size: 220,\n    });\n\n    return { contentBoxes, badges, photo };\n});\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { absolutePosition, unit, userSelect } from \"@library/styles/styleHelpers\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { important, percent } from \"csx\";\nimport { MixinsFoundation } from \"@library/styles/MixinsFoundation\";\nimport { profileVariables, ProfilePhotoAlignment } from \"@dashboard/compatibilityStyles/pages/Profile.variables\";\nimport { layoutVariables } from \"@library/layout/panelLayoutStyles\";\n\nexport const profileCompatCSS = () => {\n    const globalVars = globalVariables();\n    const vars = profileVariables();\n\n    MixinsFoundation.contentBoxes(vars.contentBoxes, \"Profile\");\n    MixinsFoundation.contentBoxes(vars.contentBoxes, \"ProfileEdit\");\n\n    cssOut(`body.Section-Profile .Gloss, body.Section-Profile .Profile-rank`, {\n        color: ColorsUtils.colorOut(globalVars.mainColors.primary),\n        borderColor: ColorsUtils.colorOut(globalVars.mainColors.primary),\n    });\n\n    cssOut(`body.Section-Profile .About a`, {\n        display: \"inline\",\n        fontSize: globalVars.fonts.size.large,\n    });\n\n    cssOut(`body.Section-Profile .DataCounts`, {\n        width: \"100%\",\n    });\n\n    cssOut(`body.Section-Profile .CountItemWrap, .Content .BadgeGrid a`, {\n        width: `${vars.badges.size.width} !important`,\n    });\n\n    cssOut(`body.Section-Profile .DataCounts, .Content .BadgeGrid .PhotoGrid`, {\n        width: `${percent(100)} !important`,\n        justifyContent:\n            vars.badges.alignment === ProfilePhotoAlignment.LEFT ? \"flex-start !important\" : \"center !important\",\n    });\n\n    cssOut(`body.Section-Profile .Profile dd, dt`, {\n        fontSize: `${unit(globalVars.fonts.size.large)} !important`,\n        lineHeight: `${globalVars.lineHeights.meta * 1.25} !important`,\n    });\n\n    cssOut(\n        `body.Section-Profile .Profile dt`,\n        {\n            width: percent(20),\n        },\n        layoutVariables().mediaQueries().xs({\n            width: \"100%\",\n            display: \"block\",\n            paddingLeft: 0,\n        }),\n    );\n\n    cssOut(\n        `body.Section-Profile .Profile dd`,\n        {\n            width: \"calc(80% - 16px)\",\n            paddingLeft: 16,\n        },\n        layoutVariables().mediaQueries().oneColumnDown({\n            width: \"100%\",\n            display: \"block\",\n            paddingLeft: 0,\n        }),\n    );\n\n    cssOut(`.DataList.Activities a.CommentLink, .DataList.Activities a.CommentLink:hover`, {\n        color: ColorsUtils.colorOut(globalVars.meta.text.color, {\n            makeImportant: true,\n        }),\n    });\n\n    cssOut(`body.Section-Profile .PhotoWrapLarge`, {\n        display: \"block\",\n        width: vars.photo.size,\n        height: vars.photo.size,\n        borderRadius: vars.photo.border.radius,\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n    });\n\n    cssOut(`body.Section-Profile .PhotoWrapLarge img`, {\n        width: percent(100),\n        height: percent(100),\n        objectFit: \"cover\",\n    });\n\n    cssOut(`.PhotoWrap a.ChangePicture .ChangePicture-Text `, {\n        ...absolutePosition.fullSizeOfParent(),\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        background: ColorsUtils.colorOut(globalVars.elementaryColors.black.fade(0.4), {\n            makeImportant: true,\n        }),\n        ...userSelect(),\n    });\n    cssOut(`.PhotoWrap a.ChangePicture:not(:hover) .ChangePicture-Text `, {\n        ...Mixins.absolute.srOnly(),\n    });\n\n    cssOut(`.PhotoWrap a.ChangePicture`, {\n        background: important(\"none\"),\n        textDecoration: \"none\",\n        color: ColorsUtils.colorOut(globalVars.elementaryColors.white),\n        display: important(\"flex\"),\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        opacity: important(1), // for accessibility, we don't want to hide the link from the screen readers\n    });\n\n    cssOut(`body.Section-Profile .Panel .PhotoWrapLarge`, {\n        position: \"relative\",\n        width: vars.photo.size,\n    });\n\n    cssOut(`.PhotoWrap a.ChangePicture .icon`, {\n        display: \"inline-block\",\n        verticalAlign: \"middle\",\n        fontSize: styleUnit(20),\n        color: ColorsUtils.colorOut(globalVars.elementaryColors.white),\n        marginRight: styleUnit(10),\n    });\n};\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { Variables } from \"@library/styles/Variables\";\n\n/**\n * @varGroup discussion\n * @description Variables affecting a discussion page.\n * This is generally a single discussion and the comments responding to it.\n */\nexport const discussionVariables = useThemeCache(() => {\n    const makeVars = variableFactory(\"discussion\");\n\n    /**\n     * @varGroup discussion.contentBoxes\n     * @description Content boxes for the discussion page (or comment list).\n     * @expand contentBoxes\n     */\n    const contentBoxes = makeVars(\"contentBoxes\", Variables.contentBoxes(globalVariables().contentBoxes));\n\n    return { contentBoxes };\n});\n","import { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { userPhotoVariables } from \"@library/headers/mebox/pieces/userPhotoStyles\";\nimport { forumVariables } from \"@library/forms/forumStyleVars\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { absolutePosition } from \"@library/styles/styleHelpersPositioning\";\nimport { importantUnit } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\n\nexport const userCardDiscussionPlacement = () => {\n    const discussionItemPadding = globalVariables().itemList.padding;\n    const userPhotoVars = userPhotoVariables();\n    const formVars = forumVariables();\n\n    const paddingTop: number =\n        parseInt(`${discussionItemPadding.top ?? discussionItemPadding.vertical ?? discussionItemPadding.all}`) ?? 0;\n    const paddingLeft: number =\n        parseInt(`${discussionItemPadding.left ?? discussionItemPadding.horizontal ?? discussionItemPadding.all}`) ?? 0;\n\n    cssOut(`.DataTable.DiscussionsTable .ItemIdea .DiscussionName .Wrap .Meta.Meta-Discussion`, {\n        marginLeft: -globalVariables().gutter.half,\n    });\n\n    cssOut(`.DataTable.DiscussionsTable .ItemIdea .DiscussionName .Wrap .HasNew`, {\n        marginTop: globalVariables().gutter.half,\n        marginRight: globalVariables().gutter.half,\n    });\n\n    cssOut(`.DataTable.DiscussionsTable .ItemIdea .DiscussionName .Wrap`, {\n        paddingLeft: importantUnit(globalVariables().gutter.half),\n    });\n};\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { MixinsFoundation } from \"@library/styles/MixinsFoundation\";\nimport { discussionVariables } from \"@dashboard/compatibilityStyles/pages/Discussion.variables\";\nimport { forumVariables } from \"@library/forms/forumStyleVars\";\nimport { cssOut } from \"@dashboard/compatibilityStyles\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { absolutePosition } from \"@library/styles/styleHelpersPositioning\";\nimport { quote, translate } from \"csx\";\nimport { negativeUnit } from \"@library/styles/styleHelpers\";\nimport { userCardDiscussionPlacement } from \"@dashboard/compatibilityStyles/userCards\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const discussionCompatCSS = () => {\n    const vars = discussionVariables();\n    const globalVars = globalVariables();\n    const formVars = forumVariables();\n    const userPhotoVars = formVars.userPhoto;\n\n    MixinsFoundation.contentBoxes(vars.contentBoxes, \"Discussion\");\n\n    cssOut(\n        `\n        .userContent,\n        .UserContent,\n        .MessageList.Discussion\n        `,\n        {\n            color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n            fontSize: styleUnit(globalVars.fonts.size.medium),\n        },\n    );\n\n    cssOut(\n        `\n        .userContent.userContent h1,\n        .userContent.userContent h2,\n        .userContent.userContent h3,\n        .userContent.userContent h4,\n        .userContent.userContent h5,\n        .userContent.userContent h6\n    `,\n        {\n            color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n        },\n    );\n\n    // Polls\n\n    cssOut(\n        `\n        .Item .Poll .PollOptions .PollColor,\n        .Item .Poll .PollOptions .PollColor.PollColor1,\n        .Item .Poll .PollOptions .PollColor.PollColor2,\n        .Item .Poll .PollOptions .PollColor.PollColor3,\n        .Item .Poll .PollOptions .PollColor.PollColor4,\n        .Item .Poll .PollOptions .PollColor.PollColor5,\n        .Item .Poll .PollOptions .PollColor.PollColor6,\n        .Item .Poll .PollOptions .PollColor.PollColor7,\n        .Item .Poll .PollOptions .PollColor.PollColor8,\n        .Item .Poll .PollOptions .PollColor.PollColor9,\n        .Item .Poll .PollOptions .PollColor.PollColor10,\n    `,\n        {\n            color: ColorsUtils.colorOut(globalVars.mainColors.primaryContrast),\n            backgroundColor: ColorsUtils.colorOut(globalVars.mixPrimaryAndBg(globalVars.constants.stateColorEmphasis), {\n                makeImportant: true,\n            }),\n            opacity: 1,\n        },\n    );\n\n    cssOut(\n        \".Meta.Meta-Discussion\",\n\n        {\n            display: globalVars.meta.display,\n        },\n    );\n\n    cssOut(`.Container .DataTable span.MItem`, {\n        display: \"inline-block\",\n    });\n\n    cssOut(`.Container .DataTable span.MItem a`, {\n        display: \"inline\",\n    });\n\n    cssOut(`.MessageList .ItemDiscussion .InlineTags`, {\n        margin: 0,\n        padding: 0,\n    });\n\n    cssOut(\n        `\n        .Options a.Bookmark,\n        .Options a.Bookmarking,\n        .Options a.Bookmarked\n        `,\n        {\n            opacity: 1,\n            width: styleUnit(24),\n            height: styleUnit(24),\n            display: \"block\",\n            position: \"relative\",\n        },\n    );\n\n    cssOut(\n        `\n        .Content a.Bookmark,\n        .Content a.Bookmarking,\n        .Content a.Bookmarked`,\n        {\n            cursor: \"pointer\",\n        },\n    );\n\n    cssOut(\n        `\n        .Content a.Bookmark .svgBookmark,\n        .Content a.Bookmarking .svgBookmark,\n        .Content a.Bookmarked .svgBookmark`,\n        {\n            ...absolutePosition.topLeft(\"50%\", \"50%\"),\n            content: quote(``),\n            display: \"block\",\n            width: styleUnit(12),\n            height: styleUnit(16),\n            fontSize: styleUnit(12),\n            transform: translate(`-50%`, `-50%`),\n        },\n    );\n\n    cssOut(\n        `\n        body.Discussions .DataList .Options,\n        body.Discussions .MessageList .Options\n    `,\n        {\n            marginTop: negativeUnit(2),\n        },\n    );\n\n    userCardDiscussionPlacement();\n\n    cssOut(\".Discussion\", {\n        width: \"100%\",\n    });\n\n    cssOut(`.MessageList .Item-Header.Item-Header`, {\n        ...Mixins.padding({\n            all: 0,\n        }),\n        display: \"flex\",\n\n        \"& .Item-HeaderContent\": {\n            flex: 1,\n        },\n\n        \"& .PhotoWrap\": {\n            marginRight: 12,\n        },\n\n        \"& .AuthorWrap, & .DiscussionMeta\": {\n            paddingLeft: 0,\n        },\n    });\n};\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { Variables } from \"@library/styles/Variables\";\n\n/**\n * @varGroup discussionList\n * @description Variables affecting lists of discussions. Notably this is normally what you see when viewing a category.\n */\nexport const discussionListVariables = useThemeCache(() => {\n    const makeVars = variableFactory(\"discussionList\");\n\n    /**\n     * @varGroup discussionList.contentBoxes\n     * @description Content boxes for the discussion list page.\n     * @expand contentBoxes\n     */\n    const contentBoxes = makeVars(\"contentBoxes\", Variables.contentBoxes(globalVariables().contentBoxes));\n\n    /**\n     * @varGroup discussionList.item\n     * @description A single discussion item.\n     */\n    const item = makeVars(\"item\", {\n        /**\n         * @varGroup discussionList.item.title\n         * @description The title of a single discussion item.\n         */\n        title: {\n            /**\n             * @varGroup discussionList.item.title.font\n             * @description Font variables for the default state of the title.\n             */\n            font: Variables.font({}),\n            /**\n             * @varGroup discussionList.item.title.font\n             * @description Font variables for the \"read\" state of the title. (When the discussion has already been read).\n             */\n            fontRead: Variables.font({}),\n            /**\n             * @varGroup discussionList.item.title.font\n             * @description Font variables title when it is being interacted with. (hover, active, focus).\n             */\n            fontState: Variables.font({}),\n        },\n    });\n\n    return { contentBoxes, item };\n});\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2021 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { MixinsFoundation } from \"@library/styles/MixinsFoundation\";\nimport { discussionListVariables } from \"@dashboard/compatibilityStyles/pages/DiscussionList.variables\";\nimport { cssOut } from \"@dashboard/compatibilityStyles\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const discussionListCompatCSS = () => {\n    const globalVars = globalVariables();\n    const vars = discussionListVariables();\n\n    MixinsFoundation.contentBoxes(vars.contentBoxes, \"DiscussionList\");\n\n    cssOut(\"li.ItemDiscussion.ItemDiscussion\", {\n        display: \"flex\",\n        flexWrap: \"wrap\",\n\n        \"& .ItemContent\": {\n            flex: 1,\n        },\n\n        \"& .Title\": {\n            marginTop: -4,\n            display: \"inline-block\",\n        },\n\n        \"& .Excerpt\": {\n            marginTop: 0,\n        },\n    });\n\n    cssOut(\".ItemDiscussion.ItemDiscussion\", {\n        \"& > .ProfilePhoto, & > .userCardWrapper-photo, & > .idea-counter-module\": {\n            marginRight: 16,\n        },\n\n        \"& .AdminCheck\": {\n            height: \"100%\",\n            marginTop: 6,\n        },\n\n        \"& .Title a\": {\n            ...Mixins.font(vars.item.title.font),\n        },\n\n        \"&.Read .Title a\": {\n            ...Mixins.font(vars.item.title.fontRead),\n        },\n\n        \"& .Title a:hover, & .Title a:active, & .Title a:focus\": {\n            ...Mixins.font(vars.item.title.fontState),\n        },\n    });\n};\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { globalVariables } from \"@vanilla/library/src/scripts/styles/globalStyleVars\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { fullBackgroundCompat } from \"@library/layout/Backgrounds\";\nimport { importantUnit, negative, singleBorder } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { Mixins } from \"@library/styles/Mixins\";\nimport { calc, ColorHelper, important } from \"csx\";\nimport { inputVariables } from \"@vanilla/library/src/scripts/forms/inputStyles\";\nimport { siteNavNodeClasses } from \"@vanilla/library/src/scripts/navigation/siteNavStyles\";\nimport { socialConnectCSS } from \"@dashboard/compatibilityStyles/socialConnectStyles\";\nimport { reactionsCSS } from \"@dashboard/compatibilityStyles/reactionsStyles\";\nimport { buttonCSS } from \"@dashboard/compatibilityStyles/buttonStylesCompat\";\nimport { inputCSS } from \"@dashboard/compatibilityStyles/inputStyles\";\nimport { flyoutCSS } from \"@dashboard/compatibilityStyles/flyoutStyles\";\nimport { textLinkCSS } from \"@dashboard/compatibilityStyles/textLinkStyles\";\nimport { forumMetaCSS } from \"@dashboard/compatibilityStyles/forumMetaStyles\";\nimport { paginationCSS } from \"@dashboard/compatibilityStyles/paginationStyles\";\nimport { fontCSS, forumFontsVariables } from \"./fontStyles\";\nimport { forumLayoutCSS, forumLayoutVariables } from \"@dashboard/compatibilityStyles/forumLayoutStyles\";\nimport { categoriesCSS } from \"@dashboard/compatibilityStyles/categoriesStyles\";\nimport { bestOfCSS } from \"@dashboard/compatibilityStyles/bestOfStyles\";\nimport { ideaCSS } from \"@dashboard/compatibilityStyles/ideaStyles\";\nimport { tableCSS } from \"@dashboard/compatibilityStyles/tableStyles\";\nimport { searchPageCSS } from \"./searchPageStyles\";\nimport { groupsCSS } from \"@dashboard/compatibilityStyles/groupsStyles\";\nimport { photoGridCSS } from \"@dashboard/compatibilityStyles/photoGridStyles\";\nimport { messagesCSS } from \"@dashboard/compatibilityStyles/messagesStyles\";\nimport { blockColumnCSS } from \"@dashboard/compatibilityStyles/blockColumnStyles\";\nimport { signaturesCSS } from \"./signaturesSyles\";\nimport { searchResultsVariables } from \"@vanilla/library/src/scripts/features/search/searchResultsStyles\";\nimport { forumTagCSS } from \"@dashboard/compatibilityStyles/forumTagStyles\";\nimport { signInMethodsCSS } from \"@dashboard/compatibilityStyles/signInMethodStyles\";\nimport { suggestedTextStyleHelper } from \"@library/features/search/suggestedTextStyles\";\nimport { dropDownVariables } from \"@vanilla/library/src/scripts/flyouts/dropDownStyles\";\nimport { forumVariables } from \"@library/forums/forumStyleVars\";\nimport { userCardClasses } from \"@library/features/users/ui/popupUserCardStyles\";\nimport { userPhotoVariables } from \"@library/headers/mebox/pieces/userPhotoStyles\";\nimport { leaderboardCSS } from \"@dashboard/compatibilityStyles/Leaderboard.styles\";\nimport { cssOut } from \"./cssOut\";\nimport { pageBoxCompatStyles } from \"@dashboard/compatibilityStyles/PageBox.compat.styles\";\nimport { profileCompatCSS } from \"@dashboard/compatibilityStyles/pages/Profile.compat.styles\";\nimport { discussionCompatCSS } from \"@dashboard/compatibilityStyles/pages/Discussion.compat.styles\";\nimport { discussionListCompatCSS } from \"@dashboard/compatibilityStyles/pages/DiscussionList.compat.styles\";\nimport { categoryListCompatCSS } from \"@dashboard/compatibilityStyles/pages/CategoryList.compat.styles\";\nimport { conversationListCompatCSS } from \"@dashboard/compatibilityStyles/pages/ConversationList.compat.styles\";\nimport { conversationCompatCSS } from \"@dashboard/compatibilityStyles/pages/Conversation.compat.styles\";\nexport { cssOut };\n\n// Re-export for compatibility.\nexport { trimTrailingCommas } from \"./trimTrailingCommas\";\n\n// To use compatibility styles, set '$staticVariables : true;' in custom.scss\n// $Configuration['Feature']['DeferredLegacyScripts']['Enabled'] = true;\nexport let compatibilityStyles: () => void;\ncompatibilityStyles = useThemeCache(() => {\n    const vars = globalVariables();\n    const formVars = forumVariables();\n    const layoutVars = forumLayoutVariables();\n    const mainColors = vars.mainColors;\n    const fg = ColorsUtils.colorOut(mainColors.fg);\n    const bg = ColorsUtils.colorOut(mainColors.bg);\n    const primary = ColorsUtils.colorOut(mainColors.primary);\n    const userPhotoVars = userPhotoVariables();\n\n    fullBackgroundCompat();\n\n    cssOut(\"body\", {\n        backgroundColor: bg,\n        color: fg,\n    });\n\n    cssOut(\".Frame\", {\n        background: \"none\",\n    });\n\n    // @mixin font-style-base()\n    cssOut(\"html, body, .DismissMessage\", {\n        ...Mixins.font({\n            family: vars.fonts.families.body,\n            color: mainColors.fg,\n        }),\n    });\n\n    cssOut(\n        \".DismissMessage, .DataList .Excerpt, .DataList .CategoryDescription, .MessageList .Excerpt, .MessageList .CategoryDescription\",\n        {\n            color: fg,\n        },\n    );\n\n    cssOut(`.DataTable .Item td, .Item .Poll .PollOption`, {\n        color: fg,\n    });\n\n    cssOut(\".ReactButton.PopupWindow&:hover .Sprite::before\", {\n        color: primary,\n    });\n\n    cssOut(\".Box h4\", { color: fg });\n\n    const panelSelectors = `\n        .About a,\n        .Panel.Panel-main .PanelInfo a.ItemLink,\n        `;\n\n    // Panel\n    cssOut(panelSelectors, {\n        ...siteNavNodeClasses().linkMixin(true, panelSelectors),\n        minHeight: 0,\n        display: \"flex\",\n        opacity: 1,\n    });\n\n    cssOut(\".Panel .ClearFix::after\", {\n        display: important(\"none\"),\n    });\n\n    cssOut(\"a\", {\n        cursor: \"pointer\",\n    });\n\n    cssOut(\n        `\n        #Panel.Panel-main .FilterMenu .Aside,\n        .Panel.Panel-main .PanelInfo .Aside,\n        .Item .Aside\n        `,\n        {\n            ...Mixins.margin({\n                all: 0,\n                left: \"auto\",\n            }),\n            ...Mixins.padding({\n                all: 0,\n                left: styleUnit(12),\n            }),\n        },\n    );\n\n    cssOut(\n        `\n        a.Title,\n        .Title a,\n        .DataList .Item .Title,\n        .DataList .Item.Read .Title,\n        .DataList .Item h3,\n        .MessageList .Item .Title,\n        .MessageList .Item.Read .Title,\n        .MessageList .Item h3\n        .MenuItems a\n        `,\n        {\n            color: fg,\n            fontSize: styleUnit(vars.fonts.size.large),\n        },\n    );\n\n    cssOut(\n        `\n            .MessageList .Item:not(.Read) .Title,\n            .DataList .Item:not(.Read) .Title,\n            .DataTable .Item:not(.Read) .Title\n    `,\n        {\n            fontWeight: vars.fonts.weights.bold,\n        },\n    );\n\n    cssOut(\n        `\n            .MessageList .Item.Read .Title,\n            .DataList .Item.Read .Title,\n            .DataTable .Item.Read .Title\n    `,\n        {\n            fontWeight: vars.fonts.weights.normal,\n        },\n    );\n\n    cssOut(\n        `\n        .Herobanner .SearchBox .AdvancedSearch .BigInput,\n        .Herobanner .SearchBox #Form_Search\n    `,\n        {\n            borderRight: 0,\n            backgroundColor: bg,\n            color: fg,\n            ...Mixins.border(inputVariables().border),\n            borderTopRightRadius: 0,\n            borderBottomRightRadius: 0,\n        },\n    );\n\n    cssOut(`div.Popup .Body`, {\n        // borderRadius: unit(vars.border.radius),\n        ...Mixins.border(vars.borderType.modals),\n        backgroundColor: bg,\n        color: fg,\n    });\n\n    // Items\n    const resultVars = searchResultsVariables();\n\n    cssOut(\n        `\n        .DataList .Item,\n        .DataList .Empty,\n    `,\n        {\n            borderTop: singleBorder(),\n            borderBottom: singleBorder(),\n            ...Mixins.padding(resultVars.spacing.padding),\n            ...Mixins.margin(formVars.lists.spacing.margin),\n            backgroundColor: ColorsUtils.colorOut(formVars.lists.colors.bg),\n        },\n    );\n\n    cssOut(`.DataList .Item + .Item`, {\n        borderTop: \"none\",\n    });\n\n    cssOut(`.DataList .Item ~ .CategoryHeading::before, .MessageList .Item ~ .CategoryHeading::before`, {\n        marginTop: styleUnit(vars.gutter.size * 2.5),\n        border: \"none\",\n    });\n\n    cssOut(`div.Popup p`, {\n        paddingLeft: 0,\n        paddingRight: 0,\n    });\n\n    cssOut(`.Herobanner-bgImage`, {\n        WebkitFilter: \"none\",\n        filter: \"none\",\n    });\n\n    cssOut(\".Herobanner .SearchBox .AdvancedSearch .BigInput\", {\n        borderTopRightRadius: important(0),\n        borderBottomRightRadius: important(0),\n    });\n\n    cssOut(\n        `\n        a:hover,\n        a.TextColor:hover,\n        a:hover .TextColor`,\n        {\n            color: ColorsUtils.colorOut(vars.links.colors.hover),\n        },\n    );\n\n    cssOut(\n        `\n        a.TextColor, a .TextColor`,\n\n        {\n            color: ColorsUtils.colorOut(vars.mainColors.fg),\n        },\n    );\n\n    cssOut(\".ButtonGroup .Dropdown\", {\n        marginTop: styleUnit(negative(vars.border.width)),\n    });\n\n    cssOut(`.QuickSearchButton`, {\n        color: fg,\n        ...Mixins.border(vars.borderType.formElements.buttons),\n    });\n\n    cssOut(`.Frame-contentWrap`, {\n        marginTop: styleUnit(layoutVars.main.topSpacing - vars.gutter.size),\n    });\n\n    cssOut(`.Content .PageControls`, {\n        marginBottom: styleUnit(24),\n    });\n\n    cssOut(`.DataList .Item:last-child, .MessageList .Item:last-child`, {\n        borderTopColor: ColorsUtils.colorOut(vars.border.color),\n    });\n\n    cssOut(`.Author a:not(.PhotoWrap), .Author .${userCardClasses().link}`, {\n        fontWeight: vars.fonts.weights.bold,\n    });\n\n    cssOut(`.DataList.Discussions .Item .Title`, {\n        width: calc(`100% - ${styleUnit(vars.icon.sizes.default * 2 + vars.gutter.quarter)}`),\n    });\n\n    cssOut(`.DataList.Discussions .Item .Title a`, {\n        textDecoration: \"none\",\n    });\n\n    cssOut(`.DataList.Discussions .Item .Options`, {\n        position: \"absolute\",\n        right: styleUnit(layoutVars.cell.paddings.horizontal),\n        top: styleUnit(layoutVars.cell.paddings.vertical),\n    });\n\n    cssOut(`.Container .DataList .Meta .Tag-Announcement`, {\n        opacity: 1,\n    });\n\n    cssOut(\".Panel > * + *\", {\n        marginTop: styleUnit(24),\n    });\n\n    cssOut(`.Panel > .PhotoWrapLarge`, {\n        padding: 0,\n    });\n\n    cssOut(\".Panel li a\", {\n        minHeight: 0,\n    });\n\n    cssOut(\".Panel .Box li + li\", {\n        paddingTop: forumFontsVariables().panelLink.spacer.default,\n    });\n\n    cssOut(`#ConversationForm label`, {\n        color: ColorsUtils.colorOut(vars.mainColors.fg),\n    });\n\n    cssOut(`.Group-Box.Group-MembersPreview .PageControls .H`, {\n        position: \"relative\",\n    });\n\n    cssOut(`#Panel .FilterMenu .Aside, .PanelInfo .Aside, .Item .Aside`, {\n        float: \"none\",\n        display: \"block\",\n        margin: `0 0 14px`,\n    });\n\n    cssOut(`.HasNew`, {\n        backgroundColor: ColorsUtils.colorOut(vars.mainColors.primaryContrast),\n        color: ColorsUtils.colorOut(vars.mainColors.primary),\n        ...Mixins.border({\n            radius: 2,\n            color: vars.mainColors.primary,\n        }),\n        ...Mixins.padding({\n            vertical: 3,\n            horizontal: 6,\n        }),\n    });\n\n    cssOut(`.Item.Read`, {\n        backgroundColor: ColorsUtils.colorOut(formVars.lists.colors.read.bg),\n        opacity: 1,\n        ...{\n            \"&:hover, &:focus, &:active, &.focus-visible\": {\n                backgroundColor: ColorsUtils.colorOut(formVars.lists.colors.read.bg),\n                opacity: 1,\n            },\n        },\n    });\n\n    cssOut(\".Bullet, .QuickSearch\", {\n        display: \"none\",\n    });\n\n    cssOut(\".suggestedTextInput-option\", suggestedTextStyleHelper().option);\n\n    cssOut(`.DataList .Item .Options .OptionsMenu`, {\n        order: 10, // we want it last\n    });\n\n    cssOut(`.Breadcrumbs`, {\n        ...Mixins.padding({\n            vertical: vars.gutter.half,\n        }),\n    });\n\n    cssOut(\".selectBox-item .selectBox-selectedIcon\", {\n        color: ColorsUtils.colorOut(dropDownVariables().item.colors.fg),\n    });\n\n    cssOut(`.HomepageTitle, .pageNotFoundTitle`, {\n        ...Mixins.font({\n            size: vars.fonts.size.largeTitle,\n            weight: vars.fonts.weights.bold,\n        }),\n    });\n\n    cssOut(`.DataList .PhotoWrap, .MessageList .PhotoWrap`, {\n        width: styleUnit(userPhotoVars.sizing.medium),\n        height: styleUnit(userPhotoVars.sizing.medium),\n    });\n\n    cssOut(`.LocaleOptions`, {\n        textAlign: \"center\",\n    });\n\n    pageBoxCompatStyles();\n    blockColumnCSS();\n    buttonCSS();\n    flyoutCSS();\n    textLinkCSS();\n    forumTagCSS();\n    forumMetaCSS();\n    inputCSS();\n    socialConnectCSS();\n    reactionsCSS();\n    paginationCSS();\n    forumLayoutCSS();\n    fontCSS();\n    categoriesCSS();\n    bestOfCSS();\n    ideaCSS();\n    tableCSS();\n    searchPageCSS();\n    groupsCSS();\n    profileCompatCSS();\n    discussionCompatCSS();\n    discussionListCompatCSS();\n    categoryListCompatCSS();\n    conversationListCompatCSS();\n    conversationCompatCSS();\n    photoGridCSS();\n    messagesCSS();\n    signaturesCSS();\n    signInMethodsCSS();\n    leaderboardCSS();\n});\n\nexport const mixinCloseButton = (selector: string) => {\n    const vars = globalVariables();\n    cssOut(selector, {\n        color: ColorsUtils.colorOut(vars.mainColors.fg),\n        background: \"none\",\n        ...{\n            \"&:hover\": {\n                color: ColorsUtils.colorOut(vars.mainColors.primary),\n            },\n            \"&:focus\": {\n                color: ColorsUtils.colorOut(vars.mainColors.primary),\n            },\n            \"&.focus-visible\": {\n                color: ColorsUtils.colorOut(vars.mainColors.primary),\n            },\n        },\n    });\n};\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { Variables } from \"@library/styles/Variables\";\n\n/**\n * @varGroup categoryList\n * @description Variables affecting lists of categories. These can appear on /categories or inside of nested type categories.\n */\nexport const categoryListVariables = useThemeCache(() => {\n    const makeVars = variableFactory(\"categoryList\");\n\n    /**\n     * @varGroup categoryList.contentBoxes\n     * @description Content boxes for the category list page.\n     * @expand contentBoxes\n     */\n    const contentBoxes = makeVars(\"contentBoxes\", Variables.contentBoxes(globalVariables().contentBoxes));\n\n    return { contentBoxes };\n});\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { Variables } from \"@library/styles/Variables\";\n\n/**\n * @varGroup conversationList\n * @description Variables affecting lists of conversations. This is often referred to as the Inbox.\n */\nexport const conversationListVariables = useThemeCache(() => {\n    const makeVars = variableFactory(\"conversationList\");\n\n    /**\n     * @varGroup conversationList.contentBoxes\n     * @description Content boxes for the conversations list page (or inbox).\n     * @expand contentBoxes\n     */\n    const contentBoxes = makeVars(\"contentBoxes\", Variables.contentBoxes(globalVariables().contentBoxes));\n\n    return { contentBoxes };\n});\n","/**\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2020 Vanilla Forums Inc.\n * @license gpl-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { variableFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { Variables } from \"@library/styles/Variables\";\n\n/**\n * @varGroup conversation\n * @description Variables affecting a single convesation made up of messages between 2 users.\n */\nexport const conversationVariables = useThemeCache(() => {\n    const makeVars = variableFactory(\"conversation\");\n\n    /**\n     * @varGroup conversation.contentBoxes\n     * @description Content boxes for the conversation page (or messages page).\n     * @expand contentBoxes\n     */\n    const contentBoxes = makeVars(\"contentBoxes\", Variables.contentBoxes(globalVariables().contentBoxes));\n\n    return { contentBoxes };\n});\n","/**\n * BlockColumn compatibility styles.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { forumVariables } from \"@library/forms/forumStyleVars\";\nimport { absolutePosition } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { calc, percent } from \"csx\";\nimport { forumLayoutVariables } from \"@dashboard/compatibilityStyles/forumLayoutStyles\";\n\nexport function blockColumnCSS() {\n    const globalVars = globalVariables();\n    const forumVars = forumVariables();\n    const layoutVars = forumLayoutVariables();\n    const userPhotoSizing = forumVars.userPhoto.sizing;\n\n    // Reworked placement of BlockColumn, because they were misaligned and also causing false positives on the accessibility tests.\n    cssOut(`.BlockColumn .Block.Wrap`, {\n        display: \"flex\",\n        flexWrap: \"wrap\",\n        flexDirection: \"column\",\n        justifyContent: \"space-between\",\n        minHeight: styleUnit(userPhotoSizing.medium),\n    });\n}\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { media } from \"@library/styles/styleShim\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\n\nexport const socialConnectCSS = () => {\n    cssOut(`.DataList-Connections .Connection-Header`, {\n        alignItems: \"flex-end\",\n    });\n\n    cssOut(`.DataList-Connections .Gloss`, {\n        minHeight: \"42px\",\n        marginTop: styleUnit(5),\n        minWidth: styleUnit(200),\n    });\n\n    cssOut(`.ActivateSlider`, {\n        minWidth: styleUnit(200),\n        marginLeft: styleUnit(16),\n    });\n\n    const breakPointConnections = 768;\n\n    cssOut(\n        `.DataList-Connections .Connection-Header`,\n        media(\n            { maxWidth: breakPointConnections },\n            {\n                flexDirection: \"column\",\n                alignItems: \"center\",\n            },\n        ),\n    );\n    cssOut(\n        `.Connection-Name`,\n        { minHeight: styleUnit(42) },\n        media(\n            { maxWidth: breakPointConnections },\n            {\n                justifyContent: \"center\",\n            },\n        ),\n    );\n    cssOut(\n        `.DataList-Connections .IconWrap`,\n        media(\n            { maxWidth: breakPointConnections },\n            {\n                marginRight: 0,\n            },\n        ),\n    );\n    cssOut(\n        `.ActivateSlider`,\n        media(\n            { maxWidth: breakPointConnections },\n            {\n                minWidth: styleUnit(200),\n                marginLeft: 0,\n            },\n        ),\n    );\n};\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { extendItemContainer, userSelect } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { mixinClickInput } from \"@dashboard/compatibilityStyles/clickableItemHelpers\";\nimport { important } from \"csx\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const paginationCSS = () => {\n    const globalVars = globalVariables();\n    const mainColors = globalVars.mainColors;\n    const primary = ColorsUtils.colorOut(mainColors.primary);\n\n    mixinClickInput(\n        `\n        .Pager > span,\n        .Pager > a,\n    `,\n        {},\n        {\n            default: {\n                ...userSelect(),\n            },\n            allStates: {\n                ...userSelect(),\n                backgroundColor: ColorsUtils.colorOut(mainColors.fg.fade(0.05)),\n            },\n        },\n    );\n\n    mixinClickInput(\n        `\n        .Pager > a.Highlight\n    `,\n        {\n            default: primary,\n            allStates: primary,\n        },\n        {\n            default: {\n                backgroundColor: ColorsUtils.colorOut(globalVars.mixBgAndFg(0.1)),\n                cursor: \"pointer\",\n                ...userSelect(),\n            },\n            allStates: {\n                backgroundColor: ColorsUtils.colorOut(globalVars.mixBgAndFg(0.1)),\n                ...userSelect(),\n            },\n        },\n    );\n\n    cssOut(`.Pager .Next`, {\n        borderTopRightRadius: globalVars.border.radius,\n        borderBottomRightRadius: globalVars.border.radius,\n    });\n\n    cssOut(`.Pager .Previous`, {\n        borderBottomLeftRadius: globalVars.border.radius,\n        borderTopLeftRadius: globalVars.border.radius,\n    });\n\n    cssOut(`.Pager span`, {\n        cursor: important(\"default\"),\n        backgroundColor: ColorsUtils.colorOut(mainColors.bg, {\n            makeImportant: true,\n        }),\n        color: ColorsUtils.colorOut(globalVars.links.colors.default, {\n            makeImportant: true,\n        }),\n        opacity: 0.5,\n    });\n\n    cssOut(`.Content .PageControls`, {\n        display: \"flex\",\n        alignItems: \"center\",\n        flexWrap: \"wrap\",\n        justifyContent: \"space-between\",\n        marginBottom: styleUnit(16),\n    });\n\n    cssOut(\".Pager ~ .PageControls-filters\", {\n        marginTop: 16,\n        width: \"100%\",\n    });\n\n    cssOut(`.MorePager`, {\n        textAlign: \"right\",\n        ...{\n            \"& a\": {\n                color: ColorsUtils.colorOut(mainColors.primary),\n            },\n        },\n    });\n\n    cssOut(`.PageControls-filters.PageControls-filters`, {\n        flex: \"auto\",\n        width: \"100%\",\n        display: \"inline-flex\",\n        alignItems: \"baseline\",\n\n        ...extendItemContainer(8),\n        \"& > *\": {\n            ...Mixins.margin({\n                horizontal: 8,\n            }),\n        },\n    });\n\n    cssOut(`.PageControls.PageControls .selectBox`, {\n        height: \"auto\",\n    });\n\n    cssOut(`.Pager.NumberedPager > a.Highlight`, {\n        color: ColorsUtils.colorOut(ColorsUtils.isLightColor(mainColors.fg) ? mainColors.fg.fade(0.85) : mainColors.fg),\n        pointerEvents: \"none\",\n        backgroundColor: ColorsUtils.colorOut(\n            ColorsUtils.modifyColorBasedOnLightness({\n                color: mainColors.bg,\n                weight: 0.05,\n            }),\n        ),\n    });\n};\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\n\nexport const bestOfCSS = () => {\n    const globalVars = globalVariables();\n\n    cssOut(`body.Section-BestOf .Container .FilterMenu li.Active a`, {\n        color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n        borderColor: ColorsUtils.colorOut(globalVars.mainColors.fg),\n    });\n\n    cssOut(`body.Section-BestOf .Tile`, {\n        backgroundColor: ColorsUtils.colorOut(globalVars.mainColors.bg),\n        color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n    });\n\n    cssOut(`body.Section-BestOf .Tile .Title, body.Section-BestOf .Tile .Title a`, {\n        color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n    });\n\n    cssOut(`body.Section-BestOf .Tile .Message`, {\n        overflow: \"auto\",\n    });\n\n    cssOut(\n        `\n    body.Section-BestOf .Tile .Author a,\n    body.Section-BestOf .Item .Author a\n    `,\n        {\n            color: ColorsUtils.colorOut(globalVars.links.colors.default),\n            fontSize: styleUnit(globalVars.meta.text.size),\n        },\n    );\n\n    cssOut(\n        `\n    body.Section-BestOf .Tile .Author a:hover,\n    body.Section-BestOf .Item .Author a:hover,\n    `,\n        {\n            color: ColorsUtils.colorOut(globalVars.links.colors.hover),\n        },\n    );\n\n    cssOut(\n        `\n    body.Section-BestOf .Tile .Author a:focus,\n    body.Section-BestOf .Item .Author a:focus,\n    `,\n        {\n            color: ColorsUtils.colorOut(globalVars.links.colors.focus),\n        },\n    );\n\n    cssOut(\n        `\n    body.Section-BestOf .Tile .Author a:active,\n    body.Section-BestOf .Item .Author a:active\n    `,\n        {\n            color: ColorsUtils.colorOut(globalVars.links.colors.active),\n        },\n    );\n};\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { forumVariables } from \"@library/forms/forumStyleVars\";\n\nexport const ideaCSS = () => {\n    const globalVars = globalVariables();\n    const forumVars = forumVariables();\n\n    cssOut(\n        `\n        .idea-counter-module .idea-counter-box\n        `,\n        {\n            backgroundColor: ColorsUtils.colorOut(globalVars.mixBgAndFg(0.1)),\n        },\n    );\n\n    cssOut(\n        `\n        .idea-counter-module .arrow::before,\n        .idea-counter-module .arrow::after\n    `,\n        {\n            borderColor: ColorsUtils.colorOut(globalVars.mixBgAndFg(0.75)),\n        },\n    );\n\n    cssOut(\n        `\n        .idea-counter-module .uservote .arrow::before,\n        .idea-counter-module .uservote .arrow::after\n    `,\n        {\n            borderColor: ColorsUtils.colorOut(globalVars.mixPrimaryAndBg(0.2)),\n        },\n    );\n\n    cssOut(`.idea-counter-module .score`, {\n        color: ColorsUtils.colorOut(globalVars.mainColors.fg),\n    });\n\n    cssOut(`.idea-counter-module`, {\n        float: \"none\",\n        margin: 0,\n    });\n\n    cssOut(\n        `\n        .DataList .ItemIdea.ItemIdea.ItemIdea .idea-counter-module .idea-counter-box,\n        .DataList .ItemIdea.ItemIdea.ItemIdea .PhotoWrap.IndexPhoto,\n        .MessageList .ItemIdea.ItemIdea.ItemIdea .idea-counter-module .idea-counter-box,\n        .MessageList .ItemIdea.ItemIdea.ItemIdea .PhotoWrap.IndexPhoto\n    `,\n        {\n            width: styleUnit(forumVars.countBox.width),\n            height: styleUnit(forumVars.countBox.height),\n        },\n    );\n};\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { allLinkStates, singleBorder } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { forumLayoutVariables } from \"@dashboard/compatibilityStyles/forumLayoutStyles\";\nimport { ISearchBarOverwrites, searchBarClasses } from \"@library/features/search/searchBarStyles\";\nimport { searchResultsVariables } from \"@library/features/search/searchResultsStyles\";\nimport { important, percent } from \"csx\";\nimport { metaContainerStyles, metaItemStyle } from \"@vanilla/library/src/scripts/styles/metasStyles\";\nimport { lineHeightAdjustment } from \"@library/styles/textUtils\";\nimport { suggestedTextStyleHelper } from \"@library/features/search/suggestedTextStyles\";\nimport { formElementsVariables } from \"@library/forms/formElementStyles\";\nimport { SearchBarPresets } from \"@library/banner/SearchBarPresets\";\nimport { CSSObject } from \"@emotion/css\";\nimport { Mixins } from \"@library/styles/Mixins\";\n\nexport const searchPageCSS = () => {\n    const globalVars = globalVariables();\n    const layoutVars = forumLayoutVariables();\n    const formElementVars = formElementsVariables();\n\n    cssOut(`.DataList.DataList-Search .Item.Item-Search .Img.PhotoWrap`, {\n        top: styleUnit(layoutVars.cell.paddings.vertical),\n        left: styleUnit(layoutVars.cell.paddings.horizontal),\n    });\n\n    cssOut(\n        `\n\n         #search-results .MessageList a,\n         #search-results .DataTableWrap a,\n         #search-results .Container .Frame-contentWrap .ChildCategories a,\n        .DataList#search-results a,\n        .DataList-Search#search-results .MItem-Author,\n        .DataList-Search#search-results .MItem-Author a,\n        .DataList-Search#search-results a,\n        .DataList-Search .MItem-Author a\n        `,\n        {\n            textDecoration: \"none\",\n            color: ColorsUtils.colorOut(globalVars.meta.text.color),\n            fontSize: styleUnit(globalVars.meta.text.size),\n        },\n    );\n\n    cssOut(\n        `\n          .DataList.DataList-Search#search-results .Item.Item-Search h3 a,\n      `,\n        {\n            textDecoration: \"none\",\n            ...Mixins.font({\n                color: globalVars.mainColors.fg,\n                size: globalVars.fonts.size.large,\n                weight: globalVars.fonts.weights.semiBold,\n                lineHeight: globalVars.lineHeights.condensed,\n            }),\n            ...allLinkStates({\n                hover: {\n                    color: ColorsUtils.colorOut(globalVars.links.colors.hover),\n                },\n                keyboardFocus: {\n                    color: ColorsUtils.colorOut(globalVars.links.colors.keyboardFocus),\n                },\n                focus: {\n                    color: ColorsUtils.colorOut(globalVars.links.colors.focus),\n                },\n                active: {\n                    color: ColorsUtils.colorOut(globalVars.links.colors.active),\n                },\n                visited: {\n                    color: ColorsUtils.colorOut(globalVars.links.colors.visited),\n                },\n            }),\n        },\n    );\n\n    cssOut(`.Item.Item-Search .Meta .Bullet`, {\n        display: important(\"none\"),\n    });\n\n    cssOut(`#search-results.DataList.DataList-Search .Item.Item-Search .Media-Body .Meta`, {\n        ...metaContainerStyles(),\n    });\n\n    cssOut(`#search-results.DataList.DataList-Search .Item.Item-Search .Media-Body .Bullet`, {\n        display: \"none\",\n    });\n\n    cssOut(`#search-results .DataList.DataList-Search .Breadcrumbs`, {\n        overflow: \"visible\",\n    });\n\n    cssOut(`#search-results .DataList.DataList-Search .Item-Body.Media`, {\n        margin: 0,\n    });\n\n    cssOut(`#search-results .DataList.DataList-Search + .PageControls.Bottom`, {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        ...{\n            \".Gloss\": {\n                margin: 0,\n                minHeight: 0,\n                minWidth: 0,\n            },\n            \".Pager\": {\n                float: \"none\",\n                marginRight: \"auto\",\n            },\n        },\n    });\n\n    cssOut(`#search-results .DataList.DataList-Search .Crumb`, {\n        ...Mixins.margin({\n            right: -6,\n            left: -6,\n        }),\n    });\n\n    cssOut(`#search-results.DataList .Item-Body`, {\n        paddingLeft: 0,\n        margin: 0,\n    });\n\n    cssOut(`#search-results.DataList .Item h3`, {\n        padding: 0,\n        margin: 0,\n    });\n\n    cssOut(\n        `\n        #search-results .Media-Body .Meta .MItem-Location,\n        `,\n        {\n            display: \"inline-block\",\n            padding: 0,\n            textTransform: \"none\",\n        },\n    );\n\n    cssOut(`#search-results .Media-Body .Meta .Breadcrumbs`, {\n        display: \"inline\",\n        padding: 0,\n        textTransform: \"none\",\n    });\n\n    cssOut(`#search-results .Item-Body .Meta`, metaContainerStyles());\n    cssOut(`#search-results .Item-Body .Meta > *`, metaItemStyle());\n\n    cssOut(`#search-results .Meta-Body.Meta .Breadcrumbs a`, {\n        fontSize: styleUnit(globalVars.meta.text.size),\n        textTransform: \"initial\",\n    });\n\n    cssOut(`#search-results .Meta-Body Meta`, {});\n\n    cssOut(`#search-results .Item-Body.Media .PhotoWrap`, {\n        display: \"none\",\n    });\n\n    // Search result styles\n    const searchResultsStyles = searchBarClasses({\n        preset: SearchBarPresets.BORDER,\n    } as ISearchBarOverwrites).searchResultsStyles;\n    const searchResultsVars = searchResultsVariables();\n\n    cssOut(`body.Section-SearchResults .MenuItems.MenuItems-Input.ui-autocomplete`, {\n        position: \"relative\",\n        ...Mixins.padding({\n            vertical: 0,\n        }),\n    });\n\n    // li\n    cssOut(`body.Section-SearchResults .MenuItems.MenuItems-Input.ui-autocomplete .ui-menu-item`, {\n        position: \"relative\",\n        padding: 0,\n        margin: 0,\n        ...{\n            \"& + .ui-menu-item\": {\n                borderTop: singleBorder({\n                    color: searchResultsVars.separator.fg,\n                    width: searchResultsVars.separator.width,\n                }),\n            },\n        },\n    });\n\n    // a\n    cssOut(`body.Section-SearchResults .MenuItems.MenuItems-Input.ui-autocomplete .ui-menu-item a`, {\n        ...suggestedTextStyleHelper().option,\n        display: \"flex\",\n        flexWrap: \"wrap\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n        ...{\n            \".Title\": {\n                ...searchResultsStyles.title,\n                ...lineHeightAdjustment(),\n                display: \"block\",\n                width: percent(100),\n                marginBottom: \".15em\",\n            },\n            \".Aside\": {\n                display: \"inline-block\",\n                float: \"none\",\n                ...searchResultsStyles.meta,\n            },\n            \".Aside .Date\": {\n                display: \"inline\",\n                ...searchResultsStyles.meta,\n            },\n            \".Gloss\": {\n                ...searchResultsStyles.excerpt,\n                display: \"block\",\n                paddingLeft: 0,\n                marginTop: 0,\n                width: percent(100),\n            },\n        },\n    } as CSSObject);\n\n    cssOut(`.Item-Search .Media .ImgExt`, {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n    });\n\n    cssOut(`.Item-Search .Summary`, {\n        marginTop: styleUnit(searchResultsVars.excerpt.margin),\n    });\n\n    const buttonWidth = 46;\n\n    cssOut(`body.Section-SearchResults .AdvancedSearch .InputAndButton .Handle.Handle `, {\n        right: styleUnit(buttonWidth),\n    });\n    cssOut(`body.Section-SearchResults .AdvancedSearch .InputAndButton .bwrap.bwrap`, {\n        minWidth: styleUnit(buttonWidth),\n    });\n\n    cssOut(`body.Section-SearchResults .AdvancedSearch .KeywordsWrap.InputAndButton .InputBox.InputBox`, {\n        paddingRight: styleUnit(buttonWidth * 2 - 10),\n    });\n};\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2021 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { MixinsFoundation } from \"@library/styles/MixinsFoundation\";\nimport { categoryListVariables } from \"@dashboard/compatibilityStyles/pages/CategoryList.variables\";\n\nexport const categoryListCompatCSS = () => {\n    const globalVars = globalVariables();\n    const vars = categoryListVariables();\n\n    MixinsFoundation.contentBoxes(vars.contentBoxes, \"CategoryList\");\n};\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2021 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { MixinsFoundation } from \"@library/styles/MixinsFoundation\";\nimport { conversationListVariables } from \"@dashboard/compatibilityStyles/pages/ConversationList.variables\";\n\nexport const conversationListCompatCSS = () => {\n    const globalVars = globalVariables();\n    const vars = conversationListVariables();\n\n    MixinsFoundation.contentBoxes(vars.contentBoxes, \"ConversationList\");\n\n    cssOut(`.Conversation .PhotoWrap`, {\n        top: 0,\n        left: 0,\n    });\n\n    cssOut(\".Conversation .Bullet\", {\n        display: \"inline-block\",\n    });\n};\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2021 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { MixinsFoundation } from \"@library/styles/MixinsFoundation\";\nimport { conversationVariables } from \"@dashboard/compatibilityStyles/pages/Conversation.variables\";\nimport { cssRaw } from \"@vanilla/library/src/scripts/styles/styleShim\";\n\nexport const conversationCompatCSS = () => {\n    const globalVars = globalVariables();\n    const vars = conversationVariables();\n\n    MixinsFoundation.contentBoxes(vars.contentBoxes, \"Conversation\");\n\n    cssRaw({\n        \".Section-Conversation .Panel\": {\n            \"& .Button + .Button\": {\n                // fix excesive margins on the New message + Leave conversation buttons.\n                marginTop: 0,\n            },\n        },\n        \".Section-Conversation .ConversationMessage\": {\n            display: \"flex\",\n            padding: 0,\n\n            \"& .PhotoWrap\": {\n                position: \"static\",\n                marginRight: 16,\n            },\n\n            \"& .Message\": {\n                marginTop: 4,\n            },\n\n            \"& .ConversationMessage-content\": {\n                flex: 1,\n            },\n        },\n    });\n};\n","/**\n * Compatibility styles, using the color variables.\n *\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\nimport { globalVariables } from \"@library/styles/globalStyleVars\";\nimport { ColorsUtils } from \"@library/styles/ColorsUtils\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { absolutePosition } from \"@library/styles/styleHelpers\";\nimport { styleUnit } from \"@library/styles/styleUnit\";\nimport { metaContainerStyles } from \"@library/styles/metasStyles\";\nimport { forumLayoutVariables } from \"@dashboard/compatibilityStyles/forumLayoutStyles\";\nimport { forumVariables } from \"@library/forms/forumStyleVars\";\n\nexport const messagesCSS = () => {\n    const globalVars = globalVariables();\n    const layoutVars = forumLayoutVariables();\n    const formVars = forumVariables();\n    const userPhotoVars = formVars.userPhoto;\n\n    cssOut(`.DismissMessage`, {\n        color: ColorsUtils.colorOut(globalVars.elementaryColors.black),\n    });\n\n    cssOut(\n        `\n        .Condensed.DataList .ItemContent.Conversation,\n        .ConversationMessage,\n\n        `,\n        {\n            paddingLeft: styleUnit(userPhotoVars.sizing.medium + layoutVars.cell.paddings.horizontal),\n        },\n    );\n\n    cssOut(`.Section-Conversation .MessageList .Message`, {\n        paddingLeft: 0,\n    });\n\n    cssOut(`.Condensed.DataList .ItemContent.Conversation .Meta`, {\n        ...metaContainerStyles(),\n    });\n\n    cssOut(`.Condensed.DataList .ItemContent.Conversation .Excerpt a`, {\n        textDecoration: \"none\",\n    });\n\n    cssOut(`.DataList.Conversations .Author.Photo`, {\n        ...absolutePosition.topLeft(layoutVars.cell.paddings.vertical, layoutVars.cell.paddings.horizontal),\n    });\n\n    cssOut(`.DataList.Conversations .Author.Photo .PhotoWrap`, {\n        position: \"static\",\n    });\n};\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { DropDownMenuIcon, DocumentationIcon, BookmarkIcon } from \"@vanilla/library/src/scripts/icons/common\";\nimport { cssRule } from \"@library/styles/styleShim\";\nimport { important } from \"csx\";\nimport { iconClasses } from \"@library/icons/iconStyles\";\n\nexport function applyCompatibilityIcons(scope: HTMLElement | Document | undefined = document) {\n    if (scope === undefined) {\n        return;\n    }\n    // Cog Wheels\n    cssRule(\".Arrow.SpFlyoutHandle::before\", { display: important(\"none\") });\n\n    const cogWheels = scope.querySelectorAll(\".Arrow.SpFlyoutHandle:not(.compatIcons)\");\n    cogWheels.forEach((wheel) => {\n        wheel.classList.add(\"compatIcons\");\n        ReactDOM.render(<DropDownMenuIcon />, wheel);\n    });\n\n    const docLinks = scope.querySelectorAll(\"a.documentationLink\");\n    docLinks.forEach((doc) => {\n        doc.classList.add(\"compatIcons\");\n        ReactDOM.render(<DocumentationIcon />, doc);\n    });\n\n    // Bookmarks\n    cssRule(\".Content a.Bookmark::before\", {\n        display: important(\"none\"),\n    });\n\n    const bookmarks = scope.querySelectorAll(\".Bookmark:not(.compatIcons)\");\n    const bookmarkLinkClass = iconClasses().bookmark();\n    bookmarks.forEach((bookmark) => {\n        bookmark.classList.add(bookmarkLinkClass);\n        bookmark.classList.add(\"compatIcons\");\n        ReactDOM.render(<BookmarkIcon />, bookmark);\n    });\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport isNumeric from \"validator/lib/isNumeric\";\nimport { logError, notEmpty } from \"@vanilla/utils\";\nimport { IMountable, mountReactMultiple } from \"@vanilla/react-utils/src\";\nimport { cssOut } from \"@dashboard/compatibilityStyles/cssOut\";\nimport { UserCardModuleLazyLoad } from \"@library/features/users/modules/UserCardModuleLazyLoad\";\nimport { deconstructAttributesFromElement } from \"@vanilla/react-utils\";\nimport { important } from \"csx\";\nimport { buttonVariables } from \"@vanilla/library/src/scripts/forms/Button.variables\";\nimport { generateButtonStyleProperties } from \"@library/forms/styleHelperButtonGenerator\";\nimport { userCardClasses } from \"@library/features/users/ui/popupUserCardStyles\";\nimport { numberFormattedClasses } from \"@library/content/NumberFormatted.styles\";\nimport { userCardDiscussionPlacement } from \"@dashboard/compatibilityStyles/userCards\";\nimport { getMeta } from \"@vanilla/library/src/scripts/utility/appUtils\";\nimport { hasUserViewPermission } from \"@library/features/users/modules/hasUserViewPermission\";\n\nexport function applyCompatibilityUserCards(scope: HTMLElement | Document | undefined = document) {\n    if (scope === undefined) {\n        return;\n    }\n\n    if (!hasUserViewPermission()) {\n        // We don't do user cards if the user's don't have\n        return;\n    }\n    const userCards = scope.querySelectorAll(\".js-userCard:not(.js-userCardInitialized)\");\n    const mountables: IMountable[] = Array.from(userCards)\n        .map((userLink) => {\n            const { userid } = (userLink as HTMLAnchorElement).dataset;\n            if (userid && isNumeric(userid) && userLink instanceof HTMLAnchorElement) {\n                const userPhoto = userLink.querySelector(\"img\");\n                const deconstructedImageData = userPhoto ? deconstructAttributesFromElement(userPhoto) : undefined;\n                const parentElement = userLink.parentElement;\n\n                if (parentElement) {\n                    const linkClasses = userLink.classList;\n                    linkClasses.add(\"js-userCardInitialized\"); // do not target more than once\n                    const placeholderElement = document.createElement(\"span\");\n                    placeholderElement.classList.add(\"userCardWrapper\");\n                    placeholderElement.classList.add(userPhoto ? \"userCardWrapper-photo\" : \"userCardWrapper-link\");\n\n                    parentElement.insertBefore(placeholderElement, userLink); // add placeholder before link\n                    parentElement.removeChild(userLink);\n\n                    return {\n                        component: (\n                            <UserCardModuleLazyLoad\n                                userID={parseInt(userid)}\n                                buttonContent={\n                                    deconstructedImageData ? <img {...deconstructedImageData} /> : userLink.innerText\n                                }\n                                buttonClass={userLink.classList.value}\n                                hasImage={!!deconstructedImageData}\n                                userURL={userLink.href}\n                            />\n                        ),\n                        target: placeholderElement,\n                    };\n                }\n            } else {\n                logError(`Invalid user ID \"${userid}\" for userlink: `, userLink);\n                return null;\n            }\n        })\n        .filter(notEmpty);\n    mountReactMultiple(mountables);\n\n    cssOut(\n        `\n        .Groups .DataTable.CategoryTable tbody td.LatestPost .flyouts,\n                .DataTable.CategoryTable tbody td.LatestPost .flyouts\n    `,\n        {\n            display: important(\"block\"),\n        },\n    );\n\n    cssOut(`.BlockColumn .Block.Wrap`, {\n        overflow: \"visible\",\n    });\n\n    cssOut(`.BlockColumn .Block.Wrap .userCardWrapper`, {\n        position: \"relative\",\n        maxWidth: \"100%\",\n    });\n\n    cssOut(\".userCardWrapper\", {\n        display: \"inline-flex\",\n    });\n\n    cssOut(`.DataTable .UserLink`, {\n        margin: important(0),\n    });\n\n    // Do not absolutely position PhotoWrap when it's in a .userCardWrapper\n    cssOut(\n        `\n        .MessageList .ItemComment .Item-Header .userCardWrapper .PhotoWrap,\n        .MessageList .ItemDiscussion .Item-Header .userCardWrapper .PhotoWrap\n    `,\n        {\n            position: \"relative\",\n            top: \"auto\",\n            left: \"auto\",\n        },\n    );\n\n    // Need to be much more specific than forum css\n    const classesUserCard = userCardClasses();\n    const buttonVars = buttonVariables();\n    const buttonStyles = generateButtonStyleProperties({\n        buttonTypeVars: buttonVars.standard,\n    });\n\n    const buttonsFromUserCardSelectors = `\n        .Groups .DataTable.CategoryTable tbody td.LatestPost a.${classesUserCard.button},\n        .DataTable.CategoryTable tbody td.LatestPost a.${classesUserCard.button}\n    `;\n\n    cssOut(buttonsFromUserCardSelectors, {\n        [`&&&&&&`]: {\n            ...buttonStyles,\n        },\n    });\n\n    const spanInMetaSelectors = `\n        .Groups .DataTable.CategoryTable tbody td.LatestPost .Meta .${numberFormattedClasses().root},\n        .DataTable.CategoryTable tbody td.LatestPost .Meta .${numberFormattedClasses().root},\n    `;\n\n    cssOut(buttonsFromUserCardSelectors, {\n        display: \"block\",\n    });\n\n    const LegacyDataDrivenTheme = getMeta(\"themeFeatures.LegacyDataDrivenTheme\", false);\n    if (LegacyDataDrivenTheme) {\n        userCardDiscussionPlacement();\n    }\n}\n","import React, { useContext } from \"react\";\nimport { DashboardLabelType } from \"@dashboard/forms/DashboardFormLabel\";\nimport { useThrowError } from \"@vanilla/react-utils\";\n\ninterface IGroupContext {\n    inputID: string;\n    labelID: string;\n    labelType: DashboardLabelType;\n}\nexport const FormGroupContext = React.createContext<IGroupContext | null>(null);\n\nexport function useFormGroup(): IGroupContext {\n    const context = useContext(FormGroupContext);\n\n    const throwError = useThrowError();\n    if (context === null) {\n        throwError(\n            new Error(\n                \"Attempting to create a dashboard from component without a form group. Be sure to place it in a <DashboardFormGroup />\",\n            ),\n        );\n    }\n    return context!;\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { useFormGroup } from \"@dashboard/forms/DashboardFormGroupContext\";\nimport { IFieldError } from \"@library/@types/api/core\";\nimport ErrorMessages from \"@library/forms/ErrorMessages\";\n\ninterface IProps {\n    label: string;\n    description?: React.ReactNode;\n    afterDescription?: React.ReactNode;\n    labelType?: DashboardLabelType;\n}\n\nexport enum DashboardLabelType {\n    STANDARD = \"standard\",\n    WIDE = \"wide\",\n}\n\nexport const DashboardFormLabel: React.FC<IProps> = (props: IProps) => {\n    const { inputID, labelID } = useFormGroup();\n\n    const labelType = props.labelType !== undefined ? props.labelType : DashboardLabelType.STANDARD;\n    const rootClass = labelType === DashboardLabelType.WIDE ? \"label-wrap-wide\" : \"label-wrap\";\n\n    return (\n        <div className={rootClass} id={labelID}>\n            {props.label && <label htmlFor={inputID}>{props.label}</label>}\n            {props.description && <div className=\"info\">{props.description}</div>}\n            {props.afterDescription}\n        </div>\n    );\n};\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useMemo } from \"react\";\nimport { useUniqueID } from \"@library/utility/idUtils\";\nimport { DashboardFormLabel, DashboardLabelType } from \"@dashboard/forms/DashboardFormLabel\";\nimport classNames from \"classnames\";\nimport { IFieldError } from \"@library/@types/api/core\";\nimport ErrorMessages from \"@library/forms/ErrorMessages\";\nimport { FormGroupContext } from \"./DashboardFormGroupContext\";\n\ninterface IProps {\n    label: string;\n    description?: React.ReactNode;\n    afterDescription?: React.ReactNode;\n    labelType?: DashboardLabelType;\n    tag?: keyof JSX.IntrinsicElements;\n    children: React.ReactNode;\n    isIndependant?: boolean; // Setting this resets the side margins.\n}\n\nexport function DashboardFormGroup(props: IProps) {\n    const Tag = (props.tag || \"li\") as \"li\";\n    const inputID = useUniqueID(\"formGroup-\");\n    const labelID = inputID + \"-label\";\n\n    return (\n        <Tag className={classNames(\"form-group\", props.isIndependant && \"row\")}>\n            <FormGroupContext.Provider\n                value={{ inputID, labelID, labelType: props.labelType || DashboardLabelType.STANDARD }}\n            >\n                <DashboardFormLabel {...props} />\n                {props.children}\n            </FormGroupContext.Provider>\n        </Tag>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { useFormGroup } from \"@dashboard/forms/DashboardFormGroupContext\";\nimport classNames from \"classnames\";\nimport { DashboardLabelType } from \"@dashboard/forms/DashboardFormLabel\";\nimport { t } from \"@vanilla/i18n\";\nimport { uploadFile } from \"@library/apiv2\";\nimport { IFieldError } from \"@library/@types/api/core\";\nimport ErrorMessages from \"@library/forms/ErrorMessages\";\nimport ButtonLoader from \"@vanilla/library/src/scripts/loaders/ButtonLoader\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\n\ninterface IProps {\n    value: string | null; // The image url\n    onChange: (newUrl: string) => void;\n    onImagePreview?: (tempImageUrl: string) => void;\n    className?: string;\n    placeholder?: string;\n    imageUploader?: typeof uploadFile;\n    disabled?: boolean;\n    errors?: IFieldError[];\n}\n\nexport function DashboardImageUpload(props: IProps) {\n    const { inputID, labelType } = useFormGroup();\n    const imageUploader = props.imageUploader || uploadFile;\n    const [isLoading, setIsLoading] = useState(false);\n    const [name, setName] = useState<string | null>(null);\n    const [uploadError, setUploadError] = useState<Error | null>(null);\n\n    // Used for stashing the URL we just uploaded so we don't wipe out our name in the next step.\n    const valueRef = useRef<string | null>(null);\n\n    useEffect(() => {\n        if (valueRef.current !== props.value) {\n            setName(null);\n        }\n    }, [props.value]);\n\n    const classes = classNames(\"form-control\", props.className);\n    const rootClass = labelType === DashboardLabelType.WIDE ? \"input-wrap-right\" : \"input-wrap\";\n\n    const fallbackName = props.value?.substring(props.value?.lastIndexOf(\"/\") + 1);\n\n    return (\n        <div className={rootClass}>\n            <label className=\"file-upload\">\n                <input\n                    key={`${isLoading}`}\n                    type=\"file\"\n                    id={inputID}\n                    className={classes}\n                    disabled={props.disabled}\n                    onChange={async (event) => {\n                        const file = event.target.files && event.target.files[0];\n                        if (!file) {\n                            return;\n                        }\n\n                        setIsLoading(true);\n                        setName(file.name);\n                        const tempUrl = URL.createObjectURL(file);\n                        props.onImagePreview && props.onImagePreview(tempUrl);\n\n                        // Upload the image.\n                        try {\n                            setUploadError(null);\n                            const uploaded = await imageUploader(file);\n                            valueRef.current = uploaded.url;\n                            props.onChange(uploaded.url);\n                            setIsLoading(false);\n                        } catch (e) {\n                            setUploadError(e);\n                            setIsLoading(false);\n                        }\n                    }}\n                />\n                <span className=\"file-upload-choose\">{name || fallbackName || props.placeholder || t(\"Choose\")}</span>\n                <span className=\"file-upload-browse\">\n                    {isLoading ? <ButtonLoader buttonType={ButtonTypes.DASHBOARD_PRIMARY} /> : t(\"Browse\")}\n                </span>\n            </label>\n            {props.errors && <ErrorMessages errors={props.errors} />}\n            {uploadError && (\n                <ErrorMessages errors={[{ message: uploadError.message, code: \"UploadError\", field: \"\" }]} />\n            )}\n        </div>\n    );\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { styleFactory } from \"@library/styles/styleUtils\";\nimport { useThemeCache } from \"@library/styles/themeCache\";\nimport { percent } from \"csx\";\n\nexport const smartAlignClasses = useThemeCache(() => {\n    const style = styleFactory(\"smartAlign\");\n\n    const root = style({\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        width: percent(100),\n    });\n\n    const inner = style(\"inner\", {\n        textAlign: \"left\",\n    });\n\n    return {\n        root,\n        inner,\n    };\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport classNames from \"classnames\";\nimport { smartAlignClasses } from \"@library/layout/smartAlignStyles\";\n\ninterface IProps {\n    className?: string;\n    children: React.ReactNode;\n    outerTag?: keyof JSX.IntrinsicElements;\n    innerTag?: keyof JSX.IntrinsicElements;\n}\n\nexport default class SmartAlign extends React.Component<IProps> {\n    public render() {\n        const Outer = this.props.outerTag || \"div\";\n        const Inner = this.props.outerTag || \"div\";\n        const classes = smartAlignClasses();\n        return (\n            <Outer className={classNames(\"smartAlign-outer\", this.props.className, classes.root)}>\n                <Inner className={classNames(\"smartAlign-inner\", classes.inner)}>{this.props.children}</Inner>\n            </Outer>\n        );\n    }\n}\n","/*\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport Button from \"@library/forms/Button\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport Frame from \"@library/layout/frame/Frame\";\nimport FrameBody from \"@library/layout/frame/FrameBody\";\nimport FrameFooter from \"@library/layout/frame/FrameFooter\";\nimport FrameHeader from \"@library/layout/frame/FrameHeader\";\nimport SmartAlign from \"@library/layout/SmartAlign\";\nimport ButtonLoader from \"@library/loaders/ButtonLoader\";\nimport Modal, { MODAL_CONTAINER_ID } from \"@library/modal/Modal\";\nimport ModalSizes from \"@library/modal/ModalSizes\";\nimport { t } from \"@library/utility/appUtils\";\nimport { getRequiredID, uniqueIDFromPrefix } from \"@library/utility/idUtils\";\nimport classNames from \"classnames\";\nimport React from \"react\";\nimport { frameBodyClasses } from \"@library/layout/frame/frameBodyStyles\";\nimport { frameFooterClasses } from \"@library/layout/frame/frameFooterStyles\";\n\ninterface IProps {\n    title: React.ReactNode; // required for accessibility\n    srOnlyTitle?: boolean;\n    className?: string;\n    onCancel?: (e: Event) => void;\n    onConfirm: (e: Event) => void;\n    confirmTitle?: string;\n    children: React.ReactNode;\n    isConfirmLoading?: boolean;\n    elementToFocusOnExit?: HTMLElement;\n    size?: ModalSizes;\n    isVisible: boolean;\n}\n\n/**\n * Basic confirm dialogue.\n */\nexport default class ModalConfirm extends React.Component<IProps> {\n    private cancelRef = React.createRef<HTMLButtonElement>();\n    private id = uniqueIDFromPrefix(\"confirmModal\");\n\n    public render() {\n        const { onConfirm, srOnlyTitle, isConfirmLoading, title, children, size } = this.props;\n        const onCancel = this.handleCancel;\n        const classesFrameBody = frameBodyClasses();\n        const classFrameFooter = frameFooterClasses();\n        return (\n            <Modal\n                isVisible={this.props.isVisible}\n                size={size ? size : ModalSizes.SMALL}\n                elementToFocus={this.cancelRef.current as HTMLElement}\n                exitHandler={onCancel}\n                titleID={this.titleID}\n                elementToFocusOnExit={this.props.elementToFocusOnExit}\n            >\n                <Frame\n                    header={\n                        <FrameHeader\n                            titleID={this.titleID}\n                            closeFrame={onCancel}\n                            srOnlyTitle={srOnlyTitle!}\n                            title={title}\n                        />\n                    }\n                    body={\n                        <FrameBody>\n                            <SmartAlign className={classNames(\"frameBody-contents\", classesFrameBody.contents)}>\n                                {children}\n                            </SmartAlign>\n                        </FrameBody>\n                    }\n                    footer={\n                        <FrameFooter justifyRight={true}>\n                            <Button\n                                className={classFrameFooter.actionButton}\n                                baseClass={ButtonTypes.TEXT}\n                                buttonRef={this.cancelRef}\n                                onClick={onCancel}\n                            >\n                                {t(\"Cancel\")}\n                            </Button>\n                            <Button\n                                className={classFrameFooter.actionButton}\n                                onClick={onConfirm}\n                                baseClass={ButtonTypes.TEXT_PRIMARY}\n                                disabled={isConfirmLoading}\n                            >\n                                {isConfirmLoading ? <ButtonLoader /> : this.props.confirmTitle || t(\"OK\")}\n                            </Button>\n                        </FrameFooter>\n                    }\n                />\n            </Modal>\n        );\n    }\n\n    private handleCancel = (e) => {\n        this.props.onCancel && this.props.onCancel(e);\n    };\n\n    public get titleID() {\n        return this.id + \"-title\";\n    }\n\n    public componentDidMount() {\n        this.forceUpdate();\n    }\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { onContent, getMeta, onReady, t } from \"@library/utility/appUtils\";\nimport { Route } from \"react-router-dom\";\nimport { registerReducer } from \"@library/redux/reducerRegistry\";\n// The forum section needs these legacy scripts that have been moved into the bundled JS so it could be refactored.\n// Other sections should not need this yet.\nimport \"@dashboard/legacy\";\nimport { convertAllUserContent, initAllUserContent } from \"@library/content\";\nimport SignInPage from \"@dashboard/pages/SignInPage\";\nimport PasswordPage from \"@dashboard/pages/PasswordPage\";\nimport RecoverPasswordPage from \"@dashboard/pages/RecoverPasswordPage\";\nimport NotificationsModel from \"@library/features/notifications/NotificationsModel\";\nimport { Router } from \"@library/Router\";\nimport { AppContext } from \"@library/AppContext\";\nimport { addComponent, addPageComponent } from \"@library/utility/componentRegistry\";\nimport { TitleBarHamburger } from \"@library/headers/TitleBarHamburger\";\nimport { authReducer } from \"@dashboard/auth/authReducer\";\nimport { compatibilityStyles } from \"@dashboard/compatibilityStyles\";\nimport { applyCompatibilityIcons } from \"@dashboard/compatibilityStyles/compatibilityIcons\";\nimport { createBrowserHistory } from \"history\";\nimport { applySharedPortalContext } from \"@vanilla/react-utils\";\nimport { ErrorPage } from \"@vanilla/library/src/scripts/errorPages/ErrorComponent\";\nimport { CommunityBanner, CommunityContentBanner } from \"@vanilla/library/src/scripts/banner/CommunityBanner\";\nimport { initPageViewTracking } from \"@vanilla/library/src/scripts/pageViews/pageViewTracking\";\nimport { enableLegacyAnalyticsTick } from \"@vanilla/library/src/scripts/analytics/AnalyticsData\";\nimport { NEW_SEARCH_PAGE_ENABLED } from \"@vanilla/library/src/scripts/search/searchConstants\";\nimport { SearchPageRoute } from \"@vanilla/library/src/scripts/search/SearchPageRoute\";\nimport { notEmpty } from \"@vanilla/utils\";\nimport { applyCompatibilityUserCards } from \"@dashboard/compatibilityStyles/compatibilityUserCards\";\nimport { DashboardImageUploadGroup } from \"@dashboard/forms/DashboardImageUploadGroup\";\nimport { LayoutProvider } from \"@vanilla/library/src/scripts/layout/LayoutContext\";\nimport { LayoutTypes } from \"@vanilla/library/src/scripts/layout/types/interface.layoutTypes\";\n\nonReady(initAllUserContent);\nonContent(convertAllUserContent);\n\naddComponent(\"imageUploadGroup\", DashboardImageUploadGroup, { overwrite: true });\n\n// Redux\nregisterReducer(\"auth\", authReducer);\nregisterReducer(\"notifications\", new NotificationsModel().reducer);\n\nRouter.addRoutes(\n    [\n        <Route exact path=\"/authenticate/signin\" component={SignInPage} key=\"signin\" />,\n        <Route exact path=\"/authenticate/password\" component={PasswordPage} key=\"password\" />,\n        <Route exact path=\"/authenticate/recoverpassword\" component={RecoverPasswordPage} key=\"recover\" />,\n        NEW_SEARCH_PAGE_ENABLED ? SearchPageRoute.route : null,\n    ].filter(notEmpty),\n);\n\napplySharedPortalContext((props) => {\n    return (\n        <AppContext variablesOnly noWrap errorComponent={ErrorPage}>\n            <LayoutProvider type={LayoutTypes.THREE_COLUMNS}>{props.children}</LayoutProvider>\n        </AppContext>\n    );\n});\n\n// Routing\naddPageComponent(() => <Router disableDynamicRouting />);\n\n// The community is still very tied into the global.js and legacyAnalyticsTick.json.\nenableLegacyAnalyticsTick(true);\n\n// Configure page view tracking\nonReady(() => {\n    initPageViewTracking(createBrowserHistory());\n});\n\naddComponent(\"title-bar-hamburger\", TitleBarHamburger);\naddComponent(\"community-banner\", CommunityBanner);\naddComponent(\"community-content-banner\", CommunityContentBanner);\n\nconst applyReactElementsInForum = (props: {\n    metaPermissionKey: string;\n    onInitialLoad: () => void;\n    onNewHTML: (e) => void;\n}) => {\n    const { metaPermissionKey, onInitialLoad, onNewHTML } = props;\n\n    if (getMeta(metaPermissionKey, false)) {\n        onReady(() => {\n            onInitialLoad();\n        });\n        onContent((e) => {\n            onNewHTML(e);\n        });\n    }\n};\n\napplyReactElementsInForum({\n    metaPermissionKey: \"themeFeatures.DataDrivenTheme\",\n    onInitialLoad: () => {\n        compatibilityStyles();\n        applyCompatibilityIcons();\n    },\n    onNewHTML: (e) => {\n        applyCompatibilityIcons(\n            e.target instanceof HTMLElement && e.target.parentElement ? e.target.parentElement : undefined,\n        );\n    },\n});\n\napplyReactElementsInForum({\n    metaPermissionKey: \"themeFeatures.UserCards\",\n    onInitialLoad: () => {\n        applyCompatibilityUserCards();\n    },\n    onNewHTML: (e) => {\n        applyCompatibilityUserCards(\n            e.target instanceof HTMLElement && e.target.parentElement ? e.target.parentElement : undefined,\n        );\n    },\n});\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React, { useState } from \"react\";\nimport { uploadFile } from \"@library/apiv2\";\nimport { DashboardFormGroup } from \"@dashboard/forms/DashboardFormGroup\";\nimport { DashboardImageUpload } from \"@dashboard/forms/DashboardImageUpload\";\nimport Button from \"@library/forms/Button\";\nimport { ButtonTypes } from \"@library/forms/buttonTypes\";\nimport { t } from \"@vanilla/i18n\";\nimport { IFieldError } from \"@library/@types/api/core\";\nimport ModalConfirm from \"@library/modal/ModalConfirm\";\n\ninterface IProps {\n    // Controlled props.\n    value?: string | null; // The image url\n    onChange?: (newUrl: string | null) => void;\n\n    // Legacy input Props\n    fieldName?: string;\n    initialValue?: string;\n\n    // Common props.\n    label: string;\n    description?: React.ReactNode;\n    imageUploader?: typeof uploadFile;\n    disabled?: boolean;\n    errors?: IFieldError[];\n}\n\nexport function DashboardImageUploadGroup(props: IProps) {\n    const [previewUrl, setPreviewUrl] = useState<string | null>(null);\n    const [ownValue, ownOnChange] = useState<string | null>(props.initialValue || null);\n    const [wantsDelete, setWantsDelete] = useState(false);\n\n    const value = props.value ?? ownValue;\n    const onChange = props.onChange ?? ownOnChange;\n\n    const [originalValue] = useState(value);\n\n    const imagePreviewSrc = previewUrl || value;\n    const isStillOriginalValue = originalValue === value;\n    const undoTitle = isStillOriginalValue ? t(\"Delete\") : t(\"Undo\");\n\n    return (\n        <>\n            <DashboardFormGroup\n                label={props.label}\n                description={props.description}\n                afterDescription={\n                    imagePreviewSrc && (\n                        <>\n                            <div>{<img src={imagePreviewSrc} />}</div>\n                            <div>\n                                <Button\n                                    baseClass={ButtonTypes.TEXT_PRIMARY}\n                                    onClick={() => {\n                                        setPreviewUrl(null);\n                                        if (isStillOriginalValue) {\n                                            setWantsDelete(true);\n                                        } else {\n                                            onChange(originalValue);\n                                        }\n                                    }}\n                                    disabled={props.disabled}\n                                >\n                                    {undoTitle}\n                                </Button>\n                            </div>\n                        </>\n                    )\n                }\n            >\n                {props.fieldName && <input type=\"hidden\" value={value || \"\"} name={props.fieldName} />}\n                <DashboardImageUpload\n                    value={value}\n                    onChange={onChange}\n                    onImagePreview={setPreviewUrl}\n                    imageUploader={props.imageUploader}\n                    disabled={props.disabled}\n                    errors={props.errors}\n                />\n            </DashboardFormGroup>\n            <ModalConfirm\n                isVisible={wantsDelete}\n                title={t(\"Confirm Deletion\")}\n                onConfirm={() => {\n                    onChange(\"\");\n                    setWantsDelete(false);\n                }}\n                onCancel={() => {\n                    setWantsDelete(false);\n                }}\n            >\n                {t(\"Are you sure you want to delete this image? You won't be able to recover it.\")}\n            </ModalConfirm>\n        </>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useAuthActions } from \"@dashboard/auth/AuthActions\";\nimport { useAuthStoreState } from \"@dashboard/auth/authReducer\";\nimport { PasswordForm } from \"@dashboard/auth/PasswordForm\";\nimport SSOMethods from \"@dashboard/auth/SSOMethods\";\nimport Or from \"@dashboard/forms/Or\";\nimport { LoadStatus } from \"@library/@types/api/core\";\nimport Loader from \"@library/loaders/Loader\";\nimport DocumentTitle from \"@library/routing/DocumentTitle\";\nimport { t } from \"@library/utility/appUtils\";\nimport { useUniqueID } from \"@library/utility/idUtils\";\nimport React, { useEffect } from \"react\";\nimport Message from \"@library/messages/Message\";\n\ninterface IProps {}\n\nexport default function SignInPage(props: IProps) {\n    const pageTitleID = useUniqueID(\"signinPage-title\");\n    const { authenticators: authenticatorState } = useAuthStoreState();\n    const { getAuthenticators } = useAuthActions();\n    const { status } = authenticatorState;\n\n    useEffect(() => {\n        if (status === LoadStatus.PENDING) {\n            getAuthenticators();\n        }\n    }, [status, getAuthenticators]);\n\n    if (authenticatorState.status === LoadStatus.LOADING) {\n        return <Loader />;\n    }\n\n    let showPassword = false;\n    const ssoMethods =\n        authenticatorState.data?.filter((a) => {\n            if (a.type === \"password\") {\n                showPassword = true;\n                return false;\n            }\n            return true;\n        }) ?? [];\n\n    return (\n        <div className=\"authenticateUserCol\">\n            {authenticatorState.error && <Message isFixed stringContents={authenticatorState.error.message} />}\n            <DocumentTitle title={t(\"Sign In\")}>\n                <h1 id={pageTitleID} className=\"isCentered\">\n                    {t(\"Sign In\")}\n                </h1>\n            </DocumentTitle>\n            <SSOMethods ssoMethods={ssoMethods} />\n            <Or visible={showPassword && ssoMethods.length > 0} />\n            {showPassword && <PasswordForm />}\n        </div>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { useAuthActions } from \"@dashboard/auth/AuthActions\";\nimport { useAuthStoreState } from \"@dashboard/auth/authReducer\";\nimport RememberPasswordLink from \"@dashboard/auth/RememberPasswordLink\";\nimport { LoadStatus } from \"@library/@types/api/core\";\nimport { getFieldErrors, getGlobalErrorMessage } from \"@library/apiv2\";\nimport ButtonSubmit from \"@library/forms/ButtonSubmit\";\nimport InputTextBlock from \"@library/forms/InputTextBlock\";\nimport Paragraph from \"@library/layout/Paragraph\";\nimport DocumentTitle from \"@library/routing/DocumentTitle\";\nimport { t } from \"@library/utility/appUtils\";\nimport { useUniqueID } from \"@library/utility/idUtils\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\ninterface IProps {}\n\nexport default function RecoverPasswordPage(props: IProps) {\n    const pageTitleID = useUniqueID(\"recoverPassword-title\");\n    const [email, setEmail] = useState(\"\");\n    const emailRef = useRef<InputTextBlock | null>(null);\n    const pageTitle = (\n        <DocumentTitle title={t(\"Recover Password\")}>\n            <h1 id={pageTitleID} className=\"isCentered\">\n                {t(\"Recover Password\")}\n            </h1>\n        </DocumentTitle>\n    );\n    const { resetPassword } = useAuthActions();\n    const { status, error } = useAuthStoreState().passwordReset;\n    const allowEdit = status !== LoadStatus.LOADING;\n\n    useEffect(() => {\n        if (status === LoadStatus.ERROR) {\n            emailRef.current?.focus();\n        }\n    }, [status]);\n\n    if (status === LoadStatus.SUCCESS) {\n        return (\n            <div className=\"authenticateUserCol\">\n                {pageTitle}\n                <Paragraph className=\"authenticateUser-paragraph\">\n                    {t(\"A message has been sent to your email address with password reset instructions.\")}\n                </Paragraph>\n                <RememberPasswordLink />\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"authenticateUserCol\">\n            {pageTitle}\n            <Paragraph className=\"authenticateUser-paragraph\">\n                {t(\"RecoverPasswordLabelCode\", \"Enter your email to continue.\")}\n            </Paragraph>\n            <form\n                onSubmit={(event) => {\n                    event.preventDefault();\n                    event.stopPropagation();\n                    resetPassword({ email });\n                }}\n                aria-labelledby={pageTitleID}\n                noValidate\n            >\n                <Paragraph className=\"authenticateUser-paragraph\" isError={true}>\n                    {getGlobalErrorMessage(error, [\"email\"])}\n                </Paragraph>\n                <InputTextBlock\n                    label={t(\"Email\")}\n                    inputProps={{\n                        required: true,\n                        value: email,\n                        onChange: (event) => setEmail(event.target.value),\n                        disabled: !allowEdit,\n                    }}\n                    errors={getFieldErrors(error, \"email\")}\n                    ref={emailRef}\n                />\n                <ButtonSubmit disabled={!allowEdit || email.length === 0} legacyMode={true}>\n                    {t(\"Request a new password\")}\n                </ButtonSubmit>\n            </form>\n            <RememberPasswordLink />\n        </div>\n    );\n}\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport TitleBar from \"@library/headers/TitleBar\";\nimport * as React from \"react\";\nimport { MemoryRouter } from \"react-router\";\n\ninterface IProps {\n    contents: string; // HTML content\n}\n\nexport function TitleBarHamburger(props: IProps) {\n    return (\n        <MemoryRouter>\n            <TitleBar useMobileBackButton={false} />\n        </MemoryRouter>\n    );\n}\n","/**\n * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport Banner from \"@library/banner/Banner\";\nimport { MemoryRouter } from \"react-router\";\n\ninterface IProps {\n    title?: string; // Often the message to display isn't the real H1\n    description?: string;\n    className?: string;\n    backgroundImage?: string;\n    contentImage?: string;\n}\n\n/**\n * Main banner for the community.\n */\nexport function CommunityBanner(props: IProps) {\n    return (\n        <MemoryRouter>\n            <Banner {...props} />\n        </MemoryRouter>\n    );\n}\n\n/**\n * Content banner for the community.\n */\nexport function CommunityContentBanner(props: IProps) {\n    return (\n        <MemoryRouter>\n            <Banner {...props} isContentBanner />\n        </MemoryRouter>\n    );\n}\n","import { cssRaw, flattenNests } from \"@library/styles/styleShim\";\nimport { CSSObject } from \"@emotion/css\";\n\nexport function cssOut(selector: string, ...objects: CSSObject[]): void {\n    cssRaw({\n        [selector]: objects.map(flattenNests),\n    });\n}\n","/**\n * Set wepback's public path.\n * Otherwise the lookups of dynamically imported webpack files can fail on sites that have a different webroot\n * Eg. installed in a subfolder / using Reverse Proxy.\n *\n * @author Adam Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport { assetUrl, getMeta } from \"@library/utility/appUtils\";\n\n/**\n * This needs to be a free variable.\n *\n * Webpack does some magic to make this work.\n * It you try and set a local or global version of it, it WILL NOT work.\n *\n * @see https://stackoverflow.com/questions/12934929/what-are-free-variables\n * @see https://webpack.js.org/configuration/output/#output-publicpath\n * @see https://github.com/webpack/webpack/issues/2776#issuecomment-233208623\n */\n// @ts-ignore: Cannot find variable warning. See comment aboe.\n__webpack_public_path__ = assetUrl(\"/dist/\" + __BUILD__SECTION__ + \"/\");\n","/**\n * @copyright 2009-2019 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { ReactElement } from \"react\";\n\nexport interface IComponentMountOptions {\n    overwrite?: boolean;\n    clearContents?: boolean;\n    widgetResolver?: IWidgetResolver;\n    bypassPortalManager?: boolean;\n    unmountBeforeRender?: boolean;\n}\n\nexport interface IWidgetOptions {\n    $type?: string; // the component to get, optional because coming from API\n    children?: IWidgetOptions[]; // widgets to mount as children\n    [x: string]: any; // can take additional properties\n}\n\n/**\n * Defines an interface for a function that will turn widget options into props that can be used to render a component.\n */\nexport interface IWidgetResolver {\n    (options: IWidgetOptions): {\n        [key: string]: any;\n    };\n}\n\ninterface IPortal {\n    target: HTMLElement;\n    component: React.ReactElement;\n}\n\nlet hasRendered = false;\nconst portals: IPortal[] = [];\n\nconst PORTAL_MANAGER_ID = \"vanillaPortalManager\";\ntype PortalContextType = React.FC<{ children?: React.ReactNode }>;\nlet PortalContext: PortalContextType = (props) => {\n    return <React.Fragment>{props.children}</React.Fragment>;\n};\n\nexport function applySharedPortalContext(context: PortalContextType) {\n    PortalContext = context;\n    if (hasRendered) {\n        // Re-render the portals. We never want to be the first to initialize rendering though.\n        renderPortals();\n    }\n}\n\n/**\n * Component for managing all mounted components from a single wrapped context.\n *\n * This allows a shared context provider to be applied to parts of the site.\n */\nfunction PortalManager() {\n    return (\n        <div>\n            <PortalContext>\n                {portals.map((portal, i) => {\n                    return (\n                        <React.Fragment key={i}>\n                            {ReactDOM.createPortal(portal.component, portal.target)}\n                        </React.Fragment>\n                    );\n                })}\n            </PortalContext>\n        </div>\n    );\n}\n\nfunction renderPortals(callback?: () => void) {\n    hasRendered = true;\n    // Ensure we have our modal container.\n    let container = document.getElementById(PORTAL_MANAGER_ID);\n    if (!container) {\n        container = document.createElement(\"div\");\n        container.id = PORTAL_MANAGER_ID;\n        document.body.appendChild(container);\n    }\n\n    ReactDOM.render(<PortalManager />, container, callback);\n}\n\n/**\n * Mount a root component of a React tree.\n *\n * - ReactDOM render.\n * - Typestyle render.\n *\n * If the overwrite option is passed this component will replace the components you passed as target.\n *\n * Default Mode:\n * <div><TARGET /></div> -> <div><TARGET><REACT></TARGET><div>\n *\n * Overwrite Mode:\n * <div><TARGET /></div> -> <div><REACT/></div>\n */\nexport function mountReact(\n    component: React.ReactElement,\n    target: HTMLElement,\n    callback?: () => void,\n    options?: IComponentMountOptions & { bypassPortalManager?: boolean },\n) {\n    if (options?.bypassPortalManager) {\n        const doRender = () => {\n            ReactDOM.render(<PortalContext>{component}</PortalContext>, target, callback);\n        };\n        if (options?.unmountBeforeRender) {\n            ReactDOM.unmountComponentAtNode(target);\n        }\n        setImmediate(doRender);\n        return;\n    }\n\n    let mountPoint = target;\n    let cleanupContainer: HTMLElement | undefined;\n    if (options?.clearContents) {\n        target.innerHTML = \"\";\n    }\n\n    if (options && options.overwrite) {\n        const container = document.createElement(\"span\");\n        cleanupContainer = container;\n        target.parentElement!.insertBefore(container, target);\n        mountPoint = container;\n    }\n    portals.push({ target: mountPoint, component });\n\n    renderPortals(() => {\n        if (cleanupContainer) {\n            target.remove();\n            if (cleanupContainer.firstElementChild) {\n                cleanupContainer.parentElement!.insertBefore(cleanupContainer.firstElementChild, cleanupContainer);\n                cleanupContainer.remove();\n                target.remove();\n            }\n        }\n        callback && callback();\n    });\n}\n\nexport interface IMountable {\n    target: HTMLElement;\n    component: React.ReactElement;\n}\n\nexport function mountReactMultiple(components: IMountable[], callback?: () => void, options?: IComponentMountOptions) {\n    if (!components.length) {\n        return;\n    }\n\n    let toCleanup: Array<{ target: HTMLElement; cleanup: HTMLElement }> = [];\n    components.forEach(({ component, target }) => {\n        let mountPoint = target;\n        if (options?.clearContents) {\n            target.innerHTML = \"\";\n        }\n\n        if (options && options.overwrite) {\n            const container = document.createElement(\"span\");\n            toCleanup.push({\n                target,\n                cleanup: container,\n            });\n            target.parentElement!.insertBefore(container, target);\n            mountPoint = container;\n        }\n        portals.push({ target: mountPoint, component });\n    });\n\n    renderPortals(() => {\n        toCleanup.forEach(({ cleanup, target }) => {\n            if (cleanup.firstElementChild) {\n                cleanup.parentElement!.insertBefore(cleanup.firstElementChild, cleanup);\n                cleanup.remove();\n                target.remove();\n            }\n        });\n        callback && callback();\n    });\n}\n\n/**\n * Mount a modal with ReactDOM. This is only needed at the top level context.\n *\n * If you are already in a react context, just use `<Modal />`.\n * Note: Using this will clear any other modals mounted with this component.\n *\n * @param element The <Modal /> element to render.\n * @param containerID The container to render the modal into. Defaults to modal container.\n * @param asRealPortal Whether or not we should render this as a real portal, or one managed by the portal manager.\n */\nexport function mountPortal(element: ReactElement<any>, containerID: string, asRealPortal: boolean = false) {\n    // Ensure we have our modal container.\n    let container = document.getElementById(containerID);\n    if (!container) {\n        container = document.createElement(\"div\");\n        container.id = containerID;\n        document.body.appendChild(container);\n    }\n\n    if (asRealPortal) {\n        return ReactDOM.createPortal(element, container);\n    } else {\n        return new Promise((resolve) => mountReact(element, container!, () => resolve()));\n    }\n}\n"],"sourceRoot":""}